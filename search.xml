<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>React æ€§èƒ½ä¼˜åŒ–å®è·µ</title>
      <link href="/8132b809f088/"/>
      <url>/8132b809f088/</url>
      
        <content type="html"><![CDATA[<h1 id="React-Profiler"><a href="#React-Profiler" class="headerlink" title="React Profiler"></a>React Profiler</h1><p>React 16.5 æ·»åŠ äº†å¯¹å¼€å‘è€…å·¥å…·çš„ Profiler æ’ä»¶çš„æ”¯æŒã€‚è¯¥æ’ä»¶ä½¿ç”¨äº† React çš„ Profiler API æ¥æ”¶é›†æ‰€æœ‰ç»„ä»¶æ¸²æŸ“çš„è€—æ—¶ï¼Œç›®çš„æ˜¯ä¸ºäº†æ‰¾å‡º React åº”ç”¨ç¨‹åºçš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p>è¿™ä¸ªâ€œProfilerâ€é¢æ¿åˆå§‹ä¸ºç©ºï¼Œä½ å¯ä»¥ç‚¹å‡» record æŒ‰é’®å¼€å§‹åˆ†æï¼š</p><p><img src="https://zh-hans.reactjs.org/static/bae8d10e17f06eeb8c512c91c0153cff/ad997/start-profiling.png"></p><p>å½“ä½ å¼€å§‹è®°å½•ä¹‹åï¼Œå¼€å‘è€…å·¥å…·å°†åœ¨æ¯æ¬¡åº”ç”¨ç¨‹åºæ¸²æŸ“æ—¶è‡ªåŠ¨æ”¶é›†æ€§èƒ½æ•°æ®ã€‚ ä½ å¯ä»¥å’Œå¹³å¸¸ä¸€æ ·ä½¿ç”¨ä½ çš„åº”ç”¨ç¨‹åºï¼Œ å½“ä½ å®Œæˆåˆ†æä¹‹åï¼Œè¯·ç‚¹å‡»â€œStopâ€æŒ‰é’®ã€‚</p><p><img src="https://zh-hans.reactjs.org/static/45619de03bed468869f7a0878f220586/ad997/stop-profiling.png"></p><h1 id="ä¼˜åŒ–æ³•åˆ™"><a href="#ä¼˜åŒ–æ³•åˆ™" class="headerlink" title="ä¼˜åŒ–æ³•åˆ™"></a>ä¼˜åŒ–æ³•åˆ™</h1><ul><li>æ³•åˆ™ä¸€ï¼šåŠ¨é™åˆ†ç¦»ï¼Œå°†å˜çš„éƒ¨åˆ†ä¸ä¸å˜çš„éƒ¨åˆ†åˆ†ç¦»ã€‚</li><li>æ³•åˆ™äºŒï¼šç¼“å­˜ï¼Œå¤æ‚è®¡ç®—å’Œæœ‰æ˜‚è´µæ¶ˆè€—çš„ç»„ä»¶ memo åŒ–ï¼Œæ¯”å¦‚ React çš„ useMemoã€useCallbackï¼ŒRedux çš„ useSelectorã€‚</li></ul><p>ä¸‹é¢æˆ‘ä»¬å°†æ ¹æ®è¿™äº›æ³•åˆ™ç»“åˆå®é™…å¼€å‘ä¸­æ¡ˆä¾‹è¿›è¡Œåˆ†æã€‚</p><h1 id="æ¡ˆä¾‹ä¸€"><a href="#æ¡ˆä¾‹ä¸€" class="headerlink" title="æ¡ˆä¾‹ä¸€"></a>æ¡ˆä¾‹ä¸€</h1><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå½“ state æ›´æ–°åï¼Œæ•´ä¸ªç»„ä»¶ä»¥åŠå®ƒçš„å­ç»„ä»¶éƒ½ä¼šé‡æ–°æ›´æ–°ï¼Œå°½ç®¡å­ç»„ä»¶æ²¡æœ‰ä¾èµ–ä»»ä½• stateï¼Œä¸‹é¢çš„ä¾‹å­å°±èƒ½å¾ˆå¥½åœ°å±•ç¤ºè¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params">props: &#123; count: <span class="built_in">number</span>&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;props.count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªæ˜¾ç¤ºéšæœºæ•°çš„ç»„ä»¶å’Œä¸€ä¸ªä¾èµ– count çŠ¶æ€çš„æ•°å­—æ˜¾ç¤ºç»„ä»¶ï¼Œä½¿ç”¨ React Profiler å·¥å…·åˆ†æå¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/09/25/zKn9HslamJi6Ro5.png"></p><p>å°±åƒé¢„æœŸçš„é‚£æ ·ï¼ŒAppã€Count å’Œ Random ç»„ä»¶éƒ½æ›´æ–°äº†ï¼Œä»å·¥å…·ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒä»¬æ›´æ–°çš„åŸå› ï¼š</p><ul><li>Appï¼šHook 1 changed.</li><li>Countï¼šProps changedï¼ˆcountï¼‰.</li><li>Randomï¼šThe parent component rendered.</li></ul><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œè¾¹é™¤äº† Count æ˜¯å› ä¸º count æ›´æ–°ä¹‹å¤–ï¼Œå…¶ä»–ç»„ä»¶çš„æ›´æ–°éƒ½æ˜¯è¢«æ— è¾œç‰µè¿çš„ã€‚æ ¹æ®æ³•åˆ™ä¸€ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å°† Count ç»„ä»¶å’Œå®ƒä¾èµ–çš„çŠ¶æ€å°è£…èµ·æ¥ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>ä»ä¸‹å›¾ Profiler åˆ†æå¯ä»¥çœ‹åˆ°å½“ count æ›´æ–°æ—¶ï¼Œåªæœ‰ Count ç»„ä»¶æ›´æ–°äº†ã€‚</p><p><img src="https://s2.loli.net/2022/09/25/YheAM9ZuviaJDmo.png"></p><p>ä¸Šé¢çš„ç¤ºä¾‹å¤ªè¿‡ç†æƒ³åŒ–ï¼Œå¤§éƒ¨åˆ†æ—¶å€™ï¼Œè´Ÿè´£æ›´æ–°çŠ¶æ€çš„ç»„ä»¶å’Œè´Ÿè´£å±•ç¤ºçŠ¶æ€çš„ç»„ä»¶å¯èƒ½å¹¶ä¸åœ¨ä¸€èµ·ï¼Œä¹Ÿå°±æ²¡åŠæ³•æŠ½ç¦»åŠ¨æ€ç»„ä»¶ã€‚æ¯”å¦‚æˆ‘ä»¬å°†ç¤ºä¾‹ä¸­çš„ç»„ä»¶ä½ç½®åšä¸‹è°ƒæ•´ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦æ³•åˆ™äºŒæ¥å¸®åŠ©æˆ‘ä»¬ï¼Œæœ€ç®€å•çš„æ˜¯é€šè¿‡ props.children å±æ€§æ¥å®ç°ï¼ŒåŸç†ä¸Šæ˜¯ä¸€ç§ä¾é ç¼“å­˜çš„ bailout ä¼˜åŒ–æ–¹æ¡ˆã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">CountProps</span> &#123;</span><br><span class="line">  children?: <span class="variable constant_">JSX</span>.<span class="property">Element</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params">props: CountProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;props.children&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Count</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h1 id="bailout"><a href="#bailout" class="headerlink" title="bailout"></a>bailout</h1><p>æƒ³è¦è§£é‡Šä¸ºä»€ä¹ˆæ¡ˆä¾‹ä¸€ä¸­ä½¿ç”¨ props.children å¯ä»¥è§£å†³é‡å¤æ¸²æŸ“ï¼Œå°±è¦äº†è§£ä¸€ä¸‹ React bailout æœºåˆ¶ã€‚</p><p>bailoutï¼ˆbail out of re-renderingï¼‰å¯ä»¥ç®€å•ç†è§£ä¸ºæ˜¯å¦é‡æ–°æ¸²æŸ“ã€‚</p><p>è¦è§¦å‘ bailout å‡½æ•°ï¼Œéœ€è¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ol><li>oldProps &#x3D;&#x3D;&#x3D; newProps å¹¶ä¸” Context æ²¡æœ‰æ”¹å˜</li><li>!includesSomeLane(renderLanes, updateLanes)</li></ol><p>å½“å‰ fiber ä¸Šæ˜¯å¦å­˜åœ¨æ›´æ–°ï¼Œå¦‚æœå­˜åœ¨é‚£ä¹ˆæ›´æ–°çš„ä¼˜å…ˆçº§æ˜¯å¦å’Œæœ¬æ¬¡æ•´æ£µ Fiber æ ‘è°ƒåº¦çš„ä¼˜å…ˆçº§ä¸€è‡´ï¼Ÿå¦‚æœä¸€è‡´ä»£è¡¨è¯¥ç»„ä»¶ä¸Šå­˜åœ¨æ›´æ–°ï¼Œéœ€è¦èµ° render é€»è¾‘ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// beginWork å‡½æ•°</span></span><br><span class="line"><span class="keyword">if</span> (current !== <span class="literal">null</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> oldProps = current.<span class="property">memoizedProps</span>;</span><br><span class="line">  <span class="keyword">const</span> newProps = workInProgress.<span class="property">pendingProps</span>;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    oldProps !== newProps ||</span><br><span class="line">    <span class="title function_">hasLegacyContextChanged</span>()</span><br><span class="line">  ) &#123;</span><br><span class="line">    didReceiveUpdate = <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="title function_">includesSomeLane</span>(renderLanes, updateLanes)) &#123;</span><br><span class="line">    didReceiveUpdate = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// å‘½ä¸­ bailoutOnAlreadyFinishedWork</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">bailoutOnAlreadyFinishedWork</span>(current, workInProgress, renderLanes);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bailout å‡½æ•°é€»è¾‘å¤§è‡´æ˜¯ï¼šå°½é‡å¤ç”¨ fiberï¼Œä¸è¿›è¡Œ renderã€‚fiber å¤ç”¨ï¼Œåˆ¤æ–­ fiber çš„å­æ ‘æ˜¯å¦æœ‰ workã€‚æœ‰ï¼Œè¿”å› childï¼Œç»§ç»­éå†å­æ ‘ã€‚æ— ï¼Œè¿”å› nullï¼Œè·³è¿‡å­æ ‘ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bailoutOnAlreadyFinishedWork å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bailoutOnAlreadyFinishedWork</span>(<span class="params"></span></span><br><span class="line"><span class="params">  current: Fiber | <span class="literal">null</span>,</span></span><br><span class="line"><span class="params">  workInProgress: Fiber,</span></span><br><span class="line"><span class="params">  renderLanes: Lanes,</span></span><br><span class="line"><span class="params"></span>): <span class="title class_">Fiber</span> | <span class="literal">null</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (current !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// é‡ç”¨ä»¥å‰çš„ context ä¾èµ–å…³ç³»</span></span><br><span class="line">    workInProgress.<span class="property">dependencies</span> = current.<span class="property">dependencies</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ£€æµ‹å­æ ‘(childLanes)æ˜¯å¦æœ‰ work</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">includesSomeLane</span>(renderLanes, workInProgress.<span class="property">childLanes</span>)) &#123;</span><br><span class="line">    <span class="comment">//æ— ï¼Œè·³è¿‡å­æ ‘</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è™½ç„¶ fiber æ²¡æœ‰ workï¼Œä½†æ˜¯å®ƒçš„å­æ ‘æœ‰ï¼Œå…‹éš†å­æ ‘çš„ fiber ç„¶åç»§ç»­æ£€æŸ¥</span></span><br><span class="line">  <span class="title function_">cloneChildFibers</span>(current, workInProgress);</span><br><span class="line">  <span class="keyword">return</span> workInProgress.<span class="property">child</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹ä¸€ä¸­ï¼Œç”±äº children Random ç»„ä»¶çš„ props æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¹¶ä¸” lanes ä¹Ÿä¸åœ¨ renderLanes ä¸Š ï¼ŒDiff ç»„ä»¶å‘½ä¸­ bailoutOnAlreadyFinishedWorkã€‚</p><p>lane æ˜¯ React è°ƒåº¦æ¨¡å‹ä¸­çš„ä¼˜å…ˆçº§æ¨¡å‹ã€‚æƒ³è±¡ä¸€ä¸‹ä¸åŒçš„èµ›è½¦ç–¾é©°åœ¨ä¸åŒçš„èµ›é“ã€‚å†…åœˆçš„èµ›é“æ€»é•¿åº¦æ›´çŸ­ï¼Œå¤–åœˆæ›´é•¿ã€‚æŸå‡ ä¸ªä¸´è¿‘çš„èµ›é“çš„é•¿åº¦å¯ä»¥çœ‹ä½œå·®ä¸å¤šé•¿ã€‚</p><p>lane æ¨¡å‹å€Ÿé‰´äº†åŒæ ·çš„æ¦‚å¿µï¼Œä½¿ç”¨ 31 ä½çš„äºŒè¿›åˆ¶è¡¨ç¤º 31 æ¡èµ›é“ï¼Œä½æ•°è¶Šå°çš„èµ›é“ä¼˜å…ˆçº§è¶Šé«˜ï¼ŒæŸäº›ç›¸é‚»çš„èµ›é“æ‹¥æœ‰ç›¸åŒä¼˜å…ˆçº§ã€‚</p><h1 id="æ¡ˆä¾‹äºŒ"><a href="#æ¡ˆä¾‹äºŒ" class="headerlink" title="æ¡ˆä¾‹äºŒ"></a>æ¡ˆä¾‹äºŒ</h1><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> countContext = <span class="title class_">React</span>.<span class="property">createContext</span>&lt;<span class="built_in">number</span>&gt;(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CountProvider</span> = countContext.<span class="property">Provider</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">CountProps</span> &#123;</span><br><span class="line">  children?: <span class="variable constant_">JSX</span>.<span class="property">Element</span></span><br><span class="line">  <span class="attr">onAdd</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">  <span class="attr">onMinus</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params">props: CountProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">useContext</span>(countContext);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;props?.onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;props?.onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">CountProvider</span> <span class="attr">value</span>=<span class="string">&#123;count&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Count</span> <span class="attr">onAdd</span>=<span class="string">&#123;onAdd&#125;</span> <span class="attr">onMinus</span>=<span class="string">&#123;onMinus&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">CountProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>è¯¥æ¡ˆä¾‹ä¸­æˆ‘ä»¬å¼•å…¥äº† Contextï¼Œå½“ context çš„ value æ”¹å˜æ—¶ï¼Œ</p><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><ul><li><a href="https://zh-hans.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html">React Profiler ä»‹ç»</a></li><li><a href="https://blog.wuct.me/react-internal-reconciliation-bailout-587695eb05a8?gi=c4bc84e7c1df">æ·±å…¥ React Reconciliation Bailout æ©Ÿåˆ¶</a></li><li><a href="https://jishuin.proginn.com/p/763bfbd32552">æˆ‘åœ¨å¤§å‚å†™Reactå­¦åˆ°äº†ä»€ä¹ˆï¼Ÿæ€§èƒ½ä¼˜åŒ–ç¯‡</a></li><li><a href="https://juejin.cn/post/7090466770774917150">react æ€§èƒ½ä¼˜åŒ– - childrenå¦‚ä½•é¿å…ä¸å¿…è¦çš„æ¸²æŸ“</a></li><li><a href="https://juejin.cn/post/7092593300233781285#heading-4">React æ€§èƒ½ä¼˜åŒ–ï¼Œä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> æ€§èƒ½ä¼˜åŒ– </tag>
            
            <tag> React.memo </tag>
            
            <tag> useMemo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯ç»„ä»¶åŒ–å®æˆ˜ä¹‹ Button</title>
      <link href="/f4ea430d1d6d/"/>
      <url>/f4ea430d1d6d/</url>
      
        <content type="html"><![CDATA[<blockquote><p>âš ï¸æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½</p></blockquote><blockquote><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<a href="https://youngjuning.js.org/">æ´›ç«¹ğŸ‹</a>ï¼Œä¸€åªä½åœ¨æ­åŸçš„æœ¨ç³»å‰ç«¯ğŸ§šğŸ»â€â™€ï¸ï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ğŸ“šï¼Œå¯ä»¥é€šè¿‡ç‚¹èµå¸®æˆ‘èšé›†çµåŠ›â­ï¸ã€‚</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ <a href="https://juejin.cn/post/6983854006124675108">ã€Šæ¯ä¸ªå‰ç«¯éƒ½åº”è¯¥æ‹¥æœ‰è‡ªå·±çš„ç»„ä»¶åº“,å°±åƒæ¯ä¸ªå¤å¤©éƒ½æœ‰è¥¿ç“œğŸ‰ã€‹</a> ä¸€æ–‡ä¸­ï¼Œæ´›ç«¹å¸¦é¢†å°é»‘ä»é›¶æ­å»ºäº†ä¸€ä¸ªç»„ä»¶åº“é¡¹ç›®ï¼Œå®Œæˆäº†é¡¹ç›®ç»“æ„ã€æ„å»ºã€æµ‹è¯•ã€æ–‡æ¡£ç­‰åŸºç¡€å·¥ç¨‹åŒ–å·¥ä½œå¹¶å®Œæˆäº†ç¬¬ä¸€ä¸ªç»„ä»¶ Iconã€‚æœ¬æœŸå»¶ç»­ä¸ŠæœŸçš„ç»„ä»¶å·¥ç¨‹åŒ–çš„ä¸»é¢˜ï¼Œå¤æ—¥ç‚çƒ­ï¼Œç‚¹ä¸Šä¸€æ¯æ¨æç”˜éœ²ï¼Œå’Œæ´›ç«¹èµ´ä¸€åœº Button å¼€å‘ä¹‹çº¦å§ã€‚èµ´çº¦åï¼Œä½ å°†ä¼šæ”¶è·ä»¥ä¸‹çš„å†…å®¹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58285f3cce144972b2ccb88e11efd73f~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>PSï¼šé…åˆ<a href="https://github.com/youngjuning/vant-react-native">ä»“åº“</a>å’Œ<a href="https://vant-react-native.js.org/">ç»„ä»¶åº“æ–‡æ¡£</a>é˜…è¯»æœ¬æ–‡æ•ˆæœæ›´ä½³å–²ï¼</p></blockquote><h2 id="Button-ä¸è®¾è®¡å¿ƒç†å­¦"><a href="#Button-ä¸è®¾è®¡å¿ƒç†å­¦" class="headerlink" title="Button ä¸è®¾è®¡å¿ƒç†å­¦"></a>Button ä¸è®¾è®¡å¿ƒç†å­¦</h2><p>ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œå…¥è¡Œè‡³ä»Šæ¥è§¦æœ€å¤šçš„å°±æ˜¯è®¾è®¡å¸ˆäº†ã€‚è€³æ¿¡ç›®æŸ“ä¸‹è™½è¯´æ²¡å­¦ä¼šä»€ä¹ˆè®¾è®¡å·¥å…·ï¼Œä½†æ˜¯å¯¹è®¾è®¡ä¸äººçš„å¿ƒç†æœ‰äº†ä¸€å®šè®¤è¯†ã€‚</p><p>æ´›ç«¹è®¤ä¸ºä»»ä½•äº‹ç‰©éƒ½ä¸å¯èƒ½å‡­ç©ºå‡ºç°ï¼Œè‡ªæœ‰å…¶ä¼ æ‰¿ã€‚ä½¿ç”¨å¹¿æ³›çš„åŸºç¡€ç•Œé¢å…ƒç´  Button ä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘ä»¬ç”Ÿæ´»ä¸­å°±æœ‰éšå¤„å¯è§çš„æŒ‰é’®ã€‚ä¸¾ä¸ªæ —å­ğŸŒ°ï¼Œæ¯å¤©ä¸Šç­ä¸‹ç­å¿…ç„¶è¦æŒ‰çš„ç”µæ¢¯æŒ‰é’®ã€æ‰‹æœºéŸ³é‡æŒ‰é’®ã€å°ç±³ 9 é¸¡è‚‹çš„å°çˆ±åŒå­¦å”¤èµ·æŒ‰é’®ã€‚è¦ææ¸…æ¥šä¸ºä»€ä¹ˆéœ€è¦æŒ‰é’®ï¼Œæˆ‘ä»¬æœ‰å¿…è¦æ¢ç©¶ä¸‹ç”Ÿæ´»ä¸­è¿™äº›æŒ‰é’®çš„ä½œç”¨ã€‚</p><h3 id="ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ"><a href="#ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ" class="headerlink" title="ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ"></a>ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ</h3><p>æƒ³è±¡ä¸€ä¸‹æŠŠé”®ç›˜æŒ‰é”®æ¢æˆè§¦æ‘¸å±ï¼Œä½ æœ€åœ¨ä¹çš„ä¸€å®šæ˜¯å®Œç¾è¿˜åŸç‰©ç†é”®çš„æ•²å‡»æ„Ÿï¼Œåƒæ´›ç«¹ç”¨æ‰‹æœºè™šæ‹Ÿé”®ç›˜å°±å–œæ¬¢è®¾ç½®æŒ‰é”®éœ‡åŠ¨å’ŒéŸ³æ•ˆã€‚é€šè¿‡æ‰“å‡»ï¼ˆç‚¹å‡»ï¼‰è·å¾—å¿«æ„Ÿæ˜¯è¾ƒä¸ºæ™®éçš„äººæ€§ã€‚æŒ‰é’®åœ¨æŒ‰ä¸‹ã€æ¾å¼€æ—¶æœ‰ä¸°å¯Œçš„è´¨æ„Ÿå’Œäº¤äº’æ„Ÿï¼Œå®Œç¾æ»¡è¶³äº†äººä»¬ç‚¹ä¸€ä¸‹çš„å¿«æ„Ÿã€‚</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/542a6bbb880e4594ae384ee0bd1e511d~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="ç°å®çš„å®ç”¨æ€§"><a href="#ç°å®çš„å®ç”¨æ€§" class="headerlink" title="ç°å®çš„å®ç”¨æ€§"></a>ç°å®çš„å®ç”¨æ€§</h3><p>ä» BB æœºåˆ°è¯ºåŸºäºšå†åˆ°å¦‚ä»Šçš„æ™ºèƒ½æœºï¼Œå®ä½“æŒ‰é’®å‰Šå‡åˆ°åªå‰©ä¸‹éŸ³é‡é”®å’Œå¼€å…³æœºé”®ã€‚æŒ‰é”®è™½ç„¶å…‰ç§ƒç§ƒæ²¡æœ‰ä»»ä½•æ ‡è¯†ï¼Œä½†æˆ‘ä»¬å°±æ˜¯çŸ¥é“å®ƒçš„åŠŸèƒ½ã€‚è¯•æƒ³ä¸€ä¸‹æ²¡æœ‰è¿™ä¸ªæ¥è‡ªè¿œå¤æ—¶ä»£çš„å¼€å…³é”®ï¼Œä½ æ‰‹é‡Œçš„æ‰‹æœºå°±æ˜¯ä¸€å—æ¿ç –ã€‚</p><h3 id="ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„"><a href="#ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„" class="headerlink" title="ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„"></a>ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„</h3><p>å°ç±³ 9 å•ç‹¬å”¤èµ·å°çˆ±åŒå­¦çš„æŒ‰é”®ç»å¸¸ä¼šè¢«è¯¯æŒ‰ï¼Œä¹‹å‰æˆ‘è¿˜ä¸ç†è§£è¿™ä¹ˆè ¢çš„è®¾è®¡çš„ç›®çš„ã€‚åœ¨ç®€å•ç ”ç©¶äº†ç‚¹è®¾è®¡å¿ƒç†å­¦æˆ‘æ˜ç™½äº†ã€‚å°çˆ±çš„è®¾è®¡è€…ä¸ºäº† äº§å“æ—¥æ´»å’Œ AI è®­ç»ƒå°±æ˜¯æ•…æ„è¿™ä¸ªè®¾è®¡çš„ã€‚</p><p>å°ç±³ 10 è™½ç„¶ç§»é™¤äº†å•ç‹¬çš„å”¤èµ·é”®ï¼Œå´æŠŠåŸæ¥çš„ç”µæºé”®æ”¹æˆäº†ä¸€é”®å¤šç”¨ã€‚æ¯æ¬¡æƒ³è¦é‡å¯æ‰‹æœºè¿˜å¾—å…ˆå”¤èµ·ä¸€ä¸‹å°çˆ±åŒå­¦ã€‚ä¸å¾—ä¸è¯´ï¼Œå°çˆ±åŒå­¦å°ç±³äº²å¥³å„¿ã€‚</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/633381b8c2c342ed94bf024dbc19cf76~tplv-k3u1fbpfcp-watermark.image"></p><p>åæ§½å½’åæ§½ï¼Œå°ç±³è¿™ä¸ªæŒ‰é’®ç¡®å®èµ·åˆ°äº†åŸ¹å…»ç”¨æˆ·ä¹ æƒ¯çš„ä»»åŠ¡ã€‚å½“ç”¨æˆ·çŸ¥æ‚‰æŸä¸ªæŒ‰é’®èƒ½æŒ‡å‘æŸä¸ªæ“ä½œï¼Œæˆ–è€…è·å–æŸç±»ä¿¡æ¯åï¼Œé•¿æ­¤ä»¥å¾€ç”¨æˆ·å°±ä¼šå½¢æˆä½¿ç”¨ä¹ æƒ¯ã€‚å¦‚æœæŸæ“ä½œèƒ½å¤Ÿä¸ºç”¨æˆ·å’Œå‚å•†æŒç»­å¸¦æ¥ä»·å€¼ï¼Œé‚£å°±å¯ä»¥è®©æŒ‰é’®çš„ä½ç½®æ›´åŠ é†’ç›®ï¼ŒæŒç»­åŸ¹å…»ç”¨æˆ·ç‚¹å‡»ä¹ æƒ¯ã€‚</p><h3 id="æŒ‡å¼•ç”¨æˆ·æ“ä½œ"><a href="#æŒ‡å¼•ç”¨æˆ·æ“ä½œ" class="headerlink" title="æŒ‡å¼•ç”¨æˆ·æ“ä½œ"></a>æŒ‡å¼•ç”¨æˆ·æ“ä½œ</h3><p>è¿™ä¸ªåœ¨ Web å¼€å‘ä¸­æ˜¯æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯ä¸ªå¯äº¤äº’é¡µé¢ä¸Šéƒ½æœ‰è¿™ç±»æŒ‰é’®çš„å‡ºç°ï¼Œç”¨æ¥æŒ‡å¼•ç”¨æˆ·ä¸‹ä¸€æ­¥è¯¥æ€ä¹ˆåšã€‚æ¯”å¦‚è¡¨å•çš„æäº¤å’Œé‡ç½®ã€‚</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2c2a8abbe84471f96a67e18196c53fb~tplv-k3u1fbpfcp-watermark.image"></p><p>è™½ç„¶æŒ‰é’®ä¹Ÿå¸¸ä½œä¸ºè¡¨å•å…ƒç´ ï¼Œä½†æ˜¯åŒºåˆ«äºå…¶ä»–è¡¨å•å…ƒç´ ï¼ŒæŒ‰é’®å› å…¶å¤©ç„¶åœ°è‡ªè¯´æ˜æ€§ï¼Œä¸éœ€è¦ Label å¯¹å…¶è¿›è¡Œè¾…åŠ©è¯´æ˜ï¼Œå•°å—¦è¿™ä¹ˆå¤šï¼Œæ˜å‹ä»¬åº”è¯¥åœ¨çœ‹åˆ°ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œåº”è¯¥ä¹Ÿä¼šæœ‰ä»è®¾è®¡ä¸Šå“é‰´çš„æ„è¯†äº†ï¼Œæ¬¢è¿å°†å¯¹ä¸‹å›¾çš„å“é‰´åœ¨è¯„è®ºåŒºå‘Šè¯‰æ´›ç«¹ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/88c6754b28984fc3866319c35790fc03~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="ç»„ä»¶ä¸»é¢˜åŒ–"><a href="#ç»„ä»¶ä¸»é¢˜åŒ–" class="headerlink" title="ç»„ä»¶ä¸»é¢˜åŒ–"></a>ç»„ä»¶ä¸»é¢˜åŒ–</h2><p>åœ¨å¼€å§‹å¼€å‘å…·ä½“ç»„ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆçº¦å®šå¥½ç»„ä»¶ä¸»é¢˜åŒ–çš„è§„èŒƒã€‚ä¹‹å‰ antd-mobile-rn å°±å› ä¸ºè®¾è®¡é—®é¢˜ï¼Œä¸­é€”èŠ±è´¹å¤§åŠ›æ°”é‡æ„ã€‚å‡ ä¹æ‰€æœ‰çš„ç»„ä»¶åº“éƒ½ä¼šå°†è‰²å½©ã€å¸ƒå±€è¿™äº›ä»¥ css å˜é‡çš„å½¢å¼æä¾›ç»™ä½¿ç”¨è€…å’Œå¼€å‘è€…ä¸ºï¼ŒReact Native ä¸åŒçš„æ˜¯æ ·å¼åŸºäº CSS in JSï¼Œä¸è¿‡é“ç†ç›¸é€šï¼Œå‚ç…§ vant çš„<a href="https://github.com/youzan/vant/blob/dev/src/style/var.less">è®¾è®¡èµ„æº</a>ï¼Œæˆ‘ä»¬æŠ½å‡ºäº†ä¸€å¥— JavaScript å¸¸é‡ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// packages/themes</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Theme</span> &#123;</span><br><span class="line">  <span class="string">&#x27;animation-duration-base&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;animation-duration-fast&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;animation-timing-function-enter&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;animation-timing-function-leave&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-xs&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-sm&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-md&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-lg&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-weight-bold&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="comment">// å˜é‡è¿‡å¤šï¼Œè¿™é‡Œä»…å±•ç¤ºéƒ¨åˆ†å˜é‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™äº› JS å¸¸é‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¾è®¡ä¸»é¢˜ç³»ç»Ÿã€‚åŸºäº CSS in JS çš„ä¸»é¢˜åŒ–è®¾è®¡ä¸€èˆ¬æ˜¯åŸºäº React Context å®ç°ï¼Œéœ€è¦æä¾› ThemeProvider ä¼ å…¥ä¸»é¢˜ä¸Šä¸‹æ–‡ï¼ŒThemeConsumerã€WithThemeï¼ˆé«˜é˜¶ç±»ç»„ä»¶ï¼‰ã€withThemeï¼ˆé«˜é˜¶å‡½æ•°ç»„ä»¶ï¼‰ æˆ– useThemeï¼ˆReact Hooksï¼‰ä½œä¸ºæ¶ˆè´¹è€…è·å–ä¸Šä¸‹æ–‡ã€‚è‡ªå·±å®ç°ä¹Ÿä¸éš¾ï¼Œä¸è¿‡æ›´æ–‡ä»»åŠ¡æ¯”è¾ƒç´§æ€¥ï¼Œæˆ‘ä»¬å…ˆåŸºäº <a href="https://github.com/cssinjs/theming">cssinjs&#x2F;theming</a> å®ç°åŠŸèƒ½ï¼ŒåæœŸæœ‰éœ€è¦å†å›æ¥é€ è½®å­ä¹Ÿä¸è¿Ÿã€‚ä¸‹é¢ğŸ‘‡å°±æ˜¯æˆ‘ä»¬åŸºäº theming çš„ <code>createTheming</code> å‡½æ•°åˆ›å»ºè‡ªå®šä¹‰ä¸»é¢˜ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createTheming &#125; <span class="keyword">from</span> <span class="string">&#x27;theming&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> context = <span class="title class_">React</span>.<span class="title function_">createContext</span>(defaultTheme);</span><br><span class="line"><span class="keyword">const</span> theming = <span class="title function_">createTheming</span>(context);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> &#123; <span class="title class_">ThemeProvider</span>, withTheme, useTheme &#125; = theming;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸»é¢˜åŠŸèƒ½æ˜¯é€šç”¨çš„ï¼Œå› æ­¤æˆ‘å°†ä¸»é¢˜ç›¸å…³çš„èƒ½åŠ›éƒ½æ”¾åœ¨ <code>@vant-react-native/theme</code> åŒ…ä¸­å‘å¸ƒã€‚</p></blockquote><h2 id="Button-çš„å®ç°"><a href="#Button-çš„å®ç°" class="headerlink" title="Button çš„å®ç°"></a>Button çš„å®ç°</h2><p>React Native å†…ç½®çš„ Button ç»„ä»¶çš„æ ·å¼æ˜¯å›ºå®šçš„ï¼Œåªèƒ½è¿›è¡Œä¸€äº›ç®€å•çš„è®¾ç½®ã€‚ä¸”å†…ç½®çš„ Button ç»„ä»¶åœ¨ Android å’Œ ios ä¸¤ä¸ªå¹³å°ä¸Šçš„è¡¨ç°å¹¶ä¸ä¸€è‡´ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ ¹æ®æ›´åº•å±‚çš„ç»„ä»¶è¿›è¡Œå°è£…ã€‚æˆ‘ä»¬å¯¹æ¯” ant-design-mobile-rn å’Œ react-native-elements åé‡‡ç”¨äº†å‰è€…ä½¿ç”¨çš„ <code>TouchableHighlight</code> ç»„ä»¶ã€‚ç”±äºç»§æ‰¿è‡ª TouchableHighlightï¼Œæ‰€ä»¥æˆ‘ä»¬ç»„ä»¶çš„ Props ç±»å‹å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TouchableHighlightProps</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ButtonProps</span> <span class="keyword">extends</span> <span class="title class_">TouchableHighlightProps</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŒ‰é’®ç±»å‹"><a href="#æŒ‰é’®ç±»å‹" class="headerlink" title="æŒ‰é’®ç±»å‹"></a>æŒ‰é’®ç±»å‹</h3><p>vant çš„ <a href="https://youzan.github.io/vant/#/zh-CN/button#an-niu-lei-xing">Button</a> æ”¯æŒ <code>default</code>ã€<code>primary</code>ã€<code>info</code>ã€<code>warning</code>ã€<code>danger</code> äº”ç§ç±»å‹ï¼Œé»˜è®¤ä¸º <code>default</code>ã€‚ç°åœ¨ï¼Œç»„ä»¶çš„åŸºæœ¬å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">FunctionComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Text</span>, <span class="title class_">View</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ButtonProps</span> &#123;</span><br><span class="line">  <span class="keyword">type</span>?: <span class="string">&#x27;default&#x27;</span> | <span class="string">&#x27;primary&#x27;</span> | <span class="string">&#x27;info&#x27;</span> | <span class="string">&#x27;warning&#x27;</span> | <span class="string">&#x27;danger&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Button</span>: <span class="title class_">FunctionComponent</span>&lt;<span class="title class_">ButtonProps</span>&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„ç»„ä»¶ä¸ºäº†é€‚åº”ä¸»é¢˜åŒ–éœ€æ±‚ï¼Œæ ·å¼ä¸èƒ½æ˜¯å†™æ­»åœ¨ç»„ä»¶é‡Œçš„ï¼Œè€Œæ˜¯è¦é€šè¿‡ä¸Šä¸‹æ–‡è·å–æ ·å¼å¸¸é‡ã€‚æˆ‘ä»¬æ€è·¯æ˜¯é¦–å…ˆä½¿ç”¨ <code>useTheme</code> ä»ä¸Šä¸‹æ–‡ä¸­è·å–ä¸»é¢˜ï¼Œç„¶åç”±äºæ ·å¼å®šä¹‰è¾ƒå¤šï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªç»„ä»¶ç¼–å†™ä¸€ä¸ª <code>useStyle</code> hook æ”¾åœ¨å•ç‹¬çš„ style.ts æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StyleSheet</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Theme</span>, useTheme &#125; <span class="keyword">from</span> <span class="string">&#x27;@vant-react-native/theme&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">useStyle</span> = props =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> theme = useTheme&lt;<span class="title class_">Theme</span>&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getBackgroundColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">switch</span> (props.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;primary&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;success-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;info&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;primary-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;warning&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;warning-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;danger&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;danger-color&#x27;</span>];</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getTextColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">type</span> === <span class="string">&#x27;default&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getBorderRadius</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">round</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-max&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">square</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-sm&#x27;</span>];</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">container</span>: &#123;</span><br><span class="line">      <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="title function_">getBackgroundColor</span>(),</span><br><span class="line">      <span class="attr">borderColor</span>: <span class="title function_">getBorderColor</span>(),</span><br><span class="line">      <span class="attr">borderRadius</span>: theme[<span class="string">&#x27;border-radius-sm&#x27;</span>],</span><br><span class="line">      <span class="attr">borderWidth</span>: theme[<span class="string">&#x27;border-width-base&#x27;</span>],</span><br><span class="line">      <span class="attr">flexDirection</span>: <span class="string">&#x27;row&#x27;</span>,</span><br><span class="line">      <span class="attr">flex</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">justifyContent</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">      <span class="attr">opacity</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">paddingHorizontal</span>: <span class="number">15</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">indicator</span>: &#123;</span><br><span class="line">      <span class="attr">marginRight</span>: theme[<span class="string">&#x27;padding-xs&#x27;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">textStyle</span>: &#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="title function_">getTextColor</span>(),</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="number">14</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">wrapper</span>: &#123;</span><br><span class="line">      <span class="attr">borderRadius</span>: theme[<span class="string">&#x27;border-radius-sm&#x27;</span>],</span><br><span class="line">      <span class="attr">height</span>: <span class="number">44</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> styles;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åŸºäº <code>useStyle</code> æˆ‘ä»¬ä¾¿å¯å®Œæˆä¸€ä¸ªæ”¯æŒå¤šç±»å‹çš„ Button ç»„ä»¶ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Button</span>: <span class="title class_">FunctionComponent</span>&lt;<span class="title class_">ButtonProps</span>&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> styles = <span class="title function_">useStyle</span>(props);</span><br><span class="line">  <span class="keyword">const</span> &#123; style, ...restProps &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">TouchableHighlight</span> <span class="attr">style</span>=<span class="string">&#123;[styles.wrapper,</span> <span class="attr">style</span>]&#125; &#123;<span class="attr">...restProps</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;typeof props.children === &#x27;string&#x27; ? (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;styles.textStyle&#125;</span>&gt;</span>&#123;props.children&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ) : (</span></span><br><span class="line"><span class="language-xml">          props.children</span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">TouchableHighlight</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå­ç»„ä»¶å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯èƒ½æ˜¯ç»„ä»¶ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­ç±»å‹ã€‚</p></blockquote><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a0b412c227e4dc994b818294165240d~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æœ´ç´ æŒ‰é’®"><a href="#æœ´ç´ æŒ‰é’®" class="headerlink" title="æœ´ç´ æŒ‰é’®"></a>æœ´ç´ æŒ‰é’®</h3><p>æœ´ç´ æŒ‰é’®çš„æ–‡å­—ä¸ºæŒ‰é’®é¢œè‰²ï¼ŒèƒŒæ™¯ä¸ºç™½è‰²ï¼Œæˆ‘ä»¬é€šè¿‡ <code>plain</code> å±æ€§å°†æŒ‰é’®è®¾ç½®ä¸ºæœ´ç´ æŒ‰é’®ã€‚è°ƒç ”äº† antd å’Œ react-native-elements å‘ç°å®ƒä»¬éƒ½æ˜¯å®šä¹‰äº†å¾ˆå¤šæ ·å¼ï¼Œç„¶ååœ¨ç»„ä»¶å†…é€šè¿‡é€»è¾‘åˆ¤æ–­è®¡ç®—å…·ä½“æ ·å¼çš„å€¼ã€‚ä¸ªäººå¾ˆä¸å–œæ¬¢è¿™ç§æ–¹å¼ï¼Œä¸æ˜¯å½»åº•çš„ CSS in JSï¼Œæˆ‘çš„å¤„ç†æ–¹å¼æ˜¯å°†æ‰€æœ‰æœ‰å…³æ ·å¼è®¡ç®—çš„éƒ½å°è£…åœ¨æ¯ä¸ªç»„ä»¶çš„ <code>useStyle</code> é’©å­ä¸­ï¼Œæ¯”å¦‚å½“å¼•å…¥æœ´ç´ æŒ‰é’®å±æ€§æ—¶ï¼Œç›¸å¯¹äºæ™®é€šæŒ‰é’®æ”¹å˜çš„æœ‰å®¹å™¨èƒŒæ™¯è‰²ã€å®¹å™¨è¾¹æ¡†å’Œå­—ä½“é¢œè‰²ã€‚æ‰€ä»¥æˆ‘ä»¬å°†è¿™ä¸‰ä¸ªå±æ€§çš„å€¼éƒ½é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°è®¡ç®—ã€‚å¯¹æ¯” antd çš„æºç ï¼Œä¼šå‘ç°ä¸ä»…ä»£ç æ›´æ˜“è¯»ï¼Œç”šè‡³ä»£ç é‡ä¹Ÿå°‘äº†ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getBackgroundColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">plain</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getTextColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">plain</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (props.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;primary&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;success-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;info&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;primary-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;warning&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;warning-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;danger&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;danger-color&#x27;</span>];</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;gray-3&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (props.<span class="property">type</span> === <span class="string">&#x27;default&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0fc1bedf56fe4dd0a31e6d18b048665c~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="ç»†è¾¹æ¡†"><a href="#ç»†è¾¹æ¡†" class="headerlink" title="ç»†è¾¹æ¡†"></a>ç»†è¾¹æ¡†</h3><p>vant å®ç°ç»†è¾¹æ¡†æ˜¯é€šè¿‡è®¾ç½® <code>hairline</code> å±æ€§å¯ä»¥å±•ç¤º 0.5px çš„ç»†è¾¹æ¡†ã€‚ä½†æ˜¯æ‰‹æœºä¸Šç”±äºåˆ†è¾¨ç‡çš„å½±å“ï¼Œè´¸ç„¶è®¾ç½® 0.5 ä¼šå¯¼è‡´è¾¹æ¡†ä¸æ˜¾ç¤ºçš„å…¼å®¹é—®é¢˜ã€‚å¥½åœ¨ React Native ä¸ºæˆ‘ä»¬æä¾›äº† <code>StyleSheet.hairlineWidth</code> å¸¸é‡æ¥å…¼å®¹æœ€ç»†è¾¹æ¡†é—®é¢˜ï¼Œä¸‹é¢æ˜¯å®˜æ–¹å¯¹å®ƒçš„å®šä¹‰ï¼š</p><blockquote><p>hairlineWidth è¿™ä¸€å¸¸é‡å§‹ç»ˆæ˜¯ä¸€ä¸ªæ•´æ•°çš„åƒç´ å€¼ï¼ˆçº¿çœ‹èµ·æ¥ä¼šåƒå¤´å‘ä¸ä¸€æ ·ç»†ï¼‰ï¼Œå¹¶ä¼šå°½é‡ç¬¦åˆå½“å‰å¹³å°æœ€ç»†çš„çº¿çš„æ ‡å‡†ã€‚å¯ä»¥ç”¨ä½œè¾¹æ¡†æˆ–æ˜¯ä¸¤ä¸ªå…ƒç´ é—´çš„åˆ†éš”çº¿ã€‚ç„¶è€Œï¼Œä½ ä¸èƒ½æŠŠå®ƒâ€œè§†ä¸ºä¸€ä¸ªå¸¸é‡â€ï¼Œå› ä¸ºä¸åŒçš„å¹³å°å’Œä¸åŒçš„å±å¹•åƒç´ å¯†åº¦ä¼šå¯¼è‡´ä¸åŒçš„ç»“æœã€‚</p><p>å¦‚æœæ¨¡æ‹Ÿå™¨ç¼©æ”¾è¿‡ï¼Œå¯èƒ½ä¼šçœ‹ä¸åˆ°è¿™ä¹ˆç»†çš„çº¿ã€‚</p></blockquote><p>ç”±äº <code>hairline</code> åªå½±å“äº†å®¹å™¨ <code>borderWidth</code> å±æ€§ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç¼–å†™å•ç‹¬çš„æ ·å¼è®¡ç®—å‡½æ•°ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">borderWidth</span>: props.<span class="property">hairline</span> ? theme[<span class="string">&#x27;border-width-hairline&#x27;</span>] : theme[<span class="string">&#x27;border-width-base&#x27;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43d80d537b07487d9043d718e6541f7e~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="ç¦ç”¨çŠ¶æ€"><a href="#ç¦ç”¨çŠ¶æ€" class="headerlink" title="ç¦ç”¨çŠ¶æ€"></a>ç¦ç”¨çŠ¶æ€</h3><p>è¡¨å•å…ƒç´ æˆ–è€…è¯´å¯è§¦æ‘¸å¯ç‚¹å‡»çš„å…ƒç´ ä¸€èˆ¬éƒ½æœ‰ç¦ç”¨çŠ¶æ€ï¼Œvant ä¸­æ˜¯é€šè¿‡ disabled å±æ€§æ¥ç¦ç”¨æŒ‰é’®ï¼Œç¦ç”¨çŠ¶æ€ä¸‹æŒ‰é’®ä¸å¯ç‚¹å‡»ã€‚TouchableHighlight ç»§æ‰¿åœ°æœ‰ <code>disabled</code> å±æ€§ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®ä¸€äº›ç¦ç”¨çŠ¶æ€ä¸‹çš„æŒ‰é’®æ ·å¼å°±å¯ä»¥ï¼ŒæŸ¥çœ‹ vant æºç æˆ‘ä»¬å‘ç°åªéœ€è¦ä¿®æ”¹é€æ˜åº¦ä¸º 0.5 å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">opacity</span>: props.<span class="property">disabled</span> ? <span class="number">0.5</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/892589086d07426a8346319d8466bccf~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="åŠ è½½çŠ¶æ€"><a href="#åŠ è½½çŠ¶æ€" class="headerlink" title="åŠ è½½çŠ¶æ€"></a>åŠ è½½çŠ¶æ€</h3><p>vant æ˜¯é€šè¿‡ <code>loading</code> å±æ€§è®¾ç½®æŒ‰é’®ä¸ºåŠ è½½çŠ¶æ€ï¼ŒåŠ è½½çŠ¶æ€ä¸‹é»˜è®¤ä¼šéšè—æŒ‰é’®æ–‡å­—ï¼Œå¯ä»¥é€šè¿‡ <code>loading-text</code> è®¾ç½®åŠ è½½çŠ¶æ€ä¸‹çš„æ–‡å­—ã€‚æˆ‘ä»¬å€ŸåŠ© React Native çš„ ActivityIndicator ç»„ä»¶å¯ä»¥è½»æ¾å®ç°è¿™ä¸ªç‰¹æ€§ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">&lt;<span class="title class_">TouchableHighlight</span> &#123;...restProps&#125;&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.contentWrapper&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;props.loading ? (</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ActivityIndicator</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">color</span>=<span class="string">&#123;indicatorColor&#125;</span> <span class="attr">style</span>=<span class="string">&#123;styles.indicator&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;props.loadingText ? <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;styles.textStyle&#125;</span>&gt;</span>&#123;props.loadingText&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span> : null&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    ) : <span class="literal">null</span>&#125;</span><br><span class="line">  &lt;/<span class="title class_">View</span>&gt;</span><br><span class="line">&lt;/<span class="title class_">TouchableHighlight</span>&gt;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>æ ·å¼å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useIndicatorColor = (<span class="attr">props</span>: <span class="title class_">ButtonProps</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> theme = useTheme&lt;<span class="title class_">Theme</span>&gt;();</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">plain</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (props.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;primary&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;success-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;info&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;primary-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;warning&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;warning-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;danger&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;danger-color&#x27;</span>];</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (props.<span class="property">type</span> === <span class="string">&#x27;default&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27c4340df2254245a3c830bf667a2e28~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æŒ‰é’®å½¢çŠ¶"><a href="#æŒ‰é’®å½¢çŠ¶" class="headerlink" title="æŒ‰é’®å½¢çŠ¶"></a>æŒ‰é’®å½¢çŠ¶</h3><p>é»˜è®¤çš„æŒ‰é’®æœ‰å€¼ä¸º 2 çš„åœ†è§’ï¼Œvant ä¸­é€šè¿‡ <code>square</code> è®¾ç½®æ–¹å½¢æŒ‰é’®ï¼Œé€šè¿‡ <code>round</code> è®¾ç½®åœ†å½¢æŒ‰é’®ã€‚æŒ‰ä¾‹ï¼Œæˆ‘ä»¬é€šè¿‡åˆ¤æ–­è®¾ç½®æ ·å¼ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getBorderRadius</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">round</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-max&#x27;</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">square</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-sm&#x27;</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="attr">borderColor</span>: <span class="title function_">getBorderColor</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">wrapper</span>: &#123;</span><br><span class="line">    <span class="attr">borderRadius</span>: <span class="title function_">getBorderRadius</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1402517566e49d1a1920fd9b3f7bb20~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æŒ‰é’®å°ºå¯¸"><a href="#æŒ‰é’®å°ºå¯¸" class="headerlink" title="æŒ‰é’®å°ºå¯¸"></a>æŒ‰é’®å°ºå¯¸</h3><p>Antd RN åªæä¾›äº† largeã€small ä¸¤ä¸ªå°ºå¯¸ï¼Œè€Œåœ¨ vant ä¸­æ”¯æŒ largeã€normalã€smallã€mini å››ç§å°ºå¯¸ï¼Œé»˜è®¤ä¸º normalã€‚è™½ç„¶å†™åˆ°è¿™é‡Œå·²ç»å¾ˆç–²å€¦äº†ï¼Œæ¨æç”˜éœ²ä¹Ÿæ—©å–å®Œäº†ï¼Œä½†æ˜¯ä¸ºäº†å®Œæ•´å¤åŸï¼Œè¿˜æ˜¯ç»­ä¸Šä¸€æ¯å’–å•¡ç»§ç»­è‚ã€‚æ ¹æ® vant è®¾è®¡ç¨¿æˆ‘ä»¬æ–°å¢ä¸‰ä¸ªæ ·å¼è·å–å‡½æ•°å¹¶åŠ¨æ€åŒ–æŒ‡å®šæ ·å¼ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getSizeHeight</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (props.<span class="property">size</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;large&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">50</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;small&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">32</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;mini&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">24</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">44</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getSizePadding</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (props.<span class="property">size</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;small&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;mini&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">15</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getSizeFontSize</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (props.<span class="property">size</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;large&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;small&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;mini&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">14</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="attr">paddingHorizontal</span>: <span class="title function_">getSizePadding</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">textStyle</span>: &#123;</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="title function_">getSizeFontSize</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">wrapper</span>: &#123;</span><br><span class="line">    <span class="attr">height</span>: <span class="title function_">getSizeHeight</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/59c01002f25b477d85ed26fa1e21c86b~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="è‡ªå®šä¹‰é¢œè‰²"><a href="#è‡ªå®šä¹‰é¢œè‰²" class="headerlink" title="è‡ªå®šä¹‰é¢œè‰²"></a>è‡ªå®šä¹‰é¢œè‰²</h3><p>å¦‚æœä¸æ˜¯è‡ªå·±äº²è‡ªå¤åˆ» Vantï¼Œæ˜¯æ²¡æƒ³åˆ°ä¸€ä¸ª Button èƒ½ç©å‡ºè¿™ä¹ˆå¤šèŠ±ï¼Œæ”¯æŒç‰¹æ€§è¿™ä¹ˆå¤šè€å¿ƒå’Œä»£ç ç®¡ç†éƒ½æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚å½“ç„¶äº†ï¼Œæ´›ç«¹é‡‡å–çš„æ ·å¼ç®¡ç†æ–¹å¼æ¯”è¾ƒåæ¿€ï¼Œå¤§å®¶æœ‰å¥½çš„æ–¹å¼ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</p><p>é€šè¿‡ <code>color</code> å±æ€§è‡ªå®šä¹‰æŒ‰é’®çš„é¢œè‰²ã€‚æˆ‘ä»¬å¯ä»¥å¾—å‡ºéœ€æ±‚ï¼Œä¸ç®¡ type æ˜¯ä»€ä¹ˆï¼Œ<code>color</code> å±æ€§éœ€å§‹ç»ˆè¦†ç›–åŸæœ‰æ ·å¼ï¼Œcolor èƒ½å½±å“çš„å°±æ˜¯èƒŒæ™¯è‰²ã€å­—ä½“é¢œè‰²å’Œè¾¹æ¡†é¢œè‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ <code>getBackgroundColor</code>ã€<code>getTextColor</code>ã€<code>getBorderColor</code> æ ·å¼å‡½æ•°åœ¨åˆé€‚çš„åœ°æ–¹åŠ ä¸Šä»¥ä¸‹ä»£ç å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (props.<span class="property">color</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> props.<span class="property">color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8efffdbfd6424618be6152895a53e8ee~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="åŒå‡»äº‹ä»¶çš„å®ç°"><a href="#åŒå‡»äº‹ä»¶çš„å®ç°" class="headerlink" title="åŒå‡»äº‹ä»¶çš„å®ç°"></a>åŒå‡»äº‹ä»¶çš„å®ç°</h2><p>æˆ‘ä»¬ä» React Native å†…ç½®çš„ TouchableHighlight ç»„ä»¶ç»§æ‰¿äº†å¾ˆå¤šäº‹ä»¶ï¼Œå…¶ä¸­ onPressã€onLongPress åˆ†åˆ«ä»£è¡¨å•å‡»å’Œé•¿æŒ‰ã€‚ä½†å”¯ç‹¬â€œåŒå‡» 666â€çš„åŒå‡»äº‹ä»¶æ²¡æœ‰å§“åã€‚ä¹‹å‰åœ¨å®é™…ä¸šåŠ¡æ›¾ç»å°è£…è¿‡åŒå‡»äº‹ä»¶ï¼Œè¿™æ¬¡æˆ‘ä»¬å°±ç›´æ¥å°±å†…ç½®äº†ã€‚</p><p>å®ç°æ€è·¯æ˜¯å»¶æ—¶æ‰§è¡Œå•å‡»äº‹ä»¶ï¼ˆé»˜è®¤ 200 æ¯«ç§’ï¼‰ï¼Œç„¶åè®°å½•ç‚¹å‡»æ¬¡æ•°å’Œä¸¤æ¬¡æ—¶é—´é—´éš”ï¼Œå½“è¯†åˆ«ä¸ºç¬¬äºŒæ¬¡ç‚¹å‡»ä¸”æ—¶é—´é—´éš”å°äºå•å‡»å»¶æ—¶æ—¶é—´ã€‚é‚£ä¹ˆå°±å–æ¶ˆå•å‡»äº‹ä»¶å»¶æ—¶ï¼Œå¹¶ç«‹å³æ‰§è¡ŒåŒå‡»äº‹ä»¶ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> lastTime = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> clickCount = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> timeout = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">_onPress</span> = (<span class="params">event: GestureResponderEvent</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">  <span class="keyword">if</span> (timeout) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">  &#125;</span><br><span class="line">  timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    props.<span class="title function_">onPress</span>(event);</span><br><span class="line">    clickCount = <span class="number">1</span>;</span><br><span class="line">    lastTime = <span class="number">0</span>;</span><br><span class="line">  &#125;, props.<span class="property">delayDoublePress</span>);</span><br><span class="line">  <span class="keyword">if</span> (clickCount === <span class="number">2</span> &amp;&amp; now - lastTime &lt;= props.<span class="property">delayDoublePress</span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">    clickCount = <span class="number">1</span>;</span><br><span class="line">    lastTime = <span class="number">0</span>;</span><br><span class="line">    props.<span class="title function_">onDoublePress</span>(event);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    clickCount++;</span><br><span class="line">    lastTime = now;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¤§å®¶ä¼šå‘ç°è¿™é‡Œçš„å®ç°ç³…åˆäº†å‡½æ•°é˜²æŠ–ã€èŠ‚æµä»¥åŠè®¡æ•°å™¨çš„åŸç†ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œå¤ä¹ ä¸‹åŸç†ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚</p><h2 id="API-æ–‡æ¡£"><a href="#API-æ–‡æ¡£" class="headerlink" title="API æ–‡æ¡£"></a>API æ–‡æ¡£</h2><p>ä¸€ä¸ªç»„ä»¶çš„æ–‡æ¡£ï¼Œé™¤äº† Demoï¼Œè¿˜éœ€è¦å±•ç¤ºå‡ºæ¥å¯ç”¨çš„ Propsï¼ŒDumi å†…ç½®çš„ <code>&lt;API&gt;&lt;/API&gt;</code> ç»„ä»¶å¯ä»¥æ ¹æ®ç»„ä»¶è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£ã€‚é¦–å…ˆæˆ‘ä»¬åƒä¸‹é¢ä¸€æ ·ç¼–å†™ Props æ³¨é‡Šï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ButtonProps</span> <span class="keyword">extends</span> <span class="title class_">TouchableHighlightProps</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>       Can be set to primaryã€infoã€warningã€danger</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>.zh-CN ç±»å‹ï¼Œå¯é€‰å€¼ä¸º primaryã€infoã€warningã€danger</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">type</span>?: <span class="string">&#x27;default&#x27;</span> | <span class="string">&#x27;primary&#x27;</span> | <span class="string">&#x27;info&#x27;</span> | <span class="string">&#x27;warning&#x27;</span> | <span class="string">&#x27;danger&#x27;</span>;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>       Can be set to largeã€smallã€mini</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>.zh-CN å°ºå¯¸ï¼Œå¯é€‰å€¼ä¸º</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  size?: <span class="string">&#x27;large&#x27;</span> | <span class="string">&#x27;normal&#x27;</span> | <span class="string">&#x27;small&#x27;</span> | <span class="string">&#x27;mini&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ Markdown ä¸­å¼•å…¥ API ç»„ä»¶å³å¯ï¼š</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">API</span> <span class="attr">src</span>=<span class="string">&quot;./index.tsx&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">API</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>å†…ç½®ç»„ä»¶ API æ²¡æœ‰å¤„ç†ç»§æ‰¿çš„æƒ…å†µï¼Œæˆ‘ä»¬åç»­ä¼šè‡ªå®šä¹‰ä¸€ä¸ª API ç»„ä»¶ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œæµè§ˆ <a href="https://vant-react-native.js.org/components/button#api">Button æ–‡æ¡£</a> å¯ä»¥æŸ¥çœ‹ç°åœ¨çš„æ•ˆæœï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7bedac7240334ff79c4142005a66b158~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="å·¥ç¨‹åŒ–ä¸²è®²"><a href="#å·¥ç¨‹åŒ–ä¸²è®²" class="headerlink" title="å·¥ç¨‹åŒ–ä¸²è®²"></a>å·¥ç¨‹åŒ–ä¸²è®²</h2><p>ç”±äºå¾ˆéš¾åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å°†ç»„ä»¶å¼€å‘ç›¸å…³çš„å·¥ç¨‹åŒ–è®²å®Œï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ç¯‡å®æˆ˜ä¸­ä¸²è®²ä¸€ä¸‹ã€‚</p><h3 id="ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶"><a href="#ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶" class="headerlink" title="ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶"></a>ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶</h3><blockquote><p>å°é»‘ï¼šæ´›ç«¹ï¼Œ<code>lerna create</code> å‘½ä»¤åˆ›å»ºå‡ºæ¥çš„æ¨¡å—å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œä»¥åè¦åˆ›å»ºå¾ˆå¤šå¾ˆå¤šç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªåˆ›å»ºç»„ä»¶æ¨¡å—çš„è„šæ‰‹æ¶å—ï¼Ÿ</p></blockquote><p>lerna ä½¿ç”¨èµ·æ¥æ˜¯æœ‰ä¸å°‘ç—›ç‚¹çš„ï¼Œ<code>lerna create</code> å‘½ä»¤æ²¡åŠæ³•æŒ‡å®šæ¨¡æ¿ï¼Œè€ƒè™‘åˆ°ä¹‹åçš„å‡ åä¸Šç™¾ä¸ªç»„ä»¶æ¯æ¬¡åˆ›å»ºéƒ½è¦è¿›è¡Œé¡¹ç›®ç»“æ„ã€Typescript é…ç½®ã€å•å…ƒæµ‹è¯•é…ç½®ã€Babel é…ç½®ç­‰ç­‰å·¥ä½œæ­¥éª¤ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å†™ä¸€ä¸ªè„šæ‰‹æ¶ã€‚</p><h4 id="æ¨¡æ¿è§£æ"><a href="#æ¨¡æ¿è§£æ" class="headerlink" title="æ¨¡æ¿è§£æ"></a>æ¨¡æ¿è§£æ</h4><p>è¯´åˆ°æ¨¡æ¿è§£æï¼Œç›¸ä¿¡å¤§å®¶å’Œæˆ‘ä¸€æ ·æƒ³åˆ°çš„æ˜¯ vue-cli çš„ template è§£æã€‚é€šè¿‡é˜…è¯» <a href="https://cdn.jsdelivr.net/npm/vue-cli@2.9.6/lib/generate.js">vue-cli@2.9.6 generate.js</a> æºç ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æå‡ºå°¤å¤§æ˜¯åŸºäº metalsmithã€handlebarsã€consolidate è¿™ä¸‰ä¸ªåŒ…æ¥å®ç°æ¨¡æ¿è§£æèƒ½åŠ›çš„ã€‚è®©äººä¸å®‰çš„æ˜¯å…¶ä¸­ metalsmith åº“æœ‰é•¿è¾¾ 5 å¹´æ²¡æœ‰ç»´æŠ¤äº†ï¼Œæ´›ç«¹æŒ‘é€‰å¼€æºé¡¹ç›®ä¸€èˆ¬å¯¹ç»´æŠ¤åº¦å¾ˆæ•æ„Ÿï¼Œæœ¬ç€è½®å­è¦ç”¨è‡ªå·±é€ çš„åŸåˆ™ï¼Œæˆ‘ç¿»çœ‹äº† Metalsmith çš„ Readme å‘ç°è¿™ä¸ªæ’ä»¶æ— éæ˜¯é€šè¿‡é€’å½’è¯»æ–‡ä»¶çš„æ–¹å¼æ¸²æŸ“æ¨¡æ¿ï¼Œå¹¶ä¸”å®ƒçš„é™æ€ç½‘ç«™ç”Ÿæˆçš„èƒ½åŠ›å¯¹æˆ‘ä»¬æ¨¡æ¿è§£æçš„éœ€æ±‚ä¹Ÿæ˜¯å¤šä½™çš„ã€‚</p><p>è¯´å¹²å°±å¹²ï¼Œåœ¨å’Œ <a href="https://juejin.cn/user/3175045313873943">@æ—å°å¸…</a> åŒå­¦ç®€å•æ²Ÿé€šåï¼Œæˆ‘åŠ¨æ‰‹é€ äº† <a href="https://github.com/youngjuning/handlebars-template-compiler">handlebars-template-compiler</a> è¿™ä¸ªè½®å­ï¼Œå…¶ä¸»è¦åŸç†å¦‚ä¸‹ï¼š</p><ol><li>ä½¿ç”¨ recursive-readdir é€’å½’è·å–æ‰€æœ‰æ–‡ä»¶è·¯å¾„</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> files = <span class="keyword">await</span> <span class="title function_">recursive</span>(rootDir);</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨ <code>handlebars.compile</code> æ–¹æ³•ä½¿ç”¨å…ƒæ•°æ®å¯¹æ¨¡æ¿è¿›è¡Œæ¸²æŸ“</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> content = fs.<span class="title function_">readFileSync</span>(file).<span class="title function_">toString</span>();</span><br><span class="line"><span class="keyword">const</span> result = handlebars.<span class="title function_">compile</span>(content)(meta);</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨ <code>fs.writeFileSync</code> API é‡å†™æ–‡ä»¶</li></ol><p>å¦å¤–ï¼Œé€šè¿‡å¼•å…¥ <a href="https://www.npmjs.com/package/micromatch">glob</a> æ¨¡å¼åŒ¹é…å®ç°äº† <code>exclude</code> é…ç½®ä»¥åŠåªå¤„ç†æŒ‡å®šåç¼€ï¼ˆé»˜è®¤ <code>**/*.tpl.*</code>ï¼‰çš„æ–‡ä»¶æ¥é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚ï¼ˆPSï¼šNPM ä¸€å‘¨æœ‰äº† 300 å¤šä¸‹è½½ï¼Œæœ‰éœ€è¦çš„æ˜å‹å€¼å¾—ä¸€è¯•ğŸ˜„ï¼‰</p><h4 id="Node-CLIï¼ˆ-vant-react-native-x2F-scriptsï¼‰æ­å»º"><a href="#Node-CLIï¼ˆ-vant-react-native-x2F-scriptsï¼‰æ­å»º" class="headerlink" title="Node CLIï¼ˆ@vant-react-native&#x2F;scriptsï¼‰æ­å»º"></a>Node CLIï¼ˆ@vant-react-native&#x2F;scriptsï¼‰æ­å»º</h4><p>è¿™é‡Œæ´›ç«¹å°è¯•ç”¨æœ€ç®€æ´çš„è¯­è¨€ä¸ºå¤§å®¶æè¿°ä¸€ä¸ªè„šæ‰‹æ¶çš„è¯ç”Ÿï¼Œæºç åœ¨ <a href="https://github.com/youngjuning/vant-react-native/tree/main/packages/scripts">packages&#x2F;scripts</a> ç›®å½•ä¸‹ï¼Œæ²¡æœ‰æ¥è§¦è¿‡ CLI çš„æ˜å‹è¯·ç›¸ä¿¡æˆ‘ï¼ŒNode CLI å¾ˆå®¹æ˜“ä¸Šæ‰‹çš„ã€‚æ¥è§¦è¿‡çš„åŒå­¦ä¹Ÿå¯ä»¥æŸ¥æ¼è¡¥ç¼ºå€Ÿé‰´ä¸€äºŒã€‚</p><ol><li><code>package.json</code> æ–‡ä»¶çš„ <code>bin</code> å­—æ®µæ˜¯æˆ‘ä»¬è„šæ‰‹æ¶çš„å…¥å£</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‡å®šå¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ä»¥åŠåˆ«å</span></span><br><span class="line"><span class="attr">&quot;bin&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;vant&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./bin/cli.js&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰ <code>./bin/cli.js</code> ä¸ºå¯æ‰§è¡Œæ–‡ä»¶å¹¶è°ƒç”¨ <code>init</code> æ–¹æ³•ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”±äºæˆ‘ä»¬çš„è„šæœ¬æ˜¯ Node ç¼–å†™çš„ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®š node æ‰€åœ¨ä½ç½®</span></span><br><span class="line">#!<span class="regexp">/usr/</span>bin/env node</span><br><span class="line"><span class="keyword">const</span> &#123; init &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../lib&#x27;</span>);</span><br><span class="line"><span class="comment">// è¿™ä¸ªåœ°æ–¹å‚è€ƒäº† create-react-native çš„è®¾è®¡</span></span><br><span class="line"><span class="comment">// æœ¬æ–‡ç‚¹èµè¿‡ 300ï¼Œä¸‹ä¸€ç¯‡æ´›ç«¹å¸¦å°é»‘ä¸ºå¤§å®¶å¸¦æ¥ã€ŠåŸºäº TypeScript é‡æ„ create-react-nativeã€‹</span></span><br><span class="line"><span class="title function_">init</span>();</span><br></pre></td></tr></table></figure><ol start="3"><li>ç„¶ååœ¨ <code>src/index.ts</code> ä¸­åˆå§‹åŒ– commander è¿™ä¸ªä¹…è´Ÿç››åçš„å‘½ä»¤è¡Œæ¡†æ¶</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> init = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> packageJson = <span class="built_in">require</span>(<span class="string">&#x27;../package.json&#x27;</span>);</span><br><span class="line">  program.<span class="title function_">version</span>(packageJson.<span class="property">version</span>).<span class="title function_">description</span>(packageJson.<span class="property">description</span>);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  program.<span class="title function_">parse</span>(process.<span class="property">argv</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="4"><li>ä¸ºäº†æ–¹ä¾¿ç®¡ç†å‘½ä»¤ï¼Œæˆ‘ä»¬å°†å‘½ä»¤éƒ½æ”¾ç½®åœ¨ <code>src/commands</code> ç›®å½•ä¸‹å¹¶é€šè¿‡ <code>fs.readdirSync</code> API åŠ¨æ€æ‰«ææ³¨å†Œã€‚</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> init = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™æ®µä»£ç å€Ÿé‰´è‡ª NeteaseCloudMusicApi é¡¹ç›®ï¼Œä½œè€…çš„ä»£ç å¾ˆæœ‰è®¾è®¡æ„Ÿï¼Œæ¨èé˜…è¯»ã€‚</span></span><br><span class="line">  fs.<span class="title function_">readdirSync</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;commands&#x27;</span>)).<span class="title function_">forEach</span>(<span class="function">(<span class="params">file: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!file.<span class="title function_">endsWith</span>(<span class="string">&#x27;.js&#x27;</span>)) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">require</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;commands&#x27;</span>, file));</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="5"><li>æœ€ååœ¨ <code>commands</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>create.ts</code> æ–‡ä»¶ç¼–å†™å‘½ä»¤</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; program &#125; <span class="keyword">from</span> <span class="string">&#x27;commander&#x27;</span>;</span><br><span class="line">program</span><br><span class="line">  .<span class="title function_">command</span>(<span class="string">&#x27;create &lt;name&gt; [loc]&#x27;</span>)</span><br><span class="line">  .<span class="title function_">description</span>(<span class="string">&#x27;Create a new vant-react-native package&#x27;</span>)</span><br><span class="line">  .<span class="title function_">action</span>(<span class="function">(<span class="params">name,loc</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello Luozhu&#x27;</span>);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h4 id="è„šæ‰‹æ¶å®ç°"><a href="#è„šæ‰‹æ¶å®ç°" class="headerlink" title="è„šæ‰‹æ¶å®ç°"></a>è„šæ‰‹æ¶å®ç°</h4><p>ä¸Šä¸€å°ç»“ï¼Œæˆ‘ä»¬åˆå§‹åŒ–äº† CLI å¹¶æ·»åŠ äº† <code>create</code> å‘½ä»¤ï¼Œè¿™ä¸€å°èŠ‚æˆ‘ä»¬å°±æ¥å®ç°ä¸€ä¸‹è„šæ‰‹æ¶åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆåœ¨ <code>packages/scripts</code> ç›®å½•ä¸‹åˆ›å»ºç»„ä»¶æ¨¡æ¿</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.tpl.md <span class="comment"># tpl åç¼€åœ¨ç”Ÿæˆç»„ä»¶æ¨¡æ¿çš„æ—¶å€™ä¼šè¢« handlebars-template-compiler è‡ªåŠ¨å»æ‰ã€‚</span></span><br><span class="line">â”œâ”€â”€ package.tpl.json</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â””â”€â”€ index.ts <span class="comment"># æ²¡æœ‰ tpl åç¼€åˆ™ä¸ä¼šè¢«ç¼–è¯‘ï¼Œæ¨¡æ¿å¾ˆå¤§æ—¶å¯ä»¥èŠ‚çœæ—¶é—´ã€‚</span></span><br><span class="line">â””â”€â”€ tsconfig.json</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬æ˜ç¡®æˆ‘ä»¬çš„æ¨¡æ¿å…ƒæ•°æ®çš„æ•°æ®ç»“æ„ï¼Œæˆ‘è¿™é‡Œçš„æ•°æ®ç»“æ„æ˜¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IMeta</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">version</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">description</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">author</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">email</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">url</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">directory</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ inquirer æ¨¡å—å¼•å¯¼ç”¨æˆ·è¾“å…¥ä¿¡æ¯ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> inquirer <span class="keyword">from</span> <span class="string">&#x27;inquirer&#x27;</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// getQuestions è¿‡é•¿ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹ï¼šhttp://tny.im/UFbg</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">answer</span>: <span class="title class_">IMeta</span> = <span class="keyword">await</span> inquirer.<span class="title function_">prompt</span>(<span class="title function_">getQuestions</span>(name));</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>tmp-promise</code> æ¨¡å—åˆ›å»ºä¸€ä¸ªç³»ç»Ÿä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå¹¶å°†å‰æ–‡æåˆ°çš„ template æ–‡ä»¶å¤¹çš„å†…å®¹æ‹·è´è¿›å»ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tmp <span class="keyword">from</span> <span class="string">&#x27;tmp-promise&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs-extra&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">const</span> tmpdir = <span class="keyword">await</span> tmp.<span class="title function_">dir</span>(&#123; <span class="attr">unsafeCleanup</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">fs.<span class="title function_">copySync</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;../../template&#x27;</span>), tmpdir.<span class="property">path</span>);</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæˆ‘ä»¬å¯¹ä¸´æ—¶æ–‡ä»¶å¤¹çš„å†…å®¹è¿›è¡Œç¼–è¯‘å†æ‹·è´åˆ°æŒ‡å®šä½ç½®å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> htc <span class="keyword">from</span> <span class="string">&#x27;handlebars-template-compiler&#x27;</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">await</span> htc&lt;<span class="title class_">IMeta</span>&gt;(answer, tmpdir.<span class="property">path</span>);</span><br><span class="line">fs.<span class="title function_">copySync</span>(tmpdir.<span class="property">path</span>, <span class="string">`<span class="subst">$&#123;process.cwd()&#125;</span>/packages/<span class="subst">$&#123;locPath&#125;</span>`</span>);</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>æŠ˜è…¾è¿™ä¸€é¡¿ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸‹æˆæœå§ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ba477bcbd8b4ef6b880c7e8e5a095bc~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="Github-CODEOWENERS"><a href="#Github-CODEOWENERS" class="headerlink" title="Github CODEOWENERS"></a>Github CODEOWENERS</h3><p>å¤§å‹çš„å¼€æºé¡¹ç›®æœ€éš¾çš„ä¸æ˜¯æŠ€æœ¯é—®é¢˜ï¼ŒæŠ€æœ¯å¤§å’–æ°¸è¿œä¸ä¼šç¼ºã€‚æœ€éš¾çš„å…¶å®æ˜¯åä½œå’ŒåæœŸç»´æŠ¤ã€‚è¯•æƒ³ä¸€ä¸‹ä¸€ä¸ªæˆç™¾ä¸Šåƒäººå‚ä¸çš„é¡¹ç›®å½“æœ‰æ–°çš„ pr æ—¶ï¼Œæ­£å¸¸äººæ ¹æœ¬æ— åŠ›å»å¿«é€Ÿæ£€ç´¢å‡ºéœ€è¦è°å» review ä»£ç ã€‚æˆ‘ä»¬çš„ vant-react-native ç”±äºæ˜¯å°†æ¯ä¸ªç»„ä»¶å•ç‹¬å‘åŒ…ç»´æŠ¤ï¼Œå½“å‚ä¸çš„å°ä¼™ä¼´å¤šäº†ä¹Ÿä¼šäº§ç”Ÿè¿™ä¸ªå›°æ‰°ã€‚</p><p>è€Œ GitHub CODEOWNERSï¼ˆä»£ç æ‰€æœ‰è€…ï¼‰å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œåœ¨ 5000+ è´¡çŒ®è€…å‚ä¸çš„ <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a> é¡¹ç›®ä¸­æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å®ƒçš„èº«å½±ã€‚å®˜æ–¹å¯¹ä»£ç æ‰€æœ‰è€…å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>ä½ å¯ä»¥ä½¿ç”¨ CODEOWNERS æ–‡ä»¶å®šä¹‰è´Ÿè´£ä»“åº“ä»£ç çš„ä¸ªäººæˆ–å›¢é˜Ÿã€‚å½“æœ‰äººä¿®æ”¹ä»£ç å¹¶æ‰“å¼€ä¸€ä¸ª pull request æ—¶ï¼Œå°†è‡ªåŠ¨è¯·æ±‚ä»£ç æ‰€æœ‰è€…è¿›è¡Œå®¡æŸ¥ã€‚</p></blockquote><p>CODEOWNERS æ–‡ä»¶ä½¿ç”¨éµå¾ª gitignore æ–‡ä»¶ä¸­æ‰€ç”¨å¤§å¤šæ•°è§„åˆ™çš„æ¨¡å¼ï¼ŒCODEOWNERS æ–‡ä»¶ä½ç½®ä¸€èˆ¬ä½äº <code>.github/</code> ç›®å½•ä¸‹ã€‚</p><p>åœ¨ vant-react-nativeï¼Œæ´›ç«¹æ˜¯ä»“åº“çš„æœ€ç»ˆè´Ÿè´£äººï¼Œæ‰€ä»¥æ˜¯æœŸæœ›æ¯ä¸ª pr éƒ½å¯ä»¥åˆ†é…ç»™è‡ªå·±å®¡æŸ¥ä¸€ä¸‹çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬è¿™å°±æ¥å®éªŒä¸€ä¸‹å§ï¼Œæ–°å»ºä¸€ä¸ª <code>.github/CODEOWNERS</code> æ–‡ä»¶å¹¶å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># This is a comment.</span><br><span class="line"># Each line is a file pattern followed by one or more owners.</span><br><span class="line"></span><br><span class="line"># These owners will be the default owners for everything in</span><br><span class="line"># the repo. Unless a later match takes precedence,</span><br><span class="line"># @youngjuning will be requested for review when someone opens a pull request.</span><br><span class="line">*       @youngjuning</span><br><span class="line"></span><br><span class="line"># In this example, @doctocat owns any files in the build/logs</span><br><span class="line"># directory at the root of the repository and any of its</span><br><span class="line"># subdirectories.</span><br><span class="line">/packages/ @luozhu1994</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬å¦‚æœæ–‡ä»¶å…·æœ‰ä»£ç æ‰€æœ‰è€…ï¼Œåˆ™åœ¨æ‰“å¼€æ‹‰å–è¯·æ±‚ä¹‹å‰å¯ä»¥çœ‹åˆ°ä»£ç æ‰€æœ‰è€…æ˜¯è°ã€‚åœ¨ä»“åº“ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°æ–‡ä»¶å¹¶æ‚¬åœäºä¸€ä¸ªé”å›¾æ ‡ä¸Šï¼Œæ‚¬æµ®ä¹‹åä¼šå‘Šè¯‰ä½ è¯¥æ–‡ä»¶æ‰€æœ‰è€…æ˜¯è°ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/726bd5144a104902ae27ad31e1d46f93~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç„¶åæˆ‘ä»¬æäº¤ä¸€ä¸ª pr çœ‹çœ‹æ•ˆæœï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf4cb8b7ef5c41989660e735e621fc4e~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="NPM-å‘åŒ…è‡ªåŠ¨åŒ–"><a href="#NPM-å‘åŒ…è‡ªåŠ¨åŒ–" class="headerlink" title="NPM å‘åŒ…è‡ªåŠ¨åŒ–"></a>NPM å‘åŒ…è‡ªåŠ¨åŒ–</h3><p>å‘åŒ…æƒé™ä¸€èˆ¬åªæœ‰ä»“åº“æ‰€æœ‰è€…ä¸€ä¸ªäººæ‹¥æœ‰ï¼Œä½†æ˜¯ owner åŒæ—¶ç»´æŠ¤å¥½å‡ ä¸ª NPM è´¦å·ï¼Œæˆ–è€…æ˜¯ owner å¿½ç„¶å¾ˆå¿™å°†å‘å¸ƒæƒé™äº¤ç»™å…¶ä»–äººç®¡ç†å‘˜ä½†æ˜¯ä¸ä¾¿å‘ŠçŸ¥ NPM è´¦å·è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿç­”æ¡ˆæ˜¯å°† NPM å‘åŒ… CDï¼ˆæŒç»­éƒ¨ç½²ï¼‰åŒ–ï¼Œå…¬å¸ä¸€èˆ¬ä¼šåŸºäº Gitlab æˆ–è‡ªå»ºå¹³å°å®ç°è¯¥åŠŸèƒ½ã€‚ä½œä¸ºå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬å½“ç„¶æ˜¯ä½¿ç”¨ GitHub Actionã€‚</p><p>æ­£å¸¸çš„å•åŒ…é¡¹ç›®ï¼Œä½¿ç”¨ <a href="https://github.com/JS-DevTools/npm-publish">npm-publish</a> æˆ– <a href="https://github.com/pascalgn/npm-publish-action">npm-publish-action</a> è¿™ä¸¤ä¸ª GitHub Actionï¼Œè¿™å¹¶æ²¡æœ‰å¥½è®²çš„ã€‚ä½†æ˜¯åŸºäº lerna çš„å¤šåŒ…å•ä½“ä»“åº“å¹¶æ²¡æœ‰ç°æˆçš„æ’ä»¶å¯ä»¥ç”¨ï¼Œç…§ä¾‹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹è‡ªå·±å®ç°çš„æ­¥éª¤ï¼š</p><ol><li>åˆ¤æ–­ commit message æ˜¯å¦ä»¥ <code>chore(release):</code> å¼€å¤´<blockquote><p>é€šè¿‡ GitHub Action <code>startsWith(github.event.head_commit.message, &#39;chore(release):&#39;)</code> å®ç°</p></blockquote></li><li>é€šè¿‡ NPM publish token è®¤è¯ç™»å½•<blockquote><p>é€šè¿‡ <code>npm config set //registry.npmjs.org/:_authToken=$&#123;&#123; secrets.NPM_TOKEN &#125;&#125;</code> è®¤è¯</p></blockquote></li><li>æ‰§è¡Œ <code>lerna publish from-package --yes</code> å‘å¸ƒ<blockquote><p>éœ€è¦æœ¬åœ°å…ˆæ‰§è¡Œ <code>lerna version</code> ç³»åˆ—å‘½ä»¤æå‡ç‰ˆæœ¬</p></blockquote></li></ol><p>å®Œæ•´ GitHub Action å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">npm-publish</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">npm-publish:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">startsWith(github.event.head_commit.message,</span> <span class="string">&#x27;chore(release):&#x27;</span><span class="string">)</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">c-hive/gha-yarn-cache@v2</span> <span class="comment"># ç¼“å­˜ node_modules åŠ å¿«æ„å»ºé€Ÿåº¦</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Packages</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">install</span> <span class="string">--registry=https://registry.npmjs.org/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Authenticate</span> <span class="string">with</span> <span class="string">Registry</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npm config set //registry.npmjs.org/:_authToken=$&#123;NPM_TOKEN&#125;</span></span><br><span class="line"><span class="string"></span>        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">NPM_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.NPM_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Publish</span> <span class="string">package</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">lerna</span> <span class="string">publish</span> <span class="string">from-package</span> <span class="string">--yes</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†åœ¨å‘å¸ƒååŠæ—¶è·å–é€šçŸ¥ï¼Œæ´›ç«¹ä½¿ç”¨äº† <code>peter-evans/commit-comment</code> æ’ä»¶åœ¨å‘å¸ƒå¤±è´¥æˆ–æˆåŠŸåå¯¹ç›¸åº” commit è¿›è¡Œè¯„è®ºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ”¶åˆ°é‚®ä»¶å’Œç«™å†…é€šçŸ¥ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Create</span> <span class="string">commit</span> <span class="string">comment</span> <span class="string">after</span> <span class="string">publish</span> <span class="string">successfully</span></span><br><span class="line">  <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">success()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">peter-evans/commit-comment@v1</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      Hello Dear @youngjuning. This commit has been publish to NPM successfully.</span></span><br><span class="line"><span class="string">      &gt; Created by [commit-comment][1]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      [<span class="number">1</span>]<span class="string">:</span> <span class="string">https://github.com/peter-evans/commit-comment</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Create</span> <span class="string">commit</span> <span class="string">comment</span> <span class="string">after</span> <span class="string">publish</span> <span class="string">unsuccessfully</span></span><br><span class="line">  <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">failure()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">peter-evans/commit-comment@v1</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      Hello Dear @youngjuning. This commit has been publish to NPM unsuccessfully.</span></span><br><span class="line"><span class="string">      &gt; Created by [commit-comment][1]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      [<span class="number">1</span>]<span class="string">:</span> <span class="string">https://github.com/peter-evans/commit-comment</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> ç»„ä»¶åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> ç»„ä»¶åŒ– </tag>
            
            <tag> ç»„ä»¶åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜é‡‘ä¸€ä¸‹ | ä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•</title>
      <link href="/609531a3ab52/"/>
      <url>/609531a3ab52/</url>
      
        <content type="html"><![CDATA[<blockquote><p>âš ï¸æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½</p></blockquote><blockquote><p>æ¸©é¦¨æç¤ºï¼šç»“åˆæœ¬æ–‡é…å¥—<a href="https://github.com/youngjuning/juejin-me">æºç </a>é˜…è¯»ä½“éªŒæ›´ä½³ï¼</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å›¢é˜Ÿé™æœ¬ææ•ˆçš„åŸºå»ºä¸­ï¼Œæ´›ç«¹å¼€å‘äº†ä¸€æ¬¾ vscode æ’ä»¶ï¼Œç¬¬ä¸€ç‰ˆæˆ‘ä½¿ç”¨çš„æ˜¯ vscode å†…ç½® UIï¼Œè™½è¯´ä¹Ÿèƒ½ç”¨ï¼Œä½†æ˜¯ç”¨æˆ·ä½“éªŒæ¬ ä½³ã€‚ç”±äº vscode å†…ç½® UI ä¸å¤Ÿçµæ´»ï¼Œä¸€ç•ªè°ƒç ”åæˆ‘å†³å®šä½¿ç”¨ webview é‡æ„ã€‚</p><p>å¼€å‘è¿‡ vscode æ’ä»¶çš„åŒå­¦å¯èƒ½å¯¹æ’ä»¶å¼€å‘çŸ¥è¯†ç‚¹å¤šã€æ–‡æ¡£é˜…è¯»å›°éš¾ã€å‚è€ƒèµ„æ–™å°‘æœ‰æ‰€ä½“ä¼šã€‚åŸºäº webview å¼€å‘æ’ä»¶æ›´æ˜¯å¦‚æ­¤ï¼Œå¯»éç½‘ç»œï¼Œè™½ç„¶æœ‰ä¼˜ç§€çš„é¡¹ç›®ï¼Œä½†å´æ²¡æœ‰å®Œæ•´ä¸”ä¼˜ç§€çš„æ•™ç¨‹ã€‚ä¸ºäº†ä¿®ç‚¼ vscode å¼€å‘çµåŠ›ï¼Œä¸å¦¨å’Œæ´›ç«¹ä¸€èµ·æŒ‘æˆ˜ä»é›¶åˆ°ä¸€å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ’ä»¶ã€‚</p><h2 id="Hello-vscode"><a href="#Hello-vscode" class="headerlink" title="Hello vscode"></a>Hello vscode</h2><p>è‹±é›„å¤šèµ·äºå¸‚äº•ï¼Œé«˜æ¥¼çš†èµ·äºå¹³åœ°ã€‚å†ä¼Ÿå¤§çš„è½¯ä»¶ä¹Ÿéƒ½æ˜¯ä» Hello World å¼€å§‹çš„ï¼Œæœ¬ç« å°½é‡ç”¨æœ€ç®€æ´çš„è¯­è¨€æè¿°ä¸€ä¸ª vscode æ’ä»¶ Hello World çš„è¯ç”Ÿã€‚</p><h3 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®"></a>åˆå§‹åŒ–é¡¹ç›®</h3><p>å®‰è£… <a href="http://yeoman.io/">Yeoman</a> å’Œ <a href="https://www.npmjs.com/package/generator-code">VS Code Extension Generator</a>ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g yo generator-code</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè„šæ‰‹æ¶ä¼šç”Ÿæˆä¸€ä¸ªå¯ä»¥ç«‹é©¬å¼€å‘çš„é¡¹ç›®ã€‚è¿è¡Œç”Ÿæˆå™¨ï¼Œç„¶åå¡«å¥½ä¸‹åˆ—å­—æ®µï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ yo code</span><br><span class="line"><span class="comment">#     _-----_     â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span></span><br><span class="line"><span class="comment">#    |       |    â”‚   Welcome to the Visual  â”‚</span></span><br><span class="line"><span class="comment">#    |--(o)--|    â”‚   Studio Code Extension  â”‚</span></span><br><span class="line"><span class="comment">#   `---------Â´   â”‚        generator!        â”‚</span></span><br><span class="line"><span class="comment">#    ( _Â´U`_ )    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span></span><br><span class="line"><span class="comment">#    /___A___\   /</span></span><br><span class="line"><span class="comment">#     |  ~  |</span></span><br><span class="line"><span class="comment">#   __&#x27;.___.&#x27;__</span></span><br><span class="line"><span class="comment"># Â´   `  |Â° Â´ Y `</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ? What type of extension do you want to create? New Extension (TypeScript)</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the name of your extension? Juejin Posts</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the identifier of your extension? juejin-posts</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the description of your extension? æ˜é‡‘æ–‡ç« ç®¡ç†</span></span><br><span class="line"><span class="comment"># ? Initialize a git repository? Yes</span></span><br><span class="line"><span class="comment"># ? Bundle the source code with webpack? No</span></span><br><span class="line"><span class="comment"># ? Which package manager to use? yarn</span></span><br><span class="line"></span><br><span class="line">$ code ./juejin-posts</span><br></pre></td></tr></table></figure><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/IaJdlW">hello world</a></p></blockquote><h3 id="ä»£ç è§„èŒƒ"><a href="#ä»£ç è§„èŒƒ" class="headerlink" title="ä»£ç è§„èŒƒ"></a>ä»£ç è§„èŒƒ</h3><p>é»˜è®¤çš„è„šæ‰‹æ¶ç”Ÿæˆçš„ä¹Ÿæœ‰ ESLint é…ç½®ï¼Œä½†æ˜¯ Editorã€Prettier çš„é…ç½®éƒ½æ²¡æœ‰ï¼Œå¹¶ä¸” ESLint é…ç½®ä¹Ÿä¸ç¬¦åˆæˆ‘çš„ä¹ æƒ¯ã€‚æ´›ç«¹å…³äºå‰ç«¯å·¥ç¨‹åŒ–çš„åŒ…éƒ½åœ¨ <a href="https://github.com/youngjuning/luozhu">youngjuning&#x2F;luozhu</a>ï¼Œ ESlint é…ç½®çš„åŒ…æ˜¯ <code>@luozhu/eslint-config-*</code>ã€‚ç”±äºæˆ‘ä»¬å¼€å‘æ’ä»¶ä½¿ç”¨çš„æ˜¯ Typescriptï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹© <code>@luozhu/eslint-config-typescript</code>ã€‚</p><p><strong>å®‰è£…ä¾èµ–ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add @luozhu/eslint-config-typescript @luozhu/prettier-config prettier -D</span><br></pre></td></tr></table></figure><p><strong>å…·ä½“é…ç½®ï¼š</strong></p><p>é…ç½®æ¶‰åŠæ–‡ä»¶è¾ƒå¤šï¼Œè¯·å‚è€ƒ <a href="https://github.com/youngjuning/luozhu#coding-style">coding-style</a>ï¼Œä¸å…³å¿ƒçš„åŒå­¦ä¹Ÿå¯ä»¥ç›´æ¥ç•¥è¿‡ã€‚</p><p><strong>æäº¤æ£€æµ‹ï¼š</strong></p><p>å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add lint-staged yorkie -D</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;gitHooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;pre-commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;js,jsx,ts,tsx&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;eslint --fix&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;md,json&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;prettier --write&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>eslint â€“fixï¼š</strong></p><p>ä¿®æ”¹å®Œé…ç½®ä¹‹åéœ€è¦æ‰§è¡Œ fix å¯¹æ‰€æœ‰æ–‡ä»¶æ ¼å¼åŒ–ä¸€æ¬¡ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn lint --fix</span><br></pre></td></tr></table></figure><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/xzFAVE">chore: code style config</a></p></blockquote><h3 id="çº¦å®šå¼æäº¤"><a href="#çº¦å®šå¼æäº¤" class="headerlink" title="çº¦å®šå¼æäº¤"></a>çº¦å®šå¼æäº¤</h3><p>çº¦å®šå¼æäº¤æˆ‘ä½¿ç”¨çš„æ˜¯æ¸è¿›å¼è„šæ‰‹æ¶ <code>@luozhu/create-commitlint</code>ï¼Œåœ¨é¡¹ç›®ä¸­æ‰§è¡Œ <code>npx @luozhu/create-commitlint</code> å³å¯ä½¿é¡¹ç›®ç¬¦åˆè§„èŒƒåŒ–æäº¤çš„é…ç½®ã€‚å¯¹è§„èŒƒåŒ–æäº¤ä¸äº†è§£çš„åŒå­¦ï¼Œå¼ºçƒˆå»ºè®®è¯»ä¸€ä¸‹ <a href="https://juejin.cn/post/6877462747631026190/">ä¸€æ–‡æå®š Conventional Commits </a>ã€‚</p><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/Ld142y">chore: npx @luozhu&#x2F;create-commitlint</a></p></blockquote><h3 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>æŒ‰ä¸‹ <code>F5</code> å¼€å¯è°ƒè¯•ä¼šå‡ºç°[æ‰©å±•å¼€å‘å®¿ä¸»]çª—å£ï¼Œç„¶åæŒ‰ <code>Command+Shift+P</code> ç»„ä»¶é”®è¾“å…¥ <code>Hello World</code> å‘½ä»¤ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º vscode å¼¹å‡ºäº† <code>Hello World from Juejin Posts!</code> çš„æç¤ºã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc26d7d429f84564b88b55e9df60fcd7~tplv-k3u1fbpfcp-zoom-1.image"></p><p>åŒæ—¶æˆ‘ä»¬çš„å¼€å‘çª—å£ä¸­ï¼Œä¼šå‡ºç°ä¸€ä¸ª watch ä»»åŠ¡çš„ç»ˆç«¯ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75a15d0bd2cc4096af1a3f76173cbbe1~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å¼€å‘çª—å£çš„è°ƒè¯•æ§åˆ¶å°ä¼šè¾“å‡ºæ’ä»¶è¿è¡Œæ—¥å¿—ï¼ˆå¿½ç•¥çº¢è‰²çš„è­¦å‘Šï¼‰ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c31068ea0bca4d4793e35bdb16d70c0a~tplv-k3u1fbpfcp-zoom-1.image"></p><p>è°ƒè¯•æ‰§è¡Œçš„ä»»åŠ¡æ˜¯åœ¨ <code>.vscode/tasks.json</code> ä¸­é…ç½®çš„ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// See https://go.microsoft.com/fwlink/?LinkId=733558</span></span><br><span class="line"><span class="comment">// for the documentation about the tasks.json format</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span><span class="punctuation">,</span> <span class="comment">// é…ç½®çš„ç‰ˆæœ¬å·ã€‚</span></span><br><span class="line"><span class="attr">&quot;tasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// ä»»åŠ¡é…ç½®ã€‚é€šå¸¸æ˜¯å¤–éƒ¨ä»»åŠ¡è¿è¡Œç¨‹åºä¸­å·²å®šä¹‰ä»»åŠ¡çš„æ‰©å……ã€‚</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm&quot;</span><span class="punctuation">,</span> <span class="comment">// è¦è‡ªå®šä¹‰çš„ä»»åŠ¡ç±»å‹ã€‚</span></span><br><span class="line"><span class="attr">&quot;script&quot;</span><span class="punctuation">:</span> <span class="string">&quot;watch&quot;</span><span class="punctuation">,</span> <span class="comment">// è¦è‡ªå®šä¹‰çš„ npm è„šæœ¬ã€‚</span></span><br><span class="line"><span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$tsc-watch&quot;</span><span class="punctuation">,</span> <span class="comment">// è¦ä½¿ç”¨çš„é—®é¢˜åŒ¹é…ç¨‹åºã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ªé—®é¢˜åŒ¹é…ç¨‹åºå®šä¹‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„å’Œå¤šä¸ªé—®é¢˜åŒ¹é…ç¨‹åºã€‚</span></span><br><span class="line"><span class="attr">&quot;isBackground&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// æ‰§è¡Œçš„ä»»åŠ¡æ˜¯å¦ä¿æŒæ´»åŠ¨çŠ¶æ€å¹¶åœ¨åå°è¿è¡Œã€‚</span></span><br><span class="line"><span class="attr">&quot;presentation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// é…ç½®ç”¨äºæ˜¾ç¤ºä»»åŠ¡è¾“å‡ºå¹¶è¯»å–å…¶è¾“å…¥çš„é¢æ¿ã€‚</span></span><br><span class="line"><span class="attr">&quot;reveal&quot;</span><span class="punctuation">:</span> <span class="string">&quot;never&quot;</span> <span class="comment">// æ§åˆ¶è¿è¡Œä»»åŠ¡çš„ç»ˆç«¯æ˜¯å¦æ˜¾ç¤ºã€‚å¯æŒ‰é€‰é¡¹ &quot;revealProblems&quot; è¿›è¡Œæ›¿ä»£ã€‚é»˜è®¤è®¾ç½®ä¸ºâ€œå§‹ç»ˆâ€ã€‚</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// å®šä¹‰æ­¤ä»»åŠ¡å±äºçš„æ‰§è¡Œç»„ã€‚å®ƒæ”¯æŒ &quot;build&quot; ä»¥å°†å…¶æ·»åŠ åˆ°ç”Ÿæˆç»„ï¼Œä¹Ÿæ”¯æŒ &quot;test&quot; ä»¥å°†å…¶æ·»åŠ åˆ°æµ‹è¯•ç»„ã€‚</span></span><br><span class="line"><span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span> <span class="comment">// ä»»åŠ¡çš„æ‰§è¡Œç»„ã€‚</span></span><br><span class="line"><span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// å®šä¹‰æ­¤ä»»åŠ¡æ˜¯å¦ä¸ºç»„ä¸­çš„é»˜è®¤ä»»åŠ¡ã€‚</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h2><p>æˆ‘ä»¬çš„æ’ä»¶å¼€å‘å®Œæˆå‰ï¼Œæƒ³è¦åˆ†äº«ç»™å°ä¼™ä¼´ä½“éªŒå¯ä»¥å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œvscode ä¸ºæˆ‘ä»¬æä¾›äº† <a href="https://github.com/microsoft/vscode-vsce">vsce</a> å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬å°† vsce æ¨¡å—å®‰è£…åˆ°å…¨å±€ï¼Œç„¶åä½¿ç”¨ <code>vsce package</code> å‘½ä»¤å°è¯•æ‰“åŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vsce package</span><br><span class="line"> ERROR  Missing publisher name. Learn more: https://code.visualstudio.com/api/working-with-extensions/publishing-extension<span class="comment">#publishing-extensions</span></span><br></pre></td></tr></table></figure><p>å•Šï¼Œå’‹è¿˜æŠ¥é”™äº†ï¼Ÿ<code>publisher</code> æ˜¯å•¥ï¼Ÿï¼Ÿä¸€è„¸æ‡µé€¼ã€‚ä¸æ…Œï¼ŒæŒ‰<a href="https://code.visualstudio.com/api/working-with-extensions/publishing-extension#create-a-publisher">é“¾æ¥</a> æˆ‘çŸ¥é“äº† publisher æ˜¯ä¸€ä¸ªå¯ä»¥å°†æ‰©å±•å‘å¸ƒåˆ°Visual Studio Code Marketplace çš„èº«ä»½ã€‚æ¯ä¸ªæ‰©å±•éƒ½éœ€è¦åœ¨å…¶ <code>package.json</code> æ–‡ä»¶ä¸­åŒ…å«ä¸€ä¸ªå‘å¸ƒè€…åç§°ã€‚å¦‚æœæ³¨å†Œå‘å¸ƒè€…æˆ‘ä»¬åé¢è¯¦è¯´ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠ <code>publisher</code> è®¾ç½®ä¸º <code>luozhu</code>ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ vsce package</span><br><span class="line"> INFO  Detected presence of yarn.lock. Using <span class="string">&#x27;yarn&#x27;</span> instead of <span class="string">&#x27;npm&#x27;</span> (to override this pass <span class="string">&#x27;--no-yarn&#x27;</span> on the <span class="built_in">command</span> line).</span><br><span class="line"> ERROR  Make sure to edit the README.md file before you package or publish your extension.</span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf561381232b4690a5d7cd0378c267d7~tplv-k3u1fbpfcp-zoom-1.image"></p><p>é¢ï¼Œè£‚å¼€ï¼Œè¿™å’‹è¿˜æŠ¥é”™ï¼Œå‡è£…æ·¡å®šï¼Œè¯»ä¸€ä¸‹æç¤ºåŸæ¥æ˜¯è¦æˆ‘ä»¬ç¼–è¾‘ä¸€ä¸‹ README.mdï¼Œæ²¡é”™ï¼Œvscode æ¨¡æ¿é‡Œæœ‰åˆå§‹çš„ READMEï¼Œæˆ‘ä»¬éœ€è¦ç¼–è¾‘ä¸€ä¸‹æ‰å¯ä»¥æ‰“åŒ…ã€‚ä¿®æ”¹åå†æ¬¡å°è¯• <code>vsce package</code>ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/acfe2e957c9545578c7b6990371a3f0b~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç»ˆäºï¼Œæ‰“åŒ…æˆåŠŸï¼ä¸ºäº†è¿½æ±‚å®Œç¾ï¼Œæœ€åæˆ‘ä»¬å†æ¥åšä¸€äº›ä¼˜åŒ–å·¥ä½œï¼š</p><ol><li>æ‰§è¡Œ <code>vsce package</code> çš„æ—¶å€™åŠ ä¸Š <code>--no-yarn</code></li><li>åœ¨ <em>package.json</em> ä¸­åŠ ä¸Š <code>repository</code> å­—æ®µå³å¯çœ‹ä¸åˆ°ä»»ä½•è­¦å‘Šã€‚</li><li>ä¸ºäº†ä¾¿æ·ï¼Œæˆ‘ä»¬å°† vsce å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åæŠŠ <code>vsce package --no-yarn</code> æ·»åŠ åˆ° npm scripts ä¸­ã€‚</li><li><em>package.json</em> åŠ ä¸Š <code>license</code> å­—æ®µã€‚</li></ol><p>ç„¶åå†æ¬¡å°è¯• <code>yarn package</code> å°±å®Œç¾äº†ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a9a251834b945c8a882039020f56e4f~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>æç¤ºï¼švsce package ä¼šå…ˆæ‰§è¡Œ <code>vscode:prepublish</code> è¿™ä¸ªé¢„å‘å¸ƒè„šæœ¬å»ç¼–è¯‘é¡¹ç›®ã€‚</p></blockquote><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/ZCp4qU">chore: config vsce package</a></p></blockquote><h3 id="æ‰“åŒ…åŸç†"><a href="#æ‰“åŒ…åŸç†" class="headerlink" title="æ‰“åŒ…åŸç†"></a>æ‰“åŒ…åŸç†</h3><p>å¦‚è¿‡ä½ ä¹Ÿè·Ÿç€ä¸€è·¯æ•²åˆ°äº†è¿™é‡Œï¼Œæ­¤æ—¶ä½ ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•å‘ç° <code>vsix</code> ç»“å°¾çš„æ–‡ä»¶ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2c0846bd66747ceab0c09524a209b28~tplv-k3u1fbpfcp-zoom-1.image"></p><p>è¿™å°±æ˜¯ vscode æ’ä»¶çš„å®‰è£…åŒ…ï¼Œæˆ‘ä»¬å…ˆä¸æ€¥ç€å®‰è£…ï¼Œå…ˆä¸€èµ·æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚å°è¯•ç”¨å½’æ¡£å·¥å…·è§£å‹åå¾—åˆ°å¦‚ä¸‹ç›®å½•æ–‡ä»¶å¤¹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/182c365a0690467cb0bd8b0d1490c175~tplv-k3u1fbpfcp-zoom-1.image"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¼–è¯‘åçš„æ–‡ä»¶å¤¹ <code>out</code> å’Œå…¶ä»–ä¸€äº›æ–‡ä»¶æ˜¯è¢«ç›´æ¥å‹ç¼©è¿›å®‰è£…åŒ…çš„ï¼Œèªæ˜çš„ä½ è‚¯å®šå‘ç°äº† <code>.cz-config.js</code>ã€<code>.prettierrc.js</code> å’Œ <code>commitlint.config.js</code> è¿™ç§å¼€å‘æ—¶æ–‡ä»¶ä¹Ÿè¢«å‹ç¼©äº†ï¼Œè¿è¡Œæ’ä»¶å®Œå…¨ç”¨ä¸åˆ°ï¼Œè¿™æ˜æ˜¾ä¸åˆç†ã€‚å…¶å®å’Œå…¶ä»–æ’ä»¶ä½“ç³»ä¸€æ ·ï¼Œvscode ä¹Ÿæä¾›äº† <code>.vscodeignore</code> æ¥å®ç°æ‰“åŒ…å¿½ç•¥é…ç½®ï¼Œæˆ‘ä»¬å°†ä»¥ä¸Šæ— å…³æ–‡ä»¶å¿½ç•¥é‡æ–°æ‰“åŒ…å³å¯ã€‚</p><p>åŸç†å°±è¿™ï¼Ÿä¸å­˜åœ¨çš„ï¼Œæˆ‘ä»¬æ‰“å¼€ <code>extension.js</code> ä¼šå‘ç°å¼•ç”¨äº† <code>vscode</code> è¿™ä¸ªåŒ…ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bb42881e49a94456aeac417f6b5cba71~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ä½†æ˜¯æˆ‘ä»¬çš„å®‰è£…åŒ…ä¸­å¹¶æ²¡æœ‰ _node_modules_ï¼Œé‚£ä¹ˆ vscode è¿™ä¸ªåŒ…å­˜åœ¨åœ¨å“ªé‡Œå‘¢ï¼Ÿæˆ‘çŒœçš„æ˜¯æŒ‚åœ¨ node ç¯å¢ƒä¸Šäº†ï¼Œè¯»äº†<a href="https://is.gd/33GTcH">æºç </a>åæˆ‘å‘ç°æˆ‘ç«Ÿç„¶æ˜¯å¯¹çš„ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e796fcf81b64fd7a18d9c3e36fbefdf~tplv-k3u1fbpfcp-zoom-1.image"></p><p>vscode å®ç°äº†æ‹¦æˆªå™¨åœ¨åŠ è½½ Node ç¯å¢ƒçš„æ—¶å€™å°† vscode ç»™æ·»åŠ åˆ°äº†å†…ç½®åŒ…ä¸­ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å‡å°æ’ä»¶çš„ä½“ç§¯ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚æœä½¿ç”¨ä¸‰æ–¹æ’ä»¶å‘¢ï¼Ÿä»¥å¸¸ç”¨çš„ lodash ä¸ºä¾‹ï¼Œå®‰è£… lodash ä¹‹åé‡æ–°æ‰“åŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ yarn package</span><br><span class="line">yarn run v1.22.10</span><br><span class="line">$ vsce package --no-yarn</span><br><span class="line">Executing prepublish script <span class="string">&#x27;npm run vscode:prepublish&#x27;</span>...</span><br><span class="line"></span><br><span class="line">&gt; juejin-posts@0.0.1 vscode:prepublish</span><br><span class="line">&gt; yarn run compile</span><br><span class="line"></span><br><span class="line">$ tsc -p ./</span><br><span class="line">This extension consists of 1060 files, out of <span class="built_in">which</span> 1049 are JavaScript files. For performance reasons, you should bundle your extension: https://aka.ms/vscode-bundle-extension . You should also exclude unnecessary files by adding them to your .vscodeignore: https://aka.ms/vscode-vscodeignore</span><br><span class="line"> DONE  Packaged: /Users/luozhu/Desktop/playground/juejin-posts/juejin-posts-0.0.1.vsix (1060 files, 644.72KB)</span><br><span class="line">âœ¨  Done <span class="keyword">in</span> 5.54s.</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™æç¤ºæˆ‘ä»¬æœ‰ 1000 å¤šä¸ªæ–‡ä»¶ï¼Œå¤§æ¦‚ç‡ <em>node_modules</em> æ–‡ä»¶å¤¹è¢«æ‰“åŒ…äº†ï¼Œæˆ‘ä»¬æ¥è§£å‹ä¸‹è§è¯ä¸€ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/917b7742991640c9a0b03314cef24ce6~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ä¸å‡ºæ‰€æ–™ï¼Œvscode é»˜è®¤çš„æ‰“åŒ…æ–¹å¼å°±æ˜¯ç®€å•çš„ç¼–è¯‘æ‹·è´ï¼Œé€šè¿‡å¿½ç•¥æ–‡ä»¶å‡å°ä½“ç§¯ä¹Ÿæ˜¯æ¯æ°´è½¦è–ªã€‚è€Œä¸” vscode æ‰©å±•çš„è§„æ¨¡å¾€å¾€å¢é•¿å¾ˆå¿«ã€‚å®ƒä»¬æ˜¯åœ¨å¤šä¸ªæºæ–‡ä»¶ä¸­ç¼–å†™çš„ï¼Œå¹¶ä¾èµ–äº npm çš„æ¨¡å—ã€‚åˆ†è§£å’Œé‡ç”¨æ˜¯å¼€å‘çš„æœ€ä½³å®è·µï¼Œä½†åœ¨å®‰è£…å’Œè¿è¡Œæ‰©å±•æ—¶ï¼Œå®ƒä»¬æ˜¯æœ‰ä»£ä»·çš„ã€‚åŠ è½½ 100 ä¸ªå°æ–‡ä»¶è¦æ¯”åŠ è½½ä¸€ä¸ªå¤§æ–‡ä»¶æ…¢å¾—å¤šã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ¨èæ†ç»‘çš„åŸå› ã€‚æ†ç»‘æ˜¯å°†å¤šä¸ªå°çš„æºæ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶çš„è¿‡ç¨‹ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œæœ‰ä¸åŒçš„æ‰“åŒ…å·¥å…·å¯ä»¥ç”¨ï¼Œæµè¡Œçš„æœ‰ rollup.jsã€Parcelã€esbuild å’Œ webpackï¼Œå®˜æ–¹è„šæ‰‹æ¶é»˜è®¤åªèƒ½é€‰ webpackï¼Œæˆ‘ä»¬è¿™é‡Œæ¨èç›´æ¥ä½¿ç”¨æ›´å¿«æ›´å¼ºçš„ esbuildã€‚</p><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/ZCp4qU">chore: ignore config file when package</a>ã€<a href="https://is.gd/ggpQmv">chore: add esModuleInterop to tsconfig</a></p></blockquote><h3 id="ä½¿ç”¨-esbuild-ä¼˜åŒ–æ‰“åŒ…"><a href="#ä½¿ç”¨-esbuild-ä¼˜åŒ–æ‰“åŒ…" class="headerlink" title="ä½¿ç”¨ esbuild ä¼˜åŒ–æ‰“åŒ…"></a>ä½¿ç”¨ esbuild ä¼˜åŒ–æ‰“åŒ…</h3><p><strong>å®‰è£…ä¾èµ–ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add -D esbuild</span><br></pre></td></tr></table></figure><p><strong>npm scriptsï¼š</strong></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line"><span class="deletion">-    &quot;vscode:prepublish&quot;: &quot;yarn run compile&quot;,</span></span><br><span class="line"><span class="deletion">-    &quot;compile&quot;: &quot;tsc -p ./&quot;,</span></span><br><span class="line"><span class="deletion">-    &quot;watch&quot;: &quot;tsc -watch -p ./&quot;,</span></span><br><span class="line"><span class="deletion">-    &quot;pretest&quot;: &quot;yarn run compile &amp;&amp; yarn run lint&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;vscode:prepublish&quot;: &quot;yarn esbuild-base --minify&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;esbuild-base&quot;: &quot;esbuild ./src/extension.ts --bundle --outfile=out/extension.js --external:vscode --format=cjs --platform=node&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;esbuild&quot;: &quot;yarn esbuild-base --sourcemap&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;esbuild-watch&quot;: &quot;yarn esbuild-base --sourcemap --watch&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;test-compile&quot;: &quot;tsc -p ./&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;pretest&quot;: &quot;yarn test-compile &amp;&amp; yarn lint&quot;,</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šç”±äº watch æ”¹æˆäº† esbuild-watchï¼Œæ‰€ä»¥ <em>.vscode&#x2F;tasks.json</em> ä¸­çš„ scripts å­æ®µä¹Ÿéœ€è¦åšç›¸åº”ä¿®æ”¹ã€‚</p></blockquote><p><strong>vscode tasksï¼š</strong></p><p>ç†è®ºä¸Šæˆ‘ä»¬æŠŠæ‰“åŒ…å‘½ä»¤æ”¹æˆ esbuild ä¹‹åï¼Œåº”è¯¥å°† vscode ä»»åŠ¡ä¸­çš„é—®é¢˜åŒ¹é…ç¨‹åºè®¾ç½®ä¸º <code>$esbuild-watch</code>ï¼Œä½†æ˜¯ vscode ä¼šæç¤ºæˆ‘ä»¬æ— æ³•è¯†åˆ«çš„é—®é¢˜åŒ¹é…ç¨‹åºï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4b51c79ee1344b6f92a3f2efaf9ef7aa~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å°è¯•æœç´¢æ‰©å±•ï¼Œæœç„¶æœ‰ä¸€ä¸ª esbuild Problem Matchers æ’ä»¶ï¼Œæˆ‘ä»¬å°†å…¶å®‰è£…å¹¶æ·»åŠ  <code>&quot;connor4312.esbuild-problem-matchers&quot;</code> åˆ° <em>.vscode&#x2F;extensions.json</em> æ–‡ä»¶çš„ <code>recommendations</code> ä¸­ã€‚</p><p><strong>å¿½ç•¥æ–‡ä»¶ï¼š</strong></p><p>æˆ‘ä»¬ä½¿ç”¨ esbuild æ‰“åŒ…åä¼šå°†ä½¿ç”¨åˆ°çš„ä»£ç éƒ½æ‰“åŒ…è¿› <code>out/extension.js</code>ï¼Œä½†æ˜¯ vsce çš„æ‰“åŒ…æœºåˆ¶æ˜¯ä¸ç®¡ä½ æœ‰æ²¡æœ‰ç”¨åˆ°éƒ½ä¼šæŠŠ <code>dependencies</code> ä¸­çš„åŒ…æ‰“è¿›å®‰è£…åŒ…ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°† <em><em>node_modules</em></em> å¿½ç•¥æ‰ã€‚</p><p><strong>æˆæœå±•ç¤ºï¼š</strong></p><p>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®‰è£…åŒ…çš„ä½“ç§¯å¤§å¤§å‡å°äº†ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba86286be7fc41f4b8325a3e0be0d2d2~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/F12xNk">chore: config esbuild</a></p></blockquote><h2 id="é›†æˆ-umijs"><a href="#é›†æˆ-umijs" class="headerlink" title="é›†æˆ umijs"></a>é›†æˆ umijs</h2><h3 id="åˆå§‹åŒ–-umi-é¡¹ç›®"><a href="#åˆå§‹åŒ–-umi-é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ– umi é¡¹ç›®"></a>åˆå§‹åŒ– umi é¡¹ç›®</h3><p>ä½¿ç”¨ umi è„šæ‰‹æ¶åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª <em>web</em> ç›®å½•ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> web &amp;&amp; <span class="built_in">cd</span> web</span><br></pre></td></tr></table></figure><p>é€šè¿‡å®˜æ–¹å·¥å…·åˆ›å»ºé¡¹ç›®ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn create @umijs/umi-app</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <em>.umirc.ts</em> é…ç½®ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig, <span class="title class_">IConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">nodeModulesTransform</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">routes</span>: [&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;@/pages/index&#x27;</span> &#125;],</span><br><span class="line">  <span class="attr">fastRefresh</span>: &#123;&#125;, <span class="comment">// å¼€å‘æ—¶å¯ä»¥ä¿æŒç»„ä»¶çŠ¶æ€ï¼ŒåŒæ—¶ç¼–è¾‘æä¾›å³æ—¶åé¦ˆã€‚</span></span><br><span class="line">  <span class="attr">history</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;memory&#x27;</span>, <span class="comment">// é»˜è®¤çš„ç±»å‹æ˜¯ `browser`ï¼Œä½†æ˜¯ç”±äº vscode webview ç¯å¢ƒä¸å­˜åœ¨æµè§ˆå™¨è·¯ç”±ï¼Œæ”¹æˆ `memory` å’Œ `hash` éƒ½å¯ä»¥</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">// éœ€è¦åœ¨ dev æ—¶å†™æ–‡ä»¶åˆ°è¾“å‡ºç›®å½•ï¼Œè¿™æ ·ä¿è¯å¼€å‘é˜¶æ®µæœ‰ js/css æ–‡ä»¶</span></span><br><span class="line">    <span class="attr">writeToDisk</span>: <span class="function"><span class="params">filePath</span> =&gt;</span></span><br><span class="line">      [<span class="string">&#x27;umi.js&#x27;</span>, <span class="string">&#x27;umi.css&#x27;</span>].<span class="title function_">some</span>(<span class="function"><span class="params">name</span> =&gt;</span> filePath.<span class="title function_">endsWith</span>(name)),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">IConfig</span>);</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>package.json</code> åŠ å…¥ <code>name</code>ã€<code>version</code>ã€<code>description</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;web&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;web for juejin-posts&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="å¿½ç•¥æ–‡ä»¶"><a href="#å¿½ç•¥æ–‡ä»¶" class="headerlink" title="å¿½ç•¥æ–‡ä»¶"></a>å¿½ç•¥æ–‡ä»¶</h3><p><strong>.gitignoreï¼š</strong></p><p>å°† vscode æ‰©å±•å’Œ umijs è„šæ‰‹æ¶ç”Ÿæˆçš„ gitignore åˆå¹¶ä¸ºä¸€ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># See https://help.github.com/articles/ignoring-files/ for more about ignoring files.</span><br><span class="line"></span><br><span class="line"># vscode</span><br><span class="line">.vscode-test/</span><br><span class="line">*.vsix</span><br><span class="line"></span><br><span class="line"># dependencies</span><br><span class="line">node_modules</span><br><span class="line">npm-debug.log</span><br><span class="line">yarn-error.log</span><br><span class="line">package-lock.json</span><br><span class="line"></span><br><span class="line"># production</span><br><span class="line">out</span><br><span class="line">dist</span><br><span class="line"></span><br><span class="line"># misc</span><br><span class="line">.DS_Store</span><br><span class="line"></span><br><span class="line"># umi</span><br><span class="line">**/src/.umi</span><br><span class="line">**/src/.umi-production</span><br><span class="line">**/src/.umi-test</span><br><span class="line">**/.env.local</span><br><span class="line">web/yarn.lock</span><br></pre></td></tr></table></figure><p><strong>.vscodeignoreï¼š</strong></p><p>ç”±äº vscode æ‰“åŒ…çš„æ—¶å€™åªéœ€è¦è·å– umijs æ‰“åŒ…åçš„äº§ç‰©ï¼Œæ‰€æœ‰åŠ å…¥ <code>web/**</code> å’Œ <code>!web/dist/**</code> å°†æ— ç”¨çš„æ–‡ä»¶å¿½ç•¥æ‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.vscode/**</span><br><span class="line">.vscode-test/**</span><br><span class="line">out/test/**</span><br><span class="line"></span><br><span class="line">src/**</span><br><span class="line">.gitignore</span><br><span class="line">.yarnrc</span><br><span class="line">vsc-extension-quickstart.md</span><br><span class="line">**/tsconfig.json</span><br><span class="line">**/*.map</span><br><span class="line">**/*.ts</span><br><span class="line"></span><br><span class="line">.cz-config.js</span><br><span class="line">.prettierrc.js</span><br><span class="line">.commitlintrc.js</span><br><span class="line">**/node_modules/**</span><br><span class="line">yarn-error.log</span><br><span class="line">web/**</span><br><span class="line">!web/dist/**</span><br></pre></td></tr></table></figure><h3 id="yarn-workspace"><a href="#yarn-workspace" class="headerlink" title="yarn workspace"></a>yarn workspace</h3><p>ç”±äºæˆ‘ä»¬çš„é¡¹ç›®æ˜¯ vscode æ‰©å±•å’Œ web é¡¹ç›®æ··åˆçš„é¡¹ç›®ã€‚ä¸ºäº†æ–¹ä¾¿ç®¡ç†è„šæœ¬å’Œä¾èµ–ï¼Œæˆ‘ä»¬å¼•å…¥äº† <code>yarn workspace</code> æ¥ç®¡ç†é¡¹ç›®ã€‚åœ¨æ ¹ç›®å½•çš„ <em>package.json</em> ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®å³å¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="string">&quot;true&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;workspaces&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;web&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="è°ƒè¯•-1"><a href="#è°ƒè¯•-1" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>ç”±äºæˆ‘ä»¬çš„ web é¡¹ç›®ä¹Ÿéœ€è¦ç¼–è¯‘ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹ vscode <code>launch.json</code> åŠ å…¥ web é¡¹ç›®çš„ç¼–è¯‘ä»»åŠ¡ã€‚é…ç½®å‚è€ƒäº† <a href="http://tny.im/bOqQT">appworks</a>ã€‚</p><p>é¦–å…ˆåœ¨æ ¹ç›®å½•çš„ <code>package.json</code> çš„ scripts ä¸­æ·»åŠ :</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;web-build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn workspace web run build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;web-watch&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn workspace web run start&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹ <em>.vscode&#x2F;launch.json</em> é…ç½®ä¸ºï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A launch configuration that compiles the extension and then opens it inside a new window</span></span><br><span class="line"><span class="comment">// Use IntelliSense to learn about possible attributes.</span></span><br><span class="line"><span class="comment">// Hover to view descriptions of existing attributes.</span></span><br><span class="line"><span class="comment">// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;compounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">// å¤åˆåˆ—è¡¨ã€‚æ¯ä¸ªå¤åˆå¯å¼•ç”¨å¤šä¸ªé…ç½®ï¼Œè¿™äº›é…ç½®å°†ä¸€èµ·å¯åŠ¨ã€‚</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Debug Extension&quot;</span><span class="punctuation">,</span> <span class="comment">// å¤åˆçš„åç§°ã€‚åœ¨å¯åŠ¨é…ç½®ä¸‹æ‹‰èœå•ä¸­æ˜¾ç¤ºã€‚</span></span><br><span class="line">      <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="comment">// å°†ä½œä¸ºæ­¤å¤åˆçš„ä¸€éƒ¨åˆ†å¯åŠ¨çš„é…ç½®åç§°ã€‚</span></span><br><span class="line">        <span class="string">&quot;Run Extension&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;Watch Webview&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;presentation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;order&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Watch Webview&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;attach&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm: web-watch&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Run Extension&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;extensionHost&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;--extensionDevelopmentPath=$&#123;workspaceFolder&#125;&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;outFiles&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;$&#123;workspaceFolder&#125;/out/**/*.js&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;defaultBuildTask&#125;&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å®Œæˆåè¿›å…¥ VS Codeï¼ŒæŒ‰ä¸‹<code>F5</code>ï¼Œä½ ä¼šç«‹å³çœ‹åˆ°ä¸€ä¸ª<strong>æ’ä»¶å‘å¼€ä¸»æœº</strong>çª—å£ï¼Œå…¶ä¸­å°±è¿è¡Œç€æ’ä»¶ã€‚è¿™æ—¶å€™è¿è¡Œä½ ä¼šå‘ç°æ§åˆ¶å°æŠ¥ä¸€ä¸‹é”™è¯¯ âŒï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">error TS6059: File &#x27;/Users/luozhu/Desktop/github/juejin-posts/web/src/pages/index.tsx&#x27; is not under &#x27;rootDir&#x27; &#x27;/Users/luozhu/Desktop/github/juejin-posts/src&#x27;. &#x27;rootDir&#x27; is expected to contain all source files.</span><br><span class="line">  The file is in the program because:</span><br><span class="line">    Matched by include pattern &#x27;**/*&#x27; in &#x27;/Users/luozhu/Desktop/github/juejin-posts/tsconfig.json&#x27;</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯å› ä¸º umi çš„çº¦å®šçš„é¡¹ç›®ç»“æ„å’Œ vscode extension éƒ½åŒ…å« <em>src</em> ç›®å½•ã€‚ç”±äº vscode æ’ä»¶å’Œ umi çš„ç¼–è¯‘æ˜¯åˆ†å¼€çš„ï¼Œæˆ‘ä»¬åœ¨æ ¹ç›®å½•çš„ <em>tsconfig.json</em> ä¸­å°† <em>web</em> ç›®å½•å¿½ç•¥å³å¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;web&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œä½ å¯ä»¥æŒ‰ä¸‹ <code>F5</code> çœ‹åˆ°<strong>æ’ä»¶å‘å¼€ä¸»æœº</strong>çª—å£çš„åŒæ—¶è¿˜ä¼šçœ‹åˆ°ä¸¤ä¸ªè°ƒè¯•ä»»åŠ¡ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d4b3b6f2522643fb9bc574e2f9982775~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>æ³¨æ„ğŸ“¢ï¼šè¯·é€‰æ‹© Debug Extension è°ƒè¯•ä»»åŠ¡è€Œä¸æ˜¯ Run Extension</p></blockquote><h3 id="å…¶ä»–ä¼˜åŒ–å·¥ä½œ"><a href="#å…¶ä»–ä¼˜åŒ–å·¥ä½œ" class="headerlink" title="å…¶ä»–ä¼˜åŒ–å·¥ä½œ"></a>å…¶ä»–ä¼˜åŒ–å·¥ä½œ</h3><ol><li>ç”±äºåŸºäº yarn workspaceï¼Œæˆ‘ä»¬æŠŠå…¬ç”¨çš„ä¾èµ–åˆå¹¶</li><li>åˆå¹¶ Eslint é…ç½®å¹¶ä½¿ç”¨ <code>@luozhu/eslint-config-react-typescrip</code></li><li>åˆå¹¶ Editorconfig å’Œ Prettier é…ç½®</li><li>æ·»åŠ  <code>prestart</code> å’Œ <code>prebuild</code> script</li><li>è®¾ç½® <code>HTML=none umi build</code></li></ol><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/bt3WHr">chore: config umijs</a></p></blockquote><h2 id="vscode-æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ"><a href="#vscode-æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="vscode æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ"></a>vscode æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ</h2><p>åœ¨å¼€å§‹ webview èƒ½åŠ›å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ vscode æ’ä»¶å¼€å‘çš„æ ¸å¿ƒæ¦‚å¿µã€‚ä¸ºäº†æœ‰ä¸ªå…¨å±€çš„ç†è§£ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æˆ‘ä»¬ç°åœ¨é¡¹ç›®çš„ä¸»è¦ç›®å½•ç»“æ„ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ CHANGELOG.md <span class="comment"># åŸºäº standard-version ç”Ÿæˆçš„æ›´æ–°æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ package.json <span class="comment"># vscode åŒ…é…ç½®æ–‡ä»¶ï¼Œè¯¸å¦‚æ’ä»¶ LOGOã€åå­—ã€æè¿°ã€æ³¨å†Œæ¿€æ´»äº‹ä»¶</span></span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â””â”€â”€ extension.ts <span class="comment"># æ’ä»¶å…¥å£æ–‡ä»¶ï¼Œæš´éœ² activate æ–¹æ³•ç”¨äºæ³¨å†Œå‘½ä»¤å’Œåˆå§‹åŒ–ä¸€äº›é…ç½®ï¼Œæš´éœ² deactivate æ–¹æ³•ç”¨äºæ’ä»¶å…³é—­å‰æ‰§è¡Œæ¸…ç†å·¥ä½œ</span></span><br><span class="line">â”œâ”€â”€ tsconfig.json <span class="comment"># vscode çš„ç¼–è¯‘é…ç½®</span></span><br><span class="line">â”œâ”€â”€ web <span class="comment"># åŸºäº umi çš„ webï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åè¾¹ webview è¦æ‰¿è½½çš„å†…å®¹</span></span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure><p>ä»ç›®å½•ç»“æ„å¯ä»¥çœ‹å‡ºï¼Œå…³é”®çš„æ–‡ä»¶æ˜¯ <code>package.json</code> å’Œ <code>extension.ts</code>ï¼Œæˆ‘ä»¬ä»¥ helloWorld å‘½ä»¤ä¸ºä¾‹ä»‹ç»ä¸‹ vscode æ’ä»¶çš„ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚</p><h3 id="1-æ¿€æ´»äº‹ä»¶"><a href="#1-æ¿€æ´»äº‹ä»¶" class="headerlink" title="1. æ¿€æ´»äº‹ä»¶"></a>1. æ¿€æ´»äº‹ä»¶</h3><p><strong>æ¿€æ´»äº‹ä»¶</strong>æ˜¯åœ¨ <code>package.json</code> ä¸­çš„ <code>activationEvents</code> å­—æ®µå£°æ˜çš„ä¸€ä¸ª JSON æ•°ç»„å¯¹è±¡ã€‚ä¸ºäº†æ³¨å†Œ helloWorld è¿™ä¸ªå‘½ä»¤ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯æ³¨å†Œæ¿€æ´»äº‹ä»¶ï¼Œæ¿€æ´»äº‹ä»¶ç±»å‹æœ‰å¾ˆå¤šï¼Œæ³¨å†Œå‘½ä»¤çš„æ¿€æ´»äº‹ä»¶æ˜¯ <code>onCommand</code>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;activationEvents&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;onCommand:juejin-posts.helloWorld&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2-å‘å¸ƒå†…å®¹é…ç½®"><a href="#2-å‘å¸ƒå†…å®¹é…ç½®" class="headerlink" title="2. å‘å¸ƒå†…å®¹é…ç½®"></a>2. å‘å¸ƒå†…å®¹é…ç½®</h3><p>å‘å¸ƒå†…å®¹é…ç½®ï¼ˆ å³ VS Code ä¸ºæ’ä»¶æ‰©å±•æä¾›çš„é…ç½®é¡¹ï¼‰æ˜¯ <code>package.json</code> çš„ <code>contributes</code> å­—æ®µï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­æ³¨å†Œå„ç§é…ç½®é¡¹æ‰©å±• VS Code çš„èƒ½åŠ›ã€‚ä¸Šä¸€æ­¥æˆ‘ä»¬æ³¨å†Œçš„ helloWorld æ¿€æ´»äº‹ä»¶åªæ˜¯å‘Šè¯‰äº† vscode å¯ä»¥é€šè¿‡ <code>juejin-posts.helloWorld</code> å‘½ä»¤è§¦å‘ã€‚æˆ‘ä»¬è¿˜éœ€è¦å† <code>contributes.commands</code> ä¸­æ³¨å†Œæˆ‘ä»¬çš„ <code>juejin-posts.helloWorld</code> å‘½ä»¤ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;commands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;juejin-posts.helloWorld&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="3-VS-Code-API"><a href="#3-VS-Code-API" class="headerlink" title="3. VS Code API"></a>3. VS Code API</h3><p><strong>VS Code API</strong> æ˜¯ VS Code æä¾›ç»™æ’ä»¶ä½¿ç”¨çš„ä¸€ç³»åˆ— Javascript APIã€‚é€šè¿‡å‰ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µçš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å·²ç»æ³¨å†Œå¥½äº†å‘½ä»¤å’Œäº‹ä»¶ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å¿…ç„¶å°±æ˜¯æ³¨å†Œäº‹ä»¶å›è°ƒã€‚äº‹ä»¶å›è°ƒåœ¨ vscode ä¸­æ˜¯é€šè¿‡ <code>vscode.commands.registerCommand</code> å‡½æ•°æ¥æ³¨å†Œçš„ï¼Œä¸‹é¢ ğŸ‘‡ğŸ» æ˜¯æˆ‘ä»¬åœ¨å…¥å£æ–‡ä»¶ <code>src/extension.ts</code> ä¸­æ³¨å†Œ <code>juejin-posts.helloWorld</code> å‘½ä»¤ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vscode è¿™ä¸ªæ¨¡å—åŒ…å«äº† VS Code æ‰©å±•çš„ API</span></span><br><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•å½“ä½ çš„æ‰©å±•æ¿€æ´»æ—¶è°ƒç”¨ï¼Œæ‰©å±•ä¼šåœ¨å‘½ä»¤é¦–æ¬¡æ‰§è¡Œæ—¶æ¿€æ´»</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="comment">// å½“ä½ çš„æ‰©å±•è¢«æ¿€æ´»æ—¶ï¼Œè¿™è¡Œä»£ç å°†åªè¢«æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">// ä½¿ç”¨ console.log è¾“å‡ºæ—¥å¿—ä¿¡æ¯æˆ–ä½¿ç”¨ console.error è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Congratulations, your extension &quot;juejin-posts&quot; is now active!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¥å£å‘½ä»¤å·²ç»åœ¨ package.json æ–‡ä»¶ä¸­å®šä¹‰å¥½äº†ï¼Œç°åœ¨è°ƒç”¨ registerCommand æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// registerCommand ä¸­çš„å‚æ•°å¿…é¡»ä¸ package.json ä¸­çš„ command ä¿æŒä¸€è‡´</span></span><br><span class="line">  <span class="keyword">const</span> disposable = vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-posts.helloWorld&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æŠŠä½ çš„ä»£ç å†™åœ¨è¿™é‡Œï¼Œæ¯æ¬¡å‘½ä»¤æ‰§è¡Œæ—¶éƒ½ä¼šè°ƒç”¨è¿™é‡Œçš„ä»£ç </span></span><br><span class="line">    <span class="comment">// ç»™ç”¨æˆ·æ˜¾ç¤ºä¸€ä¸ªæ¶ˆæ¯æç¤º</span></span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">showInformationMessage</span>(<span class="string">&#x27;Hello World from Juejin Posts!&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(disposable);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“ä½ çš„æ‰©å±•è¢«åœç”¨æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deactivate</span>(<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="é›†æˆ-webview"><a href="#é›†æˆ-webview" class="headerlink" title="é›†æˆ webview"></a>é›†æˆ webview</h2><h3 id="æ³¨å†Œå‘½ä»¤"><a href="#æ³¨å†Œå‘½ä»¤" class="headerlink" title="æ³¨å†Œå‘½ä»¤"></a>æ³¨å†Œå‘½ä»¤</h3><p>1ã€<em>package.json</em> æ¿€æ´»äº‹ä»¶ï¼ˆ<code>activationEvents</code>ï¼‰ä¸­æ·»åŠ  <code>&quot;onCommand:juejin-posts.start&quot;</code></p><p>2ã€<em>package.json</em> å‘½ä»¤ï¼ˆ<code>commands</code>ï¼‰ä¸­æ·»åŠ ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;juejin-posts.start&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;start&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Juejin Posts&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>3ã€<em>src&#x2F;extension.ts</em> ä¸­æ³¨å†Œå‘½ä»¤</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-posts.start&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Truth is endless. Keep coding...</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-webview-é¢æ¿"><a href="#åˆ›å»º-webview-é¢æ¿" class="headerlink" title="åˆ›å»º webview é¢æ¿"></a>åˆ›å»º webview é¢æ¿</h3><h4 id="åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿"><a href="#åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿" class="headerlink" title="åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿"></a>åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¹¶æ˜¾ç¤ºæ–°çš„webview</span></span><br><span class="line"><span class="keyword">const</span> panel = vscode.<span class="property">window</span>.<span class="title function_">createWebviewPanel</span>(</span><br><span class="line">  <span class="string">&#x27;juejin-posts&#x27;</span>, <span class="comment">// åªä¾›å†…éƒ¨ä½¿ç”¨ï¼Œè¿™ä¸ª webview çš„æ ‡è¯†</span></span><br><span class="line">  <span class="string">&#x27;Juejin Posts&#x27;</span>, <span class="comment">// ç»™ç”¨æˆ·æ˜¾ç¤ºçš„é¢æ¿æ ‡é¢˜</span></span><br><span class="line">  vscode.<span class="property">vscode</span>.<span class="property">ViewColumn</span>.<span class="property">One</span>, <span class="comment">// ç»™æ–°çš„ webview é¢æ¿ä¸€ä¸ªç¼–è¾‘å™¨è§†å›¾</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">enableScripts</span>: <span class="literal">true</span>, <span class="comment">// å¯ç”¨ javascript è„šæœ¬</span></span><br><span class="line">    <span class="attr">retainContextWhenHidden</span>: <span class="literal">true</span>, <span class="comment">// éšè—æ—¶ä¿ç•™ä¸Šä¸‹æ–‡</span></span><br><span class="line">  &#125; <span class="comment">// webview é¢æ¿çš„å†…å®¹é…ç½®</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨äº† <a href="https://vscode-api.js.org/modules/window.html#createWebviewPanel">window.createWebviewPanel</a> API åˆ›å»ºäº†ä¸€ä¸ª webview é¢æ¿ï¼Œç°åœ¨æˆ‘ä»¬å°è¯•è¿è¡Œ <code>juejin-posts.start</code> å°±å¯ä»¥æ‰“å¼€ä¸€ä¸ª webview é¢æ¿ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d85ad985232542f587376e5073feb1a1~tplv-k3u1fbpfcp-zoom-1.image"></p><h4 id="ç»™é¢æ¿è®¾ç½®å†…å®¹"><a href="#ç»™é¢æ¿è®¾ç½®å†…å®¹" class="headerlink" title="ç»™é¢æ¿è®¾ç½®å†…å®¹"></a>ç»™é¢æ¿è®¾ç½®å†…å®¹</h4><p>ä¸Šé¢æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç©ºç™½çš„é¢æ¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç»™é¢æ¿æ·»åŠ å†…å®¹å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>panel.webview.html</code> æ¥è®¾ç½® HTML å†…å®¹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getWebviewContent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">    &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;title&gt;Juejin Posts&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;style&gt;</span></span><br><span class="line"><span class="string">          html, body &#123;</span></span><br><span class="line"><span class="string">            padding: 0px;</span></span><br><span class="line"><span class="string">            height: 100vh;</span></span><br><span class="line"><span class="string">            position: relative;</span></span><br><span class="line"><span class="string">            margin: 0;</span></span><br><span class="line"><span class="string">            padding: 0;</span></span><br><span class="line"><span class="string">            overflow: hidden;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">          #yoyo &#123;</span></span><br><span class="line"><span class="string">            position: absolute;</span></span><br><span class="line"><span class="string">            bottom: 50px;</span></span><br><span class="line"><span class="string">            right: -90px;</span></span><br><span class="line"><span class="string">            opacity: 0;</span></span><br><span class="line"><span class="string">            transition: .25s ease-in-out</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">          #yoyo:hover &#123;</span></span><br><span class="line"><span class="string">            opacity: 1;</span></span><br><span class="line"><span class="string">            right: 0;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &lt;/style&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">      &lt;a href=&quot;https://juejin.cn&quot;&gt;&lt;img id=&quot;yoyo&quot; src=&quot;https://cdn.jsdelivr.net/gh/youngjuning/images/20210817163229.png&quot; width=&quot;100&quot; /&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="comment">// ç»™ webview panel è®¾ç½® HTML å†…å®¹</span></span><br><span class="line">panel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getWebviewContent</span>();</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>é‡æ–°ä½¿ç”¨ <code>juejin-posts.start</code> å‘½ä»¤å°±å¯ä»¥è°ƒæˆæ‚ æ‚ èˆ¹é•¿äº†ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5160d0c76536441b8d1ac3cfcedc0d0e~tplv-k3u1fbpfcp-zoom-1.image"></p><h4 id="é™åˆ¶-webview-è§†å›¾ä¸ºä¸€ä¸ª"><a href="#é™åˆ¶-webview-è§†å›¾ä¸ºä¸€ä¸ª" class="headerlink" title="é™åˆ¶ webview è§†å›¾ä¸ºä¸€ä¸ª"></a>é™åˆ¶ webview è§†å›¾ä¸ºä¸€ä¸ª</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="comment">// è¿½è¸ªå½“å‰ webview é¢æ¿</span></span><br><span class="line">  <span class="keyword">let</span> <span class="attr">currentPanel</span>: vscode.<span class="property">WebviewPanel</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">    vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-posts.start&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è·å–å½“å‰æ´»åŠ¨çš„ç¼–è¾‘å™¨</span></span><br><span class="line">      <span class="keyword">const</span> columnToShowIn = vscode.<span class="property">window</span>.<span class="property">activeTextEditor</span></span><br><span class="line">        ? vscode.<span class="property">window</span>.<span class="property">activeTextEditor</span>.<span class="property">viewColumn</span></span><br><span class="line">        : <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (currentPanel) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªé¢æ¿ï¼Œé‚£å°±æŠŠå®ƒæ˜¾ç¤ºåˆ°ç›®æ ‡åˆ—å¸ƒå±€ä¸­</span></span><br><span class="line">        currentPanel.<span class="title function_">reveal</span>(columnToShowIn);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ä¸ç„¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¢æ¿</span></span><br><span class="line">        currentPanel = vscode.<span class="property">window</span>.<span class="title function_">createWebviewPanel</span>();</span><br><span class="line">        <span class="comment">// å½“å‰é¢æ¿è¢«å…³é—­åé‡ç½®</span></span><br><span class="line">        currentPanel.<span class="title function_">onDidDispose</span>(</span><br><span class="line">          <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            currentPanel = <span class="literal">undefined</span>;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="literal">null</span>,</span><br><span class="line">          context.<span class="property">subscriptions</span></span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://vscode-api-cn.js.org/modules/window.html#activeTextEditor">vscode.window.activeTextEditor</a>ï¼šè·å–å½“å‰æ´»åŠ¨çš„æ–‡æœ¬ç¼–è¾‘å™¨</li><li><a href="https://vscode-api-cn.js.org/interfaces/WebviewPanel.html#reveal">currentPanel.reveal()</a>ï¼šè°ƒç”¨ <code>reveal()</code> æˆ–è€…æ‹–åŠ¨ webview é¢æ¿åˆ°æ–°çš„ç¼–è¾‘å¸ƒå±€ä¸­å»ã€‚</li></ul><h4 id="è®¾ç½®-Icon"><a href="#è®¾ç½®-Icon" class="headerlink" title="è®¾ç½® Icon"></a>è®¾ç½® Icon</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½® Logo</span></span><br><span class="line">panel.<span class="property">iconPath</span> = vscode.<span class="property">Uri</span>.<span class="title function_">file</span>(</span><br><span class="line">  path.<span class="title function_">join</span>(context.<span class="property">extensionPath</span>, <span class="string">&#x27;assets&#x27;</span>, <span class="string">&#x27;icon-juejin.png&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>åœ¨ vscode æ‰©å±•ä¸­æˆ‘ä»¬éœ€è¦é€šè¿‡ <code>vscode.Uri.file</code> æ–¹æ³•è·å–ç£ç›˜ä¸Šçš„èµ„æºè·¯å¾„ã€‚</p><h4 id="webview-è·å–å†…å®¹çš„-Uri"><a href="#webview-è·å–å†…å®¹çš„-Uri" class="headerlink" title="webview è·å–å†…å®¹çš„ Uri"></a>webview è·å–å†…å®¹çš„ Uri</h4><p>ä½ åº”è¯¥ä½¿ç”¨ <code>asWebviewUri</code> ç®¡ç†æ’ä»¶èµ„æºã€‚ä¸è¦ç¡¬ç¼–ç  <code>vscode-resource://</code>ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>asWebviewUri</code> ç¡®ä¿ä½ çš„æ’ä»¶åœ¨äº‘ç«¯ç¯å¢ƒä¹Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚</p><p>åœ¨ <a href="http://tny.im/jb4go">@luozhu&#x2F;vscode-utils</a> ä¸­æˆ‘ä»¬å¯¹è·å–æœ¬åœ°èµ„æºè·¯å¾„åšäº†å°è£…ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å†…å®¹çš„ Uri</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getDiskPath</span> = (<span class="params">fileName: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> webviewPanel.<span class="property">webview</span>.<span class="title function_">asWebviewUri</span>(</span><br><span class="line">    vscode.<span class="property">Uri</span>.<span class="title function_">file</span>(path.<span class="title function_">join</span>(context.<span class="property">extensionPath</span>, rootPath, <span class="string">&#x27;dist&#x27;</span>, fileName))</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-umi-å¼€å‘-webview"><a href="#ä½¿ç”¨-umi-å¼€å‘-webview" class="headerlink" title="ä½¿ç”¨ umi å¼€å‘ webview"></a>ä½¿ç”¨ umi å¼€å‘ webview</h3><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬é€šè¿‡è°ƒæˆæ‚ æ‚ èˆ¹é•¿ç†Ÿæ‚‰äº† webview é¢æ¿çš„åˆ›å»ºï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨ umijs æ¥ä»£æ›¿ HTML çš„å†…å®¹ã€‚</p><p><code>panel.webview.html</code> ä¸­çš„å†…å®¹å…¶å®å°±æ˜¯æ­£å¸¸çš„ HTML+JavaScript+CSS ä»£ç ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å‰ç«¯æŠ€æœ¯å»ç¼–å†™å®ƒçš„å†…å®¹ï¼Œæ¯”å¦‚ jqueryã€bootstrapã€Vue ä»¥åŠ Reactã€‚è™½ç„¶æœ¬æ–‡çš„ä¾‹å­æ˜¯åŸºäº umijs å¼€å‘ webview çš„å†…å®¹ï¼Œä½†æ˜¯å…¶ä»–æŠ€æœ¯åŸç†æ˜¯ä¸€æ ·çš„ï¼Œæ´›ç«¹åœ¨åç»­ä¹Ÿä¼šæä¾›å¤šä¸ªæŠ€æœ¯çš„ vscode webview å¼€å‘è„šæ‰‹æ¶ã€‚</p><h4 id="å°è£…è·å–-umijs-æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•"><a href="#å°è£…è·å–-umijs-æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•" class="headerlink" title="å°è£…è·å– umijs æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•"></a>å°è£…è·å– umijs æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•</h4><p>æˆ‘ä»¬çŸ¥é“ <code>umi build</code> å‘½ä»¤ä¼šåœ¨ <em>web&#x2F;dist</em> äº§ç”Ÿ index.htmlã€umi.jsã€umi.css ä¸‰ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ ¹æ® index.html æ”¹é€ å‰é¢çš„ getWebviewContent æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–åŸºäº umijs çš„ webview å†…å®¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context æ‰©å±•ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> webviewPanel webview é¢æ¿å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rootPath webview æ‰€åœ¨è·¯å¾„ï¼Œé»˜è®¤ web</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> umiVersion umi ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> <span class="variable">string</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getUmiContent</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  context: vscode.ExtensionContext,</span></span><br><span class="line"><span class="params">  webviewPanel: vscode.WebviewPanel,</span></span><br><span class="line"><span class="params">  umiVersion?: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  rootPath = <span class="string">&#x27;web&#x27;</span></span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// è·å–ç£ç›˜ä¸Šçš„èµ„æºè·¯å¾„</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getDiskPath</span> = (<span class="params">fileName: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> webviewPanel.<span class="property">webview</span>.<span class="title function_">asWebviewUri</span>(</span><br><span class="line">      vscode.<span class="property">Uri</span>.<span class="title function_">file</span>(path.<span class="title function_">join</span>(context.<span class="property">extensionPath</span>, rootPath, <span class="string">&#x27;dist&#x27;</span>, fileName))</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;html&gt;</span></span><br><span class="line"><span class="string">      &lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;meta charset=&quot;utf-8&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;meta</span></span><br><span class="line"><span class="string">          name=&quot;viewport&quot;</span></span><br><span class="line"><span class="string">          content=&quot;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot;</span></span><br><span class="line"><span class="string">        /&gt;</span></span><br><span class="line"><span class="string">        &lt;link rel=&quot;stylesheet&quot; href=&quot;<span class="subst">$&#123;getDiskPath(<span class="string">&#x27;umi.css&#x27;</span>)&#125;</span>&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;style&gt;</span></span><br><span class="line"><span class="string">          html, body, #root &#123;</span></span><br><span class="line"><span class="string">            width: 100%;</span></span><br><span class="line"><span class="string">            height: 100%;</span></span><br><span class="line"><span class="string">            margin: 0;</span></span><br><span class="line"><span class="string">            padding: 0;</span></span><br><span class="line"><span class="string">            overflow: hidden;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &lt;/style&gt;</span></span><br><span class="line"><span class="string">        &lt;script&gt;</span></span><br><span class="line"><span class="string">          //! umi version: <span class="subst">$&#123;umiVersion&#125;</span></span></span><br><span class="line"><span class="string">        &lt;/script&gt;</span></span><br><span class="line"><span class="string">      &lt;/head&gt;</span></span><br><span class="line"><span class="string">      &lt;body&gt;</span></span><br><span class="line"><span class="string">        &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;script src=&quot;<span class="subst">$&#123;getDiskPath(<span class="string">&#x27;umi.js&#x27;</span>)&#125;</span>&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">      &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æç¤ºï¼šä¸Šé¢çš„æ–¹æ³•æˆ‘å·²ç»å°è£…åœ¨ <a href="https://github.com/youngjuning/luozhu/tree/main/packages/vscode-utils">@luozhu&#x2F;vscode-utils</a> çš„ä¸­ã€‚</p></blockquote><p>æˆ‘ä»¬ä½¿ç”¨ getUmiContent é‡æ–°å‰é¢çš„ä»£ç ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getUmiContent &#125; <span class="keyword">from</span> <span class="string">&#x27;@luozhu/vscode-utils&#x27;</span>;</span><br><span class="line">...</span><br><span class="line">panel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getUmiContent</span>(context, panel, <span class="string">&#x27;3.5.17&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="ä¼˜åŒ–æ‰“åŒ…"><a href="#ä¼˜åŒ–æ‰“åŒ…" class="headerlink" title="ä¼˜åŒ–æ‰“åŒ…"></a>ä¼˜åŒ–æ‰“åŒ…</h4><p>ç”±äºæˆ‘ä»¬å°è£…äº† <code>getUmiContent</code> æ–¹æ³•ï¼Œ<code>umi build</code> ç”Ÿæˆçš„ index.html å°±æ²¡æœ‰ç”¨äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>HTML=none umi build</code> å‘½ä»¤åœ¨æ‰“åŒ…çš„æ—¶å€™ä¸ç”Ÿæˆ index.html æ–‡ä»¶ã€‚</p><p>å¦å¤–ç›®å‰ <a href="https://github.com/umijs/umi/issues/7132">umijs çš„ mfsu ä¸æ”¯æŒ writeToDisk æ–¹æ³•</a>ï¼Œå¦‚æœåç»­æ”¯æŒäº†å¯ä»¥ä½¿ç”¨ mfsu ä¼˜åŒ–è°ƒè¯•é€Ÿåº¦ã€‚</p><blockquote><p>åˆ›å»º webview é¢æ¿çš„ä»»åŠ¡å¤§éƒ¨åˆ†éƒ½æ¯”è¾ƒé‡å¤ï¼Œä¸ºäº†æ²‰æ·€æœ€ä½³å®è·µï¼Œæˆ‘åœ¨ <a href="https://github.com/youngjuning/luozhu/tree/main/packages/vscode-utils">@luozhu&#x2F;vscode-utils</a> å°è£…äº† <a href="http://tny.im/bHLQx">createUmiWebviewPanel</a> æ–¹æ³•ã€‚</p></blockquote><h3 id="ç»™-webview-å†…å®¹åŠ ä¸Šä¸»é¢˜"><a href="#ç»™-webview-å†…å®¹åŠ ä¸Šä¸»é¢˜" class="headerlink" title="ç»™ webview å†…å®¹åŠ ä¸Šä¸»é¢˜"></a>ç»™ webview å†…å®¹åŠ ä¸Šä¸»é¢˜</h3><p>webview å¯ä»¥åŸºäºå½“å‰çš„ VS Code ä¸»é¢˜å’Œ CSS æ”¹å˜è‡ªèº«çš„æ ·å¼ã€‚VS Code å°†ä¸»é¢˜åˆ†æˆ 3 ç§ç±»åˆ«ï¼Œè€Œä¸”åœ¨ body å…ƒç´ ä¸ŠåŠ ä¸Šäº†ç‰¹æ®Šç±»åä»¥è¡¨æ˜å½“å‰ä¸»é¢˜ï¼Œæˆ‘ä»¬åœ¨ umi ä¸­å…¨å±€åŠ å…¥ä¸‹é¢çš„æ ·å¼ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">body.<span class="property">vscode</span>-light &#123;</span><br><span class="line">  h1, h2, h3, h4, h5, h6 &#123;</span><br><span class="line">    <span class="attr">color</span>: black;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">color</span>: black;</span><br><span class="line">  background-<span class="attr">color</span>: <span class="title function_">var</span>(--vscode-editor-background);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body.<span class="property">vscode</span>-dark &#123;</span><br><span class="line">  h1, h2, h3, h4, h5, h6 &#123;</span><br><span class="line">    <span class="attr">color</span>: white;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">color</span>: white;</span><br><span class="line">  background-<span class="attr">color</span>: <span class="title function_">var</span>(--vscode-editor-background);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body.<span class="property">vscode</span>-high-contrast &#123;</span><br><span class="line">  h1, h2, h3, h4, h5, h6 &#123;</span><br><span class="line">    <span class="attr">color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">color</span>: red;</span><br><span class="line">  background-<span class="attr">color</span>: <span class="title function_">var</span>(--vscode-editor-background);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºè¿™éƒ¨åˆ†é€‚é…å¤§éƒ¨åˆ†æ˜¯é€šç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°†å®ƒå°è£…è¿›äº† <code>@luozhu/vscode-utils</code> çš„ <code>getUmiContent</code> ä¸­äº†ã€‚</p><h2 id="webview-ä¸-vscode-äº¤äº’"><a href="#webview-ä¸-vscode-äº¤äº’" class="headerlink" title="webview ä¸ vscode äº¤äº’"></a>webview ä¸ vscode äº¤äº’</h2><h3 id="webview-ä¸­æ‰§è¡Œè„šæœ¬"><a href="#webview-ä¸­æ‰§è¡Œè„šæœ¬" class="headerlink" title="webview ä¸­æ‰§è¡Œè„šæœ¬"></a>webview ä¸­æ‰§è¡Œè„šæœ¬</h3><p>vscode ä¸­çš„ webview æœ¬è´¨å°±æ˜¯ä¸€ä¸ª iframeï¼Œå› æ­¤æˆ‘ä»¬æ˜¯å¯ä»¥å† webview ä¸­æ‰§è¡Œè„šæœ¬çš„ï¼Œåªä¸è¿‡åœ¨ vscode ä¸­ webview é»˜è®¤ç¦ç”¨äº† JavaScriptï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨ <code>createWebviewPanel</code> API æ—¶ä¼ å…¥ <code>enableScripts: true</code> å³å¯ã€‚</p><h3 id="æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™-webview"><a href="#æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™-webview" class="headerlink" title="æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™ webview"></a>æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™ webview</h3><p>webview çš„è„šæœ¬èƒ½åšåˆ°ä»»ä½•æ™®é€šç½‘é¡µè„šæœ¬èƒ½åšåˆ°çš„äº‹æƒ…ï¼Œä½†æ˜¯ webview è¿è¡Œåœ¨è‡ªå·±çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè„šæœ¬æ˜¯ä¸èƒ½è®¿é—® VS Code API çš„ã€‚æˆ‘ä»¬éœ€è¦å€ŸåŠ© postMessage è¿™ç§äº‹ä»¶çš„æ–¹å¼ä¼ é€’ä¿¡æ¯ã€‚åœ¨ vscode ä¸­ï¼Œæˆ‘ä»¬åœ¨ vscode ä¾§å¯ä»¥ä½¿ç”¨ <a href="https://vscode-api-cn.js.org/interfaces/Webview.html#postMessage">Webview.postMessage</a> å‘å¸ƒäº‹ä»¶å¹¶å‘é€ä»»ä½•åºåˆ—åŒ–çš„ JSON æ•°æ®ï¼Œåœ¨ webview ä¾§åˆ™ä½¿ç”¨ <code>window.addEventListener(&#39;message&#39; event =&gt; &#123; ... &#125;)</code> æ¥å¤„ç†è¿™äº›ä¿¡æ¯ï¼š</p><p><strong>vscode ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œä¸€ä¸ªæ–°çš„å‘½ä»¤</span></span><br><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-me.author&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!currentPanel) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠä¿¡æ¯å‘é€åˆ° webview</span></span><br><span class="line">    <span class="comment">// ä½ å¯ä»¥å‘é€ä»»ä½•åºåˆ—åŒ–çš„ JSON æ•°æ®</span></span><br><span class="line">    currentPanel.<span class="property">webview</span>.<span class="title function_">postMessage</span>(&#123; <span class="attr">method</span>: <span class="string">&#x27;showAuthor&#x27;</span> &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Modal</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line">...</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> message = event.<span class="property">data</span>;</span><br><span class="line">  <span class="keyword">switch</span> (message.<span class="property">method</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;showAuthor&#x27;</span>: &#123;</span><br><span class="line">      <span class="title class_">Modal</span>.<span class="title function_">info</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;æ´›ç«¹&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ´›ç«¹ğŸ‹ä¸€åªä½åœ¨æ­åŸçš„æœ¨ç³»å‰ç«¯ğŸ§šğŸ»â€â™€ï¸ï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ğŸ“šï¼Œå¯ä»¥é€šè¿‡</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://juejin.cn/user/325111174662855/posts&quot;</span>&gt;</span>ç‚¹èµ<span class="tag">&lt;/<span class="name">a</span>&gt;</span>å¸®æˆ‘èšé›†çµåŠ›â­ï¸ã€‚</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        ),</span><br><span class="line">        <span class="attr">okText</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://juejin.cn/user/325111174662855/posts&quot;</span>&gt;</span>ç‚¹èµ o(ï¿£â–½ï¿£)ï½„<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœ</strong>ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0dd7dd37db954d84925ac1c0f60cb965~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="webview-ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶"><a href="#webview-ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶" class="headerlink" title="webview ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶"></a>webview ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶</h3><p>webview åå‘ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶çš„åŸç†ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ç”±äº webview çš„ä¸Šä¸‹æ–‡é™åˆ¶ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡ <code>acquireVsCodeApi</code> å‡½æ•°è·å–é˜‰å‰²ç‰ˆçš„ VS Code API å¯¹è±¡ï¼Œè¿™ä¸ªé˜‰å‰²çš„å¯¹è±¡ä¸Šæœ‰ä¸€ä¸ª <code>postMessage</code> å‡½æ•°å¯ä»¥ä¾›æˆ‘ä»¬å‘é€äº‹ä»¶ç”¨ã€‚æ³¨æ„ <code>acquireVsCodeApi</code> ä¸ªä¼šè¯ä¸­åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œé‡å¤è°ƒç”¨ä¼šæŠ¥é”™ã€‚è€Œåœ¨æ’ä»¶ä¾§åˆ™å¯ä»¥é€šè¿‡ <a href="https://vscode-api-cn.js.org/interfaces/Webview.html#onDidReceiveMessage">Webview.onDidReceiveMessage</a> å¤„ç† webview ä¼ é€’çš„ä¿¡æ¯ã€‚æˆ‘ä»¬æ¥å†™ä¸€ä¸ªåœ¨ webview ä¸­è°ƒç”¨ <code>vscode.window.showInformationMessage</code> çš„ä¾‹å­ï¼š</p><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vscode = <span class="title function_">acquireVsCodeApi</span>();</span><br><span class="line">vscode.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;showMessage&#x27;</span>,</span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">text</span>: <span class="string">`ä¸ºäººæ°‘æœåŠ¡`</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>æ’ä»¶ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤„ç† webview ä¸­çš„ä¿¡æ¯</span></span><br><span class="line">currentPanel.<span class="property">webview</span>.<span class="title function_">onDidReceiveMessage</span>(</span><br><span class="line">  <span class="function"><span class="params">message</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (message.<span class="property">method</span> === <span class="string">&#x27;showMessage&#x27;</span>) &#123;</span><br><span class="line">      vscode.<span class="property">window</span>.<span class="title function_">showInformationMessage</span>(message.<span class="property">params</span>.<span class="property">content</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">undefined</span>,</span><br><span class="line">  context.<span class="property">subscriptions</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœ</strong>ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c32c8b374b534d6fac1cb552287de6ca~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="åœ¨-webview-ä¸­è¯·æ±‚æ¥å£"><a href="#åœ¨-webview-ä¸­è¯·æ±‚æ¥å£" class="headerlink" title="åœ¨ webview ä¸­è¯·æ±‚æ¥å£"></a>åœ¨ webview ä¸­è¯·æ±‚æ¥å£</h3><p>ä¸€å¼€å§‹ï¼Œæˆ‘ä»¥ä¸ºè¿™æ˜¯ä¸ªè½»æ¾çš„å·¥ä½œï¼Œç›´åˆ°é‡åˆ°è·¨åŸŸåŠå¤©è§£å†³ä¸äº†åæˆ‘ç»æœ›äº†ï¼Œåœ¨ <a href="https://juejin.cn/post/6844903966799577101#heading-3">VSCode WebViewæ’ä»¶ï¼ˆæ‰©å±•ï¼‰å¼€å‘å®æˆ˜</a> ä¸€æ–‡ä¸­æˆ‘ç»ˆäºçŸ¥é“äº† vscode webview å†…éƒ¨æ˜¯ä¸å…è®¸å‘é€ ajax è¯·æ±‚ï¼Œæ‰€æœ‰ ajax è¯·æ±‚éƒ½æ˜¯è·¨åŸŸçš„ï¼Œå› ä¸º webview æœ¬èº«æ˜¯æ²¡æœ‰ host çš„ã€‚</p><p>äººè£‚å¼€äº†ï¼Œè¿™ä»€ä¹ˆé¬¼å‘€ï¼Œæˆ‘ä»¬æ ¸å¿ƒçš„éœ€æ±‚å°±æ˜¯è¯·æ±‚æ˜é‡‘çš„æ¥å£è·å–æˆ‘ä»¬çš„æ–‡ç« åˆ—è¡¨å‘€ï¼Œé‚£æˆ‘ä»¬è¿˜æœ‰åŠæ³•å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå…¶å®è¿˜æ˜¯å€ŸåŠ©ä¸Šé¢æˆ‘ä»¬æåˆ°çš„é€šä¿¡æœºåˆ¶æŠŠè¯·æ±‚æ¥å£çš„ä»»åŠ¡äº¤ç»™ vscode å»å¤„ç†ï¼Œå®Œäº‹å†è®© vscode æŠŠæ•°æ®é€šè¿‡ <code>postMessage</code> è¿”å›ç»™æˆ‘ä»¬ï¼Œå¤šè¯´æ— ç›Šï¼Œæˆ‘ä»¬æ¥çœ‹ä»£ç ï¼š</p><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// @ts-ignore</span></span><br><span class="line">  <span class="keyword">const</span> vscode = <span class="keyword">typeof</span> acquireVsCodeApi === <span class="string">&#x27;function&#x27;</span> ? <span class="title function_">acquireVsCodeApi</span>() : <span class="literal">null</span>;</span><br><span class="line">  vscode.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;queryPosts&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (method === <span class="string">&#x27;queryPosts&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> message = event.<span class="property">data</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><p><strong>vscode ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤„ç† webview ä¸­çš„ä¿¡æ¯ï¼Œå¹¶è¿”å›æ¥å£è¯·æ±‚çš„æ•°æ®</span></span><br><span class="line">currentPanel.<span class="property">webview</span>.<span class="title function_">onDidReceiveMessage</span>(</span><br><span class="line">  <span class="keyword">async</span> message =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">events</span>(message);</span><br><span class="line">    currentPanel?.<span class="property">webview</span>.<span class="title function_">postMessage</span>(&#123; data &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">undefined</span>,</span><br><span class="line">  context.<span class="property">subscriptions</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="luozhu-x2F-vscode-channel"><a href="#luozhu-x2F-vscode-channel" class="headerlink" title="@luozhu&#x2F;vscode-channel"></a>@luozhu&#x2F;vscode-channel</h3><p>å‰é¢æˆ‘ä»¬çŸ¥é“äº†ä½¿ç”¨ <a href="https://vscode-api-cn.js.org/interfaces/Webview.html#postMessage">Webview.postMessage</a>ã€<a href="https://vscode-api-cn.js.org/interfaces/Webview.html#onDidReceiveMessage">Webview.onDidReceiveMessage</a>ã€<code>acquireVsCodeApi().postMessage</code> å’Œ <code>window.addEventListener</code> å°±å¯ä»¥æ»¡è¶³å„ç§é€šä¿¡éœ€æ±‚äº†ï¼Œé‚£ <code>@luozhu/vscode-channel</code> åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å— <a href="https://www.npmjs.com/package/js-channel">js-channel</a> å¯å‘ï¼Œ<code>@luozhu/vscode-channel</code> ä¸»è¦æ˜¯å°è£…äº† webview ä¸ vscode äº¤äº’æµç¨‹ï¼Œæ ¸å¿ƒåŸç†æ˜¯é€šè¿‡æš´éœ² <code>call</code>ã€<code>bind</code> æ–¹æ³•æŠ¹å¹³ API çš„å·®å¼‚ï¼Œå‡å°‘é‡å¤ä»£ç é‡ã€‚å…¶ä¸­å‚è€ƒ appworks å’Œ cs-channel ä½¿ç”¨ uuid ä¿è¯äº¤äº’çš„å¯é æ€§ã€‚Talk is cheap, show you the codeï¼š</p><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»º channel å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> channel = <span class="keyword">new</span> <span class="title class_">Channel</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶ç­‰å¾…å…¶è¿”å›æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> &#123; payload &#125; = <span class="keyword">await</span> channel.<span class="title function_">call</span>(&#123; <span class="attr">method</span>: <span class="string">&#x27;queryPosts&#x27;</span> &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(payload);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>webview ä¸­ç”±äº acquireVsCodeApi åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œä¹‹ååˆéœ€è¦åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ <code>wev/src/layouts/index.ts</code> ä¸­åˆ›å»ºä¸€æ¬¡å¹¶æŒ‚è½½åˆ° <code>window</code> å¯¹è±¡ä¸Šæ¯”è¾ƒåˆé€‚ã€‚</p></blockquote><p><strong>vscode ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vscode ä¾§çš„ channel éœ€è¦ä¾èµ–ä¸Šä¸‹æ–‡å’Œ WebviewPanel å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> channel = <span class="keyword">new</span> <span class="title class_">Channel</span>(context, currentPanel);</span><br><span class="line"><span class="comment">// ç»‘å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä¸€èˆ¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªï¼Œç„¶åæ ¹æ®çº¦å®šåšåˆ†å‘å³å¯</span></span><br><span class="line">channel.<span class="title function_">bind</span>(<span class="keyword">async</span> message =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; eventType, method, params &#125; = message;</span><br><span class="line">  <span class="comment">// å®é™…å‘èµ·è¯·æ±‚è·å–æ•°æ®çš„åœ°æ–¹</span></span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> events[eventType][method](params);</span><br><span class="line">  <span class="comment">// è¿™é‡Œå°†è·å–çš„æ•°æ®ç›´æ¥è¿”å›å³å¯ï¼Œchannel å†…éƒ¨ä¼šè¿›è¡Œæ¶ˆæ¯åˆå¹¶å’Œå›ä¼ ã€‚</span></span><br><span class="line">  <span class="comment">// å¦‚æœåªæ˜¯æ‰§è¡Œä¸€ä¸ªåŠŸèƒ½ï¼Œä¸å†™ return è¯­å¥å³å¯ï¼Œå†…éƒ¨ä¼šè¿›è¡Œåˆ¤æ–­é™çº§æˆå•å·¥é€šä¿¡ã€‚</span></span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="vscode-å›½é™…åŒ–"><a href="#vscode-å›½é™…åŒ–" class="headerlink" title="vscode å›½é™…åŒ–"></a>vscode å›½é™…åŒ–</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ vscode ä¸­æ˜¯å¯ä»¥åˆ‡æ¢è¯­è¨€ç¯å¢ƒçš„ï¼Œä¸€æ¬¾ä¼˜ç§€çš„ vscode æ‰©å±•è‡³å°‘è¦æ”¯æŒä¸­è‹±ä¸¤ç§è¯­è¨€ã€‚è€Œä¸”æ”¯æŒå›½é™…åŒ–å¯ä»¥è®©ä½ çš„æ’ä»¶å—ä¼—ç›´æ¥çªç ´å›½ç•Œé™åˆ¶ã€‚vscode å›½é™…åŒ–åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯é…ç½®çš„å›½é™…åŒ–ï¼Œä¸€éƒ¨åˆ†æ˜¯ä»£ç ä¸­çš„å›½é™…åŒ–ï¼Œå¦ä¸€éƒ¨åˆ†åˆ™æ˜¯ webview ä¸­ umijs çš„å›½é™…åŒ–ã€‚æœ¬ç« æˆ‘ä»¬å°±æ¥å…·ä½“çœ‹ä¸€ä¸‹å¦‚ä½•åœ¨ vscode ä¸­å®ç°å›½é™…åŒ–ã€‚</p><h3 id="é…ç½®å›½é™…åŒ–"><a href="#é…ç½®å›½é™…åŒ–" class="headerlink" title="é…ç½®å›½é™…åŒ–"></a>é…ç½®å›½é™…åŒ–</h3><p>æˆ‘ä»¬å·²ç»çŸ¥é“ vscode ä¸­çš„é…ç½®éƒ½æ˜¯åœ¨ <em>package.json</em> ä¸­ï¼Œè€Œé…ç½®çš„å›½é™…åŒ–æ˜¯çº¦å®šåœ¨ <code>package.nls.json</code> å’Œ <code>package.nls.zh-cn.json</code> è¿™ç§æ–‡ä»¶ä¸­ç¼–å†™ã€‚æ¯”å¦‚æˆ‘ä»¬è¦åœ¨ä¸­è‹±æ–‡ç¯å¢ƒä¸‹å‘½ä»¤é…ç½®ä¸­è‹±æ–‡ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>package.nls.json</code> ä¸­å†™ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes.category.juejin-me&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Juejin Me&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>package.nls.zh-cn.json</code> å†™ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes.category.juejin-me&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ˜é‡‘ä¸€ä¸‹&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç„¶å <code>package.json</code> ä¸­å†™ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;commands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;%contributes.category.juejin-me%&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="ä»£ç ä¸­å›½é™…åŒ–"><a href="#ä»£ç ä¸­å›½é™…åŒ–" class="headerlink" title="ä»£ç ä¸­å›½é™…åŒ–"></a>ä»£ç ä¸­å›½é™…åŒ–</h3><p>æ¨èä½¿ç”¨æ´›ç«¹è´¡çŒ®è¿‡ä»£ç çš„ <a href="https://github.com/axetroy/vscode-nls-i18n">vscode-nls-i18n</a>ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œé…ç½®çš„è¯å’Œä¸Šä¸€èŠ‚ä¸€æ ·ï¼Œåœ¨ <code>src/extension.ts</code> ä¸­ä½¿ç”¨ <code>init</code> æ–¹æ³•åˆå§‹åŒ–ï¼Œç„¶åä½¿ç”¨ <code>localize</code> æ–¹æ³•å®ç°å›½é™…åŒ–ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; init, localize &#125; <span class="keyword">from</span> <span class="string">&#x27;vscode-nls-i18n&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="title function_">init</span>(context.<span class="property">extensionPath</span>); <span class="comment">// åˆå§‹åŒ–å›½é™…åŒ–é…ç½®ã€‚åªç”¨åœ¨æ‰©å±•æ¿€æ´»æ—¶åˆå§‹åŒ–ä¸€æ¬¡</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">localize</span>(<span class="string">&#x27;extension.activeLog&#x27;</span>)); <span class="comment">// ä¹‹åå°±å¯ä»¥åœ¨å„ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="umijs-å›½é™…åŒ–"><a href="#umijs-å›½é™…åŒ–" class="headerlink" title="umijs å›½é™…åŒ–"></a>umijs å›½é™…åŒ–</h3><p>umijs çš„å›½é™…åŒ–éœ€è¦ä½¿ç”¨ <code>@umijs/plugin-locale</code> æ’ä»¶æ”¯æŒï¼Œè¿™ä¸ªæ’ä»¶å°è£…äº† <code>react-intl</code>ï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹ï¼š</p><p>1ã€.umirc.ts ä¸­é…ç½® <code>local</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">locale</span>: &#123;&#125;</span><br></pre></td></tr></table></figure><p>2ã€åœ¨ <em>src</em> ç›®å½•ä¸‹åˆ›å»º <code>locales</code> å¹¶åˆ›å»º <code>en.ts</code> æˆ– <code>zh-CN.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/locales/en.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">WELCOME_TO_UMI_WORLD</span>: <span class="string">&quot;welcome to umi&#x27;s world&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/locales/zh-CN.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">WELCOME_TO_UMI_WORLD</span>: <span class="string">&#x27;æ¬¢è¿å…‰ä¸´  umi  çš„ä¸–ç•Œ&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>3ã€ä½¿ç”¨å›½é™…åŒ–</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useIntl &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="attr">default</span>: <span class="title class_">React</span>.<span class="property">FunctionComponent</span> = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> intl = <span class="title function_">useIntl</span>()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">     &lt;div&gt;</span><br><span class="line">     &#123;intl.<span class="title function_">formatMessage</span>(</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="string">&#x27;WELCOME_TO_UMI_WORLD&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      )&#125;&lt;div&gt;</span><br><span class="line">   )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4ã€åˆ‡æ¢è¯­è¨€</p><p>åˆ‡æ¢è¯­è¨€ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>setLocale</code> æ–¹æ³•ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬ç»™è¿™ä¸ªæ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ <code>false</code> æ¥å®ç°æ— åˆ·æ–°åŠ¨æ€åˆ‡æ¢ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; setLocale &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="comment">// ä¸åˆ·æ–°é¡µé¢</span></span><br><span class="line"><span class="title function_">setLocale</span>(<span class="string">&#x27;zh-CN&#x27;</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>ä¸è¿‡ï¼Œåˆ‡æ¢è¯­è¨€çš„æ—¶æœºåœ¨ä»€ä¹ˆæ—¶å€™å‘¢ï¼Ÿåˆ‡æ¢æ—¶æœºå°±æ˜¯æˆ‘ä»¬è¯­è¨€ç¯å¢ƒæ”¹å˜çš„æ—¶æœºã€‚åœ¨ vscode webview ç¯å¢ƒä¸­ï¼Œå…¶å®å½“ä½¿ç”¨ <code>Config display language</code> æ–¹æ³•åˆ‡æ¢è¯­è¨€ç¯å¢ƒåï¼Œä¼šè¦æ±‚ vscode é‡å¯ã€‚ä¹Ÿå°±è¯´æˆ‘ä»¬åªéœ€è¦åœ¨ webview åˆ›å»ºæ—¶è®¾ç½®ä¸€æ¬¡è¯­è¨€ç¯å¢ƒå³å¯ã€‚ç”±äº vscode å’Œ webview ä¼ å€¼å¤ªå›°éš¾ï¼Œæˆ‘ä»¬é€‰æ‹©åœ¨ <code>getUmiHTMLContent</code> æ—¶ä¼ å¦‚ <code>vscode.env</code>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">vscodeEnv</span> = $&#123;<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(vscode.<span class="property">env</span>)&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬åœ¨ <code>web/src/layouts/index.ts</code> ä¸­è®¾ç½®ä¸€ä¸‹å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setLocale</span>(<span class="variable language_">window</span>.<span class="property">vscodeEnv</span>.<span class="property">language</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><h2 id="â€œæ˜é‡‘ä¸€ä¸‹â€-æ‰©å±•æ ¸å¿ƒå®ç°"><a href="#â€œæ˜é‡‘ä¸€ä¸‹â€-æ‰©å±•æ ¸å¿ƒå®ç°" class="headerlink" title="â€œæ˜é‡‘ä¸€ä¸‹â€ æ‰©å±•æ ¸å¿ƒå®ç°"></a>â€œæ˜é‡‘ä¸€ä¸‹â€ æ‰©å±•æ ¸å¿ƒå®ç°</h2><p>çµæ„Ÿæ¥æºäºç°å®ï¼Œä½œä¸ºæ˜é‡‘çš„é‡åº¦ä½¿ç”¨è€…ï¼Œå‡ ä¹æ¯ç¯‡æ–‡ç« å’Œç¬”è®°éƒ½åŒæ­¥åœ¨è¿™é‡Œã€‚å½“æœ‰äº›çŸ¥è¯†å¿˜è®°éœ€è¦æŸ¥é˜…æˆ–æ‹·è´ä»£ç æ—¶ï¼Œæˆ‘å°±æœ‰åœ¨æ˜é‡‘æœç´¢æˆ‘çš„æ–‡ç« çš„éœ€æ±‚ã€‚ä½†æ˜¯æ˜é‡‘çš„æœç´¢æ˜¯å…¨ç«™çš„ï¼Œå°±ç®—åŠ ä¸Šè‡ªå·±çš„åå­—æœç´¢ä¹Ÿä¼šå‡ºç°å¤§é‡æ— å…³è®°å½•ã€‚â€œæ˜é‡‘ä¸€ä¸‹â€ è¿™ä¸ªåå­—å°±åƒæ’ä»¶åŠŸèƒ½ä¸€æ ·ï¼Œåœ¨ä½ æƒ³æœç´¢è‡ªå·±æ˜é‡‘æ–‡ç« çš„æ—¶å€™å°±å¯ä»¥æ‰“å¼€æ’ä»¶â€œæ˜é‡‘ä¸€ä¸‹â€ è¿›è¡Œæœç´¢ã€‚</p><p>å…¶å®ä¸ºäº†åªæœç´¢åˆ°è‡ªå·±çš„æ–‡ç« ï¼Œæˆ‘æƒ³åˆ°çš„è¿˜æœ‰å¼€å‘ chrome æ’ä»¶æ¥å®ç°ã€‚ä½†æ˜¯è€ƒè™‘åˆ°å¸‚åœºå’Œä¾¿æ·æ€§ï¼Œæˆ‘æœ€ç»ˆè¿˜æ˜¯å†³å®šå¼€å‘ vscode æ’ä»¶æ¥è½åœ°è¿™ä¸ªçµæ„Ÿã€‚æœ¬ç« å°±æ˜¯ç»¼åˆå‰é¢çš„ç»éªŒå®ç° â€œæ˜é‡‘ä¸€ä¸‹â€ çš„æ ¸å¿ƒé€»è¾‘ã€‚</p><h3 id="juejin-me-start-å‘½ä»¤"><a href="#juejin-me-start-å‘½ä»¤" class="headerlink" title="juejin-me.start å‘½ä»¤"></a><code>juejin-me.start</code> å‘½ä»¤</h3><h4 id="vscode-ä¾§å¼€å¯-channel-é€šä¿¡"><a href="#vscode-ä¾§å¼€å¯-channel-é€šä¿¡" class="headerlink" title="vscode ä¾§å¼€å¯ channel é€šä¿¡"></a>vscode ä¾§å¼€å¯ channel é€šä¿¡</h4><p>vscode ä¾§é€šè¿‡ <code>channel.bind</code> ç»‘å®šä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> events <span class="keyword">from</span> <span class="string">&#x27;./events&#x27;</span>;</span><br><span class="line">...</span><br><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-me.start&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    currentPanel = <span class="title function_">createUmiWebviewPanel</span>(</span><br><span class="line">      context,</span><br><span class="line">      <span class="string">&#x27;juejin-me&#x27;</span>,</span><br><span class="line">      <span class="title function_">localize</span>(<span class="string">&#x27;extension.webview-panel.title&#x27;</span>),</span><br><span class="line">      <span class="string">&#x27;assets/icon-luozhu.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;3.5.17&#x27;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// å¤„ç† webview ä¸­çš„ä¿¡æ¯</span></span><br><span class="line">    channel = <span class="keyword">new</span> <span class="title class_">Channel</span>(context, currentPanel);</span><br><span class="line">    channel.<span class="title function_">bind</span>(<span class="keyword">async</span> message =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; eventType, method, params &#125; = message;</span><br><span class="line">      <span class="comment">// æ ¹æ®äº‹ä»¶ç±»å‹ã€æ–¹æ³•ã€å‚æ•°æ¥å®Œæˆä¸€æ¬¡ api è°ƒç”¨ï¼Œå†…ç½®çš„ eventType æœ‰ requestã€command å’Œ variableã€‚</span></span><br><span class="line">      <span class="keyword">const</span> data = <span class="keyword">await</span> events[eventType][method](params);</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125;, vscode);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šæˆ‘ä»¬ä¸éœ€è¦ç»™å®šç›‘å¬äº‹ä»¶åï¼Œå†…éƒ¨ä¼šæ ¹æ® eventId ä¿è¯å¯é æ€§å’Œå…¨å±€å”¯ä¸€æ€§</p></blockquote><h4 id="æ³¨å†Œ-events"><a href="#æ³¨å†Œ-events" class="headerlink" title="æ³¨å†Œ events"></a>æ³¨å†Œ events</h4><p><strong>events&#x2F;index.ts</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">from</span> <span class="string">&#x27;./requests&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">request</span>: requests,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>events&#x2F;requests</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> queryPosts = <span class="keyword">async</span> (<span class="attr">params</span>: &#123; <span class="attr">cursor</span>: <span class="built_in">string</span> &#125;): <span class="title class_">Promise</span>&lt;<span class="built_in">any</span>&gt; =&gt; &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæˆ‘ä»¬æ ¹æ® vscode é…ç½®åŠ¨æ€å–çš„ç”¨æˆ· id</span></span><br><span class="line">  <span class="keyword">const</span> &#123; userId &#125; = vscode.<span class="property">workspace</span>.<span class="title function_">getConfiguration</span>(<span class="string">&#x27;juejin-me&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; cursor &#125; = params;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> request.<span class="title function_">post</span>(<span class="string">&#x27;/article/query_list&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">cursor</span>: <span class="string">`<span class="subst">$&#123;cursor&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">sort_type</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">user_id</span>: userId,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  queryPosts,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>utils&#x2F;request</strong>ï¼š</p><p>è¿™é‡Œç®€å•å°è£…äº†åŸºäº axios çš„è¯·æ±‚å¯¹è±¡ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable no-param-reassign */</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­æ–‡æ–‡æ¡£: http://t.cn/ROfXFuj</span></span><br><span class="line"><span class="comment">// åˆ›å»ºå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://api.juejin.cn/content_api/v1/&#x27;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">10000</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">method</span> === <span class="string">&#x27;get&#x27;</span>) &#123;</span><br><span class="line">      config.<span class="property">paramsSerializer</span> = <span class="function"><span class="params">params</span> =&gt;</span> qs.<span class="title function_">stringify</span>(params, &#123; <span class="attr">arrayFormat</span>: <span class="string">&#x27;repeat&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">showErrorMessage</span>(error.<span class="property">message</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; data &#125; = response;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">showErrorMessage</span>(error.<span class="property">message</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request;</span><br></pre></td></tr></table></figure><h3 id="webview-ä¸­è°ƒç”¨æ¥å£"><a href="#webview-ä¸­è°ƒç”¨æ¥å£" class="headerlink" title="webview ä¸­è°ƒç”¨æ¥å£"></a>webview ä¸­è°ƒç”¨æ¥å£</h3><p>channel æ˜¯åœ¨ <code>web/src/layouts/index.tsx</code> ä¸­åˆå§‹åŒ–å¹¶æŒ‚è½½åˆ° window ä¸Šçš„ï¼Œæˆ‘ä»¬åœ¨ <code>web/src/pages/index.tsx</code> ä¸­è°ƒç”¨ <code>window.channel.call</code> å³å¯è°ƒç”¨æŒ‡å®šæ¥å£ã€‚ç”±äºæˆ‘ä»¬éœ€è¦æ¨¡ç³Šæœç´¢æ‰€æœ‰çš„æ–‡ç« ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨åˆå§‹åŒ–é¡µé¢æ—¶ä¸€æ¬¡è¯·æ±‚å®Œæ‰€æœ‰æ•°æ®ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Homepage</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; payload &#125; = (<span class="keyword">await</span> <span class="variable language_">window</span>.<span class="property">channel</span>.<span class="title function_">call</span>(&#123;</span><br><span class="line">      <span class="attr">eventType</span>: <span class="string">&#x27;request&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;queryPosts&#x27;</span>,</span><br><span class="line">      <span class="attr">params</span>: &#123; cursor &#125;,</span><br><span class="line">    &#125;)) <span class="keyword">as</span> <span class="built_in">any</span>;</span><br><span class="line">    tempData = tempData.<span class="title function_">concat</span>(payload.<span class="property">data</span>);</span><br><span class="line">    <span class="title function_">setData</span>(tempData);</span><br><span class="line">    <span class="keyword">if</span> (!payload.<span class="property">has_more</span>) &#123;</span><br><span class="line">      <span class="title function_">setInitLoading</span>(<span class="literal">false</span>);</span><br><span class="line">      <span class="title function_">setCategories</span>(<span class="title function_">_union</span>([<span class="string">&#x27;å…¨éƒ¨&#x27;</span>, ...tempData.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">category</span>.<span class="property">category_name</span>)]));</span><br><span class="line">      tempData = [];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      cursor += <span class="number">10</span>;</span><br><span class="line">      <span class="title function_">getData</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ›´å¤šå…·ä½“å®ç°ç»†èŠ‚å°±æ˜¯ä¸€äº›é¡µé¢ç¼–å†™é€»è¾‘ï¼Œä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç›´æ¥è¿›æŸ¥çœ‹<a href="https://github.com/youngjuning/juejin-me/tree/main/web">æºç </a>ã€‚</p><h3 id="é…ç½®æ˜é‡‘-ID"><a href="#é…ç½®æ˜é‡‘-ID" class="headerlink" title="é…ç½®æ˜é‡‘ ID"></a>é…ç½®æ˜é‡‘ ID</h3><p><strong>å£°æ˜é…ç½®</strong>ï¼š</p><p>vscode çš„é…ç½®æˆ‘ä»¬éœ€è¦å€ŸåŠ© package.json çš„ <code>contributes.configuration</code> å±æ€§ï¼Œæˆ‘ä»¬çš„æ˜é‡‘ ID æ˜¯ stringï¼Œæ‰€ä»¥å£°æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;configuration&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;%configuration.title%&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;object&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;juejin-me.userId&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;default&quot;</span><span class="punctuation">:</span> <span class="string">&quot;325111174662855&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;%configuration.properties.juejin-me.userId%&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹é…ç½®çš„å‘½ä»¤</strong>ï¼š</p><p>è®©ç”¨æˆ·æ‰“å¼€è®¾ç½®å»ä¿®æ”¹é…ç½®ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ä¸ºäº†ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬æä¾›äº† <code>juejin-me.configUserId</code> å‘½ä»¤ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å‘½ä»¤çš„å®ç°ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-me.configUserId&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> userId = <span class="keyword">await</span> vscode.<span class="property">window</span>.<span class="title function_">showInputBox</span>(&#123;</span><br><span class="line">      <span class="attr">placeHolder</span>: <span class="title function_">localize</span>(<span class="string">&#x27;extension.juejin-me.configUserId.placeHolder&#x27;</span>),</span><br><span class="line">      <span class="attr">validateInput</span>: <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (value) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">localize</span>(<span class="string">&#x27;extension.juejin-me.configUserId.validateInput&#x27;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> config = vscode.<span class="property">workspace</span>.<span class="title function_">getConfiguration</span>(<span class="string">&#x27;juejin-me&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    config.<span class="title function_">update</span>(<span class="string">&#x27;userId&#x27;</span>, userId, <span class="literal">true</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li><a href="https://vscode-api-cn.js.org/modules/window.html#showInputBox">vscode.window.showInputBox</a>ï¼šæ‰“å¼€ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œæç¤ºç”¨æˆ·è¾“å…¥æ˜é‡‘ç”¨æˆ· ID</li><li><a href="https://vscode-api-cn.js.org/modules/workspace.html#getConfiguration">vscode.workspace.getConfiguration</a>ï¼šè·å–å·¥ä½œç©ºé—´çš„é…ç½®å¯¹è±¡</li><li><a href="https://vscode-api-cn.js.org/interfaces/WorkspaceConfiguration.html#update">WorkspaceConfiguration.update</a>ï¼šæ›´æ–°ä¸€ä¸ªé…ç½®å€¼ã€‚</li><li><a href="https://vscode-api-cn.js.org/interfaces/InputBoxOptions.html#validateInput">InputBoxOptions.validateInput</a>ï¼šä¸€ä¸ªå¯é€‰çš„å‡½æ•°ï¼Œè¢«è°ƒç”¨æ¥éªŒè¯è¾“å…¥ä¿¡æ¯å¹¶æç¤ºç”¨æˆ·</li></ul><h3 id="æ’ä»¶æ•ˆæœå±•ç¤º"><a href="#æ’ä»¶æ•ˆæœå±•ç¤º" class="headerlink" title="æ’ä»¶æ•ˆæœå±•ç¤º"></a>æ’ä»¶æ•ˆæœå±•ç¤º</h3><p>æ„Ÿå…´è¶£çš„è¯ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æ‰©å±•ä¸­æœç´¢â€œæ˜é‡‘ä¸€ä¸‹â€è‡ªè¡Œä½“éªŒã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac7d2ab498b2469486e8f237fc3b7997~tplv-k3u1fbpfcp-zoom-1.image"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91ae0fdbff7043db9513e539640fcc2e~tplv-k3u1fbpfcp-zoom-1.image"></p><h2 id="å½©è›‹"><a href="#å½©è›‹" class="headerlink" title="å½©è›‹"></a>å½©è›‹</h2><h3 id="luozhu-x2F-create-vscode-webview"><a href="#luozhu-x2F-create-vscode-webview" class="headerlink" title="@luozhu&#x2F;create-vscode-webview"></a>@luozhu&#x2F;create-vscode-webview</h3><p>æœ¬æ–‡ä¸­æœ‰å¾ˆå¤šæœ€ä½³å®è·µï¼Œä¸ºäº†æ–¹ä¾¿ä¹‹ååˆ›å»ºæ–°çš„é¡¹ç›®æ—¶å‡å°‘é‡å¤å·¥ä½œï¼Œæ´›ç«¹æŠ½ç¦»å‡ºäº†ä¸€ä¸ªç®€å•çš„æ¨¡æ¿ã€‚æ˜å‹ç›´æ¥ä½¿ç”¨ <code>yarn create @luozhu/vscode-webview  myvscode</code> å³å¯åˆ›å»ºå‡ºä¸€ä¸ªå±äºè‡ªå·±çš„ vscode æ‰©å±•ã€‚å‚è€ƒæœ¬æ–‡çš„ä¸€äº›å®è·µå†åŠ ä¸€äº›ä½ çš„åˆ›æ„å³å¯å®Œæˆä¸€ä¸ªå‡ºè‰²çš„åŸºäº webview çš„ vscode æ‰©å±•ã€‚</p><h3 id="Word-Count-Juejin"><a href="#Word-Count-Juejin" class="headerlink" title="Word Count Juejin"></a>Word Count Juejin</h3><p>ä¸ºäº†ç­”è°¢æ˜é‡‘å¹³å°å’Œæ˜å‹ä¸€ç›´ä»¥æ¥çš„æ”¯æŒï¼Œæˆ‘ç¼–å†™äº†ä¸€æ¬¾ä¸“ä¸ºæ˜é‡‘é€‚é…çš„ Markdown æ–‡ä»¶å­—æ•°ç»Ÿè®¡ VS Code æ‰©å±•ï¼Œå­—æ•°ç»Ÿè®¡ä¼šå®æ—¶æ˜¾ç¤ºåœ¨çŠ¶æ€æ ã€‚æ¯”èµ·æ¥ vscode å®˜æ–¹çš„ Word Countï¼Œæˆ‘ä»¬æ”¯æŒä¸­æ–‡å­—æ•°ç»Ÿè®¡ï¼Œæ¯”èµ·æ¥ Word Count CJKï¼Œæˆ‘ä»¬æ”¯æŒä¸­è‹±æ–‡æ··æ’ã€‚å¦‚æœä½ ä¹Ÿå–œæ¬¢ä½¿ç”¨ VS Code çš„ Markdown ç¼–è¾‘èƒ½åŠ›ï¼Œé‚£ä¹ˆä¸€å®šä¸è¦é”™è¿‡æ´›ç«¹çš„è¿™æ¬¾æ’ä»¶ï¼Œä¸‹è½½è¯·è®¤å‡†ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/08c060326c954849b3eb2d34f2e6b0e5~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å¦‚æœä½ è¿˜åœ¨çŠ¹è±«è¦ä¸è¦ä¸‹è½½ï¼Œé‚£ä¸å¦¨çœ‹ä¸‹ä¸‰ä¸ªæ’ä»¶çš„ç»Ÿè®¡å¯¹æ¯”ï¼Œæˆ‘ä»¬æ‹¿ <code>i love juejin. æˆ‘çˆ±æ˜é‡‘</code> è¿™ä¸ªå­—ç¬¦ä¸²æµ‹è¯•ä¸€ä¸‹ä¸‰æ¬¾æ’ä»¶çš„åŠŸèƒ½ï¼š</p><table><thead><tr><th>Word Count</th><th>Word Count CJK</th><th>Word Count Juejin</th></tr></thead><tbody><tr><td>4 ä¸ªå­—</td><td>4 ä¸ªå­—</td><td>7 ä¸ªå­—</td></tr><tr><td>ä¸­æ–‡ç®—æˆäº†ä¸€ä¸ªå­—</td><td>ç›´æ¥å¿½ç•¥äº†è‹±æ–‡</td><td>ä¸­æ–‡4 ä¸ªå­—åŠ è‹±æ–‡ä¸‰ä¸ªå­—ï¼Œæ ¼å±€æ­£å¥½</td></tr></tbody></table><h3 id="vscode-api-cn"><a href="#vscode-api-cn" class="headerlink" title="vscode api cn"></a>vscode api cn</h3><p>åœ¨å­¦ä¹ å’Œå¼€å‘ vscode æ’ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å¤§çš„ç—›ç‚¹æ— è¿‡äº API æ–‡æ¡£ç¿»è¯‘çš„ç¼ºå¤±ã€‚å“ªæ€•æ˜¯ç¡¬ç€å¤´çš®çœ‹è‹±æ–‡åŸç‰ˆ API æ–‡æ¡£ï¼Œé˜…è¯»ä½“éªŒä¹Ÿå¾ˆå·®ã€‚ä¸ºäº†æ–¹ä¾¿è‡ªå·±ã€å›é¦ˆç¤¾åŒºï¼Œæˆ‘å’Œ <a href="https://juejin.cn/user/703340610597064">å¯’è‰</a> ç­‰å°ä¼™ä¼´å†³å®šç¿»è¯‘ vscode api ç±»å‹å£°æ˜å¹¶ä½¿ç”¨ Typedoc æ‰¿è½½ï¼Œå¦å¤–åœ¨å®Œå·¥åæˆ‘ä»¬ä¹Ÿä¼šè¾“å‡º <code>@types/vscode-cn</code> ç±»å‹åŒ…ä»£æ›¿ <code>@types/vscode</code> è¿›ä¸€æ­¥æ–¹ä¾¿ vscode æ’ä»¶å¼€å‘è€…ã€‚å›¢é˜Ÿæˆå‘˜ç°çŠ¶ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aa80c1603b2e4482883fe39e1b44f62e~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç¿»è¯‘æ˜¯ä¸€ä»¶å¸¦æœ‰ä¾ ä¹‰ç²¾ç¥çš„äº‹ä¸šï¼Œæ¬¢è¿æ›´å¤šçš„å°ä¼™ä¼´åŠ å…¥æˆ‘ä»¬ã€‚ä½ å¯ä»¥æµè§ˆ<a href="https://github.com/vscode-cn/vscode-api-cn">ä»“åº“</a>å’Œ<a href="https://vscode-api-cn.js.org/">å®˜ç½‘</a>äº†è§£å…·ä½“æƒ…å†µã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>è¿™æ˜¯ç¬¬ä¸€æ¬¡å°è¯•å†™è¿™ä¹ˆé•¿çš„æ–‡ç« ï¼Œæ–­æ–­ç»­ç»­ç»å†äº†æœ‰åŠä¸ªæœˆï¼Œæœ¬ç€å¯¹è¯»è€…è´Ÿè´£ä»»çš„æ€åº¦ï¼Œæ–‡ä¸­çš„å®è·µéƒ½æ˜¯ç»è¿‡åå¤æµ‹è¯•ä»¥åŠå’ŒåŒäº‹æœ‹å‹çš„è®¨è®ºã€‚å½“ç„¶ vscode æ’ä»¶å¼€å‘çš„æ¦‚å¿µå’Œ API æ¯”è¾ƒå¤šï¼Œä¸€ç¯‡æ–‡ç« ä¹Ÿå¾ˆéš¾è®²å…¨ï¼Œè®²é€å½»ã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºå‘Šè¯‰æ´›ç«¹ï¼Œæˆ‘å¯ä»¥ç»§ç»­æ›´æ–°è¿™æ–¹é¢çš„æ•™ç¨‹ã€‚</p><blockquote><p>æœ¬æ–‡é¦–å‘äºã€Œæ˜é‡‘ä¸“æ ã€ï¼ŒåŒæ­¥äºå…¬ä¼—å·ã€Œç¨‹åºäººç”Ÿã€ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> VS Code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ˜é‡‘ </tag>
            
            <tag> VS Code </tag>
            
            <tag> Webview </tag>
            
            <tag> æ‰©å±• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•å¼€å‘ä¸€æ¬¾ VS Code yarn.lock é¢„è§ˆæ’ä»¶</title>
      <link href="/1bbed3d2a249/"/>
      <url>/1bbed3d2a249/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://marketplace.visualstudio.com/items?itemName=youngjuning.yarn-lock-preview">Yarn Lock Preview</a> æ’ä»¶å·²å‘å¸ƒï¼Œäº²æµ‹å·²æ¯”è¾ƒç¨³å®šï¼Œæºç åœ¨ <a href="https://github.com/youngjuning/vscode-yarn-lock-preview">vscode-yarn-lock-preview</a> ï¼Œå¦‚æœå¯¹ä½ äº›è®¸å¸®åŠ©å’Œå¯å‘ï¼Œä¸å¦¨èµä¸€ä¸ª Starã€‚</p></blockquote><blockquote><p><a href="https://vscode-api-cn.js.org/">VS Code API ä¸­æ–‡æ–‡æ¡£</a> åœ¨å¤§å®¶çš„çƒ­æƒ…ä¸‹å·²ç»æœ‰åºå¼€å±•äº†ç¿»è¯‘å·¥ä½œï¼Œä¹Ÿæ¬¢è¿å¤§å®¶ä¸€èµ·å‚ä¸ç¿»è¯‘ï¼</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ <a href="https://juejin.cn/post/7000589186898231333">ã€Šä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•ã€‹</a> ä¸€æ–‡ä¸­ï¼Œæ´›ç«¹é€šè¿‡å®æˆ˜é˜è¿°äº†å¦‚ä½•åŸºäº webview å®ç°åœ¨ vscode ä¸­å±•ç¤ºè‡ªå®šä¹‰ UI çš„åŠŸèƒ½ï¼Œå¦å¤–æ–‡ç« é…å¥—äº§ç‰© <a href="vscode:extension/youngjuning.juejin-me">æ˜é‡‘ä¸€ä¸‹</a> æ’ä»¶ä¹Ÿå·²ç»å‘å¸ƒï¼Œæ¬¢è¿è¯•ç”¨ã€‚</p><p>äººä»¬ğŸ‘¨ğŸ»â€ğŸ’»æ€»æ˜¯å–œæ¬¢ç‚«è€€è‡ªå·±çš„æ–°æŠ€èƒ½ï¼Œæ´›ç«¹ä¹Ÿä¸ä¾‹å¤–ï¼Œæ¯•ç«Ÿæ–°æŠ€èƒ½éœ€è¦å¤§é‡çš„å®æˆ˜ç»ƒä¹ ã€‚åœ¨å…¥é—¨äº† VS Code æ‰©å±•å¼€å‘åï¼Œé‡åˆ°å¼€å‘ç—›ç‚¹æˆ‘å°±ä¹ æƒ¯åœ°ç”¨ VS Code æ’ä»¶çš„æ€è·¯å»è§£å†³ã€‚ä¸è¿‡å¤§å¤šæ‰©å±• idea éƒ½å·²ç»åèŠ±æœ‰ä¸»ï¼Œç›´åˆ°æˆ‘æƒ³åˆ°å¯ä»¥å°† <code>yarn.lock</code> æ–‡ä»¶å¯è§†åŒ–å¹¶æœç´¢ç›¸å…³æ’ä»¶æ— æœåï¼Œæˆ‘çŸ¥é“æœºä¼šæ¥äº†ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“"><a href="#ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“" class="headerlink" title="ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“"></a>ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“</h2><p>åœ¨å¼€å§‹å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆç¼–è¾‘å™¨ï¼Ÿä»€ä¹ˆåˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨ï¼Ÿ</p><p>VS Code ä¸­ç¼–è¾‘å™¨ï¼ˆEditorï¼‰å…¶å®å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ç¼–ç çš„åœ°æ–¹ã€‚å¦‚ä¸‹å›¾ï¼ŒVS Code çš„ç”¨æˆ·ç•Œé¢åˆ†ä¸º 5 ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ Activity Barï¼ˆæ´»åŠ¨æ ï¼‰ã€Side Barï¼ˆä¾§è¾¹æ ï¼‰ã€Editor Groupsï¼ˆç¼–è¾‘å™¨ç»„ï¼‰ã€Panelï¼ˆé¢æ¿ï¼‰ å’Œ Status Barï¼ˆçŠ¶æ€æ ï¼‰ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/301eab5bbab04c65aec4a927b7d306a9~tplv-k3u1fbpfcp-zoom-1.image"></p><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨æŒ‡çš„æ˜¯ VS Code ä¸­ç›¸å¯¹äºé»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨çš„ç¼–è¾‘å™¨ç±»å‹ã€‚æ ¹æ®ç”¨é€”ä¸åŒï¼Œè‡ªå®šä¹‰ç¼–è¾‘å™¨åˆåˆ†ä¸º <a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomTextEditorProvider.html">è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨</a>ã€<a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomEditorProvider.html">è‡ªå®šä¹‰ç¼–è¾‘å™¨</a> å’Œ <a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomReadonlyEditorProvider.html">è‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨</a>ã€‚</p><p>è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨å¸¸è¢«ç”¨æ¥ä¸º JSONã€XMLã€CSVã€JSON æˆ–è€…ä»»æ„ <a href="https://vscode-api-cn.js.org/interfaces/vscode.TextDocument.html">æ–‡æœ¬æ–‡æ¡£</a> æä¾›è‡ªå®šä¹‰çš„è§†è§‰æ¸²æŸ“ã€‚æ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=SimonSiefke.svg-preview">Svg Preview</a>ã€<a href="https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced">Markdown Preview Enhanced</a>ã€<a href="https://marketplace.visualstudio.com/items?itemName=vstirbu.vscode-mermaid-preview">Mermaid Preview</a> å’Œ <a href="https://marketplace.visualstudio.com/items?itemName=saber2pr.todolist">Todo List</a>ã€‚</p><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨å¸¸è¢«ç”¨æ¥é¢„è§ˆèµ„äº§(assets)æ–‡ä»¶ï¼Œæ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=slevesque.vscode-3dviewer">3D Viewer for VSCode</a>ã€<a href="https://marketplace.visualstudio.com/items?itemName=hediet.vscode-drawio">Draw.io Integration</a> å’Œ <a href="https://marketplace.visualstudio.com/items?itemName=elypia.magick-image-reader">Magick Image Reader</a></p><p>ä½†ä»–ä»¬çš„å…±åŒç‚¹éƒ½æ˜¯ä½¿ç”¨äº† VS Code è‡ªå®šä¹‰ç¼–è¾‘å™¨è¿™ä¸ªåŠŸèƒ½ã€‚æœ¬æ–‡çš„ç›®æ ‡å…¶å®å°±æ˜¯å®ç°ä¸€ä¸ªå’Œä¸Šè¿°æ’ä»¶ä¸€æ ·çš„ Preview ç±»å‹çš„æ‰©å±•ã€‚</p><h2 id="ä¸ºä»€ä¹ˆå¼€å‘-Yarn-Lock-Previewï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå¼€å‘-Yarn-Lock-Previewï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå¼€å‘ Yarn Lock Previewï¼Ÿ"></a>ä¸ºä»€ä¹ˆå¼€å‘ Yarn Lock Previewï¼Ÿ</h2><p>æœ¬æ¥æ–‡ç« æ˜¯æ²¡æœ‰è¿™ä¸€ç« çš„ã€‚åœ¨æ’ä»¶åˆšå‘å¸ƒçš„æ—¶å€™ï¼Œæ²¡ç­‰æ–‡ç« å†™å®Œï¼Œæˆ‘å°±è¿«ä¸åŠå¾…åœ°å‘åŒäº‹å’Œæœ‹å‹ä»¥åŠå¸¸æ··è¿¹çš„å‡ ä¸ªç¾¤æ¨èäº†æˆ‘çš„æ’ä»¶ï¼Œç„¶åå°±è¢«ä¸€ä¸ªç¾¤å‹çµé­‚æ‹·é—®äº†â€œä½ è¿™æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿâ€ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c054b9bca3b44b61b7b9ecc7206240a4~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/643f9dd16c734e8487866f6a3306f0f3~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>å¼€å‘ä¸€æ¬¾è‡ªå®šä¹‰ç¼–è¾‘å™¨æ’ä»¶è¦æ¯”å•çº¯çš„å¼€å‘æ’ä»¶å’Œ webview æ’ä»¶éƒ½è¦éº»çƒ¦ï¼Œæ²¡æœ‰äººä¼šé—²çš„æ— èŠç‰ºç‰²ä¸šä½™æ—¶é—´ï¼Œåšä¸€ä¸ªæ²¡æœ‰æ„æ€çš„äº‹æƒ…ã€‚ä»å­¦ä¹ è§’åº¦æ¥è®²ï¼Œå¯ä»¥æŒæ¡äº†å¤§é‡ VSCode APIï¼Œä»ä½œç”¨æ¥è®²ï¼Œæ›´ç›´è§‚åœ°æŸ¥çœ‹ <code>yarn.lock</code> å¹¶æ”¯æŒæœç´¢æŸä¸ªåŒ…ä»¥åŠä¾èµ–è¯¥åŒ…çš„åŒ…ã€‚è¿™åœ¨ä½ æƒ³ç¡®å®šåº”ç”¨çš„é—´æ¥å¼•ç”¨äº†å“ªäº›åŒ…æ—¶å¾ˆæœ‰å¸®åŠ©ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2faa24d3cee4c9088e83c4d0ee06c63~tplv-k3u1fbpfcp-watermark.image" alt="screenshot.gif"></p><p>è¿™å…¶å®æ˜¯ä¸€ä¸ªæ¥è‡ªäºå®é™…å·¥ä½œä¸­çš„ä¸€ä¸ªç—›ç‚¹ï¼ŒReact Native ä¸­å¦‚æœåŒæ—¶ä¾èµ–ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„åŸç”ŸåŒ…ï¼Œè¿è¡Œé¡¹ç›®çš„æ—¶å€™å°±ä¼šå› ä¸ºé‡å¤æ³¨å†ŒæŸä¸ª <code>View</code> é€ æˆåº”ç”¨å´©æºƒã€‚å…¥èŒæ¶‚é¸¦ä¸€å¹´æ¥ï¼Œå¸®åŠ©ä¸šåŠ¡åŒå­¦æ’æŸ¥äº† N æ¬¡è¿™ä¸ªé—®é¢˜ã€‚ç”±äºæŸäº›ç‰ˆæœ¬çš„ä¾èµ–å¹¶ä¸æ˜¯ç›´æ¥åœ¨ <code>dependencies</code> ä¸­å†™çš„ï¼Œè€Œæ˜¯æŸä¸ªåŒ…é—´æ¥ä¾èµ–çš„ï¼Œæˆ‘çš„åŠæ³•æ˜¯å°±æ˜¯åœ¨ <code>yarn.lock</code> ä¸­ <code>cmd+f</code> æœç´¢é€ æˆå´©æºƒçš„åŒ…è¢«å“ªäº›åŒ…ä¾èµ–äº†ï¼Œç„¶åå†äººè‚‰åˆ†æè¿™ä¸ªæœ‰ç»“æ„çš„çº¯æ–‡æœ¬æ–‡ä»¶ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ee531d6d54d4d269984174b5bae97b8~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>è™½ç„¶æˆ‘å·²ç»æ˜¯å¤„ç†è¿™ä¸ªé—®é¢˜çš„è€å¸æœºäº†ï¼Œä½†æ€»å½’æ˜¯ä¼šè€½è¯¯ä¸å°‘æˆ‘å’ŒåŒäº‹çš„æ—¶é—´ã€‚ä¸Šé¢çš„è¿™ä¸ªé—®é¢˜å¯èƒ½æ¯”è¾ƒæç«¯ï¼Œè¿˜æœ‰ä¸€ä¸ªæˆ‘ä»¬ç»å¸¸é‡åˆ°çš„å¼€å‘çš„åé¦ˆæ˜¯å¼•å…¥äº†æŸä¸ªåŸç”ŸåŒ…ä¹‹åå¯¼è‡´åº”ç”¨å´©æºƒã€‚è¿™å…¶å®æ˜¯å› ä¸ºæˆ‘ä»¬çš„ React Native åº”ç”¨æ˜¯ä»¥åµŒå¥—çš„å½¢å¼é›†æˆåˆ°å·²æœ‰åŸç”Ÿæ¶‚é¸¦ App å†…çš„ï¼Œæ‰€ä»¥åŸç”Ÿåº“çš„æ”¯æŒä¹Ÿæ˜¯ä¾èµ– App æä¾›çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬åœ¨æ‰“åŒ…çš„æ—¶å€™ä¹Ÿæœ‰ç›¸åº”çš„æ£€éªŒå·¥å…·ï¼Œä½†æ˜¯ç”¨æˆ·æœ‰å¯èƒ½æ²¡æœ‰ç›´æ¥ä¾èµ–è¿™ä¸ªåº“ï¼Œè€Œæ˜¯è¿™ä¸ªåº“é—´æ¥æˆ–è€…é—´æ¥åœ°é—´æ¥åº“å¼•ç”¨äº†è¿™ä¸ªåº“ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¾—åœ¨ä¸Šä¸‡è¡Œçº¯æ–‡æœ¬ yarn.lock ä¸­å¼€å¯äººè‚‰åˆ†æã€‚</p><p>æ¯”å¦‚ï¼ŒApp ç›®å‰æ”¯æŒçš„ react-native-svg ç‰ˆæœ¬æ˜¯ 5.5.1ã€‚ç”¨æˆ·ä½¿ç”¨çš„ <code>react-native-svg-charts</code> æœ€æ–°ç‰ˆä¾èµ–çš„æ˜¯ react-native-svg <code>^6.2.1</code> æˆ–è€… <code>^7.0.3</code>ã€‚ç”¨æˆ·æŒ‰ç…§æŒ‡å¼•ç›´æ¥å®‰è£…ä½¿ç”¨è¿è¡Œå´©æºƒï¼Œç„¶åæ‰¾åˆ°æˆ‘ä»¬è´¨ç–‘ã€‚é‚£å¦‚æœç”¨äº†è¿™æ¬¾æ’ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­æœç´¢ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95d979f9b7c549e68f8321dac0aaa481~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>æœ€åä¸€ä¸ªå°±æ˜¯ä½ ä¸€å®šå¯èƒ½ä¼šé‡åˆ°çš„åœºæ™¯ï¼Œæ¯”å¦‚å¼€å‘å£°æ˜çš„ä¾èµ–æ˜¯ <code>tuya-panel-kit@^4.6.0</code>ï¼Œç„¶åé‡åˆ°é—®é¢˜ï¼Œç›´æ¥æˆªå›¾å‘Šè¯‰ä½ æˆ‘æ²¡æœ‰å‡çº§è¿‡ç‰ˆæœ¬å‘€ï¼Œä¸ºå•¥æŠ¥é”™äº†æˆ–è€…ä¸ºå•¥è¡¨ç°ä¸ä¸€æ ·äº†çš„é—®é¢˜ã€‚ç„¶åæˆ‘ä»¬å°±å¾—è®©ç”¨æˆ·çœ‹ä¸€ä¸‹å®é™…ä¾èµ–çš„ç‰ˆæœ¬æ˜¯ä»€ä¹ˆã€‚æœ‰çš„å¼€å‘ä¼šå» <code>node_modules</code> ä¸‹é¢æ‰¾ï¼Œè¿™å…¶å®ä¸é è°±ï¼Œå±‚çº§é‚£ä¹ˆå¤æ‚ï¼Œæƒ³å¿«é€Ÿå®šä½æ˜¯å¾ˆéš¾çš„ï¼›æœ‰çš„å¼€å‘ä¼šåœ¨ <code>yarn.lock</code> ä¸­äººè‚‰æœç´¢ï¼›æˆ–è€…æœ‰çš„å¼€å‘ç›´æ¥è®©æˆ‘ä»¬å¸®å¿™æ’æŸ¥ã€‚é‚£ä¹ˆæœ‰äº†è¿™æ¬¾æ’ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®©å¼€å‘è‡ªå·±æœï¼Œç„¶åæˆªå›¾æ issues ç»™æˆ‘ä»¬ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7bc01f9c7df543db90d6f6b31444eeca~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><blockquote><p>æ¸©é¦¨æç¤ºï¼š<code>yarn list --pattern tuya-panel-kit</code> å‘½ä»¤ä¹Ÿå¯ä»¥åˆ—å‡ºç®€è¦çš„ä¾èµ–ä¿¡æ¯ã€‚</p></blockquote><p>å¨é€¼å¨è¿™ä¹ˆå¤šï¼Œç›¸ä¿¡è¯»è€…å·²ç»å’Œæˆ‘è¾¾æˆå…±è¯†äº†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ¬¢è¿è¯„è®ºåŒº Battleã€‚åºŸè¯ä¸å¤šè¯´ï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬æ¥å¼€å§‹å±•ç¤ºçœŸæ­£çš„æŠ€æœ¯å§ã€‚</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c9f81662bba4518b8d075d132d870e1~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®"></a>åˆå§‹åŒ–é¡¹ç›®</h2><h3 id="ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶"><a href="#ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶" class="headerlink" title="ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶"></a>ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶</h3><ol><li>å®‰è£… <a href="http://yeoman.io/">Yeoman</a> å’Œ <a href="https://www.npmjs.com/package/generator-code">VS Code Extension Generator</a>ï¼š<code>npm install -g yo generator-code</code></li><li>ç”Ÿæˆé¡¹ç›®ï¼š<code>yo code</code></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ yo code</span><br><span class="line"><span class="comment">#     _-----_     â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span></span><br><span class="line"><span class="comment">#    |       |    â”‚   Welcome to the Visual  â”‚</span></span><br><span class="line"><span class="comment">#    |--(o)--|    â”‚   Studio Code Extension  â”‚</span></span><br><span class="line"><span class="comment">#   `---------Â´   â”‚        generator!        â”‚</span></span><br><span class="line"><span class="comment">#    ( _Â´U`_ )    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span></span><br><span class="line"><span class="comment">#    /___A___\   /</span></span><br><span class="line"><span class="comment">#     |  ~  |</span></span><br><span class="line"><span class="comment">#   __&#x27;.___.&#x27;__</span></span><br><span class="line"><span class="comment"># Â´   `  |Â° Â´ Y `</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ? What type of extension do you want to create? New Extension (TypeScript)</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the name of your extension? Yarn Lock Preview</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the identifier of your extension? yarn-lock-preview</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the description of your extension? Previews yarn.lock file</span></span><br><span class="line"><span class="comment"># ? Initialize a git repository? Yes</span></span><br><span class="line"><span class="comment"># ? Bundle the source code with webpack? No</span></span><br><span class="line"><span class="comment"># ? Which package manager to use? yarn</span></span><br><span class="line"></span><br><span class="line">$ code ./vscode-yarn-lock-preview</span><br></pre></td></tr></table></figure><h3 id="è§„èŒƒåŒ–é¡¹ç›®"><a href="#è§„èŒƒåŒ–é¡¹ç›®" class="headerlink" title="è§„èŒƒåŒ–é¡¹ç›®"></a>è§„èŒƒåŒ–é¡¹ç›®</h3><ol><li>ä»£ç è§„èŒƒé…ç½® - <code>npx @luozhu/create-coding-style</code></li><li>æŒ‰ç…§æ–°çš„ä»£ç è§„èŒƒæ ¼å¼åŒ–ä»£ç  - <code>yarn lint --fix</code></li><li>Git Commit è§„èŒƒé…ç½® - <code>npx @luozhu/create-commitlint</code></li></ol><h3 id="æ‰©å±•ä¿¡æ¯é…ç½®"><a href="#æ‰©å±•ä¿¡æ¯é…ç½®" class="headerlink" title="æ‰©å±•ä¿¡æ¯é…ç½®"></a>æ‰©å±•ä¿¡æ¯é…ç½®</h3><ol><li>æ‰©å±•ä¿¡æ¯é…ç½®ï¼ˆpackage.jsonï¼‰<ol><li>é…ç½® <a href="https://code.visualstudio.com/api/working-with-extensions/publishing-extension#create-a-publisher">publisher</a></li><li>æ·»åŠ ä¸Š <code>license</code> å­—æ®µã€‚</li><li>æ·»åŠ  <code>repository</code> å­—æ®µã€‚</li><li>é…ç½® <code>icon</code>ï¼š128 x 128 åƒç´ å›¾æ ‡çš„è·¯å¾„ã€‚</li></ol></li><li>ä¿®æ”¹ readmeï¼šå› ä¸ºåˆå§‹çš„æ²¡æ³•é€šè¿‡ <code>vsce package</code> æ ¡éªŒ</li><li>ä½¿ç”¨ <code>npx vsce package</code> å°è¯•æ‰“åŒ…ï¼Œç¡®ä¿æ²¡æœ‰é”™è¯¯å’Œè­¦å‘Š</li></ol><h3 id="ä½¿ç”¨-esbuild-æ‰“åŒ…"><a href="#ä½¿ç”¨-esbuild-æ‰“åŒ…" class="headerlink" title="ä½¿ç”¨ esbuild æ‰“åŒ…"></a>ä½¿ç”¨ esbuild æ‰“åŒ…</h3><p>åœ¨ <a href="https://juejin.cn/post/7000589186898231333/#heading-8">ä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•</a> ä¸­æˆ‘ä»¬è®²è¿°äº†ä½¿ç”¨ esbuild æ‰“åŒ…å¯ä»¥å‡å°æ‰“åŒ…äº§ç‰©çš„ä½“ç§¯ä»¥åŠåŠ å¿«è°ƒè¯•é€Ÿåº¦ã€‚å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç« å³å¯å®Œæˆé…ç½®ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p><h3 id="Donâ€™t-repeat-yourself"><a href="#Donâ€™t-repeat-yourself" class="headerlink" title="Donâ€™t repeat yourself"></a>Donâ€™t repeat yourself</h3><p>æœ¬ç€é‡å¤çš„å·¥ä½œéƒ½å¯ä»¥ç”¨è„šæœ¬ä»£æ›¿çš„åŸåˆ™ï¼Œæˆ‘ vscode æ’ä»¶å¼€å‘çš„æœ€ä½³å®è·µæ²‰æ·€ä¸ºäº†ä¸€ä¸ªè„šæ‰‹æ¶ï¼Œæ‰§è¡Œ <code>yarn create @luozhu/vscode-extension</code> å³å¯å¿«é€Ÿå¼€å§‹å¼€å‘ vscode æ‰©å±•ã€‚</p><h2 id="è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†"><a href="#è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†" class="headerlink" title="è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†"></a>è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†</h2><h3 id="å·¥ä½œæœºåˆ¶"><a href="#å·¥ä½œæœºåˆ¶" class="headerlink" title="å·¥ä½œæœºåˆ¶"></a>å·¥ä½œæœºåˆ¶</h3><p>å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“äº†åœ¨ VS Code ä¸­è‡ªå®šä¹‰ç¼–è¾‘å™¨æœ‰ä¸‰ç§ï¼šè‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨ã€è‡ªå®šä¹‰ç¼–è¾‘å™¨å’Œè‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨ã€‚ä¸‰ç§ç±»å‹çš„ç¼–è¾‘å™¨éƒ½ä¼šæ›¿æ¢ VS Code ä¸­çš„æ ‡å‡†æ–‡æœ¬ç¼–è¾‘å™¨å±•ç¤ºçš„ä½ç½®ã€‚ä¸åŒçš„æ˜¯è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨ç”±äºæ˜¯åŸºäº VS Code çš„æ ‡å‡†æ–‡æœ¬æ–‡æ¡£æ¨¡å‹ï¼Œä¸éœ€è¦å¼€å‘è€…æä¾›ï¼Œæ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=SimonSiefke.svg-preview">Svg Preview</a> æ’ä»¶ã€‚è€Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶çš„é¢„è§ˆï¼Œå› æ­¤éœ€è¦å¼€å‘è€…è‡ªå·±æä¾›æ–‡æ¡£æ¨¡å‹å¹¶è‡ªè¡Œå®ç°è¯¸å¦‚ä¿å­˜å’Œå¤‡ä»½è¿™äº›åŠŸèƒ½æ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=hediet.vscode-drawio">Draw.io Integration</a> æ’ä»¶ã€‚è‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨åˆ™ç”¨äºé¢„è§ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=elypia.magick-image-reader">Magick Image Reader</a>ã€‚</p><p>äº†è§£äº†ä¸‰ç§è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„åŒºåˆ«ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æˆ‘ä»¬çš„æ’ä»¶å±äºå“ªç§è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚å…¶å®ç­”æ¡ˆæ˜¾è€Œæ˜“è§ï¼Œ<code>yarn.lock</code> æ–‡ä»¶å±äº VS Code æ ‡å‡†æ–‡æ¡£æ¨¡å‹ï¼Œæˆ‘ä»¬é€‰ç”¨æœ€ç®€å•çš„è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨å³å¯ã€‚</p><p>ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ä¼šæ¶‰åŠè§†å›¾ã€æ’ä»¶ã€æ–‡æ¡£æ¨¡å‹ã€åº•å±‚èµ„æºæ–‡ä»¶ä»¥åŠå®ƒä»¬ä¹‹é—´çš„äº¤äº’ï¼Œå…¶å¤§æ¦‚åŸç†å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/116948b627f4406ba51faa0353f147a7~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç”±äºé¢„è§ˆ <code>yarn.lock</code> ä¸éœ€è¦æˆ‘ä»¬æä¾›æ–‡æ¡£æ¨¡å‹ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦åŸºäº <a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomTextEditorProvider.html">CustomTextEditorProvider</a> ç¼–å†™ä¸€ä¸ª CustomEditorProvider ç»™æ’ä»¶æ³¨å†Œä½¿ç”¨ï¼Œç„¶åç¼–å†™æˆ‘ä»¬çš„è§†å›¾ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰ï¼Œæœ€åå®ç°è§†å›¾å’Œæ’ä»¶çš„äº¤äº’å³å¯ã€‚</p><p>å…¶ä¸­æˆ‘ä»¬éœ€è¦å…³æ³¨çš„ç‚¹æœ‰å¦‚ä½•å¼€å‘è§†å›¾ã€è§†å›¾å’Œæ’ä»¶å¦‚ä½•é€šä¿¡ã€å¦‚ä½•å®ç° CustomEditorProvider ä»¥åŠå¦‚ä½•æ³¨å†Œ CustomEditorProviderã€‚</p><h3 id="å¦‚ä½•å¼€å‘è§†å›¾"><a href="#å¦‚ä½•å¼€å‘è§†å›¾" class="headerlink" title="å¦‚ä½•å¼€å‘è§†å›¾"></a>å¦‚ä½•å¼€å‘è§†å›¾</h3><p>è§†å›¾æ˜¯é€šè¿‡Â webview å®ç°çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥é€šè¿‡æ ‡å‡†çš„ HTMLã€CSS å’Œ JavaScript æ„å»ºç”¨æˆ·ä½“éªŒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä½ ç†Ÿæ‚‰çš„å‰ç«¯æ¡†æ¶å®ç°ã€‚</p><h3 id="è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡"><a href="#è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡" class="headerlink" title="è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡"></a>è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡</h3><p>ç”±äº VS Code çš„é™åˆ¶ï¼ŒWebview æ˜¯ä¸èƒ½ç›´æ¥è®¿é—® VS Code API ä»¥åŠå‘é€ç½‘ç»œè¯·æ±‚çš„ï¼Œä½†æ˜¯å®ƒå¯ä»¥é€šè¿‡ postMessage ä¸æ’ä»¶è¿›è¡ŒåŒå‘é€šä¿¡ã€‚ä½†æ˜¯æ‰‹å†™åŒå‘é€šä¿¡æ¯”è¾ƒéº»çƒ¦ï¼Œå°¤å…¶æ˜¯è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œwebview éœ€è¦å…ˆå‘é€å‘èµ·ç½‘ç»œè¯·æ±‚çš„æ¶ˆæ¯ï¼Œæ’ä»¶ä¾§æ³¨å†Œçš„ç›‘å¬äº‹ä»¶å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œæ’ä»¶ç­‰å¾…ç½‘ç»œè¯·æ±‚è¿”å›åå†å‘é€æ¶ˆæ¯å°†æ•°æ®å‘ç»™ webviewï¼Œæœ€å webview é€šè¿‡æ³¨å†Œçš„ç›‘å¬äº‹ä»¶è·å–ä¿¡æ¯ã€‚ç®€è¦çš„æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20f34a967c234945afbaf9aaf2901163~tplv-k3u1fbpfcp-watermark.image" alt="webview é€šä¿¡åŸç†.png"></p><p>æŠ›å¼€å…·ä½“å®ç°æ¥çœ‹è¿™ä¸ªäº¤äº’å°±å·²ç»å¾ˆåäººç±»äº†ï¼Œè€Œä¸”å…·ä½“ä½¿ç”¨æ—¶è¿˜ä¼šé¢å¯¹ webview å’Œæ’ä»¶ç”¨åˆ°çš„ API ä¹Ÿä¸ä¸€æ ·å¯¼è‡´çš„è½¬æ¢æˆæœ¬å’Œå¿ƒæ™ºè´Ÿæ‹…ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œæˆ‘å°è£…äº† <a href="https://www.npmjs.com/package/@luozhu/vscode-channel">@luozhu&#x2F;vscode-channel</a> æ¥å®ç°å¥½ç”¨çš„åŒå‘é€šä¿¡ã€‚ä½ å¯ä»¥ç®€å•åœ°åœ¨ webview ä¾§é€šè¿‡ <code>call</code> æ–¹æ³•è°ƒç”¨æ–¹æ³•å¹¶ç­‰å¾…å¤„ç†ç»“æœï¼Œæ’ä»¶ä¾§é€šè¿‡ <code>bind</code> æ–¹æ³•ç»‘å®šäº‹ä»¶å¤„ç†ã€‚</p><h3 id="å¦‚ä½•å®ç°-CustomEditorProvider"><a href="#å¦‚ä½•å®ç°-CustomEditorProvider" class="headerlink" title="å¦‚ä½•å®ç° CustomEditorProvider"></a>å¦‚ä½•å®ç° CustomEditorProvider</h3><p>å‚è€ƒå®˜æ–¹ Demo <a href="https://github.com/microsoft/vscode-extension-samples/blob/main/custom-editor-sample/src/catScratchEditor.ts#L16">catScratchEditor</a> æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>CatScratchEditorProvider</code> æ˜¯é€šè¿‡å®ç°äº† <code>vscode.CustomTextEditorProvider</code> æ¥å£åˆ›å»ºçš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚è€Œ <code>vscode.CustomTextEditorProvider</code> è¿™ä¸ªæ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•  <code>resolveCustomTexEditor</code>ã€‚æ‰€ä»¥åŸç†ä¸Šæˆ‘ä»¬åªéœ€è¦å®ç° <code>resolveCustomTexEditor</code> è¿™ä¸ªæ–¹æ³•å³å¯ã€‚</p><h3 id="å¦‚ä½•æ³¨å†Œ-CustomEditorProvider"><a href="#å¦‚ä½•æ³¨å†Œ-CustomEditorProvider" class="headerlink" title="å¦‚ä½•æ³¨å†Œ CustomEditorProvider"></a>å¦‚ä½•æ³¨å†Œ CustomEditorProvider</h3><p>å®ç°äº†è‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ³¨å†Œåˆ°æ’ä»¶ä¸­ï¼ŒVS Code æä¾›äº† <code>vscode.window.registerCustomEditorProvider</code> æ–¹æ³•ç”¨æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚</p><h2 id="è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°"><a href="#è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°" class="headerlink" title="è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°"></a>è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°</h2><p>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚å¦‚æœå¯¹å‰é¢çš„æ¦‚å¿µæ„Ÿåˆ°å›°æƒ‘ï¼Œé‚£æ¥ä¸‹æ¥çš„å®æˆ˜å¯èƒ½ä¼šè®©ä½ è±ç„¶å¼€æœ—ã€‚</p><h3 id="å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨"><a href="#å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨" class="headerlink" title="å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨"></a>å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨</h3><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨æ˜¯é€šè¿‡ <code>package.json</code> çš„è´¡çŒ®å†…å®¹ï¼ˆ<code>contributes</code>ï¼‰çš„ <code>customEditors</code> å±æ€§å£°æ˜çš„ï¼Œ<code>customEditors</code> æä¾›è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæ‰©å±•ä¸­æä¾›å¤šä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚æˆ‘ä»¬å£°æ˜çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;activationEvents&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;onCustomEditor:yarn-lock-preview.yarnLock&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;customEditors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;viewType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn-lock-preview.yarnLock&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;displayName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Preview yarn.lock&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;selector&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;filenamePattern&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn.lock&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;priority&quot;</span><span class="punctuation">:</span> <span class="string">&quot;option&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><ul><li><code>activationEvents</code> - æ³¨å†Œæ¿€æ´»äº‹ä»¶<ul><li><code>onCustomEditor:*</code> - æ¿€æ´»è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„äº‹ä»¶</li></ul></li><li><code>customEditors</code> - æä¾›çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚<ul><li><code>viewType</code> - è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„æ ‡è¯†ç¬¦ã€‚å®ƒåœ¨æ‰€æœ‰è‡ªå®šä¹‰ç¼–è¾‘å™¨ä¸­éƒ½å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤å»ºè®®å°†æ‰©å±• ID ä½œä¸º <code>viewType</code> çš„ä¸€éƒ¨åˆ†åŒ…æ‹¬åœ¨å†…ã€‚åœ¨ä½¿ç”¨ <code>vscode.registerCustomEditorProvider</code> å’Œåœ¨ <code>onCustomEditor:$&#123;id&#125;</code>Â æ¿€æ´»äº‹ä»¶ä¸­æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨æ—¶ï¼Œä½¿ç”¨ <code>viewType</code>ã€‚</li><li><code>displayName</code> - è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ç”¨æˆ·å¯è¯»åç§°ã€‚å½“é€‰æ‹©è¦ä½¿ç”¨çš„ç¼–è¾‘å™¨æ—¶ï¼Œå‘ç”¨æˆ·æ˜¾ç¤ºæ­¤åç§°ã€‚</li><li><code>selector</code> - ä¸ºå…¶å¯ç”¨äº†è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ä¸€ç»„ globã€‚</li><li><code>priority</code> - ï¼ˆå¯é€‰ï¼‰ç¡®å®šè‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ä½¿ç”¨æ—¶æœºã€‚è¿™ä¸ªå­—æ®µæ§åˆ¶åˆé€‚ä½¿ç”¨ç‰¹å®šçš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚<ul><li><code>option</code> - åœ¨ç”¨æˆ·æ‰“å¼€èµ„æºæ—¶ä¸ä¼šè‡ªåŠ¨ä½¿ç”¨æ­¤ç¼–è¾‘å™¨ï¼Œä½†ç”¨æˆ·å¯ä½¿ç”¨Â <code>Reopen With</code>Â å‘½ä»¤åˆ‡æ¢åˆ°æ­¤ç¼–è¾‘å™¨ã€‚</li><li><code>default</code> - åœ¨ç”¨æˆ·æ‰“å¼€èµ„æºæ—¶è‡ªåŠ¨ä½¿ç”¨æ­¤ç¼–è¾‘å™¨ï¼Œå‰ææ˜¯æ²¡æœ‰ä¸ºè¯¥èµ„æºæ³¨å†Œå…¶ä»–é»˜è®¤çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚</li></ul></li></ul></li></ul><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥æ‰“å¼€ä¸€ä¸ª <code>yarn.lock</code> æ–‡ä»¶ï¼Œå¹¶åœ¨å‘½ä»¤é¢æ¿ä¸­è¾“å…¥ <code>Reopen with</code> é€‰æ‹©æˆ‘å‰é¢æ³¨å†Œçš„ <code>Preview yarn.lock</code>ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/376a6b66b7c24de589fb48a54d29efb6~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 11.28.37.gif"></p><p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç©ºç™½çš„ç¼–è¾‘å™¨ä»¥åŠé¡¶éƒ¨çš„ä¸ä¼šåœæ­¢çš„åŠ è½½è¿›åº¦æ¡ã€‚</p><p>æ‰“å¼€å‘½ä»¤é¢æ¿è¾“å‡ºå‘½ä»¤çš„æ–¹å¼å¯¹ç”¨æˆ·æ¥è¯´ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¼–è¾‘å™¨èœå•ä¸­æ·»åŠ ä¸€ä¸ªåˆ‡æ¢æŒ‰é’®å®ç°å¿«é€Ÿåˆ‡æ¢ç¼–è¾‘å™¨æ¨¡å¼ã€‚é¦–å…ˆæˆ‘ä»¬åœ¨ <code>package.json</code> ä¸­é…ç½®å‘½ä»¤å’Œèœå•ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;commands&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn-lock-preview.switchEditorMode&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;switch editor mode&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$(rocket)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;menus&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;editor/title&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn-lock-preview.switchEditorMode&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;navigation&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li><code>commands</code> - å¯¹å‘½ä»¤é¢æ¿æä¾›å‘½ä»¤ã€‚</li><li><code>menus</code> - å‘ç¼–è¾‘å™¨æä¾›èœå•é¡¹ã€‚</li></ul><p>ç„¶ååœ¨ <code>src/extension</code> ä¸­çš„ active å‡½æ•°ä¸­æ³¨å†Œå‘½ä»¤åŠå®ç°å‘½ä»¤å›è°ƒï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; commands, <span class="title class_">ExtensionContext</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Congratulations, your extension &quot;yarn-lock-preview&quot; is now active!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">    commands.<span class="title function_">registerCommand</span>(<span class="string">&#x27;yarn-lock-preview.switchEditorMode&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      commands.<span class="title function_">executeCommand</span>(<span class="string">&#x27;workbench.action.reopenWithEditor&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘åªæ‰¾åˆ°äº† <code>workbench.action.reopenWithEditor</code> è¿™ä¸ªå¯ä»¥è§¦å‘çš„å‘½ä»¤ï¼Œæˆ‘æœ¬æ„æ˜¯å®ç°ç±»ä¼¼ git çš„<strong>æ‰“å¼€æ–‡ä»¶</strong>å’Œ<strong>æ‰“å¼€æ›´æ”¹</strong>çš„åŠŸèƒ½ã€‚ç”±äºå­¦è‰ºä¸ç²¾ï¼Œ<a href="https://github.dev/microsoft/vscode/blob/f66a3e06bcb9f000e5dc0ad0040ff9b32fc75c78/extensions/git/src/commands.ts#L655-L656">git.openFile</a> çš„å®ç°æˆ‘è¿˜éœ€è¦å†ç ”ç©¶ä¸€ä¸‹ï¼Œå¦‚æœæœ‰å¤§ä½¬çœ‹åˆ°è¿™æ¥å¯ä»¥æŒ‡ç‚¹ä¸€ä¸‹ã€‚ç›®å‰æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb03abea51634bd3a0a8c1a27b155ec0~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 12.46.00.gif"></p><h3 id="æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider"><a href="#æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider" class="headerlink" title="æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider"></a>æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider</h3><p>ç°åœ¨æˆ‘ä»¬å·²ç»æ³¨å†Œäº†è‡ªå®šä¹‰æ–‡æ¡£ç±»å‹ <code>yarn-lock-preview.yarnLock</code> å’Œ <code>onCustomEditor:yarn-lock-preview.yarnLock</code> æ¿€æ´»äº‹ä»¶ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å€ŸåŠ© <a href="https://vscode-api-cn.js.org/modules/window.html#registerCustomEditorProvider">window.registerCustomEditorProvider</a> æ–¹æ³•æ³¨å†Œå¯¹åº”çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚</p><p>å¦‚æœè¿™æ—¶å€™å°è¯•è°ƒç”¨ <code>registerCustomEditorProvider</code> æ–¹æ³•ï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬å¹¶æ²¡æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ provider å¯ä»¥ä½¿ç”¨ï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬ä¼šå®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Congratulations, your extension &quot;yarn-lock-preview&quot; is now active!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">registerCustomEditorProvider</span>(</span><br><span class="line">      <span class="string">&#x27;yarn-lock-preview.yarnLock&#x27;</span>,</span><br><span class="line">      provider <span class="comment">// è‡ªå®šä¹‰ç¼–è¾‘å™¨ provider å®ä¾‹</span></span><br><span class="line">    );</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider"><a href="#å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider" class="headerlink" title="å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider"></a>å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider</h3><p>ç”±äºæˆ‘ä»¬è¦é¢„è§ˆçš„æ–‡ä»¶æ˜¯ VS Code çš„æ ‡å‡†æ–‡æ¡£æ¨¡å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åŸºäº <code>CustomTextEditorProvider</code> è¿™ä¸ªæ¥å£å°è£…ä¸€ä¸ªç±»æ¥å®ç°å®ƒã€‚ä¸ºæ­¤æˆ‘ä»¬æ–°å»ºä¸€ä¸ª <code>YarnLockEditorProvider.ts</code> æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶çš„æœ€å°å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">implements</span> vscode.<span class="property">CustomTextEditorProvider</span> &#123;</span><br><span class="line">  <span class="comment">// å°† context æ³¨å…¥ this å¯¹è±¡</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> <span class="keyword">readonly</span> context: vscode.ExtensionContext</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å½“è‡ªå®šä¹‰ç¼–è¾‘å™¨æ‰“å¼€æ—¶è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">resolveCustomTextEditor</span>(</span><br><span class="line">    <span class="attr">_document</span>: vscode.<span class="property">TextDocument</span>,</span><br><span class="line">    <span class="attr">webviewPanel</span>: vscode.<span class="property">WebviewPanel</span>,</span><br><span class="line">    <span class="attr">_token</span>: vscode.<span class="property">CancellationToken</span></span><br><span class="line">  ): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// ç»™ webview è®¾ç½®åˆå§‹å†…å®¹</span></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">options</span> = &#123;</span><br><span class="line">      <span class="attr">enableScripts</span>: <span class="literal">true</span>, <span class="comment">// å…è®¸åœ¨ webview ä¸­è¿è¡Œè„šæœ¬</span></span><br><span class="line">    &#125;;</span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="variable language_">this</span>.<span class="title function_">getHtmlForWebview</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">getHtmlForWebview</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">        &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;head&gt;</span></span><br><span class="line"><span class="string">            &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;title&gt;Cat Coding&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;/head&gt;</span></span><br><span class="line"><span class="string">        &lt;body&gt;</span></span><br><span class="line"><span class="string">            &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;/body&gt;</span></span><br><span class="line"><span class="string">        &lt;/html&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">YarnLockEditorProvider</span>;</span><br></pre></td></tr></table></figure><ul><li><code>class YarnLockEditorProvider implements vscode.CustomTextEditorProvider</code> - å£°æ˜ä¸€ä¸ªç±»å®ç°è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨ providerã€‚</li><li><a href="https://vscode-api-cn.js.org/interfaces/CustomTextEditorProvider.html#resolveCustomTextEditor">resolveCustomTextEditor</a>ï¼šæ ¹æ®ç»™å®šçš„æ–‡æœ¬èµ„æºè§£æè‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡æ‰“å¼€ä¸€ä¸ª <code>CustomTextEditorProvider</code> çš„èµ„æºæ—¶ï¼Œæˆ–è€…å½“ä»–ä»¬ä½¿ç”¨è¿™ä¸ª <code>CustomTextEditorProvider</code> é‡æ–°æ‰“å¼€ä¸€ä¸ªç°æœ‰çš„ç¼–è¾‘å™¨æ—¶ï¼Œè¯¥æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚</li><li><code>webviewPanel.webview.options</code> - é…ç½® webview é€‰é¡¹ï¼Œè¿™é‡Œæˆ‘ä»¬é…ç½®äº†å…è®¸ä½¿ç”¨è„šæœ¬ã€‚</li><li><code>webviewPanel.webview.html = this.getHtmlForWebview()</code> - ä¸º HTML è®¾ç½®åˆå§‹å†…å®¹ã€‚</li></ul><p>ä¸ºäº†ç®€åŒ–åˆå§‹åŒ–æ“ä½œï¼Œæˆ‘ä»¬ä¸º <code>YarnLockEditorProvider</code> ç±»å°è£…ä¸€ä¸ª <code>register</code> é™æ€æ–¹æ³•ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="title function_">register</span>(<span class="attr">context</span>: vscode.<span class="property">ExtensionContext</span>): vscode.<span class="property">Disposable</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> provider = <span class="keyword">new</span> <span class="title class_">YarnLockEditorProvider</span>(context);</span><br><span class="line">  <span class="keyword">const</span> providerRegistration = vscode.<span class="property">window</span>.<span class="title function_">registerCustomEditorProvider</span>(</span><br><span class="line">    <span class="title class_">YarnLockEditorProvider</span>.<span class="property">viewType</span>,</span><br><span class="line">    provider,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">webviewOptions</span>: &#123;</span><br><span class="line">        <span class="attr">retainContextWhenHidden</span>: <span class="literal">true</span>, <span class="comment">// éšè—æ—¶ä¿ç•™ä¸Šä¸‹æ–‡</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> providerRegistration;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> viewType = <span class="string">&#x27;yarn-lock-preview.yarnLock&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æ³¨å†Œæˆ‘ä»¬çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ provider äº†ï¼Œåœ¨ <code>src/extension.ts</code> çš„ <code>activate</code> æ–¹æ³•ä¸­è°ƒç”¨ <code>YarnLockEditorProvider.register(context)</code> å¾—åˆ°æ³¨å†Œçš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ï¼Œç„¶å <code>push</code> åˆ°ä»£ç†ç›‘å¬æ•°ç»„ä¸­å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">from</span> <span class="string">&#x27;./YarnLockEditorProvider&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(<span class="title class_">YarnLockEditorProvider</span>.<span class="title function_">register</span>(context));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€ä¸ªç®€å•ä½†å®Œæ•´çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨å°±å®Œæˆäº†ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e6addd1cb739448db52db1767154fe65~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 17.00.55.gif"></p><h2 id="yarn-lock-å¯è§†åŒ–é¢„è§ˆå®ç°"><a href="#yarn-lock-å¯è§†åŒ–é¢„è§ˆå®ç°" class="headerlink" title="yarn.lock å¯è§†åŒ–é¢„è§ˆå®ç°"></a>yarn.lock å¯è§†åŒ–é¢„è§ˆå®ç°</h2><p>å‰é¢æˆ‘ä»¬å·²ç»é¡ºåˆ©å¸¦å¤§å®¶å®ç°äº†åœ¨è‡ªå®šä¹‰ç¼–è¾‘å™¨ä¸­çœ‹çŒ«çš„åŠŸèƒ½ã€‚å½“ç„¶äº†ï¼Œæˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡å¯ä¸æ˜¯çœ‹é»‘çŒ«æ•²ä»£ç ã€‚è¿™ä¸€ç« æˆ‘ä»¬å°†æŒ‘æˆ˜æœ€åçš„ Bossï¼šå®ç°ä¸€ä¸ªå¯ä»¥æœç´¢çš„ yarn.lock ä¾èµ– Json æ ‘ã€‚</p><h3 id="è§£æ-yarn-lock-æ–‡ä»¶"><a href="#è§£æ-yarn-lock-æ–‡ä»¶" class="headerlink" title="è§£æ yarn.lock æ–‡ä»¶"></a>è§£æ yarn.lock æ–‡ä»¶</h3><p>è§£å†³äº†æŠ€æœ¯é—®é¢˜ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸šåŠ¡é—®é¢˜ã€‚æˆ‘ä»¬çš„ç—›ç‚¹æ˜¯ yarn.lock æ–‡ä»¶æ˜¯çº¯æ–‡æœ¬çš„ï¼Œé˜…è¯»èµ·æ¥æ¯”è¾ƒå›°éš¾ï¼Œéœ€è¦ä¸€ä¸ªæ›´å¥½çš„å±•ç¤ºå½¢å¼ã€‚é‚£æˆ‘ä»¬å¯ä»¥ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯å°†æ–‡æœ¬æ–‡ä»¶è½¬æˆæ›´æ˜“å¤„ç†çš„èµ„æºï¼Œä½œä¸ºå‰ç«¯ï¼Œå½“ç„¶é¦–é€‰ JSONã€‚å€ŸåŠ© Yarn å®˜æ–¹çš„ <a href="https://www.npmjs.com/package/@yarnpkg/lockfile">@yarnpkg&#x2F;lockfile</a> å·¥å…·æˆ‘ä»¬å°±å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚æˆ‘ä»¬æ¥ç¼–å†™ demo è¯•ä¸€ä¸‹ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> lockfile <span class="keyword">from</span> <span class="string">&#x27;@yarnpkg/lockfile&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">implements</span> vscode.<span class="property">CustomTextEditorProvider</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å½“è‡ªå®šä¹‰ç¼–è¾‘å™¨æ‰“å¼€æ—¶è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">resolveCustomTextEditor</span>(</span><br><span class="line">    <span class="attr">document</span>: vscode.<span class="property">TextDocument</span>,</span><br><span class="line">    <span class="attr">webviewPanel</span>: vscode.<span class="property">WebviewPanel</span>,</span><br><span class="line">    <span class="attr">_token</span>: vscode.<span class="property">CancellationToken</span></span><br><span class="line">  ): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// è·å–çº¯æ–‡æœ¬å¹¶è§£ææˆ json æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> json = lockfile.<span class="title function_">parse</span>(<span class="variable language_">document</span>.<span class="title function_">getText</span>()).<span class="property">object</span>;</span><br><span class="line">    <span class="comment">// å°† JSON å­—ç¬¦ä¸²ä¼ é€’ç»™ HTML æ‹¼è£…æ–¹æ³•å±•ç¤º</span></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="variable language_">this</span>.<span class="title function_">getHtmlForWebview</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(json));</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">getHtmlForWebview</span>(<span class="attr">json</span>: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">        &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;head&gt;</span></span><br><span class="line"><span class="string">            &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;title&gt;Cat Coding&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;/head&gt;</span></span><br><span class="line"><span class="string">        &lt;body&gt;</span></span><br><span class="line"><span class="string">          &lt;h1&gt;JSON æ•°æ®&lt;/h1&gt;</span></span><br><span class="line"><span class="string">          &lt;p&gt;<span class="subst">$&#123;json&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;/body&gt;</span></span><br><span class="line"><span class="string">        &lt;/html&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/979363c7be8c42d59e2aa564cf687c26~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 18.59.12.gif"></p><h3 id="webview-é›†æˆ-umijs"><a href="#webview-é›†æˆ-umijs" class="headerlink" title="webview é›†æˆ umijs"></a>webview é›†æˆ umijs</h3><p>å‚è€ƒ <a href="https://juejin.cn/post/7000589186898231333/#heading-9">ã€Š# ä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•ã€‹</a> å’Œ <a href="https://github.com/youngjuning/vscode-juejin-me">vscode-juejin-me</a> åˆå§‹åŒ– umijs é¡¹ç›®å¹¶åšä¸€äº›ä¿®å‰ªé€‚é…å·¥ä½œã€‚ç„¶åä½¿ç”¨ <code>@luozhu/vscode-utils</code> çš„ <code>getUmiHTMLContent</code> æ–¹æ³•è·å– HTML å†…å®¹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getUmiHTMLContent</span>(<span class="variable language_">this</span>.<span class="property">context</span>, webviewPanel, &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;Yarn Lock Preview&#x27;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="webview-å†…å®¹æ›´æ–°"><a href="#webview-å†…å®¹æ›´æ–°" class="headerlink" title="webview å†…å®¹æ›´æ–°"></a>webview å†…å®¹æ›´æ–°</h3><p>é›†æˆ umijs åæˆ‘ä»¬é€šè¿‡ <code>webviewPanel.webview.html</code> è®¾ç½®çš„åˆå§‹å†…å®¹æ˜¯ç©ºçš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦å°†æ–‡æœ¬ä¼ é€’ä»æ’ä»¶ä¼ é€’åˆ° webviewï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€æ¬¡é€šä¿¡ã€‚VS Code ä¸­ç”±äºç§ç§é™åˆ¶é€ æˆäº†ç¼–å†™é€šä¿¡çš„ä»£ç å¾ˆç¹çã€‚åŸºæœ¬ä¾èµ– webview çš„æ’ä»¶éƒ½ä¼šå°†é€šä¿¡æœºåˆ¶ç»™å°è£…äº†ã€‚æˆ‘è¿™é‡Œçš„å°è£…æ€è·¯æ˜¯å€Ÿé‰´äº† <a href="https://www.npmjs.com/package/js-channel">js-channel</a> å®ç°äº†ä¸€ä¸ªä½¿ç”¨èµ·æ¥å¿ƒæ™ºè´Ÿæ‹…æœ€å°çš„ <a href="https://github.com/youngjuning/luozhu/tree/main/packages/vscode-channel#readme">@luozhu&#x2F;vscode-channel</a>ã€‚å€ŸåŠ©è¿™ä¸ªå·¥å…·æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®ç°æ›´æ–° webview çš„æ“ä½œï¼š</p><p><strong>æ’ä»¶ä¾§å‘é€æ›´æ–°æ¶ˆæ¯ï¼š</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Channel</span> <span class="keyword">from</span> <span class="string">&#x27;@luozhu/vscode-channel&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">implements</span> vscode.<span class="property">CustomTextEditorProvider</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">resolveCustomTextEditor</span>(</span><br><span class="line">    <span class="attr">document</span>: vscode.<span class="property">TextDocument</span>,</span><br><span class="line">    <span class="attr">webviewPanel</span>: vscode.<span class="property">WebviewPanel</span>,</span><br><span class="line">    <span class="attr">_token</span>: vscode.<span class="property">CancellationToken</span></span><br><span class="line">  ): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// ç»™ webview è®¾ç½®åˆå§‹å†…å®¹</span></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">options</span> = &#123;</span><br><span class="line">      <span class="attr">enableScripts</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getUmiHTMLContent</span>(<span class="variable language_">this</span>.<span class="property">context</span>, webviewPanel, &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Yarn Lock Preview&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–ä¸€ä¸ª channel å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> channel = <span class="keyword">new</span> <span class="title class_">Channel</span>(<span class="variable language_">this</span>.<span class="property">context</span>, webviewPanel);</span><br><span class="line">    <span class="keyword">const</span> json = lockfile.<span class="title function_">parse</span>(<span class="variable language_">document</span>.<span class="title function_">getText</span>()).<span class="property">object</span>;</span><br><span class="line">    <span class="comment">// è§¦å‘ updateWebview äº‹ä»¶ï¼Œå¹¶å°†æ–‡æœ¬ä½œä¸ºå‚æ•°ä¼ å…¥</span></span><br><span class="line">    channel.<span class="title function_">call</span>(<span class="string">&#x27;updateWebview&#x27;</span>, json);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>webview ä¾§ç›‘å¬æ¶ˆæ¯ï¼š</strong></p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Channel</span> <span class="keyword">from</span> <span class="string">&#x27;@luozhu/vscode-channel&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">HomePage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = <span class="title class_">React</span>.<span class="title function_">useState</span>(&#123;&#125;);</span><br><span class="line">  <span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    channel.<span class="title function_">bind</span>(<span class="string">&#x27;updateWebview&#x27;</span>, <span class="function"><span class="params">message</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setData</span>(message.<span class="property">params</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,[])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–‡æœ¬å†…å®¹åŒæ­¥"><a href="#æ–‡æœ¬å†…å®¹åŒæ­¥" class="headerlink" title="æ–‡æœ¬å†…å®¹åŒæ­¥"></a>æ–‡æœ¬å†…å®¹åŒæ­¥</h3><p>å‰é¢ä¸€ç« æˆ‘ä»¬å®ç°äº†åˆå§‹å†…å®¹çš„åŒæ­¥ï¼Œä½†æ˜¯å†…å®¹ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œ<code>yarn.lock</code> å¾ˆå¯èƒ½ä¼šå˜åŒ–ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦ç›¸åº”åœ°æ›´æ–°æˆ‘ä»¬å†…å®¹ï¼Œè¿™ä¸ªéœ€æ±‚æˆ‘ä»¬éœ€è¦å€ŸåŠ© <code>vscode.workspace.onDidChangeTextDocument</code> äº‹ä»¶ç›‘å¬æ¥å®ç°ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»ç„¶æ˜¯åœ¨ resolveCustomTextEditor æ–¹æ³•ä¸­å®ç°</span></span><br><span class="line"><span class="comment">// ç”±äºéœ€è¦å¯¹ json æ•°æ®å¤„ç†å’Œé‡å¤è°ƒç”¨æ›´æ–°æ–¹æ³•ï¼Œå°è£…äº†æ­¤æ–¹æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateWebview</span>(<span class="params">textDocument: vscode.TextDocument</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> json = lockfile.<span class="title function_">parse</span>(textDocument.<span class="title function_">getText</span>());</span><br><span class="line">  <span class="keyword">switch</span> (json.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;merge&#x27;</span>:</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> å¤„ç† merge type</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;conflict&#x27;</span>:</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> å¤„ç† conflict type</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      json = json.<span class="property">object</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  channel.<span class="title function_">call</span>(<span class="string">&#x27;updateWebview&#x27;</span>, json);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ³¨å†Œé’©å­äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ webview ä¸æ–‡æœ¬æ–‡æ¡£åŒæ­¥ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// æ–‡æœ¬æ–‡ä»¶ä½œä¸ºæˆ‘ä»¬çš„æ¨¡å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å°†æ–‡ä»¶ä¸­çš„å˜åŒ–åŒæ­¥åˆ°æˆ‘ä»¬çš„ç¼–è¾‘å™¨ã€‚</span></span><br><span class="line"><span class="comment">// è¯·è®°ä½ï¼Œä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¹Ÿå¯ä»¥åœ¨å¤šä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ä¹‹é—´å…±äº«ï¼ˆä¾‹å¦‚ï¼Œå½“ä½ åˆ†å‰²ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨æ—¶å°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼‰ã€‚</span></span><br><span class="line"><span class="keyword">const</span> changeDocumentSubscription = vscode.<span class="property">workspace</span>.<span class="title function_">onDidChangeTextDocument</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (e.<span class="property">document</span>.<span class="property">uri</span>.<span class="title function_">toString</span>() === <span class="variable language_">document</span>.<span class="property">uri</span>.<span class="title function_">toString</span>()) &#123;</span><br><span class="line">    <span class="title function_">updateWebview</span>(e.<span class="property">document</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ç¡®ä¿å½“æˆ‘ä»¬çš„ç¼–è¾‘å™¨å…³é—­æ—¶ï¼Œç§»é™¤äº†ç›‘å¬å™¨ã€‚</span></span><br><span class="line">webviewPanel.<span class="title function_">onDidDispose</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  changeDocumentSubscription.<span class="title function_">dispose</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="å®ç°å¯æœç´¢çš„-JSON-View"><a href="#å®ç°å¯æœç´¢çš„-JSON-View" class="headerlink" title="å®ç°å¯æœç´¢çš„ JSON View"></a>å®ç°å¯æœç´¢çš„ JSON View</h3><p>æœç´¢å®ç°ä¸å¤æ‚ï¼Œå¤§å®¶æ„Ÿå…´è¶£å¯ä»¥ç›´æ¥é˜…è¯»æºç ï¼ŒUI ç”¨çš„æ˜¯ umi è‡ªå¸¦çš„ antdã€‚JSON View æˆ‘é€‰ç”¨äº† <code>react-json-view</code>ï¼Œè¿™ä¸ªæœ‰å‡ ç‚¹æ¯”è¾ƒæœ‰æ„æ€å¯ä»¥è®²ä¸€ä¸‹ã€‚</p><ol><li>æ•°æ®é‡è¿‡å¤§æ—¶æ¸²æŸ“æ€§èƒ½å·®éœ€è¦åˆ¤æ–­æ˜¯å¦æŠ˜å </li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ReactJson</span> <span class="keyword">from</span> <span class="string">&#x27;react-json-view&#x27;</span>;</span><br><span class="line">...</span><br><span class="line">&lt;<span class="title class_">ReactJson</span></span><br><span class="line">  shouldCollapse=&#123;<span class="function"><span class="params">filed</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// é™¤äº†æ ¹ç›®å½•éƒ½æŠ˜å </span></span><br><span class="line">    <span class="keyword">if</span> (filed.<span class="property">name</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ ·å¼ç¬¦åˆå½“å‰ä¸»é¢˜</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ReactJson</span> <span class="keyword">from</span> <span class="string">&#x27;react-json-view&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getCssVar</span> = (<span class="params">cssVar: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> htmlStyle = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">style</span>;</span><br><span class="line">  <span class="keyword">return</span> htmlStyle.<span class="title function_">getPropertyValue</span>(cssVar).<span class="title function_">trim</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">&lt;<span class="title class_">ReactJson</span></span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">backgroundColor</span>: <span class="title function_">getCssVar</span>(<span class="string">&#x27;--vscode-editor-background&#x27;</span>),</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="title function_">getCssVar</span>(<span class="string">&#x27;--vscode-editor-font-size&#x27;</span>),</span><br><span class="line">  &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><ol start="3"><li>äº®æš—ä¸»é¢˜é€‚é…</li></ol><p>å®Œç¾çš„é€‚é…è‚¯å®šæ˜¯è¦éšç€ä¸»é¢˜çš„æ›´æ”¹åˆ‡æ¢ ReactJson çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ’ä»¶ä¾§å‘èµ·é€šçŸ¥ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹ä¸»é¢˜</span></span><br><span class="line">channel.<span class="title function_">call</span>(<span class="string">&#x27;updateColorTheme&#x27;</span>, vscode.<span class="property">window</span>.<span class="property">activeColorTheme</span>);</span><br><span class="line"><span class="comment">// ç›‘å¬ä¸»é¢˜æ”¹å˜äº‹ä»¶</span></span><br><span class="line">vscode.<span class="property">window</span>.<span class="title function_">onDidChangeActiveColorTheme</span>(<span class="function"><span class="params">colorTheme</span> =&gt;</span> &#123;</span><br><span class="line">  channel.<span class="title function_">call</span>(<span class="string">&#x27;updateColorTheme&#x27;</span>, colorTheme);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ webview ä¾§ç›‘å¬ <code>updateColorTheme</code> äº‹ä»¶ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [theme, setTheme] = <span class="title class_">React</span>.<span class="property">useState</span>&lt;<span class="title class_">ThemeKeys</span>&gt;();</span><br><span class="line">...</span><br><span class="line"><span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">channel.<span class="title function_">bind</span>(<span class="string">&#x27;updateColorTheme&#x27;</span>, <span class="function"><span class="params">message</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; kind &#125; = message.<span class="property">params</span>;</span><br><span class="line">  <span class="title function_">setTheme</span>(kind === <span class="number">1</span> ? <span class="string">&#x27;rjv-default&#x27;</span> : <span class="string">&#x27;monokai&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;, []);</span><br><span class="line">...</span><br><span class="line">&lt;<span class="title class_">ReactJson</span></span><br><span class="line">  theme=&#123;theme&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><p>æ–‡ç« å¼€å¤´å·²ç»æ¼”ç¤ºäº†ç”¨æˆ·ç•Œé¢ï¼Œè¿™é‡Œæ”¾ä¸€å¼ é»‘è‰²ä¸»é¢˜æ•ˆæœå§ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8449b0b270aa423da2ede94f4ad10805~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 id="æ¶‰åŠ-API-é™„å½•"><a href="#æ¶‰åŠ-API-é™„å½•" class="headerlink" title="æ¶‰åŠ API é™„å½•"></a>æ¶‰åŠ API é™„å½•</h2><p>VS Code æ’ä»¶å¼€å‘æ¶‰åŠçŸ¥è¯†ç‚¹æ¯”è¾ƒå¤šï¼Œæ¯ç§æ’ä»¶ç±»å‹éƒ½æœ‰è‡ªå·±çš„å¥—è·¯å’Œ APIã€‚åŸºäºå…³æ³¨åˆ†ç¦»åŸåˆ™ï¼Œè¿™é‡Œåˆ—å‡ºäº†å’Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ç›¸å…³çš„ä¸€äº› APIï¼Œæ–¹ä¾¿å¤§å®¶ä»¥åŠæœªæ¥çš„æˆ‘æŸ¥é˜…ã€‚</p><h3 id="vscode-commands-registerCommand"><a href="#vscode-commands-registerCommand" class="headerlink" title="vscode.commands.registerCommand"></a>vscode.commands.registerCommand</h3><p>æ³¨å†Œä¸€ä¸ªå¯ä»¥è¢«é”®æ˜ å°„ã€èœå•é¡¹ã€åŠ¨ä½œæˆ–ç›´æ¥è°ƒç”¨çš„å‘½ä»¤ã€‚ç”¨ä¸€ä¸ªç°æœ‰çš„å‘½ä»¤æ ‡è¯†ç¬¦æ³¨å†Œä¸¤æ¬¡ä¸€ä¸ªå‘½ä»¤å°†å¯¼è‡´é”™è¯¯ã€‚</p><h3 id="vscode-TextDocument"><a href="#vscode-TextDocument" class="headerlink" title="vscode.TextDocument"></a>vscode.TextDocument</h3><h3 id="vscode-window-registerCustomEditorProvider"><a href="#vscode-window-registerCustomEditorProvider" class="headerlink" title="vscode.window.registerCustomEditorProvider"></a>vscode.window.registerCustomEditorProvider</h3><p>ä¸º <code>customEditors</code> æ‰©å±•åŠŸèƒ½ç‚¹è´¡çŒ®çš„ <code>viewType</code> æ³¨å†Œä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ Providerã€‚</p><p>å½“æ‰“å¼€ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨è¢«æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ª <code>onCustomEditor:viewType</code> æ´»åŠ¨äº‹ä»¶ã€‚ä½ çš„æ‰©å±•å¿…é¡»ä¸º <code>viewType</code> æ³¨å†Œä¸€ä¸ª <code>CustomTextEditorProvider</code>ã€<code>CustomReadonlyEditor</code>  æˆ– <code>CustomEditorProvider</code> ä½œä¸ºæ¿€æ´»çš„ä¸€éƒ¨åˆ†ã€‚</p><h3 id="vscode-CustomTextEditorProvider"><a href="#vscode-CustomTextEditorProvider" class="headerlink" title="vscode.CustomTextEditorProvider"></a>vscode.CustomTextEditorProvider</h3><p>åŸºäºæ–‡æœ¬çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ providerã€‚</p><p>åŸºäºæ–‡æœ¬çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ä½¿ç”¨ TextDocument ä½œä¸ºå…¶æ•°æ®æ¨¡å‹ã€‚å› ä¸ºå®ƒå…è®¸ç¼–è¾‘å™¨å¤„ç†è®¸å¤šå¸¸è§çš„æ“ä½œï¼Œå¦‚æ’¤é”€å’Œå¤‡ä»½ã€‚provider è´Ÿè´£åœ¨ webview å’Œ TextDocument ä¹‹é—´åŒæ­¥æ–‡æœ¬å˜åŒ–ã€‚</p><h4 id="CustomTextEditorProvider-resolveCustomTextEditor"><a href="#CustomTextEditorProvider-resolveCustomTextEditor" class="headerlink" title="CustomTextEditorProvider.resolveCustomTextEditor"></a>CustomTextEditorProvider.resolveCustomTextEditor</h4><p>æ ¹æ®ç»™å®šæ–‡æœ¬èµ„æºè§£æä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚è¯¥æ–¹æ³•å°†åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡ä¸º <code>CustomTextEditorProvider</code> æ‰“å¼€ä¸€ä¸ªèµ„æºæ—¶ï¼Œæˆ–è€…ä»–ä»¬ä½¿ç”¨è¿™ä¸ª <code>CustomTextEditorProvider</code> é‡æ–°æ‰“å¼€å·²ç»å­˜åœ¨çš„ç¼–è¾‘å™¨æ—¶è¢«è°ƒç”¨ã€‚</p><h3 id="vscode-CustomReadonlyEditorProvider"><a href="#vscode-CustomReadonlyEditorProvider" class="headerlink" title="vscode.CustomReadonlyEditorProvider"></a>vscode.CustomReadonlyEditorProvider</h3><p>ä½¿ç”¨è‡ªå®šä¹‰æ–‡æ¡£æ¨¡å‹çš„åªè¯»è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚</p><p>è‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨ä½¿ç”¨ <code>CustomDocument</code>ï¼Œè€Œä¸æ˜¯ <code>TextDocument</code>ã€‚</p><p>å½“å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…æ›´å¤æ‚çš„åœºæ™¯æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨è¿™ä¸ªç±»å‹çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚ç®€å•çš„åŸºäºæ–‡æœ¬çš„æ–‡æ¡£è¯·ä½¿ç”¨ <code>CustomTextEditorProvider</code>ã€‚</p><h3 id="vscode-CustomEditorProvider"><a href="#vscode-CustomEditorProvider" class="headerlink" title="vscode.CustomEditorProvider"></a>vscode.CustomEditorProvider</h3><p>ä½¿ç”¨è‡ªå®šä¹‰æ–‡æ¡£æ¨¡å‹çš„å¯ç¼–è¾‘è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ providerã€‚</p><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨ä½¿ç”¨ <code>CustomDocument</code>ï¼Œè€Œä¸æ˜¯ <code>TextDocument</code>ã€‚è¿™ä½¿å¾—æ‰©å±•ç¨‹åºå¯ä»¥å®Œå…¨æ§åˆ¶ç¼–è¾‘ã€ä¿å­˜å’Œå¤‡ä»½ç­‰æ“ä½œã€‚</p><p>å½“å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…æ›´å¤æ‚çš„åœºæ™¯æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨è¿™ä¸ªç±»å‹çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚ç®€å•çš„åŸºäºæ–‡æœ¬çš„æ–‡æ¡£è¯·ä½¿ç”¨ <code>CustomTextEditorProvider</code>ã€‚</p><h3 id="vscode-WebviewPanel"><a href="#vscode-WebviewPanel" class="headerlink" title="vscode.WebviewPanel"></a>vscode.WebviewPanel</h3><p>ä¸€ä¸ªåŒ…å« webview çš„é¢æ¿ã€‚</p><blockquote><p>æœ¬æ–‡é¦–å‘äº <a href="https://juejin.cn/user/325111174662855/posts">æ˜é‡‘ä¸“æ </a>ï¼ŒåŒæ­¥äº <a href="https://youngjuning.js.org/">æ´›ç«¹çš„åšå®¢</a> å’Œå…¬ä¼—å· <a href="https://cdn.jsdelivr.net/gh/youngjuning/images/20210418112129.jpeg">æ´›ç«¹æ—©èŒ¶é¦†</a>ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> VS Code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VS Code </tag>
            
            <tag> yarn.lock </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo-theme-butterfly é­”æ”¹ä¸ç¾åŒ–</title>
      <link href="/3f81e8c6ddd1/"/>
      <url>/3f81e8c6ddd1/</url>
      
        <content type="html"><![CDATA[<!-- DRAFT hexo-theme-butterfly é­”æ”¹ä¸ç¾åŒ– --><blockquote><p>å½“å‰é­”æ”¹åŸºäº hexo 6.3.0 å’Œ hexo-theme-butterfly 4.7.0</p></blockquote><h1 id="patch-package-é…ç½®"><a href="#patch-package-é…ç½®" class="headerlink" title="patch-package é…ç½®"></a>patch-package é…ç½®</h1><p>patch-package å¯ä»¥å°†ä½ çš„é­”æ”¹è®°å½•ä¿å­˜åˆ° <code>patches</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–¹ä¾¿ä¸‹æ¬¡æ›´æ–°ä¸»é¢˜ååº”ç”¨é­”æ”¹ã€‚æŒ‰ç…§ä¸‹é¢çš„ä»£ç ä¿®æ”¹ package.json å³å¯ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line"><span class="addition">+    &quot;postinstall&quot;: &quot;npx patch-package&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³ç›´æ¥åº”ç”¨æˆ‘çš„é­”æ”¹ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶æœ¬æ–‡çš„ä»£ç åˆ° <code>patches/hexo-theme-butterfly+4.7.0.patch</code></p><h1 id="ä¸¤ä¸ªå°äºº"><a href="#ä¸¤ä¸ªå°äºº" class="headerlink" title="ä¸¤ä¸ªå°äºº"></a>ä¸¤ä¸ªå°äºº</h1><div class="tabs" id="ä¸¤ä¸ªå°äºº"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ä¸¤ä¸ªå°äºº-1">æ”¹åŠ¨ç‚¹</button></li><li class="tab"><button type="button" data-href="#ä¸¤ä¸ªå°äºº-2">æ•ˆæœé¢„è§ˆ</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ä¸¤ä¸ªå°äºº-1"><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">diff --git a/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug b/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug</span></span><br><span class="line"><span class="comment">index 9e63627..905342a 100644</span></span><br><span class="line"><span class="comment">--- a/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug</span></span><br><span class="line"><span class="comment">+++ b/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug</span></span><br><span class="line"><span class="meta">@@ -4,3 +4,4 @@</span> if theme.aside.card_announcement.enable</span><br><span class="line">       i.fas.fa-bullhorn.fa-shake</span><br><span class="line">       span= _p(&#x27;aside.card_announcement&#x27;)</span><br><span class="line">     .announcement_content!= theme.aside.card_announcement.content</span><br><span class="line"><span class="addition">+      .twopeople!= &#x27;&lt;div class=&quot;twopeople&quot;&gt;&lt;div class=&quot;container&quot; style=&quot;height:200px;&quot;&gt;&lt;canvas class=&quot;illo&quot; width=&quot;800&quot; height=&quot;800&quot; style=&quot;max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;&quot;&gt;&lt;/canvas&gt;&lt;/div&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js&quot;&gt;&lt;/script&gt;&lt;script id=&quot;rendered-js&quot; src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js&quot;&gt;&lt;/script&gt;&lt;style&gt;.twopeople&#123;margin: 0;align-items: center;justify-content: center;text-align: center;&#125;canvas &#123;display: block;margin: 0 auto;cursor: move;&#125;&lt;/style&gt;&lt;/div&gt;&#x27;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¸¤ä¸ªå°äºº-2"><p><img src="https://picbed.qunarzz.com/f3d661e2088ea4fd706709ee1024adce.png" alt="æ•ˆæœé¢„è§ˆ"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p>é¸£è°¢ <a href="https://guole.fun/posts/butterfly-custom/">https://guole.fun/posts/butterfly-custom/</a></p></blockquote><h1 id="ç«™ç‚¹-Logo-åœ†è§’"><a href="#ç«™ç‚¹-Logo-åœ†è§’" class="headerlink" title="ç«™ç‚¹ Logo åœ†è§’"></a>ç«™ç‚¹ Logo åœ†è§’</h1><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">diff --git a/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl b/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl</span></span><br><span class="line"><span class="comment">index ade0db3..956a69e 100644</span></span><br><span class="line"><span class="comment">--- a/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl</span></span><br><span class="line"><span class="comment">+++ b/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl</span></span><br><span class="line"><span class="meta">@@ -289,6 +289,7 @@</span></span><br><span class="line">       margin-right: 6px</span><br><span class="line">       height: 36px</span><br><span class="line">       vertical-align: middle</span><br><span class="line"><span class="addition">+      border-radius: 50%</span></span><br><span class="line"></span><br><span class="line">   #toggle-menu</span><br><span class="line">     display: none</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«™ç‚¹è¿è¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> hexo-theme-butterfly </tag>
            
            <tag> é­”æ”¹ </tag>
            
            <tag> ç¾åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆå¤‡è€ƒç¬”è®°</title>
      <link href="/e896d9d3a8e1/"/>
      <url>/e896d9d3a8e1/</url>
      
        <content type="html"><![CDATA[<!-- DRAFT ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆå¤‡è€ƒç¬”è®° --><h1 id="ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ"><a href="#ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ" class="headerlink" title="ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ"></a>ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ</h1><h2 id="ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–"><a href="#ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–"></a>ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–</h2><h3 id="ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ"><a href="#ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ"></a>ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ä¿¡æ¯çš„å®šä¹‰</summary><div class="toggle-content"><p>ä¿¡æ¯å°±æ˜¯ç”¨æ¥æ¶ˆé™¤ä¸ç¡®å®šæ€§çš„ä¸œè¥¿ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¿¡æ¯çš„ç‰¹å¾</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯çš„ç‰¹å¾</summary><div class="toggle-content"><ol><li><strong>å®¢è§‚æ€§</strong>ï¼šä¿¡æ¯æ˜¯å®¢è§‚äº‹ç‰©åœ¨äººè„‘ä¸­çš„åæ˜ ï¼Œè€Œåæ˜ çš„å¯¹è±¡åˆ™æœ‰ä¸»è§‚å’Œå®¢è§‚çš„åŒºåˆ«ï¼Œå› æ­¤ï¼Œä¿¡æ¯å¯åˆ†ä¸ºä¸»è§‚ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå†³ç­–ã€æŒ‡ä»¤å’Œè®¡åˆ’ç­‰ï¼‰å’Œå®¢è§‚ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå›½é™…å½¢å¼ã€ç»æµå‘å±•å’Œä¸€å¹´å››å­£ç­‰ï¼‰ã€‚ä¸»è§‚ä¿¡æ¯å¿…ç„¶è¦è½¬åŒ–æˆå®¢è§‚ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œå†³ç­–å’Œè®¡åˆ’ç­‰ä¸»è§‚ä¿¡æ¯è¦è½¬åŒ–æˆå®é™…è¡ŒåŠ¨ã€‚</li><li><strong>æ™®éæ€§</strong>ï¼šç‰©è´¨å…·æœ‰æ™®éæ€§ï¼Œä¿¡æ¯å±äºç‰©è´¨ï¼Œç‰©è´¨çš„æ™®éæ€§å†³å®šäº†ä¿¡æ¯çš„æ™®éå­˜åœ¨ã€‚</li><li><strong>æ— é™æ€§</strong>ï¼šå®¢è§‚ä¸–ç•Œæ˜¯æ— é™çš„ï¼Œä¿¡æ¯æ˜¯å®¢è§‚äº‹ç‰©&#x2F;ä¸–ç•Œåœ¨äººè„‘ä¸­çš„åæ˜ ï¼Œåæ˜ å®¢è§‚ä¸–ç•Œçš„ä¿¡æ¯è‡ªç„¶ä¹Ÿæ˜¯æ— é™çš„ã€‚æ— é™æ€§å¯åˆ†ä¸ºä¸¤ä¸ªå±‚æ¬¡ï¼Œä¸€æ˜¯æ— é™çš„äº‹ç‰©äº§ç”Ÿæ— é™çš„ä¿¡æ¯ï¼Œå³ä¿¡æ¯çš„æ€»é‡æ˜¯æ— é™çš„ï¼›äºŒæ˜¯æ¯ä¸ªå…·ä½“äº‹ç‰©æˆ–æœ‰é™ä¸ªé£Ÿç‰©çš„é›†åˆæ‰€èƒ½äº§ç”Ÿçš„ä¿¡æ¯ä¹Ÿå¯ä»¥æ˜¯æ— é™çš„ã€‚</li><li><strong>åŠ¨æ€æ€§</strong>ï¼šä¿¡æ¯æ˜¯éšç€æ—¶é—´çš„å˜åŒ–è€Œå˜åŒ–çš„ã€‚</li><li><strong>ç›¸å¯¹æ€§</strong>ï¼šä¸åŒçš„è®¤è¯†ä¸»ä½“ä»åŒä¸€äº‹ç‰©ä¸­è·å–çš„ä¿¡æ¯åŠä¿¡æ¯é‡å¯èƒ½æ˜¯ä¸åŒçš„ã€‚è¿™ä¼šå–å†³äºè®¤è¯†ä¸»ä½“çš„ç”Ÿé•¿ç¯å¢ƒã€æ•™è‚²ã€å·¥ä½œç¯å¢ƒã€å·¥ä½œæ€§è´¨ç­‰å¤–ç•Œå› ç´ ã€‚</li><li><strong>ä¾é™„æ€§</strong>ï¼šä¿¡æ¯çš„ä¾é™„æ€§å¯ä»¥ä»ä¸¤ä¸ªæ–¹é¢æ¥è§£é‡Šï¼Œä¸€æ–¹é¢ï¼Œä¿¡æ¯æ˜¯å®¢è§‚ä¸–ç•Œçš„åæ˜ ï¼Œä»»ä½•ä¿¡æ¯å¿…ç„¶ç”±å®¢è§‚äº‹ç‰©æ‰€äº§ç”Ÿï¼Œä¸å­˜åœ¨æ— æºçš„ä¿¡æ¯ï¼›å¦ä¸€æ–¹é¢ï¼Œä»»ä½•ä¿¡æ¯éƒ½è¦ä¾é™„äºä¸€å®šçš„è½½ä½“è€Œå­˜åœ¨ï¼Œéœ€è¦æœ‰ç‰©è´¨çš„æ‰¿æ‹…è€…ï¼Œä¿¡æ¯ä¸èƒ½å®Œå…¨è„±ç¦»ç‰©è´¨è€Œç‹¬ç«‹å­˜åœ¨ã€‚</li><li><strong>å˜æ¢æ€§</strong>ï¼šä¿¡æ¯é€šè¿‡å¤„ç†å¯ä»¥å®ç°å˜åŒ–æˆ–è½¬æ¢ï¼Œä½¿å…¶å½¢å¼å’Œå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œä»¥é€‚åº”ç‰¹å®šçš„éœ€è¦ã€‚æ¯”è¾ƒæ˜æ˜¾çš„æ˜¯æ•°æ®å¯è§†åŒ–åˆ†è¿‡ç¨‹ï¼Œå®ç°ä¿¡æ¯ä»æ–‡å­—åˆ°è¡¨æ ¼ï¼Œæœ€ç»ˆåˆ°å›¾è¡¨çš„å±•ç¤ºï¼Œé€šè¿‡å˜åŒ–ï¼Œä¿¡æ¯çš„å¯è¯»æ€§è¶Šæ¥è¶Šå¼ºã€‚</li><li><strong>ä¼ é€’æ€§</strong>ï¼šä¿¡æ¯åœ¨æ—¶é—´ä¸Šçš„ä¼ é€’å°±æ˜¯å­˜å‚¨ï¼Œåœ¨ç©ºé—´ä¸Šçš„ä¼ é€’å°±æ˜¯è½¬ç§»æˆ–æ‰©æ•£ã€‚</li><li><strong>å±‚æ¬¡æ€§</strong>ï¼šå®¢è§‚ä¸–ç•Œæ˜¯åˆ†å±‚æ¬¡çš„ï¼Œåæ˜ å®ƒçš„ä¿¡æ¯ä¹Ÿæ˜¯åˆ†å±‚æ¬¡çš„ã€‚</li><li><strong>ç³»ç»Ÿæ€§</strong>ï¼šä¿¡æ¯å¯ä»¥è¡¨ç¤ºä¸ºä¸€ç§åˆé›†ï¼Œä¸åŒç±»åˆ«çš„ä¿¡æ¯å¯ä»¥å½¢æˆä¸åŒçš„æ•´ä½“ã€‚å› æ­¤ï¼Œå¯ä»¥å½¢æˆä¸ç°å®ä¸–ç•Œç›¸å¯¹åº”çš„ä¿¡æ¯ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼šç»æµé¢†åŸŸä¸­çš„å•†ä¸šç³»ç»Ÿå’Œé‡‘èç³»ç»Ÿï¼Œè‡ªç„¶ç•Œä¸­çš„æ°´åˆ©ç³»ç»Ÿå’Œç”Ÿæ€ç³»ç»Ÿç­‰ã€‚</li><li><strong>è½¬åŒ–æ€§</strong>ï¼šä¿¡æ¯çš„äº§ç”Ÿä¸èƒ½æ²¡æœ‰ç‰©è´¨ï¼Œä¿¡æ¯çš„ä¼ é€’ä¸èƒ½æ²¡æœ‰èƒ½é‡ï¼Œä½†æœ‰æ•ˆåœ°ä½¿ç”¨ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ä¿¡æ¯è½¬åŒ–ä¸ºç‰©è´¨æˆ–èƒ½é‡ã€‚</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯è´¨é‡å±æ€§â­</summary><div class="toggle-content"><ol><li><strong>ç²¾ç¡®æ€§</strong>ï¼šå¯¹äº‹ç‰©çŠ¶æ€æè¿°çš„ç²¾å‡†ç¨‹åº¦ã€‚</li><li><strong>å®Œæ•´æ€§</strong>ï¼šå¯¹äº‹ç‰©çŠ¶æ€æè¿°çš„å…¨é¢ç¨‹åº¦ï¼Œå®Œæ•´ä¿¡æ¯åº”åŒ…æ‹¬æ‰€æœ‰é‡è¦äº‹å®ã€‚</li><li><strong>å¯é æ€§</strong>ï¼šæŒ‡ä¿¡æ¯çš„æ¥æºã€é‡‡é›†æ–¹æ³•ã€ä¼ è¾“è¿‡ç¨‹æ˜¯å¯ä»¥ä¿¡ä»»çš„ï¼Œç¬¦åˆé¢„æœŸã€‚</li><li><strong>åŠæ—¶æ€§</strong>ï¼ŒæŒ‡è·å¾—ä¿¡æ¯çš„æ—¶åˆ»ä¸äº‹ä»¶å‘ç”Ÿæ—¶åˆ»çš„é—´éš”é•¿çŸ­ã€‚</li><li><strong>ç»æµæ€§</strong>ï¼ŒæŒ‡ä¿¡æ¯è·å–ã€ä¼ è¾“å¸¦æ¥çš„æˆæœ¬åœ¨å¯ä»¥æ¥å—çš„èŒƒå›´ä¹‹å†…ã€‚</li><li><strong>å¯éªŒè¯æ€§</strong>ï¼šæŒ‡ä¿¡æ¯çš„ä¸»è¦è´¨é‡å±æ€§å¯ä»¥è¢«è¯å®æˆ–è€…è¯ä¼ªçš„ç¨‹åº¦ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šæŒ‡åœ¨ä¿¡æ¯çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä¿¡æ¯å¯ä»¥è¢«éæˆæƒè®¿é—®çš„å¯èƒ½æ€§ï¼Œå¯èƒ½æ€§è¶Šä½ï¼Œå®‰å…¨æ€§è¶Šé«˜ã€‚</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ä¿¡æ¯çš„åŠŸèƒ½</summary><div class="toggle-content"><p>æ— é‡è¦è€ƒç‚¹</p></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ä¿¡æ¯çš„ä¼ è¾“æ¨¡å‹â­</summary><div class="toggle-content"><ul><li><strong>ä¿¡æº</strong>ï¼šäº§ç”Ÿä¿¡æ¯çš„å®ä½“ï¼Œä¿¡æ¯äº§ç”Ÿåï¼Œç”±è¿™ä¸ªå®ä½“å‘å¤–ä¼ æ’­ã€‚</li><li><strong>ä¿¡å®¿</strong>ï¼šä¿¡æ¯çš„å½’å®¿æˆ–è€…æ¥å—è€…ã€‚</li><li><strong>ä¿¡é“</strong>ï¼šä¼ é€ä¿¡æ¯çš„é€šé“ã€‚</li><li><strong>ç¼–ç å™¨</strong>ï¼šåœ¨ä¿¡æ¯è®ºä¸­æ˜¯æ³›æŒ‡æ‰€æœ‰å˜æ¢ä¿¡å·çš„è®¾å¤‡ï¼Œå®é™…ä¸Šå°±æ˜¯ç»ˆç«¯æœºçš„å‘é€éƒ¨åˆ†ã€‚å®ƒåŒ…æ‹¬ä»ä¿¡æºåˆ°ä¿¡é“çš„æ‰€æœ‰è®¾å¤‡ï¼Œå¦‚é‡åŒ–å™¨ã€å‹ç¼©ç¼–ç å™¨ã€è°ƒåˆ¶å™¨ç­‰ï¼Œä½¿ä¿¡æºè¾“å‡ºçš„ä¿¡å·è½¬æ¢æˆé€‚ç”¨äºä¿¡é“ä¼ é€çš„ä¿¡å·ã€‚</li><li><strong>è¯‘ç å™¨</strong>ï¼šè¯‘ç å™¨æ˜¯ç¼–ç å™¨çš„é€†å˜æ¢è®¾å¤‡ï¼ŒæŠŠä¿¡é“ä¸Šä¼ æ¥çš„ä¿¡å·ï¼ˆåŸå§‹ä¿¡å·ä¸å™ªå£°çš„å åŠ ï¼‰è½¬æ¢æˆä¿¡å®¿èƒ½æ¥å—çš„ä¿¡å·ã€‚</li><li><strong>å™ªå£°</strong>ï¼šå™ªå£°å¯ä»¥ç†è§£ä¸ºå¹²æ‰°ã€‚</li></ul><p><img src="https://picbed.qunarzz.com/771ed4f1600bfe927bc97c5f5e6e2512.png" alt="ä¿¡æ¯ä¼ è¾“æ¨¡å‹"></p></div></details><h3 id="ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ"><a href="#ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ"></a>ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ç³»ç»Ÿçš„ç‰¹æ€§</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">æ€»ä½“ç‰¹æ€§</summary><div class="toggle-content"><ol><li><strong>ç›®çš„æ€§</strong>ï¼šå®šä¹‰ä¸€ä¸ªç³»ç»Ÿã€ç»„æˆä¸€ä¸ªç³»ç»Ÿæˆ–è€…æŠ½è±¡å‡ºä¸€ä¸ªç³»ç»Ÿï¼Œéƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡æˆ–è€…ç›®çš„ï¼Œç›®æ ‡æ€§å†³å®šäº†ç³»ç»Ÿçš„åŠŸèƒ½ã€‚</li><li><strong>æ•´ä½“æ€§</strong>ï¼šç³»ç»Ÿæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œå…ƒç´ æ˜¯ä¸ºäº†è¾¾åˆ°ä¸€å®šçš„ç›®çš„ï¼ŒæŒ‰ç…§ä¸€å®šçš„åŸåˆ™ï¼Œæœ‰åºåœ°æ’åˆ—èµ·æ¥ç»„æˆç³»ç»Ÿï¼Œä»è€Œäº§ç”Ÿå‡ºç³»ç»Ÿçš„ç‰¹å®šåŠŸèƒ½ã€‚</li><li><strong>å±‚æ¬¡æ€§</strong>ï¼šç³»ç»ŸåŒ–æ˜¯ç”±å¤šä¸ªå…ƒç´ ç»„æˆçš„ï¼Œç³»ç»Ÿå’Œå…ƒç´ æ˜¯ç›¸å¯¹çš„æ¦‚å¿µã€‚å…ƒç´ æ˜¯ç›¸å¯¹äºå®ƒæ‰€å¤„çš„ç³»ç»Ÿè€Œè¨€çš„ã€‚ç³»ç»Ÿæ˜¯ä»å®ƒåŒ…å«å…ƒç´ çš„è§’åº¦æ¥çœ‹çš„ï¼Œå¦‚æœç ”ç©¶é—®é¢˜çš„è§’åº¦å˜ä¸€å˜ï¼Œç³»ç»Ÿå°±æˆä¸ºæ›´é«˜ä¸€çº§çš„å…ƒç´ ï¼Œä¹Ÿæˆä¸ºå­ç³»ç»Ÿã€‚</li><li><strong>ç¨³å®šæ€§</strong>ï¼šæ˜¯è§„åˆ™çš„çº¦æŸï¼Œç³»ç»Ÿçš„å†…éƒ¨ç»“æ„å’Œç§©åºåº”è¯¥æ˜¯å¯ä»¥é¢„è§çš„ï¼›ç³»ç»Ÿçš„çŠ¶æ€ä»¥åŠæ¼”åŒ–è·¯å¾„æœ‰é™å¹¶èƒ½è¢«é¢„æµ‹ï¼›ç³»ç»Ÿçš„åŠŸèƒ½å‘ç”Ÿä½œç”¨å¯¼è‡´çš„åæœä¹Ÿæ˜¯å¯ä»¥é¢„ä¼°çš„ã€‚ç¨³å®šæ€§å¼ºçš„ç³»ç»Ÿä½¿å¾—ç³»ç»Ÿåœ¨å—åˆ°å¤–éƒ¨ä½œç”¨çš„åŒæ—¶ï¼Œå†…éƒ¨ç»“æ„å’Œç§©åºä»ç„¶èƒ½å¤Ÿä¿æŒã€‚</li><li><strong>çªå˜æ€§</strong>ï¼šçªå˜æ€§æ˜¯æŒ‡ç³»ç»Ÿé€šè¿‡å¤±ç¨³ï¼Œä»ä¸€ç§çŠ¶æ€è¿›å…¥å¦ä¸€ç§çŠ¶æ€çš„ä¸€ç§å‰§çƒˆå˜åŒ–è¿‡ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿè´¨å˜çš„ä¸€ç§åŸºæœ¬å½¢å¼ã€‚</li><li><strong>è‡ªç»„ç»‡æ€§</strong>ï¼šå¼€æ”¾ç³»ç»Ÿåœ¨ç³»ç»Ÿå†…å¤–å› ç´ çš„ä½œç”¨ä¸‹ï¼Œè‡ªå‘ç»„ç»‡èµ·æ¥ï¼Œä½¿ç³»ç»Ÿä»æ— åºåˆ°æœ‰åºï¼Œä»ä½çº§æœ‰åºåˆ°é«˜çº§æœ‰åºã€‚</li><li><strong>ç›¸ä¼¼æ€§</strong>ï¼šç³»ç»Ÿå…·æœ‰åŒæ„å’ŒåŒæ€çš„æ€§è´¨ï¼Œä½“ç°åœ¨ç³»ç»Ÿç»“æ„ã€å­˜åœ¨æ–¹å¼å’Œæ¼”åŒ–è¿‡ç¨‹å…·æœ‰å…±åŒæ€§ã€‚ç³»ç»Ÿå…·æœ‰ç›¸ä¼¼æ€§ï¼Œæ ¹æœ¬åŸå› åœ¨äºä¸–ç•Œçš„ç‰©è´¨ç»Ÿä¸€æ€§ã€‚</li><li><strong>ç›¸å…³æ€§</strong>ï¼šå…ƒç´ æ˜¯å¯åˆ†çš„å’Œç›¸äº’è”ç³»çš„ï¼Œç»„æˆç³»ç»Ÿçš„å…ƒç´ å¿…é¡»æœ‰æ˜ç¡®çš„è¾¹ç•Œï¼Œå¯ä»¥ä¸åˆ«çš„å…ƒç´ åŒºåˆ†å¼€æ¥ã€‚å¦å¤–ï¼Œå…ƒç´ ä¹‹é—´æ˜¯ç›¸äº’è”ç³»çš„ï¼Œä¸æ˜¯å“²å­¦ä¸Šæ‰€è¯´çš„é‚£ç§æ™®éè”ç³»ï¼Œè€Œæ˜¯å®å®åœ¨åœ¨çš„ã€å…·ä½“çš„è”ç³»ã€‚</li><li><strong>é€‚åº”ç¯å¢ƒæ€§</strong>ï¼šç³»ç»Ÿæ€»å¤„åœ¨ä¸€å®šçš„ç¯å¢ƒä¸­ï¼Œä¸ç¯å¢ƒå‘ç”Ÿç›¸äº’ä½œç”¨ã€‚ç³»ç»Ÿå’Œç¯å¢ƒä¹‹é—´æ€»æ˜¯åœ¨å‘ç”Ÿç€ä¸€å®šçš„ç‰©è´¨å’Œèƒ½é‡äº¤æ¢ã€‚</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">çªå‡ºç‰¹å¾</summary><div class="toggle-content"><ol><li>å¼€æ”¾æ€§ï¼šç³»ç»Ÿçš„å¼€æ”¾æ€§æ˜¯æŒ‡ç³»ç»Ÿçš„å¯è®¿é—®æ€§ã€‚</li><li>è„†å¼±æ€§ğŸ”¥ï¼šè¿™ä¸ªç‰¹æ€§ä¸ç³»ç»Ÿçš„ç¨³å®šæ€§ç›¸åº”ï¼Œå³ç³»ç»Ÿå¯èƒ½å­˜åœ¨ç€ä¸§å¤±ç»“æ„ã€åŠŸèƒ½ã€ç§©åºçš„ç‰¹æ€§ï¼Œè¿™ä¸ªç‰¹æ€§å¾€å¾€æ˜¯éšè—ä¸æ˜“è¢«å¤–ç•Œæ„ŸçŸ¥çš„ã€‚</li><li>å¥å£®æ€§ï¼šç³»ç»Ÿå…·æœ‰èƒ½å¤ŸæŠµå¾¡å‡ºç°éé¢„æœŸçŠ¶æ€çš„ç‰¹æ€§ç§°ä¸ºå¥å£®æ€§ï¼Œä¹Ÿç§°é²æ£’æ€§ï¼ˆrobustnessï¼‰ã€‚è¦æ±‚å…·æœ‰é«˜å¯ç”¨æ€§çš„ä¿¡æ¯ç³»ç»Ÿï¼Œä¼šé‡‡ç”¨å†—ä½™æŠ€æœ¯ã€å®¹é”™æŠ€æœ¯ã€èº«ä»½è¯†åˆ«æŠ€æœ¯ã€å¯é æ€§æŠ€æœ¯ç­‰æ¥æŠµå¾¡ç³»ç»Ÿå‡ºç°çš„éé¢„æœŸçš„çŠ¶æ€ï¼Œä¿æŒç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¿¡æ¯ç³»ç»Ÿ</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>ç®€å•åœ°è¯´ï¼Œä¿¡æ¯ç³»ç»Ÿå°±æ˜¯è¾“å…¥æ•°æ®ï¼Œé€šè¿‡åŠ å·¥å¤„ç†ï¼Œäº§ç”Ÿä¿¡æ¯çš„ç³»ç»Ÿã€‚</p></div></details><p>ä¿¡æ¯ç³»ç»Ÿå¯ä»¥æ˜¯æ‰‹å·¥çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯è®¡ç®—æœºåŒ–çš„ã€‚</p><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯ç³»ç»Ÿé›†æˆ</summary><div class="toggle-content"><p>é‡‡ç”¨ç°ä»£ç®¡ç†ç†è®ºï¼ˆä¾‹å¦‚ï¼Œè½¯ä»¶å·¥ç¨‹ã€é¡¹ç›®ç®¡ç†ç­‰ï¼‰ä½œä¸ºè®¡åˆ’ã€è®¾è®¡ã€æ§åˆ¶çš„æ–¹æ³•è®ºï¼Œå°†ç¡¬ä»¶ã€è½¯ä»¶ã€æ•°æ®åº“ã€ç½‘ç»œç­‰éƒ¨ä»¶æŒ‰ç…§è§„åˆ’çš„ç»“æ„å’Œç§©åºï¼Œæœ‰æœºåœ°æ•´åˆä¸€ä¸ªæœ‰æ¸…æ™°è¾¹ç•Œçš„ä¿¡æ¯ç³»ç»Ÿä¸­ï¼Œä»¥è¾¾åˆ°æ—¢å®šç³»ç»Ÿçš„ç›®æ ‡ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºä¿¡æ¯ç³»ç»Ÿé›†æˆã€‚</p></div></details></div></details><h3 id="ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ"><a href="#ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ"></a>ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ä¿¡æ¯åŒ–ä»â€œå°â€åˆ°â€œå¤§â€çš„äº”ä¸ªå±‚æ¬¡â­ï¸</summary><div class="toggle-content"><ol><li><strong>äº§å“ä¿¡æ¯åŒ–</strong></li><li><strong>ä¼ä¸šä¿¡æ¯åŒ–</strong></li><li><strong>äº§ä¸šä¿¡æ¯åŒ–</strong></li><li><strong>å›½æ°‘ç»æµä¿¡æ¯åŒ–</strong></li><li><strong>ç¤¾ä¼šç”Ÿæ´»ä¿¡æ¯åŒ–</strong></li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¿¡æ¯åŒ–çš„å†…æ¶µğŸ”¥</summary><div class="toggle-content"><ol><li><strong>ä¿¡æ¯åŒ–çš„ä¸»ä½“</strong>ï¼š<strong>å…¨ä½“ç¤¾ä¼šæˆå‘˜</strong>ï¼ŒåŒ…æ‹¬æ”¿åºœã€ä¼ä¸šã€äº‹ä¸šã€å›¢ä½“å’Œä¸ªäººã€‚</li><li><strong>æ—¶åŸŸ</strong>ï¼šä¸€ä¸ªé•¿æœŸçš„è¿‡ç¨‹</li><li><strong>ç©ºåŸŸ</strong>ï¼šæ”¿æ²»ã€ç»æµã€æ–‡åŒ–ã€å†›äº‹å’Œç¤¾ä¼šçš„ä¸€åˆ‡é¢†åŸŸ</li><li><strong>æ‰‹æ®µ</strong>ï¼šåŸºäºç°ä»£ä¿¡æ¯æŠ€æœ¯çš„å…ˆè¿›ç¤¾ä¼šç”Ÿäº§å·¥å…·</li><li><strong>é€”å¾„</strong>ï¼šæ˜¯åˆ›å»ºä¿¡æ¯æ—¶ä»£çš„ç¤¾ä¼šç”Ÿäº§åŠ›ï¼Œæ¨åŠ¨ç¤¾ä¼šç”Ÿäº§å…³ç³»åŠç¤¾ä¼šä¸Šå±‚å»ºç­‘çš„æ”¹é©</li><li><strong>ç›®æ ‡</strong>ï¼šä½¿å›½å®¶çš„ç»¼åˆå®åŠ›ã€ç¤¾ä¼šçš„æ–‡æ˜ç´ è´¨å’Œäººæ°‘çš„ç”Ÿæ´»è´¨é‡å…¨é¢æå‡</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€å›½å®¶çº§ä¿¡æ¯ç³»ç»Ÿ</summary><div class="toggle-content"><ul><li>ä¸¤ç½‘ï¼šæ˜¯æŒ‡æ”¿åŠ¡å†…ç½‘å’Œæ”¿åŠ¡å¤–ç½‘</li><li>ä¸€ç«™ï¼šæ˜¯æŒ‡æ”¿åºœé—¨æˆ·ç½‘ç«™</li><li>å››åº“ï¼šå³å»ºç«‹äººå£ã€æ³•äººå•ä½ã€ç©ºé—´åœ°ç†å’Œè‡ªç„¶èµ„æºã€å®è§‚ç»æµç­‰å››å¤§åŸºç¡€æ•°æ®åº“ã€‚</li><li>åäºŒé‡‘</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ä¿¡æ¯åŒ–çš„å…­è¦ç´ ğŸ”¥</summary><div class="toggle-content"><ol><li><strong>ä¿¡æ¯èµ„æº</strong>ï¼šä¿¡æ¯èµ„æºçš„å¼€å‘å’Œåˆ©ç”¨æ˜¯å›½å®¶ä¿¡æ¯åŒ–çš„æ ¸å¿ƒäººä»»åŠ¡ï¼Œæ˜¯å›½å®¶ä¿¡æ¯åŒ–å»ºè®¾å–å¾—å®æ•ˆçš„å…³é”®ï¼Œä¹Ÿæ˜¯æˆ‘å›½ä¿¡æ¯åŒ–çš„è–„å¼±ç¯èŠ‚ã€‚ï¼ˆä¿¡æ¯æŠ€æœ¯ã€è®¾å¤‡ã€è®¾æ–½ã€ä¿¡æ¯ç”Ÿäº§è€…ç­‰ï¼‰</li><li><strong>ä¿¡æ¯ç½‘ç»œ</strong>ï¼šä¿¡æ¯ç½‘ç»œæ˜¯ä¿¡æ¯èµ„æºå¼€å‘å’Œåˆ©ç”¨çš„åŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬ç”µä¿¡ç½‘ï¼Œå¹¿æ’­ç”µè§†å’Œè®¡ç®—æœºç½‘ç»œã€‚</li><li><strong>ä¿¡æ¯æŠ€æœ¯åº”ç”¨</strong>ï¼šæ˜¯æŒ‡æŠŠä¿¡æ¯æŠ€æœ¯å¹¿æ³›åº”ç”¨äºç»æµå’Œç¤¾ä¼šå„ä¸ªé¢†åŸŸï¼Œä»–ç›´æ¥åæ˜ äº†æ•ˆç‡ã€æ•ˆæœã€æ•ˆç›Šã€‚ä¿¡æ¯æŠ€æœ¯åº”ç”¨æ˜¯ä¿¡æ¯åŒ–ä½“ç³»å…­è¦ç´ ä¸­çš„é¾™å¤´ï¼Œæ˜¯å›½å®¶ä¿¡æ¯åŒ–å»ºè®¾çš„ä¸»é˜µåœ°ï¼Œé›†ä¸­ä½“ç°äº†å›½å®¶ä¿¡æ¯åŒ–å»ºè®¾çš„éœ€æ±‚ä¸æ•ˆç›Šã€‚</li><li><strong>ä¿¡æ¯æŠ€æœ¯ä¸äº§ä¸š</strong>ï¼šæ˜¯ä¿¡æ¯åŒ–çš„ç‰©è´¨åŸºç¡€</li><li><strong>ä¿¡æ¯åŒ–äººæ‰</strong>ï¼šäººæ‰æ˜¯ä¿¡æ¯åŒ–çš„æˆåŠŸä¹‹æœ¬</li><li><strong>ä¿¡æ¯åŒ–æ”¿ç­–æ³•è§„å’Œæ ‡å‡†è§„èŒƒ</strong>ï¼šä¿¡æ¯åŒ–æ”¿ç­–å’Œæ³•è§„ã€æ ‡å‡†ã€è§„èŒƒç”¨äºè§„èŒƒå’Œåè°ƒä¿¡æ¯åŒ–ä½“ç³»è¦ç´ ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯å›½å®¶ä¿¡æ¯åŒ–å¿«é€Ÿï¼Œæœ‰åºï¼Œå¥åº·å’ŒæŒç»­å‘å±•çš„ä¿éšœã€‚</li></ol><p><img src="https://picbed.qunarzz.com/81eb01b74890743fd48386c1e2d6c876.png" alt="ä¿¡æ¯åŒ–çš„å…­è¦ç´ "></p></div></details><h3 id="ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ"><a href="#ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ"></a>ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ</h3><details class="toggle" ><summary class="toggle-button" style="">4 å¤§æ–¹é¢</summary><div class="toggle-content"><ol><li>ç«‹é¡¹ï¼ˆç³»ç»Ÿè§„åˆ’ï¼‰</li><li>å¼€å‘ï¼ˆç³»ç»Ÿåˆ†æã€ç³»ç»Ÿè®¾è®¡ã€ç³»ç»Ÿå®æ–½ï¼‰</li><li>è¿ç»´ï¼ˆè¿è¡Œç»´æŠ¤ï¼‰</li><li>æ¶ˆäº¡</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">5 å°æ–¹é¢</summary><div class="toggle-content"><ol><li>ç³»ç»Ÿè§„åˆ’</li><li>ç³»ç»Ÿåˆ†æ</li><li>ç³»ç»Ÿè®¾è®¡</li><li>ç³»ç»Ÿå®æ–½</li><li>è¿è¡Œç»´æŠ¤</li></ol></div></details><h2 id="ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•"><a href="#ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•"></a>ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•</h2><h3 id="ç»“æ„åŒ–æ–¹æ³•"><a href="#ç»“æ„åŒ–æ–¹æ³•" class="headerlink" title="ç»“æ„åŒ–æ–¹æ³•"></a>ç»“æ„åŒ–æ–¹æ³•</h3><p><img src="https://picbed.qunarzz.com/b5330d132e19a9931bfb32134f234fdf.png" alt="å­µå°é¸¡"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"><p>ä¹Ÿç§°ä¸ºç”Ÿå‘½å‘¨æœŸæ³•ï¼Œæ˜¯ä¸€ç§ä¼ ç»Ÿçš„ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ç»„æˆ</summary><div class="toggle-content"><ul><li>ç»“æ„åˆ†æï¼ˆStructured Analysisï¼ŒSAï¼‰</li><li>ç»“æ„åŒ–è®¾è®¡ï¼ˆStructured Designï¼ŒSDï¼‰</li><li>ç»“æ„åŒ–ç¨‹åºè®¾è®¡ï¼ˆStructured Programmingï¼ŒSPï¼‰</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ç²¾é«“ğŸ”¥</summary><div class="toggle-content"><p>è‡ªé¡¶å‘ä¸‹ã€é€æ­¥æ±‚ç²¾å’Œæ¨¡å—åŒ–è®¾è®¡</p></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ä¸»è¦ç‰¹ç‚¹</summary><div class="toggle-content"><ol><li>å¼€å‘ç›®æ ‡æ¸…æ™°åŒ–</li><li>å¼€å‘å·¥ä½œé˜¶æ®µåŒ–</li><li>å¼€å‘æ–‡æ¡£è§„èŒƒåŒ–</li><li>è®¾è®¡æ–¹æ³•ç»“æ„åŒ–</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">5ã€é€‚ç”¨åœºæ™¯</summary><div class="toggle-content"><p>ç‰¹åˆ«é€‚åˆäºæ•°æ®å¤„ç†é¢†åŸŸçš„é—®é¢˜</p></div></details><details class="toggle" ><summary class="toggle-button" style="">6ã€ä¸é€‚ç”¨åœºæ™¯</summary><div class="toggle-content"><p>ä¸é€‚ç”¨äºè§„æ¨¡è¾ƒå¤§ã€æ¯”è¾ƒå¤æ‚çš„ç³»ç»Ÿå¼€å‘</p></div></details><details class="toggle" ><summary class="toggle-button" style="">7ã€ç¼ºç‚¹</summary><div class="toggle-content"><ol><li>å¼€å‘å‘¨æœŸè¾ƒé•¿</li><li>éš¾ä»¥é€‚åº”éœ€æ±‚å˜åŒ–</li><li>å¾ˆå°‘è€ƒè™‘æ•°æ®ç»“æ„</li></ol></div></details><h3 id="é¢å‘å¯¹è±¡æ–¹æ³•"><a href="#é¢å‘å¯¹è±¡æ–¹æ³•" class="headerlink" title="é¢å‘å¯¹è±¡æ–¹æ³•"></a>é¢å‘å¯¹è±¡æ–¹æ³•</h3><p><img src="https://picbed.qunarzz.com/e66b60d74e7b7591ca378194405f3841.png" alt="é¢å‘å¯¹è±¡-é¢å‘å°é¸¡"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"><p>é¢å‘å¯¹è±¡ï¼ˆOOï¼‰æ–¹æ³•è®¤ä¸ºï¼Œå®¢è§‚ä¸–ç•Œæ˜¯ç”±å„ç§å¯¹è±¡ç»„æˆçš„ï¼ˆä¸€åˆ‡çš†å¯¹è±¡ï¼‰ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¸ç»“æ„åŒ–æ–¹æ³•çš„è”ç³»</summary><div class="toggle-content"><p>ä¸ç»“æ„åŒ–æ–¹æ³•ç±»ä¼¼ï¼ŒOO æ–¹æ³•ä¹Ÿåˆ’åˆ†é˜¶æ®µï¼Œä½†å…¶ä¸­çš„ç³»ç»Ÿåˆ†æã€ç³»ç»Ÿè®¾è®¡å’Œç³»ç»Ÿå®ç°ä¸‰ä¸ªé˜¶æ®µä¹‹é—´å·²ç»æ²¡æœ‰â€œç¼éš™â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸‰ä¸ªé˜¶æ®µçš„ç•Œé™å˜å¾—ä¸æ˜ç¡®ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€OO ä¼˜ç‚¹ğŸ”¥</summary><div class="toggle-content"><ol><li>ç¬¦åˆäººä»¬çš„æ€ç»´ä¹ æƒ¯</li><li>æœ‰åˆ©äºç³»ç»Ÿå¼€å‘è¿‡ç¨‹ä¸­ç”¨æˆ·ä¸å¼€å‘äººå‘˜çš„æ²Ÿé€šä¸äº¤æµï¼Œç¼©çŸ­å¼€å‘å‘¨æœŸ</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€OO ç¼ºç‚¹ğŸ”¥</summary><div class="toggle-content"><p>å¿…é¡»ä¾é ä¸€å®šçš„ OO æŠ€æœ¯æ”¯æŒï¼Œåœ¨å¤§å‹é¡¹ç›®å¼€å‘ä¸Šå…·æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œä¸èƒ½æ¶‰è¶³ç³»ç»Ÿåˆ†æä»¥å‰çš„å¼€å‘ç¯èŠ‚ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">5ã€åº”ç”¨åœºæ™¯</summary><div class="toggle-content"><p>å½“å‰ï¼Œä¸€äº›å¤§å‹ä¿¡æ¯ç³»ç»Ÿçš„å¼€å‘ï¼Œé€šå¸¸æ˜¯å°†ç»“æ„åŒ–æ–¹æ³•å’Œ OO æ–¹æ³•ç»“åˆèµ·æ¥ï¼Œé¦–å…ˆï¼Œä½¿ç”¨ç»“æ„åŒ–æ–¹æ³•è¿›è¡Œè‡ªé¡¶å‘ä¸‹çš„æ•´ä½“åˆ’åˆ†ï¼›ç„¶åï¼Œè‡ªåº•å‘ä¸Šåœ°é‡‡ç”¨ OO æ–¹æ³•è¿›è¡Œå¼€å‘ã€‚</p></div></details><h3 id="åŸå‹åŒ–æ–¹æ³•"><a href="#åŸå‹åŒ–æ–¹æ³•" class="headerlink" title="åŸå‹åŒ–æ–¹æ³•"></a>åŸå‹åŒ–æ–¹æ³•</h3><p><img src="https://picbed.qunarzz.com/1c7a2ea4d0e571de005d72cf898a1352.png" alt="åŸå‹åŒ–æ–¹æ³•"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"><p>åŸå‹åŒ–æ–¹æ³•ä¹Ÿç§°ä¸ºå¿«é€ŸåŸå‹æ³•ï¼Œæˆ–è€…ç®€ç§°åŸå‹æ³•ã€‚å®ƒæ˜¯ä¸€ç§æ ¹æ®ç”¨æˆ·åˆæ­¥éœ€æ±‚ï¼Œåˆ©ç”¨ç³»ç»Ÿå¼€å‘å·¥å…·ï¼Œå¿«é€Ÿå»ºç«‹ä¸€ä¸ªç³»ç»Ÿæ¨¡å‹ç»™ç”¨æˆ·ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šä¸ç”¨æˆ·äº¤æµï¼Œæœ€ç»ˆå®ç°ç”¨æˆ·éœ€æ±‚çš„ä¿¡æ¯ç³»ç»Ÿå¿«é€Ÿçš„å¼€å‘æ–¹æ³•ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€åˆ†ç±»</summary><div class="toggle-content"><p>æŒ‰æ˜¯å¦å®ç°åŠŸèƒ½åˆ’åˆ†ï¼šæ°´å¹³åŸå‹ã€å‚ç›´åŸå‹<br>æŒ‰æœ€ç»ˆç»“æœåˆ’åˆ†ï¼šæŠ›å¼ƒå¼åŸå‹ã€æ¼”åŒ–å¼åŸå‹</p></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€å¼€å‘è¿‡ç¨‹ğŸ”¥</summary><div class="toggle-content"><ol><li>ç¡®å®šç”¨æˆ·çš„åŸºæœ¬éœ€æ±‚</li><li>è®¾è®¡ç³»ç»ŸåŸå‹</li><li>è¯•ç”¨å’Œè¯„ä»·åŸå‹</li><li>ä¿®æ”¹å’Œå®Œå–„åŸå‹</li><li>æ•´ç†åŸå‹ã€æä¾›æ–‡æ¡£</li></ol><p><img src="https://picbed.qunarzz.com/8a4081f6975446bb19470ea120cd78b1.png" alt="åŸå‹æ³•çš„å¼€å‘è¿‡ç¨‹"></p></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ç‰¹ç‚¹ğŸ”¥</summary><div class="toggle-content"><ol><li>åŸå‹æ³•å¯ä»¥ä½¿ç³»ç»Ÿå¼€å‘çš„å‘¨æœŸç¼©çŸ­ï¼Œæˆæœ¬å’Œé£é™©é™ä½ï¼Œé€Ÿåº¦åŠ å¿«ï¼Œè·å¾—è¾ƒé«˜çš„ç»¼åˆå¼€å‘æ•ˆç›Šã€‚</li><li>åŸå‹æ³•æ˜¯ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒæ¥å¼€å‘ç³»ç»Ÿï¼Œç”¨æˆ·å‚ä¸çš„ç¨‹åº¦å¤§å¤§æé«˜ï¼Œå¼€å‘çš„ç³»ç»Ÿç¬¦åˆç”¨æˆ·çš„éœ€æ±‚ï¼Œå› è€Œå¢åŠ å®¢æˆ·çš„æ»¡æ„åº¦ï¼Œæé«˜äº†ç³»ç»Ÿå¼€å‘çš„æˆåŠŸç‡ã€‚</li><li>ç”±äºç”¨æˆ·å‚ä¸äº†ç³»ç»Ÿå¼€å‘çš„å…¨è¿‡ç¨‹ï¼Œå¯¹ç³»ç»Ÿçš„åŠŸèƒ½å’Œç»“æ„å®¹æ˜“ç†è§£å’Œæ¥å—ï¼Œæœ‰åˆ©äºç³»ç»Ÿçš„ç§»äº¤ï¼Œæœ‰åˆ©äºç³»ç»Ÿçš„è¿è¡Œå’Œç»´æŠ¤ã€‚</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">5ã€ä¸è¶³ğŸ”¥</summary><div class="toggle-content"><ol><li>å¼€å‘ç¯å¢ƒè¦æ±‚é«˜</li><li>ç®¡ç†æ°´å¹³è¦æ±‚é«˜</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">6ã€é€‚ç”¨åœºæ™¯ğŸ”¥</summary><div class="toggle-content"><ol><li>åŸå‹æ³•é€‚ç”¨äºé‚£äº›éœ€æ±‚ä¸æ˜ç¡®çš„ç³»ç»Ÿå¼€å‘</li><li>äº‹å®ä¸Šï¼Œå¯¹äºåˆ†æå±‚é¢éš¾åº¦å¤§ï¼ŒæŠ€æœ¯å±‚é¢éš¾åº¦ä¸å¤§çš„ç³»ç»Ÿï¼Œé€‚ç”¨äºåŸå‹æ³•å¼€å‘</li><li>è€Œå¯¹äºæŠ€æœ¯å±‚é¢çš„å›°éš¾è¿œå¤§äºå…¶åˆ†æå±‚é¢çš„ç³»ç»Ÿï¼Œåˆ™ä¸å®œç”¨åŸå‹æ³•ã€‚</li></ol></div></details><h3 id="é¢å‘æœåŠ¡"><a href="#é¢å‘æœåŠ¡" class="headerlink" title="é¢å‘æœåŠ¡"></a>é¢å‘æœåŠ¡</h3><p><img src="https://picbed.qunarzz.com/145bb50bf142fc865414fc290012e273.png" alt="é¢å‘æœåŠ¡"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€äº§ç”Ÿçš„èƒŒæ™¯</summary><div class="toggle-content"><p>OO çš„åº”ç”¨æ„å»ºåœ¨ç±»å’Œå¯¹è±¡ä¸Šï¼Œéšåå‘å±•èµ·æ¥çš„å»ºæ¨¡æŠ€æœ¯å°†ç›¸å…³å¯¹è±¡æŒ‰ä¸šåŠ¡åŠŸèƒ½è¿›è¡Œåˆ†ç»„ï¼Œå°±å½¢æˆäº†æ„ä»¶ï¼ˆComponentï¼‰çš„æ¦‚å¿µã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€äº¤äº’çš„æ–¹å¼</summary><div class="toggle-content"><p>å¯¹äºè·¨æ„ä»¶çš„åŠŸèƒ½è°ƒç”¨ï¼Œåˆ™é‡‡ç”¨<strong>æ¥å£</strong>çš„å½¢å¼æš´éœ²å‡ºæ¥ã€‚è¿›ä¸€æ­¥å°†æ¥å£çš„å®šä¹‰ä¸å®ç°è¿›é¡¹è§£è€¦ï¼Œåˆ™å‚¬ç”Ÿäº†æœåŠ¡å’Œé¢å‘æœåŠ¡ï¼ˆService-Orientedï¼ŒSOï¼‰çš„å¼€å‘æ–¹æ³•ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ä¼˜ç‚¹</summary><div class="toggle-content"><ol><li>æé«˜ç³»ç»Ÿå¯å¤ç”¨æ€§</li><li>ä¿¡æ¯èµ„æºå…±äº«</li><li>ç³»ç»Ÿä¹‹é—´çš„äº’æ“ä½œæ€§</li></ol></div></details><h2 id="å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯"><a href="#å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯" class="headerlink" title="å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯"></a>å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯</h2><h3 id="ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®"><a href="#ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®" class="headerlink" title="ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®"></a>ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€OSI åè®®</summary><div class="toggle-content"><ol><li>ç‰©ç†å±‚</li></ol><ul><li>å®šä¹‰ï¼šç›–å±‚åŒ…æ‹¬ç‰©ç†è”ç½‘åª’ä»‹ï¼Œæ¯”å¦‚ç”µç¼†è¿çº¿è¿æ¥å™¨ã€‚</li><li>åè®®ï¼šRS232ã€V.35ã€<strong>RJ-45</strong>ï¼ˆæ°´æ™¶å¤´ï¼‰ã€FDDI<br>2.æ•°æ®é“¾è·¯å±‚</li><li>å®šä¹‰ï¼šå®ƒæ§åˆ¶ç½‘ç»œå±‚ä¸ç‰©ç†å±‚ä¹‹é—´çš„é€šä¿¡ã€‚</li><li>åè®®ï¼š<strong>IEEE 802.3&#x2F;.2</strong>ã€AHDLCã€PPPã€TM</li></ul><ol start="3"><li>ç½‘ç»œå±‚</li></ol><ul><li>å®šä¹‰ï¼šå…¶ä¸»è¦åŠŸèƒ½æ˜¯å°†ç½‘ç»œåœ°å€ï¼ˆä¾‹å¦‚ï¼šIP åœ°å€ï¼‰ç¿»è¯‘æˆå¯¹åº”çš„ç‰©ç†åœ°å€ï¼ˆä¾‹å¦‚ï¼šMAC åœ°å€ï¼‰ï¼Œå¹¶å†³å®šå¦‚ä½•å°†æ•°æ®ä»å‘é€æ–¹è·¯ç”±åˆ°æ¥æ”¶æ–¹ã€‚</li><li>åè®®ï¼š<strong>IP</strong>ã€<strong>ICMP</strong>ã€<strong>IGMP</strong>ã€IPXã€<strong>ARP</strong>ã€<strong>RARP</strong></li></ul><ol start="4"><li>ä¼ è¾“å±‚</li></ol><ul><li>å®šä¹‰ï¼šä¸»è¦è´Ÿè´£ç¡®ä¿æ•°æ®å¯é ã€é¡ºåºã€æ— é”™åœ°ä» A ä¼ è¾“åˆ° B ç‚¹ã€‚</li><li>åè®®ï¼š<strong>TCP</strong>ã€<strong>UDP</strong>ã€SPX</li></ul><ol start="5"><li>ä¼šè¯å±‚</li></ol><ul><li>å®šä¹‰ï¼šè´Ÿè´£åœ¨ç½‘ç»œä¸­çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å»ºç«‹å’Œç»´æŒé€šä¿¡ï¼Œä»¥åŠæä¾›äº¤äº’ä¼šè¯çš„ç®¡ç†åŠŸèƒ½ã€‚å¦‚ä¸‰ç§æ•°æ®æµæ–¹å‘æ§åˆ¶ï¼Œå³ä¸€è·¯äº¤äº’ã€ä¸¤è·¯äº¤äº’å’Œä¸¤è·¯åŒæ—¶ä¼šè¯æ¨¡å¼ã€‚</li><li>åè®®ï¼šRPCã€SQLã€NFS</li></ul><ol start="6"><li>è¡¨ç¤ºå±‚</li></ol><ul><li>å®šä¹‰ï¼šå¦‚åŒåº”ç”¨ç¨‹åºå’Œç½‘ç»œä¹‹é—´çš„ç¿»è¯‘å®˜ï¼Œåœ¨è¡¨ç¤ºå±‚ï¼Œæ•°æ®å°†æŒ‰ç…§ç½‘ç»œèƒ½ç†è§£çš„æ–¹æ¡ˆè¿›è¡Œæ ¼å¼åŒ–ï¼›è¿™ç§æ ¼å¼åŒ–ä¹Ÿå› æ‰€ä½¿ç”¨çš„ç½‘ç»œçš„ç±»å‹ä¸åŒè€Œä¸åŒã€‚è¡¨ç¤ºå±‚ç®¡ç†æ•°æ®çš„è§£å¯†åŠ å¯†ã€æ•°æ®è½¬æ¢ã€æ ¼å¼åŒ–å’Œæ–‡æœ¬å‹ç¼©ã€‚</li><li>åè®®ï¼š<strong>JPEG</strong>ã€<strong>ASCLL</strong>ã€<strong>GIF</strong>ã€<strong>DES</strong>ã€<strong>MPEG</strong></li></ul><ol start="7"><li>åº”ç”¨å±‚</li></ol><ul><li>å®šä¹‰ï¼šè´Ÿè´£å¯¹è½¯ä»¶æä¾›æ¥å£ä»¥ä½¿ç¨‹åºèƒ½ä½¿ç”¨ç½‘è·¯æœåŠ¡ï¼Œå¦‚äº‹åŠ¡å¤„ç†ç¨‹åºã€æ–‡ä»¶ä¼ é€åè®®å’Œç½‘ç»œç®¡ç†ç­‰ã€‚</li><li>åè®®ï¼š<strong>FTP</strong>ã€<strong>TFTP</strong>ã€<strong>HTTP</strong>ã€<strong>SMTP</strong>ã€<strong>DHCP</strong>ã€<strong>Telnet</strong>ã€<strong>DNS</strong>ã€<strong>SNMP</strong></li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ç½‘ç»œåè®®ä¸æ ‡å‡†</summary><div class="toggle-content"><ul><li>IEEE 802.3ï¼ˆå±€åŸŸç½‘åè®®ï¼‰</li><li>IEEE 802.11ï¼ˆæ— çº¿å±€åŸŸç½‘åè®®ï¼‰</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€TCP/IP</summary><div class="toggle-content"><p>TCP&#x2F;IP åè®®æ˜¯ Internet çš„æ ¸å¿ƒ</p><ol><li>åº”ç”¨å±‚åè®®</li></ol><ul><li><strong>FTP</strong>ï¼ˆFile Transport Protocolï¼Œæ–‡ä»¶ä¼ è¾“åè®®ï¼‰ï¼šè¿è¡Œåœ¨<em>TCP</em>ä¹‹ä¸Šï¼ŒFTP åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´éœ€è¦å»ºç«‹ä¸¤æ¡ TCP è¿æ¥ï¼Œä¸€æ¡ç”¨äºä¼ è¾“æ§åˆ¶ä¿¡æ¯ï¼ˆä½¿ç”¨ 21 å·ç«¯å£ï¼‰ï¼šå¦å¤–ä¸€æ¡ç”¨äºä¼ é€æ–‡ä»¶å†…å®¹ï¼ˆä½¿ç”¨ 20 ç«¯å£ï¼‰ã€‚</li><li><strong>TFTP</strong>ï¼ˆTrivial File Transfer Protocolï¼‰ï¼Œç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰ï¼Œå»ºç«‹åœ¨<em>UDP</em>ä¹‹ä¸Šï¼Œæä¾›ä¸å¯é çš„æ•°æ®æµä¼ è¾“æœåŠ¡ã€‚</li><li><strong>HTTP</strong>ï¼ˆHyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ï¼šæ˜¯ç”¨äºä» WWW æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ è¾“åè®®ï¼Œå»ºç«‹åœ¨<em>TCP</em>ä¹‹ä¸Šã€‚</li><li><strong>SMTP</strong>ï¼ˆSimple Mail Transfer Protocolï¼Œç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼‰ï¼šå»ºç«‹åœ¨<em>TCP</em>ä¹‹ä¸Šï¼Œæ˜¯ä¸€ç§æä¾›å¯é ä¸”æœ‰æ•ˆçš„ç”µå­é‚®ä»¶ä¼ è¾“åè®®ã€‚</li><li><strong>DHCP</strong>ï¼ˆDynamic Host Configuration Protocolï¼ŒåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰ï¼šå»ºç«‹åœ¨<em>UDP</em>ä¹‹ä¸Šï¼ŒåŸºäºå®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨æ¨¡å‹è®¾è®¡çš„ã€‚æ‰€æœ‰çš„ IP ç½‘ç»œè®¾å®šæ•°æ®éƒ½ç”± DHCP æœåŠ¡å™¨é›†ä¸­ç®¡ç†ï¼Œå¹¶è´Ÿè´£å®¢æˆ·ç«¯çš„ DHCP è¯·æ±‚ã€‚</li><li><strong>Telnet</strong>ï¼ˆè¿œç¨‹ç™»å½•åè®®ï¼‰ï¼šæ˜¯ç™»å½•å’Œä»¿çœŸç¨‹åºï¼Œå»ºç«‹åœ¨<em>TCP</em>ä¹‹ä¸Šï¼Œä»–çš„åŸºç¡€åŠŸèƒ½æ˜¯å…è®¸ç”¨æˆ·ç™»å½•è¿›å…¥è¿œç¨‹è®¡ç®—æœºã€‚</li><li><strong>DNS</strong>ï¼ˆDomain Name Systemï¼ŒåŸŸåç³»ç»Ÿï¼‰ï¼šå®ç°åŸŸåè§£æï¼Œå»ºç«‹åœ¨<em>UDP</em>ä¹‹ä¸Šã€‚</li><li><strong>SNMP</strong>ï¼ˆSimple Network Management Protocolï¼Œç®€å•ç½‘ç»œç®¡ç†åè®®ï¼‰ï¼šç”±ä¸€ç»„ç½‘ç»œç®¡ç†çš„æ ‡å‡†ç»„æˆï¼ŒåŒ…å«ä¸€ä¸ªåº”ç”¨å±‚åè®®ã€æ•°æ®åº“æ¨¡å‹å’Œä¸€ç»„èµ„æºå¯¹è±¡ã€‚è¯¥åè®®èƒ½å¤Ÿæ”¯æŒç½‘ç»œç®¡ç†ç³»ç»Ÿï¼Œç”¨ä»¥ç›‘æµ‹è¿æ¥åˆ°ç½‘ç»œä¸Šçš„è®¾å¤‡æ˜¯å¦æœ‰ä»»ä½•å¼•èµ·ç®¡ç†ä¸Šæ³¨æ„çš„æƒ…å†µã€‚</li></ul><ol start="2"><li>ä¼ è¾“å±‚åè®®</li></ol><ul><li><strong>TCP</strong>ï¼ˆTransmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰ï¼šTCP æä¾›äº†ä¸€ä¸ªå¯é çš„ï¼Œé¢å‘è¿æ¥çš„ï¼Œå…¨åŒå·¥çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚TCP ä¸€èˆ¬ç”¨äºä¼ è¾“æ•°æ®é‡æ¯”è¾ƒå°‘ï¼Œä¸”å¯¹å¯é æ€§è¦æ±‚é«˜çš„åœºåˆã€‚</li><li><strong>UDP</strong>ï¼ˆUser Datagram Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼šUDP æ˜¯ä¸€ç§ä¸å¯é çš„ï¼Œæ— è¿æ¥çš„åè®®ï¼Œå¯ä»¥ä¿è¯åº”ç”¨ç¨‹åºé—´çš„é€šä¿¡ï¼Œä¸ TCP ç›¸æ¯”ï¼ŒUDP æ˜¯ä¸€ç§æ— è¿æ¥çš„åè®®ï¼Œå®ƒçš„é”™è¯¯æ£€æµ‹åŠŸèƒ½è¦å¼±çš„å¤šï¼ŒUDP åè®®ä¸€èˆ¬ç”¨äºä¼ è¾“æ•°æ®é‡å¤§ï¼Œå¯¹äºå¯é æ€§è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œä½†è¦æ±‚é€Ÿåº¦å¿«çš„åœºåˆã€‚</li></ul><ol start="3"><li>ç½‘ç»œå±‚åè®®</li></ol><ul><li><strong>IP</strong>ï¼ˆInternet Protocolï¼Œäº’è”ç½‘åè®®ï¼‰ï¼šæ‰€æä¾›çš„æœåŠ¡æ˜¯æ— è¿æ¥å’Œå¯é çš„ã€‚</li><li><strong>ICMP</strong>ï¼ˆInternet Control Message Protocolï¼Œäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰ï¼šä¸€ç§ä¸“é—¨ç”¨äºå‘é€é”™è¯¯æŠ¥æ–‡çš„åè®®ï¼Œå³ä¼ é€çš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€é‡å¤ã€å»¶è¿Ÿæˆ–ä¹±åºä¼ é€’ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§å°½é‡é¿å…å·®é”™å¹¶èƒ½åœ¨å‘ç”Ÿå·®é”™æ—¶æŠ¥å‘Šçš„æœºåˆ¶ï¼Œè¿™å°±æ˜¯ ICMP çš„åŠŸèƒ½ã€‚</li><li><strong>IGMP</strong>ï¼ˆInternet Group Management Protocolï¼Œäº’è”ç½‘ç»„ç®¡ç†åè®®ï¼‰ï¼šå…è®¸åœ¨ Internet ä¸­çš„è®¡ç®—æœºå‚åŠ å¤šæ’­ï¼Œæ˜¯è®¡ç®—æœºç”¨åšå‘ç›¸é‚»å¤šè·¯ç”±å™¨æŠ¥å‘Šå¤šç›®ç»„æˆå‘˜çš„åè®®ã€‚</li><li><strong>ARP</strong>ï¼ˆAddress Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼‰ï¼šç”¨äºåŠ¨æ€åœ°å®Œæˆ IP åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ã€‚</li><li><strong>RARP</strong> ï¼ˆReverse Address Resolution Protocolï¼Œåå‘åœ°å€è§£æåè®®ï¼‰ï¼šç”¨äºåŠ¨æ€åœ°å®Œæˆç‰©ç†åœ°å€åˆ° IP åœ°å€çš„è½¬æ¢ã€‚</li></ul></div></details><h3 id="ç½‘ç»œè®¾å¤‡"><a href="#ç½‘ç»œè®¾å¤‡" class="headerlink" title="ç½‘ç»œè®¾å¤‡"></a>ç½‘ç»œè®¾å¤‡</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ç½‘ç»œäº¤æ¢</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>é€šè¿‡ä¸€å®šçš„è®¾å¤‡ï¼Œå¦‚äº¤æ¢æœºç­‰ï¼Œå°†ä¸åŒçš„ä¿¡å·æˆ–è€…ä¿¡å·è½¬æ¢ä¸ºå¯¹æ–¹å¯è¯†åˆ«çš„ä¿¡å·ç±»å‹ä»è€Œè¾¾åˆ°é€šä¿¡ç›®çš„çš„ä¸€ç§äº¤æ¢å½¢å¼ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">åˆ†ç±»</summary><div class="toggle-content"><ol><li>ç‰©ç†äº¤æ¢ï¼ˆå¦‚ç”µè¯ç½‘ï¼‰</li><li>é“¾è·¯å±‚äº¤æ¢ï¼ˆäºŒå±‚äº¤æ¢ï¼Œå¯¹ MAC åœ°å€è¿›è¡Œå˜æ›´ğŸ”¥ï¼‰</li><li>ç½‘ç»œå±‚äº¤æ¢ï¼ˆä¸‰å±‚äº¤æ¢ï¼Œå¯¹ IP åœ°å€è¿›è¡Œå˜æ›´ï¼‰</li><li>ä¼ è¾“å±‚äº¤æ¢ï¼ˆå››å±‚äº¤æ¢ï¼Œå¯¹ç«¯å£è¿›è¡Œå˜æ›´ï¼Œæ¯”è¾ƒå°‘è§ï¼‰</li><li>åº”ç”¨å±‚äº¤æ¢</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€äº’è”è®¾å¤‡</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>åœ¨ç½‘ç»œäº’è¿æ—¶ï¼Œå„èŠ‚ç‚¹ä¸€èˆ¬ä¸èƒ½ç®€å•åœ°ç›´æ¥ç›¸è¿ï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡ä¸€ä¸ªä¸­é—´è®¾å¤‡æ¥å®ç°ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">åˆ†ç±»</summary><div class="toggle-content"><ol><li>ä¸­ç»§å™¨ï¼ˆå®ç°ç‰©ç†å±‚åè®®è½¬æ¢ï¼Œåœ¨ç”µç¼†é—´è¿›è¡ŒäºŒè¿›åˆ¶ä¿¡å·ï¼‰</li><li>ç½‘æ¡¥ï¼ˆå®ç°ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚åè®®è½¬æ¢ï¼‰</li><li>è·¯ç”±å™¨ï¼ˆå®ç°ç½‘ç»œå±‚åè®®å’Œä»¥ä¸‹å„å±‚åè®®çš„è½¬æ¢ï¼‰ï¼ˆğŸ”¥åœ¨ç½‘ç»œå±‚ï¼‰</li><li>ç½‘å…³ï¼ˆæä¾›ä»æœ€åº•å±‚åˆ°ä¼ è¾“å±‚æˆ–ä»¥ä¸Šå„å±‚çš„åè®®è½¬æ¢ï¼‰</li><li>äº¤æ¢æœº</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€æ— çº¿ç½‘ç»œè®¾å¤‡</summary><div class="toggle-content"><ol><li>æ— çº¿ç½‘å¡</li><li>æ— çº¿ AP</li><li>æ— çº¿ç½‘æ¡¥</li><li>æ— çº¿è·¯ç”±å™¨</li></ol></div></details><h3 id="ç½‘ç»œæœåŠ¡å™¨"><a href="#ç½‘ç»œæœåŠ¡å™¨" class="headerlink" title="ç½‘ç»œæœåŠ¡å™¨"></a>ç½‘ç»œæœåŠ¡å™¨</h3><blockquote><p>æ— é‡è¦è€ƒç‚¹</p></blockquote><h3 id="ç½‘ç»œå­˜å‚¨æŠ€æœ¯"><a href="#ç½‘ç»œå­˜å‚¨æŠ€æœ¯" class="headerlink" title="ç½‘ç»œå­˜å‚¨æŠ€æœ¯"></a>ç½‘ç»œå­˜å‚¨æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">DASğŸ”¥</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>ç›´æ¥é™„åŠ å­˜å‚¨ï¼ˆDirect Attached Storageï¼‰ï¼ŒDAS å°†å­˜å‚¨è®¾å¤‡é€šè¿‡ SCSI ç”µç¼†ç›´æ¥è¿åˆ°æœåŠ¡å™¨ï¼Œå…¶æœ¬èº«æ˜¯ç¡¬ä»¶çš„å †å ï¼Œå­˜å‚¨ä¾èµ–äºæœåŠ¡å™¨ï¼Œä¸å¸¦æœ‰ä»»ä½•å­˜å‚¨æ“ä½œç³»ç»Ÿã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">ç¼ºç‚¹ğŸ”¥</summary><div class="toggle-content"><p>å½“å­˜å‚¨å®¹é‡å¢åŠ æ—¶ï¼ŒDAS æ–¹å¼å¾ˆéš¾æ‰©å±•ï¼Œè¿™å¯¹å­˜å‚¨å®¹é‡çš„å‡çº§æ˜¯ä¸€ä¸ªå·¨å¤§çš„ç“¶é¢ˆã€‚</p></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">NASğŸ”¥</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>ç½‘ç»œé™„åŠ å­˜å‚¨ï¼ˆNetwork Attached Storageï¼‰ï¼Œé€šè¿‡ç½‘ç»œæ¥å£ä¸ç½‘ç»œç›¸è¿ï¼Œç”±ç”¨æˆ·é€šè¿‡ç½‘ç»œè®¿é—®ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">å·¥ä½œåŸç†ğŸ”¥</summary><div class="toggle-content"><p>NAS æŠ€æœ¯æ”¯æŒå¤šç§ TCP&#x2F;IP ç½‘ç»œåè®®ï¼Œä¸»è¦æ˜¯ NFSï¼ˆç½‘ç»œæ–‡ä»¶å­˜å‚¨ç³»ç»Ÿï¼‰å’Œ CIFSï¼ˆé€šç”¨ Internet æ–‡ä»¶ï¼‰æ¥è¿›è¡Œæ–‡ä»¶è®¿é—®ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">ç‰¹ç‚¹ğŸ”¥</summary><div class="toggle-content"><ul><li>å³æ’å³ç”¨</li><li>å°æ–‡ä»¶çº§çš„å…±äº«å­˜å–</li></ul></div></details><p><img src="https://picbed.qunarzz.com/7bb699e595dcd42ffa6d6a6b9ad5e982.png" alt="NAS å­˜å‚¨ç³»ç»Ÿçš„ç»“æ„"></p></div></details><details class="toggle" ><summary class="toggle-button" style="">SANğŸ”¥</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>å­˜å‚¨åŒºåŸŸç½‘ç»œï¼ˆStorage Area Networkï¼‰ï¼Œé€šè¿‡ä¸“ç”¨äº¤æ¢æœºå°†ç£ç›˜é˜µåˆ—ä¸æœåŠ¡å™¨è¿æ¥èµ·æ¥çš„é«˜é€Ÿä¸“ç”¨å­ç½‘ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">æŠ€æœ¯åˆ†ç±»</summary><div class="toggle-content"><ol><li><strong>FC SAN</strong>ï¼šå…‰çº¤é€šé“çš„ä¸»è¦ç‰¹æ€§æœ‰ï¼šçƒ­æ’æ‹”æ€§ã€é«˜é€Ÿå¸¦å®½ã€è¿œç¨‹è¿æ¥æ•°é‡å¤§ã€‚</li><li><strong>IP SAN</strong>ï¼šåŸºäº IP ç½‘ç»œå®ç°æ•°æ®å—çº§åˆ«å­˜å‚¨æ–¹å¼çš„å­˜å‚¨ç½‘ç»œã€‚</li><li><strong>IB SAN</strong>ï¼šæ˜¯ä¸€ç§äº¤æ¢ç»“æ„ I&#x2F;O æŠ€æœ¯ï¼Œå…¶è®¾è®¡æ€è·¯æ˜¯é€šè¿‡ä¸€å¥—ä¸­å¿ƒæœºæ„åœ¨è¿œç¨‹å­˜å‚¨å™¨ã€ç½‘ç»œä»¥åŠæœåŠ¡å™¨ç­‰è®¾å¤‡ä¹‹é—´å»ºç«‹ä¸€ä¸ªå•ä¸€çš„è¿æ¥é“¾è·¯ï¼Œå¹¶ç”± IB äº¤æ¢æœºæ¥æŒ‡æŒ¥æµé‡ã€‚</li></ol></div></details><p><img src="https://picbed.qunarzz.com/61c61873ce628e907c850fe99eb9fe3a.png"></p></div></details><h3 id="ç½‘ç»œæ¥å…¥æŠ€æœ¯"><a href="#ç½‘ç»œæ¥å…¥æŠ€æœ¯" class="headerlink" title="ç½‘ç»œæ¥å…¥æŠ€æœ¯"></a>ç½‘ç»œæ¥å…¥æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€æœ‰çº¿æ¥å…¥</summary><div class="toggle-content"><ol><li>PSTN</li><li>ISDN</li><li>ADSL</li><li>FTTX+LAN</li><li>HFC<br>1.3.5ç½‘ç»œæ¥å…¥æŠ€æœ¯</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€æ— çº¿æ¥å…¥</summary><div class="toggle-content"><p>æ— çº¿ç½‘ç»œæ˜¯æŒ‡ä»¥æ— çº¿ç”µæ³¢ä½œä¸ºä¿¡æ¯ä¼ è¾“åª’ä»‹ğŸ”¥</p><p><strong>æŠ€æœ¯åˆ†ç±»ï¼š</strong></p><ol><li>GPRS</li><li>æ— çº¿æ¥å…¥</li><li>3G</li><li>4G</li><li>WIFI</li></ol></div></details><h3 id="ç½‘ç»œè§„åˆ’ä¸è®¾è®¡"><a href="#ç½‘ç»œè§„åˆ’ä¸è®¾è®¡" class="headerlink" title="ç½‘ç»œè§„åˆ’ä¸è®¾è®¡"></a>ç½‘ç»œè§„åˆ’ä¸è®¾è®¡</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ç½‘è·¯åˆ†å±‚è®¾è®¡ğŸ”¥</summary><div class="toggle-content"><ul><li><strong>æ ¸å¿ƒå±‚ğŸ”¥</strong>ï¼šä¸»è¦ç›®çš„é€šè¿‡<strong>é«˜é€Ÿçš„è½¬å‘é€šä¿¡</strong>ï¼Œæä¾›ä¼˜åŒ–ï¼Œå¯é çš„éª¨å¹²ä¼ è¾“ç»“æ„ï¼Œå› æ­¤ï¼Œæ ¸å¿ƒå±‚äº¤æ¢æœºåº”æ‹¥æœ‰æ›´é«˜çš„å¯é æ€§ï¼Œæ€§èƒ½å’Œååé‡ã€‚</li><li><strong>æ±‡èšå±‚ğŸ”¥</strong>ï¼šæ˜¯æ ¸å¿ƒå±‚ä¸æ¥å…¥å±‚çš„åˆ†ç•Œé¢ï¼Œå®Œæˆ<strong>ç½‘ç»œè®¿é—®ç­–ç•¥æ§åˆ¶ï¼Œæ•°æ®åŒ…å¤„ç†ã€è¿‡æ»¤ã€å¯»å€</strong>ã€ä»¥åŠå…¶ä»–çš„æ•°æ®å¤„ç†ä»»åŠ¡ã€‚</li><li><strong>æ¥å…¥å±‚ğŸ”¥</strong>ï¼šç›®çš„æ˜¯å…è®¸ç»ˆç«¯ç”¨æˆ·è¿æ¥åˆ°ç½‘ç»œï¼Œå› æ­¤ï¼Œæ¥å…¥å±‚äº¤æ¢æœºï¼ˆæˆ–è·¯ç”±å™¨ï¼‰æ¥å…¥å±‚å…·æœ‰<strong>ä½æˆ</strong>æœ¬å’Œ<strong>é«˜å¯†åº¦</strong>ç‰¹æ€§ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677082670910.png" alt="ç½‘ç»œè§„åˆ’åˆ†å±‚"></p></div></details><details class="toggle" ><summary class="toggle-button" style="">1ã€ç½‘ç»œè®¾è®¡å·¥ä½œ</summary><div class="toggle-content"><ol><li>ç½‘ç»œæ‹“æ‰‘ç»“æ„è®¾è®¡</li><li>ä¸»å¹²ç½‘ç»œè®¾è®¡ï¼ˆæ ¸å¿ƒå±‚ï¼‰è®¾è®¡</li><li>æ±‡èšå±‚å’Œæ¥å…¥å±‚è®¾è®¡</li><li>å¹¿åŸŸç½‘è¿æ¥ä¸è¿œç¨‹è®¿é—®è®¾è®¡</li><li>æ— çº¿ç½‘ç»œè®¾è®¡</li><li>ç½‘ç»œå®‰å…¨è®¾è®¡</li></ol><ul><li>ä¿¡æ¯å®‰å…¨çš„åŸºæœ¬è¦ç´ ğŸ”¥</li></ul><ol start="7"><li>è®¾å¤‡é€‰å‹</li></ol><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯å®‰å…¨çš„åŸºæœ¬è¦ç´ ğŸ”¥</summary><div class="toggle-content"><ol><li><strong>æœºå¯†æ€§ğŸ”¥</strong>ï¼šç¡®ä¿ä¿¡æ¯ä¸æš´éœ²ç»™æœªæˆæƒçš„å®ä½“æˆ–è¿›ç¨‹</li><li><strong>å®Œæ•´æ€§ğŸ”¥</strong>ï¼šåªæœ‰å¾—åˆ°å…è®¸çš„äººæ‰èƒ½ä¿®æ”¹æ•°æ®ï¼Œå¹¶ä¸”èƒ½å¤Ÿåˆ¤åˆ«å‡ºæ¥æ•°æ®æ˜¯å¦å·²è¢«ç¯¡æ”¹ã€‚</li><li><strong>å¯ç”¨æ€§ğŸ”¥</strong>ï¼šå¾—åˆ°æˆæƒçš„å®ä½“åœ¨éœ€è¦çš„æ—¶å€™å¯è®¿é—®æ•°æ®ï¼Œå³æ”»å‡»è€…ä¸èƒ½å ç”¨æ‰€æœ‰çš„èµ„æºè€Œé˜»ç¢æˆæƒè€…çš„å·¥ä½œ</li><li><strong>å¯æ§æ€§ğŸ”¥</strong>ï¼šå¯ä»¥æ§åˆ¶æˆæƒèŒƒå›´å†…çš„ä¿¡æ¯æµå‘åŠè¡Œä¸ºæ–¹å¼</li><li><strong>å¯å®¡æŸ¥æ€§ğŸ”¥</strong>ï¼šå¯¹å‡ºç°çš„ç½‘ç»œå®‰å…¨é—®é¢˜æä¾›è°ƒæŸ¥çš„ä¾æ®å’Œæ‰‹æ®µ</li></ol></div></details></div></details><h3 id="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"><a href="#æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"></a>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</h3><details class="toggle" ><summary class="toggle-button" style="">å…³ç³»å‹æ•°æ®åº“</summary><div class="toggle-content"><ul><li><strong>Oracle</strong></li><li><strong>MySQL</strong></li><li><strong>SqlServer</strong></li><li>DB2</li><li>PostgreSQL</li><li>SQLite</li><li>Access</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">éå…³ç³»å‹æ•°æ®åº“</summary><div class="toggle-content"><ul><li><strong>MongoDB</strong></li><li>Redis</li><li>HBase</li><li>Neo4j</li><li>Elasticsearch</li></ul></div></details><h3 id="æ•°æ®ä»“åº“æŠ€æœ¯"><a href="#æ•°æ®ä»“åº“æŠ€æœ¯" class="headerlink" title="æ•°æ®ä»“åº“æŠ€æœ¯"></a>æ•°æ®ä»“åº“æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">ç‰¹ç‚¹ğŸ”¥</summary><div class="toggle-content"><p>æ•°æ®ä»“åº“æ˜¯ä¸€ä¸ªé¢å‘ä¸»é¢˜çš„ï¼Œé›†æˆçš„ï¼Œéæ˜“å¤±çš„ï¼Œä¸”éšæ—¶é—´å˜åŒ–çš„æ•°æ®é›†åˆï¼Œç”¨äºæ”¯æŒç®¡ç†å†³ç­–ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">ä½“ç³»ç»“æ„</summary><div class="toggle-content"><ol><li><strong>æ•°æ®æº</strong>ï¼šæ˜¯æ•°æ®ä»“åº“ç³»ç»Ÿçš„åŸºç¡€ï¼Œæ˜¯æ•´ä¸ªç³»ç»Ÿæ•°æ®æºæ³‰ã€‚</li><li><strong>æ•°æ®çš„å­˜å‚¨ä¸ç®¡ç†</strong>ï¼šæ˜¯æ•´ä¸ªç³»ç»Ÿæ•°æ®ä»“åº“ç³»ç»Ÿçš„æ ¸å¿ƒã€‚</li><li><strong>OLAPï¼ˆOnline Analysis Processorï¼Œè”æœºåˆ†æå¤„ç†ï¼‰æœåŠ¡å™¨</strong>ï¼šå¯¹åˆ†æéœ€è¦çš„æ•°æ®è¿›è¡Œæœ‰æ•ˆé›†æˆï¼ŒæŒ‰å¤šç»´æ¨¡å‹äºˆä»¥ç»„ç»‡ï¼Œä»¥ä¾¿è¿›è¡Œå¤šè§’åº¦ã€å¤šå±‚æ¬¡çš„åˆ†æï¼Œå¹¶å‘ç°è¶‹åŠ¿ã€‚</li><li><strong>å‰ç«¯å·¥å…·</strong>ï¼šä¸»è¦åŒ…æ‹¬å„ç§æŸ¥è¯¢å·¥å…·ï¼ŒæŠ¥è¡¨å·¥å…·ï¼Œåˆ†æå·¥å…·ï¼Œæ•°æ®æŒ–æ˜å·¥å…·ä»¥åŠå„ç§åŸºäºæ•°æ®ä»“åº“æˆ–æ•°æ®é›†çš„åº”ç”¨å¼€å‘å·¥å…·ã€‚å…¶ä¸­æ•°æ®åˆ†æå·¥å…·ä¸»è¦é’ˆå¯¹OLAPï¼ŒæŠ¥è¡¨å·¥å…·ï¼Œæ•°æ®æŒ–æ˜å·¥å…·ä¸»è¦é’ˆå¯¹æ•°æ®ä»“åº“ã€‚</li></ol></div></details><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677083599886.png" alt="æ•°æ®ä»“åº“ä½“ç³»ç»“æ„"></p><h3 id="ä¸­é—´ä»¶æŠ€æœ¯"><a href="#ä¸­é—´ä»¶æŠ€æœ¯" class="headerlink" title="ä¸­é—´ä»¶æŠ€æœ¯"></a>ä¸­é—´ä»¶æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€åˆ†ç±»</summary><div class="toggle-content"></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ä¸­é—´ä»¶çš„é€‰æ‹©</summary><div class="toggle-content"></div></details><h3 id="é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡"><a href="#é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡" class="headerlink" title="é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡"></a>é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡</h3><h2 id="è½¯ä»¶å·¥ç¨‹"><a href="#è½¯ä»¶å·¥ç¨‹" class="headerlink" title="è½¯ä»¶å·¥ç¨‹"></a>è½¯ä»¶å·¥ç¨‹</h2><h2 id="ç»ƒä¸€ç»ƒ"><a href="#ç»ƒä¸€ç»ƒ" class="headerlink" title="ç»ƒä¸€ç»ƒ"></a>ç»ƒä¸€ç»ƒ</h2><p>1ã€å¯¹è±¡å’Œç±»æ˜¯é¢å‘å¯¹è±¡ä¸­ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå…³äºå¯¹è±¡å’Œç±»ï¼Œä¸æ­£ç¡®çš„æ˜¯ï¼ˆï¼‰ã€‚ <em>19å¹´11æœˆç¬¬1é¢˜</em></p><p>Aã€å¯¹è±¡æ˜¯ç±»çš„å®ä¾‹<br>Bã€ç±»æ˜¯å¯¹è±¡çš„æŠ½è±¡<br>Cã€ä¸€ä¸ªç±»åªèƒ½äº§ç”Ÿä¸€ä¸ªå¯¹è±¡<br>Dã€ç±»ä¸­åŒ…å«æ–¹æ³•å’Œå±æ€§</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘ä¸€ä¸ªç±»å¯ä»¥äº§ç”Ÿå¤šä¸ªå¯¹è±¡</p></div></div><hr><p>2ã€TCP&#x2F;IP æ¨¡å‹ä¸­ï¼ŒTelnet å±äºï¼ˆï¼‰åè®®ã€‚ <em>19å¹´5æœˆ19é¢˜</em></p><p>Aã€æ¥å£å±‚<br>Bã€ç½‘ç»œå±‚<br>Cã€ä¼ è¾“å±‚<br>Dã€åº”ç”¨å±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘Telnet æ˜¯åº”ç”¨å±‚åè®®ã€‚</p></div></div><hr><p>3ã€åœ¨ä¿¡æ¯ç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¼€å‘é˜¶æ®µä¸åŒ…æ‹¬ï¼ˆï¼‰ã€‚ <em>19å¹´5æœˆ3é¢˜</em></p><p>Aã€ç³»ç»Ÿè§„åˆ’<br>Bã€ç³»ç»Ÿè®¾è®¡<br>Cã€ç³»ç»Ÿåˆ†æ<br>Dã€ç³»ç»Ÿå®æ–½</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘ç³»ç»Ÿè§„åˆ’æ˜¯ç«‹é¡¹é˜¶æ®µçš„ï¼Œé«˜çº§æ•™æç¬¬ä¸‰ç‰ˆ P10ã€‚</p></div></div><hr><p>4ã€ï¼ˆï¼‰çš„è®¾è®¡æ–¹æ³•æ»¡è¶³äº†ä¿¡æ¯ç³»ç»Ÿå¿«é€Ÿå“åº”éœ€æ±‚ä¸ç¯å¢ƒçš„å˜åŒ–ï¼Œç»„ç»‡å†…éƒ¨ã€ç»„ç»‡ä¹‹é—´å„ç§åº”ç”¨ç³»ç»Ÿçš„äº’ç›¸é€šä¿¡è¦æ±‚ï¼Œæé«˜äº†ç³»ç»Ÿå¯å¤ç”¨æ€§ã€ä¿¡æ¯èµ„æºå…±äº«å’Œç³»ç»Ÿä¹‹é—´çš„äº’æ“ä½œæ€§ã€‚ <em>18å¹´11æœˆ28é¢˜</em></p><p>Aã€é¢å‘å¯¹è±¡<br>Bã€é¢å‘è¿‡ç¨‹<br>Cã€åŸºäºæ„ä»¶<br>Dã€é¢å‘æœåŠ¡</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘ä»åº”ç”¨çš„è§’åº¦æ¥çœ‹ï¼Œç»„ç»‡å†…éƒ¨ã€ç»„ç»‡ä¹‹é—´å„ç§åº”ç”¨ç³»ç»Ÿçš„äº’ç›¸é€šä¿¡å’Œäº’æ“ä½œæ€§ç›´æ¥å½±å“ç€ç»„ç»‡<br>å¯¹ä¿¡æ¯çš„æŒæ¡ç¨‹åº¦å’Œå¤„ç†é€Ÿåº¦ã€‚å¦‚ä½•ä½¿ä¿¡æ¯ç³»ç»Ÿå¿«é€Ÿå“åº”éœ€æ±‚ä¸ç¯å¢ƒå˜åŒ–ï¼Œæé«˜ç³»ç»Ÿå¯å¤ç”¨æ€§ã€ä¿¡æ¯èµ„<br>æºå…±äº«å’Œç³»ç»Ÿä¹‹é—´çš„äº’æ“ä½œæ€§ï¼Œæˆä¸ºå½±å“ä¿¡æ¯åŒ–å»ºè®¾æ•ˆç‡çš„å…³é”®é—®é¢˜ï¼Œè€ŒSOçš„æ€ç»´æ–¹å¼æ°å¥½æ»¡è¶³äº†è¿™<br>ç§éœ€æ±‚ã€‚</p></div></div><hr><p>5ã€åœ¨OSIä¸ƒå±‚åè®®ä¸­ï¼ŒUDPæ˜¯ï¼ˆï¼‰çš„åè®®ã€‚ <em>18å¹´11æœˆç¬¬19é¢˜</em></p><p>Aã€ç½‘ç»œå±‚<br>Bã€ä¼ è¾“å±‚<br>Cã€ä¼šè¯å±‚<br>Dã€åº”ç”¨å±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘(4)ä¼ è¾“å±‚ï¼šä¸»è¦è´Ÿè´£ç¡®ä¿æ•°æ®å¯é ã€é¡ºåºã€æ— é”™åœ°ä»Aç‚¹ä¼ è¾“åˆ°Bç‚¹ã€‚å¦‚æä¾›å»ºç«‹ã€ç»´æŠ¤ç›¸æ‹†<br>é™¤ä¼ é€è¿æ¥çš„åŠŸèƒ½ï¼›é€‰æ‹©ç½‘ç»œå±‚æä¾›æœ€åˆé€‚çš„æœåŠ¡ï¼›åœ¨ç³»ç»Ÿä¹‹é—´æä¾›å¯é çš„é€æ˜çš„æ•°æ®ä¼ é€ï¼Œæä¾›ç«¯åˆ°<br>ç«¯çš„é”™è¯¯æ¢å¤å’Œæµé‡æ§åˆ¶ã€‚åœ¨TCP&#x2F;IPåè®®ä¸­ï¼Œå…·ä½“åè®®æœ‰TCPã€UDPã€SPXã€‚</p></div></div><hr><p>6ã€ï¼ˆï¼‰çš„ä»»åŠ¡æ˜¯ï¼šæ ¹æ®ç³»ç»Ÿè¯´æ˜ä¹¦è§„å®šçš„åŠŸèƒ½è¦æ±‚ï¼Œè€ƒè™‘å®é™…æ¡ä»¶ï¼Œå…·ä½“è®¾è®¡å®ç°é€»è¾‘æ¨¡å‹çš„æŠ€æœ¯æ–¹<br>æ¡ˆã€‚ <em>18å¹´11æœˆç¬¬3é¢˜</em></p><p>Aã€ç³»ç»Ÿè§„åˆ’é˜¶æ®µ<br>Bã€ç³»ç»Ÿåˆ†æé˜¶æ®µ<br>Cã€ç³»ç»Ÿè®¾è®¡é˜¶æ®µ<br>Dã€ç³»ç»Ÿå®æ–½é˜¶æ®µ</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘ç®€å•åœ°è¯´ï¼Œç³»ç»Ÿåˆ†æé˜¶æ®µçš„ä»»åŠ¡æ˜¯å›ç­”ç³»ç»Ÿâ€œåšä»€ä¹ˆâ€çš„é—®é¢˜ï¼Œè€Œç³»ç»Ÿè®¾è®¡é˜¶æ®µè¦å›ç­”çš„é—®é¢˜<br>æ˜¯â€œæ€ä¹ˆåšâ€ã€‚è¯¥é˜¶æ®µçš„ä»»åŠ¡æ˜¯æ ¹æ®ç³»ç»Ÿè¯´æ˜ä¹¦ä¸­è§„å®šçš„åŠŸèƒ½è¦æ±‚ï¼Œè€ƒè™‘å®é™…æ¡ä»¶ï¼Œå…·ä½“è®¾è®¡å®ç°é€»è¾‘<br>æ¨¡å‹çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯è®¾è®¡æ–°ç³»ç»Ÿçš„ç‰©ç†æ¨¡å‹ã€‚è¿™ä¸ªé˜¶æ®µåˆç§°ä¸ºç‰©ç†è®¾è®¡é˜¶æ®µï¼Œå¯åˆ†ä¸ºæ€»ä½“è®¾è®¡ï¼ˆæ¦‚<br>è¦è®¾è®¡ï¼‰å’Œè¯¦ç»†è®¾è®¡ä¸¤ä¸ªå­é˜¶æ®µã€‚è¿™ä¸ªé˜¶æ®µçš„æŠ€æœ¯æ–‡æ¡£æ˜¯ç³»ç»Ÿè®¾è®¡è¯´æ˜ä¹¦ã€‚</p></div></div><hr><p>7ã€IEEE 802 è§„èŒƒå®šä¹‰äº†ç½‘å¡å¦‚ä½•è®¿é—®ä¼ è¾“ä»‹è´¨ï¼Œä»¥åŠå¦‚ä½•åœ¨ä¼ è¾“ä»‹è´¨ä¸Šä¼ è¾“æ•°æ®çš„æ–¹æ³•ã€‚å…¶ä¸­ï¼Œï¼ˆï¼‰<br>æ˜¯é‡è¦çš„å±€åŸŸç½‘åè®®ã€‚ <em>18å¹´5æœˆç¬¬11é¢˜</em></p><p>Aã€IEEE 802.1<br>Bã€IEEE 802.3<br>Cã€IEEE 802.6<br>Dã€IEEE 802.11</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘ IEEE 802.3 ï¼šä»¥å¤ªç½‘ä»‹è´¨è®¿é—®æ§åˆ¶åè®® ï¼ˆCSMA&#x2F;CDï¼‰åŠç‰©ç†å±‚æŠ€æœ¯è§„èŒƒ [2]ã€‚<br>IEEE 802.11ï¼šæ— çº¿å±€åŸŸç½‘ï¼ˆWLANï¼‰çš„ä»‹è´¨è®¿é—®æ§åˆ¶åè®®åŠç‰©ç†å±‚æŠ€æœ¯è§„èŒƒã€‚</p></div></div><hr><p>8ã€åœ¨å¼€æ”¾ç³»ç»Ÿäº’è¿å‚è€ƒæ¨¡å‹(OSI)ä¸­ï¼Œï¼ˆ ï¼‰çš„ä¸»è¦åŠŸèƒ½æ˜¯å°†ç½‘ç»œåœ°å€ç¿»è¯‘æˆå¯¹åº”çš„ç‰©ç†åœ°å€ï¼Œå¹¶å†³å®šå¦‚<br>ä½•å°†æ•°æ®ä»å‘é€æ–¹ç»è·¯ç”±é€è¾¾åˆ°æ¥æ”¶æ–¹ã€‚ <em>18å¹´5æœˆç¬¬20é¢˜</em></p><p>Aã€æ•°æ®é“¾è·¯å±‚<br>Bã€ç‰©ç†å±‚<br>Cã€ç½‘ç»œå±‚<br>Dã€ä¼ è¾“å±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘ç½‘ç»œå±‚ä¸­çš„åè®®ä¸»è¦æœ‰IPã€ICMPã€IGMPã€ARPã€å’ŒRARPç­‰ã€‚ ï¼ˆ1ï¼‰IPï¼Œæ‰€æä¾›çš„æœåŠ¡æ˜¯æ— è¿æ¥å’Œä¸å¯é çš„ã€‚<br>ï¼ˆ2ï¼‰ICMP(Internet Control Message Protocolï¼Œç½‘ç»œæ§åˆ¶æŠ¥æ–‡åè®®)ï¼Œä¸€ç§ä¸“é—¨ç”¨äºå‘é€é”™æŠ¥æ–‡çš„<br>åè®®ï¼Œå³ä¼ é€çš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€é‡å¤ã€å»¶è¿Ÿã€æˆ–ä¹±åºä¼ é€’ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§å°½é‡é¿å…å·®é”™å¹¶èƒ½å‘ç”Ÿå·®é”™æ—¶<br>æŠ¥å‘Šçš„æœºåˆ¶ï¼Œè¿™å°±æ˜¯ICMPçš„åŠŸèƒ½ã€‚<br>ï¼ˆ3ï¼‰IGMP(Internet Group Management Protocolï¼Œç½‘é™…ç»„ç®¡ç†åè®®)å…è®¸åœ¨Internetä¸­çš„è®¡ç®—æœºå‚<br>åŠ å¤šæ’­ï¼Œæ˜¯è®¡ç®—æœºç”¨åšå‘ç›¸é‚»å¤šè·¯ç”±å™¨æŠ¥å‘Šå¤šç›®ç»„æˆå‘˜çš„åè®®ã€‚<br>ï¼ˆ4ï¼‰ARP(Address Resolution Protocolï¼Œåœ°å€è§£æåè®®) ç”¨äºåŠ¨æ€åœ°å®ŒæˆIPåˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ã€‚<br>ï¼ˆ5ï¼‰RARP(Reverse Address Resolution Protocolï¼Œåå‘åœ°å€è§£æåè®®)ç”¨äºåŠ¨æ€å®Œæˆç‰©ç†åœ°å€å‘IP<br>åœ°å€çš„è½¬æ¢ã€‚</p></div></div><hr><p>9ã€ TCP&#x2F;IPæ˜¯internetçš„æ ¸å¿ƒåè®®ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡ç”¨åº”ç”¨å±‚åè®®åˆ©ç”¨ç½‘ç»œå®Œæˆæ•°æ®äº¤äº’çš„ä»»åŠ¡ï¼Œå…¶ä¸­ï¼Œ<br>ï¼ˆï¼‰æ˜¯ç”¨æ¥åœ¨å®¢æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç®€å•æ–‡ä»¶çš„ä¼ è¾“çš„åè®®ï¼Œæä¾›ä¸å¤æ‚ï¼Œå¼€é”€ä¸å¤§çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚ <em>18å¹´5æœˆç¬¬19é¢˜</em></p><p>Aã€FTP<br>Bã€TFTP<br>Cã€HTTP<br>Dã€SMTP</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘TFTPï¼ˆTrivial File Transfer Protocol,ç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰æ˜¯TCP&#x2F;IPåè®®æ—ä¸­çš„ä¸€ä¸ªç”¨æ¥åœ¨å®¢<br>æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç®€å•æ–‡ä»¶ä¼ è¾“çš„åè®®ï¼Œæä¾›ä¸å¤æ‚ã€å¼€é”€ä¸å¤§çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚ç«¯å£å·ä¸º69ã€‚</p></div></div><hr><p>10ã€æŸå¿«æ¶ˆå“è¿é”ä¼ä¸šå§”æ‰˜ç§‘æŠ€å…¬å¸Aå¼€å‘éƒ¨ç½²ç”µå­å•†åŠ¡å¹³å°ï¼ŒAå…¬å¸æ ¹æ®ç³»ç»Ÿè®¾è®¡ä»»åŠ¡ä¹¦æ‰€ç¡®å®šçš„èŒƒ<br>å›´ï¼Œç¡®å®šç³»ç»Ÿçš„åŸºæœ¬ç›®æ ‡å’Œé€»è¾‘åŠŸèƒ½è¦æ±‚ï¼Œæå‡ºæ–°ç³»ç»Ÿçš„é€»è¾‘æ¨¡å‹ï¼Œè¿™å±äºä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸä¸­ï¼ˆï¼‰é˜¶<br>æ®µçš„å·¥ä½œã€‚ <em>18å¹´5æœˆç¬¬3é¢˜</em></p><p>Aã€ç³»ç»Ÿè§„åˆ’<br>Bã€ç³»ç»Ÿåˆ†æ<br>Cã€ç³»ç»Ÿè®¾è®¡<br>Dã€ç³»ç»Ÿå®æ–½</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘ç³»ç»Ÿåˆ†æé˜¶æ®µçš„ä»»åŠ¡æ˜¯æ ¹æ®ç³»ç»Ÿè®¾è®¡ä»»åŠ¡ä¹¦æ‰€ç¡®å®šçš„èŒƒå›´ï¼Œå¯¹ç°è¡Œç³»ç»Ÿè¿›è¡Œè¯¦ç»†è°ƒæŸ¥ï¼Œæè¿°ç°<br>è¡Œç³»ç»Ÿçš„ä¸šåŠ¡æµç¨‹ï¼ŒæŒ‡å‡ºç°è¡Œç³»ç»Ÿçš„å±€é™æ€§å’Œä¸è¶³ä¹‹å¤„ï¼Œç¡®å®šæ–°ç³»ç»Ÿçš„åŸºæœ¬ç›®æ ‡å’Œé€»è¾‘åŠŸèƒ½è¦æ±‚ï¼Œå³æ<br>å‡ºæ–°ç³»ç»Ÿçš„é€»è¾‘æ¨¡å‹ã€‚</p></div></div><hr><p>11ã€åœ¨è½¯ä»¶éœ€æ±‚åˆ†æä¸­ï¼Œï¼ˆï¼‰åˆ†åˆ«ç”¨æ¥è¡¨ç¤ºåŠŸèƒ½æ¨¡å‹å’Œè¡Œä¸ºæ¨¡å‹ã€‚ <em>19å¹´11æœˆç¬¬7é¢˜</em></p><p>Aã€æ•°æ®æµå›¾ã€çŠ¶æ€è½¬æ¢å›¾<br>Bã€çŠ¶æ€è½¬æ¢å›¾ã€E-Rå›¾<br>Cã€çŠ¶æ€è½¬æ¢å›¾ã€æ•°æ®æµå›¾<br>Dã€E-Rå›¾ã€çŠ¶æ€è½¬æ¢å›¾</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘E-Rå›¾æ˜¯ç”¨æ¥è¡¨ç¤ºæ•°æ®æ¨¡å‹çš„ï¼Œè¡Œä¸ºä¸€èˆ¬ä¸çŠ¶æ€æœ‰å…³ã€‚</p></div></div><hr><p>12ã€ä¸­é—´ä»¶æ˜¯ä¸€ç§ç‹¬ç«‹çš„ç³»ç»Ÿè½¯ä»¶æˆ–æœåŠ¡ç¨‹åºï¼Œï¼ˆï¼‰ä¸å±äºä¸­é—´ä»¶ã€‚ <em>19å¹´11æœˆç¬¬2é¢˜</em><br>Aã€Tomcat<br>Bã€Websphere<br>Cã€ODBC<br>Dã€Python</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘Python å±äºå¼€å‘è¯­è¨€</p></div></div><hr><p>13ã€é¡¹ç›®æˆå‘˜å¼ å·¥ç»˜åˆ¶äº†å››å¼ ç±»å›¾ï¼Œå…¶ä¸­ä¸æ­£ç¡®çš„æ˜¯ï¼ˆï¼‰ã€‚ <em>19å¹´5æœˆç¬¬27é¢˜</em></p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677084628615.png"></p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€ç­”æ¡ˆã€‘<strong>B</strong></p></div></div><hr><p>14ã€åœ¨ UML çš„é¡ºåºå›¾ä¸­ï¼Œé€šå¸¸ç”±å·¦å‘å³åˆ†å±‚æ’åˆ—å„ä¸ªå¯¹è±¡ï¼Œæ­£ç¡®çš„æ’åˆ—æ–¹æ³•æ˜¯ï¼ˆï¼‰ã€‚<em>19å¹´5æœˆç¬¬26é¢˜</em></p><p>Aã€æ‰§è¡Œè€…è§’è‰²ã€æ§åˆ¶ç±»ã€ç”¨æˆ·æ¥å£ã€ä¸šåŠ¡å±‚ã€åå°æ•°æ®åº“<br>Bã€æ‰§è¡Œè€…è§’è‰²ã€ç”¨æˆ·æ¥å£ã€æ§åˆ¶ç±»ã€ä¸šåŠ¡å±‚ã€åå°æ•°æ®åº“<br>Cã€æ‰§è¡Œè€…è§’è‰²ã€æ§åˆ¶ç±»ã€ç”¨æˆ·æ¥å£ã€åå°æ•°æ®åº“ã€ä¸šåŠ¡å±‚<br>Dã€æ‰§è¡Œè€…è§’è‰²ã€ç”¨æˆ·æ¥å£ã€ä¸šåŠ¡å±‚ã€æ§åˆ¶ç±»ã€åå°æ•°æ®åº“</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong></p></div></div><hr><p>15ã€æ‰§è¡Œè€…ä¸ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»æ˜¯ï¼ˆï¼‰ã€‚ <em>19å¹´5æœˆç¬¬25é¢˜</em></p><p>Aã€åŒ…å«å…³ç³»<br>Bã€æ³›åŒ–å…³ç³»<br>Cã€å…³è”å…³ç³»<br>Dã€æ‰©å±•å…³ç³»</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘C<br>ã€è§£æã€‘åœ¨ç”¨ä¾‹å›¾ä¸­æ‰§è¡Œè€…ä¸ç”¨ä¾‹ä¹‹é—´æ˜¯å…³è”å…³ç³»ã€‚</p></div></div><hr><p>16ã€UMLçš„ï¼ˆï¼‰æè¿°äº†ä¸€ä¸ªç‰¹å®šå¯¹è±¡çš„æ‰€æœ‰å¯èƒ½çŠ¶æ€ä»¥åŠç”±äºå„ç§äº‹ä»¶çš„å‘ç”Ÿè€Œå¼•èµ·çš„çŠ¶æ€ä¹‹é—´çš„è½¬ç§»ã€‚ <em>18å¹´11æœˆç¬¬27é¢˜</em></p><p>Aã€æ§åˆ¶å›¾<br>Bã€çŠ¶æ€å›¾<br>Cã€åä½œå›¾<br>Dã€åºåˆ—å›¾</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘çŠ¶æ€å›¾ï¼ˆstate diagramï¼‰ï¼šçŠ¶æ€å›¾æè¿°ä¸€ä¸ªçŠ¶æ€æœºï¼Œå®ƒç”±çŠ¶æ€ã€è½¬ç§»ã€äº‹ä»¶å’Œæ´»åŠ¨ç»„æˆã€‚çŠ¶æ€å›¾ç»™å‡ºäº†å¯¹è±¡çš„åŠ¨æ€è§†å›¾ã€‚å®ƒå¯¹äºæ¥å£ã€ç±»æˆ–åä½œçš„è¡Œä¸ºå»ºæ¨¡å°¤ä¸ºé‡è¦ï¼Œè€Œä¸”å®ƒå¼ºè°ƒäº‹ä»¶å¯¼è‡´çš„å¯¹è±¡è¡Œä¸ºï¼Œè¿™éå¸¸æœ‰åŠ©äºå¯¹ååº”å¼ç³»ç»Ÿå»ºæ¨¡ã€‚</p></div></div><hr><p>17ã€æŸä¼ä¸šè¦å»ºè®¾ä¿¡æ¯ç³»ç»Ÿå¹³å°ï¼Œè¦æ±‚ç³»ç»Ÿå¯ç”¨æ€§è¾¾åˆ°99.99%ã€‚ç³»ç»ŸAå¹³å‡æ— æ•…éšœæ—¶é—´10000å°æ—¶ï¼Œæ•…<br>éšœå¹³å‡ç»´ä¿®æ—¶é—´1å°æ—¶ï¼šç³»ç»ŸBå¹³å‡æ— æ•…éšœæ—¶é—´14000å°æ—¶ï¼Œæ•…éšœå¹³å‡ç»´ä¿®æ—¶é—´1.5å°æ—¶ã€‚ä»¥ä¸‹è¯´æ³•ä¸­ï¼Œ<br>æ­£ç¡®çš„æ˜¯ï¼ˆï¼‰ã€‚ <em>18å¹´11æœˆç¬¬22é¢˜</em></p><p>Aã€åªæœ‰ç³»ç»ŸAç¬¦åˆå¯ç”¨æ€§è¦æ±‚<br>Bã€ç³»ç»ŸAå’Œç³»ç»ŸBå‡ç¬¦åˆå¯ç”¨æ€§è¦æ±‚<br>Cã€åªæœ‰ç³»ç»ŸBç¬¦åˆå¯ç”¨æ€§è¦æ±‚<br>Dã€ç³»ç»ŸAå’Œç³»ç»ŸBéƒ½ä¸ç¬¦åˆå¯ç”¨æ€§è¦æ±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘è®¡ç®—æœºç³»ç»Ÿçš„å¯ç”¨æ€§ç”¨å¹³å‡æ— æ•…éšœæ—¶é—´(MTTF)æ¥åº¦é‡ï¼Œå³è®¡ç®—æœºç³»ç»Ÿå¹³å‡èƒ½å¤Ÿæ­£å¸¸è¿è¡Œå¤šé•¿<br>æ—¶é—´ï¼Œæ‰å‘ç”Ÿä¸€æ¬¡æ•…éšœã€‚ç³»ç»Ÿçš„å¯ç”¨æ€§è¶Šé«˜ï¼Œå¹³å‡æ— æ•…éšœæ—¶é—´è¶Šé•¿ã€‚å¯ç»´æŠ¤æ€§ç”¨å¹³å‡ç»´ä¿®æ—¶é—´(MTTR)<br>æ¥åº¦é‡ï¼Œå³ç³»ç»Ÿå‘ç”Ÿæ•…éšœåç»´ä¿®å’Œé‡æ–°æ¢å¤æ­£å¸¸è¿è¡Œå¹³å‡èŠ±è´¹çš„æ—¶é—´ã€‚ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§è¶Šå¥½ï¼Œå¹³å‡ç»´ä¿®<br>æ—¶é—´è¶ŠçŸ­ã€‚è®¡ç®—æœºç³»ç»Ÿçš„å¯ç”¨æ€§å®šä¹‰ä¸ºï¼šMTTF&#x2F; (MTTF+MTTR) ,kl00%ã€‚ç”±æ­¤å¯è§ï¼Œè®¡ç®—æœºç³»ç»Ÿçš„å¯<br>ç”¨æ€§å®šä¹‰ä¸ºç³»ç»Ÿä¿æŒæ­£å¸¸è¿è¡Œæ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚æ‰€ä»¥ï¼Œæƒ³è¦æé«˜ä¸€ä¸ªç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œè¦ä¹ˆæå‡ç³»ç»Ÿçš„å•æ¬¡<br>æ­£å¸¸å·¥ä½œçš„æ—¶é•¿ï¼Œè¦ä¹ˆå‡å°‘æ•…éšœä¿®å¤æ—¶é—´ã€‚<br>Açš„å¯ç”¨æ€§&#x3D;10000&#x2F;10001&#x3D;99.99%<br>Bçš„å¯ç”¨æ€§&#x3D;14000&#x2F;14001.5 &#x3D; 99.98%<br>åªæœ‰ç³»ç»ŸAè´Ÿè·å¯ç”¨æ€§è¦æ±‚</p></div></div><hr><p>18ã€å…³äºç½‘ç»œå­˜å‚¨æŠ€æœ¯çš„æè¿°ï¼Œæ­£ç¡®çš„æ˜¯ï¼šï¼ˆï¼‰ã€‚<br>Aã€DAS æ˜¯ä¸€ç§æ˜“äºæ‰©å±•çš„å­˜å‚¨æŠ€æœ¯<br>Bã€NAS ç³»ç»Ÿä¸ DAS ç³»ç»Ÿç›¸åŒï¼Œéƒ½æ²¡æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿ<br>Cã€NAS å¯ä»¥ä½¿ç”¨ TCP&#x2F;IP ä½œä¸ºå…¶ç½‘ç»œä¼ è¾“åè®®<br>Dã€SAN é‡‡ç”¨äº†æ–‡ä»¶å…±äº«å­˜å–æ–¹å¼</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘NAS æŠ€æœ¯æ”¯æŒå¤šç§ TCP&#x2F;IP ç½‘ç»œåè®®ï¼Œä¸»è¦æ˜¯NFS (Net File Systemï¼Œç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ)å’Œ CIFS<br>ï¼ˆCommon Internet File Systemï¼Œé€šç”¨ Internet æ–‡ä»¶ç³»ç»Ÿï¼‰æ¥è¿›è¡Œæ–‡ä»¶è®¿é—®ï¼Œæ‰€ä»¥ NAS çš„æ€§èƒ½ç‰¹ç‚¹æ˜¯<br>è¿›è¡Œå°æ–‡ä»¶çº§çš„å…±äº«å­˜å–ã€‚åœ¨å…·ä½“ä½¿ç”¨æ—¶ï¼ŒNASè®¾å¤‡é€šå¸¸é…ç½®ä¸ºæ–‡ä»¶æœåŠ¡å™¨ï¼Œé€šè¿‡ä½¿ç”¨åŸºäº Web çš„ç®¡<br>ç†ç•Œé¢æ¥å®ç°ç³»ç»Ÿèµ„æºçš„é…ç½®ã€ç”¨æˆ·é…ç½®ç®¡ç†å’Œç”¨æˆ·è®¿é—®ç™»å½•ç­‰ã€‚</p></div></div><hr><p>19ã€è½¯ä»¶éœ€æ±‚æ˜¯å¤šå±‚æ¬¡çš„ï¼ŒåŒ…æ‹¬ä¸šåŠ¡éœ€æ±‚ã€ç”¨æˆ·éœ€æ±‚ã€ç³»ç»Ÿéœ€æ±‚ï¼Œå…¶ä¸­ä¸šåŠ¡éœ€æ±‚ï¼ˆï¼‰ã€‚ <em>18å¹´11æœˆç¬¬7é¢˜</em></p><p>Aã€ååº”äº†ä¼ä¸šæˆ–å®¢æˆ·å¯¹ç³»ç»Ÿé«˜å±‚æ¬¡çš„ç›®æ ‡éœ€æ±‚<br>Bã€æè¿°äº†ç”¨æˆ·å…·ä½“ç›®æ ‡æˆ–è€…ç”¨æˆ·è¦æ±‚ç³»ç»Ÿå¿…é¡»å®Œæˆçš„ä»»åŠ¡<br>Cã€ä»ç³»ç»Ÿè§’åº¦æ¥è¯´æ˜è½¯ä»¶çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬åŠŸèƒ½éœ€æ±‚ã€éåŠŸèƒ½éœ€æ±‚å’Œè®¾è®¡çº¦æŸ<br>Dã€æè¿°äº†ç”¨æˆ·ä»»åŠ¡ç³»ç»Ÿåº”è¯¥å…·å¤‡çš„åŠŸèƒ½å’Œæ€§èƒ½</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘ä¸šåŠ¡éœ€æ±‚ã€‚ä¸šåŠ¡éœ€æ±‚æ˜¯æŒ‡åæ˜ ä¼ä¸šæˆ–å®¢æˆ·å¯¹ç³»ç»Ÿé«˜å±‚æ¬¡çš„ç›®æ ‡è¦æ±‚ï¼Œé€šå¸¸æ¥è‡ªé¡¹ç›®æŠ•èµ„äººã€è´­ä¹°äº§å“çš„å®¢æˆ·ã€å®¢æˆ·å•ä½çš„ç®¡ç†äººå‘˜ã€å¸‚åœºè¥é”€éƒ¨é—¨æˆ–äº§å“ç­–åˆ’éƒ¨é—¨ç­‰ã€‚é€šè¿‡ä¸šåŠ¡éœ€æ±‚å¯ä»¥ç¡®å®šé¡¹ç›®è§†å›¾å’ŒèŒƒå›´ï¼Œé¡¹ç›®è§†å›¾å’ŒèŒƒå›´æ–‡æ¡£æŠŠä¸šåŠ¡éœ€æ±‚é›†ä¸­åœ¨ä¸€ä¸ªç®€å•ã€ç´§å‡‘çš„æ–‡æ¡£ä¸­ï¼Œè¯¥æ–‡æ¡£ä¸ºä»¥åçš„å¼€å‘å·¥ä½œå¥ å®šäº†åŸºç¡€ã€‚</p></div></div><hr><p>20ã€UMLå›¾ä¸åŒ…æ‹¬ï¼ˆï¼‰ã€‚ <em>18å¹´5æœˆç¬¬27é¢˜</em></p><p>Aã€ç”¨ä¾‹å›¾<br>Bã€åºåˆ—å›¾<br>Cã€ç»„ä»¶å›¾<br>Dã€ç»§æ‰¿å›¾</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘ç±»å›¾è¡¨ç¤ºç±»ã€æ¥å£å’Œå®ƒä»¬ä¹‹é—´çš„åä½œå…³ç³»ï¼Œæ²¡æœ‰ç»§æ‰¿å›¾</p></div></div>]]></content>
      
      
      <categories>
          
          <category> è½¯è€ƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ </tag>
            
            <tag> ä¿¡æ¯åŒ– </tag>
            
            <tag> ä¿¡æ¯ç³»ç»Ÿ </tag>
            
            <tag> é«˜é¡¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆå¤‡è€ƒæŒ‡å—</title>
      <link href="/9698ac1384d7/"/>
      <url>/9698ac1384d7/</url>
      
        <content type="html"><![CDATA[<h2 id="è€ƒè¯•ä»‹ç»"><a href="#è€ƒè¯•ä»‹ç»" class="headerlink" title="è€ƒè¯•ä»‹ç»"></a>è€ƒè¯•ä»‹ç»</h2><p>å…¨å›½è®¡ç®—æœºæŠ€æœ¯ä¸è½¯ä»¶ä¸“ä¸šæŠ€æœ¯èµ„æ ¼è€ƒè¯•è®¾ä¸‰ä¸ªçº§åˆ«å±‚æ¬¡ï¼Œäº”ä¸ªä¸“ä¸šï¼Œå…±æœ‰ 27 ç§å²—ä½èµ„æ ¼è€ƒè¯•ã€‚è€Œ<strong>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ</strong>è€ƒè¯•å±äºå…¨å›½è®¡ç®—æœºæŠ€æœ¯ä¸è½¯ä»¶ä¸“ä¸šæŠ€æœ¯èµ„æ ¼è€ƒè¯•ä¸­çš„ä¸€ä¸ª<strong>é«˜çº§è€ƒè¯•</strong>ã€‚</p><h2 id="æŠ¥è€ƒæ¡ä»¶"><a href="#æŠ¥è€ƒæ¡ä»¶" class="headerlink" title="æŠ¥è€ƒæ¡ä»¶"></a>æŠ¥è€ƒæ¡ä»¶</h2><p>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè€ƒè¯•æŠ¥è€ƒæ¡ä»¶ä¸è®¾å­¦å†ä¸èµ„å†æ¡ä»¶ã€å¹´é¾„ä»¥åŠä¸“ä¸šç­‰é™åˆ¶ï¼Œè€ƒç”Ÿå¯æ ¹æ®è‡ªå·±çš„æŠ€æœ¯æ°´å¹³é€‰æ‹©åˆé€‚çš„çº§åˆ«ä»¥åŠåˆé€‚çš„èµ„æ ¼è¿›è¡ŒæŠ¥è€ƒã€‚</p><blockquote><p>æ³¨æ„ï¼šæ¯æ¬¡è€ƒè¯•æ¯ä¸ªäººåªå…è®¸æŠ¥è€ƒä¸€ç§èµ„æ ¼ã€‚</p></blockquote><h2 id="è€ƒè¯•æµç¨‹"><a href="#è€ƒè¯•æµç¨‹" class="headerlink" title="è€ƒè¯•æµç¨‹"></a>è€ƒè¯•æµç¨‹</h2><ol><li><a href="https://bm.ruankao.org.cn/sign/welcome">æŠ¥å</a>ï¼ˆ2æœˆ - 3æœˆï¼‰</li><li>æ‰“å°å‡†è€ƒè¯ï¼ˆè€ƒå‰ä¸€å‘¨ï¼‰</li><li>è€ƒè¯•ï¼ˆ5 æœˆ 27 æ—¥ï¼‰</li><li>å…¬å¸ƒæˆç»©ï¼ˆè€ƒåä¸€ä¸ªæœˆå·¦å³ï¼‰</li><li>é¢†å–è¯ä¹¦ï¼ˆ9 æœˆä»½å·¦å³ï¼‰</li></ol><h2 id="è€ƒé¢˜åˆ†æ"><a href="#è€ƒé¢˜åˆ†æ" class="headerlink" title="è€ƒé¢˜åˆ†æ"></a>è€ƒé¢˜åˆ†æ</h2><table><thead><tr><th align="center">ç§‘ç›®</th><th align="center">å†…å®¹</th><th align="center">æ—¶é•¿</th><th align="center">è€ƒè¯•æ—¶é—´</th></tr></thead><tbody><tr><td align="center">ç»¼åˆçŸ¥è¯†</td><td align="center">75é“é€‰æ‹©é¢˜ï¼ŒçŸ¥è¯†èŒƒå›´å¾ˆå¹¿ï¼ŒåŒ…å«ï¼šIT çŸ¥è¯†ã€æ—¶äº‹æ”¿æ²»ã€é¡¹ç›®ç®¡ç†ã€5 åˆ†çš„è¿ç­¹å­¦ã€5 åˆ†è‹±è¯­é¢˜</td><td align="center">150 åˆ†é’Ÿ</td><td align="center">ä¸Šåˆ<br />9:00 - 11:00</td></tr><tr><td align="center">æ¡ˆä¾‹åˆ†æ</td><td align="center">3 é“å¤§é¢˜ï¼š1 é“è®¡ç®—é¢˜ï¼Œ2 é“åˆ†æé¢˜</td><td align="center">90 åˆ†é’Ÿ</td><td align="center">ä¸‹åˆ<br />1:30 - 3:00</td></tr><tr><td align="center">è®ºæ–‡å†™ä½œ</td><td align="center">1 é“è®ºæ–‡é¢˜ï¼Œè€ƒè¯•èŒƒå›´ï¼š<strong>åå¤§ç®¡ç†</strong>ã€å®‰å…¨ç®¡ç†ã€åˆåŒç®¡ç†ã€æ‹›æŠ•æ ‡</td><td align="center">120 åˆ†é’Ÿ</td><td align="center">ä¸‹åˆ<br />3:20 - 5:20</td></tr></tbody></table><h2 id="å­¦ä¹ è®¡åˆ’"><a href="#å­¦ä¹ è®¡åˆ’" class="headerlink" title="å­¦ä¹ è®¡åˆ’"></a>å­¦ä¹ è®¡åˆ’</h2><p>è®¡åˆ’å…±å†æ—¶ 100 å¤©ï¼Œæ¯å¤©æŠ•å…¥ 2 - 3 å°æ—¶ï¼Œæ€»æŠ•å…¥é¢„è®¡ 200 - 300 å°æ—¶ã€‚</p><ul><li>ç¬¬ä¸€é˜¶æ®µï¼ˆ35 å¤©ï¼‰(2023&#x2F;2&#x2F;15 - 2023&#x2F;3&#x2F;21)<ul><li>åŸºç¡€çŸ¥è¯†</li><li>è®¡ç®—ä¸“é¢˜</li></ul></li><li>ç¬¬äºŒé˜¶æ®µï¼ˆ50 å¤©ï¼‰(2023&#x2F;3&#x2F;22 - 2023&#x2F;5&#x2F;10)<ul><li>å†å¹´çœŸé¢˜</li><li>æ¡ˆä¾‹åˆ†æ</li><li>å†™ä½œä¸“é¢˜</li></ul></li><li>ç¬¬ä¸‰é˜¶æ®µ (15 å¤©)ï¼ˆ2023&#x2F;5&#x2F;11 - 2023&#x2F;5&#x2F;26ï¼‰<ul><li>è€ƒå‰å†²åˆº</li></ul></li></ul><h2 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h2><ul><li><a href="https://www.ruankao.org.cn/">ä¸­å›½è®¡ç®—æœºæŠ€æœ¯èµ„æ ¼ç½‘</a></li><li>è½¯è€ƒçœŸé¢˜ App<ul><li><a href="https://apps.apple.com/hk/app/%E8%BD%AF%E8%80%83%E7%9C%9F%E9%A2%98-2022%E4%BF%A1%E6%81%AF%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86-%E7%B3%BB%E7%BB%9F%E9%9B%86%E6%88%90/id1468131830">iOS</a></li><li><a href="https://www.wandoujia.com/apps/7873801">Android</a></li></ul></li><li>è½¯è€ƒé€š App<ul><li><a href="https://apps.apple.com/cn/app/%E8%BD%AF%E8%80%83%E9%80%9A-2022%E5%B9%B4%E8%BD%AF%E4%BB%B6%E6%B0%B4%E5%B9%B3%E8%80%83%E8%AF%95%E6%8F%90%E5%88%86%E7%A5%9E%E5%99%A8/id1498444438">iOS</a></li><li><a href="https://www.wandoujia.com/apps/8095598">Android</a></li></ul></li><li>è½¯è€ƒåˆ·é¢˜ç‹<ul><li>#å°ç¨‹åº:&#x2F;&#x2F;è½¯è€ƒåˆ·é¢˜ç‹&#x2F;I4Jk3d4HRskRbaw</li></ul></li><li><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677062492249.png" alt="æ­å· E ç±»äººæ‰ç¦åˆ©"></li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯è€ƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ </tag>
            
            <tag> ä¿¡æ¯åŒ– </tag>
            
            <tag> ä¿¡æ¯ç³»ç»Ÿ </tag>
            
            <tag> é«˜é¡¹ </tag>
            
            <tag> è®¡ç®—æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>word-wrap å’Œ word-break</title>
      <link href="/c607ec2b5110/"/>
      <url>/c607ec2b5110/</url>
      
        <content type="html"><![CDATA[<p>word-wrap å’Œ word-break æ˜¯ä¸€å¯¹ç”¨äºå•è¯æ–­å¥çš„åŒç”Ÿå±æ€§ï¼Œä½†æ˜¯åˆæœ‰å¾®å¦™çš„åŒºåˆ«ï¼Œæ¯æ¬¡è¦ç”¨çš„æ—¶å€™è¿˜è¦é‡æ–°ç¿»ä¸€ä¸‹ MDN æ–‡æ¡£ï¼Œæœ¬æ–‡åŠ›æ±‚é€šè¿‡ä¸€å¼ æµç¨‹å›¾å¿«é€Ÿè®°å¿†ä¸¤è€…å¦‚ä½•ä½¿ç”¨ã€‚</p><h2 id="word-wrap"><a href="#word-wrap" class="headerlink" title="word-wrap"></a>word-wrap</h2><p>css çš„ word-wrap å±æ€§ç”¨æ¥æ ‡æ˜æ˜¯å¦å…è®¸æµè§ˆå™¨åœ¨å•è¯å†…è¿›è¡Œæ–­å¥ï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢å½“ä¸€ä¸ªå­—ç¬¦ä¸²å¤ªé•¿è€Œæ‰¾ä¸åˆ°å®ƒçš„è‡ªç„¶æ–­å¥ç‚¹æ—¶äº§ç”Ÿæº¢å‡ºç°è±¡ã€‚</p><ul><li>normalï¼šå°±æ˜¯å¤§å®¶å¹³å¸¸è§å¾—æœ€å¤šçš„æ­£å¸¸çš„æ¢è¡Œè§„åˆ™ã€‚</li><li>break-wordï¼šä¸€è¡Œå•è¯ä¸­å®åœ¨æ²¡æœ‰å…¶ä»–é è°±çš„æ¢è¡Œç‚¹çš„æ—¶å€™åœ¨å•è¯å†…æ¢è¡Œã€‚</li></ul><h2 id="word-break"><a href="#word-break" class="headerlink" title="word-break"></a>word-break</h2><p>css çš„ word-break å±æ€§ç”¨æ¥æ ‡æ˜æ€ä¹ˆæ ·è¿›è¡Œå•è¯å†…çš„æ–­å¥ã€‚</p><ul><li>normalï¼šä½¿ç”¨é»˜è®¤çš„æ¢è¡Œè§„åˆ™ï¼Œå³å¦‚æœä¸€ä¸ªå•è¯å¾ˆé•¿ï¼Œå¯¼è‡´ä¸€è¡Œä¸­å‰©ä¸‹çš„ç©ºé—´å·²ç»æ”¾ä¸ä¸‹å®ƒæ—¶ï¼Œåˆ™æµè§ˆå™¨ä¼šæŠŠè¿™ä¸ªå•è¯æŒªåˆ°ä¸‹ä¸€è¡Œå»ã€‚</li><li>break-allï¼šå…è®¸å•è¯æ–­è¡Œï¼Œå³å¦‚æœä¸€ä¸ªå•è¯å¾ˆé•¿ï¼Œå¯¼è‡´ä¸€è¡Œä¸­å‰©ä¸‹çš„ç©ºé—´å·²ç»æ”¾ä¸ä¸‹å®ƒæ—¶ï¼Œåˆ™æµè§ˆå™¨ä¸ä¼šæŠŠè¿™ä¸ªå•è¯æŒªåˆ°ä¸‹ä¸€è¡Œå»ï¼Œè€Œæ˜¯åœ¨å•è¯å†…æ¢è¡Œã€‚</li></ul><h2 id="æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯"><a href="#æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯" class="headerlink" title="æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯"></a>æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯</h2><p><img src="https://picbed.qunarzz.com/3d7e329ab089d28c7bde5be75573f1d3.png"></p><blockquote><p>å‚è€ƒèµ„æ–™æ¥è‡ª <a href="https://www.cnblogs.com/2050/archive/2012/08/10/2632256.html">ä½ çœŸçš„äº†è§£word-wrapå’Œword-breakçš„åŒºåˆ«å—ï¼Ÿ</a> å’Œ <a href="https://www.zhangxinxu.com/wordpress/2015/11/diff-word-break-break-all-word-wrap-break-word/">word-break:break-allå’Œword-wrap:break-wordçš„åŒºåˆ«</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> word-wrap </tag>
            
            <tag> word-break </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenAI æ¨å‡ºè¶…ç¥ ChatGPT æ³¨å†Œæ”»ç•¥æ¥äº†</title>
      <link href="/d744d1d3d1e8/"/>
      <url>/d744d1d3d1e8/</url>
      
        <content type="html"><![CDATA[<p>OpenAI æ¨å‡ºè¶…ç¥ ChatGPTï¼Œéå¸¸ç«çˆ†ã€‚ä½†æ˜¯å‘¢ï¼Œå› ä¸ºä¸å¯æŠ—åŠ›åŸå› ï¼Œå¤§éƒ¨åˆ†äººæ— æ³•ä½“éªŒåˆ°ã€‚è¿™é‡Œæˆ‘åˆ†äº«ä¸€ä¸‹æ³¨å†Œçš„æ”»ç•¥ã€‚</p><h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><ul><li>é¦–å…ˆèƒ½èƒ½è®¿é—® Googleï¼ˆå‰ç½®æ¡ä»¶ï¼Œä¸èƒ½æ˜ç¡®è¯´ï¼Œæ‡‚å¾—éƒ½æ‡‚ï¼‰</li><li>ä½ å¾—æœ‰ä¸€ä¸ªå›½å¤–æ‰‹æœºå·ï¼ŒGV å·è‚¯å®šä¸è¡Œã€‚<ul><li>å¦‚æœä½ æ²¡æœ‰å›½å¤–æ‰‹æœºå·ï¼Œæ¨èsms-activate.org</li></ul></li></ul><h3 id="æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼"><a href="#æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼" class="headerlink" title="æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼"></a>æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼</h3><ul><li>å…ˆè¡Œæ³¨å†Œsms-activate.org</li><li>æ³¨å†Œå¥½ä¹‹åè¿›è¡Œå¯¹åº”çš„å……å€¼</li></ul><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8acaf6d767714b1d82122cd3206f4ba7~tplv-k3u1fbpfcp-watermark.image"></p><p>æ¥ç è´¹ç”¨ä¸€æ¬¡ä¸º 10.5 å¢å¸ƒï¼Œå¤§çº¦1.2 äººæ°‘å¸ã€‚å› ä¸ºå……å€¼é»˜è®¤ä¸ºç¾å…ƒï¼Œå¯ä»¥é€‰æ‹©å……å€¼ 1 ç¾å…ƒè¿›å»ï¼Œ</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c507b1564d1442d8dfab0ebc8d481e1~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æ³¨å†ŒOpenAIè´¦å·"><a href="#æ³¨å†ŒOpenAIè´¦å·" class="headerlink" title="æ³¨å†ŒOpenAIè´¦å·"></a>æ³¨å†ŒOpenAIè´¦å·</h3><ul><li>æ‰“å¼€<a href="https://beta.openai.com/signup">https://beta.openai.com/signup</a> é¡µé¢è¿›è¡Œç›¸åº”çš„æ³¨å†Œã€‚<ul><li>è¿™é‡ŒåŒæ ·éœ€è¦ä½ èƒ½è®¿é—®Googleä¸” ip ä¸æ˜¯é¦™æ¸¯ï¼Œæœ€å¥½æ˜¯ç¾å›½ã€æ–°åŠ å¡ç­‰ç­‰ï¼Œä¸ç„¶ä¼šæç¤ºä¸èƒ½åœ¨å½“å‰å›½å®¶æœåŠ¡ã€‚</li></ul></li><li>æ³¨å†ŒæˆåŠŸè¿›å…¥ä¸‹é¢å¡«å†™æ‰‹æœºå·çš„é¡µé¢<ul><li>ä¸‹é¢è®°å¾—åˆ‡æ¢ä¸‹å›½å®¶åŒºå·ï¼Œè¿™é‡Œçš„åŒºå·é»˜è®¤æ˜¯ä½ ä»£ç†çš„ã€‚</li></ul></li></ul><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d50d22c04df0430aa0b2afca70a55beb~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="å‡†å¤‡æ¥ç "><a href="#å‡†å¤‡æ¥ç " class="headerlink" title="å‡†å¤‡æ¥ç "></a>å‡†å¤‡æ¥ç </h3><blockquote><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸‹çš„å°±æ˜¯ï¼Œç›®å‰å¥½åƒå°±åªæœ‰å·´è¥¿æ”¯æŒäº†ï¼Œä¹‹å‰æˆ‘é€‰çš„å°å°¼ï¼Œæ˜¯å¯ä»¥æ”¶åˆ°ç çš„ã€‚</p></blockquote><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79235be8d7104175a6dda1cc63f46937~tplv-k3u1fbpfcp-watermark.image"></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2e4434858ab4cbaaa9e1d8249305547~tplv-k3u1fbpfcp-watermark.image"></p><ul><li>ç„¶åå†åˆšåˆšå¡«å†™æ‰‹æœºå·ç çš„é¡µé¢å¡«å…¥ç”³è¯·çš„æ‰‹æœºå·</li></ul><h3 id="å¼€å§‹ä½¿ç”¨ChatGPT"><a href="#å¼€å§‹ä½¿ç”¨ChatGPT" class="headerlink" title="å¼€å§‹ä½¿ç”¨ChatGPT"></a>å¼€å§‹ä½¿ç”¨ChatGPT</h3><p>æ³¨å†Œå®Œåï¼Œæˆ‘ä»¬å»ChatGPTç½‘ç«™å»ç™»é™†ã€‚<a href="https://chat.openai.com/auth/login">https://chat.openai.com/auth/login</a></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e474b55d15d4b8ea3c56e7deb5ce8f9~tplv-k3u1fbpfcp-watermark.image"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf36cc1afc9b45539f543211739c9f83~tplv-k3u1fbpfcp-watermark.image"></p><h4 id="12-æœˆ-6-æ—¥æ›´æ–°"><a href="#12-æœˆ-6-æ—¥æ›´æ–°" class="headerlink" title="12 æœˆ 6 æ—¥æ›´æ–°"></a>12 æœˆ 6 æ—¥æ›´æ–°</h4><ul><li>å¦‚æœä½ çš„é¡µé¢å‡ºç°ä¸‹é¢æç¤ºï¼Œè¯´æ˜ä½ ä»£ç†ä¸è¡Œ~~</li></ul><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc290c2a7abf4c9faee9a392819d16e4~tplv-k3u1fbpfcp-watermark.image"></p><ul><li>æ¥ä¸åˆ°ç ï¼Œå¯ä»¥åœ¨é‚£ä¸ªæœ‰æ•ˆæœŸå†…é€€å›æ¢ä¸ªå·è¯•è¯•ã€‚<ul><li>æœ‰äººç›´æ¥æŠŠå‘çš„ç”µè¯è¾“å…¥æ¡†é‡Œï¼Œæ²¡å»æ‰åŒºå·ä¹Ÿå¯ä»¥æ”¶åˆ°</li></ul></li><li>è¿™ä¸ªæ¥ç ç½‘ç«™å¾ˆå…¨é¢ï¼Œæˆ‘æ¼”ç¤ºå……å€¼æ˜¯ 1 ç¾å…ƒï¼Œä½ ä¹Ÿå¯ä»¥å†²ä¸€ä¸ª 0.18ç¾å…ƒ</li><li>ç›®å‰å®Œå…¨æ”¯æŒçš„æ˜¯å°åº¦+å·´è¥¿ã€‚ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–å›½å®¶çš„ any+other é€‰æ‹©åˆé€‚çš„è´¹ç”¨å³å¯ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> äººå·¥æ™ºèƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OPenAI </tag>
            
            <tag> Chatgpt </tag>
            
            <tag> Chatgpt æ³¨å†Œ </tag>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023 å¹´åº¦è®¡åˆ’</title>
      <link href="/cb03d5cd6dce/"/>
      <url>/cb03d5cd6dce/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸ŠåŠå¹´"><a href="#ä¸ŠåŠå¹´" class="headerlink" title="ä¸ŠåŠå¹´"></a>ä¸ŠåŠå¹´</h1><h2 id="ç»§ç»­æ•™è‚²-40"><a href="#ç»§ç»­æ•™è‚²-40" class="headerlink" title="ç»§ç»­æ•™è‚² 40%"></a>ç»§ç»­æ•™è‚² 40%</h2><blockquote><p>æ¯å¤©è‡³å°‘æŠ½å‡ºä¸¤ä¸ªå°æ—¶å¤‡è€ƒ</p></blockquote><ul><li>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ</li></ul><h2 id="ç”Ÿæ´»å¨±ä¹-30"><a href="#ç”Ÿæ´»å¨±ä¹-30" class="headerlink" title="ç”Ÿæ´»å¨±ä¹ 30%"></a>ç”Ÿæ´»å¨±ä¹ 30%</h2><blockquote><p>æ¯å¤©è‡³å°‘ 15 åˆ†é’Ÿçš„è¿åŠ¨</p></blockquote><ul><li>å¤‡å­•</li><li>è½æˆ·æ­å·ï¼šä¸ºäº†ä»¥åå­©å­ä¸Šå­¦</li><li>å‡é‡åˆ° 145</li><li>å¸¦åª³å¦‡å»ä¸€ä¸ªæµ·æ»¨åŸå¸‚æ—…æ¸¸</li></ul><h2 id="æŒç»­å­¦ä¹ -30"><a href="#æŒç»­å­¦ä¹ -30" class="headerlink" title="æŒç»­å­¦ä¹  30%"></a>æŒç»­å­¦ä¹  30%</h2><p>æ¯å¤©è‡³å°‘æŠ½å‡ºä¸€ä¸ªå°æ—¶å­¦ä¹ </p><ul><li>ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹å¤ä¹ ä¸€éå¹¶äº§å‡ºä¸€ç¯‡å­¦ä¹ ç¬”è®°</li><li>ã€ŠReact è®¾è®¡ã€‹è¯»ä¸€éå¹¶äº§å‡ºä¸€ç¯‡å­¦ä¹ ç¬”è®°</li><li>ã€ŠJavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¸€éå¹¶äº§å‡ºä¸€ç¯‡å­¦ä¹ ç¬”è®°</li><li>åŠ›æ‰£ 200 ä¸¤æ—¥åˆ·ä¸€é¢˜</li></ul><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ul><li>ç¿»è¯‘å®Œæˆ <a href="https://github.com/vscode-cn/vscode-api-cn">Vs Code API ä¸­æ–‡æ–‡æ¡£</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ¼«è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹´åº¦è®¡åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NPM å¸¸ç”¨å‘½ä»¤</title>
      <link href="/8e944d3670b0/"/>
      <url>/8e944d3670b0/</url>
      
        <content type="html"><![CDATA[<h2 id="å…¨å±€"><a href="#å…¨å±€" class="headerlink" title="å…¨å±€"></a>å…¨å±€</h2><ul><li><code>npm root --location=global</code>ï¼šæŸ¥çœ‹å…¨å±€åŒ…å®‰è£…è·¯å¾„<blockquote><p>Mac ä¸‹é»˜è®¤çš„å…¨å±€è·¯å¾„æ˜¯ï¼š<code>/usr/local/lib/node_modules</code><br>Ubuntu ä¸‹é»˜è®¤çš„å…¨å±€è·¯å¾„æ˜¯: <code>/usr/lib/node_modules</code></p></blockquote></li><li><code>npm ls --location=global</code>ï¼šæŸ¥çœ‹å…¨å±€åŒ…åˆ—è¡¨<ul><li><code>npm ls --location=global --depth 0</code>ï¼šä»…æŸ¥çœ‹ä¸€çº§åŒ…</li><li><code>npm ls --location=global --depth 0 | grep packageName</code>ï¼šæŸ¥çœ‹ä¸€çº§åŒ…å¹¶æœç´¢ç›¸å…³åŒ…</li></ul></li></ul><h2 id="owner"><a href="#owner" class="headerlink" title="owner"></a>owner</h2><p>ç®¡ç†å·²ç»å‘å¸ƒçš„åŒ…çš„æ‰€æœ‰æƒ</p><ul><li><code>npm owner add &lt;user&gt; [&lt;@scope&gt;/]&lt;pkg&gt;</code>ï¼šç»™æŸä¸ªåŒ…æ·»åŠ ç”¨æˆ·</li><li><code>npm owner rm &lt;user&gt; [&lt;@scope&gt;/]&lt;pkg&gt;</code>ï¼šåˆ é™¤æŸä¸ªåŒ…çš„æŸä¸ªç”¨æˆ·</li><li><code>npm owner ls [&lt;@scope&gt;/]&lt;pkg&gt;</code>ï¼šåˆ—å‡ºæŸä¸ªåŒ…çš„æ‰€æœ‰ç”¨æˆ·</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
            <tag> å‘½ä»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023 å¸¸ç”¨ NPM åŒ…æ¨è</title>
      <link href="/db7a22999938/"/>
      <url>/db7a22999938/</url>
      
        <content type="html"><![CDATA[<p>å¸®åŠ©å¼€å‘è€…ä» NPM åŒ…é€‰å‹çš„è§’åº¦æ„ŸçŸ¥å’Œå»ºç«‹å‰ç«¯å·¥ç¨‹åŒ–ä½“ç³»ã€‚</p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><h3 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h3><p><a href="https://www.npmjs.com/package/tape">tape</a></p><h2 id="ç¼–è¯‘å·¥å…·"><a href="#ç¼–è¯‘å·¥å…·" class="headerlink" title="ç¼–è¯‘å·¥å…·"></a>ç¼–è¯‘å·¥å…·</h2><ul><li><a href="https://www.npmjs.com/package/babel">babel</a></li></ul><h2 id="æ„å»ºå·¥å…·"><a href="#æ„å»ºå·¥å…·" class="headerlink" title="æ„å»ºå·¥å…·"></a>æ„å»ºå·¥å…·</h2><ul><li><a href="https://www.npmjs.com/package/webpack">webpack</a></li><li><a href="https://www.npmjs.com/package/rollup">rollup</a></li><li><a href="https://www.npmjs.com/package/esbuild">esbuild</a></li></ul><h2 id="dotenv"><a href="#dotenv" class="headerlink" title="dotenv"></a>dotenv</h2><ul><li><a href="https://www.npmjs.com/package/dotenv">dotenv</a></li></ul><h2 id="Node-js-CLI"><a href="#Node-js-CLI" class="headerlink" title="Node.js CLI"></a>Node.js CLI</h2><h3 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h3><ul><li><a href="https://www.npmjs.com/package/commander">commander</a>: Node.jså‘½ä»¤è¡Œç•Œé¢çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ,å—Ruby Commanderå¯å‘ã€‚ å‰ç«¯å¼€å‘node cli å¿…å¤‡æŠ€èƒ½ã€‚</li><li><a href="https://www.npmjs.com/package/yargs">yargs</a>: åŠŸèƒ½æ¯”è¾ƒå…¨ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥æ¯”è¾ƒå¤æ‚ã€‚</li></ul><h3 id="å‘½ä»¤è¡Œå‚æ•°è§£æ"><a href="#å‘½ä»¤è¡Œå‚æ•°è§£æ" class="headerlink" title="å‘½ä»¤è¡Œå‚æ•°è§£æ"></a>å‘½ä»¤è¡Œå‚æ•°è§£æ</h3><ul><li><a href="https://www.npmjs.com/package/yargs-parser">yargs-parser</a>ï¼šyargs å‘½ä»¤è¡Œæ¡†æ¶å†…ç½®çš„å‘½ä»¤è¡Œå‚æ•°è§£æåº“ï¼ŒåŠŸèƒ½æ¯”è¾ƒå…¨ï¼Œæ¯”è¾ƒé€‚åˆå·¥ç¨‹åŒ–å®ç”¨ã€‚</li><li><a href="https://www.npmjs.com/package/minimist">minimist</a>ï¼šå¦‚æœä½ å–œæ¬¢è½»é‡çº§çš„æŠ€æœ¯ï¼Œé‚£ä¹ˆ minimist è¶³å¤Ÿç®€å•å¥½ç”¨ï¼Œä»£ç é‡ä¹Ÿå¾ˆå°‘ï¼ˆåªæœ‰å‡ ç™¾è¡Œï¼‰ï¼Œéå¸¸é€‚åˆç ”è¯»ã€‚</li><li>inquire.js</li><li>chalk: ç¾åŒ–å‘½ä»¤è¡Œçš„æ¨¡å—</li><li>ora: ä¼˜é›…çš„ spinner</li><li>ncp: å¼‚æ­¥çš„æ‹·è´æ–‡ä»¶ï¼ŒåŒ…å«ç©ºæ–‡ä»¶å¤¹</li><li>recursive-readdir: é€’å½’åœ°åˆ—å‡ºç›®å½•å’Œå­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¸åŒ…å«ç›®å½•æœ¬èº«ã€‚</li><li>shelljs: åœ¨ Node.js ä¸­æ‰§è¡Œ Unix shell å‘½ä»¤</li><li>log-symbols: æ‰“å°æ—¥å¿—çš„ç‰¹æ®Šæ ‡å¿—</li><li><a href="https://www.npmjs.com/package/download-git-repo">download-git-repo</a>: Download and extract a git repository (GitHub, GitLab, Bitbucket) from node</li><li><a href="https://www.npmjs.com/package/global-prefix">global-prefix</a>: è·å– npm å…¨å±€å®‰è£…çš„å‰ç¼€</li><li><a href="https://www.npmjs.com/package/exec-sh">exec-sh</a>: æ‰§è¡Œ shell å‘½ä»¤è½¬å‘æ‰€æœ‰ stdio æµï¼Œæ¯” shelljs exec å‘½ä»¤å¥½ç”¨</li><li><a href="https://www.npmjs.com/package/wml">wml</a>: wml ä¾¦å¬æŸä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ›´æ”¹ï¼ˆä½¿ç”¨ watchmanï¼‰ï¼Œç„¶åå°†æ›´æ”¹çš„æ–‡ä»¶å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚</li><li><a href="https://blog.ihaiu.com/cmd-open/">cmd-open</a>: æ‰©å±• Windows å‘½ä»¤ open</li><li><a href="https://github.com/shelljs/shx">shx</a>: shx is a wrapper around ShellJS Unix commands, providing an easy solution for simple Unix-like, cross-platform commands in npm package scripts.</li></ul><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="css-modules"><a href="#css-modules" class="headerlink" title="css modules"></a>css modules</h3><ul><li><a href="https://www.npmjs.com/package/clsx">clsx</a></li><li><a href="https://www.npmjs.com/package/classnames">classnames</a></li></ul><h3 id="css-in-js"><a href="#css-in-js" class="headerlink" title="css-in-js"></a>css-in-js</h3><ul><li><a href="https://www.npmjs.com/package/styled-components">styled-components</a></li></ul><h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h3 id="çŠ¶æ€ç®¡ç†"><a href="#çŠ¶æ€ç®¡ç†" class="headerlink" title="çŠ¶æ€ç®¡ç†"></a>çŠ¶æ€ç®¡ç†</h3><ul><li><a href="https://www.npmjs.com/package/redux">redux</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NPM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ— æ„ŸçŸ¥åˆ·æ–° Token</title>
      <link href="/ac2c22966f31/"/>
      <url>/ac2c22966f31/</url>
      
        <content type="html"><![CDATA[<p>ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬åç«¯éƒ½è¦æ±‚åœ¨è¯·æ±‚æ¥å£æ—¶ä¼ é€’ç™»å½•çš„ Tokenã€‚ä¸ºäº†é˜²æ­¢ Token æ³„æ¼çš„é£é™©ï¼ŒæœåŠ¡å™¨çš„ Token ä¸€èˆ¬ä¸ä¼šè®¾ç½®å¤ªé•¿æ—¶é—´ï¼Œæ¯”å¦‚æˆ‘æœ€è¿‘è”è°ƒçš„ï¼Œä¸¤ä¸ªå°æ—¶å°±ä¼šè¿‡æœŸï¼Œtoken è¿‡æœŸå°±éœ€è¦é‡æ–°ç™»é™†ã€‚é¢‘ç¹è¦æ±‚ç™»é™†ä¼šé€ æˆç”¨æˆ·ä½“éªŒå·®ï¼Œæ‰€ä»¥åç«¯åŒæ—¶ä¼šæä¾›åˆ·æ–° Token çš„æ¥å£ï¼Œæœ¬æ–‡å°±æ˜¯è®°å½•ä¸€ä¸‹å‡ ç§æ— æ„ŸçŸ¥åˆ·æ–°çš„æ–¹æ³•ã€‚</p><h2 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h2><p>åœ¨ç™»å½•æ—¶ï¼Œåç«¯è¿”å›è¿‡æœŸæ—¶é—´ï¼Œå‰ç«¯æ¯æ¬¡è¯·æ±‚å°±åˆ¤æ–­ token çš„è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœå¿«åˆ°è¿‡æœŸæ—¶é—´ï¼Œå°±å»è°ƒç”¨åˆ·æ–° token æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å°è£…ä¸€ä¸ª refreshToken æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">refreshToken</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">dayjs</span>().<span class="title function_">diff</span>(<span class="params">LOCAL_REFRESH_TIME &gt; LOCAL_EXPIRE</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">global</span>.<span class="property">workPromise</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">global</span>.<span class="property">workPromise</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">async</span> (resolve) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;data&#125; = <span class="keyword">await</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`https://api.com/login`</span>,</span><br><span class="line">        <span class="comment">// other config</span></span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// æ›´æ–° LOCAL_REFRESH_TIME</span></span><br><span class="line">      <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="literal">null</span>;</span><br><span class="line">      <span class="title function_">resolve</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">global</span>.<span class="property">workPromise</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Access</span>_Token</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•ä¸»è¦åŸç†æ˜¯é€šè¿‡å°† refresh æ¥å£è¯·æ±‚å­˜åœ¨å…¨å±€çš„ workPromise ä¸­æ¥ä¿è¯åœ¨å¹¶å‘è¯·æ±‚æ¥å£æ—¶åªå­˜åœ¨ä¸€ä¸ªè¯·æ±‚ã€‚</p><h2 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h2><p>ç™»å½•æ—¶è®¾ç½®å®šæ—¶å™¨åˆ·æ–° token æ¥å£ï¼Œè¯·æ±‚çš„æ—¶å€™åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰ workPromise å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±ç­‰åˆ·æ–°å®Œæˆã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç™»å½•åè®¾ç½®å®šæ—¶å™¨</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">async</span> (resolve) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;data&#125; = <span class="keyword">await</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`https://api.com/login`</span>,</span><br><span class="line">      <span class="comment">// other config</span></span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    cookies.<span class="title function_">set</span>(<span class="string">&#x27;refresh_time&#x27;</span>)</span><br><span class="line">    <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="variable constant_">EXPIRE</span> / <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">request</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">global</span>.<span class="property">workPromise</span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">global</span>.<span class="title function_">workPromise</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ¡ˆç”±äºæœ‰å®šæ—¶å™¨ä¸€ç›´å­˜åœ¨ï¼Œä¼šé¢å¤–æ¶ˆè€—èµ„æºï¼Œä¸æ¨èä½¿ç”¨ã€‚</p><h2 id="æ–¹æ¡ˆä¸‰"><a href="#æ–¹æ¡ˆä¸‰" class="headerlink" title="æ–¹æ¡ˆä¸‰"></a>æ–¹æ¡ˆä¸‰</h2><p>å¦‚æœä½¿ç”¨äº† axiosï¼Œå¯ä»¥åœ¨è¯·æ±‚å“åº”æ‹¦æˆªå™¨ä¸­æ‹¦æˆªï¼Œåˆ¤æ–­ token è¿”å›è¿‡æœŸåï¼Œè°ƒç”¨åˆ·æ–° token æ¥å£ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¯å¦æ­£åœ¨åˆ·æ–°çš„æ ‡è®°</span></span><br><span class="line"><span class="keyword">let</span> isRefreshing = <span class="literal">false</span></span><br><span class="line"><span class="comment">//é‡è¯•é˜Ÿåˆ—</span></span><br><span class="line"><span class="keyword">let</span> requests = []</span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//çº¦å®šcode 409 token è¿‡æœŸ</span></span><br><span class="line">    <span class="keyword">if</span> (response.<span class="property">data</span>.<span class="property">code</span> === <span class="number">409</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!isRefreshing) &#123;</span><br><span class="line">        isRefreshing = <span class="literal">true</span></span><br><span class="line">        <span class="comment">//è°ƒç”¨åˆ·æ–°tokençš„æ¥å£</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">refreshToken</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; token &#125; = res.<span class="property">data</span></span><br><span class="line">          <span class="comment">// æ›¿æ¢token</span></span><br><span class="line">          <span class="title function_">setToken</span>(token)</span><br><span class="line">          response.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`<span class="subst">$&#123;token&#125;</span>`</span></span><br><span class="line">           <span class="comment">// token åˆ·æ–°åå°†æ•°ç»„çš„æ–¹æ³•é‡æ–°æ‰§è¡Œ</span></span><br><span class="line">          requests.<span class="title function_">forEach</span>(<span class="function">(<span class="params">cb</span>) =&gt;</span> <span class="title function_">cb</span>(token))</span><br><span class="line">          requests = [] <span class="comment">// é‡æ–°è¯·æ±‚å®Œæ¸…ç©º</span></span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">service</span>(response.<span class="property">config</span>)</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">//è·³åˆ°ç™»å½•é¡µ</span></span><br><span class="line">          <span class="title function_">removeToken</span>()</span><br><span class="line">          router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">        &#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          isRefreshing = <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// è¿”å›æœªæ‰§è¡Œ resolve çš„ Promise</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// ç”¨å‡½æ•°å½¢å¼å°† resolve å­˜å…¥ï¼Œç­‰å¾…åˆ·æ–°åå†æ‰§è¡Œ</span></span><br><span class="line">          requests.<span class="title function_">push</span>(<span class="function"><span class="params">token</span> =&gt;</span> &#123;</span><br><span class="line">            response.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`<span class="subst">$&#123;token&#125;</span>`</span></span><br><span class="line">            <span class="title function_">resolve</span>(<span class="title function_">service</span>(response.<span class="property">config</span>))</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response &amp;&amp; response.<span class="property">data</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript éšå¼ç±»å‹è½¬æ¢ä¹‹ç›¸ç­‰æ“ä½œç¬¦</title>
      <link href="/f1f7395da421/"/>
      <url>/f1f7395da421/</url>
      
        <content type="html"><![CDATA[<p>éšå¼ç±»å‹è½¬æ¢å¤šå­˜åœ¨äºä½¿ç”¨ <code>==</code> è¿›è¡Œæ¯”è¾ƒçš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a == b&#x27;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¸åŒç±»å‹çš„å€¼ç”¨ç›¸ç­‰è¿ç®—ç¬¦æ¯”è¾ƒåçš„ç»“æœï¼Œå¯ä»¥ç”¨ä¸‹è¡¨æ€»ç»“ã€‚</p><p><img src="https://s2.loli.net/2022/04/16/WZboPTdBRmXQkja.png"></p><p><code>toNumber</code> æ–¹æ³•å¯¹ä¸åŒç±»å‹è¿”å›çš„ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="https://s2.loli.net/2022/04/17/VQ7BxmTqcOFUh34.png"></p><p><code>toPrimitive()</code>ï¼šå¦‚æœå¯¹è±¡çš„ <code>valueOf</code> æ–¹æ³•çš„ç»“æœæ˜¯åŸå§‹å€¼ï¼Œè¿”å›åŸå§‹å€¼ï¼›å¦‚æœå¯¹è±¡çš„ <code>toString</code> æ–¹æ³•è¿”å›åŸå§‹å€¼ï¼Œå°±è¿”å›è¿™ä¸ªå€¼ï¼›å…¶ä»–æƒ…å†µéƒ½è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p>ç”¨ä¾‹å­æ¥éªŒè¯ä¸€ä¸‹è¡¨æ ¼ä¸­çš„ç»“æœã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> == <span class="string">&#x27;true&#x27;</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><ul><li>é¦–å…ˆï¼Œå¸ƒå°”å€¼ä¼šè¢« <code>toNumber</code> æ–¹æ³•è½¬æ¢ä¸ºæ•°å­—ï¼Œå› æ­¤å¾—åˆ° <code>true == 1</code></li><li>å…¶æ¬¡ï¼Œç”¨ <code>toNumber</code> è½¬æ¢å­—ç¬¦ä¸²å€¼ã€‚å› ä¸ºå­—ç¬¦ä¸²åŒ…å«å­—æ¯ï¼Œæ‰€ä»¥ä¼šè¢«è½¬æˆ <code>NaN</code>ï¼Œå› æ­¤è¡¨è¾¾å¼å°±å˜æˆäº† <code>1 == NaN</code>ï¼Œç»“æœå°±æ˜¯ falseã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>for-in å’Œ for-of çš„åŒºåˆ«</title>
      <link href="/124e984dfd7e/"/>
      <url>/124e984dfd7e/</url>
      
        <content type="html"><![CDATA[<h1 id="è¿­ä»£çš„è¾“å…¥ä¸åŒ"><a href="#è¿­ä»£çš„è¾“å…¥ä¸åŒ" class="headerlink" title="è¿­ä»£çš„è¾“å…¥ä¸åŒ"></a>è¿­ä»£çš„è¾“å…¥ä¸åŒ</h1><ul><li><code>for...in</code> å¯ä»¥å¯¹ä»»ä½•å¯¹è±¡è¿›è¡Œæ“ä½œï¼›å®ƒé€šå¸¸è¢«ç”¨ä½œæ£€æŸ¥å¯¹è±¡çš„å±æ€§ã€‚</li><li><code>for...of</code> åªèƒ½å¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ“ä½œï¼›å®ƒé€šå¸¸è¢«ç”¨ä½œè¿­ä»£æ•°ç»„çš„å…ƒç´ ã€‚</li></ul><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">c</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key); <span class="comment">// &quot;a&quot;, &quot;b&quot;, &quot;c&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> value <span class="keyword">of</span> obj) &#123; <span class="comment">// Uncaught TypeError: obj is not iterable</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è¿­ä»£çš„è¾“å‡ºä¸åŒ"><a href="#è¿­ä»£çš„è¾“å‡ºä¸åŒ" class="headerlink" title="è¿­ä»£çš„è¾“å‡ºä¸åŒ"></a>è¿­ä»£çš„è¾“å‡ºä¸åŒ</h1><ul><li><code>for...in</code> è¿”å›è¢«è¿­ä»£å¯¹è±¡çš„é”®åˆ—è¡¨</li><li><code>for...of</code> è¿”å›è¢«è¿­ä»£å¯¹è±¡çš„æ•°å­—å±æ€§çš„å€¼åˆ—è¡¨</li></ul><h2 id="ä»£ç ç¤ºä¾‹-1"><a href="#ä»£ç ç¤ºä¾‹-1" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">list.<span class="property">foo</span> = <span class="string">&quot;bar&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> list) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">// &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;foo&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> list) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">// &quot;&quot;4&quot;, &quot;5&quot;, &quot;6&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p><img src="https://s2.loli.net/2022/04/12/RycBMqHSUPr8uXg.png"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pets = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;bat&#x27;</span>]);</span><br><span class="line">pets[<span class="string">&quot;species&quot;</span>] = <span class="string">&quot;mammal&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pet <span class="keyword">in</span> pets) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(pet); <span class="comment">// &quot;species&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pet <span class="keyword">of</span> pets) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(pet); <span class="comment">// &quot;cat&quot;, &quot;dog&quot;, &quot;bat&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p><img src="https://s2.loli.net/2022/04/12/x3WkK54cEUq2pDn.png"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pets = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="string">&quot;1&quot;</span>, <span class="string">&quot;cat&quot;</span>],[<span class="string">&quot;2&quot;</span>, <span class="string">&quot;dog&quot;</span>],[<span class="string">&quot;3&quot;</span>, <span class="string">&quot;bat&quot;</span>]]);</span><br><span class="line">pets[<span class="string">&quot;species&quot;</span>] = <span class="string">&quot;mammal&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pet <span class="keyword">in</span> pets) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(pet); <span class="comment">// &quot;species&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pet <span class="keyword">of</span> pets) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(pet); <span class="comment">// [&quot;1&quot;, &quot;cat&quot;], [&quot;2&quot;, &quot;dog&quot;], [&quot;3&quot;, &quot;bat&quot;]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://stackoverflow.com/questions/29285897/what-is-the-difference-between-for-in-and-for-of-statements">What is the difference between ( forâ€¦ in ) and ( forâ€¦ of ) statements?</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯•é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MongoDB å­¦ä¹ ç¬”è®°</title>
      <link href="/69a1dcb04fe1/"/>
      <url>/69a1dcb04fe1/</url>
      
        <content type="html"><![CDATA[<h1 id="MongoDB-ä»‹ç»"><a href="#MongoDB-ä»‹ç»" class="headerlink" title="MongoDB ä»‹ç»"></a>MongoDB ä»‹ç»</h1><blockquote><p>ä¸€ä¸ªé¢å‘æ–‡æ¡£å¯¹è±¡çš„æ•°æ®åº“ã€‚</p></blockquote><p>MongoDB æ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚ç”± C++ è¯­è¨€ç¼–å†™ã€‚æ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</p><p>MongoDB æ˜¯ä¸€ä¸ªä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚</p><h1 id="ç®¡ç†-MongoDB"><a href="#ç®¡ç†-MongoDB" class="headerlink" title="ç®¡ç† MongoDB"></a>ç®¡ç† MongoDB</h1><h2 id="å®‰è£…-MongoDB"><a href="#å®‰è£…-MongoDB" class="headerlink" title="å®‰è£… MongoDB"></a>å®‰è£… MongoDB</h2><p>é¦–å…ˆç¡®ä¿ä½ çš„åŒ…æ˜¯æœ€æ–°çš„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt upgrade -y</span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£… MongoDBï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mongodb</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥ mongodb æœåŠ¡çš„çŠ¶æ€ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status mongodb</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/13/YX7SqhNajgwHuZv.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡æ­£å¸¸å¯åŠ¨äº†ã€‚</p><h2 id="ç®¡ç†-MongoDB-1"><a href="#ç®¡ç†-MongoDB-1" class="headerlink" title="ç®¡ç† MongoDB"></a>ç®¡ç† MongoDB</h2><h3 id="æœåŠ¡çŠ¶æ€ç®¡ç†"><a href="#æœåŠ¡çŠ¶æ€ç®¡ç†" class="headerlink" title="æœåŠ¡çŠ¶æ€ç®¡ç†"></a>æœåŠ¡çŠ¶æ€ç®¡ç†</h3><p>MongoDB ç›®å‰æ˜¯ä¸€ä¸ª <code>systemd</code> æœåŠ¡ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ <code>systemctl</code> æ¥æ£€æŸ¥å’Œä¿®æ”¹å®ƒçš„çŠ¶æ€ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><ul><li>æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼š<code>sudo systemctl status mongodb</code></li><li>åœæ­¢æœåŠ¡çŠ¶æ€ï¼š<code>sudo systemctl stop mongodb</code></li><li>å¯åŠ¨æœåŠ¡çŠ¶æ€ï¼š<code>sudo systemctl start mongodb</code></li><li>é‡å¯æœåŠ¡çŠ¶æ€ï¼š<code>sudo systemctl restart mongodb</code></li><li>å¯ç”¨å¼€æœºè‡ªå¯åŠ¨ï¼š<code>sudo systemctl enable mongodb</code></li><li>ç¦ç”¨å¼€æœºè‡ªå¯åŠ¨ï¼š<code>sudo systemctl disable mongodb</code></li></ul><h3 id="é…ç½®ç®¡ç†"><a href="#é…ç½®ç®¡ç†" class="headerlink" title="é…ç½®ç®¡ç†"></a>é…ç½®ç®¡ç†</h3><ul><li>æŸ¥çœ‹é…ç½®æ–‡ä»¶ï¼š<code>sudo nano /etc/mongodb.conf</code></li></ul><h3 id="æ—¥å¿—ç®¡ç†"><a href="#æ—¥å¿—ç®¡ç†" class="headerlink" title="æ—¥å¿—ç®¡ç†"></a>æ—¥å¿—ç®¡ç†</h3><ul><li>æŸ¥çœ‹æ—¥å¿—ï¼š<code>sudo journalctl -u mongodb</code></li><li>æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š<code>sudo journalctl -u mongodb --no-pager -n 100 -f | grep -i error</code></li><li>æŸ¥çœ‹è­¦å‘Šæ—¥å¿—ï¼š<code>sudo journalctl -u mongodb --no-pager -n 100 -f | grep -i warning</code></li><li>æŸ¥çœ‹æç¤ºæ—¥å¿—ï¼š<code>sudo journalctl -u mongodb --no-pager -n 100 -f | grep -i notice</code></li></ul><h3 id="å¸è½½-MongoDB"><a href="#å¸è½½-MongoDB" class="headerlink" title="å¸è½½ MongoDB"></a>å¸è½½ MongoDB</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo systemctl stop mongodb</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo apt purge mongodb</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo apt autoremove</span></span><br></pre></td></tr></table></figure><h2 id="è¿œç¨‹ç®¡ç†-MongoDB"><a href="#è¿œç¨‹ç®¡ç†-MongoDB" class="headerlink" title="è¿œç¨‹ç®¡ç† MongoDB"></a>è¿œç¨‹ç®¡ç† MongoDB</h2><p>é»˜è®¤æ— æ³•è¿œç¨‹è®¿é—® MongoDBï¼Œæˆ‘ä»¬éœ€è¦å…ˆåœ¨æœåŠ¡å™¨å®‰å…¨ç»„ä¸­å¼€æ”¾ <code>27017</code> ç«¯å£ï¼Œç„¶åå†è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo /etc/mongodb.conf</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹  <code>bind_ip = 0.0.0.0</code> ä¸º <code>bind_ip = 0.0.0.0</code>ï¼Œç„¶åé‡å¯æœåŠ¡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo systemctl restart mongodb</span></span><br></pre></td></tr></table></figure><p>å®‰è£… <a href="https://studio3t.com/free">Studio 3T for Free</a>ï¼Œç„¶åè¿æ¥ï¼š</p><p><img src="https://s2.loli.net/2022/04/13/tUBEgnVpSAc715F.png"></p><h2 id="å®‰å…¨ç®¡ç†"><a href="#å®‰å…¨ç®¡ç†" class="headerlink" title="å®‰å…¨ç®¡ç†"></a>å®‰å…¨ç®¡ç†</h2><p>é»˜è®¤æˆ‘ä»¬ä¸éœ€è¦è®¤è¯å³å¯è¿æ¥ MongoDBï¼Œè¿™æ˜¯å¾ˆå±é™©çš„ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·æ¥è®¤è¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mongo</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">use admin</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">db.createUser(&#123;user:<span class="string">&quot;admin&quot;</span>, <span class="built_in">pwd</span>:<span class="string">&quot;123456&quot;</span>, roles:[&#123;role:<span class="string">&quot;userAdminAnyDatabase&quot;</span>, db:<span class="string">&quot;admin&quot;</span>&#125;]&#125;)</span></span><br></pre></td></tr></table></figure><p>ç„¶åé…ç½® MongoDB çš„å®‰å…¨ç­–ç•¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo nano /etc/mongodb.conf</span></span><br></pre></td></tr></table></figure><p>å°† <code>security.authorization = enabled</code> å†™å…¥æ–‡ä»¶ï¼Œç„¶åé‡å¯æœåŠ¡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart mongodb</span><br></pre></td></tr></table></figure><p>åœ¨ Studio 3T ä¸­é…ç½®ç”¨æˆ·åå¯†ç å³å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ Authentication DB éœ€è¦å¡«å†™å¯¹åº”çš„ã€‚</p><p><img src="https://s2.loli.net/2022/04/13/fLhd9t1sZ8KTaRA.png"></p><p>æ›´å¤šå®‰å…¨çŸ¥è¯†å‚è€ƒ <a href="https://help.aliyun.com/document_detail/112035.html">MongoDBæ•°æ®åº“æœªæˆæƒè®¿é—®æ¼æ´é˜²å¾¡æœ€ä½³å®è·µ</a></p><h1 id="MongoDB-æ¦‚å¿µ"><a href="#MongoDB-æ¦‚å¿µ" class="headerlink" title="MongoDB æ¦‚å¿µ"></a>MongoDB æ¦‚å¿µ</h1><ul><li>databaseï¼šæ•°æ®åº“ï¼Œæ˜¯ MongoDB çš„æ ¸å¿ƒï¼Œç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œæ¯ä¸ªæ•°æ®åº“éƒ½æœ‰è‡ªå·±çš„é›†åˆï¼Œé›†åˆä¸­å­˜å‚¨çš„æ˜¯æ•°æ®ã€‚</li><li>collectionï¼šé›†åˆï¼Œç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ï¼ˆtableï¼‰</li><li>documentï¼šæ–‡æ¡£ï¼Œç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡Œï¼ˆrowï¼‰</li><li>fieldï¼šå­—æ®µï¼Œç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„åˆ—ï¼ˆcolumnï¼‰</li><li>indexï¼šç´¢å¼•ï¼Œç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„ç´¢å¼•</li><li>primary keyï¼šä¸»é”®ï¼Œç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„ä¸»é”®ï¼ŒMongoDB ä¸­ä¸»é”®çš„åç§°é»˜è®¤ä¸º <code>_id</code></li></ul><h2 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h2><p>ä¸€ä¸ª mongodb ä¸­å¯ä»¥å»ºç«‹å¤šä¸ªæ•°æ®åº“ã€‚ MongoDB çš„é»˜è®¤æ•°æ®åº“ä¸º <code>db</code>ï¼Œè¯¥æ•°æ®åº“å­˜å‚¨åœ¨ data ç›®å½•ä¸­ã€‚</p><p>MongoDB çš„å•ä¸ªå®ä¾‹å¯ä»¥å®¹çº³å¤šä¸ªç‹¬ç«‹çš„æ•°æ®åº“ï¼Œæ¯ä¸€ä¸ªéƒ½æœ‰è‡ªå·±çš„é›†åˆå’Œæƒé™ï¼Œä¸åŒçš„æ•°æ®åº“ä¹Ÿé˜²æ­¢åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚</p><p><code>show dbs</code> å‘½ä»¤å¯ä»¥æ˜¾ç¤ºæ‰€æœ‰æ•°æ®çš„åˆ—è¡¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mongo</span></span><br><span class="line">MongoDB shell version v3.6.3</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017</span><br><span class="line">MongoDB server version: 3.6.3</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">show dbs</span></span><br><span class="line">admin   0.000GB</span><br><span class="line">config  0.000GB</span><br><span class="line">local   0.000GB</span><br></pre></td></tr></table></figure><p>è¿è¡Œ <code>use</code> å‘½ä»¤å¯ä»¥åˆ‡æ¢æ•°æ®åº“ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">use <span class="built_in">test</span></span></span><br><span class="line">switched to db test</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>db</code> å‘½ä»¤å¯ä»¥æ˜¾ç¤ºå½“å‰æ•°æ®åº“å¯¹è±¡æˆ–é›†åˆã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">db</span></span><br><span class="line">test</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“å‘½åè§„èŒƒ"><a href="#æ•°æ®åº“å‘½åè§„èŒƒ" class="headerlink" title="æ•°æ®åº“å‘½åè§„èŒƒ"></a>æ•°æ®åº“å‘½åè§„èŒƒ</h3><ul><li>ä¸èƒ½æ˜¯ç©ºå­—ç¬¦</li><li>ä¸èƒ½å«æœ‰ <code>&#39; &#39;</code>ï¼ˆç©ºæ ¼ï¼‰ã€<code>.</code>ã€<code>/</code>ã€<code>\</code> å’Œ <code>\0</code>ï¼ˆç©ºå­—ç¬¦ï¼‰</li><li>åº”å…¨éƒ¨å°å†™</li><li>æœ€å¤š 64 å­—èŠ‚</li></ul><h3 id="é»˜è®¤æ•°æ®åº“"><a href="#é»˜è®¤æ•°æ®åº“" class="headerlink" title="é»˜è®¤æ•°æ®åº“"></a>é»˜è®¤æ•°æ®åº“</h3><ul><li>adminï¼šä»æƒé™çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯ root æ•°æ®åº“ã€‚è¦æ˜¯å°†ä¸€ä¸ªç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªæ•°æ®åº“ï¼Œè¿™ä¸ªç”¨æˆ·è‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰æ•°æ®åº“çš„æƒé™ã€‚ä¸€äº›ç‰¹å®šçš„æœåŠ¡å™¨ç«¯å‘½ä»¤ä¹Ÿåªèƒ½ä»è¿™ä¸ªæ•°æ®åº“è¿è¡Œï¼Œæ¯”å¦‚åˆ—å‡ºæ‰€æœ‰çš„æ•°æ®åº“æˆ–è€…å…³é—­æœåŠ¡å™¨ã€‚</li><li>localï¼šè¿™ä¸ªæ•°æ®æ°¸è¿œä¸ä¼šè¢«å¤åˆ¶ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨é™äºæœ¬åœ°å•å°æœåŠ¡å™¨çš„ä»»æ„é›†åˆã€‚</li><li>configï¼šå½“ Mongo ç”¨äºåˆ†ç‰‡è®¾ç½®æ—¶ï¼Œconfig æ•°æ®åº“åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œç”¨äºä¿å­˜åˆ†ç‰‡çš„ç›¸å…³ä¿¡æ¯ã€‚</li></ul><h1 id="è¿æ¥-MongoDB"><a href="#è¿æ¥-MongoDB" class="headerlink" title="è¿æ¥ MongoDB"></a>è¿æ¥ MongoDB</h1><p>æ ‡å‡† URI è¿æ¥è¯­æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]</span><br></pre></td></tr></table></figure><ul><li><code>mongodb://</code>ï¼šè¿™æ˜¯å›ºå®šçš„æ ¼å¼ï¼Œå¿…é¡»æŒ‡å®š</li><li><code>username:password@</code>ï¼šå¯é€‰é¡¹ï¼Œå¦‚æœè®¾ç½®ï¼Œåœ¨è¿æ¥æ•°æ®åº“æœåŠ¡å™¨ä¹‹åï¼Œé©±åŠ¨éƒ½ä¼šå°è¯•ç™»å½•è¿™ä¸ªæ•°æ®åº“</li><li><code>host1</code>ï¼šå¿…é¡»çš„ï¼ŒæŒ‡å®šè‡³å°‘ä¸€ä¸ª hostï¼Œhost1 æ˜¯è¿™ä¸ª URI å”¯ä¸€è¦å¡«å†™çš„ã€‚å®ƒæŒ‡å®šäº†è¦è¿æ¥æœåŠ¡å™¨çš„åœ°å€ã€‚å¦‚æœè¦è¿æ¥å¤åˆ¶é›†ï¼Œè¯·æŒ‡å®šå¤šä¸ªä¸»æœºåœ°å€ã€‚</li><li><code>portX</code>ï¼šå¯é€‰çš„æŒ‡å®šç«¯å£ï¼Œå¦‚æœä¸å¡«ï¼Œé»˜è®¤ä¸º 27017</li><li><code>/database</code>ï¼šå¦‚æœæŒ‡å®š <code>username:password@</code>ï¼Œè¿æ¥å¹¶éªŒè¯ç™»å½•æŒ‡å®šæ•°æ®åº“ã€‚è‹¥ä¸æŒ‡å®šï¼Œé»˜è®¤æ‰“å¼€ test æ•°æ®åº“ã€‚</li><li><code>?options</code>ï¼šæ˜¯è¿æ¥é€‰é¡¹ã€‚å¦‚æœä¸ä½¿ç”¨ <code>/database</code>ï¼Œåˆ™å‰é¢éœ€è¦åŠ ä¸Š <code>/</code>ã€‚æ‰€æœ‰è¿æ¥é€‰é¡¹éƒ½æ˜¯é”®å€¼å¯¹ <code>name=value</code>ï¼Œé”®å€¼å¯¹ä¹‹é—´é€šè¿‡ <code>&amp;</code> æˆ– <code>;</code> éš”å¼€</li></ul><h2 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h2><h3 id="å®‰è£…é©±åŠ¨"><a href="#å®‰è£…é©±åŠ¨" class="headerlink" title="å®‰è£…é©±åŠ¨"></a>å®‰è£…é©±åŠ¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add mongodb</span></span><br></pre></td></tr></table></figure><h3 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h3><p>è¦åœ¨ MongoDB ä¸­åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª MongoClient å¯¹è±¡ï¼Œç„¶åé…ç½®å¥½æŒ‡å®šçš„ URL å’Œç«¯å£å·ã€‚</p><p>å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼ŒMongoDB å°†åˆ›å»ºæ•°æ®åº“å¹¶å»ºç«‹è¿æ¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/luozhu&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ•°æ®åº“å·²åˆ›å»ºï¼&quot;</span>);</span><br><span class="line">  db.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºé›†åˆ"><a href="#åˆ›å»ºé›†åˆ" class="headerlink" title="åˆ›å»ºé›†åˆ"></a>åˆ›å»ºé›†åˆ</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>createCollection()</code> æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œè¿™ä¸ªé›†åˆå¯ä»¥æ˜¯ç©ºçš„ï¼Œä¹Ÿå¯ä»¥åŒ…å«æ•°æ®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/luozhu&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  dbo.<span class="title function_">createCollection</span>(<span class="string">&quot;site&quot;</span>, <span class="keyword">function</span>(<span class="params">err, res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;é›†åˆå·²åˆ›å»ºï¼&quot;</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h3><p>ä»¥ä¸‹å®ä¾‹æˆ‘ä»¬è¿æ¥æ•°æ®åº“ luozhu çš„ site è¡¨ï¼Œå¹¶æ’å…¥ä¸€æ¡æ•°æ®ã€‚ä½¿ç”¨ <code>insertOne()</code> ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/luozhu&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> myobj = &#123; <span class="attr">name</span>: <span class="string">&quot;Google&quot;</span>, <span class="attr">address</span>: <span class="string">&quot;https://google.com&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">insertOne</span>(myobj, <span class="keyword">function</span>(<span class="params">err, res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–‡æ¡£æ’å…¥æˆåŠŸ&quot;</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦æ’å…¥å¤šæ¡æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>insertMany()</code> ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&quot;mongodb&quot;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> myobj = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;Facebook&#x27;</span>, <span class="attr">website</span>: <span class="string">&#x27;https://www.facebook.com/&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;Github&#x27;</span>, <span class="attr">website</span>: <span class="string">&#x27;https://github.com&#x27;</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">insertMany</span>(myobj, <span class="keyword">function</span>(<span class="params">err, res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–‡æ¡£æ’å…¥æˆåŠŸ&quot;</span>, res.<span class="property">insertedCount</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h3><h4 id="æŸ¥è¯¢æ‰€æœ‰æ•°æ®"><a href="#æŸ¥è¯¢æ‰€æœ‰æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰æ•°æ®"></a>æŸ¥è¯¢æ‰€æœ‰æ•°æ®</h4><p>å¯ä»¥ä½¿ç”¨ <code>find()</code> æ¥æŸ¥æ‰¾æ•°æ®ã€‚<code>find()</code> å¯ä»¥è¿”å›ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰æ•°æ®ã€‚å¦‚æœæœªæŒ‡å®šæ¡ä»¶ï¼Œ<code>find()</code> è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æ•°æ®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&quot;mongodb&quot;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line"></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">find</span>(&#123;&#125;).<span class="title function_">toArray</span>(<span class="keyword">function</span>(<span class="params">err, result</span>) &#123; <span class="comment">// è¿”å›é›†åˆä¸­æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢æŒ‡å®šæ¡ä»¶çš„æ•°æ®"><a href="#æŸ¥è¯¢æŒ‡å®šæ¡ä»¶çš„æ•°æ®" class="headerlink" title="æŸ¥è¯¢æŒ‡å®šæ¡ä»¶çš„æ•°æ®"></a>æŸ¥è¯¢æŒ‡å®šæ¡ä»¶çš„æ•°æ®</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&quot;mongodb&quot;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> whereStr = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&#x27;Github&#x27;</span>&#125;;  <span class="comment">// æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">find</span>(whereStr).<span class="title function_">toArray</span>(<span class="keyword">function</span>(<span class="params">err, result</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°æ–‡æ¡£"><a href="#æ›´æ–°æ–‡æ¡£" class="headerlink" title="æ›´æ–°æ–‡æ¡£"></a>æ›´æ–°æ–‡æ¡£</h3><h4 id="æ›´æ–°ä¸€æ¡æ–‡æ¡£"><a href="#æ›´æ–°ä¸€æ¡æ–‡æ¡£" class="headerlink" title="æ›´æ–°ä¸€æ¡æ–‡æ¡£"></a>æ›´æ–°ä¸€æ¡æ–‡æ¡£</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&quot;mongodb&quot;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> whereStr = &#123; <span class="string">&quot;name&quot;</span>: <span class="string">&#x27;Github&#x27;</span> &#125;;  <span class="comment">// æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">  <span class="keyword">var</span> updateStr = &#123; <span class="attr">$set</span>:&#123; <span class="string">&quot;website&quot;</span>: <span class="string">&quot;https://github.com/youngjuning&quot;</span> &#125;&#125;;  <span class="comment">// æ›´æ–°å†…å®¹</span></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">updateOne</span>(whereStr, updateStr, <span class="keyword">function</span> (<span class="params">err, res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–‡æ¡£æ›´æ–°æˆåŠŸ&quot;</span>, res.<span class="property">matchedCount</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒæˆåŠŸåï¼Œè¿›å…¥ mongo ç®¡ç†å·¥å…·æŸ¥çœ‹æ•°æ®å·²ä¿®æ”¹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.site.find(&#123; name: <span class="string">&quot;GitHub&quot;</span> &#125;).<span class="function"><span class="title">pretty</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;_id&quot;</span> : ObjectId(<span class="string">&quot;5a794e36763eb821b24db854&quot;</span>),</span><br><span class="line">    <span class="string">&quot;name&quot;</span> : <span class="string">&quot;Github&quot;</span>,</span><br><span class="line">    <span class="string">&quot;url&quot;</span> : <span class="string">&quot;https://www.github.com&quot;</span>     <span class="comment"># å·²ä¿®æ”¹ä¸º https</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ›´æ–°å¤šæ¡æ–‡æ¡£"><a href="#æ›´æ–°å¤šæ¡æ–‡æ¡£" class="headerlink" title="æ›´æ–°å¤šæ¡æ–‡æ¡£"></a>æ›´æ–°å¤šæ¡æ–‡æ¡£</h4><p>å¦‚æœè¦è·Ÿæ–°æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>updateMany()</code> ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27018/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="function">(<span class="params">err, db</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> whereStr = &#123;<span class="string">&quot;country&quot;</span>: <span class="string">&#x27;us&#x27;</span>&#125;;  <span class="comment">// æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">  <span class="keyword">var</span> updateStr = &#123;<span class="attr">$set</span>: &#123; <span class="string">&quot;country&quot;</span> : <span class="string">&quot;American&quot;</span> &#125;&#125;;</span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">updateMany</span>(whereStr, updateStr, <span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">modifiedCount</span> + <span class="string">&quot; æ¡æ–‡æ¡£è¢«æ›´æ–°&quot;</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>res.modifiedCount</code> å±æ€§è¿”å›ä¿®æ”¹çš„æ–‡æ¡£æ•°é‡ã€‚</p><h3 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h3><h4 id="åˆ é™¤ä¸€æ¡æ•°æ®"><a href="#åˆ é™¤ä¸€æ¡æ•°æ®" class="headerlink" title="åˆ é™¤ä¸€æ¡æ•°æ®"></a>åˆ é™¤ä¸€æ¡æ•°æ®</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27018/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="function">(<span class="params">err, db</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> whereStr = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&#x27;Github&#x27;</span>&#125;;  <span class="comment">// æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">deleteOne</span>(whereStr, <span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">deletedCount</span> + <span class="string">&quot; æ¡æ–‡æ¡£è¢«åˆ é™¤&quot;</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤å¤šæ¡æ•°æ®"><a href="#åˆ é™¤å¤šæ¡æ•°æ®" class="headerlink" title="åˆ é™¤å¤šæ¡æ•°æ®"></a>åˆ é™¤å¤šæ¡æ•°æ®</h4><p>å¦‚æœè¦åˆ é™¤å¤šæ¡è¯­å¥å¯ä»¥ä½¿ç”¨ <code>deleteMany()</code> æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27018/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> whereStr = &#123;<span class="attr">country</span>: <span class="string">&quot;American&quot;</span>&#125;;  <span class="comment">// æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">deleteMany</span>(whereStr, <span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">deletedCount</span>, <span class="string">&quot;æ¡æ–‡æ¡£è¢«åˆ é™¤&quot;</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>res.deletedCount</code> å±æ€§è¿”å›åˆ é™¤çš„æ–‡æ¡£æ•°é‡ã€‚</p><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><ul><li><a href="https://zhuanlan.zhihu.com/p/76349679">å¦‚ä½•åœ¨ Ubuntu ä¸Šå®‰è£… MongoDB</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å…¨æ ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>code-server å°é²œ</title>
      <link href="/dfd0faf39738/"/>
      <url>/dfd0faf39738/</url>
      
        <content type="html"><![CDATA[<h1 id="WebIDE-æ¦‚è¿°"><a href="#WebIDE-æ¦‚è¿°" class="headerlink" title="WebIDE æ¦‚è¿°"></a>WebIDE æ¦‚è¿°</h1><h2 id="WebIDE-ä»‹ç»"><a href="#WebIDE-ä»‹ç»" class="headerlink" title="WebIDE ä»‹ç»"></a>WebIDE ä»‹ç»</h2><p>WebIDE æ˜¯åŸºäº H5 æ”¯æŒå¤šè¯­è¨€çš„åœ¨çº¿é›†æˆå¼€å‘ç¯å¢ƒã€‚ç›¸è¾ƒäºä¼ ç»Ÿçš„æœ¬åœ° IDEï¼ŒWebIDE æ˜¯å¼€ç®±å³ç”¨çš„ï¼Œä½ ä¸ç”¨é…ç½® git ç¯å¢ƒã€node ç¯å¢ƒã€react ç¯å¢ƒç”šè‡³ React Native ç¯å¢ƒã€‚</p><h2 id="WebIDE-å‘å±•ä¸ç°çŠ¶"><a href="#WebIDE-å‘å±•ä¸ç°çŠ¶" class="headerlink" title="WebIDE å‘å±•ä¸ç°çŠ¶"></a>WebIDE å‘å±•ä¸ç°çŠ¶</h2><ul><li>åŸºäº <a href="https://codemirror.net/">CodeMirror</a> å’Œ <a href="https://ace.c9.io/">Ace</a> å®ç°ç¼–è¾‘å™¨éƒ¨åˆ†ï¼Œå…¶ä½™éƒ¨åˆ†è‡ªå·±å®ç°</li><li>ä»¥ <a href="https://codesandbox.io/">CodeSandbox</a> ä¸ºä»£è¡¨çš„çš„åœ¨çº¿ä»£ç ç¼–è¾‘å™¨æœåŠ¡ï¼Œç§æœ‰éƒ¨ç½²è¾ƒéº»çƒ¦</li><li><a href="https://gitlab.com/youngjuning/react">Gitlab ide</a>ï¼šé›†æˆåœ¨ Gitlab ä¸­çš„ IDE</li><li><a href="https://github.com/facebook/react/">Github ide</a>ï¼šåŸºäº vscode å®ç°çš„ä¸ github ç»“åˆçš„ IDEï¼Œé™åˆ¶æ˜¯å‘½ä»¤è¡Œä½¿ç”¨æœ‰é™åˆ¶ï¼Œ</li><li><a href="https://codingcorp.cloudstudio.net/ws/qmbngm">Cloud Studio</a>ï¼šå¯ä»¥ç†è§£ä¸ºå›½äº§ CodeSandboxï¼Œä»¥å‰æ˜¯åŸºäº Ace åšçš„ï¼Œç°åœ¨ä¹Ÿæ”¹æˆäº†åŸºäº vscodeï¼Œè‡ªå®šä¹‰åŠŸèƒ½é€šè¿‡ vscode çš„æ’ä»¶ä½“ç³»æ¥åš</li></ul><p>é€šè¿‡æ¯”å¯¹å¸‚åœºä¸Šå¸¸è§çš„ WebIDE äº§å“ï¼Œæˆ‘ä»¬èƒ½å‘ç°è¶‹åŠ¿éƒ½è¶‹äºç»Ÿä¸€äº†ï¼Œå°±æ˜¯ä¾æ‰˜ vscode å¼ºå¤§çš„èƒ½åŠ›æ¥å®ç°çš„ï¼Œæ‰©å±•èƒ½åŠ›ä¹Ÿæ˜¯åŸºäº vscode æ¥å®ç°ã€‚</p><h2 id="WebIDE-é€šç”¨æ¶æ„"><a href="#WebIDE-é€šç”¨æ¶æ„" class="headerlink" title="WebIDE é€šç”¨æ¶æ„"></a>WebIDE é€šç”¨æ¶æ„</h2><p><img src="https://s2.loli.net/2022/03/23/UfjaX4QpTmg5MKu.png"></p><h2 id="WebIDE-çš„ä¼˜åŠ¿"><a href="#WebIDE-çš„ä¼˜åŠ¿" class="headerlink" title="WebIDE çš„ä¼˜åŠ¿"></a>WebIDE çš„ä¼˜åŠ¿</h2><ul><li>åœ¨å…·æœ‰ä¸€è‡´å¼€å‘ç¯å¢ƒçš„ä»»ä½•è®¾å¤‡ä¸Šç¼–å†™ä»£ç </li><li>ä½¿ç”¨äº‘æœåŠ¡å™¨åŠ é€Ÿæµ‹è¯•ã€ç¼–è¯‘ã€ä¸‹è½½ç­‰æ¥èŠ‚çœæ—…é€”ä¸­çš„ç¬”è®°æœ¬ç”µé‡</li><li>æ‰€æœ‰å¯†é›†å‹ä»»åŠ¡éƒ½åœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šè¿è¡Œï¼ŒèŠ‚çœç¬”è®°æœ¬å†…å­˜</li></ul><h2 id="å·¥ç¨‹åŒ–æ„ä¹‰"><a href="#å·¥ç¨‹åŒ–æ„ä¹‰" class="headerlink" title="å·¥ç¨‹åŒ–æ„ä¹‰"></a>å·¥ç¨‹åŒ–æ„ä¹‰</h2><ul><li>å®‰å…¨æ€§ï¼šæœåŠ¡éƒ¨ç½²åœ¨å†…ç½‘ï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒå®‰å…¨é—®é¢˜ï¼Œä¸”æ’ä»¶æœåŠ¡ä¹Ÿå¯ä»¥å†…ç½‘éƒ¨ç½²ã€‚</li><li>è§„èŒƒæ€§ï¼šé€šè¿‡å®šåˆ¶ç¼–è¾‘å™¨ï¼Œæˆ‘ä»¬å¯ä»¥è§„èŒƒå¼€å‘é˜¶æ®µçš„æµç¨‹ä¸ç¯å¢ƒ</li><li>ææ•ˆæ€§ï¼šé€šè¿‡å®æ—¶é¢„è§ˆæŠ€æœ¯ï¼Œå¯ä»¥å®ç°å¼€å‘é˜¶æ®µé€šè¿‡ mock æ•°æ®å³å¯é¢„è§ˆé¢æ¿ã€‚å¦å¤–ç”±äºæ˜¯é’ˆå¯¹ OS ä¸šåŠ¡å®šåˆ¶ï¼Œæ‰€ä»¥å¼€å‘å¥—ä»¶éƒ½æ˜¯å®šåˆ¶å¥½çš„ï¼Œå¼€å‘åªéœ€è¦å…³å¿ƒä»£ç </li><li>å¹³å°åŒ–ï¼šå¯ä»¥å’Œå†…éƒ¨ä»»ä½•å¹³å°æ‰“é€šäº¤äº’ï¼Œæ¯”å¦‚ä¸€é”®æ‰“åŒ…ã€ä¸€é”®å‘å¸ƒ</li></ul><h1 id="åŸºäº-code-server-æ­å»º-WebIDE-å¹³å°"><a href="#åŸºäº-code-server-æ­å»º-WebIDE-å¹³å°" class="headerlink" title="åŸºäº code-server æ­å»º WebIDE å¹³å°"></a>åŸºäº code-server æ­å»º WebIDE å¹³å°</h1><p>code-server æ˜¯ä¸€ä¸ªå…è´¹çš„åŸºäºæµè§ˆå™¨çš„ IDEï¼Œå®ƒæ˜¯åŸºäº vscode å°è£…çš„è·¨å¹³å° IDEã€‚</p><h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><h3 id="å®‰è£…-nodejs"><a href="#å®‰è£…-nodejs" class="headerlink" title="å®‰è£… nodejs"></a>å®‰è£… nodejs</h3><p><strong>å®‰è£…æº</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -</span><br></pre></td></tr></table></figure><p><strong>å®‰è£… nodejs</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y nodejs</span><br></pre></td></tr></table></figure><p><strong>æ›´æ–° npm</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g npm</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-code-server"><a href="#å®‰è£…-code-server" class="headerlink" title="å®‰è£… code-server"></a>å®‰è£… code-server</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://code-server.dev/install.sh | sh</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ä»¥æ”¯æŒ systemd æ–¹å¼å¯åŠ¨å¹¶å¼€å§‹å¼€æœºè‡ªå¯åŠ¨ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> --now code-server@<span class="variable">$USER</span></span><br></pre></td></tr></table></figure><p>ä¹‹åå¦‚æœä¿®æ”¹äº†é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>sudo systemctl restart code-server@$USER</code> é‡å¯æœåŠ¡ã€‚</p><p>æˆ–è€…ä½ ä¸éœ€è¦åå°æœåŠ¡ï¼Œä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code-server</span><br></pre></td></tr></table></figure><h3 id="nginx-åå‘ä»£ç†"><a href="#nginx-åå‘ä»£ç†" class="headerlink" title="nginx åå‘ä»£ç†"></a>nginx åå‘ä»£ç†</h3><p>å®‰è£… nginxï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install -y nginx</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;</span><br><span class="line">    server_name mydomain.com;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">      proxy_pass http://localhost:8080/;</span><br><span class="line">      proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">      proxy_set_header Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">      proxy_set_header Connection upgrade;</span><br><span class="line">      proxy_set_header Accept-Encoding gzip;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•é˜…è¯»"><a href="#æ‰©å±•é˜…è¯»" class="headerlink" title="æ‰©å±•é˜…è¯»"></a>æ‰©å±•é˜…è¯»</h2><ul><li><a href="https://www.zhihu.com/question/41050429">è¦å®ç°ä¸€ä¸ªWeb IDE éœ€è¦å“ªäº›å‰ç«¯æŠ€æœ¯ï¼Ÿ</a></li><li><a href="https://developer.aliyun.com/article/646273">WebIDE ä½¿ç”¨æŒ‡å— - é˜¿é‡Œäº‘</a></li><li><a href="https://docs.gitlab.com/ee/user/project/web_ide/">ç½‘ç»œIDE - GitLab</a></li><li><a href="https://www.youtube.com/watch?v=lfYo4mfOyM8">What is CodeSandbox</a></li><li><a href="https://juejin.cn/post/7008428269317914661">å¦‚ä½•åœ¨å›¢é˜Ÿå¿«é€Ÿè½åœ° WebIDE</a></li><li><a href="https://learnku.com/articles/42581">Ubuntu å®‰è£…æœ€æ–°ç‰ˆæœ¬ Node.js</a></li><li><a href="https://www.jianshu.com/p/648c48f146c6">è…¾è®¯äº‘ç™»å½•Rootç”¨æˆ·</a></li><li><a href="https://youngjuning.js.org/21bdf0b4bd15/">å†™ç»™å‰ç«¯çš„Linuxå®æˆ˜æ•™ç¨‹</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
            <tag> ide </tag>
            
            <tag> code-sever </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ MetaMask è¿æ¥åˆ°å¸å®‰æ™ºèƒ½é“¾(BSC)</title>
      <link href="/5cb0c0ce25b8/"/>
      <url>/5cb0c0ce25b8/</url>
      
        <content type="html"><![CDATA[<p>å¸å®‰æ™ºèƒ½é“¾æ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å¤§çš„ä»¥å¤ªåŠäº¤æ˜“æ‰€ï¼ŒMetaMask åˆ™æ˜¯ä¸“æ³¨æœåŠ¡äºä»¥å¤ªåŠçš„é’±åŒ…åº”ç”¨ã€‚</p><h2 id="å…¥å£"><a href="#å…¥å£" class="headerlink" title="å…¥å£"></a>å…¥å£</h2><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202112301451827.png"></p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><ul><li>ç½‘ç»œåç§°: <code>å¸å®‰æ™ºèƒ½é“¾</code></li><li>RPC URL: <code>https://bsc-dataseed1.binance.org/</code></li><li>é“¾ ID: <code>56</code></li><li>Currency Symbol: <code>WBNB</code></li><li>åŒºå—æµè§ˆå™¨: <code>https://bscscan.com/</code></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://academy.binance.com/zh/articles/connecting-metamask-to-binance-smart-chain">åœ¨å¸å®‰æ™ºèƒ½é“¾ä¸­å…³è”MetaMaské’±åŒ…</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> åŒºå—é“¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MetaMask </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Hooks é—®é¢˜è®°å½•</title>
      <link href="/c22a00ea88bc/"/>
      <url>/c22a00ea88bc/</url>
      
        <content type="html"><![CDATA[<p>React Hooks åœ¨</p><h2 id="Warning-Canâ€™t-perform-a-React-state-update-on-an-unmounted-component"><a href="#Warning-Canâ€™t-perform-a-React-state-update-on-an-unmounted-component" class="headerlink" title="Warning: Canâ€™t perform a React state update on an unmounted component"></a>Warning: Canâ€™t perform a React state update on an unmounted component</h2><p>ç”±äº <code>useEffect</code> ä¸­æœ‰å¼‚æ­¥æ“ä½œï¼Œå½“ç»„ä»¶å¸è½½åå¼‚æ­¥æ“ä½œç»“æŸå¹¶æ‰§è¡Œ state æ“ä½œï¼ŒReact å°±ä¼šæé†’å­˜åœ¨å†…å­˜æ³„æ¼çš„é£é™©ã€‚åœ¨ React Hooks ä¸­ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨å¼‚æ­¥æ“ä½œä¸­åˆ¤æ–­æ˜¯å¦ç»„ä»¶è¢«å¸è½½äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useAsync</span>(<span class="params">asyncFn, onSuccess</span>) &#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> isActive = <span class="literal">true</span>;</span><br><span class="line">    <span class="title function_">asyncFn</span>().<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (isActive) <span class="title function_">onSuccess</span>(data);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123; isActive = <span class="literal">false</span> &#125;;</span><br><span class="line">  &#125;, [asyncFn, onSuccess]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ahooks æä¾›çš„åŠŸèƒ½æ›´å¼ºå¤§çš„ <code>useAsyncEffect</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useAsyncEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;ahooks&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mockCheck</span>(<span class="params"></span>): <span class="title class_">Promise</span>&lt;boolean&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>(<span class="literal">true</span>), <span class="number">3000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [pass, setPass] = useState&lt;boolean&gt;(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useAsyncEffect</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="title function_">setPass</span>(<span class="keyword">await</span> <span class="title function_">mockCheck</span>());</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;pass === null &amp;&amp; &#x27;Checking...&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;pass === true &amp;&amp; &#x27;Check passed.&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
            <tag> hooks </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäº Next.js å¼€å‘ BSC DApp</title>
      <link href="/cba1320bcd71/"/>
      <url>/cba1320bcd71/</url>
      
        <content type="html"><![CDATA[<h2 id="é¡¹ç›®åˆå§‹åŒ–"><a href="#é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="é¡¹ç›®åˆå§‹åŒ–"></a>é¡¹ç›®åˆå§‹åŒ–</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-next-app@latest --typescript</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œæ ¹æ®æŒ‡ç¤ºå¼€å¯å¼€å‘æ¨¡å¼çš„ serverã€‚ç„¶åå°è¯•ç¼–è¾‘ <code>pages/index.tsx</code> å¹¶åœ¨æµè§ˆå™¨æŸ¥çœ‹ç»“æœã€‚</p><h2 id="å¼€å‘è§„èŒƒ"><a href="#å¼€å‘è§„èŒƒ" class="headerlink" title="å¼€å‘è§„èŒƒ"></a>å¼€å‘è§„èŒƒ</h2><h3 id="commitlint"><a href="#commitlint" class="headerlink" title="commitlint"></a>commitlint</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx @luozhu/create-commitlint</span><br></pre></td></tr></table></figure><h3 id="prettier"><a href="#prettier" class="headerlink" title="prettier"></a>prettier</h3><h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add prettier eslint-config-prettier eslint-plugin-prettier @luozhu/prettier-config -D</span><br></pre></td></tr></table></figure><h4 id="é…ç½®-eslintrc-json"><a href="#é…ç½®-eslintrc-json" class="headerlink" title="é…ç½® .eslintrc.json"></a>é…ç½® .eslintrc.json</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;next/core-web-vitals&quot;</span><span class="punctuation">,</span> <span class="string">&quot;plugin:prettier/recommended&quot;</span><span class="punctuation">,</span> <span class="string">&quot;prettier&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;no-unused-vars&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;react-hooks/exhaustive-deps&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@next/next/no-img-element&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®-prettierrc-js"><a href="#é…ç½®-prettierrc-js" class="headerlink" title="é…ç½® .prettierrc.js"></a>é…ç½® .prettierrc.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="built_in">require</span>(<span class="string">&#x27;@luozhu/prettier-config&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="editorconfig"><a href="#editorconfig" class="headerlink" title=".editorconfig"></a>.editorconfig</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># EditorConfig is awesome: http://EditorConfig.org</span><br><span class="line"></span><br><span class="line"># top-most EditorConfig file</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line"># Unix-style newlines with a newline ending every file</span><br><span class="line">[*]</span><br><span class="line">quote_type = single # Fix Prettier &quot;prettier.singleQuote&quot; not working in 1.40 vs code</span><br><span class="line">indent_style = space</span><br><span class="line">indent_size = 2</span><br><span class="line">end_of_line = lf</span><br><span class="line">charset = utf-8</span><br><span class="line">trim_trailing_whitespace = true</span><br><span class="line">insert_final_newline = true</span><br><span class="line"></span><br><span class="line">[*.md]</span><br><span class="line">trim_trailing_whitespace = false</span><br><span class="line"></span><br><span class="line">[Makefile]</span><br><span class="line">indent_style = tab</span><br></pre></td></tr></table></figure><h3 id="lint-staged"><a href="#lint-staged" class="headerlink" title="lint-staged"></a>lint-staged</h3><p>å®‰è£… lint-stagedï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add lint-staged -D</span><br></pre></td></tr></table></figure><p>åœ¨ <code>package.json</code> æ–‡ä»¶ä¸­å¦‚ä¸‹é…ç½®å³å¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;gitHooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;pre-commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;commit-msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commitlint -e -V&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;js,jsx,ts,tsx&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;eslint --fix&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;md,json&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;prettier --write&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="antd-å¼€å‘"><a href="#antd-å¼€å‘" class="headerlink" title="antd å¼€å‘"></a>antd å¼€å‘</h2><h3 id="å®‰è£…ä¾èµ–-1"><a href="#å®‰è£…ä¾èµ–-1" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add antd</span><br></pre></td></tr></table></figure><h3 id="NextJS-ä½¿ç”¨-Less-ç¼–è¯‘-Antd"><a href="#NextJS-ä½¿ç”¨-Less-ç¼–è¯‘-Antd" class="headerlink" title="NextJS ä½¿ç”¨ Less ç¼–è¯‘ Antd"></a>NextJS ä½¿ç”¨ Less ç¼–è¯‘ Antd</h3><p>ä½¿ç”¨ yarn å®‰è£… next-with-less åŒ…ï¼Œå¹¶é¡ºå¸¦æœ€æ–°ç‰ˆæœ¬çš„ less å’Œ less-loaderï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add next-with-less less less-loader -D</span><br></pre></td></tr></table></figure><p>å¹¶ä¿®æ”¹ <code>next.config.js</code> é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// next.config.js</span></span><br><span class="line"><span class="keyword">const</span> withLess = <span class="built_in">require</span>(<span class="string">&quot;next-with-less&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;next&#x27;).NextConfig</span>&#125; */</span></span><br><span class="line"><span class="keyword">let</span> config = &#123;</span><br><span class="line">  <span class="attr">reactStrictMode</span>: <span class="literal">true</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">config = <span class="title function_">withLess</span>(&#123;</span><br><span class="line">  ...config,</span><br><span class="line">  <span class="attr">lessLoaderOptions</span>: &#123;</span><br><span class="line">    <span class="attr">lessOptions</span>: &#123;</span><br><span class="line">      <span class="attr">modifyVars</span>: &#123;</span><br><span class="line">        <span class="string">&quot;@primary-color&quot;</span>: <span class="string">&quot;#f74a49&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@border-radius-base&quot;</span>: <span class="string">&quot;.5em&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = config</span><br></pre></td></tr></table></figure><h3 id="å¼•å…¥-antd-less"><a href="#å¼•å…¥-antd-less" class="headerlink" title="å¼•å…¥ antd less"></a>å¼•å…¥ antd less</h3><p>åœ¨ <code>pages/_app.tsx</code> ä¸­å¼•å…¥ less</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;antd/lib/style/themes/default.less&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;antd/dist/antd.less&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-dayjs-æ›¿æ¢-moment-js"><a href="#ä½¿ç”¨-dayjs-æ›¿æ¢-moment-js" class="headerlink" title="ä½¿ç”¨ dayjs æ›¿æ¢ moment.js"></a>ä½¿ç”¨ dayjs æ›¿æ¢ moment.js</h3><p>æŒ‰ç…§ <a href="https://ant.design/docs/react/replace-moment-cn#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6">è‡ªå®šä¹‰ç»„ä»¶</a> çš„æ–¹å¼è‡ªå®šä¹‰ç»„ä»¶åœ¨ Next.js ä¸­æ˜¯ä¸å¤Ÿçš„ï¼Œéœ€è¦ä½¿ç”¨ next-transpile-modules åšè¿›ä¸€æ­¥çš„å¤„ç†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// next.config.js</span></span><br><span class="line"><span class="keyword">const</span> withTM = <span class="built_in">require</span>(<span class="string">&#x27;next-transpile-modules&#x27;</span>)([</span><br><span class="line">  <span class="string">&#x27;rc-picker&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;rc-util&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;antd&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;rc-pagination&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;rc-notification&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;@ant-design/icons&#x27;</span>,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;next&#x27;).NextConfig</span>&#125; */</span></span><br><span class="line"><span class="keyword">let</span> config = &#123;</span><br><span class="line">  <span class="attr">reactStrictMode</span>: <span class="literal">true</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">config = <span class="title function_">withTM</span>(config);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = config</span><br></pre></td></tr></table></figure><p>åœ¨ <code>_app.tsx</code> ä¸­åˆå§‹åŒ– dayjsï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ– dayjs</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dayjs/locale/zh-cn&#x27;</span>;</span><br><span class="line">dayjs.<span class="title function_">locale</span>(<span class="string">&#x27;zh-cn&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h3><p>å¸ƒå±€ä½¿ç”¨çš„æ˜¯ antd çš„ Layoutï¼Œæˆ‘é€‰ç”¨çš„æ˜¯ä¾§è¾¹æ å¸ƒå±€ã€‚</p><h4 id="Layout-tsx"><a href="#Layout-tsx" class="headerlink" title="Layout.tsx"></a>Layout.tsx</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Layout</span>, <span class="title class_">Menu</span>, <span class="title class_">Breadcrumb</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Sider</span> <span class="keyword">from</span> <span class="string">&#x27;./Sider&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Header</span>, <span class="title class_">Content</span>, <span class="title class_">Footer</span> &#125; = <span class="title class_">Layout</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">AppLayout</span> = (<span class="params">&#123;children&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">minHeight:</span> &#x27;<span class="attr">100vh</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Sider</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Layout</span> <span class="attr">className</span>=<span class="string">&quot;site-layout&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Header</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">padding:</span> <span class="attr">0</span>, <span class="attr">backgroundColor:</span> &#x27;#<span class="attr">ffffff</span>&#x27; &#125;&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Content</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">margin:</span> &#x27;<span class="attr">0</span> <span class="attr">16px</span>&#x27; &#125;&#125;&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Footer</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            Crypto Meta Â©2021 Powered by&#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">className</span>=<span class="string">&quot;default&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://nextjs.org/&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noreferrer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              Next.js</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Sider-tsx"><a href="#Sider-tsx" class="headerlink" title="Sider.tsx"></a>Sider.tsx</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Layout</span>, <span class="title class_">Menu</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;next/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Link</span> <span class="keyword">from</span> <span class="string">&#x27;next/link&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> menus <span class="keyword">from</span> <span class="string">&#x27;config/menus&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Sider</span> &#125; = <span class="title class_">Layout</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">AppSider</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line">  <span class="keyword">const</span> [collapsed, setCollapsed] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onCollapse</span> = (<span class="params">collapsed: <span class="built_in">boolean</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCollapsed</span>(collapsed);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Sider</span> <span class="attr">breakpoint</span>=<span class="string">&quot;lg&quot;</span> <span class="attr">collapsible</span> <span class="attr">collapsed</span>=<span class="string">&#123;collapsed&#125;</span> <span class="attr">onCollapse</span>=<span class="string">&#123;onCollapse&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Menu</span> <span class="attr">theme</span>=<span class="string">&quot;dark&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;inline&quot;</span> <span class="attr">selectedKeys</span>=<span class="string">&#123;[router.pathname]&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;menus.map(menu =&gt; (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&#123;menu.route&#125;</span> <span class="attr">icon</span>=<span class="string">&#123;menu.icon&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">Link</span> <span class="attr">href</span>=<span class="string">&#123;menu.route&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">a</span>&gt;</span>&#123;menu.name&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          ))&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Menu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Sider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">AppSider</span>;</span><br></pre></td></tr></table></figure><h4 id="config-x2F-menus-tsx"><a href="#config-x2F-menus-tsx" class="headerlink" title="config&#x2F;menus.tsx"></a>config&#x2F;menus.tsx</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">route</span>: <span class="string">&#x27;/cryptoyou&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Crypto You&#x27;</span>,</span><br><span class="line">    <span class="attr">icon</span>: (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/youngjuning/images/202112081051602.png&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">width</span>=<span class="string">&quot;30&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&quot;thecryptoyou&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line">    ),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">route</span>: <span class="string">&#x27;/squid&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Squid NFT&#x27;</span>,</span><br><span class="line">    <span class="attr">icon</span>: (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/youngjuning/images/202112082111091.png&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">width</span>=<span class="string">&quot;30&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&quot;thecryptoyou&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line">    ),</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="å›½é™…åŒ–"><a href="#å›½é™…åŒ–" class="headerlink" title="å›½é™…åŒ–"></a>å›½é™…åŒ–</h3><p>antd æä¾›äº†ä¸€ä¸ª React ç»„ä»¶ ConfigProvider ç”¨äºå…¨å±€é…ç½®å›½é™…åŒ–æ–‡æ¡ˆã€‚æ–°å»º <code>components/Layout/Provider.tsx</code>ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ConfigProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> zhCN <span class="keyword">from</span> <span class="string">&#x27;antd/lib/locale/zh_CN&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Provider</span> = (<span class="params">&#123; children &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ConfigProvider</span> <span class="attr">locale</span>=<span class="string">&#123;zhCN&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">ConfigProvider</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Provider</span>;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>components/Layout/index.tsx</code> ä¸­å¼•å…¥ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Provider</span> <span class="keyword">from</span> <span class="string">&#x27;./Provider&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">AppLayout</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      // ...</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¢åŒ…å±‘å¯¼èˆª"><a href="#é¢åŒ…å±‘å¯¼èˆª" class="headerlink" title="é¢åŒ…å±‘å¯¼èˆª"></a>é¢åŒ…å±‘å¯¼èˆª</h3><p>å‚è€ƒ <a href="https://stackoverflow.com/questions/64541235/breadcrumbs-and-nextjs">Breadcrumbs and NextJS</a> å°è£…äº†ä¸€ä¸ª Breadcrumb ç»„ä»¶ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Breadcrumbs</span> <span class="keyword">from</span> <span class="string">&#x27;nextjs-antd-breadcrumbs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Example</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Breadcrumbs</span> <span class="attr">rootLabel</span>=<span class="string">&quot;Home&quot;</span> <span class="attr">omitRootLabel</span>=<span class="string">&#123;false&#125;/</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Next-js-å¼€å‘"><a href="#Next-js-å¼€å‘" class="headerlink" title="Next.js å¼€å‘"></a>Next.js å¼€å‘</h2><h3 id="åŸºäºæ ¹ç›®å½•å¯¼å…¥æ¨¡å—"><a href="#åŸºäºæ ¹ç›®å½•å¯¼å…¥æ¨¡å—" class="headerlink" title="åŸºäºæ ¹ç›®å½•å¯¼å…¥æ¨¡å—"></a>åŸºäºæ ¹ç›®å½•å¯¼å…¥æ¨¡å—</h3><p><code>baseUrl</code> é…ç½®é€‰é¡¹å…è®¸æ‚¨ç›´æ¥ä»é¡¹ç›®çš„æ ¹ç›®å½•å¯¼å…¥ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.json or jsconfig.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="æ¨¡å—è·¯å¾„åˆ«å"><a href="#æ¨¡å—è·¯å¾„åˆ«å" class="headerlink" title="æ¨¡å—è·¯å¾„åˆ«å"></a>æ¨¡å—è·¯å¾„åˆ«å</h3><p>åœ¨ tsconfig.json ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;@/components/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;./components/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å…¶ä»–çš„åœ°å€ä¾è‘«èŠ¦ç”»ç“¢åŠ åˆ° paths å¯¹è±¡ä¸­å³å¯ã€‚</p><h3 id="redirects-æ°¸ä¹…é‡å®šå‘"><a href="#redirects-æ°¸ä¹…é‡å®šå‘" class="headerlink" title="redirects æ°¸ä¹…é‡å®šå‘"></a>redirects æ°¸ä¹…é‡å®šå‘</h3><p>æ°¸ä¹…é‡å®šå‘ä¸åŒäºé‡å†™è·¯ç”±ï¼Œå®ƒä¼šåœ¨ url ä¸­è¡¨ç°å‡ºæ¥ï¼Œåœ¨ Next.js ä¸­é‡å®šå‘æ˜¯åœ¨ <code>next.config.js</code> ä¸­é…ç½®çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> config = &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">redirects</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">source</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">destination</span>: <span class="string">&#x27;/cryptoyou&#x27;</span>,</span><br><span class="line">        <span class="attr">permanent</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ];</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = config;</span><br></pre></td></tr></table></figure><h3 id="åœ¨-pages-ç›®å½•åŒ…å«éé¡µé¢æ–‡ä»¶"><a href="#åœ¨-pages-ç›®å½•åŒ…å«éé¡µé¢æ–‡ä»¶" class="headerlink" title="åœ¨ pages ç›®å½•åŒ…å«éé¡µé¢æ–‡ä»¶"></a>åœ¨ pages ç›®å½•åŒ…å«éé¡µé¢æ–‡ä»¶</h3><p>è¦æŠŠæµ‹è¯•æ–‡ä»¶ã€ç”Ÿæˆçš„æ–‡ä»¶æˆ–å…¶ä»–ç»„ä»¶ä½¿ç”¨çš„æ–‡ä»¶æ”¾åœ¨ <code>pages</code> ç›®å½•ä¸­ï¼Œä½ å¯ä»¥åœ¨æ‰©å±•åå‰åŠ ä¸Šç±»ä¼¼ <code>page</code> çš„å­—æ ·ã€‚</p><p>æ‰“å¼€ <code>next.config.js</code> å¹¶æ·»åŠ  <code>pageExtensions</code> é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">pageExtensions</span>: [<span class="string">&#x27;page.tsx&#x27;</span>, <span class="string">&#x27;page.ts&#x27;</span>, <span class="string">&#x27;page.jsx&#x27;</span>, <span class="string">&#x27;page.js&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åé‡å‘½åä½ çš„é¡µé¢ï¼Œä½¿å…¶æœ‰ä¸€ä¸ªåŒ…æ‹¬ <code>.page</code> çš„æ–‡ä»¶æ‰©å±•åï¼ˆä¾‹å¦‚ï¼Œé‡å‘½å <code>MyPage.tsx</code> ä¸º<code>MyPage.page.tsx</code>ï¼‰ã€‚</p><blockquote><p>æ³¨æ„ï¼šç¡®ä¿ä½ ä¹Ÿé‡å‘½å <code>_document.js</code>ã€<code>_app.js</code>ã€<code>_middleware.js</code>ï¼Œä»¥åŠ <code>pages/api/</code> ä¸‹çš„æ–‡ä»¶ã€‚</p></blockquote><h3 id="styled-jsx"><a href="#styled-jsx" class="headerlink" title="styled-jsx"></a>styled-jsx</h3><p>next.js å†…ç½®æ”¯æŒ styled-jsxï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯é…ç½®æ”¯æŒ sassï¼Œé¦–å…ˆå®‰è£… <code>@styled-jsx/plugin-sass</code>ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @styled-jsx/plugin-sass sass node-sass -D</span><br></pre></td></tr></table></figure><p>ç„¶åé…ç½® <code>.babelrc</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;next/babel&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;styled-jsx&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@styled-jsx/plugin-sass&quot;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¼€å¯ babel åï¼Œä¼šè‡ªåŠ¨ç¦ç”¨ swcï¼Œç›®å‰è¿˜æ²¡æœ‰ swc çš„æ”¯æŒæ–¹æ¡ˆï¼Œè¿›åº¦è¯·å…³æ³¨ <a href="https://github.com/Thream/styled-jsx-plugin-sass/issues/100">[Improvement] Next.JS 12 support + SWC</a></p></blockquote><h3 id="è‡ªå®šä¹‰é”™è¯¯é¡µé¢"><a href="#è‡ªå®šä¹‰é”™è¯¯é¡µé¢" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯é¡µé¢"></a>è‡ªå®šä¹‰é”™è¯¯é¡µé¢</h3><h4 id="404-tsx"><a href="#404-tsx" class="headerlink" title="404.tsx"></a>404.tsx</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Result</span>, <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Link</span> <span class="keyword">from</span> <span class="string">&#x27;next/link&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Custom404</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Result</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">status</span>=<span class="string">&quot;404&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&quot;404&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">subTitle</span>=<span class="string">&quot;Sorry, the page you visited does not exist.&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">extra</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &lt;<span class="attr">Button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>è¿”å›é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#125;</span></span><br><span class="line"><span class="language-xml">    /&gt;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="500-tsx"><a href="#500-tsx" class="headerlink" title="500.tsx"></a>500.tsx</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Result</span>, <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Link</span> <span class="keyword">from</span> <span class="string">&#x27;next/link&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Custom500</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Result</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">status</span>=<span class="string">&quot;500&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&quot;500&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">subTitle</span>=<span class="string">&quot;Sorry, something went wrong.&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">extra</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &lt;<span class="attr">Button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span>&gt;</span>è¿”å›é¦–é¡µ<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#125;</span></span><br><span class="line"><span class="language-xml">    /&gt;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Dapp"><a href="#Dapp" class="headerlink" title="Dapp"></a>Dapp</h2><h3 id="å°ç‹ç‹¸é’±åŒ…"><a href="#å°ç‹ç‹¸é’±åŒ…" class="headerlink" title="å°ç‹ç‹¸é’±åŒ…"></a>å°ç‹ç‹¸é’±åŒ…</h3><ol><li><a href="https://zhuanlan.zhihu.com/p/368736357">å°ç‹ç‹¸é’±åŒ…MetaMaskæ–°æ‰‹ä½¿ç”¨æ•™ç¨‹</a></li><li><a href="https://blog.csdn.net/qq_33583069/article/details/115727642?ivk_sa=1024320u">ä½¿ç”¨MetaMaskè¿æ¥åˆ°å¸å®‰æ™ºèƒ½é“¾(BSC)</a></li></ol><h3 id="usedapp-x2F-core"><a href="#usedapp-x2F-core" class="headerlink" title="@usedapp&#x2F;core"></a>@usedapp&#x2F;core</h3><h4 id="å®‰è£…ä¾èµ–-2"><a href="#å®‰è£…ä¾èµ–-2" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add @usedapp/core</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®-Provider"><a href="#è®¾ç½®-Provider" class="headerlink" title="è®¾ç½® Provider"></a>è®¾ç½® Provider</h4><p>ä½ éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ç”¨å¯é€‰çš„é…ç½®è®¾ç½® DAppProviderï¼Œå¹¶å°†ä½ çš„æ•´ä¸ªåº”ç”¨ç¨‹åºåŒ…è£¹åœ¨å…¶ä¸­ã€‚æœ¬æ–‡ä¸­æˆ‘ä»¬ç¼–è¾‘ <code>components/Layout/Provider.tsx</code>ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DAppProvider</span>, <span class="title class_">Config</span>, <span class="title class_">ChainId</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@usedapp/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">config</span>: <span class="title class_">Config</span> = &#123;</span><br><span class="line">  <span class="attr">readOnlyChainId</span>: <span class="title class_">ChainId</span>.<span class="property">BSC</span>,</span><br><span class="line">  <span class="attr">readOnlyUrls</span>: &#123;</span><br><span class="line">    [<span class="title class_">ChainId</span>.<span class="property">BSC</span>]: <span class="string">&#x27;https://bsc-dataseed1.binance.org/&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Provider</span> = (<span class="params">&#123; children &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">DAppProvider</span> <span class="attr">config</span>=<span class="string">&#123;config&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">DAppProvider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Provider</span>;</span><br></pre></td></tr></table></figure><h4 id="è¿æ¥é’±åŒ…"><a href="#è¿æ¥é’±åŒ…" class="headerlink" title="è¿æ¥é’±åŒ…"></a>è¿æ¥é’±åŒ…</h4><p>ç„¶åä½ éœ€è¦ä½¿ç”¨ activateBrowserWallet æ¥æ¿€æ´» providerã€‚æœ€å¥½æ˜¯åœ¨ç”¨æˆ·ç‚¹å‡» â€œConnectâ€ æŒ‰é’®æ—¶è¿›è¡Œã€‚æœ¬æ–‡ä¸­æˆ‘ä»¬æ–°å»ºç»„ä»¶ <code>components/ConnectButton.tsx</code>ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEthers &#125; <span class="keyword">from</span> <span class="string">&#x27;@usedapp/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LoginOutlined</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ConnectButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; activateBrowserWallet &#125; = <span class="title function_">useEthers</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleConnectWallet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">activateBrowserWallet</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">icon</span>=<span class="string">&#123;</span>&lt;<span class="attr">LoginOutlined</span> /&gt;</span>&#125; onClick=&#123;handleConnectWallet&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      Connect MetaMask</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">ConnectButton</span>;</span><br></pre></td></tr></table></figure><h4 id="é’±åŒ…ä½™é¢"><a href="#é’±åŒ…ä½™é¢" class="headerlink" title="é’±åŒ…ä½™é¢"></a>é’±åŒ…ä½™é¢</h4><p><code>useEtherBalance(address: string)</code></p><p>æä¾›ä¸€ç§è·å–è´¦æˆ·ä½™é¢çš„æ–¹æ³•ã€‚ä»¥è´¦æˆ·åœ°å€ä¸ºå‚æ•°ï¼Œå½“æ•°æ®ä¸å¯ç”¨æ—¶ï¼ˆå³æœªè¿æ¥ï¼‰ï¼Œè¿”å› Â·<code>BigNumber</code> æˆ– <code>undefined</code>ã€‚è¦è·å¾—å½“å‰è¿æ¥çš„è´¦æˆ·ï¼Œè¯·ä½¿ç”¨ <code>useEthers()</code>ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; formatEther &#125; <span class="keyword">from</span> <span class="string">&#x27;@ethersproject/units&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">EtherBalance</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; account &#125; = <span class="title function_">useEthers</span>()</span><br><span class="line">  <span class="keyword">const</span> etherBalance = <span class="title function_">useEtherBalance</span>(account)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;etherBalance &amp;&amp; <span class="tag">&lt;<span class="name">p</span>&gt;</span>Balance: &#123;formatEther(etherBalance)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä»£å¸ä½™é¢"><a href="#ä»£å¸ä½™é¢" class="headerlink" title="ä»£å¸ä½™é¢"></a>ä»£å¸ä½™é¢</h4><p><code>useTokenBalance(address: string, tokenAddress: string)</code></p><p>æä¾›ä¸€ç§æ–¹æ³•æ¥è·å–ç”± <code>tokenAddress</code> æŒ‡å®šçš„ ERC20 ä»£å¸åœ¨æ‰€æä¾›åœ°å€çš„ä½™é¢ã€‚å½“æ•°æ®ä¸å¯ç”¨æ—¶ï¼Œè¿”å› <code>BigNumber</code> æˆ– <code>undefined</code>ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; formatUnits &#125; <span class="keyword">from</span> <span class="string">&#x27;@ethersproject/units&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">BABY</span> = <span class="string">&#x27;0x53e562b9b7e5e94b81f10e96ee70ad06df3d2657&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">TokenBalance</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; account &#125; = <span class="title function_">useEthers</span>()</span><br><span class="line">  <span class="keyword">const</span> tokenBalance = <span class="title function_">useTokenBalance</span>(<span class="variable constant_">BABY</span>, account)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;tokenBalance &amp;&amp; <span class="tag">&lt;<span class="name">p</span>&gt;</span>BABY: &#123;formatUnits(tokenBalance, 18)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul><li><a href="https://dev.to/jacobedawson/build-a-web3-dapp-in-react-login-with-metamask-4chp">Build a Web3 Dapp in React &amp; Login with MetaMask</a></li></ul><h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><h3 id="GitHub-Pages"><a href="#GitHub-Pages" class="headerlink" title="GitHub Pages"></a>GitHub Pages</h3><p>å¦‚æœæ˜¯ vercel ä»˜è´¹ç”¨æˆ·ï¼Œæ¨èä½¿ç”¨ vercelã€‚GitHub Pages åªèƒ½éƒ¨ç½²é™æ€å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ <code>next export</code> å°†é™æ€å†…å®¹å¯¼å‡ºéƒ¨ç½²ã€‚</p><p>é¦–å…ˆé…ç½® npm scriptsï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;preexport&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn build&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;export&quot;</span><span class="punctuation">:</span> <span class="string">&quot;next export&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>ç„¶åæ·»åŠ  <code>.github/workflows/gh-pages.yml</code>ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">github</span> <span class="string">pages</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span> <span class="comment"># default branch</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-18.04</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">c-hive/gha-yarn-cache@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">--non-interactive</span> <span class="string">--silent</span> <span class="string">--ignore-scripts</span> <span class="string">--production=false</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Website</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">export</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Website</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">personal_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PERSONAL_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">external_repository:</span> <span class="string">crypto-meta/crypto-meta.github.io</span></span><br><span class="line">          <span class="attr">publish_dir:</span> <span class="string">./out</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŒºå—é“¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Next.js </tag>
            
            <tag> BSC </tag>
            
            <tag> DApp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>single-spa åŸç†è§£æï¼ˆå†…éƒ¨åˆ†äº«ï¼‰</title>
      <link href="/89f69cf72fa9/"/>
      <url>/89f69cf72fa9/</url>
      
        <content type="html"><![CDATA[<h2 id="single-spa-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#single-spa-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="single-spa æ˜¯ä»€ä¹ˆï¼Ÿ"></a>single-spa æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Single-spa æ˜¯ä¸€ä¸ªå°†å¤šä¸ªå•é¡µé¢åº”ç”¨èšåˆä¸ºä¸€ä¸ªæ•´ä½“åº”ç”¨çš„ JavaScript å¾®å‰ç«¯æ¡†æ¶ã€‚ ä½¿ç”¨ single-spa è¿›è¡Œå‰ç«¯æ¶æ„è®¾è®¡å¯ä»¥å¸¦æ¥å¾ˆå¤šå¥½å¤„ï¼Œä¾‹å¦‚:</p><ul><li>åœ¨åŒä¸€é¡µé¢ä¸Šä½¿ç”¨å¤šä¸ªå‰ç«¯æ¡†æ¶è€Œä¸ç”¨åˆ·æ–°é¡µé¢ (React, AngularJS, Angular, Ember, ä½ æ­£åœ¨ä½¿ç”¨çš„æ¡†æ¶)</li><li>ç‹¬ç«‹éƒ¨ç½²æ¯ä¸€ä¸ªå•é¡µé¢åº”ç”¨</li><li>æ–°åŠŸèƒ½ä½¿ç”¨æ–°æ¡†æ¶ï¼Œæ—§çš„å•é¡µåº”ç”¨ä¸ç”¨é‡å†™å¯ä»¥å…±å­˜</li><li>æ”¹å–„åˆå§‹åŠ è½½æ—¶é—´ï¼Œå»¶è¿ŸåŠ è½½ä»£ç </li></ul><p>single-spa å¯ä»¥è¯´æ˜¯å¾®å‰ç«¯çš„é¼»ç¥–äº†ï¼Œå¸‚é¢ä¸Šçº·æ‚çš„è§£å†³æ–¹æ¡ˆå¤šå°‘éƒ½å—åˆ°äº†å®ƒçš„å½±å“ï¼Œä»¥ä¸‹ä¸¤æ¬¾æµè¡Œçš„ç”Ÿäº§çº§æ¡†æ¶åˆ™æ›´æ˜¯åŸºäº single-spa å¼€å‘çš„ã€‚</p><ul><li><a href="https://qiankun.umijs.org/zh/guide">qiankun</a>ï¼šèš‚èšé‡‘æœå‡ºå“çš„æ˜“ç”¨çš„å¾®å‰ç«¯æ¡†æ¶ã€‚</li><li><a href="https://github.com/namecheap/ilc">Isomorphic Layout Composerï¼ˆILCï¼‰</a>ï¼šä¸€ä¸ªå°†å¾®å‰ç«¯ç»„æˆéƒ¨åˆ†æ”¯æŒ SSR çš„å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</li></ul><h2 id="single-spa-æ¶æ„"><a href="#single-spa-æ¶æ„" class="headerlink" title="single-spa æ¶æ„"></a>single-spa æ¶æ„</h2><p>single-spa å€Ÿé‰´äº†ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ€æƒ³ï¼Œå®ƒä¸ºåº”ç”¨è®¾ç½®äº†é’ˆå¯¹è·¯ç”±çš„ç”Ÿå‘½å‘¨æœŸã€‚å½“åº”ç”¨åŒ¹é…è·¯ç”±&#x2F;å¤„äºæ¿€æ´»çŠ¶æ€æ—¶ï¼Œåº”ç”¨ä¼šæŠŠè‡ªèº«çš„å†…å®¹æŒ‚è½½åˆ°é¡µé¢ä¸Šï¼›åä¹‹åˆ™å¸è½½ã€‚å…¸å‹çš„ single-spa ç”± html é¡µé¢ã€åº”ç”¨æ³¨å†Œè„šæœ¬ã€åº”ç”¨è„šæœ¬è‡ªèº«æ„æˆã€‚åº”ç”¨æ³¨å†Œå†…å®¹åŒ…å«ï¼š</p><ul><li>appNameï¼šåº”ç”¨å</li><li>loadingFunctionï¼šåŠ è½½åº”ç”¨ç¨‹åºçš„ä»£ç ã€‚</li><li>activityFunction å‡½æ•°ï¼šç¡®å®šåº”ç”¨ç¨‹åºä½•æ—¶å¤„äºæ´»åŠ¨çŠ¶æ€&#x2F;éæ´»åŠ¨çŠ¶æ€ã€‚</li><li>customPropsï¼šè‡ªå®šä¹‰ propsï¼Œå¯ä»¥ä¸å¡«</li></ul><p>single-spa åˆçº¦å®šåº”ç”¨è„šæœ¬åŒ…å«ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸï¼š</p><ul><li><code>load</code>ï¼šå½“åº”ç”¨åŒ¹é…è·¯ç”±æ—¶å°±ä¼šåŠ è½½è„šæœ¬ï¼ˆéå‡½æ•°ï¼Œåªæ˜¯ä¸€ç§çŠ¶æ€ï¼‰</li><li><code>bootstrap</code>ï¼šå¼•å¯¼å‡½æ•°ï¼ˆå¯¹æ¥ htmlï¼Œåº”ç”¨å†…å®¹é¦–æ¬¡æŒ‚è½½åˆ°é¡µé¢å‰è°ƒç”¨ï¼‰</li><li><code>mount</code>ï¼šæŒ‚è½½å‡½æ•°</li><li><code>unmount</code>ï¼šå¸è½½å‡½æ•°ï¼ˆé¡»ç§»é™¤äº‹ä»¶ç»‘å®šç­‰å†…å®¹ï¼‰</li><li><code>unload</code>ï¼šéå¿…è¦ï¼ˆunload ä¹‹åä¼šé‡æ–°å¯åŠ¨ bootstrap æµç¨‹ï¼›å€ŸåŠ© unload å¯å®ç°çƒ­æ›´æ–°ï¼‰ã€‚</li></ul><p>ç”Ÿå‘½å‘¨æœŸå‡½æ•°è·å¾—å‚æ•°åŒ…å« nameï¼ˆåº”ç”¨åï¼‰ã€singleSpaï¼ˆå®ä¾‹ï¼‰ã€mountParcelï¼ˆæ‰‹åŠ¨æŒ‚è½½å‡½æ•°ï¼‰ã€customPropsï¼ˆè‡ªå®šä¹‰ä¿¡æ¯ï¼‰ï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°å¿…é¡»è¿”å› Promise æˆ–å…¶æœ¬èº«ä¸º async å‡½æ•°ï¼Œ<code>bootstrap</code>ã€mountã€unmount ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸å¯ç¼ºçœï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°å¯ä»¥æŒ‡å®šå¤šä¸ªï¼Œå®ƒä»¬ä¼šæ„æˆå¼‚æ­¥è°ƒç”¨é“¾ï¼Œé€ä¸ªè°ƒç”¨ã€‚ç®€è¦æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202111221452146.png"></p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>æºç å‚è€ƒï¼š<a href="https://github.com/youngjuning/simple-single-spa-webpack-example">youngjuning&#x2F;simple-single-spa-webpack-example</a></p><h3 id="1-åˆ›å»ºä¸€ä¸ª-html-æ–‡ä»¶"><a href="#1-åˆ›å»ºä¸€ä¸ª-html-æ–‡ä»¶" class="headerlink" title="1.åˆ›å»ºä¸€ä¸ª html æ–‡ä»¶"></a>1.åˆ›å»ºä¸€ä¸ª html æ–‡ä»¶</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;single-spa-config.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-åˆ›å»ºä¸€ä¸ª-single-spa-configã€‚"><a href="#2-åˆ›å»ºä¸€ä¸ª-single-spa-configã€‚" class="headerlink" title="2.åˆ›å»ºä¸€ä¸ª single-spa-configã€‚"></a>2.åˆ›å»ºä¸€ä¸ª single-spa-configã€‚</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> singleSpa <span class="keyword">from</span> <span class="string">&#x27;single-spa&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* loading æ˜¯ä¸€ä¸ªè¿”å› promise çš„å‡½æ•°ï¼Œç”¨äº åŠ è½½/è§£æ åº”ç”¨ä»£ç ã€‚</span></span><br><span class="line"><span class="comment"> * å®ƒçš„ç›®çš„æ˜¯ä¸ºå»¶è¿ŸåŠ è½½æä¾›ä¾¿åˆ© â€”â€” single-spa åªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šä¸‹è½½åº”ç”¨ç¨‹åºçš„ä»£ç ã€‚</span></span><br><span class="line"><span class="comment"> * åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œåœ¨ webpack ä¸­æ”¯æŒ import ()å¹¶è¿”å› Promiseï¼Œä½†æ˜¯ single-spa å¯ä»¥ä½¿ç”¨ä»»ä½•è¿”å› Promise çš„åŠ è½½å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">singleSpa.<span class="title function_">registerApplication</span>(<span class="string">&#x27;app-1&#x27;</span>, <span class="function">() =&gt;</span></span><br><span class="line">  <span class="keyword">import</span> (<span class="string">&#x27;../app1/app1.js&#x27;</span>), <span class="title function_">pathPrefix</span>(<span class="string">&#x27;/app1&#x27;</span>));</span><br><span class="line">singleSpa.<span class="title function_">registerApplication</span>(<span class="string">&#x27;app-2&#x27;</span>, <span class="function">() =&gt;</span></span><br><span class="line">  <span class="keyword">import</span> (<span class="string">&#x27;../app2/app2.js&#x27;</span>), <span class="title function_">pathPrefix</span>(<span class="string">&#x27;/app2&#x27;</span>));</span><br><span class="line"></span><br><span class="line">singleSpa.<span class="title function_">start</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Single-spa é…ç½®é¡¶çº§è·¯ç”±ï¼Œä»¥ç¡®å®šå“ªä¸ªåº”ç”¨ç¨‹åºå¯¹äºæŒ‡å®š url æ˜¯æ´»åŠ¨çš„ã€‚</span></span><br><span class="line"><span class="comment"> * ä½ å¯ä»¥ä»¥ä»»ä½•ä½ å–œæ¬¢çš„æ–¹å¼å®ç°æ­¤è·¯ç”±ã€‚</span></span><br><span class="line"><span class="comment"> * ä¸€ç§æœ‰ç”¨çš„çº¦å®šæ˜¯åœ¨ url å‰é¢åŠ ä¸Šæ´»åŠ¨åº”ç”¨ç¨‹åºçš„åç§°ï¼Œä»¥ä½¿é¡¶å±‚è·¯ç”±ä¿æŒç®€å•ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pathPrefix</span>(<span class="params">prefix</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">location</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> location.<span class="property">pathname</span>.<span class="title function_">startsWith</span>(<span class="string">`<span class="subst">$&#123;prefix&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚"><a href="#3-åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚" class="headerlink" title="3.åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚"></a>3.åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> singleSpaReact <span class="keyword">from</span> <span class="string">&#x27;single-spa-react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Root</span> <span class="keyword">from</span> <span class="string">&#x27;./root.component.tsx&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reactLifecycles = <span class="title function_">singleSpaReact</span>(&#123;</span><br><span class="line">  <span class="title class_">React</span>,</span><br><span class="line">  <span class="title class_">ReactDOM</span>,</span><br><span class="line">  <span class="attr">rootComponent</span>: <span class="title class_">Root</span>,</span><br><span class="line">  domElementGetter,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">bootstrap</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> reactLifecycles.<span class="title function_">bootstrap</span>(props);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">mount</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> reactLifecycles.<span class="title function_">mount</span>(props);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">unmount</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> reactLifecycles.<span class="title function_">unmount</span>(props);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">domElementGetter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ç¡®ä¿è¿™é‡Œæœ‰ä¸€ä¸ª div ä¾›æ¸²æŸ“ç”¨</span></span><br><span class="line">  <span class="keyword">let</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;app1&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!el) &#123;</span><br><span class="line">    el = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    el.<span class="property">id</span> = <span class="string">&#x27;app1&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(el);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> el;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æºç è§£æ"><a href="#æºç è§£æ" class="headerlink" title="æºç è§£æ"></a>æºç è§£æ</h2><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202111221420019.png"></p><p>å…¶ä¸­ avigationã€lifecyclesã€applications è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹å³å¯ï¼Œæ˜¯æ•´ä¸ªæºç çš„æ ¸å¿ƒã€‚</p><h3 id="æ ¸å¿ƒæ–¹æ³•åˆ†æ"><a href="#æ ¸å¿ƒæ–¹æ³•åˆ†æ" class="headerlink" title="æ ¸å¿ƒæ–¹æ³•åˆ†æ"></a>æ ¸å¿ƒæ–¹æ³•åˆ†æ</h3><p>ç»¿åº•ç™½å­—åˆ™æ˜¯ single-spa çš„ä¸‰ä¸ªæ ¸å¿ƒæ–¹æ³• <a href="http://tny.im/T5UaE">registerApplication</a>ã€<a href="http://tny.im/tsub">reroute</a> å’Œ <a href="http://tny.im/9CvCH">start</a>ï¼Œè„‘å›¾æè¿°äº†è¿™ä¸‰ä¸ªæ–¹æ³•å…·ä½“åšäº†ä»€ä¹ˆï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202111221417558.png"></p><h3 id="åˆå§‹åŒ–åŠ è½½æµç¨‹"><a href="#åˆå§‹åŒ–åŠ è½½æµç¨‹" class="headerlink" title="åˆå§‹åŒ–åŠ è½½æµç¨‹"></a>åˆå§‹åŒ–åŠ è½½æµç¨‹</h3><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202111221423159.png"></p><h3 id="åº”ç”¨å¯åŠ¨å’ŒæŒ‚è½½æµç¨‹"><a href="#åº”ç”¨å¯åŠ¨å’ŒæŒ‚è½½æµç¨‹" class="headerlink" title="åº”ç”¨å¯åŠ¨å’ŒæŒ‚è½½æµç¨‹"></a>åº”ç”¨å¯åŠ¨å’ŒæŒ‚è½½æµç¨‹</h3><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202111221423521.png"></p><h2 id="ç»éªŒ"><a href="#ç»éªŒ" class="headerlink" title="ç»éªŒ"></a>ç»éªŒ</h2><ol><li>åŠ è½½æ“ä½œä¸€èˆ¬éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œæ¯”å¦‚åŠ è½½æ’ä»¶ã€åŠ è½½åº”ç”¨ã€‚æ‰€ä»¥åŸåˆ™ä¸Šåªè¦ä¼šä½¿ç”¨ Promiseï¼Œæˆ‘ä»¬å°±èƒ½å¾ˆå¿«æ¨¡ä»¿ä¸€ä¸ªè‡ªå·±çš„å¾®å‰ç«¯æ¶æ„å‡ºæ¥ã€‚</li><li>æœ¬æ¬¡åˆ†äº«æ²¡æœ‰æ¶‰åŠå¾®å‰ç«¯çš„å¦ä¸ªä¸€ä¸ªé‡è¦æ¦‚å¿µæ²™ç®±ï¼Œæœ‰æœºä¼šå•ç‹¬åˆ†äº«ã€‚</li><li>æŠ€æœ¯å‘å±•éƒ½æ˜¯æœ‰è¿¹å¯å¾ªçš„ï¼Œææ¸…å‘å±•è„‰ç»œå¯¹äºç†è§£åº”ç”¨ä¸€ä¸ªæŠ€æœ¯ä¹Ÿå¾ˆæœ‰å¸®åŠ©ã€‚</li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://juejin.cn/post/6941402712890638367">å¾®å‰ç«¯æ¡†æ¶single-spaæºç è§£æã€é¡¹ç›®å®æˆ˜ã€æ‰‹å†™ç®€ç‰ˆsingle-spa</a></li><li><a href="https://juejin.cn/post/6862661545592111111#heading-43">å¾®å‰ç«¯æ¡†æ¶ ä¹‹ single-spa ä»å…¥é—¨åˆ°ç²¾é€š</a></li><li><a href="https://zhuanlan.zhihu.com/p/107059106">single-spa å®ç°å‰ç«¯å¾®æœåŠ¡</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node.js å¸¸ç”¨æ–¹æ³•</title>
      <link href="/26f112a8adea/"/>
      <url>/26f112a8adea/</url>
      
        <content type="html"><![CDATA[<h2 id="fs"><a href="#fs" class="headerlink" title="fs"></a>fs</h2><blockquote><p>æ¨èä½¿ç”¨ fs-extra</p></blockquote><ul><li><code>fs.readFileSync(path).toString()</code>: æŠŠæ–‡ä»¶è¯»æˆå­—ç¬¦ä¸²</li><li><code>fs.readFileSync(path, &#39;utf-8&#39;)</code>: æœ¬æ–‡ä»¶è¯»æˆå­—ç¬¦ä¸²</li></ul><h2 id="child-process"><a href="#child-process" class="headerlink" title="child_process"></a>child_process</h2><blockquote><p>æ¨èä½¿ç”¨ execa</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscode æ’ä»¶å‘å¸ƒ</title>
      <link href="/4b349879ced6/"/>
      <url>/4b349879ced6/</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…å‘å¸ƒå·¥å…·"><a href="#å®‰è£…å‘å¸ƒå·¥å…·" class="headerlink" title="å®‰è£…å‘å¸ƒå·¥å…·"></a>å®‰è£…å‘å¸ƒå·¥å…·</h2><p><a href="https://github.com/Microsoft/vsce">vsce</a> æ˜¯ä¸€ä¸ªç”¨äºå°†æ’ä»¶å‘å¸ƒåˆ°<a href="https://code.visualstudio.com/docs/editor/extension-gallery">å¸‚åœº</a>ä¸Šçš„å‘½ä»¤è¡Œå·¥å…·ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install vsce -g</span><br></pre></td></tr></table></figure><h2 id="æ–°å»º-Azure-DevPos-ç»„ç»‡"><a href="#æ–°å»º-Azure-DevPos-ç»„ç»‡" class="headerlink" title="æ–°å»º Azure DevPos ç»„ç»‡"></a>æ–°å»º Azure DevPos ç»„ç»‡</h2><ol><li>ç™»å½• <a href="https://azure.microsoft.com/zh-cn/services/devops/">Azure DevOps</a>ã€‚</li><li>ç‚¹å‡» <strong>New organization</strong>ã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/20210812201149.png"></p><ol start="3"><li>ç¡®è®¤ä¿¡æ¯ï¼Œç„¶åé€‰æ‹© <strong>Continue</strong>ã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/20210812201210.png"></p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/20210812201223.png"></p><p>åˆ°è¿™é‡Œï¼Œä¸€ä¸ªç»„ç»‡å°±åˆ›å»ºæˆåŠŸäº†ï¼Œä¹‹åéšæ—¶ç™»å½•åˆ°ä½ çš„ç»„ç»‡<a href="https://dev.azure.com/tuyaworks">https://dev.azure.com/tuyaworks</a>ã€‚</p><h2 id="è·å–-Personal-Access-Token"><a href="#è·å–-Personal-Access-Token" class="headerlink" title="è·å– Personal Access Token"></a>è·å– Personal Access Token</h2><p>ä¸‹é¢çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬å‡è®¾ç»„ç»‡åä¸º vscodeï¼Œä»ä½ çš„ç»„ç»‡ä¸»é¡µï¼ˆä¾‹å¦‚ï¼š<a href="https://dev.azure.com/tuyaworks">https://dev.azure.com/tuyaworks</a> ï¼‰ è¿›å…¥ Personal access tokens é¡µé¢ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/20210812201259.png"></p><p>ç‚¹å‡» <strong>New Token</strong> åˆ›å»ºä¸€ä¸ªæ–°çš„ Personal Access Tokenï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/20210812202141.png"></p><p>ç»™ Personal Access Token æ·»åŠ æè¿°ï¼Œè¿‡æœŸæ—¶é—´ç­‰ç­‰ï¼Œä½ æœ€å¥½æŠŠè¿‡æœŸæ—¶é—´è®¾ç½®ä¸º 1 å¹´ï¼Œè¿™æ ·ä½ æ¥ä¸‹å°±èƒ½æ–¹ä¾¿å¾ˆå¤šï¼Œé€‰æ‹© <strong>custom definedï¼ˆç”¨æˆ·è‡ªå®šä¹‰ï¼‰</strong> èŒƒå›´ï¼Œç„¶åç‚¹å‡» <strong>Show all scopes(æ˜¾ç¤ºå…¨éƒ¨)</strong> ï¼Œåœ¨è¿™ä¸ªåˆ—è¡¨ä¸­æ‰¾åˆ° Marketplaceï¼Œå¹¶å‹¾é€‰ Acquire å’Œ Manageï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/20210812202337.png"></p><p>ç‚¹å‡» <strong>Create</strong>ï¼Œä½ å°±ä¼šçœ‹åˆ°æ–°åˆ›å»ºçš„ Personal Access Token äº†ï¼Œå¤åˆ¶å¥½ï¼Œä½ æ¥ä¸‹æ¥å°±ä¼šç”¨åˆ°è¿™ä¸ª token æ¥åˆ›å»ºä¸€ä¸ªå‘è¡Œæ–¹äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/20210812202402.png"></p><h2 id="åˆ›å»ºä¸€ä¸ªå‘è¡Œæ–¹"><a href="#åˆ›å»ºä¸€ä¸ªå‘è¡Œæ–¹" class="headerlink" title="åˆ›å»ºä¸€ä¸ªå‘è¡Œæ–¹"></a>åˆ›å»ºä¸€ä¸ªå‘è¡Œæ–¹</h2><p><strong>å‘è¡Œæ–¹</strong>æ˜¯ VS Code å¸‚åœºæœ‰æƒå‘å¸ƒæ’ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼Œæ¯ä¸ªæ’ä»¶çš„ package.json æ–‡ä»¶éƒ½åŒ…å«ç€ publisher å­—æ®µã€‚<br>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº† Personal Access Tokenï¼Œæˆ‘ä»¬é©¬ä¸Šå¯ä»¥é€šè¿‡ <a href="https://aka.ms/vscode-create-publisher">https://aka.ms/vscode-create-publisher</a> åˆ›å»ºä¸€ä¸ªå‘è¡Œæ–¹ã€‚</p><h2 id="å‘è¡Œæ–¹ç™»å½•"><a href="#å‘è¡Œæ–¹ç™»å½•" class="headerlink" title="å‘è¡Œæ–¹ç™»å½•"></a>å‘è¡Œæ–¹ç™»å½•</h2><p>å¦‚æœä½ å·²ç»æœ‰å‘è¡Œæ–¹è´¦å·äº†ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vsce login (publisher name)</span><br></pre></td></tr></table></figure><p><code>vsce</code> ä¼šè®°ä½è¿™ä¸ª Personal Access Tokenï¼Œæ—¥åä½ éœ€è¦å†æ¬¡ä½¿ç”¨çš„æ—¶å€™ä¼šè‡ªåŠ¨å¸¦ä¸Šã€‚</p><p>ä½ ä¹Ÿå¯ä»¥ç”¨å‘½ä»¤å‚æ•° <code>-p &lt;token&gt;</code> ç›´æ¥ç™»å½•ç„¶åç«‹å³å‘å¸ƒæ’ä»¶ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vsce publish -p &lt;token&gt;</span><br></pre></td></tr></table></figure><h2 id="å¢é‡æ›´æ–°æ’ä»¶ç‰ˆæœ¬"><a href="#å¢é‡æ›´æ–°æ’ä»¶ç‰ˆæœ¬" class="headerlink" title="å¢é‡æ›´æ–°æ’ä»¶ç‰ˆæœ¬"></a>å¢é‡æ›´æ–°æ’ä»¶ç‰ˆæœ¬</h2><p>ç”¨ SemVer è¯­ä¹‰æ ‡è¯†ç¬¦ï¼šmajorï¼Œminorï¼Œpatch å¢é‡æ›´æ–°æ’ä»¶ç‰ˆæœ¬å·ã€‚</p><p>ä¾‹å¦‚ï¼Œä½ æƒ³æŠŠæ’ä»¶ä» 1.0.0 æ›´æ–°åˆ° 1.1.0ï¼Œé‚£ä¹ˆåŠ ä¸Š minorï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vsce publish minor</span><br></pre></td></tr></table></figure><p>æ’ä»¶ <em>package.json</em> çš„ version ä¼šå…ˆæ›´æ–°ï¼Œç„¶åæ‰å‘å¸ƒæ’ä»¶ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡ŒæŒ‡å®šç‰ˆæœ¬å·ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vsce publish 2.0.1</span><br></pre></td></tr></table></figure><h2 id="ä¸‹æ¶æ’ä»¶"><a href="#ä¸‹æ¶æ’ä»¶" class="headerlink" title="ä¸‹æ¶æ’ä»¶"></a>ä¸‹æ¶æ’ä»¶</h2><p>é€šè¿‡æŒ‡å®šæ’ä»¶ idpublisher.extension ä¸‹æ¶æ’ä»¶ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vsce unpublish (publisher name).(extension name)</span><br></pre></td></tr></table></figure><blockquote><p>å½“ä½ ä¸‹æ¶æ’ä»¶çš„æ—¶å€™ï¼Œå¸‚åœºä¼šç§»é™¤æ‰€æœ‰æ’ä»¶çš„å†å²ç»Ÿè®¡æ•°æ®ï¼Œè¯·åœ¨ä¸‹æ¶å‰å†ä¸‰è€ƒè™‘ï¼Œæœ€å¥½è¿˜æ˜¯æ›´æ–°æ’ä»¶å§ã€‚</p></blockquote><h2 id="æ’ä»¶æ‰“åŒ…"><a href="#æ’ä»¶æ‰“åŒ…" class="headerlink" title="æ’ä»¶æ‰“åŒ…"></a>æ’ä»¶æ‰“åŒ…</h2><p>ä½ ä¹Ÿå¯èƒ½åªæ˜¯æƒ³æ‰“åŒ…ä¸€ä¸‹æ’ä»¶ï¼Œè€Œä¸æ˜¯å‘å¸ƒåˆ°å•†åº—é‡Œã€‚ç”¨ä¸‹åˆ—å‘½ä»¤å°†æ’ä»¶æ‰“åŒ…åˆ° <code>.vsix</code> æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vsce package</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ª .vsix æ–‡ä»¶ï¼Œç›´æ¥ä» .vsix å®‰è£…æ’ä»¶æ˜¯å…è®¸çš„ï¼ŒæŸ¥çœ‹<a href="https://github.com/Microsoft/vscode-docs/blob/master/docs/editor/extension-gallery.md#install-from-a-vsix">ä» VSIX å®‰è£…æ’ä»¶</a>äº†è§£æ›´å¤šå†…å®¹ã€‚</p><h2 id="VS-Code-ç‰ˆæœ¬å…¼å®¹æ€§"><a href="#VS-Code-ç‰ˆæœ¬å…¼å®¹æ€§" class="headerlink" title="VS Code ç‰ˆæœ¬å…¼å®¹æ€§"></a>VS Code ç‰ˆæœ¬å…¼å®¹æ€§</h2><p>å½“ä½ åˆ¶ä½œæ’ä»¶çš„æ—¶å€™ï¼Œä½ éœ€è¦æè¿°æ’ä»¶å¯¹ VS Code çš„ç‰ˆæœ¬å…¼å®¹æ€§â€”â€”ä¿®æ”¹ <em>package.json</em> ä¸­çš„ engines.vscodeï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;engines&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;vscode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.8.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>1.8.0 è¡¨ç¤ºä½ çš„æ’ä»¶åªèƒ½å…¼å®¹ 1.8.0 ç‰ˆæœ¬çš„ VS Codeï¼Œ^1.8.0 åˆ™è¡¨ç¤ºä½ çš„æ’ä»¶å‘ä¸Šå…¼å®¹ï¼ŒåŒ…æ‹¬ 1.8.1, 1.9.0 ç­‰ç­‰ã€‚</p><p>ä½¿ç”¨ <code>engines.vscode</code> å¯ä»¥ç¡®ä¿æ’ä»¶å®‰è£…ç¯å¢ƒåŒ…å«äº†æ’ä»¶ä¾èµ–çš„ APIã€‚è¿™ä¸ªæœºåˆ¶åœ¨ç¨³å®šç‰ˆå’Œ Insider ç‰ˆæœ¬éƒ½é€‚ç”¨ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å‡è®¾æœ€æ–°çš„ç¨³å®šç‰ˆ API æ˜¯ 1.8.0ï¼Œè€Œ 1.9.0 å¼•å…¥äº†æ–°çš„ APIï¼Œæ‰€ä»¥ä½ å¯ä»¥ç”¨ 1.9.0-insider æ ‡è¯†æ’ä»¶åœ¨ Insider ç‰ˆä¸­ä¹Ÿå¯æ­£å¸¸ä½¿ç”¨ã€‚ å¦‚æœä½ æƒ³ä½¿ç”¨è¿™äº›åˆšåˆšå¼•å…¥çš„ APIï¼Œåˆ™å°†ä¾èµ–ç‰ˆæœ¬è®¾ç½®ä¸º ^1.9.0ï¼Œä½ çš„æ’ä»¶åˆ™åªèƒ½å®‰è£…åœ¨ &gt;&#x3D;1.9.0 çš„ VS Code ä¸Šï¼Œä¹Ÿå°±æ„å‘³ç€æ‰€æœ‰å½“å‰çš„ Insider ç‰ˆæœ¬éƒ½å¯ä»¥ç”¨å¾—ä¸Šï¼Œè€Œç¨³å®šç‰ˆåªæœ‰åœ¨æ›´æ–°åˆ° 1.9.0 æ‰èƒ½ä½¿ç”¨ä½ çš„æ’ä»¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¯ä¸ªå‰ç«¯éƒ½å€¼å¾—æ‹¥æœ‰è‡ªå·±çš„ç»„ä»¶åº“ï¼Œå°±åƒæ¯ä¸ªå¤å¤©éƒ½æ‹¥æœ‰è¥¿ç“œğŸ‰</title>
      <link href="/9d8bd593921d/"/>
      <url>/9d8bd593921d/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½</p></blockquote><p>æ´›ç«¹æœ‰ä¸€ä¸ªæœ‹å‹å°é»‘æœ€è¿‘åœ¨é¢è¯•æ—¶è¢«é—®åˆ°å¦‚ä½•è®¾è®¡ä¸€ä¸ªå‰ç«¯ç»„ä»¶åº“ã€‚æ²¡å•¥ç»éªŒçš„å°é»‘å›ç­”äº†ä¸šåŠ¡æå–å°è£…æˆåº“ä»¥åŠåŸºäº antd ç»“åˆä¸šåŠ¡äºŒæ¬¡å°è£…ã€‚æœ€åå°é»‘è¢« HR ä»¥çµåŠ›ä¸å¤ŸæŒ‚æ‰äº†ã€‚å…¶å®è¿™ä¸ªé—®é¢˜è€ƒå¯Ÿçš„å¹¶ä¸æ˜¯å‡å¤§ç©ºçš„æ¦‚å¿µï¼Œè€Œæ˜¯æœ‰å…³å¼€å‘è€…ä»“åº“ç®¡ç†ã€ç»„ä»¶è®¾è®¡ã€å•å…ƒæµ‹è¯•ã€æŒç»­é›†æˆã€åä½œç®¡ç†ç­‰ç­‰èƒ½åŠ›ã€‚é‚£ä¹ˆä¸ºäº†èµ‹èƒ½å°é»‘å®Œç¾å›ç­”è¿™ä¸ªé—®é¢˜å‘¢ï¼Œæˆ‘å†³å®šå¸¦é¢†å°é»‘ä¸€æ­¥ä¸€æ­¥å»ºè®¾ä¸€ä¸ª React Native ç»„ä»¶åº“ã€‚</p><p>è¿™æ˜¯ä¸€ç¯‡å¹²è´§æ¯”è¾ƒå¤šçš„ç»„ä»¶åº“æ­å»ºå®æˆ˜æ•™ç¨‹ï¼Œä¸ä»…æœ‰é€šç”¨çš„ä»£ç è§„èŒƒã€æäº¤è§„èŒƒã€æ–‡æ¡£ç»´æŠ¤ã€å•å…ƒæµ‹è¯•ã€GitHub Action é…ç½®çš„è®²è§£ï¼Œè¿˜æ¶‰åŠåŸºäº lerna çš„å¤šåŒ…ç®¡ç†æ¶æ„ã€React Native å›¾æ ‡åº“å»ºè®¾ã€React Native ç»„ä»¶åº“å¼€å‘è°ƒè¯•ã€æŒ‰éœ€åŠ è½½åŸç†åŠå®ç°ã€‚å·¥ç¨‹åŒ–çš„æ€æƒ³æ˜¯é€šç”¨çš„ï¼Œæ‰€ä»¥æ— è®ºæ˜¯ä½ ç”¨çš„æ¡†æ¶æ˜¯ä»€ä¹ˆï¼Œæœ¬æ–‡éƒ½å€¼å¾—ä¸€è¯»ã€‚</p><blockquote><p>å¦‚æœç”µè„‘å‰çš„æ˜å‹ä¹Ÿå¯¹ç»„ä»¶åº“å¼€å‘æ„Ÿå…´è¶£ï¼Œä¸å¦¨å…ˆç»™ä¸ªç‚¹èµï¼Œå†æŒç»­å…³æ³¨æ´›ç«¹å’Œå°é»‘çš„ç»„ä»¶åº“å¼€å‘ä¹‹æ—…ã€‚PSï¼šé…åˆ<a href="https://github.com/youngjuning/vant-react-native">ä»“åº“</a>å’Œ<a href="https://vant-react-native.js.org/">ç»„ä»¶åº“æ–‡æ¡£</a>é˜…è¯»æœ¬æ–‡æ•ˆæœæ›´ä½³å–²ï¼</p></blockquote><h2 id="ç«™åœ¨-Vant-Design-çš„è‚©è†€ä¸Š"><a href="#ç«™åœ¨-Vant-Design-çš„è‚©è†€ä¸Š" class="headerlink" title="ç«™åœ¨ Vant Design çš„è‚©è†€ä¸Š"></a>ç«™åœ¨ Vant Design çš„è‚©è†€ä¸Š</h2><p>ç»´æŠ¤å¼€å‘ä¸€ä¸ªç»„ä»¶åº“æ— ç–‘æ˜¯éœ€è¦æŠ•å…¥å¾ˆå¤šæ—¶é—´å’Œç²¾åŠ›çš„ï¼ŒFlag ç«‹äº†å€’ï¼Œå€’äº†åˆç«‹ã€‚å¯è°“ä¸‡äº‹å¼€å¤´éš¾ï¼Œé¦–å…ˆæˆ‘ä»¬è¦æœ‰è‡ªçŸ¥ä¹‹æ˜ï¼Œåœ¨æ²¡æœ‰è®¾è®¡å¸ˆå’Œä¸šä½™å¼€å‘çš„æƒ…å†µä¸‹ï¼Œæˆ‘é€‰æ‹©äº†ç»™ç°æœ‰ UI Design å®ç° React Native ç‰ˆæœ¬çš„æ–¹å¼å¼€å¯ç»„ä»¶åº“å¼€å‘ä¹‹æ—…ã€‚åœ¨è°ƒç ”äº† <a href="https://github.com/youzan/vant">vant</a>ã€<a href="https://github.com/NSFI/fishd-mobile/">fishd-mobile</a> å’Œ <a href="https://github.com/ant-design/ant-design-mobile">antd-mobile</a> åæˆ‘é€‰æ‹©äº† vantã€‚è¿™æ˜¯å‡ ä¸ªä»“åº“çš„ç°çŠ¶å¯¹æ¯”ï¼š</p><table><thead><tr><th>ç»„ä»¶åº“</th><th>å›¢é˜Ÿ</th><th>Github Star</th><th>Npm å‘¨ä¸‹è½½é‡</th><th>ç»´æŠ¤åº¦</th></tr></thead><tbody><tr><td>vant</td><td>æœ‰èµ</td><td>17.7K</td><td>27,789</td><td>ç»´é«˜åº¦é«˜ï¼Œæµè¡Œåº¦ä¹Ÿé«˜</td></tr><tr><td>antd-mobile</td><td>Ant Design Team</td><td>8.9K</td><td>31,470</td><td>å‡ ä¹ä¸ç»´æŠ¤ï¼Œæ®è¯´èš‚èšå†…éƒ¨ä¹Ÿä¸ç”¨äº†</td></tr><tr><td>fishd-mobile</td><td>ç½‘æ˜“äº‘å•†å‰ç«¯</td><td>29</td><td>22</td><td>çœ‹èµ·æ¥æ˜¯ä¸ª KPI é¡¹ç›®æ— ç–‘äº†</td></tr></tbody></table><p>ç¡®å®šäº†æ—…ç¨‹çš„æ–¹å‘ï¼Œå°±æ˜¯ç»™æˆ‘ä»¬çš„ç»„ä»¶åº“èµ·ä¸€ä¸ªåˆé€‚çš„åå­—å’Œå£å·ï¼Œç”¨å‰ç«¯å·¥ç¨‹å¸ˆçš„æ–¹å¼è¡¨è¿°å°±æ˜¯ <code>package.json</code> çš„ <code>name</code> å’Œ <code>description</code> å­—æ®µï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vant-react-native&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Lightweight React Native UI Components inspired on Vant&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>ç”±äºæˆ‘ä»¬çš„ç»„ä»¶åº“å®šä½æ˜¯ vant çš„ RN ç‰ˆï¼Œå‚ç…§ lottie-react-nativeã€styled-react-nativeã€jpush-react-native çš„å‘½åæ–¹å¼æˆ‘ä»¬å°†ç»„ä»¶åº“å‘½åä¸º vant-react-nativeï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¸Œæœ›ç»„ä»¶åº“å®Œæˆæ—¶èƒ½è·å¾— vant å®˜æ–¹çš„æ”¯æŒã€‚</p></blockquote><h2 id="åŸºäº-Lerna-çš„å¤šåŒ…ç®¡ç†æ¶æ„"><a href="#åŸºäº-Lerna-çš„å¤šåŒ…ç®¡ç†æ¶æ„" class="headerlink" title="åŸºäº Lerna çš„å¤šåŒ…ç®¡ç†æ¶æ„"></a>åŸºäº Lerna çš„å¤šåŒ…ç®¡ç†æ¶æ„</h2><p>Lerna æ˜¯ä¸€ä¸ªç®¡ç†å·¥å…·ï¼Œç”¨äºç®¡ç†åŒ…å«å¤šä¸ªè½¯ä»¶åŒ…ï¼ˆpackageï¼‰çš„ JavaScript é¡¹ç›®ã€‚ç”± Lerna ç®¡ç†çš„ä»“åº“æˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸ºå•ä½“ä»“åº“ï¼ˆmonorepoï¼‰ã€‚åŸºäº Lerna çš„å¤šåŒ…ç®¡ç†æ¶æ„çš„ä¼˜ç‚¹åœ¨äºï¼š</p><ul><li>ç»„ä»¶çº§åˆ«è§£è€¦ï¼Œç‹¬ç«‹ç‰ˆæœ¬æ§åˆ¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰ç‰ˆæœ¬è®°å½•å¯è¿½æº¯</li><li>ç»„ä»¶å•ç‹¬å‘å¸ƒï¼Œæ”¯æŒç°åº¦ã€ç‰ˆæœ¬å›æ»šä»¥åŠå¹³æ»‘å‡é™çº§</li><li>æŒ‰éœ€å¼•ç”¨ï¼Œç”¨æˆ·å®‰è£…å…·ä½“æŸä¸ªç»„ä»¶åŒ…ï¼Œæ— éœ€é…ç½®å³å¯å®ç°æŒ‰éœ€åŠ è½½çš„æ•ˆæœã€‚</li><li>å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œé™ä½å¤§å‹å¤æ‚åº¦ã€ç»„ä»¶ä¹‹é—´ä¾èµ–æ¸…æ™°ä¸”å¯æ§åˆ¶</li><li>å•ä¸€èŒè´£åŸåˆ™ï¼Œé™ä½å¼€æºåŸºå‹çš„å‚ä¸å’Œè´¡çŒ®éš¾åº¦</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â””â”€â”€ packages</span><br><span class="line">    â”œâ”€â”€ button <span class="comment"># @vant-react-native/button</span></span><br><span class="line">    â””â”€â”€ icons <span class="comment"># @vant-react-native/icon</span></span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–-lerna-é¡¹ç›®"><a href="#åˆå§‹åŒ–-lerna-é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ– lerna é¡¹ç›®"></a>åˆå§‹åŒ– lerna é¡¹ç›®</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> vant-react-native &amp;&amp; lerna init --independent</span><br></pre></td></tr></table></figure><h3 id="yarn-workspaces"><a href="#yarn-workspaces" class="headerlink" title="yarn workspaces"></a>yarn workspaces</h3><p>ä½¿ç”¨ <a href="https://yarnpkg.com/lang/zh-Hans/docs/workspaces/">yarn workspaces</a> ç»“åˆ Lerna <code>useWorkspaces</code> å¯ä»¥å®ç° <a href="https://github.com/lerna/lerna/blob/main/doc/hoist.md">Lerna Hoisting</a>ã€‚è¿™å¹¶ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾ï¼Œè¿™å¯ä»¥è®©ä½ åœ¨ç»Ÿä¸€çš„åœ°æ–¹ï¼ˆæ ¹ç›®å½•ï¼‰ç®¡ç†ä¾èµ–ï¼Œè¿™å³èŠ‚çœæ—¶é—´åˆèŠ‚çœç©ºé—´ã€‚</p><p>é…ç½® <code>lerna.json</code>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;npmClient&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;useWorkspaces&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æ‰˜ç®¡ç»™ yarn wrokspace ä¹‹åï¼Œlerna çš„ <code>packages</code> å°†ä¼šè¢«é¡¶çº§ <code>package.json</code> çš„ <code>workspaces</code> è¦†ç›–:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;workspaces&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;packages/*&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="lerna-publish-config"><a href="#lerna-publish-config" class="headerlink" title="lerna publish config"></a>lerna publish config</h3><p>å¦‚æœä½ ä¸æƒ³åœ¨æ‰€æœ‰ <code>package.json</code> æ–‡ä»¶ä¸­å•ç‹¬æ˜ç¡®è®¾ç½®ä½ çš„æ³¨å†Œè¡¨é…ç½®ï¼Œä¾‹å¦‚ä½¿ç”¨ç§æœ‰æ³¨å†Œè¡¨æ—¶ï¼Œè®¾ç½® <code>command.publish.registry</code> å¾ˆæœ‰ç”¨ã€‚é…ç½® <code>ignoreChanges</code> åˆ™æ˜¯ä¸ºäº†é¿å…ä¸å¿…è¦çš„ç‰ˆæœ¬å‡çº§ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;ignoreChanges&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;ignored-file&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;**/__tests__/**&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;**/*.md&quot;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;publish&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;registry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://registry.npmjs.org&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœä½ çš„åŒ…åæ˜¯å¸¦ scope çš„ï¼Œéœ€è¦åœ¨é‚£ä¸ªåŒ…çš„ <code>package.json</code> ä¸­è®¾ç½® <code>publishConfig.access</code> ä¸º <code>&quot;public&quot;</code>ã€‚</p></blockquote><h3 id="lerna-version-config"><a href="#lerna-version-config" class="headerlink" title="lerna version config"></a>lerna version config</h3><p>å½“é…ç½® <code>conventionalCommits</code> ä¸º <code>true</code> åï¼Œlerna ç‰ˆæœ¬å°†ä½¿ç”¨ <a href="https://conventionalcommits.org/">Conventional Commits Specification</a> æ¥ç¡®å®šç‰ˆæœ¬å‡çº§å¹¶ <a href="https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-cli">ç”Ÿæˆ CHANGELOG.md æ–‡ä»¶</a>ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;conventionalCommits&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chore(release): publish&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="è§„èŒƒåŒ–æäº¤"><a href="#è§„èŒƒåŒ–æäº¤" class="headerlink" title="è§„èŒƒåŒ–æäº¤"></a>è§„èŒƒåŒ–æäº¤</h2><p>è§„èŒƒåŒ– <code>git commit</code> å¯¹äºæé«˜ <code>git log</code> å¯è¯»æ€§ã€å¯æ§çš„ç‰ˆæœ¬æ§åˆ¶å’Œ changelog ç”Ÿæˆéƒ½æœ‰ç€é‡è¦çš„ä½œç”¨ã€‚æ´›ç«¹ä¹‹å‰åœ¨ <a href="https://juejin.cn/post/6877462747631026190">ä¸€æ–‡æå®šè§„èŒƒåŒ–Git Commit</a> ä¸­è¯¦ç»†è®²è¿°äº† Conventional Commits çš„æ¦‚å¿µä»¥åŠ commitizenã€cz-customizableã€@commitlint&#x2F;cliã€yorkie å’Œ commitlint-config-cz ç­‰å·¥å…·çš„é…ç½®ã€‚</p><p>ç”±äºé…ç½®ç¹çï¼Œæˆ‘åœ¨ <a href="https://github.com/youngjuning/cli#%E4%B8%80%E9%94%AE%E9%85%8D%E7%BD%AE-conventional-commit">@youngjuning&#x2F;cli</a> ä¸­æ·»åŠ äº† <code>init-commit</code> å‘½ä»¤ä¸€é”®é…ç½® conventional commitã€‚å¯ä»¥æ‰“å¼€è¿™ä¸ª <a href="https://github.com/youngjuning/vant-react-native/commit/d49f4203eacd37d3908306d309783ed5c11fb565">commit</a> æŸ¥çœ‹é…ç½®ä¿¡æ¯ã€‚</p><blockquote><p>æ³¨æ„ï¼šhusky é«˜ç‰ˆæœ¬ç”¨æ³•ä¸å‘åå…¼å®¹ï¼Œæˆ‘åœ¨è¿™ä¸ª <a href="https://github.com/youngjuning/vant-react-native/commit/174c7fd883dd5dc7a0c4f5d8fcb25ed605680b12">commit</a> ä¸­ç”¨å°¤å¤§çš„ yorkie ä»£æ›¿äº† huskyã€‚</p></blockquote><h2 id="ä»£ç è§„èŒƒåŒ–"><a href="#ä»£ç è§„èŒƒåŒ–" class="headerlink" title="ä»£ç è§„èŒƒåŒ–"></a>ä»£ç è§„èŒƒåŒ–</h2><p>ä»£ç è§„èŒƒåŒ–çš„é‡è¦æ€§ä¸è¨€è€Œå–»ï¼Œä»£ç è§„èŒƒåŒ–æ¶‰åŠçš„å·¥å…·æœ‰ editorconfigã€eslintã€prettier ç­‰ï¼Œåœ¨ <a href="https://juejin.cn/post/6854573217320075278">è£…å®ƒ|å†ä¹Ÿä¸ç”¨æ“å¿ƒESLinté…ç½®</a> ä¸€æ–‡ä¸­æˆ‘ä»‹ç»äº†å¦‚ä½•ä¸€æ­¥ä¸€æ­¥å»ºè®¾å±äºè‡ªå·±çš„ eslint config æ’ä»¶å¹¶äº§å‡ºäº† <a href="https://github.com/youngjuning/eslint-config">@youngjuning&#x2F;eslint-config</a> å’Œ <a href="https://github.com/youngjuning/prettier-config">@youngjuning&#x2F;prettier-config</a>ã€‚</p><p>vant-react-native æš‚æ—¶ä½¿ç”¨ @youngjuning&#x2F;eslint-configã€@youngjuning&#x2F;prettier-config çº¦æŸé¡¹ç›®ä»£ç è§„èŒƒã€‚ç›¸å…³é…ç½®å¦‚ä¸‹æ–‡ã€‚</p><h3 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h3><p>é¦–å…ˆå®‰è£… react-native æ‰€éœ€çš„æ’ä»¶ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D eslint-plugin-react \</span><br><span class="line">  eslint-plugin-react-hooks \</span><br><span class="line">  eslint-plugin-jsx-a11y \</span><br><span class="line">  eslint-plugin-import \</span><br><span class="line">  eslint-plugin-react-native</span><br></pre></td></tr></table></figure><p>ç„¶åé…ç½® <code>.eslintrc.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;@youngjuning/eslint-config/react-native&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="prettier"><a href="#prettier" class="headerlink" title="prettier"></a>prettier</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .prettierrc.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="built_in">require</span>(<span class="string">&#x27;@youngjuning/prettier-config&#x27;</span>);</span><br></pre></td></tr></table></figure><blockquote><p>@youngjuning&#x2F;eslint-config è®¡åˆ’ä¹Ÿç”¨ lerna ç®¡ç†ï¼Œäº§å‡º @youngjuning&#x2F;eslint-config-reactã€@youngjuning&#x2F;eslint-config-react-nativeã€@youngjuning&#x2F;eslint-config-vue è®©å¼€å‘è€…æ— éœ€è¿‡å¤šé…ç½®å¼€ç®±å³ç”¨ã€‚</p></blockquote><h3 id="editorconfig"><a href="#editorconfig" class="headerlink" title="editorconfig"></a>editorconfig</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># .editorconfig</span><br><span class="line"># EditorConfig is awesome: http://EditorConfig.org</span><br><span class="line"></span><br><span class="line"># top-most EditorConfig file</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line"># Unix-style newlines with a newline ending every file</span><br><span class="line">[*]</span><br><span class="line">indent_style = space</span><br><span class="line">indent_size = 2</span><br><span class="line">end_of_line = lf</span><br><span class="line">charset = utf-8</span><br><span class="line">trim_trailing_whitespace = true</span><br><span class="line">insert_final_newline = true</span><br><span class="line"></span><br><span class="line">[*.md]</span><br><span class="line">trim_trailing_whitespace = false</span><br><span class="line"></span><br><span class="line">[*.gradle]</span><br><span class="line">indent_size = 4</span><br><span class="line"></span><br><span class="line">[BUCK]</span><br><span class="line">indent_size = 4</span><br></pre></td></tr></table></figure><h3 id="yorkie-amp-lint-staged"><a href="#yorkie-amp-lint-staged" class="headerlink" title="yorkie &amp; lint-staged"></a>yorkie &amp; lint-staged</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add -D yorkie lint-staged</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;gitHooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;commit-msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commitlint -e -V&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pre-commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;js,jsx,ts,tsx&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;eslint --fix&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;git add .&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="ç¬¬ä¸€ä¸ªç»„ä»¶ä»-Icon-å¼€å§‹"><a href="#ç¬¬ä¸€ä¸ªç»„ä»¶ä»-Icon-å¼€å§‹" class="headerlink" title="ç¬¬ä¸€ä¸ªç»„ä»¶ä» Icon å¼€å§‹"></a>ç¬¬ä¸€ä¸ªç»„ä»¶ä» Icon å¼€å§‹</h2><p>ä¸€ä¸ªæˆç†Ÿçš„ç»„ä»¶åº“éƒ½ä¼šæ‹¥æœ‰è‡ªå·±çš„ä¸€å¥— Iconï¼ŒIcon ä¸€èˆ¬ç”±è®¾è®¡å¸ˆé€šè¿‡ Sketch è®¾è®¡ï¼Œç„¶åå¯¼å‡º svg æ–‡ä»¶ã€‚</p><p>ant-design-icons çš„ svg æ–‡ä»¶æ˜¯ <a href="https://github.com/ant-design/ant-design-icons/tree/master/packages/icons-svg/svg/filled">ä¿å­˜åœ¨æœ¬åœ°</a>ï¼Œç„¶åé€šè¿‡è„šæœ¬ç”Ÿæˆ <a href="https://github.com/ant-design/ant-design-icons/tree/master/packages/icons-react/src/icons">react ç»„ä»¶</a>ã€<a href="https://github.com/ant-design/ant-design-icons/tree/master/packages/icons-vue">vue ç»„ä»¶</a> å’Œ <a href="https://github.com/ant-design/ant-design-icons/tree/master/packages/icons-react-native">icons-react-native</a> ç­‰ç»„ä»¶ï¼Œç”±äºæ”¯æŒçš„æ¡†æ¶æ¯”è¾ƒå®Œå¤‡æˆ‘ä»¬æ— éœ€è‡ªå·±å®ç°ï¼ŒRN æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ <a href="https://github.com/ant-design/ant-design-icons/tree/master/packages/icons-react-native">icons-react-native</a>ã€‚</p><p>vant ä»¥åŠ fishd-mobile åˆ™æ˜¯é€šè¿‡ Iconfont ç»´æŠ¤ svg æ–‡ä»¶ï¼Œç„¶åé€šè¿‡è®¾ç½® <code>@font-face</code> çš„æ–¹å¼å®ç° Icon ç»„ä»¶ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b3f6212f0124f4fab8b70dfeeb40c25~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>æœ‰äº† ttf æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åƒ @ant-design&#x2F;icons-react-native ä¸€æ ·åŸºäº ttf æ–‡ä»¶ä½¿ç”¨è„šæœ¬ç”Ÿæˆ Icon ç»„ä»¶ï¼Œä½†æ˜¯ä½¿ç”¨ ttf å­—ä½“æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œå°±æ˜¯æ¯æ¬¡æ›´æ–°å›¾æ ‡ï¼Œéƒ½è¦ç›¸åº”çš„æ›´æ–° ttf æ–‡ä»¶ï¼Œç„¶åå†æ¬¡æ‰“åŒ…å‘å¸ƒ APPã€‚è€Œä¸” ttf ä¸æ”¯æŒå¤šç§è‰²å½©çš„å›¾æ ‡ï¼Œå¯¼è‡´æ‰€æœ‰å›¾æ ‡éƒ½æ˜¯å•è‰²ã€‚å¦‚æœä½ æ˜¯å€ŸåŠ© react-native-vector-iconsï¼Œè¯¥åº“å†…ç½®äº† 10 å¤šå¥— ttf æ–‡ä»¶ï¼Œåˆèµ·æ¥æœ‰ 2M å·¦å³ï¼›ä½ å¯èƒ½ç”¨ä¸åˆ°å®ƒä»¬ï¼Œä½†æ˜¯å®ƒä»¬ä»ç„¶ä¼šè¢«æ‰“åŒ…è¿›ä½ çš„ APP é‡Œï¼Œè¿™ä¹Ÿæ˜¯æˆ‘è®¤ä¸º react-native-elements è¿™ä¸ªåº“å¤–å¼ºä¸­å¹²çš„ä¸€å¤§åŸå› ã€‚</p><p>é‚£ä¹ˆåªæœ‰ Iconfont é“¾æ¥æˆ‘ä»¬å¦‚ä½•å®ç° vant-icons çš„ React Native ç‰ˆæœ¬å‘¢ï¼Ÿè¿™é‡Œæ´›ç«¹æ²¡æœ‰è‡ªå·±å†™è„šæœ¬ï¼Œè€Œæ˜¯ä½¿ç”¨äº†ä¸€æ¬¾å« react-native-iconfont-cli çš„å·¥å…·ï¼Œ<a href="https://github.com/fwh1990">fwh1990</a> å¤§ä½¬é’ˆå¯¹ä»¥ä¸Šç—›ç‚¹ç”¨çº¯ Javascript å®ç° iconfont åˆ° React ç»„ä»¶çš„è½¬æ¢æ“ä½œï¼Œä¸éœ€è¦ä¾èµ– ttf å­—ä½“æ–‡ä»¶ï¼Œä¸éœ€è¦æ‰‹åŠ¨ä¸‹è½½å›¾æ ‡åˆ°æœ¬åœ°ã€‚</p><h3 id="åˆ›å»º-lerna-å­åŒ…"><a href="#åˆ›å»º-lerna-å­åŒ…" class="headerlink" title="åˆ›å»º lerna å­åŒ…"></a>åˆ›å»º lerna å­åŒ…</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸»åŒ…ï¼Œä¸»åŒ…ç”¨æ¥ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰çš„ç»„ä»¶</span></span><br><span class="line">$ lerna create vant-react-native -y</span><br><span class="line"><span class="comment"># åˆ›å»º icons åŒ…ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç»„ä»¶ï¼</span></span><br><span class="line">$ lerna create @vant-react-native/icons -y</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„ç›®å½•ç»“æ„çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â””â”€â”€ packages</span><br><span class="line">    â”œâ”€â”€ icons</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ README.md</span><br><span class="line">    â”‚Â Â  â””â”€â”€ package.json</span><br><span class="line">    â””â”€â”€ vant-react-native</span><br><span class="line">        â”œâ”€â”€ README.md</span><br><span class="line">        â””â”€â”€ package.json</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆ-icons"><a href="#ç”Ÿæˆ-icons" class="headerlink" title="ç”Ÿæˆ icons"></a>ç”Ÿæˆ icons</h3><h4 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn workspace @vant-react-native/icons add -D react-native-svg react-native-iconfont-cli</span><br></pre></td></tr></table></figure><h4 id="ç”Ÿæˆé…ç½®æ–‡ä»¶"><a href="#ç”Ÿæˆé…ç½®æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆé…ç½®æ–‡ä»¶"></a>ç”Ÿæˆé…ç½®æ–‡ä»¶</h4><p>æˆ‘ä»¬åœ¨ <code>packages/icons</code> ç›®å½•ä¸‹ä½¿ç”¨ <code>npx iconfont-init</code> å‘½ä»¤ä¼šç”Ÿæˆ <code>iconfont.json</code> æ–‡ä»¶ï¼Œè‡ªå®šä¹‰åå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;symbol_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://at.alicdn.com/t/font_2553510_7cds497uxwn.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;use_typescript&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;save_dir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./lib&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;trim_icon_prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;van-icon&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;default_icon_size&quot;</span><span class="punctuation">:</span> <span class="number">18</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="ç”Ÿæˆ-React-Native-æ ‡å‡†ç»„ä»¶"><a href="#ç”Ÿæˆ-React-Native-æ ‡å‡†ç»„ä»¶" class="headerlink" title="ç”Ÿæˆ React Native æ ‡å‡†ç»„ä»¶"></a>ç”Ÿæˆ React Native æ ‡å‡†ç»„ä»¶</h4><p>æ‰§è¡Œ <code>npx iconfont-rn</code> å‘½ä»¤å³å¯ç”Ÿæˆæ ‡å‡† React Native ç»„ä»¶ã€‚ç”±äºå›¾æ ‡æ–‡ä»¶æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬ä¸å°†å›¾æ ‡äº§ç‰©åŠ å…¥ git ç®¡ç†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ npm å‘å¸ƒå‰æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx iconfont-rn&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prepublishOnly&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn build&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®-react-native-vant"><a href="#é…ç½®-react-native-vant" class="headerlink" title="é…ç½® react-native-vant"></a>é…ç½® react-native-vant</h3><p>æˆ‘ä»¬å‰é¢æåˆ° <code>packages/vant-react-native</code> æ˜¯ä¸»åŒ…çš„ç›®å½•ï¼Œæˆ‘ä»¬éœ€è¦å°† <code>@vant-react-native/icons</code> åŒ…æ·»åŠ åˆ°ä¸»åŒ…çš„ä¾èµ–ä¸­å¹¶å¯¼å‡ºã€‚</p><h4 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ lerna add @vant-react-native/icons --scope vant-react-native</span><br></pre></td></tr></table></figure><h4 id="å¯¼å‡º-Icon-ç»„ä»¶"><a href="#å¯¼å‡º-Icon-ç»„ä»¶" class="headerlink" title="å¯¼å‡º Icon ç»„ä»¶"></a>å¯¼å‡º Icon ç»„ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// packages/vant-react-native/src/index.ts</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> <span class="title class_">Icon</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@vant-react-native/icons&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;@vant-react-native/icons&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="tsconfig-é…ç½®"><a href="#tsconfig-é…ç½®" class="headerlink" title="tsconfig é…ç½®"></a>tsconfig é…ç½®</h4><p>å¯¹ä¸æ¯ä¸ªå­åŒ…æˆ‘ä»¬æœŸæœ›ä½¿ç”¨ä¸€æ ·çš„é…ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå…ˆåœ¨æ•´ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•æ–°å»º <a href="https://github.com/youngjuning/vant-react-native/blob/main/tsconfig.base.json">tsconfig. base.json</a>ï¼Œåœ¨å­åŒ…ç»§æ‰¿å³å¯ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="string">&quot;../../tsconfig.base.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lib&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®å‘å¸ƒè„šæœ¬"><a href="#é…ç½®å‘å¸ƒè„šæœ¬" class="headerlink" title="é…ç½®å‘å¸ƒè„šæœ¬"></a>é…ç½®å‘å¸ƒè„šæœ¬</h4><p>å’Œ <code>@vant-react-native/icons</code> å­åŒ…ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ  <code>build</code> å’Œ <code>prepublishOnly</code> è„šæœ¬ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsc&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prepublishOnly&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn build&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="å‘å¸ƒåŒ…"><a href="#å‘å¸ƒåŒ…" class="headerlink" title="å‘å¸ƒåŒ…"></a>å‘å¸ƒåŒ…</h3><p>ç¬¬ä¸€æ¬¡å‘å¸ƒçš„è¯ï¼Œæ³¨æ„ä½¿ç”¨çš„æ˜¯ <code>lerna publish 0.0.1</code>ï¼Œå› ä¸º lerna çš„å‘å¸ƒå‘½ä»¤æ²¡æœ‰ç¬¬ä¸€æ¬¡å‘å¸ƒè¿™ä¸ªå‚æ•°ï¼Œæ‰€ä»¥éœ€è¦æ˜¾ç¤ºæŒ‡å®šåˆå§‹ç‰ˆæœ¬ã€‚æˆ–è€…å¯ä»¥å°†åˆå§‹ç‰ˆæœ¬è®¾ç½®ä¸º <code>0.0.0</code> ç„¶åæ‰§è¡Œ <code>lerna publish</code>ã€‚</p><blockquote><p>å°æŠ€å·§ï¼šå¦‚æœå‘å¸ƒåæƒ³æŸ¥çœ‹åŒ…å†…å®¹ï¼Œå¯ä»¥é€šè¿‡ <a href="https://www.jsdelivr.com/">jsdelivr</a> æŸ¥çœ‹ã€‚æ¯”å¦‚åˆšå‘å¸ƒçš„ <a href="https://cdn.jsdelivr.net/npm/vant-react-native/">vant-react-native</a> å’Œ <a href="https://cdn.jsdelivr.net/npm/@vant-react-native/icons/">@vant-react-native&#x2F;icons</a></p></blockquote><h2 id="å¼€å‘è°ƒè¯•"><a href="#å¼€å‘è°ƒè¯•" class="headerlink" title="å¼€å‘è°ƒè¯•"></a>å¼€å‘è°ƒè¯•</h2><p>ä¸€ä¸ªå®Œå–„ä¸”ä½“éªŒè‰¯å¥½çš„è°ƒè¯•æµç¨‹ä¸ä»…èƒ½å¤Ÿæ»¡è¶³åœ¨å¼€å‘é˜¶æ®µéªŒè¯ç»„ä»¶æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œè¿˜å¯ä»¥é™ä½å¼€æºç¤¾åŒºåŸºå‹çš„å‚ä¸éš¾åº¦ã€‚React Native ç»„ä»¶åº“çš„è°ƒè¯•å’Œå…¶ä»–æŠ€æœ¯æ ˆæµç¨‹å¤§ä½“æ²¡æœ‰åŒºåˆ«ï¼Œåªä¸è¿‡å› ä¸º <a href="https://github.com/facebook/metro/issues/1">Metro ä¸æ”¯æŒè½¯è¿æ¥</a> ä»¥åŠ vant-react-native æ˜¯åŸºäº lerna çš„å•ä½“ä»“åº“é¡¹ç›®ï¼Œæˆ‘ä»¬çš„é…ç½®ä¼šæœ‰ä¸åŒã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f3856a691a73409c8533fa9dd1966357~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h3 id="åˆå§‹åŒ–-React-Native-App"><a href="#åˆå§‹åŒ–-React-Native-App" class="headerlink" title="åˆå§‹åŒ– React Native App"></a>åˆå§‹åŒ– React Native App</h3><p>ç”±äºæ˜¯ React Native é¡¹ç›®ï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¸€ä¸ª React Native é¡¹ç›®ã€‚é¦–å…ˆæ‰¾ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨ <code>react-native init vantapp --template react-native-template-typescript</code> åˆ›å»ºä¸€ä¸ªæ–°çš„ React Native Appã€‚ç„¶åå°†ç”Ÿæˆçš„ App ä¸æˆ‘ä»¬çš„ä¸»é¡¹ç›®åˆå¹¶ã€‚åˆå¹¶åçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ App.tsx</span><br><span class="line">â”œâ”€â”€ __tests__</span><br><span class="line">â”‚   â””â”€â”€ App-test.tsx</span><br><span class="line">â”œâ”€â”€ android</span><br><span class="line">â”‚   â”œâ”€â”€ app</span><br><span class="line">â”‚   â”œâ”€â”€ build.gradle</span><br><span class="line">â”‚   â”œâ”€â”€ gradle</span><br><span class="line">â”‚   â”œâ”€â”€ gradle.properties</span><br><span class="line">â”‚   â”œâ”€â”€ gradlew</span><br><span class="line">â”‚   â”œâ”€â”€ gradlew.bat</span><br><span class="line">â”‚   â””â”€â”€ settings.gradle</span><br><span class="line">â”œâ”€â”€ app.json</span><br><span class="line">â”œâ”€â”€ babel.config.js</span><br><span class="line">â”œâ”€â”€ commitlint.config.js</span><br><span class="line">â”œâ”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ ios</span><br><span class="line">â”‚   â”œâ”€â”€ Podfile</span><br><span class="line">â”‚   â”œâ”€â”€ Podfile.lock</span><br><span class="line">â”‚   â”œâ”€â”€ Pods</span><br><span class="line">â”‚   â”œâ”€â”€ vantapp</span><br><span class="line">â”‚   â”œâ”€â”€ vantapp.xcodeproj</span><br><span class="line">â”‚   â”œâ”€â”€ vantapp.xcworkspace</span><br><span class="line">â”‚   â””â”€â”€ vantappTests</span><br><span class="line">â”œâ”€â”€ lerna.json</span><br><span class="line">â”œâ”€â”€ metro.config.js</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ packages</span><br><span class="line">â”‚   â”œâ”€â”€ icons</span><br><span class="line">â”‚   â””â”€â”€ vant-react-native</span><br><span class="line">â”œâ”€â”€ tsconfig.base.json</span><br><span class="line">â”œâ”€â”€ tsconfig.json</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure><p>ä¸»è¦å†²çªçš„æ˜¯ Prettierã€eslint ç­‰å·¥å…·çš„é…ç½®ï¼Œåˆå¹¶æ²¡é‚£ä¹ˆéš¾ã€‚åœ¨è¿è¡Œé¡¹ç›®ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸€èˆ¬éœ€è¦ç¼–è¯‘é¡¹ç›®ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ© <code>lerna run build</code> å‘½ä»¤æ‰¹é‡è¿è¡Œå­åŒ…é‡Œçš„ <code>build</code> npm scriptã€‚</p><blockquote><p>æ³¨æ„ğŸ“¢ï¼šç”±äºå­åŒ…ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œä¸è¦ä½¿ç”¨ <code>--parallel</code> å‚æ•°å¹¶è¡Œæ‰§è¡Œæ‰“åŒ…è„šæœ¬ã€‚</p></blockquote><p>ç°åœ¨æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªä¹å®«æ ¼ Demo éªŒè¯ä¸€ä¸‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.tsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">View</span>, <span class="title class_">Text</span>, <span class="title class_">SafeAreaView</span>, <span class="title class_">ScrollView</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Icon</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vant-react-native&#x27;</span>;</span><br><span class="line"><span class="comment">// æˆ‘ä»¬ä¹Ÿå¯ä»¥åªå®‰è£… @vant-react-native/icons åŒ…</span></span><br><span class="line"><span class="comment">// import &#123; VanIconAdd &#125; from &#x27;@vant-react-native/icons&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IconNameType</span> = <span class="title class_">React</span>.<span class="property">ComponentProps</span>&lt;<span class="keyword">typeof</span> <span class="title class_">Icon</span>&gt;[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">SafeAreaView</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ScrollView</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Text</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;, <span class="attr">paddingVertical:</span> <span class="attr">20</span>, <span class="attr">fontSize:</span> <span class="attr">25</span>, <span class="attr">color:</span> &#x27;#<span class="attr">007fff</span>&#x27; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">            vant-react-native</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">flexWrap:</span> &#x27;<span class="attr">wrap</span>&#x27;, <span class="attr">flexDirection:</span> &#x27;<span class="attr">row</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;data.map((item, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">              const lastLineLength = data.length % 4 || 4;</span></span><br><span class="line"><span class="language-xml">              return (</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">View</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">key</span>=<span class="string">&#123;item&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">width:</span> &#x27;<span class="attr">25</span>%&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">marginBottom:</span> <span class="attr">index</span> &lt; <span class="attr">data.length</span> <span class="attr">-</span> <span class="attr">lastLineLength</span> ? <span class="attr">40</span> <span class="attr">:</span> <span class="attr">0</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">alignItems:</span> &#x27;<span class="attr">center</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                &gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">Icon</span> <span class="attr">name</span>=<span class="string">&#123;item&#125;</span> <span class="attr">size</span>=<span class="string">&#123;40&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> &#x27;#<span class="attr">646566</span>&#x27;, <span class="attr">marginTop:</span> <span class="attr">10</span> &#125;&#125;&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              );</span></span><br><span class="line"><span class="language-xml">            &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ScrollView</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">SafeAreaView</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">data</span>: <span class="title class_">IconNameType</span>[] = [<span class="string">&#x27;location-o&#x27;</span>, <span class="string">&#x27;like-o&#x27;</span>, <span class="string">&#x27;star-o&#x27;</span>, <span class="string">&#x27;phone-o&#x27;</span>, <span class="string">&#x27;setting-o&#x27;</span>, <span class="string">&#x27;fire-o&#x27;</span>, <span class="string">&#x27;coupon-o&#x27;</span>, <span class="string">&#x27;cart-o&#x27;</span>, <span class="string">&#x27;shopping-cart-o&#x27;</span>, <span class="string">&#x27;cart-circle-o&#x27;</span>, <span class="string">&#x27;friends-o&#x27;</span>, <span class="string">&#x27;comment-o&#x27;</span>, <span class="string">&#x27;gem-o&#x27;</span>, <span class="string">&#x27;gift-o&#x27;</span>, <span class="string">&#x27;point-gift-o&#x27;</span>, <span class="string">&#x27;send-gift-o&#x27;</span>, <span class="string">&#x27;service-o&#x27;</span>, <span class="string">&#x27;bag-o&#x27;</span>, <span class="string">&#x27;todo-list-o&#x27;</span>, <span class="string">&#x27;balance-list-o&#x27;</span>, <span class="string">&#x27;close&#x27;</span>, <span class="string">&#x27;clock-o&#x27;</span>, <span class="string">&#x27;question-o&#x27;</span>, <span class="string">&#x27;passed&#x27;</span>];</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œ <code>yarn ios</code> æŸ¥çœ‹å®é™…æ•ˆæœï¼ˆä¹‹åæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œ <code>yarn start --reset-cache</code> å¿«é€Ÿå¼€å§‹è°ƒè¯•ï¼‰ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d2828ea83804d3bb53a0563eaf429bd~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç›´æ¥ä½¿ç”¨äº† <code>import &#123; Icon &#125; from &#39;vant-react-native&#39;;</code> è€Œä¸æ˜¯ç›¸å¯¹è·¯å¾„å¼•ç”¨ packages ä¸‹çš„æ¨¡å—ã€‚å¯æ˜¯æˆ‘ä»¬çš„é¡¹ç›®å¹¶æ²¡ä¸å®‰è£…è¿™ä¸ªä¾èµ–ï¼Œç¼–è¯‘å™¨æ˜¯æ€ä¹ˆæ‰¾åˆ°çš„å‘¢ï¼Ÿè¿™é‡Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆé“¶å¼¹ï¼Œè¿™æ˜¯å› ä¸º lerna ä¼šæŠŠå­åŒ…è½¯é“¾æ¥åˆ° node_modules ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>ls -al</code> å‘ç°çœ‹åˆ°åŒ…çš„å®é™…æŒ‡å‘ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7857ecd166a74331befe791dc677257b~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ç±»å‹æç¤ºä¸­çœ‹åˆ°å®é™…æŒ‡å‘çš„æ˜¯ packages ä¸‹çš„æ–‡ä»¶ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba82260550904406b4224734761c2f5e~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><blockquote><p>æ³¨æ„ğŸ“¢ï¼š<a href="https://github.com/facebook/metro/issues/1">Metro ä¸æ”¯æŒç¬¦å·é“¾æ¥</a> æŒ‡çš„æ˜¯è½¯è¿æ¥çš„ç›®å½•ä¸åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¿™é‡Œæˆ‘ä»¬è½¯è¿æ¥æŒ‡å‘çš„ä½ç½®è¿˜åœ¨æ ¹ç›®å½•ä¸‹ï¼Œæ‰€ä»¥å¯ä»¥æ­£ç¡®å·¥ä½œâœ…ã€‚è¿™ä¸ªç‰¹æ€§ä¿è¯äº†è°ƒè¯•ä¸ç”Ÿäº§å¼€å‘çš„ä¸€è‡´æ€§å’Œä¾¿åˆ©æ€§ã€‚</p></blockquote><h3 id="å®æ—¶ç¼–è¯‘"><a href="#å®æ—¶ç¼–è¯‘" class="headerlink" title="å®æ—¶ç¼–è¯‘"></a>å®æ—¶ç¼–è¯‘</h3><p>ç°åœ¨æˆ‘ä»¬çš„è°ƒè¯•æµç¨‹æ˜¯ï¼š</p><ol><li>ä¿®æ”¹ä»£ç </li><li>æ‰§è¡Œ <code>lerna run build</code> ç¼–è¯‘æ¯ä¸ªå­åŒ…</li><li>æ‰§è¡Œ <code>yarn ios</code> è°ƒè¯•é¡¹ç›®</li><li>ä¿®æ”¹ä»£ç </li><li>æ‰§è¡Œ <code>lerna run build</code> é‡æ–°ç¼–è¯‘</li><li>æ‰§è¡Œ <code>yarn start --reset-cache</code> è¿è¡Œé¡¹ç›®</li><li>å¾ªç¯ 4ã€5ã€6ã€‚</li></ol><p>å°½ç®¡ React Native æœ‰ Fast Refresh åŠŸèƒ½ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬çš„ä»£ç æ˜¯éœ€è¦ç¼–è¯‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡å¤ç¼–è¯‘è¿è¡Œçš„åŠ¨ä½œã€‚</p><p>ä»»ä½•é‡å¤çš„å·¥ä½œéƒ½å¯ä»¥ç”¨è„šæœ¬ä»£æ›¿ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦ç»™æ¯ä¸ªå­åŒ…æ·»åŠ å®æ—¶ç¼–è¯‘çš„ scriptï¼Œåƒ rollupã€babelã€webpackã€typescript éƒ½æœ‰å‚æ•°å¯ä»¥å®ç°å®æ—¶ç¼–è¯‘ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsc -w&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsc&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prepublishOnly&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn build&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>è€Œæˆ‘ä»¬çš„ @vant-react-native&#x2F;icons åŒ…ä½¿ç”¨çš„ <code>npx iconfont</code> æ²¡æœ‰å®æ—¶ç¼–è¯‘é€‰é¡¹ï¼Œç»è¿‡è°ƒç ”ï¼Œæˆ‘å¼•å…¥äº† <a href="https://www.npmjs.com/package/onchange">onchange</a> è¿™ä¸ªåº“å¯ä»¥åŸºäº glob æ¨¡å¼ç›‘å¬æ–‡ä»¶æ”¹åŠ¨åæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;onchange -i &#x27;iconfont.json&#x27; -- yarn build&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>lerna run dev --parallel</code> æ‰¹é‡æ‰§è¡Œå®æ—¶ç¼–è¯‘è„šæœ¬ï¼Œè¿™é‡ŒåŠ  <code>--parallel</code> æ˜¯å› ä¸ºå­åŒ…å¦‚æœæ˜¯å®æ—¶ç¼–è¯‘ï¼Œè¿›ç¨‹ä¼šå¡ä½ã€‚ä¸ºäº†è¡¥æ•‘ï¼Œæˆ‘ä»¬ä¸å¾—ä¸é¢„å…ˆç¼–è¯‘ <code>@vant-react-native/icons</code> åŒ…ï¼Œç„¶åå› ä¸ºåŒæ ·çš„åŸå› æˆ‘å¼•å…¥äº† <code>npm-run-all</code> æ¥å¹¶è¡Œæ‰§è¡Œ <code>lerna run dev</code> å’Œ <code>react-native start</code>ï¼Œå®Œæ•´è„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;predev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lerna run build --scope @vant-react-native/icons&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lerna run dev --parallel&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-native start&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;debug&quot;</span><span class="punctuation">:</span> <span class="string">&quot;run-p dev start&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="æŒ‰éœ€åŠ è½½"><a href="#æŒ‰éœ€åŠ è½½" class="headerlink" title="æŒ‰éœ€åŠ è½½"></a>æŒ‰éœ€åŠ è½½</h2><blockquote><p>å°é»‘ï¼šâ€œæ´›ç«¹å“¥å“¥ï¼Œæˆ‘ä¹‹å‰ä¸ºäº†ä½¿ç”¨ react-native-elements çš„å…¶ä¸­å‡ ä¸ªç»„ä»¶è€Œå¼•å…¥äº†æ•´ä¸ªç»„ä»¶åº“ã€‚å› ä¸ºè¿™ä¸ªç»„ä»¶åº“ä¾èµ–äº† react-native-vector-icons å¯¼è‡´ bundle åŒ…å˜å¤§ã€‚å¦‚æœæˆ‘å°±æ˜¯æƒ³ç”¨æ•´å¥— vant-react-nativeï¼Œå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿâ€</p></blockquote><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒReact Native çš„æ‰“åŒ…å·¥å…· Metro <a href="https://github.com/facebook/metro/issues/227#issuecomment-583358386">ä¸æ”¯æŒ tree-shaking</a>ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹å¼å…¶å®å¾ˆç®€å•ï¼Œæœºæ™ºçš„ä½ å¯èƒ½çŸ¥é“é…åˆ <a href="https://www.npmjs.com/package/babel-plugin-import">babel-plugin-import</a> æ˜¯å¯ä»¥å®ç°æŒ‰éœ€åŠ è½½çš„éœ€æ±‚çš„ã€‚ä½†ç”±äºæˆ‘ä»¬æ˜¯å¤šåŒ…ç®¡ç†æ¶æ„ï¼Œéœ€è¦é’ˆå¯¹å¤šåŒ…çš„æ¶æ„è®¾è®¡ä¸€ä¸ªæ–¹æ¡ˆã€‚</p><h3 id="react-naitve-bundle-åŒ…"><a href="#react-naitve-bundle-åŒ…" class="headerlink" title="react-naitve bundle åŒ…"></a>react-naitve bundle åŒ…</h3><p>ä¸ºäº†æ¯”å¯¹ä¼˜åŒ–å‰ååŒ…å¤§å°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>react-native bundle</code> å‘½ä»¤çœ‹ä¸€ä¸‹çº¯ JS åŒ…çš„å¤§å°ï¼Œæˆ‘ä»¬æ¥ç®€å•çœ‹ä¸‹è¿™ä¸ªå‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">react-native bundle --platform ios --entry-file index.js --bundle-output ./bundle/ios/index.ios.jsbundle --assets-dest ./bundle/ios --dev <span class="literal">false</span> --reset-cache</span><br></pre></td></tr></table></figure><ul><li><code>--entry</code>ï¼šå…¥å£ js æ–‡ä»¶</li><li><code>--bundle-output</code>ï¼šç”Ÿæˆçš„ bundle æ–‡ä»¶è·¯å¾„</li><li><code>--platform</code>ï¼šå¹³å°</li><li><code>--assets-dest</code>ï¼šå›¾ç‰‡èµ„æºçš„è¾“å‡ºç›®å½•</li><li><code>--dev</code>ï¼šæ˜¯å¦ä¸ºå¼€å‘ç‰ˆæœ¬ï¼Œæ‰“æ­£å¼ç‰ˆçš„å®‰è£…åŒ…æ—¶æˆ‘ä»¬å°†å…¶èµ‹å€¼ä¸º false</li><li><code>--reset-cache</code>ï¼šé‡ç½®ç¼“å­˜ï¼Œé¿å…æ‰“åŒ…ä½¿ç”¨æ—§çš„ç¼“å­˜</li></ul><h3 id="æŒ‰éœ€åŠ è½½åŸç†"><a href="#æŒ‰éœ€åŠ è½½åŸç†" class="headerlink" title="æŒ‰éœ€åŠ è½½åŸç†"></a>æŒ‰éœ€åŠ è½½åŸç†</h3><p>å‰é¢æˆ‘ä»¬æåˆ° <code>packages/vant-react-native</code> åªæœ‰ä¸€ä¸ªæ–‡ä»¶ <code>src/index.ts</code> ç”¨æ¥å¯¼å‡ºæ‰€æœ‰å­åŒ…ï¼Œç°åœ¨æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–°çš„åŒ… Buttonï¼Œçœ‹ä¸Šå»å°±æ˜¯è¿™æ ·ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> <span class="title class_">Icon</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@vant-react-native/icons&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;@vant-react-native/icons&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@vant-react-native/icons&#x27;</span>;</span><br></pre></td></tr></table></figure><p>è¿™ç§å¯¼å‡ºæ–¹å¼ï¼Œç”¨æˆ·åªèƒ½é€šè¿‡ <code>import Button from &#39;@vant-react-native/button&#39;;</code> æˆ– <code>import Button from &#39;vant-react-native/lib/button&#39;;</code> çš„æ–¹å¼æ‰‹åŠ¨å®ç°æŒ‰éœ€åŠ è½½ï¼Œè¿™ä¸ä»…ä¸æ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨ï¼Œä»æ‰“åŒ…äº§ç‰©æ¥è¯´ä¹Ÿå¢åŠ äº†å¾ˆå¤šå­—èŠ‚ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆæ ·çš„ç»„ç»‡å½¢å¼æ‰èƒ½æ»¡è¶³æŒ‰éœ€åŠ è½½å‘¢ï¼Ÿç­”æ¡ˆå°±åœ¨ babel-plugin-import æ’ä»¶çš„æ–‡æ¡£ä¸­ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d8bd23d28b0413b8b3da8119d32dd35~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>ä»å›¾ä¸­æˆ‘ä»¬çœ‹å‡º babel-plugin-import æ’ä»¶æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µå°†å¼•ç”¨æŒ‡å‘äº†æ¨¡å—æ‰€åœ¨æ–‡ä»¶å¤¹ã€‚ç”¨æˆ·ä½¿ç”¨æ—¶å®‰è£…æ’ä»¶å¹¶åšå¦‚ä¸‹é…ç½®å°±å®Œæˆäº†æŒ‰éœ€åŠ è½½ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">[</span><span class="string">&quot;import&quot;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span> libraryName<span class="punctuation">:</span> <span class="string">&quot;antd&quot;</span><span class="punctuation">,</span> style<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>ä¾ç„¶æ²¡æœ‰é“¶å¼¹ï¼Œæ’ä»¶åšçš„å·¥ä½œåªæ˜¯ä»£æ›¿äº†ä½ çš„å³æ‰‹ã€‚çŸ¥é“äº†åŸç†æˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§æ–‡æ¡£è¦æ±‚çš„æ ¼å¼é‡æ–°ç»„ç»‡æˆ‘ä»¬çš„ vant-react-native åŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ CHANGELOG.md</span><br><span class="line">â”œâ”€â”€ lib                    <span class="comment"># ä¸Šä¼ åˆ° NPM çš„ç¼–è¯‘äº§ç‰©</span></span><br><span class="line">â”‚   â”œâ”€â”€ button             <span class="comment"># ç¬¦åˆ babel-plugin-import çš„é»˜è®¤é…ç½®è¦æ±‚</span></span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ index.d.ts</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.js</span><br><span class="line">â”‚   â”œâ”€â”€ icon</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ index.d.ts</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.js</span><br><span class="line">â”‚   â”œâ”€â”€ index.d.ts</span><br><span class="line">â”‚   â””â”€â”€ index.js          <span class="comment"># export * from &#x27;./button&#x27;;</span></span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ src                   <span class="comment"># æºç ç›®å½•</span></span><br><span class="line">â”‚   â”œâ”€â”€ button</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.ts</span><br><span class="line">â”‚   â”œâ”€â”€ icon</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.ts</span><br><span class="line">â”‚   â””â”€â”€ index.ts</span><br><span class="line">â””â”€â”€ tsconfig.json         <span class="comment"># ç¼–è¯‘é…ç½®ï¼Œå°† ts æ–‡ä»¶ç¼–è¯‘åˆ° lib æ–‡ä»¶å¤¹ä¸‹</span></span><br></pre></td></tr></table></figure><p><strong>vant-react-native&#x2F;src&#x2F;button&#x2F;index.tsï¼š</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Button</span> <span class="keyword">from</span> <span class="string">&#x27;@vant-react-native/button&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Button</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; <span class="title class_">Button</span> &#125;;</span><br></pre></td></tr></table></figure><p><strong>vant-react-native&#x2F;src&#x2F;icon&#x2F;index.tsï¼š</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Icon</span> <span class="keyword">from</span> <span class="string">&#x27;@vant-react-native/icons&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Icon</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; <span class="title class_">Icon</span> &#125;;</span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;@vant-react-native/icons&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>vant-react-native&#x2F;src&#x2F;index.tsï¼š</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;./icon&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;./button&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ç„¶åé¡¹ç›®ä¸­ä¿®æ”¹ babel.config.jsï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [<span class="string">&#x27;module:metro-react-native-babel-preset&#x27;</span>],</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [<span class="string">&quot;import&quot;</span>, &#123;<span class="attr">libraryName</span>: <span class="string">&#x27;vant-react-native&#x27;</span>&#125;]</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™-Babel-æ’ä»¶ï¼Ÿ"><a href="#ç¼–å†™-Babel-æ’ä»¶ï¼Ÿ" class="headerlink" title="ç¼–å†™ Babel æ’ä»¶ï¼Ÿ"></a>ç¼–å†™ Babel æ’ä»¶ï¼Ÿ</h3><p>è™½ç„¶é€šè¿‡ä¿®æ”¹ä¸»åŒ…çš„å¯¼å‡ºæ–¹å¼å¯ä»¥å®Œæˆéœ€æ±‚ï¼Œä½†æ˜¯å´æå¤§åœ°å¢åŠ äº†é¡¹ç›®æœ¬èº«çš„å¤æ‚åº¦ã€‚å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“ babel-plugin-import çš„åŸç†æ˜¯è½¬æ¢å¼•ç”¨è·¯å¾„ã€‚é‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡æ’ä»¶åŠ¨æ€æŠŠ <code>import &#123;Button&#125; from &#39;vant-react-native&#39;</code> è½¬æˆ <code>import Button from &#39;@vant-react-native/button&#39;</code> å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä¸‹é¢æ˜¯æˆ‘åŸºäº babel-plugin-import çš„ <code>customName</code> é…ç½®ç¼–å†™äº†ä¸€å¥—é…ç½®å¹¶å°è£…åœ¨ babel-plugin-import-vant åŒ…ä¸­ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> camelCase <span class="keyword">from</span> <span class="string">&#x27;camelcase&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (): <span class="built_in">any</span>[] =&gt; [</span><br><span class="line">  [</span><br><span class="line">    <span class="string">&#x27;import&#x27;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">libraryName</span>: <span class="string">&#x27;vant-react-native&#x27;</span>,</span><br><span class="line">      <span class="attr">customName</span>: <span class="function">(<span class="params">name: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (name === <span class="string">&#x27;icon&#x27;</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&#x27;@vant-react-native/icons&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (name.<span class="title function_">match</span>(<span class="regexp">/^van-icon-/</span>)) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">`@vant-react-native/icons/lib/<span class="subst">$&#123;camelCase(name, &#123; pascalCase: <span class="literal">true</span> &#125;)&#125;</span>`</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`@vant-react-native/<span class="subst">$&#123;name&#125;</span>`</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;vant-react-native&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line">  [</span><br><span class="line">    <span class="string">&#x27;import&#x27;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">libraryName</span>: <span class="string">&#x27;@vant-react-native/icons&#x27;</span>,</span><br><span class="line">      <span class="attr">customName</span>: <span class="function">(<span class="params">name: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`@vant-react-native/icons/lib/<span class="subst">$&#123;camelCase(name, &#123; pascalCase: <span class="literal">true</span> &#125;)&#125;</span>`</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;@vant-react-native/icons&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>åœ¨é¡¹ç›®çš„ <code>babel.config.js</code> é…ç½®ä¸­æ·»åŠ  <code>plugins: [...require(&#39;babel-plugin-import-vant&#39;).default()]</code> å³å¯å®ç°æŒ‰éœ€åŠ è½½ã€‚</p><p>è¿˜æœ‰å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹å—ï¼Ÿæœºæ™ºçš„ä½ å¯èƒ½åˆå‘ç°æˆ‘åªæ˜¯é€šè¿‡å‡½æ•°å¯¼å‡ºäº†ä¸€ä¸ªé…ç½®è€Œå·²ï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„æ’ä»¶ï¼Œæ‰€ä»¥æœªæ¥æˆ‘ä¼šå®šåˆ¶ä¸€ä¸ª vant-react-native è‡ªå·±çš„æŒ‰éœ€åŠ è½½ babel æ’ä»¶ã€‚</p><blockquote><p><code>name.match(/^van-icon-/)</code> è¿™ä¸ªåˆ¤æ–­æ¡ä»¶æ˜¯å› ä¸º <code>@vant-react-native/icons</code> åŒ…é™¤äº†åŒ…å«ä¸€ä¸ªé»˜è®¤å¯¼å‡ºçš„ Icon ç»„ä»¶ï¼Œè¿˜å¯¼å‡ºäº†å¾ˆå¤šå•ä¸ªå›¾æ ‡ç»„ä»¶ï¼Œä¸ºäº†è¿›ä¸€æ­¥å‡å°æ‰“åŒ…ä½“ç§¯ï¼Œæˆ‘ä»¬å¯¹è¿™ä¸ªå­åŒ…ä¹Ÿè¿›è¡Œäº†æŒ‰éœ€åŠ è½½å¤„ç†ã€‚</p><p><strong>æˆ‘ä»¬å·²ç»çŸ¥é“æŒ‰éœ€åŠ è½½çš„åŸç†æ˜¯æ²¡æœ‰ä¸­é—´å•†èµšå·®ä»·ç›´æ¥å’Œå–å®¶è°ˆ</strong>ï¼Œæ‰€ä»¥åé¢æˆ‘ä»¬é‡è§ç±»ä¼¼çš„éœ€æ±‚é€šè¿‡è½¬æ¢è¿”å›å–å®¶åœ°å€å³å¯ã€‚ä¸éœ€è¦ç ´åæ€§åœ°æ”¹é¡¹ç›®ç»“æ„ã€‚</p></blockquote><h3 id="æˆæœå±•ç¤º"><a href="#æˆæœå±•ç¤º" class="headerlink" title="æˆæœå±•ç¤º"></a>æˆæœå±•ç¤º</h3><table><thead><tr><th>åˆå§‹åŒ…å¤§å°</th><th>æœªé…ç½®æŒ‰éœ€åŠ è½½ï¼ˆå¼•å…¥ Buttonï¼‰</th><th>æŒ‰éœ€åŠ è½½ï¼ˆå¼•å…¥ Buttonï¼‰</th><th>æŒ‰éœ€åŠ è½½ï¼ˆå¼•å…¥ Iconï¼‰</th><th>æŒ‰éœ€åŠ è½½ï¼ˆå¼•å…¥ VanIconAddï¼‰</th></tr></thead><tbody><tr><td>723KB</td><td>1.8M</td><td>725KB</td><td>1.8M</td><td>1.22M</td></tr></tbody></table><p>ä¹‹æ‰€ä»¥ Icon åŒ…ä¼šå¤§ï¼Œæ˜¯å› ä¸º react-native-svg è¿™ä¸ªåº“å¤§ï¼Œæ‰€ä»¥ä¸å»ºè®®ç›´æ¥ä½¿ç”¨ Icon ç»„ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨ VanIconAddã€VanIconEye è¿™ç§å•ç‹¬çš„å›¾æ ‡ç»„ä»¶ï¼Œå°‘äº† 593KB è¿˜æ˜¯æŒºé¦™çš„ã€‚</p><h2 id="ç»„ä»¶åº“æ–‡æ¡£"><a href="#ç»„ä»¶åº“æ–‡æ¡£" class="headerlink" title="ç»„ä»¶åº“æ–‡æ¡£"></a>ç»„ä»¶åº“æ–‡æ¡£</h2><p>ç»„ä»¶åº“æ–‡æ¡£æ¯”è¾ƒé‡è¦çš„æ˜¯æœ‰å¯ä»¥äº¤äº’çš„ Demo æ¼”ç¤ºï¼Œæˆ‘æ˜¯ Dumi çš„èµ„æ·±ç”¨æˆ·ï¼Œå€ŸåŠ© dumi-theme-mobile å’Œ <a href="https://github.com/youngjuning/umi-plugin-react-native">umi-plugin-react-native</a> æˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°æ»¡è¶³ React Native ç»„ä»¶åº“æ–‡æ¡£çš„æ­å»ºã€‚</p><h3 id="é›†æˆ-Dumi-åˆ°é¡¹ç›®ä¸­"><a href="#é›†æˆ-Dumi-åˆ°é¡¹ç›®ä¸­" class="headerlink" title="é›†æˆ Dumi åˆ°é¡¹ç›®ä¸­"></a>é›†æˆ Dumi åˆ°é¡¹ç›®ä¸­</h3><p><strong>å®‰è£…ä¾èµ–ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add dumi dumi-theme-mobile umi-plugin-react-native -D</span><br></pre></td></tr></table></figure><p><strong>é…ç½®æ–‡ä»¶ï¼š</strong></p><p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ  <code>.umirc.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig, <span class="title class_">IConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;dumi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;vant-react-native&#x27;</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;site&#x27;</span>,</span><br><span class="line">  <span class="attr">logo</span>: <span class="string">&#x27;https://img01.yzcdn.cn/vant/logo.png&#x27;</span>,</span><br><span class="line">  <span class="attr">favicon</span>: <span class="string">&#x27;https://img01.yzcdn.cn/vant/logo.png&#x27;</span>,</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">includes</span>: [<span class="string">&#x27;docs&#x27;</span>, <span class="string">&#x27;packages/button&#x27;</span>, <span class="string">&#x27;packages/icons&#x27;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// more config: https://d.umijs.org/config</span></span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">IConfig</span>);</span><br></pre></td></tr></table></figure><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒDumi æ˜¯æ”¯æŒ Lerna ä»“åº“çš„ï¼Œå®ƒé»˜è®¤ä¼šä»¥ <code>packages/[åŒ…å]/src</code> ä¸ºåŸºç¡€è·¯å¾„æœå¯»æ‰€æœ‰å­åŒ…çš„ Markdown æ–‡æ¡£å¹¶ç”Ÿæˆè·¯ç”±ã€‚é€šè¿‡ <code>resolve.includes</code> å¯ä»¥é…ç½® dumi å—…æ¢çš„æ–‡æ¡£ç›®å½•ï¼Œdumi ä¼šå°è¯•åœ¨é…ç½®çš„ç›®å½•ä¸­é€’å½’å¯»æ‰¾ markdown æ–‡ä»¶ã€‚</p><p><strong>æ·»åŠ  NPM è„šæœ¬ï¼š</strong></p><blockquote><p>æ³¨æ„ğŸ“¢ï¼šç”±äºå®é™…ä¾èµ–çš„æ˜¯ packages ä¸‹çš„åŒ…ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆç¼–è¯‘æ‰€æœ‰çš„åŒ…ï¼Œå¦åˆ™éƒ¨ç½²çš„æ—¶å€™ä¼šæŠ¥ <code>This dependency was not found:</code> çš„é”™è¯¯ã€‚</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start:dumi&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dumi dev&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build:dumi&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lerna run build &amp;&amp; dumi build&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>å¿½ç•¥æ–‡ä»¶ï¼ˆ.gitignoreï¼‰ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># umi</span><br><span class="line">.umi</span><br><span class="line">.umi-production</span><br><span class="line">.env.local</span><br><span class="line">dist/</span><br></pre></td></tr></table></figure><h3 id="éƒ¨ç½²åˆ°-GitHub-Pages"><a href="#éƒ¨ç½²åˆ°-GitHub-Pages" class="headerlink" title="éƒ¨ç½²åˆ° GitHub Pages"></a>éƒ¨ç½²åˆ° GitHub Pages</h3><p>åœ¨æ ¹ç›®å½•æ–°å»º <code>.github/workflows/gh-pages</code>ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">github</span> <span class="string">pages</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span> <span class="comment"># default branch</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-18.04</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">install</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">build:dumi</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">publish_dir:</span> <span class="string">./dist</span></span><br></pre></td></tr></table></figure><h3 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h3><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥è®¿é—® <a href="https://youngjuning.js.org/vant-react-native/">https://youngjuning.js.org/vant-react-native/</a> æŸ¥çœ‹æ•ˆæœäº†ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9faf0889b6d64238922bb02c51cf02ff~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a11e9ce535c54f8bb038599533f0ef9a~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8bed86245d8f485894b0c5e3d9767e9c~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h3 id="é…ç½®ä¼˜åŒ–"><a href="#é…ç½®ä¼˜åŒ–" class="headerlink" title="é…ç½®ä¼˜åŒ–"></a>é…ç½®ä¼˜åŒ–</h3><p>ç°åœ¨åŸºäº dumi çš„æ–‡æ¡£ç«™ç‚¹åªæ˜¯åˆå§‹åŒ–ï¼Œå¾ˆå¤šé…ç½®ï¼ˆ.umirc.tsï¼‰å¯ä»¥ä¼˜åŒ–ï¼Œæ¯”å¦‚ï¼š</p><ol><li>åŸºäº jsdeliver é…ç½® CDN åŠ é€Ÿ</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isProd = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span>;</span><br><span class="line">...</span><br><span class="line"><span class="attr">publicPath</span>: isProd ? <span class="string">&#x27;https://cdn.jsdelivr.net/gh/youngjuning/vant-react-native@gh-pages/&#x27;</span>: <span class="string">&#x27;/&#x27;</span>,</span><br></pre></td></tr></table></figure><ol start="2"><li>å¢é‡å‘å¸ƒå’Œé¿å…æµè§ˆå™¨åŠ è½½ç¼“å­˜</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">hash</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li><a href="https://www.umeng.com/web">å‹ç›Ÿç½‘ç«™ç»Ÿè®¡</a></li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">scripts</span>: [<span class="string">&#x27;https://s9.cnzz.com/z_stat.php?id=1280093214&amp;web_id=1280093214&#x27;</span>],</span><br><span class="line">  <span class="attr">styles</span>: [<span class="string">&#x27;a[title=ç«™é•¿ç»Ÿè®¡] &#123; display: none; &#125;&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>é…ç½® <code>exportStatic: &#123;&#125;</code> å°†æ‰€æœ‰è·¯ç”±è¾“å‡ºä¸º HTML ç›®å½•ç»“æ„ï¼Œä»¥å…åˆ·æ–°é¡µé¢æ—¶ 404ã€‚</li></ol><h3 id="Pull-Request-é¢„å‘é¢„è§ˆ"><a href="#Pull-Request-é¢„å‘é¢„è§ˆ" class="headerlink" title="Pull Request é¢„å‘é¢„è§ˆ"></a>Pull Request é¢„å‘é¢„è§ˆ</h3><p>è€ƒè™‘åˆ°åæœŸç¤¾åŒºä¼šè´¡çŒ®ä»£ç å’Œæ–‡æ¡£ã€‚åœ¨ pr åˆè¿›ä¸»åˆ†æ”¯ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é¢„è§ˆæ–‡æ¡£æˆ–ç»„ä»¶ã€‚æ»¡è¶³è¿™ä¸€éœ€æ±‚çš„æ˜¯ä¸€ä¸ªå« surge.sh çš„é™æ€æ‰˜ç®¡æœåŠ¡ï¼Œsurge æ”¯æŒåœ¨å‘½ä»¤è¡Œé€šè¿‡ç®€å•çš„å‘½ä»¤å…è´¹å‘å¸ƒ HTMLã€CSS å’Œ JS æ–‡ä»¶åˆ° webã€‚</p><h4 id="ç”³è¯·-Surge-Token"><a href="#ç”³è¯·-Surge-Token" class="headerlink" title="ç”³è¯· Surge Token"></a>ç”³è¯· Surge Token</h4><p><strong>å®‰è£… surge cliï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --global surge</span><br></pre></td></tr></table></figure><p><strong>æ³¨å†Œ surge è´¦å·ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">suerge login</span><br></pre></td></tr></table></figure><p><strong>è·å– tokenï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">suerge token</span><br></pre></td></tr></table></figure><h4 id="é…ç½®-CI"><a href="#é…ç½®-CI" class="headerlink" title="é…ç½® CI"></a>é…ç½® CI</h4><p>ç”±äº GitHub çš„å®‰å…¨é—®é¢˜ï¼Œsurge-preview Action æ’ä»¶æ— æ³•ä½¿ç”¨ï¼Œæˆ‘ä»¬å‚è€ƒ dumi å®˜æ–¹çš„é…ç½®è‡ªå®šä¹‰äº† CIï¼Œé¦–å…ˆæˆ‘ä»¬æ‹·è´ä¸‹å›¾ä¸­çš„ä¸‰ä¸ªæ–‡ä»¶åˆ°é¡¹ç›®ä¸­ã€‚</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9e3d3e61ac1c4019ac393b2d1b2c5719~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>ç„¶åä¿®æ”¹ <code>preview-build.yml</code> ä¸­çš„ <code>build step</code>ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- NODE_OPTIONS=&#x27;--max-old-space-size=4096&#x27; yarn build</span></span><br><span class="line"><span class="addition">+ NODE_OPTIONS=&#x27;--max-old-space-size=4096&#x27; PREVIEW_PR=true yarn build:dumi</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ ç¯å¢ƒå˜é‡ <code>PREVIEW_PR=true</code> æ˜¯ä¸ºäº†è®© dumi æ‰“åŒ…æ—¶è¯†åˆ«å‡ºä¸æ˜¯ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…ï¼Œ<code>.umirc.ts</code> éœ€è¦ç›¸åº”ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isProd =</span><br><span class="line">  process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> &amp;&amp; process.<span class="property">env</span>.<span class="property">PREVIEW_PR</span> !== <span class="string">&quot;true&quot;</span>;</span><br><span class="line">...</span><br><span class="line"><span class="attr">publicPath</span>: isProd ? <span class="string">&#x27;https://cdn.jsdelivr.net/gh/youngjuning/vant-react-native@gh-pages/&#x27;</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>å†ç„¶åï¼Œä¿®æ”¹ <code>preview-deploy.yml</code> æ–‡ä»¶ä¸­çš„éƒ¨ç½²åŸŸå <code>dumi-preview</code> ä¸º <code>vant-react-native-preview</code>ã€‚</p><p>æœ€åæˆ‘ä»¬æŠŠå‰é¢è·å–çš„ Surge Token æ·»åŠ åˆ°ä»“åº“çš„ Secrets å³å¯ã€‚</p><h4 id="æˆæœå±•ç¤º-1"><a href="#æˆæœå±•ç¤º-1" class="headerlink" title="æˆæœå±•ç¤º"></a>æˆæœå±•ç¤º</h4><p><strong>æ­£åœ¨éƒ¨ç½² PR é¢„è§ˆçŠ¶æ€ï¼š</strong></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/193ac9e16cca408383ca7ae2ec503613~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><strong>éƒ¨ç½²æˆåŠŸçŠ¶æ€ï¼š</strong></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1659de97aafd4f87a93993c35ef93195~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>è®¿é—® <a href="https://vant-react-native-preview-pr-1.surge.sh/">https://vant-react-native-preview-pr-1.surge.sh/</a> å³å¯éªŒè¯æ–‡æ¡£çš„æ­£ç¡®æ€§âœ…ã€‚</p><h2 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h2><p>æˆ‘åœ¨ <a href="https://juejin.cn/post/6937983077209604127">ä½¿ç”¨ Jest å’Œ Enzyme è¿›è¡Œ React Native å•å…ƒæµ‹è¯•|æŠ€æœ¯ç‚¹è¯„</a> ä¸€æ–‡ä¸­æ›¾æäº¤å•å…ƒæµ‹è¯•å’Œæ–‡æ¡£ä¸€æ ·ï¼Œæ˜¯ä¿éšœç¨‹åºæœ€å°å•å…ƒè´¨é‡çš„é‡è¦ä¸€ç¯ã€‚è¯šç„¶ä¸€ä¸ªæˆç†Ÿçš„ç»„ä»¶åº“æ˜¯å¿…ç„¶æœ‰å•å…ƒæµ‹è¯•çš„èº«å½±ã€‚æœ¬ç« å°±ä¸å±•å¼€è®²å•å…ƒæµ‹è¯•äº†ï¼Œä¸»è¦è®² vant-react-native æ˜¯å¦‚ä½•é…ç½®å•å…ƒæµ‹è¯•çš„ã€‚</p><h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><p>jestã€babel-jestã€@types&#x2F;jest è¿™äº›ä¾èµ–éƒ½å·²ç»å®‰è£…äº†ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…çš„æ˜¯ enzyme è¿™ä¸ªåŸºäº jest çš„å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add enzyme jest-enzyme enzyme-adapter-react-16 enzyme-to-json @types/enzyme react-native-mock-render -DW</span><br></pre></td></tr></table></figure><blockquote><p>Enzyme æ˜¯ç”¨äº React çš„ JavaScript æµ‹è¯•å®ç”¨ç¨‹åºï¼Œå¯ä»¥æ›´è½»æ¾åœ°æµ‹è¯• React ç»„ä»¶çš„è¾“å‡ºã€‚æ‚¨è¿˜å¯ä»¥æ ¹æ®ç»™å®šçš„è¾“å‡ºè¿›è¡Œæ“ä½œï¼Œéå†å¹¶ä»¥æŸç§æ–¹å¼æ¨¡æ‹Ÿè¿è¡Œæ—¶ã€‚</p></blockquote><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><strong>jest.config.jsï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">preset</span>: <span class="string">&#x27;react-native&#x27;</span>,</span><br><span class="line">  <span class="attr">verbose</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">collectCoverage</span>: <span class="literal">true</span>, <span class="comment">// ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š</span></span><br><span class="line">  <span class="attr">moduleNameMapper</span>: &#123;</span><br><span class="line">    <span class="comment">// for https://github.com/facebook/jest/issues/919</span></span><br><span class="line">    <span class="string">&#x27;^image![a-zA-Z0-9$_-]+$&#x27;</span>: <span class="string">&#x27;GlobalImageStub&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;^[@./a-zA-Z0-9$_-]+\\.(png|gif)$&#x27;</span>: <span class="string">&#x27;RelativeImageStub&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">setupFilesAfterEnv</span>: [<span class="string">&#x27;&lt;rootDir&gt;/jest.setup.js&#x27;</span>], <span class="comment">// ä½¿ç”¨ Jest è¿è¡Œå®‰è£…æ–‡ä»¶ä»¥é…ç½® Enzyme å’Œé€‚é…å™¨ï¼ˆå¦‚ä¸‹æ–‡jest.setup.jsä¸­æ‰€ç¤ºï¼‰ï¼Œä¹‹å‰æ˜¯setupTestFrameworkScriptFileï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨setupFiles</span></span><br><span class="line">  <span class="attr">snapshotSerializers</span>: [<span class="string">&#x27;enzyme-to-json/serializer&#x27;</span>], <span class="comment">// æ¨èä½¿ç”¨åºåˆ—åŒ–ç¨‹åºä½¿ç”¨ enzyme-to-jsonï¼Œå®ƒçš„å®‰è£…å’Œä½¿ç”¨éå¸¸ç®€å•ï¼Œå¹¶å…è®¸æ‚¨ç¼–å†™ç®€æ´çš„å¿«ç…§æµ‹è¯•ã€‚</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>jest.setup.jsï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Enzyme</span> <span class="keyword">from</span> <span class="string">&#x27;enzyme&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Adapter</span> <span class="keyword">from</span> <span class="string">&#x27;enzyme-adapter-react-16&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Enzyme</span>.<span class="title function_">configure</span>(&#123; <span class="attr">adapter</span>: <span class="keyword">new</span> <span class="title class_">Adapter</span>() &#125;);</span><br></pre></td></tr></table></figure><p><strong>ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// packages/button/__test__/index.tsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; shallow &#125; <span class="keyword">from</span> <span class="string">&#x27;enzyme&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Button</span> <span class="keyword">from</span> <span class="string">&#x27;../src/index&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setup</span>(<span class="params">props = &#123;&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> wrapper = <span class="title function_">shallow</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> /&gt;</span></span>);</span><br><span class="line">  <span class="keyword">const</span> instance = wrapper.<span class="title function_">instance</span>();</span><br><span class="line">  <span class="keyword">return</span> &#123; wrapper, instance &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;Button Component&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&#x27;renders correctly&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; wrapper &#125; = <span class="title function_">setup</span>();</span><br><span class="line">    <span class="title function_">expect</span>(wrapper).<span class="title function_">toMatchSnapshot</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>jest</code> å‘½ä»¤åå¯ä»¥æŸ¥çœ‹è¦†ç›–ç‡å¦‚ä¸‹ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/358737fa32f549f4a9b06a9bcf8903d4~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 id="å†™ç»™å‹‡å£«"><a href="#å†™ç»™å‹‡å£«" class="headerlink" title="å†™ç»™å‹‡å£«"></a>å†™ç»™å‹‡å£«</h2><p>èƒ½å†™é•¿æ–‡çš„ä¸ç®—å‹‡å£«ï¼Œèƒ½åšæŒçœ‹åˆ°è¿™é‡Œçš„æ‰æ˜¯å‹‡å£«ã€‚æ´›ç«¹åœ¨æ­¤æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚ç„¶è€Œç»„ä»¶åº“å·¥ç¨‹åŒ–è¿™åªæ˜¯ä¸€ä¸ªèµ·ç‚¹ï¼Œå¦‚æœæœ¬æ–‡åå“å¥½ï¼Œç»„ä»¶åº“å…·ä½“ç»„ä»¶çš„è®¾è®¡å®ç°ã€å®Œæ•´çš„ React Native å•å…ƒæµ‹è¯•æ•™ç¨‹ç­‰ç­‰æ´›ç«¹ä¼šåœ¨åç»­çš„æ–‡ç« ä¸­å±•å¼€è®²ã€‚</p><h2 id="æ¨èçš„-UI-åº“"><a href="#æ¨èçš„-UI-åº“" class="headerlink" title="æ¨èçš„ UI åº“"></a>æ¨èçš„ UI åº“</h2><p>å½“ç„¶äº†ï¼Œvant-react-native å¹¶ä¸æ˜¯ä½ å”¯ä¸€çš„é€‰æ‹©ï¼Œä¸‹é¢çš„å‡ ä¸ª UI åº“éƒ½æ˜¯å¾ˆä¼˜ç§€çš„é¡¹ç›®ã€‚åœ¨å®ç° vant-react-native æ—¶æˆ‘ä¹Ÿå¤šå°‘å€Ÿé‰´äº†å‰äººä¼˜ç§€çš„è®¾è®¡ã€‚</p><ul><li><a href="https://github.com/ant-design/ant-design-mobile-rn">antd-mobile-rn</a></li><li><a href="https://github.com/react-native-elements/react-native-elements">react-native-elements</a></li><li><a href="https://github.com/akveo/react-native-ui-kitten">react-native-ui-kitten</a></li><li><a href="https://github.com/wix/react-native-ui-lib">react-native-ui-lib</a></li><li><a href="https://zarm.design/">Zarm</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> æ˜é‡‘ </tag>
            
            <tag> å‰ç«¯æ¶æ„ </tag>
            
            <tag> å‰ç«¯ç»„ä»¶åŒ– </tag>
            
            <tag> å‰ç«¯å·¥ç¨‹åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç‹ç‹¸é’±åŒ…æ•™ç¨‹</title>
      <link href="/77349c019445/"/>
      <url>/77349c019445/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202111232204640.png"></p><h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202111232202734.png"></p><h2 id="åˆ›å»ºé’±åŒ…"><a href="#åˆ›å»ºé’±åŒ…" class="headerlink" title="åˆ›å»ºé’±åŒ…"></a>åˆ›å»ºé’±åŒ…</h2><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202111232204544.png"></p><h2 id="åŒæ„"><a href="#åŒæ„" class="headerlink" title="åŒæ„"></a>åŒæ„</h2><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202111232205121.png"></p><h2 id="åˆ›å»ºå¯†ç "><a href="#åˆ›å»ºå¯†ç " class="headerlink" title="åˆ›å»ºå¯†ç "></a>åˆ›å»ºå¯†ç </h2><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202111232206560.png"></p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202111232206713.png"></p><ul><li><a href="https://metamask.io/">metamask</a></li><li><a href="https://play.cryptomines.app/">cryptomines</a></li></ul><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ul><li><a href="https://academy.binance.com/zh/articles/an-introduction-to-binance-smart-chain-bsc">BSC</a>ï¼šå¸å®‰æ™ºèƒ½é“¾ (Binance Smart Chainï¼Œç®€ç§° BSC) æ˜¯ä¸€æ¡ä»¥å¤ªåŠè™šæ‹Ÿæœºå…¼å®¹ï¼Œä¸å¸å®‰é“¾å¹¶è¡Œçš„åŒºå—é“¾ï¼Œæ˜¯åŠ å¯†èµ„äº§è¡Œä¸šé¡¶å°–é¡¹ç›®çš„æµ‹è¯•å’Œå‰æ²¿æ¢ç´¢ã€‚</li><li><a href="https://cryptomines.app/">CryptoMines</a>ï¼šCryptoMines æ˜¯åœ¨ BSCï¼ˆBinance Smart Chainï¼Œå¸å®‰æ™ºèƒ½é“¾ï¼‰ å¹³å°ä¸Šå¼€å‘çš„ Play to Earn NFT æ¸¸æˆã€‚åœ¨æ­¤å¤„è·å– $ETERNAL ä»£å¸ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> åŒºå—é“¾ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BSC </tag>
            
            <tag> åŒºå—é“¾ </tag>
            
            <tag> é’±åŒ… </tag>
            
            <tag> å°ç‹ç‹¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ git-filter-branch åˆ é™¤å•ä¸ªæ–‡ä»¶åŠå…¶ç›¸å…³çš„ commit ä¿¡æ¯</title>
      <link href="/6ead325700ca/"/>
      <url>/6ead325700ca/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œå…¬å¸å°±åƒæ˜¯å·¥åœ°ï¼Œä»£ç å°±æ˜¯æˆ‘ä»¬çš„é’¢ç­‹æ°´æ³¥ã€‚é‚£åœ¨å·¥åœ°ä»€ä¹ˆæœ€é‡è¦å‘¢ï¼Ÿæ²¡é”™å°±æ˜¯å®‰å…¨ç”Ÿäº§ã€‚æœ¬æ–‡è¦è®¨è®ºçš„æ˜¯å¼€å‘ä¸­çš„åˆè§„å®‰å…¨ã€‚GitHub ä½œä¸ºå½“ä»£å¼€æºç¤¾åŒºçš„åŸºç¡€è®¾æ–½ï¼Œä¸ä»…æ˜¯ä¸ªäººå¼€å‘è€…åœ¨ä¸Šé¢ç»´æŠ¤é¡¹ç›®ï¼Œå¾ˆå¤šä¼ä¸šä¹Ÿä¼šå°†å†…éƒ¨ä¼˜ç§€é¡¹ç›®é€‰æ‹©å¼€æºåé¦ˆç¤¾åŒºå’Œæ‰©å¤§ç¤¾åŒºå½±å“åŠ›ã€‚ç„¶åï¼Œå°±å‡ºç°äº†å…¬å¸æ‹–æ¬ å·¥èµ„ï¼Œå‘˜å·¥æ€’å°†å†…éƒ¨ä»£ç å¼€æºã€å‘˜å·¥å°†æ•æ„Ÿä¿¡æ¯ä¸Šä¼ ã€‚æœ‰äº›ä¿¡æ¯è™½ç„¶çœ‹èµ·æ¥ä¸æ€ä¹ˆé‡è¦ï¼Œä½†æ˜¯å¦‚æœè¢«ä¸æ€€å¥½æ„çš„é»‘å®¢ç›¯ä¸Šï¼Œå°±æ²¡æœ‰ä¸€ç¯‡é›ªèŠ±æ˜¯å¹²å‡€çš„ã€‚</p><p>é‚£å¦‚æœå®‰å…¨éšæ‚£å·²ç»å­˜åœ¨ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•è¡¥æ•‘å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä½¿ç”¨ git-filter èƒ½åŠ›å¯¹ git è®°å½•è¿›è¡Œåˆå¹¶ã€åˆ é™¤ç­‰æ“ä½œã€‚git-filter-repo æ­£æ˜¯è¿™ç±»å·¥å…·çš„é›†å¤§æˆè€…ã€‚ä¸‹é¢å°±è®©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ä¸‹è¿™æ¬¾å¼ºå¤§çš„ git log æ“ä½œå·¥å…·å§ã€‚</p><h2 id="git-filter-branch"><a href="#git-filter-branch" class="headerlink" title="git-filter-branch"></a>git-filter-branch</h2><p>git è‡ªå¸¦çš„æœ‰ä¸€ä¸ª git-filter-branch å·¥å…·ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨æ˜¯ä¸ºäº†åˆ é™¤å•ä¸ªæ–‡ä»¶åŠå…¶ç›¸å…³çš„ commit è®°å½•ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git filter-branch --force --index-filter <span class="string">&#x27;git rm --cached --ignore-unmatch CHANGELOG.md&#x27;</span> --prune-empty --tag-name-filter <span class="built_in">cat</span> -- --all</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåï¼Œä¼šæ”¶åˆ°å¦‚ä¸‹çš„è­¦å‘Šï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">WARNING: git-filter-branch has a glut of gotchas generating mangled <span class="built_in">history</span></span><br><span class="line">         rewrites.  Hit Ctrl-C before proceeding to abort, <span class="keyword">then</span> use an</span><br><span class="line">         alternative filtering tool such as <span class="string">&#x27;git filter-repo&#x27;</span></span><br><span class="line">         (https://github.com/newren/git-filter-repo/) instead.  See the</span><br><span class="line">         filter-branch manual page <span class="keyword">for</span> more details; to squelch this warning,</span><br><span class="line">         <span class="built_in">set</span> FILTER_BRANCH_SQUELCH_WARNING=1.</span><br></pre></td></tr></table></figure><p>ç¿»è¯‘è¿‡æ¥å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è­¦å‘Šï¼šç¿»è¯‘è¿‡æ¥å¦‚ä¸‹ï¼šgit-filter-branchæœ‰å¤§é‡çš„é—®é¢˜ï¼Œä¼šäº§ç”Ÿé”™è¯¯çš„å†å²è®°å½•é‡å†™ã€‚</span><br><span class="line">        åœ¨ç»§ç»­è¿›è¡Œä¹‹å‰æŒ‰ Ctrl-C ä¸­æ­¢ï¼Œç„¶åç”¨ä¸€ä¸ªæ›¿ä»£çš„è¿‡æ»¤å·¥å…·ï¼Œ</span><br><span class="line">        å¦‚ https://github.com/newren/git-filter-repo/ æ¥ä»£æ›¿ã€‚</span><br><span class="line">        å‚è§ filter-branch æ‰‹å†Œé¡µäº†è§£æ›´å¤šç»†èŠ‚ã€‚</span><br><span class="line">        è¦æ¶ˆé™¤è¿™ä¸ªè­¦å‘Šã€‚è¯·è®¾ç½® FILTER_BRANCH_SQUELCH_WARNING=1ã€‚</span><br></pre></td></tr></table></figure><ul><li><a href="https://github.com/newren/git-filter-repo">git-filter-repo</a></li><li><a href="https://blog.csdn.net/q258523454/article/details/83899911">Github: å•ç‹¬åˆ é™¤æŸä¸ªæ–‡ä»¶çš„æ‰€æœ‰å†å²è®°å½•</a></li><li><a href="https://serverfault.com/questions/1018302/warning-git-filter-branch-has-a-glut-of-gotchas-generating-mangled-history-rewr">WARNING: git-filter-branch has a glut of gotchas generating mangled history rewrites</a></li><li><a href="https://nyakku.moe/posts/2020/06/12/use-git-filter-repo-clean-git-history.html">ä½¿ç”¨ git-filter-repo æ¸…ç† git å†å²è®°å½•</a></li><li><a href="https://www.vicw.com/groups/code_monkey/topics/362">ä½¿ç”¨git filter-repoæ¸…ç†git commitå†å²ä¸­çš„å¤§æ–‡ä»¶</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2020 å¹´ä¸­æ€»ç»“</title>
      <link href="/acc76bacbf31/"/>
      <url>/acc76bacbf31/</url>
      
        <content type="html"><![CDATA[<h2 id="æˆ‘çš„ç°çŠ¶"><a href="#æˆ‘çš„ç°çŠ¶" class="headerlink" title="æˆ‘çš„ç°çŠ¶"></a>æˆ‘çš„ç°çŠ¶</h2><ol><li>ä¸“æ³¨äºï¼šReactã€React Nativeã€Node</li><li>ç›®æ ‡ï¼šæˆä¸ºå…¨æ ˆå·¥ç¨‹å¸ˆï¼ˆéå…¨å¹²å·¥ç¨‹å¸ˆï¼‰</li></ol><h2 id="ä¸ŠåŠå¹´æ€»ç»“"><a href="#ä¸ŠåŠå¹´æ€»ç»“" class="headerlink" title="ä¸ŠåŠå¹´æ€»ç»“"></a>ä¸ŠåŠå¹´æ€»ç»“</h2><p>2020 çš„ä¸ŠåŠå¹´æ³¨å®šæ˜¯ä¸å¹³å‡¡çš„ä¸€å¹´ï¼Œä¸ç®¡ä»€ä¹ˆè°ˆè¯åŸºæœ¬éƒ½å¯ä»¥ä»ç–«æƒ…èŠèµ·ï¼š</p><ul><li>æœ‹å‹Aï¼šä½ ä»¬å…¬å¸å¤å·¥äº†å—ï¼Ÿè¿˜åœ¨å®¶åŠå…¬å—ï¼Ÿ</li><li>æœ‹å‹Bï¼šä½ ä»¬å·¥èµ„åŠæ—¶å‘äº†å—ï¼Ÿå…¬å¸ä¸ä¼šå€’é—­äº†å§ï¼Ÿ</li><li>æŸäº²æˆšï¼šä»Šå¹´è¿™ç–«æƒ…å¼„å¾—ï¼ŒåŠä¸ªå©šç¤¼éƒ½æ²¡äººå»ï¼Œå¥½å¤šéƒ½æ¨äº†ã€‚</li><li>é¢è¯•å®˜ï¼šä½ ä¸ºä»€ä¹ˆä»ä¹‹å‰å…¬å¸ç¦»èŒï¼Ÿ<ul><li>æˆ‘ï¼šæ•™è‚²è¡Œä¸šï¼Œå› ä¸ºç–«æƒ…æ‹–æ¬ äº†ä¿©æœˆå·¥èµ„</li></ul></li></ul><p>æ€»çš„æ¥è¯´ï¼Œç–«æƒ…å¯¹æˆ‘çš„ç›´æ¥å½±å“è¿˜æŒºå¤§ã€‚å·¥ä½œä¸Šæ¥è¯´ï¼Œå¦‚æœä¸æ˜¯è¢«æ‹–æ¬ å·¥èµ„ï¼Œå¤§æ¦‚ç‡ä¸ä¼šè¿™ä¹ˆå¿«ç¦»èŒï¼›ç”Ÿæ´»ä¸Šæ¥è¯´ï¼Œè®¢å©šä»2æœˆä»½æ¨è¿Ÿåˆ°äº†4æœˆåº•æ‰åŠâ€¦</p><h3 id="å·¥ä½œ"><a href="#å·¥ä½œ" class="headerlink" title="å·¥ä½œ"></a>å·¥ä½œ</h3><p>ä¸Šå®¶å…¬å¸æ˜¯ä» 2018å¹´3æœˆå¹²åˆ°2020å¹´5æœˆçš„ï¼Œæ•´æ•´ä¸¤å¹´ï¼Œå†™è¿‡å°ç¨‹åºï¼Œè´Ÿè´£è¿‡å…¬ä¼—å·ã€å‚ä¸è¿‡åŸºäºelement å’Œ vue çš„åå°ç¨‹åºå¼€å‘ã€åŸºäºReact Nativeå¼€å‘è¿‡ä¸šåŠ¡ï¼Œæè¿‡React Native é¡¹ç›®çš„æ¶æ„ã€‚ç¦»èŒæ—¶ï¼ŒèŒä½åœç•™åœ¨äº†ç§»åŠ¨ç«¯å¼€å‘è´Ÿè´£äººï¼Œå®ç°äº†æœˆè–ªè¿‡ä¸‡çš„å°ç›®æ ‡ã€‚</p><p>ç¦»èŒåŸå› ä¸€æ–¹é¢æ˜¯å› ä¸ºè–ªèµ„æ‹–æ¬ ï¼Œå¦ä¸€æ–¹é¢æ˜¯åœ¨å…¬å¸ä¹Ÿæ‘¸åˆ°äº†å¤©èŠ±æ¿ã€‚ç¬¬äºŒæ–¹é¢æ˜¯æœ€è®©æˆ‘éš¾å—çš„ï¼Œè¿™å¤©èŠ±æ¿ç¦»æˆ‘çš„å¿ƒç†é¢„æœŸå¤ªè¿œã€‚ä¹‹å‰ä¹‹æ‰€ä»¥ä¸€ç›´æ‹–ç€æ²¡è·³æ§½æ˜¯ä¿¡äº†leaderçš„æ ¸å¿ƒäººå‘˜ä»¥åä¸ä¼šäºå¾…ã€‚é•¿æœŸçš„å¢ƒå†µä¸å¿ƒç†é¢„æœŸä¸ç¬¦ä¸ç®¡æ˜¯å¯¹å…¬å¸è¿˜æ˜¯å¯¹è‡ªå·±éƒ½æ˜¯ä¸è´Ÿè´£ä»»çš„ï¼Œå†åŠ ä¸Šç–«æƒ…æ‹–æ¬ è–ªèµ„ï¼Œç›´æ¥é€ æˆäº†æˆ¿è´·çš„è¿˜æ¬¾å›°éš¾ï¼ˆå¹´å‰åˆšå¼€å§‹è‡ªå·±æ‰¿æ‹…å…¨éƒ¨è´·æ¬¾ï¼‰ï¼Œæˆ‘æœ€ç»ˆä¸‹å®šå†³å¿ƒç¦»å¼€å·¥ä½œäº†ä¸¤å¹´çš„å…¬å¸ã€‚</p><p>å†æ¥è¯´ä¸€ä¸‹æ–°å·¥ä½œå§ï¼Œæœ¬äººæ‰¾å·¥ä½œçš„baseæ˜¯éƒ‘å·ï¼Œä¸€ä¸ªäº’è”ç½‘ä¸‰çº¿åŸå¸‚ã€‚åˆšå¼€å§‹ä¸»åŠ¨æ‰“æ‹›å‘¼çš„å’Œæµ·æŠ•å›åº”çš„éƒ½å¾ˆå¤šï¼Œ9æˆéƒ½æ˜¯ Vue å¼€å‘ï¼Œç”šè‡³éœ€è¦ç»´æŠ¤ jquery é¡¹ç›®ã€‚æˆ‘å¿ƒæƒ³è¿˜æ˜¯ä¸»åŠ¨æŠ•æŠ• React Native å²—ä½å§ï¼Œç°å®å†æ¬¡æ‰“äº†æˆ‘çš„è„¸ï¼Œéƒ‘å·è¿™è¾¹ RN å²—ä½ä¸¤ä¸ªæ‰‹æ•°çš„è¿‡æ¥ï¼Œå¹¶ä¸”èŒƒå›´éƒ½æ˜¯ 8-10Kï¼Œç”šè‡³ 4-8Kã€‚æŠ±ç€å¿«è¦æ”¾å¼ƒçš„å¿ƒæ€ï¼Œå†æ¬¡ç¼©å°èŒƒå›´æŠ•é€’äº†å‡ å®¶ React æŠ€æœ¯æ ˆçš„å…¬å¸ï¼Œæœ€ç»ˆå®ç°äº†è¯•ç”¨æœŸå·¥èµ„é«˜äºä¸Šå®¶çš„ç›®æ ‡ã€‚</p><h3 id="ç”Ÿæ´»"><a href="#ç”Ÿæ´»" class="headerlink" title="ç”Ÿæ´»"></a>ç”Ÿæ´»</h3><p>åœ¨ 4æœˆåˆä¸å°å¥³å‹å®šäº²å•¦ï¼Œå½“æ—¶çš„æ²¸ç‚¹ä¹Ÿå¾—åˆ°äº†æ˜å‹çš„ç¥ç¦ï¼Œè¯æ˜äº†æ˜é‡‘æ˜¯ä¸€ä¸ªæœ‰çˆ±çš„æœ‰æ¸©åº¦çš„æŠ€æœ¯ç¤¾åŒºã€‚</p><blockquote><p> å¤šå›¾é¢„è­¦ï¼ï¼ï¼ï¼ï¼ï¼</p></blockquote><p><img src="https://i.loli.net/2020/07/17/bSTtBd25R8DQgxc.jpg"></p><p><img src="https://i.loli.net/2020/07/17/KTA5E8pIHlCcmYt.jpg"></p><p><img src="https://i.loli.net/2020/07/17/VJE1z9hnwGLWy7S.jpg"></p><h3 id="å­¦ä¹ "><a href="#å­¦ä¹ " class="headerlink" title="å­¦ä¹ "></a>å­¦ä¹ </h3><ol><li><p>çœ‹å®Œäº†ä¸€ä¸ªå…³äº Linux çš„è§†é¢‘æ•™ç¨‹ï¼Œå¹¶å†™ä¸‹äº†<a href="https://juejin.im/post/5e81e2db518825737b4ad911">å†™ç»™å‰ç«¯å·¥ç¨‹å¸ˆçš„Linuxå®æˆ˜æ•™ç¨‹ã€æŒç»­æ›´æ–°ã€‘</a>ã€‚</p></li><li><p>çœ‹å®Œäº†ã€ŠDockerä»å…¥é—¨åˆ°å®è·µã€‹ï¼Œå¹¶å†™ä¸‹<a href="https://juejin.im/post/5e839f2851882573ab44f1b4">ä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆçš„Dockerå­¦ä¹ ç¬”è®°ã€æŒç»­æ›´æ–°ã€‘</a>ï¼Œæ„Ÿè°¢æ˜é‡‘ç¼–å†™çš„æ¨èï¼Œè·å¾—äº†ä¸å°‘æµé‡æ‰¶æŒã€‚</p></li><li><p>å·¥ä½œéœ€è¦ï¼Œæ€»ç»“äº†React Native å¼€å‘ç»éªŒå¹¶è¾“å‡ºäº†<a href="https://juejin.im/post/5e535e0df265da576b566397">React Native é¡¹ç›®æ¶æ„é¢é¢è§‚ã€æŒç»­æ›´æ–°ã€‘</a>ã€<a href="https://juejin.im/post/5e50f3ace51d4526ef5f8d56">react-navigation 5.x æœ€ä½³å®è·µ</a> ç­‰å¤šç¯‡ç›¸å…³åšæ–‡ï¼Œè¿™å‡ ç¯‡ä¹Ÿæˆä¸ºäº†å‡ åç¯‡æ–‡ç« ä¸­é˜…è¯»é‡å’Œç‚¹èµæœ€å¤šçš„ã€‚æœç„¶æˆ‘è¿˜æ˜¯ä¸ªåªèƒ½é å®åŠ›çš„è“å­©å­ã€‚è¿™ä¸ªç³»åˆ—è¿˜æœ‰æ›´å¤šçš„å­˜è´§æ²¡æœ‰æ”¾å‡ºæ¥ã€‚å¾…æˆ‘æ–°å·¥ä½œè½¬æ­£ç»§ç»­è¾“å‡ºã€‚</p></li><li><p>æ–°å…¬å¸å…¥èŒæœ‰ä¸¤ä¸ªæœˆäº†ï¼Œç‹¬ç«‹è´Ÿè´£äº†ä¸¤ä¸ªä¸å¤§çš„ä¸­å°é¡¹ç›®ï¼ŒæŠ€æœ¯æ ˆæ˜¯åŸºäº umijs çš„ï¼Œè€Œ umijs åŸºäº dvaã€antdã€react-routerï¼Œè€Œ dva åˆåŸºäº reduxã€‚ä¸¤ä¸ªé¡¹ç›®ä¸‹æ¥ï¼Œæˆ‘çš„æ°´å¹³åœç•™åœ¨äº†ç†Ÿç»ƒåŸºäº umijs å¼€å‘ä¸šåŠ¡ã€‚ä¸ºåç»­ç ”ç©¶æºç å’Œæ€§èƒ½ä¼˜åŒ–æ‰“ä¸‹äº†åŸºç¡€ã€‚è¿™æ–¹é¢çš„ç»éªŒæˆ‘å†™äº†ä¸€ç¯‡<a href="https://juejin.im/post/5ef1dd62f265da02981f0266">UmiJSå¼€å‘æŠ€å·§ã€æŒç»­æ›´æ–°ã€‘</a> åšäº†æ€»ç»“ã€‚</p></li></ol><h3 id="ç¤¾åŒº"><a href="#ç¤¾åŒº" class="headerlink" title="ç¤¾åŒº"></a>ç¤¾åŒº</h3><p>æˆ‘ç°åœ¨æ··å¾—ç¤¾åŒºæ¯”è¾ƒå°‘ï¼Œä¸€ä¸ªæ˜¯GitHubï¼Œä¸€ä¸ªæ˜¯æ˜é‡‘ã€‚çŸ­æœŸå†…ä¹Ÿæ²¡è®¡åˆ’å†æ··å…¶ä»–çš„ç¤¾åŒºï¼ˆä¸æƒ³ç²¾åŠ›åˆ†æ•£å¤ªå¤šï¼‰ã€‚</p><h4 id="æ˜é‡‘"><a href="#æ˜é‡‘" class="headerlink" title="æ˜é‡‘"></a>æ˜é‡‘</h4><p>ä»2æœˆä»½åˆ°ç°åœ¨å…±å‘å¸ƒäº†27ç¯‡åšå®¢ï¼Œps:ä¹‹å‰åˆ†äº«çš„æ–‡ç« çš„æµé‡çœ‹çš„æˆ‘å¿ƒç–¼ï¼ˆqaqï¼‰ã€‚</p><p><img src="https://i.loli.net/2020/07/17/xI1Vwts5Y3EXf4C.png"></p><p>å¾ˆå¤šæœ‹å‹éƒ½æ˜¯é€šè¿‡<a href="https://juejin.im/post/5e535e0df265da576b566397">React Native é¡¹ç›®æ¶æ„é¢é¢è§‚ã€æŒç»­æ›´æ–°ã€‘</a>ã€<a href="https://juejin.im/post/5e50f3ace51d4526ef5f8d56">react-navigation 5.x æœ€ä½³å®è·µ</a> è¿™ä¸¤ç¯‡æ–‡ç« è®¤è¯†æˆ‘çš„ï¼Œä»æ¨é€æ¥çœ‹ï¼Œéƒ½æ˜¯åœ¨ç‚¹èµè¿™ä¸¤ç¯‡æ–‡ç« ä¹‹åå…³æ³¨æˆ‘ã€‚åæœŸæˆ‘ä¹Ÿä¼šç»§ç»­è¾“å‡ºè·¨å¹³å°ç›¸å…³çš„æŠ€æœ¯åˆ†äº«ã€‚</p><h4 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h4><p>å‡æœŸçš„æ—¶å€™ï¼Œæˆ‘æ›´æ–°äº†<a href="https://github.com/youngjuning/wx-promise-pro">wx-promise-pro</a>ï¼Œæ”¯æŒäº†TSï¼Œå¹¶ä¼˜åŒ–äº†å†…éƒ¨å®ç°ã€‚æ›´æ–°ä¹‹ååˆ°ç°åœ¨ç´¯è®¡å¢åŠ 100starã€‚è¿™æ˜¯ä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºçš„å¢å¼ºæ’ä»¶ï¼Œå¹´å‰å·²è¢« <a href="https://hellogithub.com/periodical/volume/47/#wx-promise-pro">HelloGitHub 47æœŸ</a> æ”¶å½•ï¼Œæœ‰ 20+ çš„ github åº“åœ¨ä½¿ç”¨ï¼Œæ¬¢è¿å°è¯•ã€‚</p><p>æœ€åï¼Œç§€ä¸€æ³¢æˆ‘çš„ READMEï¼š</p><p><img src="https://i.loli.net/2020/07/17/jkGrLHhA8lP57Bx.png"></p>]]></content>
      
      
      <categories>
          
          <category> æ¼«è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹´ä¸­æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ç²¾é€šä¹‹ Vue ç§»åŠ¨ç«¯å¼€å‘</title>
      <link href="/4617061a3c2c/"/>
      <url>/4617061a3c2c/</url>
      
        <content type="html"><![CDATA[<p>ç²¾é€šä»»ä½•æŠ€èƒ½éƒ½æ˜¯éœ€è¦æ—¶é—´çš„ï¼Œä½†æ˜¯å¾€å¾€å·¥ä½œä¸­æ˜¯ä¸ä¼šç»™ä½ è¿™ä¸ªæ—¶é—´çš„ï¼Œå°¤å…¶æ˜¯å¼€å‘å·¥ä½œã€‚æ–°æŠ€æœ¯å±‚å‡ºä¸ç©·ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½å¯èƒ½æŠ€æœ¯æ ˆä¸ä¸€æ ·ã€‚</p><p>æ— æ³•æ”¹å˜ç¯å¢ƒï¼Œé‚£ä¹ˆå°±åªèƒ½æ”¹å˜æˆ‘ä»¬è‡ªèº«ã€‚å¦‚æœè®©å…¬å¸ç­‰ä½ ç²¾é€šå†å¼€å‘ï¼Œé‚£ä½ åªèƒ½è¢«æ·˜æ±°ã€‚ä½†å¦‚æœæ¯«æ— å‡†å¤‡è¿›å…¥å¼€å‘ï¼Œé¡¹ç›®è´¨é‡åˆæ— ä»è°ˆèµ·ï¼Œè€Œä¸”é¡¹ç›®ä¹Ÿå¯èƒ½å¤±æ§ã€‚è€Œå¾®ç²¾é€šå°±æ˜¯æ¡†å®šä¸€ä¸ªæœ€å°èŒƒå›´ï¼Œå¿«é€Ÿç†Ÿæ‚‰å®Œæˆä»»åŠ¡æ‰€æ¶‰åŠçš„å†…å®¹ã€‚ä»Šå¤©æˆ‘å°±æ‹¿ Vue ç§»åŠ¨ç«¯å¼€å‘åšä¸€ä¸ªå®éªŒã€‚</p><h2 id="é¡¹ç›®åˆå§‹åŒ–"><a href="#é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="é¡¹ç›®åˆå§‹åŒ–"></a>é¡¹ç›®åˆå§‹åŒ–</h2><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… Vue Cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªé¡¹ç›®</span></span><br><span class="line">vue create zhiliao-vant</span><br></pre></td></tr></table></figure><h3 id="é…ç½®Prettier"><a href="#é…ç½®Prettier" class="headerlink" title="é…ç½®Prettier"></a>é…ç½®Prettier</h3><p>1ã€å®‰è£…ä¾èµ–</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add prettier eslint-plugin-prettier eslint-config-prettier -D</span><br></pre></td></tr></table></figure><ul><li>prettier: Prettier CLI</li><li>eslint-plugin-prettier: ä»¥ ESLint æ’ä»¶çš„å½¢å¼è¿è¡Œ prettier</li><li>eslint-config-prettier: å…³é—­æ‰€æœ‰ä¸å¿…è¦æˆ–å¯èƒ½ä¸ prettier çš„è§„åˆ™å†²çªçš„ ESLint è§„åˆ™ã€‚ä¸€å®šè¦æ”¾åˆ°æœ€åã€‚</li></ul><p>2ã€é…ç½®  <code>.eslintrc.js</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;plugin:vue/essential&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@vue/airbnb&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:prettier/recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;prettier/vue&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;babel-eslint&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;no-debugger&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="comment">// add your rules</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>3ã€æ–°å»º <code>/.prettierrc.js</code>ï¼Œå¹¶å†™å…¥å¦‚ä¸‹é…ç½®</p><blockquote><p>æ³¨æ„: è¦ä¸è¦åŠ åˆ†å·çš„åŸåˆ™æ˜¯<strong>é¢†å¯¼ä¸ºå¤§ï¼Œå–œå¥½ä¸ºå°</strong></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">printWidth</span>: <span class="number">120</span>, <span class="comment">// ä¸€è¡Œçš„å­—ç¬¦æ•°ï¼Œå¦‚æœè¶…è¿‡ä¼šè¿›è¡Œæ¢è¡Œï¼Œé»˜è®¤ä¸º80</span></span><br><span class="line">  <span class="attr">tabWidth</span>: <span class="number">2</span>, <span class="comment">// tabç¼©è¿›å¤§å°,é»˜è®¤ä¸º2</span></span><br><span class="line">  <span class="attr">useTabs</span>: <span class="literal">false</span>, <span class="comment">// ä½¿ç”¨tabç¼©è¿›ï¼Œé»˜è®¤false</span></span><br><span class="line">  <span class="attr">semi</span>: <span class="literal">false</span>, <span class="comment">// ä½¿ç”¨åˆ†å·, é»˜è®¤true</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è¡Œå°¾é€—å·,é»˜è®¤none,å¯é€‰ none|es5|all</span></span><br><span class="line"><span class="comment">   * es5 åŒ…æ‹¬es5ä¸­çš„æ•°ç»„ã€å¯¹è±¡</span></span><br><span class="line"><span class="comment">   * all åŒ…æ‹¬å‡½æ•°å¯¹è±¡ç­‰æ‰€æœ‰å¯é€‰</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">trailingComma</span>: <span class="string">&#x27;es5&#x27;</span>,</span><br><span class="line">  <span class="attr">singleQuote</span>: <span class="literal">true</span>, <span class="comment">// ä½¿ç”¨å•å¼•å·, é»˜è®¤false(åœ¨jsxä¸­é…ç½®æ— æ•ˆ, é»˜è®¤éƒ½æ˜¯åŒå¼•å·)</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å¯¹è±¡ä¸­çš„ç©ºæ ¼ é»˜è®¤true</span></span><br><span class="line"><span class="comment">   * true: &#123; foo: bar &#125;</span></span><br><span class="line"><span class="comment">   * false: &#123;foo: bar&#125;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">bracketSpacing</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * JSXæ ‡ç­¾é—­åˆä½ç½® é»˜è®¤false</span></span><br><span class="line"><span class="comment">   * false:</span></span><br><span class="line"><span class="comment">   * &lt;div</span></span><br><span class="line"><span class="comment">   *  className=&quot;&quot;</span></span><br><span class="line"><span class="comment">   *  style=&#123;&#123;&#125;&#125;</span></span><br><span class="line"><span class="comment">   * &gt;</span></span><br><span class="line"><span class="comment">   * true:</span></span><br><span class="line"><span class="comment">   * &lt;div</span></span><br><span class="line"><span class="comment">   *  className=&quot;&quot;</span></span><br><span class="line"><span class="comment">   * style=&#123;&#123;&#125;&#125; &gt;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">jsxBracketSameLine</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç®­å¤´å‡½æ•°å‚æ•°æ‹¬å· é»˜è®¤avoid å¯é€‰ avoid| always</span></span><br><span class="line"><span class="comment">   * avoid èƒ½çœç•¥æ‹¬å·çš„æ—¶å€™å°±çœç•¥ ä¾‹å¦‚x =&gt; x</span></span><br><span class="line"><span class="comment">   * always æ€»æ˜¯æœ‰æ‹¬å·</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">arrowParens</span>: <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">  <span class="attr">vueIndentScriptAndStyle</span>: <span class="literal">false</span>, <span class="comment">// vue æ–‡ä»¶ script å’Œ style æ ‡ç­¾ç¼©è¿›ï¼Œé»˜è®¤false</span></span><br><span class="line">  <span class="attr">endOfLine</span>: <span class="string">&#x27;lf&#x27;</span>, <span class="comment">// å¼ºåˆ¶ä½¿ç”¨ unix é£æ ¼çš„æ¢è¡Œç¬¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="vscode-é…ç½®"><a href="#vscode-é…ç½®" class="headerlink" title="vscode é…ç½®"></a>vscode é…ç½®</h3><p>æ–°å»º <code>/.vscode/settings.json</code> å¹¶å†™å…¥ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;editor.formatOnSave&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">// å…³é—­ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œé˜²æ­¢ä¸ eslint å†²çª</span></span><br><span class="line">  <span class="attr">&quot;files.eol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\n&quot;</span><span class="punctuation">,</span> <span class="comment">// ç»Ÿä¸€é»˜è®¤è¡Œå°¾å­—ç¬¦ä¸º LF</span></span><br><span class="line">  <span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;source.fixAll.eslint&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// å…³é—­ vetur éªŒè¯åŠŸèƒ½</span></span><br><span class="line">  <span class="attr">&quot;vetur.validation.script&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vetur.validation.style&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vetur.validation.template&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// ç¦ç”¨ prettier æ’ä»¶ï¼Œé¿å…ä¸ eslint å†²çªï¼Œå»ºè®®åˆ é™¤ vscode-prettier</span></span><br><span class="line">  <span class="attr">&quot;prettier.disableLanguages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;javascript&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;javascriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;typescript&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;typescriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;json&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;jsonc&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¦‚æœæ˜¯å›¢é˜Ÿåä½œçš„é¡¹ç›®ï¼Œè¯·åˆ é™¤ <code>.gitignire</code> ä¸­çš„ <code>.vscode</code> ï¼Œå°†é…ç½®åŠ å…¥åˆ°ä»£ç åº“ã€‚</p></blockquote><h3 id="Formatåˆå§‹ä»£ç "><a href="#Formatåˆå§‹ä»£ç " class="headerlink" title="Formatåˆå§‹ä»£ç "></a>Formatåˆå§‹ä»£ç </h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn lint</span><br></pre></td></tr></table></figure><h2 id="vue-x2F-cli"><a href="#vue-x2F-cli" class="headerlink" title="@vue&#x2F;cli"></a>@vue&#x2F;cli</h2><h3 id="x2F-vuerc"><a href="#x2F-vuerc" class="headerlink" title="~&#x2F;.vuerc"></a>~&#x2F;.vuerc</h3><p>è¢«ä¿å­˜çš„ preset å°†ä¼šå­˜åœ¨ç”¨æˆ·çš„ home ç›®å½•ä¸‹ä¸€ä¸ªåä¸º <code>.vuerc</code> çš„ JSON æ–‡ä»¶é‡Œã€‚å¦‚æœä½ æƒ³è¦ä¿®æ”¹è¢«ä¿å­˜çš„ <code>preset/</code> é€‰é¡¹ï¼Œå¯ä»¥ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ã€‚</p><p>åœ¨é¡¹ç›®åˆ›å»ºçš„è¿‡ç¨‹ä¸­ï¼Œä½ ä¹Ÿä¼šè¢«æç¤ºé€‰æ‹©å–œæ¬¢çš„åŒ…ç®¡ç†å™¨æˆ–ä½¿ç”¨<a href="https://npm.taobao.org/">æ·˜å® npm é•œåƒæº</a>ä»¥æ›´å¿«åœ°å®‰è£…ä¾èµ–ã€‚è¿™äº›é€‰æ‹©ä¹Ÿå°†ä¼šå­˜å…¥ <code>~/.vuerc</code>ã€‚ä¸‹é¢æ˜¯æˆ‘çš„é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;useTaobaoRegistry&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;packageManager&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;javascript&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;useConfigFiles&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@vue/cli-plugin-babel&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;@vue/cli-plugin-router&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;historyMode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;@vue/cli-plugin-vuex&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;@vue/cli-plugin-eslint&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;config&quot;</span><span class="punctuation">:</span> <span class="string">&quot;airbnb&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;lintOn&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;save&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;commit&quot;</span></span><br><span class="line">          <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;cssPreprocessor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;less&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="git-hooks"><a href="#git-hooks" class="headerlink" title="git hooks"></a>git hooks</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;gitHooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;pre-commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;js,jsx,vue&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;vue-cli-service lint&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;git add&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;md,json&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;prettier --write&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;git add&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><h4 id="vue-cli3å‡ºç°Invalid-Host-headerçš„è§£å†³æ–¹æ¡ˆ"><a href="#vue-cli3å‡ºç°Invalid-Host-headerçš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="vue-cli3å‡ºç°Invalid Host headerçš„è§£å†³æ–¹æ¡ˆ"></a>vue-cli3å‡ºç°Invalid Host headerçš„è§£å†³æ–¹æ¡ˆ</h4><blockquote><p>å‚è€ƒ: <a href="https://blog.csdn.net/guzhao593/article/details/85918869">vue-cli3å‡ºç°Invalid Host headerçš„è§£å†³æ–¹æ¡ˆ</a></p></blockquote><p><strong>äº§ç”ŸåŸå› </strong></p><p>æ–°ç‰ˆçš„ <code>webpack-dev-server</code> å¢åŠ äº†å®‰å…¨éªŒè¯ï¼Œé»˜è®¤æ£€æŸ¥<code>hostname</code>ï¼Œå¦‚æœ<code>hostname</code>ä¸æ˜¯é…ç½®å†…çš„ï¼Œå°†ä¸­æ–­è®¿é—®ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p><p>å¯¹<code>vue.config.js</code>è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">disableHostCheck</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Vant-UI"><a href="#Vant-UI" class="headerlink" title="Vant UI"></a>Vant UI</h2><h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add vant</span><br></pre></td></tr></table></figure><h3 id="æŒ‰éœ€å¼•å…¥ç»„ä»¶"><a href="#æŒ‰éœ€å¼•å…¥ç»„ä»¶" class="headerlink" title="æŒ‰éœ€å¼•å…¥ç»„ä»¶"></a>æŒ‰éœ€å¼•å…¥ç»„ä»¶</h3><p>å®‰è£… <code>babel-import-plugin</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add babel-plugin-import -D</span><br></pre></td></tr></table></figure><p>å¯¹äºä½¿ç”¨ babel7 çš„ç”¨æˆ·ï¼Œå¯ä»¥åœ¨ <code>babel.config.js</code> ä¸­é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [<span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span>],</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;import&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">libraryName</span>: <span class="string">&#x27;vant&#x27;</span>,</span><br><span class="line">        <span class="attr">libraryDirectory</span>: <span class="string">&#x27;es&#x27;</span>,</span><br><span class="line">        <span class="attr">style</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;vant&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ä½ å¯ä»¥åœ¨ä»£ç ä¸­ç›´æ¥å¼•å…¥ Vant ç»„ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Button</span>);</span><br></pre></td></tr></table></figure><h3 id="é…ç½®åŸºäº-Rem-çš„é€‚é…æ–¹æ¡ˆ"><a href="#é…ç½®åŸºäº-Rem-çš„é€‚é…æ–¹æ¡ˆ" class="headerlink" title="é…ç½®åŸºäº Rem çš„é€‚é…æ–¹æ¡ˆ"></a>é…ç½®åŸºäº Rem çš„é€‚é…æ–¹æ¡ˆ</h3><p>Vant ä¸­çš„æ ·å¼é»˜è®¤ä½¿ç”¨<code>px</code>ä½œä¸ºå•ä½ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨<code>rem</code>å•ä½ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå·¥å…·ï¼š</p><ul><li><a href="https://github.com/cuth/postcss-pxtorem">postcss-pxtorem</a> æ˜¯ä¸€æ¬¾ postcss æ’ä»¶ï¼Œç”¨äºå°†å•ä½è½¬åŒ–ä¸º rem</li><li><a href="https://github.com/amfe/lib-flexible">lib-flexible</a> ç”¨äºè®¾ç½® rem åŸºå‡†å€¼</li></ul><p>1ã€å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add amfe-flexible</span><br><span class="line">$ yarn add postcss-pxtorem -D</span><br></pre></td></tr></table></figure><p>2ã€åœ¨æ ¹ç›®å½•æ–°å»º <code>postcss.config.js</code>ï¼Œå¹¶å†™å…¥ä»¥ä¸‹é…ç½®ï¼š</p><blockquote><p>å‚è€ƒ: <a href="https://github.com/youzan/vant/issues/1181">è®¾è®¡ç¨¿æ˜¯750pxï¼Œæ ¹å…ƒç´ åº”è¯¥è®¾ç½®75ï¼Œä½†æ˜¯vantè½¬æ¢åå¥½å°ï¼Œè¦æ”¹æˆ35æ‰è¡Œ</a>ã€<a href="https://www.cnblogs.com/yimei/p/11319657.html">ä½¿ç”¨vue vantUiæ¡†æ¶ æ ¹å­—ä½“æ˜¯37.5 å’Œé»˜è®¤æ ¹å­—ä½“75ä¸ä¸€è‡´ï¼Œå¯¼è‡´é¡µé¢ç»„ä»¶æ ·å¼å˜å°</a></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">&#123; file &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> designWidth = file.<span class="property">dirname</span>.<span class="title function_">includes</span>(<span class="string">&#x27;node_modules/vant&#x27;</span>) ? <span class="number">37.5</span> : <span class="number">75</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">plugins</span>: &#123;</span><br><span class="line">      <span class="attr">autoprefixer</span>: &#123;</span><br><span class="line">        <span class="attr">overrideBrowserslist</span>: [<span class="string">&#x27;Android 4.1&#x27;</span>, <span class="string">&#x27;iOS 7.1&#x27;</span>, <span class="string">&#x27;Chrome &gt; 31&#x27;</span>, <span class="string">&#x27;ff &gt; 31&#x27;</span>, <span class="string">&#x27;ie &gt;= 8&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;postcss-pxtorem&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">rootValue</span>: designWidth,</span><br><span class="line">        <span class="attr">propList</span>: [<span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;!border&#x27;</span>],</span><br><span class="line">        <span class="attr">selectorBlackList</span>: [<span class="string">&#x27;.ignore&#x27;</span>, <span class="string">&#x27;.hairlines&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„: ä½ å¯ä»¥ä½¿ç”¨ <code>Px</code> æˆ– <code>PX</code> æ¥è®© <code>postcss-pxtorem</code> å¿½ç•¥è½¬æ¢ï¼Œè€Œä¸”è¿™æ ·æµè§ˆå™¨ä¹Ÿèƒ½è¯†åˆ«ã€‚</p></blockquote><p>3ã€åœ¨ <code>src/main.js</code> ä¸­å¼•å…¥ <code>amfe-flexible</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">import &#x27;amfe-flexible&#x27;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="åº•éƒ¨å®‰å…¨åŒºé€‚é…"><a href="#åº•éƒ¨å®‰å…¨åŒºé€‚é…" class="headerlink" title="åº•éƒ¨å®‰å…¨åŒºé€‚é…"></a>åº•éƒ¨å®‰å…¨åŒºé€‚é…</h3><p>iPhone X ç­‰æœºå‹åº•éƒ¨å­˜åœ¨åº•éƒ¨æŒ‡ç¤ºæ¡ï¼ŒæŒ‡ç¤ºæ¡çš„æ“ä½œåŒºåŸŸä¸é¡µé¢åº•éƒ¨å­˜åœ¨é‡åˆï¼Œå®¹æ˜“å¯¼è‡´ç”¨æˆ·è¯¯æ“ä½œï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é’ˆå¯¹è¿™äº›æœºå‹è¿›è¡Œåº•éƒ¨å®‰å…¨åŒºé€‚é…ã€‚Vant ä¸­éƒ¨åˆ†ç»„ä»¶æä¾›äº†<code>safe-area-inset-bottom</code>å±æ€§ï¼Œè®¾ç½®è¯¥å±æ€§åï¼Œå³å¯åœ¨å¯¹åº”çš„æœºå‹ä¸Šå¼€å¯é€‚é…ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åœ¨ head æ ‡ç­¾ä¸­æ·»åŠ  meta æ ‡ç­¾ï¼Œå¹¶è®¾ç½® viewport-fit=cover å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯ safe-area-inset-bottom å±æ€§ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-number-keyboard</span> <span class="attr">safe-area-inset-bottom</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®è‡ªå®šä¹‰ä¸»é¢˜è‰²æ–¹æ¡ˆ"><a href="#é…ç½®è‡ªå®šä¹‰ä¸»é¢˜è‰²æ–¹æ¡ˆ" class="headerlink" title="é…ç½®è‡ªå®šä¹‰ä¸»é¢˜è‰²æ–¹æ¡ˆ"></a>é…ç½®è‡ªå®šä¹‰ä¸»é¢˜è‰²æ–¹æ¡ˆ</h3><h4 id="1ã€æŒ‰éœ€å¼•å…¥æ ·å¼"><a href="#1ã€æŒ‰éœ€å¼•å…¥æ ·å¼" class="headerlink" title="1ã€æŒ‰éœ€å¼•å…¥æ ·å¼"></a>1ã€æŒ‰éœ€å¼•å…¥æ ·å¼</h4><p>åœ¨ <code>babel.config.js</code> ä¸­é…ç½®æŒ‰éœ€å¼•å…¥æ ·å¼æºæ–‡ä»¶:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;import&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">libraryName</span>: <span class="string">&#x27;vant&#x27;</span>,</span><br><span class="line">        <span class="attr">libraryDirectory</span>: <span class="string">&#x27;es&#x27;</span>,</span><br><span class="line">        <span class="comment">// æŒ‡å®šæ ·å¼è·¯å¾„</span></span><br><span class="line">        <span class="attr">style</span>: <span class="function">(<span class="params">name</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;name&#125;</span>/style/less`</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;vant&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="2ã€-ä¿®æ”¹æ ·å¼å˜é‡"><a href="#2ã€-ä¿®æ”¹æ ·å¼å˜é‡" class="headerlink" title="2ã€ ä¿®æ”¹æ ·å¼å˜é‡"></a>2ã€ ä¿®æ”¹æ ·å¼å˜é‡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add less less-loader</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">loaderOptions</span>: &#123;</span><br><span class="line">      <span class="attr">less</span>: &#123;</span><br><span class="line">        <span class="attr">modifyVars</span>: &#123;</span><br><span class="line">          <span class="comment">// ç›´æ¥è¦†ç›–å˜é‡</span></span><br><span class="line">          <span class="string">&#x27;text-color&#x27;</span>: <span class="string">&#x27;#111&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;border-color&#x27;</span>: <span class="string">&#x27;#eee&#x27;</span>,</span><br><span class="line">          <span class="comment">// æˆ–è€…å¯ä»¥é€šè¿‡ less æ–‡ä»¶è¦†ç›–ï¼ˆæ–‡ä»¶è·¯å¾„ä¸ºç»å¯¹è·¯å¾„ï¼‰</span></span><br><span class="line">          <span class="attr">hack</span>: <span class="string">&#x27;true; @import &quot;your-less-file-path.less&quot;;&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>Vant ä½¿ç”¨äº† <a href="http://lesscss.org/">Less</a> å¯¹æ ·å¼è¿›è¡Œé¢„å¤„ç†ï¼Œå¹¶å†…ç½®äº†ä¸€äº›æ ·å¼å˜é‡ï¼Œä¸‹é¢æ˜¯ä¸€äº›åŸºæœ¬çš„æ ·å¼å˜é‡ï¼Œæ‰€æœ‰å¯ç”¨çš„é¢œè‰²å˜é‡è¯·å‚è€ƒ <a href="https://github.com/youzan/vant/blob/dev/src/style/var.less">é…ç½®æ–‡ä»¶</a>ã€‚</p></blockquote><h3 id="é…ç½®åŸºäº-Viewport-çš„é€‚é…æ–¹æ¡ˆï¼ˆæ¨èï¼‰"><a href="#é…ç½®åŸºäº-Viewport-çš„é€‚é…æ–¹æ¡ˆï¼ˆæ¨èï¼‰" class="headerlink" title="é…ç½®åŸºäº Viewport çš„é€‚é…æ–¹æ¡ˆï¼ˆæ¨èï¼‰"></a>é…ç½®åŸºäº Viewport çš„é€‚é…æ–¹æ¡ˆï¼ˆæ¨èï¼‰</h3><p>è¯¥æ–¹æ¡ˆå’Œ<strong>é…ç½®åŸºäº Rem çš„é€‚é…æ–¹æ¡ˆ</strong>æ˜¯äº’æ–¥çš„ï¼Œè¯·äºŒé€‰ä¸€ã€‚</p><blockquote><p>å‚è€ƒ: <a href="https://my.oschina.net/u/4382386/blog/4290707">ç§»åŠ¨ç«¯å¸ƒå±€ä¹‹postcss-px-to-viewportï¼ˆå…¼å®¹vantï¼‰</a>ã€<a href="https://www.cnblogs.com/cnloop/p/9697229.html">vue â€”â€” åˆ©ç”¨ viewport è¿›è¡Œé€‚é…</a></p></blockquote><p>1ã€å®‰è£… postcss-px-to-viewport</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add postcss-px-to-viewport -D</span></span><br></pre></td></tr></table></figure><p>2ã€é…ç½®<code> postcss.config.js</code> æ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">&#123; file &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> designWidth = file.<span class="property">dirname</span>.<span class="title function_">includes</span>(<span class="string">&#x27;node_modules/vant&#x27;</span>) ? <span class="number">375</span> : <span class="number">750</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">plugins</span>: &#123;</span><br><span class="line">      <span class="attr">autoprefixer</span>: &#123;</span><br><span class="line">        <span class="comment">// ç”¨æ¥ç»™ä¸åŒçš„æµè§ˆå™¨è‡ªåŠ¨æ·»åŠ ç›¸åº”å‰ç¼€ï¼Œå¦‚-webkit-ï¼Œ-moz-ç­‰ç­‰</span></span><br><span class="line">        <span class="attr">overrideBrowserslist</span>: [</span><br><span class="line">          <span class="string">&#x27;Android 4.1&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;iOS 7.1&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;Chrome &gt; 31&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;ff &gt; 31&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;ie &gt;= 8&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;postcss-px-to-viewport&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">unitToConvert</span>: <span class="string">&quot;px&quot;</span>, <span class="comment">// è¦è½¬åŒ–çš„å•ä½</span></span><br><span class="line">        <span class="attr">viewportWidth</span>: designWidth, <span class="comment">// UIè®¾è®¡ç¨¿çš„å®½åº¦</span></span><br><span class="line">        <span class="attr">unitPrecision</span>: <span class="number">6</span>, <span class="comment">// è½¬æ¢åçš„ç²¾åº¦ï¼Œå³å°æ•°ç‚¹ä½æ•°</span></span><br><span class="line">        <span class="attr">propList</span>: [<span class="string">&quot;*&quot;</span>,<span class="string">&quot;!border&quot;</span>], <span class="comment">// æŒ‡å®šè½¬æ¢çš„csså±æ€§çš„å•ä½ï¼Œ*ä»£è¡¨å…¨éƒ¨csså±æ€§çš„å•ä½éƒ½è¿›è¡Œè½¬æ¢</span></span><br><span class="line">        <span class="attr">viewportUnit</span>: <span class="string">&quot;vw&quot;</span>, <span class="comment">// æŒ‡å®šéœ€è¦è½¬æ¢æˆçš„è§†çª—å•ä½ï¼Œé»˜è®¤vw</span></span><br><span class="line">        <span class="attr">fontViewportUnit</span>: <span class="string">&quot;vw&quot;</span>, <span class="comment">// æŒ‡å®šå­—ä½“éœ€è¦è½¬æ¢æˆçš„è§†çª—å•ä½ï¼Œé»˜è®¤vw</span></span><br><span class="line">        <span class="attr">selectorBlackList</span>: [<span class="string">&#x27;.ignore&#x27;</span>, <span class="string">&#x27;.hairlines&#x27;</span>], <span class="comment">// æŒ‡å®šä¸è½¬æ¢ä¸ºè§†çª—å•ä½çš„ç±»å</span></span><br><span class="line">        <span class="attr">minPixelValue</span>: <span class="number">1</span>, <span class="comment">// é»˜è®¤å€¼1ï¼Œå°äºæˆ–ç­‰äº1pxåˆ™ä¸è¿›è¡Œè½¬æ¢</span></span><br><span class="line">        <span class="attr">landscape</span>: <span class="literal">false</span> <span class="comment">// æ˜¯å¦å¤„ç†æ¨ªå±æƒ…å†µ</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>propList</code>: å½“æœ‰äº›å±æ€§çš„å•ä½æˆ‘ä»¬ä¸å¸Œæœ›è½¬æ¢çš„æ—¶å€™ï¼Œå¯ä»¥æ·»åŠ åœ¨æ•°ç»„åé¢ï¼Œå¹¶åœ¨å‰é¢åŠ ä¸Š<code>!</code>å·ï¼Œå¦‚<code>propList: [&quot;*&quot;,&quot;!border&quot;]</code>,è¿™è¡¨ç¤ºï¼šæ‰€æœ‰csså±æ€§çš„å±æ€§çš„å•ä½éƒ½è¿›è¡Œè½¬åŒ–ï¼Œé™¤äº†<code>border</code>çš„</li><li><code>selectorBlackList</code>ï¼šè½¬æ¢çš„é»‘åå•ï¼Œåœ¨é»‘åå•é‡Œé¢çš„æˆ‘ä»¬å¯ä»¥å†™å…¥å­—ç¬¦ä¸²ï¼Œåªè¦ç±»ååŒ…å«æœ‰è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå°±ä¸ä¼šè¢«åŒ¹é…ã€‚æ¯”å¦‚<code>selectorBlackList: [&#39;wrap&#39;]</code>,å®ƒè¡¨ç¤ºå½¢å¦‚<code>wrap</code>,<code>my-wrap</code>,<code>wrapper</code>è¿™æ ·çš„ç±»åçš„å•ä½ï¼Œéƒ½ä¸ä¼šè¢«è½¬æ¢</li></ul><h2 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h2><h3 id="vueä¸­style-scopeæ·±åº¦è®¿é—®æ–°æ–¹å¼-v-deep"><a href="#vueä¸­style-scopeæ·±åº¦è®¿é—®æ–°æ–¹å¼-v-deep" class="headerlink" title="vueä¸­style scopeæ·±åº¦è®¿é—®æ–°æ–¹å¼(::v-deep)"></a>vueä¸­style scopeæ·±åº¦è®¿é—®æ–°æ–¹å¼(<code>::v-deep</code>)</h3><blockquote><p>å‚è€ƒï¼š <a href="https://segmentfault.com/a/1190000021576348">vueä¸­style scopeæ·±åº¦è®¿é—®æ–°æ–¹å¼(::v-deep)</a></p></blockquote><p>ç”±äºä½¿ç”¨ scoped åï¼Œçˆ¶ç»„ä»¶çš„æ ·å¼å°†ä¸ä¼šæ¸—é€åˆ°å­ç»„ä»¶ä¸­ã€‚å®˜æ–¹å¼•å…¥äº† <a href="https://vue-loader.vuejs.org/zh/guide/scoped-css.html#%E6%B7%B1%E5%BA%A6%E4%BD%9C%E7%94%A8%E9%80%89%E6%8B%A9%E5%99%A8">æ·±åº¦ä½œç”¨é€‰æ‹©å™¨</a>ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è®°å¾—ä¹‹å‰ä½¿ç”¨çš„æ˜¯ <code>/deep/</code>ï¼Œæ®è¯´è¿™ä¸ªå±æ€§æœ‰å…¼å®¹é—®é¢˜ï¼Œç°åœ¨å¼•å…¥äº†æ–°æ–¹å¼ï¼š<code>::v-deep</code>:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#editDoctorAdvice</span> &#123;</span><br><span class="line">  <span class="selector-class">.topSearch</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;::v-deep .el-input__inner &#123;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">6px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.dateTimeClass</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://juejin.im/post/5c9f22876fb9a05e425556ed">Vueå…¥é—¨æŒ‡å—(å¿«é€Ÿä¸Šæ‰‹vue)</a></li><li><a href="https://juejin.im/post/5a0c191f6fb9a04514639419">vueå¿«é€Ÿå…¥é—¨çš„ä¸‰ä¸ªå°å®ä¾‹</a></li><li><a href="https://github.com/chimurai/http-proxy-middleware">http-proxy-middleware</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vant </tag>
            
            <tag> å¾®ç²¾é€š </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UmiJSå¼€å‘æŠ€å·§</title>
      <link href="/f477c87db8e2/"/>
      <url>/f477c87db8e2/</url>
      
        <content type="html"><![CDATA[<p>é‰´äº UmiJS æ˜¯é‡åº¦çš„å°è£…äº†å¾ˆå¤šå·¥å…·å’ŒåŠŸèƒ½ï¼Œå¯¹äºåˆšæ¥è§¦çš„äººå½¢æˆäº†ä¸€å±‚æŠ€æœ¯å£å’ï¼ˆå¤§ä½¬è¯·å¿½ç•¥è¿™å¥è¯ï¼‰ã€‚æ‰€ä»¥æˆ‘æ€»ç»“äº†ä½¿ç”¨UmiJS å¼€å‘ä¸­é‡åˆ°çš„å‘å’ŒæŠ€å·§ã€‚</p><h2 id="æœ¬åœ°å¼€å‘-umi-dev-æ—¶å…³é—­-mock"><a href="#æœ¬åœ°å¼€å‘-umi-dev-æ—¶å…³é—­-mock" class="headerlink" title="æœ¬åœ°å¼€å‘ umi dev æ—¶å…³é—­ mock"></a>æœ¬åœ°å¼€å‘ umi dev æ—¶å…³é—­ mock</h2><blockquote><p>å‚è€ƒ: <a href="https://github.com/umijs/umi/issues/486">å¸Œæœ›æœ¬åœ°å¼€å‘ umi dev æ—¶å¯ä»¥å…³é—­ mock</a></p></blockquote><p>æ–¹æ¡ˆä¸€ï¼ˆæ¨èï¼‰ï¼šåœ¨ npm scripts ä¸­åŠ å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MOCK=none umi dev&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æ–¹æ¡ˆäºŒï¼šåœ¨ <code>.env</code> æ–‡ä»¶é‡Œ è®¾ç½® <code>MOCK=none</code> ä¹Ÿå¯ä»¥å…³é—­</p><h2 id="jsxæ— æ³•è½¬åˆ°å®šä¹‰å¤„"><a href="#jsxæ— æ³•è½¬åˆ°å®šä¹‰å¤„" class="headerlink" title="jsxæ— æ³•è½¬åˆ°å®šä¹‰å¤„"></a>jsxæ— æ³•è½¬åˆ°å®šä¹‰å¤„</h2><p>åœ¨ <code>jsconfig.json</code> æ–‡ä»¶ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="åœ¨umiä¸­å¦‚ä½•è®¿é—®é™æ€èµ„æº"><a href="#åœ¨umiä¸­å¦‚ä½•è®¿é—®é™æ€èµ„æº" class="headerlink" title="åœ¨umiä¸­å¦‚ä½•è®¿é—®é™æ€èµ„æº"></a>åœ¨umiä¸­å¦‚ä½•è®¿é—®é™æ€èµ„æº</h2><p>åœ¨umiæ¡†æ¶ä¸­ï¼Œå›¾ç‰‡ç­‰é™æ€èµ„æºä¸»è¦æ”¾åˆ°ä¸‰ä¸ªåœ°æ–¹ï¼š</p><ol><li>åœ¨ <code>/public</code> ç›®å½•ä¸‹ï¼Œä¸€èˆ¬æ”¾å…±äº«èµ„æºã€‚</li><li>åœ¨ <code>/src/assets/</code> ç›®å½•ä¸‹ï¼Œä¸€èˆ¬æ”¾å…¨å±€é™æ€èµ„æºã€‚</li><li>åœ¨ <code>/src/pages/</code> é‡Œçš„å„ä¸ªé¡µé¢ç›®å½•ä¸‹ï¼Œæ”¾åœ¨è¿™é‡Œçš„å¥½å¤„æ˜¯æ›´ç¬¦åˆç»„ä»¶åŒ–å¼€å‘çš„æ€æƒ³ï¼Œä¾¿äºæ‹·è´å¤ç”¨ã€‚</li></ol><p>ç”±äºé™æ€èµ„æºä¼šå— <code>context.config.publicPath</code> çš„å½±å“ï¼Œæ‰€ä»¥åœ¨ <code>document.ejs</code> ä¸­åº”è¯¥è¿™æ ·å¼•å…¥æ¯”è¾ƒå®‰å…¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&lt;%= context.config.publicPath %&gt;ol.js&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•è®¿é—®é™æ€å›¾ç‰‡"><a href="#å¦‚ä½•è®¿é—®é™æ€å›¾ç‰‡" class="headerlink" title="å¦‚ä½•è®¿é—®é™æ€å›¾ç‰‡"></a>å¦‚ä½•è®¿é—®é™æ€å›¾ç‰‡</h2><p>1ã€å¦‚æœåœ¨&#x2F;publicç›®å½•ä¸‹çš„é™æ€å›¾ç‰‡ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥ç»å¯¹è·¯å¾„ï¼Œå‡è®¾&#x2F;public&#x2F;yay.jpg,è®¿é—®æ–¹å¼å¦‚ä¸‹ï¼š</p><p><code>&lt;img src=&quot;/yay.jpg&quot; /&gt;</code></p><p>æ³¨æ„ï¼šä»¥ä¸Šå¿…é¡»æ„å»ºååœ¨distä¸­æ‰èƒ½çœ‹åˆ°ã€‚</p><p>2ã€åœ¨ <code>/src/assets</code> å’Œ <code>/src/pages/</code> ç›®å½•ä¸‹çš„å›¾ç‰‡ï¼Œä¸èƒ½é€šè¿‡è¾“å…¥ç»å¯¹è·¯å¾„è®¿é—®ï¼Œå¿…é¡»å…ˆ <code>import</code> å¯¼å…¥ï¼Œæ‰èƒ½è®¿é—®ã€‚æˆ–è€… <code>require</code> å¯¼å…¥ã€‚æ¯”å¦‚ <code>/src/assets/yay.jpg</code> éœ€ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> yayImg <span class="keyword">from</span> <span class="string">&#x27;/src/assets/yay.jpg&#x27;</span>;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;yayImg&#125;</span> /&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;require(</span>&#x27;/<span class="attr">src</span>/<span class="attr">assets</span>/<span class="attr">yay.jpg</span>&#x27;)&#125;</span></span></span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿä¸»è¦æ˜¯å› ä¸ºæ„å»ºæ—¶ï¼Œ<code>/public</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šåŸæ ·å¤åˆ¶åˆ° <code>/dist/</code> ç›®å½•ä¸‹ï¼Œè€Œ <code>/src/assets/</code> å’Œ <code>/src/pages/</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šè¢«æ”¹åå¹¶å¤åˆ¶åˆ° <code>/dist/</code> ä¸‹ã€‚</p><h2 id="react-routerä¸‰ç§ä¼ å‚æ–¹å¼"><a href="#react-routerä¸‰ç§ä¼ å‚æ–¹å¼" class="headerlink" title="react-routerä¸‰ç§ä¼ å‚æ–¹å¼"></a>react-routerä¸‰ç§ä¼ å‚æ–¹å¼</h2><blockquote><p>å‚è€ƒ: <a href="https://www.kelede.win/posts/react-router%E4%B8%89%E7%A7%8D%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F/">react-routerä¸‰ç§ä¼ å‚æ–¹å¼</a></p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;umi/router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">RouterDemo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onOk</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    router.<span class="title function_">push</span>(&#123;</span><br><span class="line">      <span class="attr">pathname</span>: <span class="string">&#x27;test/router&#x27;</span>,</span><br><span class="line">      <span class="comment">// ç‚¹å‡»ä¹‹åï¼Œé¡µé¢ä¼šè·³è½¬ä¸”åœ°å€ä¸Šä¼šè·Ÿä¸Šqueryçš„å‚æ•°ï¼Œ?id=1&amp;code=123</span></span><br><span class="line">      <span class="comment">// è·å–æ–¹å¼ä¼ å€¼å†…å®¹çš„æ–¹å¼: this.props.location.query</span></span><br><span class="line">      <span class="attr">query</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">        <span class="attr">code</span>: <span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// ç‚¹å‡»ä¹‹åï¼Œé¡µé¢ä¼šè·³è½¬</span></span><br><span class="line">      <span class="comment">// é€šè¿‡this.props.location.paramså¯ä»¥è·å¾—paramsçš„å€¼</span></span><br><span class="line">      <span class="comment">// paramså¯ä»¥ä¸ºå…¶ä»–åå­—ï¼Œå¦‚textã€nihaoç­‰ï¼Œä¸ä¸€å®šæ˜¯params</span></span><br><span class="line">      <span class="comment">// åˆ·æ–°é¡µé¢åï¼Œparamsçš„å€¼ä¼šä¸¢å¤±ã€‚</span></span><br><span class="line">      <span class="attr">params</span>: &#123;</span><br><span class="line">        <span class="attr">d</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">        <span class="attr">code</span>: <span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// ä½¿ç”¨stateä¼ å€¼å’Œparamsä¼ å€¼ä¸€æ ·ï¼Œéƒ½ä¸ä¼šå†urlä¸­æ˜¾ç¤ºå‡ºæ¥</span></span><br><span class="line">      <span class="comment">// stateä¼ å€¼ä¸paramsä¼ å€¼çš„åŒºåˆ«æ˜¯stateä¼ å€¼åˆ·æ–°é¡µé¢å€¼è¿˜åœ¨ï¼Œè€Œä½¿ç”¨paramsä¼ å€¼åˆ·æ–°åå€¼ä¸æ²¡æœ‰äº†ã€‚</span></span><br><span class="line">      <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">d</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">        <span class="attr">code</span>: <span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.onOk&#125;</span>&gt;</span>ç‚¹å‡»æµ‹è¯•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹æµè§ˆå™¨ä¸Šæ–¹å›¾æ ‡"><a href="#ä¿®æ”¹æµè§ˆå™¨ä¸Šæ–¹å›¾æ ‡" class="headerlink" title="ä¿®æ”¹æµè§ˆå™¨ä¸Šæ–¹å›¾æ ‡"></a>ä¿®æ”¹æµè§ˆå™¨ä¸Šæ–¹å›¾æ ‡</h2><blockquote><p>å‚è€ƒ: <a href="https://v2.umijs.org/zh/guide/html-template.html#%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF">HTML é…ç½®æ¨¡æ¿</a></p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å›¾ç‰‡åœ¨ /public ä¸‹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= context.publicPath %&gt;favicon.png&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å›¾ç‰‡åœ¨ /src/assets/ ä¸‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/x-icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= context.publicPath %&gt;static/favicon.png&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ”¯æŒ-ie11"><a href="#æ”¯æŒ-ie11" class="headerlink" title="æ”¯æŒ ie11"></a>æ”¯æŒ ie11</h2><blockquote><p>å‚è€ƒ: <a href="https://github.com/umijs/umi/issues/1394">ie11å…¼å®¹é—®é¢˜</a></p></blockquote><p>é…ç½®æµè§ˆå™¨æœ€ä½ç‰ˆæœ¬ï¼Œä¼šè‡ªåŠ¨å¼•å…¥ polyfill å’Œåšè¯­æ³•è½¬æ¢ï¼Œé…ç½®çš„ targets ä¼šå’Œåˆå¹¶åˆ°é»˜è®¤å€¼ï¼Œæ‰€ä»¥ä¸éœ€è¦é‡å¤é…ç½®:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// umié»˜è®¤å…¼å®¹æœ€ä½æµè§ˆå™¨ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">// Default: &#123; chrome: 49, firefox: 45, safari: 10, edge: 13, ios: 10 &#125;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">targets</span>: &#123;</span><br><span class="line">    <span class="attr">ie</span>: <span class="number">11</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ç¼–è¯‘-node-modules-ä¸‹çš„åŒ…"><a href="#ç¼–è¯‘-node-modules-ä¸‹çš„åŒ…" class="headerlink" title="ç¼–è¯‘ node_modules ä¸‹çš„åŒ…"></a>ç¼–è¯‘ node_modules ä¸‹çš„åŒ…</h2><h3 id="UmiJS-2-x"><a href="#UmiJS-2-x" class="headerlink" title="UmiJS 2.x"></a>UmiJS 2.x</h3><blockquote><p>å‚è€ƒ: <a href="https://github.com/umijs/umi/issues/2117#issuecomment-539982434">How to configure extraBabelIncludes</a></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">extraBabelIncludes</span>: [path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;node_modules/&lt;package_name&gt;&#x27;</span>)],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="UmiJS-3-1"><a href="#UmiJS-3-1" class="headerlink" title="UmiJS 3.1+"></a>UmiJS 3.1+</h3><blockquote><p>å‚è€ƒ: <a href="https://umijs.org/zh-CN/config#nodemodulestransform-31">nodeModulesTransform</a>ã€<a href="https://umijs.org/zh-CN/guide/boost-compile-speed">å¦‚ä½•åšç¼–è¯‘æé€Ÿ</a></p></blockquote><p>UmiJS 3 åˆ é™¤äº† <code>extraBabelIncludes</code> å’Œ <code>es5ImcompatibleVersions</code>ï¼Œ<code>node_modules</code> ä¹Ÿèµ° babel ç¼–è¯‘åå°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œæ— éœ€é…ç½®</p><p>UmiJS 3 é»˜è®¤ç¼–è¯‘ <code>node_modules</code> ä¸‹çš„æ–‡ä»¶ï¼Œå¸¦æ¥ä¸€äº›æ”¶ç›Šçš„åŒæ—¶ï¼Œä¹Ÿå¢åŠ äº†é¢å¤–çš„ç¼–è¯‘æ—¶é—´ã€‚å¦‚æœä¸å¸Œæœ› <code>node_modules</code> ä¸‹çš„æ–‡ä»¶èµ° babel ç¼–è¯‘ï¼Œå¯é€šè¿‡ä»¥ä¸‹é…ç½®å‡å°‘ 40% åˆ° 60% çš„ç¼–è¯‘æ—¶é—´ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">nodeModulesTransform</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="attr">exclude</span>: [], <span class="comment">// å¿½ç•¥çš„ä¾èµ–åº“ï¼ŒåŒ…åï¼Œæš‚ä¸æ”¯æŒç»å¯¹è·¯å¾„ï¼›å¯é€šè¿‡ exclude é…ç½®æ·»åŠ é¢å¤–éœ€è¦ç¼–è¯‘çš„</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¹¶è¡Œè¿è¡Œä»»åŠ¡"><a href="#å¹¶è¡Œè¿è¡Œä»»åŠ¡" class="headerlink" title="å¹¶è¡Œè¿è¡Œä»»åŠ¡"></a>å¹¶è¡Œè¿è¡Œä»»åŠ¡</h2><h3 id="call"><a href="#call" class="headerlink" title="call"></a>call</h3><blockquote><p>å‚è€ƒ: <a href="https://github.com/dvajs/dva/issues/756#issuecomment-317770608">æ±‚æ•™å¤šä¸ªå¼‚æ­¥çš„è¯·æ±‚é—®é¢˜ï¼Ÿ</a>ã€<a href="https://redux-saga-in-chinese.js.org/docs/advanced/RunningTasksInParallel.html">åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡</a></p></blockquote><p><code>yield</code> æŒ‡ä»¤å¯ä»¥å¾ˆç®€å•çš„å°†å¼‚æ­¥æ§åˆ¶æµä»¥åŒæ­¥çš„å†™æ³•è¡¨ç°å‡ºæ¥ï¼Œä½†ä¸æ­¤åŒæ—¶æˆ‘ä»¬å°†ä¹Ÿä¼šéœ€è¦åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥è¿™æ ·å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯å†™æ³•ï¼Œeffects å°†æŒ‰ç…§é¡ºåºæ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">const</span> users = <span class="keyword">yield</span> <span class="title function_">call</span>(fetch, <span class="string">&#x27;/users&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> repos = <span class="keyword">yield</span> <span class="title function_">call</span>(fetch, <span class="string">&#x27;/repos&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ç”±äºç¬¬äºŒä¸ª effect å°†ä¼šåœ¨ç¬¬ä¸€ä¸ª call æ‰§è¡Œå®Œæ¯•æ‰å¼€å§‹ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿™æ ·å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®å†™æ³•, effects å°†ä¼šåŒæ­¥æ‰§è¡Œ</span></span><br><span class="line">*<span class="title function_">effects</span>(<span class="params">&#123;&#125;, &#123; all, call &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [users, repos] = <span class="keyword">yield</span> <span class="title function_">all</span>([</span><br><span class="line">    <span class="title function_">call</span>(fetch, <span class="string">&#x27;/users&#x27;</span>),</span><br><span class="line">    <span class="title function_">call</span>(fetch, <span class="string">&#x27;/repos&#x27;</span>)</span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬éœ€è¦ <code>yield</code> ä¸€ä¸ªåŒ…å« effects çš„æ•°ç»„ï¼Œ generator ä¼šè¢«é˜»å¡ç›´åˆ°æ‰€æœ‰çš„ effects éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œæˆ–è€…å½“ä¸€ä¸ª effect è¢«æ‹’ç» ï¼ˆå°±åƒ <code>Promise.all</code> çš„è¡Œä¸ºï¼‰ã€‚</p><h3 id="put"><a href="#put" class="headerlink" title="put"></a>put</h3><blockquote><p>å‚è€ƒ: <a href="https://github.com/dvajs/dva/issues/2094">yield allä¸­æ”¾putè€Œå‡ºç°çš„é—®é¢˜</a></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*<span class="title function_">effects</span>(<span class="params">&#123;&#125;, &#123; all, call &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [users, repos] = <span class="keyword">yield</span> <span class="title function_">all</span>([</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">put</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;getUsers&#x27;</span> &#125;),</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">put</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;getRepos&#x27;</span> &#125;)</span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨ <code>put.resolve</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*<span class="title function_">effects</span>(<span class="params">&#123;&#125;, &#123; all, call &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [users, repos] = <span class="keyword">yield</span> <span class="title function_">all</span>([</span><br><span class="line">    put.<span class="title function_">resolve</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;getUsers&#x27;</span> &#125;),</span><br><span class="line">    put.<span class="title function_">resolve</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;getRepos&#x27;</span> &#125;)</span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å±€éƒ¨è¦†ç›–antd-æ ·å¼"><a href="#å±€éƒ¨è¦†ç›–antd-æ ·å¼" class="headerlink" title="å±€éƒ¨è¦†ç›–antd æ ·å¼"></a>å±€éƒ¨è¦†ç›–antd æ ·å¼</h2><p>ç”±äºä¸šåŠ¡çš„ä¸ªæ€§åŒ–éœ€æ±‚ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°éœ€è¦è¦†ç›–ç»„ä»¶æ ·å¼çš„æƒ…å†µï¼Œè¿™é‡Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚</p><p>antd Select åœ¨å¤šé€‰çŠ¶æ€ä¸‹ï¼Œé»˜è®¤ä¼šå±•ç¤ºæ‰€æœ‰é€‰ä¸­é¡¹ï¼Œè¿™é‡Œæˆ‘ä»¬ç»™å®ƒåŠ ä¸€ä¸ªé™åˆ¶é«˜åº¦ï¼Œè¶…è¿‡æ­¤é«˜åº¦å°±å‡ºæ»šåŠ¨æ¡ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Select</span></span><br><span class="line">  mode=<span class="string">&quot;multiple&quot;</span></span><br><span class="line">  style=&#123;&#123; <span class="attr">width</span>: <span class="number">300</span> &#125;&#125;</span><br><span class="line">  placeholder=<span class="string">&quot;Please select&quot;</span></span><br><span class="line">  className=&#123;styles.<span class="property">customSelect</span>&#125;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;children&#125;</span><br><span class="line">&lt;/<span class="title class_">Select</span>&gt;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.customSelect</span> &#123;</span><br><span class="line">  :global &#123;</span><br><span class="line">    <span class="selector-class">.ant-select-selection</span> &#123;</span><br><span class="line">      <span class="attribute">max-height</span>: <span class="number">51px</span>;</span><br><span class="line">      <span class="attribute">overflow</span>: auto;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•å¾ˆç®€å•ï¼Œæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ul><li>å¼•å…¥çš„ antd ç»„ä»¶ç±»åæ²¡æœ‰è¢« CSS Modules è½¬åŒ–ï¼Œæ‰€ä»¥è¢«è¦†ç›–çš„ç±»å <code>.ant-select-selection</code> å¿…é¡»æ”¾åˆ° <code>:global</code> ä¸­ã€‚</li><li>å› ä¸ºè¦†ç›–æ˜¯å…¨å±€æ€§çš„ã€‚ä¸ºäº†é˜²æ­¢å¯¹å…¶ä»– Select ç»„ä»¶é€ æˆå½±å“ï¼Œæ‰€ä»¥éœ€è¦åŒ…è£¹é¢å¤–çš„ className é™åˆ¶æ ·å¼çš„ç”Ÿæ•ˆèŒƒå›´ã€‚</li></ul><h2 id="ä¼˜åŒ–åŒ…å¤§å°"><a href="#ä¼˜åŒ–åŒ…å¤§å°" class="headerlink" title="ä¼˜åŒ–åŒ…å¤§å°"></a>ä¼˜åŒ–åŒ…å¤§å°</h2><blockquote><p>å‚è€ƒ: <a href="https://juejin.im/post/5ef8581ce51d4534c14d9a5f">H5 åˆ†åŒ…å®ç°é¦–å±åŠ è½½æ—¶é—´ä¼˜åŒ–</a>ã€<a href="https://juejin.im/post/5c08fe7d6fb9a04a0d56a702">webapck4 ç„å¦™çš„ SplitChunks Plugin</a>ã€<a href="https://github.com/umijs/umi/issues/3535#issuecomment-617590579">è¯·é—®å¦‚ä½•å•ç‹¬æ‰“åŒ…ç»„ä»¶</a></p></blockquote><h3 id="UmiJS-2-x-1"><a href="#UmiJS-2-x-1" class="headerlink" title="UmiJS 2.x"></a>UmiJS 2.x</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// å¿½ç•¥ moment çš„ locale æ–‡ä»¶ï¼Œç”¨äºå‡å°‘å°ºå¯¸ã€‚</span></span><br><span class="line">  <span class="comment">// https://v2.umijs.org/zh/config/#ignoremomentlocale</span></span><br><span class="line">  <span class="attr">ignoreMomentLocale</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// é…ç½®æ˜¯å¦å¼€å¯ treeShakingï¼Œé»˜è®¤å…³é—­ã€‚</span></span><br><span class="line">  <span class="comment">// https://v2.umijs.org/zh/config/#treeshaking</span></span><br><span class="line">  <span class="attr">treeShaking</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// é€šè¿‡ [webpack-chain](https://github.com/mozilla-neutrino/webpack-chain) çš„ API æ‰©å±•æˆ–ä¿®æ”¹ webpack é…ç½®ã€‚</span></span><br><span class="line">  <span class="comment">// https://v2.umijs.org/zh/config/#chainwebpack</span></span><br><span class="line">  <span class="title function_">chainWebpack</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    config.<span class="property">optimization</span>.<span class="title function_">splitChunks</span>(&#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">      <span class="attr">automaticNameDelimiter</span>: <span class="string">&#x27;ï½&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">minSize</span>: <span class="number">30000</span>,</span><br><span class="line">      <span class="attr">minChunks</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">        <span class="attr">echarts</span>: &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;echarts&#x27;</span>,</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/](echarts)[\\/]/</span>,</span><br><span class="line">          <span class="attr">priority</span>: -<span class="number">9</span>,</span><br><span class="line">          <span class="attr">enforce</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">antd</span>: &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;antd&#x27;</span>,</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/](@ant-design|antd|antd-mobile)[\\/]/</span>,</span><br><span class="line">          <span class="attr">priority</span>: -<span class="number">10</span>,</span><br><span class="line">          <span class="attr">enforce</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">vendors</span>: &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;vendors&#x27;</span>,</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">          <span class="attr">priority</span>: -<span class="number">11</span>,</span><br><span class="line">          <span class="attr">enforce</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="comment">// è¿™æ˜¯å®˜æ–¹å°è£…çš„ä¸€ä¸ªæ’ä»¶é›†ï¼ŒåŒ…å« 18 ä¸ªå¸¸ç”¨çš„è¿›é˜¶åŠŸèƒ½ã€‚</span></span><br><span class="line">      <span class="comment">// https://v2.umijs.org/zh/plugin/umi-plugin-react.html#%E5%AE%89%E8%A3%85</span></span><br><span class="line">      <span class="string">&#x27;umi-plugin-react&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// é»˜è®¤æ˜¯ [&#x27;umi&#x27;]ï¼Œå¯ä¿®æ”¹ï¼Œæ¯”å¦‚åšäº† vendors ä¾èµ–æå–ä¹‹åï¼Œä¼šéœ€è¦åœ¨ umi.js ä¹‹å‰åŠ è½½ vendors.js</span></span><br><span class="line">        <span class="comment">// https://v2.umijs.org/zh/plugin/umi-plugin-react.html#chunks</span></span><br><span class="line">        <span class="attr">chunks</span>: [<span class="string">&#x27;vendors&#x27;</span>, <span class="string">&#x27;antd&#x27;</span>, <span class="string">&#x27;echarts&#x27;</span>, <span class="string">&#x27;umi&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="UmiJS-3-x"><a href="#UmiJS-3-x" class="headerlink" title="UmiJS 3.x"></a>UmiJS 3.x</h3><blockquote><p>å‚è€ƒ <a href="https://umijs.org/zh-CN/docs/upgrade-to-umi-3#%E5%8D%87%E7%BA%A7-umi-plugin-react-%E4%B8%BA-umijspreset-react">å‡çº§ umi-plugin-react ä¸º @umijs&#x2F;preset-react</a></p></blockquote><p>ç”±äº Umi 3 çš„é…ç½®æ–¹å¼æ˜¯æ‹å¹³çš„æ–¹å¼ï¼Œè¿˜éœ€è¦ä¿®æ”¹é…ç½®:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// å¿½ç•¥ moment çš„ locale æ–‡ä»¶ï¼Œç”¨äºå‡å°‘å°ºå¯¸ã€‚</span></span><br><span class="line">  <span class="comment">// https://v2.umijs.org/zh/config/#ignoremomentlocale</span></span><br><span class="line">  <span class="attr">ignoreMomentLocale</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// é…ç½®æ˜¯å¦å¼€å¯ treeShakingï¼Œé»˜è®¤å…³é—­ã€‚</span></span><br><span class="line">  <span class="comment">// https://v2.umijs.org/zh/config/#treeshaking</span></span><br><span class="line">  <span class="attr">treeShaking</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// é€šè¿‡ [webpack-chain](https://github.com/mozilla-neutrino/webpack-chain) çš„ API æ‰©å±•æˆ–ä¿®æ”¹ webpack é…ç½®ã€‚</span></span><br><span class="line">  <span class="comment">// https://v2.umijs.org/zh/config/#chainwebpack</span></span><br><span class="line">  <span class="title function_">chainWebpack</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    config.<span class="property">optimization</span>.<span class="title function_">splitChunks</span>(&#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">      <span class="attr">automaticNameDelimiter</span>: <span class="string">&#x27;ï½&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">minSize</span>: <span class="number">30000</span>,</span><br><span class="line">      <span class="attr">minChunks</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">        <span class="attr">echarts</span>: &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;echarts&#x27;</span>,</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/](echarts)[\\/]/</span>,</span><br><span class="line">          <span class="attr">priority</span>: -<span class="number">9</span>,</span><br><span class="line">          <span class="attr">enforce</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">antd</span>: &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;antd&#x27;</span>,</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/](@ant-design|antd|antd-mobile)[\\/]/</span>,</span><br><span class="line">          <span class="attr">priority</span>: -<span class="number">10</span>,</span><br><span class="line">          <span class="attr">enforce</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">vendors</span>: &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;vendors&#x27;</span>,</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">          <span class="attr">priority</span>: -<span class="number">11</span>,</span><br><span class="line">          <span class="attr">enforce</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// https://umijs.org/zh-CN/config#chunks</span></span><br><span class="line">  <span class="attr">chunks</span>: [<span class="string">&#x27;vendors&#x27;</span>, <span class="string">&#x27;antd&#x27;</span>, <span class="string">&#x27;echarts&#x27;</span>, <span class="string">&#x27;umi&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="momentjs"><a href="#momentjs" class="headerlink" title="momentjs"></a>momentjs</h2><h3 id="ä½¿ç”¨ä¸­æ–‡é…ç½®"><a href="#ä½¿ç”¨ä¸­æ–‡é…ç½®" class="headerlink" title="ä½¿ç”¨ä¸­æ–‡é…ç½®"></a>ä½¿ç”¨ä¸­æ–‡é…ç½®</h3><blockquote><p>å‚è€ƒ: <a href="https://blog.csdn.net/hu_lanlan/article/details/91043696">antd designå›½é™…åŒ–é…ç½®ä¸ºä¸­æ–‡æ—¶ï¼Œæ—¥æœŸç»„ä»¶ä¸­æœˆä¸æ˜ŸæœŸæ˜¾ç¤ºä¸ºè‹±æ–‡ï¼Œå…¶ä»–æ˜¾ç¤ºä¸ºä¸­æ–‡</a></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LocaleProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> zh_CN <span class="keyword">from</span> <span class="string">&#x27;antd/lib/locale-provider/zh_CN&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;moment&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;moment/locale/zh-cn&#x27;</span>;</span><br><span class="line"></span><br><span class="line">moment.<span class="title function_">locale</span>(<span class="string">&#x27;zh-cn&#x27;</span>);</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">LocaleProvider</span> <span class="attr">locale</span>=<span class="string">&#123;zh_CN&#125;</span>&gt;</span><span class="tag">&lt;<span class="name">App</span> /&gt;</span><span class="tag">&lt;/<span class="name">LocaleProvider</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure><h3 id="æ›¿æ¢-momentjs"><a href="#æ›¿æ¢-momentjs" class="headerlink" title="æ›¿æ¢ momentjs"></a>æ›¿æ¢ momentjs</h3><blockquote><p>å‚è€ƒ: <a href="https://github.com/ant-design/antd-dayjs-webpack-plugin">antd-dayjs-webpack-plugin</a>ã€<a href="https://ant.design/docs/react/replace-moment-cn">æ›¿æ¢ Moment.js</a>ã€<a href="https://zhuanlan.zhihu.com/p/136510620">åŸºäºumiã€antdçš„å‰ç«¯å·¥ç¨‹ä¼˜åŒ–å®è·µ</a></p></blockquote><p>è¯·å…ˆåˆ é™¤ <code>ignoreMomentLocale: true</code> é…ç½®å†è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add antd-dayjs-webpack-plugin -D</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">chainWebpack</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// antd moment -&gt; dayjs</span></span><br><span class="line">    <span class="comment">// å¦‚æœåœ¨ Ant Design 3.x çš„é¡¹ç›®ä¸­ä½¿ç”¨æœ¬æ’ä»¶ï¼Œéœ€è¦ä¼ å…¥ä»¥ä¸‹é…ç½®ï¼ŒæŒ‡å®š presetã€‚</span></span><br><span class="line">    config.<span class="title function_">plugin</span>(<span class="string">&#x27;moment2dayjs&#x27;</span>).<span class="title function_">use</span>(<span class="string">&#x27;antd-dayjs-webpack-plugin&#x27;</span>, [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">preset</span>: <span class="string">&#x27;antdv3&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœé¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨ä¸­æ–‡è¯­è¨€ï¼Œè¿˜è¦å¼•å…¥dayjsçš„ä¸­æ–‡è¯­è¨€åŒ…å¹¶ä¸antdçš„ConfigProvideré…åˆæœç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®dayjsä¸­æ–‡</span></span><br><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dayjs/locale/zh-cn&#x27;</span></span><br><span class="line">dayjs.<span class="title function_">locale</span>(<span class="string">&#x27;zh-cn&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ConfigProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> zhCN <span class="keyword">from</span> <span class="string">&#x27;antd/lib/locale-provider/zh_CN&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123;children&#125;) =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">ConfigProvider</span> <span class="attr">locale</span>=<span class="string">&#123;zhCN&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">ConfigProvider</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°é…ç½®åï¼Œä½¿ç”¨DatePickerç»„ä»¶æ‹¿åˆ°çš„æ—¥æœŸä¸ä¹‹å‰ä¸€è‡´ï¼Œä½†å¯ä»¥ç›´æ¥ä½¿ç”¨dayjsçš„APIæ“ä½œæ—¥æœŸï¼Œmomentä¸å¤å­˜åœ¨ã€‚æœ€ç»ˆdayjsæ‰“åŒ…ä½“ç§¯ä¸º14.64KBï¼Œå‡å°äº†330KBä¹‹å¤šã€‚</p><p>æ³¨ï¼šç›®å‰<a href="mailto:&#x64;&#97;&#121;&#106;&#x73;&#x40;&#49;&#46;&#x38;&#x2e;&#50;&#x30;">&#x64;&#97;&#121;&#106;&#x73;&#x40;&#49;&#46;&#x38;&#x2e;&#50;&#x30;</a>åæœ‰ä¸ªbugä¼šå¯¼è‡´æ›¿æ¢åWeekPickeræ˜¾ç¤ºä¸æ­£å¸¸ï¼Œ1.8.21ç‰ˆæœ¬ä¹‹åå·²ä¿®å¤ã€‚</p><h2 id="dva-loading-ä½¿ç”¨"><a href="#dva-loading-ä½¿ç”¨" class="headerlink" title="dva-loading ä½¿ç”¨"></a>dva-loading ä½¿ç”¨</h2><blockquote><p>å‚è€ƒ: <a href="https://www.jianshu.com/p/61fe7a57fad4">dva-loading å®è·µç”¨æ³•</a></p></blockquote><p>loading åˆ†ä¸ºå››ç§ä½¿ç”¨æƒ…å†µï¼Œä¸‹é¢ä¾æ¬¡ç”¨ä»£ç å±•ç¤ºï¼š</p><p><strong>1ã€å…¨å±€</strong></p><p>ç›‘å¬çš„æ˜¯åº”ç”¨ä¸­æ‰€æœ‰ effect æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼Œè‹¥æ‰§è¡Œå®Œæ¯•ã€‚loading çš„å€¼å°±å˜ä¸º <code>false</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">const</span> &#123;useSelector,useDispatch&#125; = <span class="string">&#x27;dva&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Spin</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">DemoPage</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;loading&#125; = <span class="title function_">useSelector</span>(<span class="function"><span class="params">stores</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">loading</span>: stores.<span class="property">loading</span></span><br><span class="line">  &#125;))</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Spin</span> <span class="attr">spinning</span>=<span class="string">&#123;loading.global&#125;/</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2ã€model</strong></p><p>ç›‘å¬æŸä¸ªæ¨¡å—çš„æ‰€æœ‰ effect æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼Œè‹¥æ‰§è¡Œå®Œæ¯•ã€‚loading çš„å€¼å°±å˜ä¸º <code>false</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">const</span> &#123;useSelector,useDispatch&#125; = <span class="string">&#x27;dva&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Spin</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">DemoPage</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;loading,demoModel&#125; = <span class="title function_">useSelector</span>(<span class="function"><span class="params">stores</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">loading</span>: stores.<span class="property">loading</span>,</span><br><span class="line">    <span class="attr">demoModel</span>: stores.<span class="property">loading</span>,</span><br><span class="line">  &#125;))</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Spin</span> <span class="attr">spinning</span>=<span class="string">&#123;loading.models.demoModel&#125;/</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3ã€effect:</strong></p><p>ç›‘å¬æŸä¸ª effect æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼Œè‹¥æ‰§è¡Œå®Œæ¯•ã€‚loading çš„å€¼å°±å˜ä¸º <code>false</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">const</span> &#123;useSelector,useDispatch&#125; = <span class="string">&#x27;dva&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Spin</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">DemoPage</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;loading,demoModel&#125; = <span class="title function_">useSelector</span>(<span class="function"><span class="params">stores</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">loading</span>: stores.<span class="property">loading</span>,</span><br><span class="line">    <span class="attr">demoModel</span>: stores.<span class="property">loading</span>,</span><br><span class="line">  &#125;))</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Spin</span> <span class="attr">spinning</span>=<span class="string">&#123;loading.effects[</span>&#x27;<span class="attr">demoModel</span>/<span class="attr">effect1</span>&#x27;]/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4ã€effects</strong></p><p>å¦‚æœæƒ³ç›‘å¬æŸä¸ª model ä¸­çš„æŸå‡ ä¸ª effectï¼Œå¯ä»¥ä½¿ç”¨ <code>||</code> è¿æ¥ï¼Œå½“å…¨éƒ¨æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œè¿”å›çš„æ˜¯ <code>undefined</code>ï¼Œæ‰€ä»¥å¿…é¡»åœ¨æœ«å°¾æ‹¼æ¥ <code>|| false</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">const</span> &#123;useSelector,useDispatch&#125; = <span class="string">&#x27;dva&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Spin</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">DemoPage</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;loading,demoModel&#125; = <span class="title function_">useSelector</span>(<span class="function"><span class="params">stores</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">loading</span>: stores.<span class="property">loading</span>,</span><br><span class="line">    <span class="attr">demoModel</span>: stores.<span class="property">loading</span>,</span><br><span class="line">  &#125;))</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Spin</span> <span class="attr">spinning</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">loading.effects</span>[&#x27;<span class="attr">demoModel</span>/<span class="attr">effect1</span>&#x27;] ||</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">loading.effects</span>[&#x27;<span class="attr">demoModel</span>/<span class="attr">effect3</span>&#x27;] ||</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">loading.effects</span>[&#x27;<span class="attr">demoModel</span>/<span class="attr">effect4</span>&#x27;] || <span class="attr">false</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…³é—­-Umi-UI"><a href="#å…³é—­-Umi-UI" class="headerlink" title="å…³é—­ Umi UI"></a>å…³é—­ Umi UI</h2><p>umi é¡¹ç›®é»˜è®¤å¯åŠ¨ <code>umi ui</code>ï¼Œä¼šå‡ºç°ä¸€ä¸ªminiå›¾æ ‡æ°”æ³¡æµ®åœ¨å³ä¸‹è§’ï¼Œå…³é—­æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ç›´æ¥ç”¨æ ·å¼ <code>display none</code>ã€‚å¦ä¸€ç§æ˜¯åœ¨å¯åŠ¨æ—¶åŠ ä¸Š <code>UMI_UI=none</code> ç¯å¢ƒå˜é‡ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;UMI_UI=none umi dev&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MOCK=none UMI_UI=none umi dev&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> UmiJS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>antd å¼€å‘æŠ€å·§</title>
      <link href="/681c13911f61/"/>
      <url>/681c13911f61/</url>
      
        <content type="html"><![CDATA[<h2 id="Form-è¡¨å•"><a href="#Form-è¡¨å•" class="headerlink" title="Form è¡¨å•"></a>Form è¡¨å•</h2><h3 id="è®©Input-ç»„ä»¶è‡ªåŠ¨è·å–ç„¦ç‚¹"><a href="#è®©Input-ç»„ä»¶è‡ªåŠ¨è·å–ç„¦ç‚¹" class="headerlink" title="è®©Input ç»„ä»¶è‡ªåŠ¨è·å–ç„¦ç‚¹"></a>è®©Input ç»„ä»¶è‡ªåŠ¨è·å–ç„¦ç‚¹</h3><p>æ·»åŠ  <code>autoFocus</code> å±æ€§ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Input</span> autoFocus /&gt;</span><br></pre></td></tr></table></figure><ul><li><a href="https://github.com/ant-design/ant-design/issues/2952">https://github.com/ant-design/ant-design/issues/2952</a></li><li><a href="https://stackoverflow.com/questions/28889826/how-to-set-focus-on-an-input-field-after-rendering">https://stackoverflow.com/questions/28889826/how-to-set-focus-on-an-input-field-after-rendering</a></li></ul><h2 id="Table-è¡¨æ ¼"><a href="#Table-è¡¨æ ¼" class="headerlink" title="Table è¡¨æ ¼"></a>Table è¡¨æ ¼</h2><h3 id="tableç»„ä»¶å¤šé€‰æ—¶ï¼Œä¼šé€‰ä¸­ä¸‹ä¸€é¡µçš„è¡¨æ ¼åŒè¡Œæ•°æ®çš„è§£å†³åŠæ³•"><a href="#tableç»„ä»¶å¤šé€‰æ—¶ï¼Œä¼šé€‰ä¸­ä¸‹ä¸€é¡µçš„è¡¨æ ¼åŒè¡Œæ•°æ®çš„è§£å†³åŠæ³•" class="headerlink" title="tableç»„ä»¶å¤šé€‰æ—¶ï¼Œä¼šé€‰ä¸­ä¸‹ä¸€é¡µçš„è¡¨æ ¼åŒè¡Œæ•°æ®çš„è§£å†³åŠæ³•"></a>tableç»„ä»¶å¤šé€‰æ—¶ï¼Œä¼šé€‰ä¸­ä¸‹ä¸€é¡µçš„è¡¨æ ¼åŒè¡Œæ•°æ®çš„è§£å†³åŠæ³•</h3><blockquote><p>è§£å†³åŠæ³•æ¥è‡ªï¼š<a href="https://blog.csdn.net/weixin_41606276/article/details/99312155">https://blog.csdn.net/weixin_41606276/article/details/99312155</a></p></blockquote><p>ç±»ä¼¼é€‰ä¸­æŸé¡µçš„å‡ è¡Œæ•°æ®ï¼Œåœ¨åˆ é™¤ç­‰æ“ä½œåå…¶ä»–é¡µé¢çš„è¡¨æ ¼æˆ–è€…åˆ é™¤åæœ¬è¡¨æ ¼çš„åŒè¡Œé¡µä¸ºé€‰ä¸­çŠ¶æ€ã€‚è¿™æ˜¯å› ä¸ºæ²¡æœ‰åŒºåˆ†æ¯é¡µè¡¨æ ¼çš„<code>id</code>ã€‚è§£å†³åŠæ³•æ˜¯ç»™ Table åŠ ä¸Š <code>rowKey</code></p><h3 id="defaultExpandAllRows-x3D-true-åˆ·æ–°åä¸å±•å¼€é—®é¢˜"><a href="#defaultExpandAllRows-x3D-true-åˆ·æ–°åä¸å±•å¼€é—®é¢˜" class="headerlink" title="defaultExpandAllRows&#x3D;{true} åˆ·æ–°åä¸å±•å¼€é—®é¢˜"></a>defaultExpandAllRows&#x3D;{true} åˆ·æ–°åä¸å±•å¼€é—®é¢˜</h3><blockquote><p>è§£å†³åŠæ³•æ¥è‡ªï¼š<a href="https://github.com/ant-design/ant-design/issues/4145#issuecomment-271230317">https://github.com/ant-design/ant-design/issues/4145#issuecomment-271230317</a></p></blockquote><p>å€ŸåŠ©äº†keyæ”¹å˜è‡ªåŠ¨å˜æˆæ–°çš„componentï¼Œè™½ç„¶å¯ä»¥è§£å†³é»˜è®¤é—®é¢˜ã€‚ã€‚ä½†æ€»è§‰å¾—ä¸æ˜¯keyæ­£ç¡®çš„ç”¨æ³•</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [data,setData] = <span class="title function_">useState</span>([])</span><br><span class="line"><span class="keyword">const</span> [expandedRowKeys, setExpandedRowKeys] = <span class="title function_">useState</span>([]);</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setExpandedRowKeys</span>(listTableData.<span class="property">list</span>.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span>));</span><br><span class="line">&#125;, [listTableData]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onExpand</span> = (<span class="params">expanded, record</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (expanded) &#123;</span><br><span class="line">    <span class="title function_">setExpandedRowKeys</span>([...expandedRowKeys, record.<span class="property">tableCode</span>]);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">setExpandedRowKeys</span>(expandedRowKeys.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item !== record.<span class="property">tableCode</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setData</span>([&#123;<span class="attr">id</span>:<span class="number">1</span>&#125;,&#123;<span class="attr">id</span>:<span class="number">2</span>&#125;,&#123;<span class="attr">id</span>:<span class="number">3</span>&#125;])</span><br><span class="line">&#125;,[])</span><br><span class="line">...</span><br><span class="line">&lt;<span class="title class_">Table</span></span><br><span class="line">  dataSource=&#123;data&#125;</span><br><span class="line">  rowKey=<span class="string">&quot;id&quot;</span></span><br><span class="line">  expandedRowKeys=&#123;expandedRowKeys&#125;</span><br><span class="line">  onExpand=&#123;onExpand&#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><h3 id="è¡¨æ ¼çš„columnç­›é€‰æ’åºçŠ¶æ€é‡ç½®é—®é¢˜"><a href="#è¡¨æ ¼çš„columnç­›é€‰æ’åºçŠ¶æ€é‡ç½®é—®é¢˜" class="headerlink" title="è¡¨æ ¼çš„columnç­›é€‰æ’åºçŠ¶æ€é‡ç½®é—®é¢˜"></a>è¡¨æ ¼çš„columnç­›é€‰æ’åºçŠ¶æ€é‡ç½®é—®é¢˜</h3><blockquote><p>è§£å†³åŠæ³•æ¥è‡ªï¼š<a href="https://github.com/ant-design/ant-design-pro/issues/3695#issuecomment-642460173">https://github.com/ant-design/ant-design-pro/issues/3695#issuecomment-642460173</a></p></blockquote><p>è¡¨æ ¼è®¾ç½®äº†æ’åºä»¥åŠç­›é€‰ä¹‹å, å½“æˆ‘ä»¬ä»å¤–éƒ¨ç‚¹å‡»æŒ‰é’®åˆ·æ–°dataæ—¶,æ•°æ®åˆ—è¡¨å®é™…å¹¶æ²¡æœ‰ç»è¿‡ç­›é€‰æ’åºã€‚è§£å†³åŠæ³•å¦‚ä¸‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [sortedInfo, setSortedInfo] = <span class="title function_">useState</span>(&#123;&#125;);</span><br><span class="line"><span class="comment">// åˆ†é¡µã€æ’åºã€ç­›é€‰å˜åŒ–æ—¶è§¦å‘</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleTableChange</span> = <span class="keyword">async</span> (<span class="params">pagination, filters, sorter</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setSortedInfo</span>(sorter);</span><br><span class="line">&#125;;</span><br><span class="line">...</span><br><span class="line">&lt;<span class="title class_">Table</span> onChange=&#123;handleTableChange&#125;&gt;</span><br><span class="line">  ...</span><br><span class="line">  &lt;<span class="title class_">Column</span></span><br><span class="line">    title=<span class="string">&quot;æŸ¥çœ‹æ¬¡æ•°&quot;</span></span><br><span class="line">    dataIndex=<span class="string">&quot;queryCount&quot;</span></span><br><span class="line">    key=<span class="string">&quot;queryCount&quot;</span></span><br><span class="line">    sorter</span><br><span class="line">    sortOrder=&#123;sortedInfo.<span class="property">columnKey</span> === <span class="string">&#x27;queryCount&#x27;</span> &amp;&amp; sortedInfo.<span class="property">order</span>&#125;</span><br><span class="line">  /&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/<span class="title class_">Table</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="Table-Row-Hover-æ—¶ä¸æ”¹å˜èƒŒæ™¯"><a href="#Table-Row-Hover-æ—¶ä¸æ”¹å˜èƒŒæ™¯" class="headerlink" title="Table Row Hover æ—¶ä¸æ”¹å˜èƒŒæ™¯"></a>Table Row Hover æ—¶ä¸æ”¹å˜èƒŒæ™¯</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ant-table-thead</span>&gt;<span class="selector-tag">tr</span><span class="selector-class">.ant-table-row-hover</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.ant-table-expanded-row</span>)&gt;<span class="selector-tag">td</span>,</span><br><span class="line"><span class="selector-class">.ant-table-tbody</span>&gt;<span class="selector-tag">tr</span><span class="selector-class">.ant-table-row-hover</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.ant-table-expanded-row</span>)&gt;<span class="selector-tag">td</span>,</span><br><span class="line"><span class="selector-class">.ant-table-thead</span>&gt;<span class="selector-tag">tr</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.ant-table-expanded-row</span>)&gt;<span class="selector-tag">td</span>,</span><br><span class="line"><span class="selector-class">.ant-table-tbody</span>&gt;<span class="selector-tag">tr</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.ant-table-expanded-row</span>)&gt;<span class="selector-tag">td</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: unset; //Change the existing <span class="attribute">color</span> <span class="selector-tag">to</span> `unset`</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Tooltip"><a href="#Tooltip" class="headerlink" title="Tooltip"></a>Tooltip</h2><h3 id="å¦‚ä½•æ›´æ”¹ant-tooltipç»„ä»¶çš„æ–‡æœ¬é¢œè‰²å’ŒèƒŒæ™¯é¢œè‰²"><a href="#å¦‚ä½•æ›´æ”¹ant-tooltipç»„ä»¶çš„æ–‡æœ¬é¢œè‰²å’ŒèƒŒæ™¯é¢œè‰²" class="headerlink" title="å¦‚ä½•æ›´æ”¹ant-tooltipç»„ä»¶çš„æ–‡æœ¬é¢œè‰²å’ŒèƒŒæ™¯é¢œè‰²"></a>å¦‚ä½•æ›´æ”¹ant-tooltipç»„ä»¶çš„æ–‡æœ¬é¢œè‰²å’ŒèƒŒæ™¯é¢œè‰²</h3><blockquote><p>è§£å†³åŠæ³•æ¥è‡ª: <a href="https://www.coder.work/article/3437880">https://www.coder.work/article/3437880</a></p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">:global &#123;</span><br><span class="line">  <span class="selector-class">.ant-tooltip-inner</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.6</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.ant-tooltip-arrow</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.6</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.ant-tooltip-placement-bottom</span> <span class="selector-class">.ant-tooltip-arrow</span>, <span class="selector-class">.ant-tooltip-placement-bottomLeft</span> <span class="selector-class">.ant-tooltip-arrow</span>, <span class="selector-class">.ant-tooltip-placement-bottomRight</span> <span class="selector-class">.ant-tooltip-arrow</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom-color</span>: <span class="number">#000000</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Icon"><a href="#Icon" class="headerlink" title="Icon"></a>Icon</h2><h3 id="è‡ªå®šä¹‰svgå›¾æ ‡"><a href="#è‡ªå®šä¹‰svgå›¾æ ‡" class="headerlink" title="è‡ªå®šä¹‰svgå›¾æ ‡"></a>è‡ªå®šä¹‰svgå›¾æ ‡</h3><blockquote><p>è§£å†³åŠæ³•å‚è€ƒè‡ª: <a href="https://blog.csdn.net/c5211314963/article/details/103371845">https://blog.csdn.net/c5211314963/article/details/103371845</a></p></blockquote><p>å¦‚æœä½ ä»¬çš„ UED åŒå­¦å°±æ˜¯ä¼ ç»™ä½ ä¸€ä¸ª svg å›¾ç‰‡ï¼Œä½ å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼è¿›è¡Œã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Icon</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">PointIconSvg</span> = (<span class="params">&#123; size = <span class="number">1</span>, color = <span class="string">&#x27;#1a37ea&#x27;</span> &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">svg</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">10</span> * <span class="attr">size</span>&#125;<span class="attr">px</span>`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">height</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">13</span> * <span class="attr">size</span>&#125;<span class="attr">px</span>`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">viewBox</span>=<span class="string">&quot;0 0 10 13&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">display:</span> &#x27;<span class="attr">block</span>&#x27; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;æ±¡æŸ“æºæ¡£æ¡ˆ&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;none&quot;</span> <span class="attr">strokeWidth</span>=<span class="string">&quot;1&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">fillRule</span>=<span class="string">&quot;evenodd&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;6ä¼ä¸šè¯¦æƒ…-è¯¦ç»†ä¿¡æ¯-ç¯å¢ƒç®¡ç†-2&quot;</span> <span class="attr">transform</span>=<span class="string">&quot;translate(-698.000000, -746.000000)&quot;</span> <span class="attr">fill</span>=<span class="string">&#123;color&#125;</span> <span class="attr">fillRule</span>=<span class="string">&quot;nonzero&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;åŸºæœ¬ä¿¡æ¯&quot;</span> <span class="attr">transform</span>=<span class="string">&quot;translate(24.000000, 335.000000)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;ç¼–ç»„-7&quot;</span> <span class="attr">transform</span>=<span class="string">&quot;translate(30.000000, 120.000000)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;åœ°å›¾&quot;</span> <span class="attr">transform</span>=<span class="string">&quot;translate(0.000000, 273.000000)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;ç¼–ç»„&quot;</span> <span class="attr">transform</span>=<span class="string">&quot;translate(644.000000, 16.000000)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;ç¼–ç»„-4&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">path</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                      <span class="attr">d</span>=<span class="string">&quot;M4.99877841,2 C2.24285365,2 0,4.29103476 0,7.10616241 C0,9.82395853 4.48082093,14.6506047 4.67139018,14.8552505 C4.75690203,14.9475907 4.87661862,15 5.0012216,15 C5.0036648,15 5.00855119,15 5.01099438,15 C5.13804056,15 5.26020034,14.9401037 5.343269,14.8402764 L6.89469827,13.0259167 C8.95675544,10.4478787 10,8.4563256 10,7.10865809 C10,4.29103476 7.75714636,2 4.99877841,2 Z M4.99877841,9.42714533 C3.74297582,9.42714533 2.7266064,8.38894222 2.7266064,7.10616241 C2.7266064,5.82338261 3.74297582,4.78517949 4.99877841,4.78517949 C6.254581,4.78517949 7.27095042,5.82338261 7.27095042,7.10616241 C7.27095042,8.38894222 6.254581,9.42714533 4.99877841,9.42714533 Z&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                      <span class="attr">id</span>=<span class="string">&quot;å½¢çŠ¶&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    /&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> props =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">Icon</span> <span class="attr">component</span>=<span class="string">&#123;()</span> =&gt;</span> <span class="tag">&lt;<span class="name">PointIconSvg</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span>&#125; /&gt;</span>;</span><br></pre></td></tr></table></figure><h2 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h2><h3 id="ç‚¹å‡»åŠ¨ç”»è¾¹æ¡†cssæ¸…é™¤"><a href="#ç‚¹å‡»åŠ¨ç”»è¾¹æ¡†cssæ¸…é™¤" class="headerlink" title="ç‚¹å‡»åŠ¨ç”»è¾¹æ¡†cssæ¸…é™¤"></a>ç‚¹å‡»åŠ¨ç”»è¾¹æ¡†cssæ¸…é™¤</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">:global&#123;</span><br><span class="line">  <span class="selector-class">.ant-click-animating-without-extra-node</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span> none;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">animation</span>:none <span class="number">0</span> ease <span class="number">0</span> <span class="number">1</span> normal;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> antd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>echarts å¼€å‘æŠ€å·§</title>
      <link href="/95a45272613e/"/>
      <url>/95a45272613e/</url>
      
        <content type="html"><![CDATA[<h2 id="æŸ±çŠ¶å›¾é¢œè‰²æ¸å˜"><a href="#æŸ±çŠ¶å›¾é¢œè‰²æ¸å˜" class="headerlink" title="æŸ±çŠ¶å›¾é¢œè‰²æ¸å˜"></a>æŸ±çŠ¶å›¾é¢œè‰²æ¸å˜</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span></span><br><span class="line">...</span><br><span class="line"><span class="attr">series</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">    <span class="comment">// å›¾å½¢æ ·å¼</span></span><br><span class="line">    <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, [</span><br><span class="line">        &#123; <span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;#178ffc&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#ffffff&#x27;</span> &#125;,</span><br><span class="line">      ]),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">emphasis</span>: &#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, [</span><br><span class="line">        &#123;<span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;#178ffc&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#ffffff&#x27;</span>&#125;</span><br><span class="line">      ])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">],</span><br></pre></td></tr></table></figure><h2 id="æ¨ªåæ ‡å€¼æ˜¾ç¤ºä¸å…¨ï¼ˆè‡ªåŠ¨éšè—ï¼‰"><a href="#æ¨ªåæ ‡å€¼æ˜¾ç¤ºä¸å…¨ï¼ˆè‡ªåŠ¨éšè—ï¼‰" class="headerlink" title="æ¨ªåæ ‡å€¼æ˜¾ç¤ºä¸å…¨ï¼ˆè‡ªåŠ¨éšè—ï¼‰"></a>æ¨ªåæ ‡å€¼æ˜¾ç¤ºä¸å…¨ï¼ˆè‡ªåŠ¨éšè—ï¼‰</h2><p>echartsä¸­ï¼Œæ¨ªè½´æ•°æ®å¦‚æœéå¸¸å¤šï¼Œä¼šè‡ªåŠ¨éšè—ä¸€éƒ¨åˆ†æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å±æ€§ <code>interval</code> æ¥è¿›è¡Œè°ƒæ•´ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">xAxis</span>: &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: labels,</span><br><span class="line">  <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">    <span class="attr">interval</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> echarts </tag>
            
            <tag> å¯è§†åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS ä¸­çš„å±…ä¸­æ“ä½œ</title>
      <link href="/97c353d732f9/"/>
      <url>/97c353d732f9/</url>
      
        <content type="html"><![CDATA[<p>å±…ä¸­çš„æ•ˆæœæ˜¯Webå¼€å‘ä¸­å¸¸è§çš„éœ€æ±‚ï¼Œå‡ ä¹å’Œé˜´å½±ã€åœ†è§’å¯ä»¥å¹¶åˆ—ä¸ºäº§å“ä¸‰å¤§æ³•å®ï¼Œæœ¬æ–‡çš„ç›®çš„æ˜¯æ‹é¡ºå¼€å‘ä¸­å¸¸ç”¨çš„å±…ä¸­è®¡è¾ƒï¼Œæ–¹ä¾¿è®°å¿†å’Œæ—¥åæŸ¥é˜…ã€‚ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæœ¬æ–‡æ‰€æœ‰ demo ä½¿ç”¨ React çš„ CSS-in-JS è¯­æ³•å®Œæˆã€‚</p><h2 id="å•è¡Œæ–‡æœ¬"><a href="#å•è¡Œæ–‡æœ¬" class="headerlink" title="å•è¡Œæ–‡æœ¬"></a>å•è¡Œæ–‡æœ¬</h2><h3 id="heightã€lineHeightã€textAlign"><a href="#heightã€lineHeightã€textAlign" class="headerlink" title="heightã€lineHeightã€textAlign"></a>heightã€lineHeightã€textAlign</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">boxSizing</span>: <span class="string">&#x27;border-box&#x27;</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;300px&#x27;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;purple&#x27;</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">    <span class="attr">textAlign</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">lineHeight</span>: <span class="string">&#x27;98px&#x27;</span>,</span><br><span class="line">    <span class="attr">border</span>: <span class="string">&#x27;1px solid red&#x27;</span>,</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">  å•è¡Œæ–‡æœ¬</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="Flex"><a href="#Flex" class="headerlink" title="Flex"></a>Flex</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;300px&#x27;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;purple&#x27;</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">    <span class="attr">display</span>: <span class="string">&#x27;flex&#x27;</span>,</span><br><span class="line">    <span class="attr">justifyContent</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">  å•è¡Œæ–‡æœ¬</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="å¤šè¡Œæ–‡æœ¬å±…ä¸­"><a href="#å¤šè¡Œæ–‡æœ¬å±…ä¸­" class="headerlink" title="å¤šè¡Œæ–‡æœ¬å±…ä¸­"></a>å¤šè¡Œæ–‡æœ¬å±…ä¸­</h2><h3 id="table-cellã€vertical-align"><a href="#table-cellã€vertical-align" class="headerlink" title="table-cellã€vertical-align"></a>table-cellã€vertical-align</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">boxSizing</span>: <span class="string">&#x27;border-box&#x27;</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;300px&#x27;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;purple&#x27;</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">    <span class="attr">display</span>: <span class="string">&#x27;table-cell&#x27;</span>,</span><br><span class="line">    <span class="attr">verticalAlign</span>: <span class="string">&#x27;middle&#x27;</span>,</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">  å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="Flex-1"><a href="#Flex-1" class="headerlink" title="Flex"></a>Flex</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;300px&#x27;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;purple&#x27;</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">    <span class="attr">display</span>: <span class="string">&#x27;flex&#x27;</span>,</span><br><span class="line">    <span class="attr">justifyContent</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">  å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡æœ¬</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="å›¾ç‰‡å±…ä¸­"><a href="#å›¾ç‰‡å±…ä¸­" class="headerlink" title="å›¾ç‰‡å±…ä¸­"></a>å›¾ç‰‡å±…ä¸­</h2><h3 id="table-cellã€verticalAlignã€textAlign"><a href="#table-cellã€verticalAlignã€textAlign" class="headerlink" title="table-cellã€verticalAlignã€textAlign"></a>table-cellã€verticalAlignã€textAlign</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;300px&#x27;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;purple&#x27;</span>,</span><br><span class="line">    <span class="attr">display</span>: <span class="string">&#x27;table-cell&#x27;</span>,</span><br><span class="line">    <span class="attr">verticalAlign</span>: <span class="string">&#x27;middle&#x27;</span>,</span><br><span class="line">    <span class="attr">textAlign</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://iph.href.lu/50x50&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="Flex-2"><a href="#Flex-2" class="headerlink" title="Flex"></a>Flex</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;300px&#x27;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;purple&#x27;</span>,</span><br><span class="line">    <span class="attr">display</span>: <span class="string">&#x27;flex&#x27;</span>,</span><br><span class="line">    <span class="attr">justifyContent</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://iph.href.lu/50x50&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="å—çº§å…ƒç´ "><a href="#å—çº§å…ƒç´ " class="headerlink" title="å—çº§å…ƒç´ "></a>å—çº§å…ƒç´ </h2><h3 id="å­ç»çˆ¶ç›¸"><a href="#å­ç»çˆ¶ç›¸" class="headerlink" title="å­ç»çˆ¶ç›¸"></a>å­ç»çˆ¶ç›¸</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;300px&#x27;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;purple&#x27;</span>,</span><br><span class="line">    <span class="attr">position</span>: <span class="string">&#x27;relative&#x27;</span>,</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">background:</span> &#x27;#<span class="attr">fff</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width:</span> &#x27;<span class="attr">50px</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">height:</span> &#x27;<span class="attr">50px</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">position:</span> &#x27;<span class="attr">absolute</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">left:</span> &#x27;<span class="attr">50</span>%&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">top:</span> &#x27;<span class="attr">50</span>%&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">transform:</span> &#x27;<span class="attr">translate</span>(<span class="attr">-50</span>%,<span class="attr">-50</span>%)&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  /&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="Flex-3"><a href="#Flex-3" class="headerlink" title="Flex"></a>Flex</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;300px&#x27;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;purple&#x27;</span>,</span><br><span class="line">    <span class="attr">display</span>: <span class="string">&#x27;flex&#x27;</span>,</span><br><span class="line">    <span class="attr">justifyContent</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">background:</span> &#x27;#<span class="attr">fff</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width:</span> &#x27;<span class="attr">50px</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">height:</span> &#x27;<span class="attr">50px</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  /&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Native çƒ­æ›´æ–°ä¸æ±‚äºº</title>
      <link href="/2233b15714d5/"/>
      <url>/2233b15714d5/</url>
      
        <content type="html"><![CDATA[<h2 id="code-push-server"><a href="#code-push-server" class="headerlink" title="code-push-server"></a>code-push-server</h2><!-- TODO code-push-server æ­å»º --><h2 id="code-push-cli"><a href="#code-push-cli" class="headerlink" title="code-push-cli"></a>code-push-cli</h2><p>ç”±äº <code>appcenter-cli</code> åªæ”¯æŒå¾®è½¯å®˜æ–¹çš„ CodePush æœåŠ¡ï¼Œå› æ­¤æˆ‘ä»¬åªå¥½ç»§ç»­ä½¿ç”¨ code-push-cliã€‚</p><h3 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">code-push login http://192.168.2.119:3000/</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šå¼¹å‡ºé¡µé¢è®©ä½ å¡«å†™å¯†ç ï¼Œä»¥æ­¤è·å– <code>accessKey</code>ï¼Œå°†è·å–çš„<code>accessKey</code>å¡«å›å‘½ä»¤è¡Œï¼Œå³å¯ç™»å½•æˆåŠŸï¼Œè®°ä½è¿™ä¸ª <code>accessKey</code>ï¼Œä¸‹æ¬¡å³å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç›´æ¥ç™»å½•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">code-push login http://192.168.2.119:3000/ --accessKey 8CB9b37oz6CuHyW2vwsDaXut6biy4ksvOXqog</span></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ åº”ç”¨"><a href="#æ·»åŠ åº”ç”¨" class="headerlink" title="æ·»åŠ åº”ç”¨"></a>æ·»åŠ åº”ç”¨</h3><blockquote><p><code>code-push app add &lt;appName&gt; &lt;os&gt; &lt;platform&gt;</code></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">code-push app add ios_myapp ios react-native</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">code-push app add android_myapp Android react-native</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¦‚æœä½ çš„åº”ç”¨åˆ†ä¸º Android å’Œ ios ç‰ˆï¼Œé‚£ä¹ˆæ³¨å†Œåº”ç”¨çš„æ—¶å€™éœ€è¦æ³¨å†Œä¸¤ä¸ª App è·å–ä¸¤å¥— <code>deployment key</code>ï¼Œå¯ä»¥é€šè¿‡ <code>code-push deployment ls &lt;appName&gt; -k</code> è·å–éƒ¨ç½²çš„å¯†é’¥</p></blockquote><h3 id="æ“ä½œåº”ç”¨"><a href="#æ“ä½œåº”ç”¨" class="headerlink" title="æ“ä½œåº”ç”¨"></a>æ“ä½œåº”ç”¨</h3><ul><li>ç§»é™¤åº”ç”¨ï¼š<code>code-push app remove|rm &lt;appName&gt;</code></li><li>é‡å‘½ååº”ç”¨ï¼š<code>code-push app rename &lt;currentAppName&gt; &lt;newAppName&gt;</code></li><li>åº”ç”¨åˆ—è¡¨ï¼š<code>code-push app list|ls</code></li></ul><h3 id="æ·»åŠ éƒ¨ç½²"><a href="#æ·»åŠ éƒ¨ç½²" class="headerlink" title="æ·»åŠ éƒ¨ç½²"></a>æ·»åŠ éƒ¨ç½²</h3><p>æ·»åŠ åº”ç”¨åï¼Œå®ƒé»˜è®¤åŒ…å«ä¸¤ä¸ªéƒ¨ç½²ç¯å¢ƒï¼š<code>Staging</code> å’Œ <code>Production</code> ã€‚è¿™è®©ä½ å¯ä»¥ç†è§£å‘å¸ƒæ›´æ–°åˆ°ä¸€ä¸ªå†…éƒ¨çš„ç¯å¢ƒï¼Œä½ å¯ä»¥åœ¨æ¨é€åˆ°ç»ˆç«¯ç”¨æˆ·ä¹‹å‰å½»åº•çš„æµ‹è¯•æ¯ä¸ªæ›´æ–°ã€‚è¿™ä¸ªå·¥ä½œæµæ˜¯è‡³å…³é‡è¦çš„ï¼Œä»¥ç¡®ä¿ä½ çš„ç‰ˆæœ¬å‡†å¤‡å¥½ç»™å¤§ä¼—ï¼Œè€Œä¸”è¿™æ˜¯ä¸€ä¸ªåœ¨Webä¸Šå®è·µå¾ˆä¹…çš„æƒ¯ä¾‹ã€‚</p><p>å¦‚æœä½ çš„Appæœ‰ <code>Staging</code> å’Œ <code>Production</code> ç¯å¢ƒå…¶å®å·²ç»æ»¡è¶³äº†ä½ çš„éœ€æ±‚ï¼Œç„¶åä½ ä¸éœ€è¦åšä»»ä½•äº‹æƒ…ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ éœ€è¦ <code>alpha</code>ï¼Œ<code>dev</code>ç­‰éƒ¨ç½²ç¯å¢ƒï¼Œé‚£ä½ å¯ä»¥ç®€å•çš„ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">code-push deployment add &lt;appName&gt; &lt;deploymentName&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ“ä½œéƒ¨ç½²"><a href="#æ“ä½œéƒ¨ç½²" class="headerlink" title="æ“ä½œéƒ¨ç½²"></a>æ“ä½œéƒ¨ç½²</h3><ul><li><code>code-push deployment clear &lt;appName&gt; &lt;deploymentName&gt;</code>ï¼š æ¸…é™¤éƒ¨ç½²å†å²</li><li><code>code-push deployment remove|rm &lt;appName&gt; &lt;deploymentName&gt;</code>ï¼šåˆ é™¤ä¸€ä¸ªéƒ¨ç½²</li><li><code>code-push deployment rename &lt;appName&gt; &lt;currentDeploymentName&gt; &lt;newDeploymentName&gt;</code>ï¼šé‡å‘½åéƒ¨ç½²</li><li><code>code-push deployment list|ls &lt;appName&gt; [options]</code>ï¼šéƒ¨ç½²åˆ—è¡¨<ul><li><code>--format</code> ï¼šOutput format to display your deployments with (<code>&quot;json&quot;</code>or <code>&quot;table&quot;</code>) [å­—ç¬¦ä¸²] [é»˜è®¤å€¼: <code>&quot;table&quot;</code>]</li><li><code>--displayKeys</code>,<code> -k</code>ï¼š Specifies whether to display the deployment keys [å¸ƒå°”] [é»˜è®¤å€¼: <code>false</code>]</li></ul></li><li><code>code-push deployment history|h &lt;appName&gt; &lt;deploymentName&gt; [options]</code>ï¼šæŸ¥çœ‹å‘å¸ƒçš„å†å²è®°å½•<ul><li><code>--format</code>ï¼šOutput format to display the release history with (<code>&quot;json&quot;</code> or <code>&quot;table&quot;</code>) [å­—ç¬¦ä¸²] [é»˜è®¤å€¼: <code>&quot;table&quot;</code>]</li><li><code>--displayAuthor</code>,<code> -a</code>ï¼šSpecifies whether to display the release author [å¸ƒå°”] [é»˜è®¤å€¼: <code>false</code>]</li></ul></li></ul><h3 id="å‘å¸ƒéƒ¨ç½²"><a href="#å‘å¸ƒéƒ¨ç½²" class="headerlink" title="å‘å¸ƒéƒ¨ç½²"></a>å‘å¸ƒéƒ¨ç½²</h3><ul><li><code>code-push release-react &lt;appName&gt; &lt;platform&gt; [options]</code>: å‘å¸ƒæ–°çš„çƒ­æ›´æ–°ç‰ˆæœ¬<ul><li><code>code-push release-react android_myapp android --gradleFile=android/app/build.gradle</code></li><li><code>code-push release-react ios_myapp ios --plistFile=ios/betty/Info.plist</code></li></ul></li></ul><p>å…¶ä¸­å‚æ•° <code>-t</code> ä¸ºäºŒè¿›åˆ¶(<code>.ipa</code>ä¸<code>apk</code>)å®‰è£…åŒ…çš„çš„ç‰ˆæœ¬ï¼Œå»ºè®®åŠ¨æ€è¯»ï¼›<code>--dev</code> ä¸ºæ˜¯å¦å¯ç”¨å¼€å‘è€…æ¨¡å¼(é»˜è®¤ä¸º<code>false</code>)ï¼›<code>â€“d</code> æ˜¯è¦å‘å¸ƒæ›´æ–°çš„ç¯å¢ƒåˆ† <code>Production</code> ä¸ <code>Staging</code> (é»˜è®¤ä¸º <code>Staging</code>)ï¼›<code>--des</code> ä¸ºæ›´æ–°è¯´æ˜ï¼›<code>â€“m</code> æ˜¯å¼ºåˆ¶æ›´æ–°ã€‚</p><h2 id="react-native-code-push"><a href="#react-native-code-push" class="headerlink" title="react-native-code-push"></a>react-native-code-push</h2><h3 id="å®‰è£…ç»„ä»¶"><a href="#å®‰è£…ç»„ä»¶" class="headerlink" title="å®‰è£…ç»„ä»¶"></a>å®‰è£…ç»„ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add react-native-code-push</span></span><br></pre></td></tr></table></figure><h3 id="iOSè®¾ç½®"><a href="#iOSè®¾ç½®" class="headerlink" title="iOSè®¾ç½®"></a>iOSè®¾ç½®</h3><p>è·å¾— CodePush æ’ä»¶åï¼Œå¿…é¡»å°†å…¶é›†æˆåˆ° React Native åº”ç”¨ç¨‹åºçš„ Xcode é¡¹ç›®ä¸­å¹¶æ­£ç¡®é…ç½®ã€‚</p><ol><li><p>è¿è¡Œ<code>cd ios &amp;&amp; pod install &amp;&amp; cd ..</code>ä»¥å®‰è£…æ‰€æœ‰å¿…éœ€çš„CocoaPodsä¾èµ–é¡¹ã€‚</p></li><li><p>æ‰“å¼€<code>AppDelegate.m</code>æ–‡ä»¶ï¼Œå¹¶ä¸ºCodePushæ ‡å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;CodePush/CodePush.h&gt;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥æ‰¾ä»¥ä¸‹ä»£ç è¡Œï¼Œè¯¥ä»£ç ä¸ºç”Ÿäº§ç‰ˆæœ¬çš„ç½‘æ¡¥è®¾ç½®æºURLï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return [[NSBundle mainBundle] URLForResource:@&quot;main&quot; withExtension:@&quot;jsbundle&quot;];</span><br></pre></td></tr></table></figure></li><li><p>ç”¨ä»¥ä¸‹è¡Œæ›¿æ¢å®ƒï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return [CodePush bundleURL];</span><br></pre></td></tr></table></figure><p>æ­¤æ›´æ”¹å°†ä½ çš„åº”ç”¨é…ç½®ä¸ºå§‹ç»ˆåŠ è½½åº”ç”¨JSæ†ç»‘åŒ…çš„æœ€æ–°ç‰ˆæœ¬ã€‚åœ¨é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œè¿™å°†ä¸ä½¿ç”¨è¯¥åº”ç”¨ç¨‹åºç¼–è¯‘çš„æ–‡ä»¶ç›¸å¯¹åº”ã€‚ä½†æ˜¯ï¼Œåœ¨é€šè¿‡CodePushæ¨é€æ›´æ–°åï¼Œè¿™å°†è¿”å›æœ€è¿‘å®‰è£…çš„æ›´æ–°çš„ä½ç½®ã€‚</p><p>é€šå¸¸ï¼Œæ‚¨åªæƒ³ä½¿ç”¨ CodePush æ¥è§£å†³å‘è¡Œç‰ˆæœ¬ä¸­çš„ JS åŒ…ä½ç½®ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨<code>DEBUG</code>é¢„å¤„ç†å™¨å®åœ¨æ˜¯å¦ä½¿ç”¨æ‰“åŒ…ç¨‹åºæœåŠ¡å™¨å’Œ CodePush ä¹‹é—´è¿›è¡ŒåŠ¨æ€åˆ‡æ¢ã€‚è¿™æ ·å¯ä»¥æ›´è½»æ¾åœ°ç¡®ä¿æ‚¨åœ¨ç”Ÿäº§ä¸­è·å¾—æ‰€éœ€çš„æ­£ç¡®è¡Œä¸ºï¼ŒåŒæ—¶ä»å¯ä»¥åœ¨è°ƒè¯•æ—¶ä½¿ç”¨Chromeå¼€å‘å·¥å…·ï¼Œå®æ—¶é‡æ–°åŠ è½½ç­‰ã€‚</p><p>ä½ çš„<code>sourceURLForBridge</code>æ–¹æ³•åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (NSURL *)sourceURLForBridge:(RCTBridge *)bridge</span><br><span class="line">&#123;</span><br><span class="line">  #if DEBUG</span><br><span class="line">    return [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@&quot;index&quot; fallbackResource:nil];</span><br><span class="line">  #else</span><br><span class="line">    return [CodePush bundleURL];</span><br><span class="line">  #endif</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å°†éƒ¨ç½²å¯†é’¥æ·»åŠ åˆ°<code>Info.plist</code>ï¼š</p><p>ä¸ºäº†è®© CodePush è¿è¡Œæ—¶çŸ¥é“åº”è¯¥é’ˆå¯¹å“ªä¸ªéƒ¨ç½²æŸ¥è¯¢æ›´æ–°ï¼Œè¯·æ‰“å¼€ä½ çš„åº”ç”¨çš„ <code>Info.plist</code> æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªåä¸º<code>CodePushDeploymentKey</code>çš„æ–°æ¡ç›®ï¼Œå…¶å€¼æ˜¯ä½ è¦é…ç½®çš„åº”ç”¨çš„ <code>Staging Deployment Key</code>ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ <code>code-push deployment ls &lt;appName&gt; -k</code> æ¥æ£€ç´¢è¿™ä¸ªå€¼ï¼ˆè¯¥ <code>-k</code> æ ‡å¿—æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹ä¸ä¼šæ˜¾ç¤ºé”®ï¼‰ï¼Œç„¶åå¤åˆ¶ç›¸å¯¹åº”çš„ <code>Deployment Key</code> å³å¯ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2020/2/27/170823d9cfe4d5ba?w=1764&h=414&f=png&s=250595"></p><p>ä¸ºäº†æœ‰æ•ˆåˆ©ç”¨ä¸ CodePush åº”ç”¨ç¨‹åºä¸€èµ·åˆ›å»ºçš„ <code>Staging</code> å’Œ <code>Production</code> éƒ¨ç½²ï¼Œè¯·åœ¨å®é™…å°†ä½ çš„åº”ç”¨ç¨‹åºå¯¹ CodePush çš„ä½¿ç”¨ç§»å…¥ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œè¿›è¡Œ<strong>å¤šéƒ¨ç½²æµ‹è¯•</strong>çš„é…ç½®ã€‚</p></li></ol><h4 id="å¤šéƒ¨ç½²æµ‹è¯•"><a href="#å¤šéƒ¨ç½²æµ‹è¯•" class="headerlink" title="å¤šéƒ¨ç½²æµ‹è¯•"></a>å¤šéƒ¨ç½²æµ‹è¯•</h4><blockquote><p>è¯¥éƒ¨åˆ†é€‚ç”¨äº Xcode 11</p></blockquote><p>Xcode å…è®¸ä½ ä¸ºæ¯ä¸ª<strong>é…ç½®</strong> (å¦‚ <code>debug</code>, <code>release</code>) è‡ªå®šä¹‰æ„å»ºè®¾ç½®ï¼Œç„¶åå¯ä»¥å°†å…¶å¼•ç”¨ä¸º <code>Info.plist</code> æ–‡ä»¶ä¸­çš„é”®å€¼ï¼ˆå¦‚ <code>CodePushDeploymentKey</code> è®¾ç½®ï¼‰ã€‚æ­¤æœºåˆ¶æ˜¯æ‚¨å¯ä»¥è½»æ¾åœ°è¿›è¡Œæ„å»ºé…ç½®ä»¥ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶è¢«é…ç½®ä¸ºä¸ä¸åŒçš„ CodePush éƒ¨ç½²åŒæ­¥ã€‚</p><p>è¦è¿›è¡Œè®¾ç½®ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p>æ‰“å¼€æ‚¨çš„ Xcode é¡¹ç›®ï¼Œç„¶ååœ¨ <code>Project navigator</code> çª—å£ä¸­é€‰æ‹©æ‚¨çš„é¡¹ç›®</p></li><li><p>ç¡®ä¿å·²é€‰æ‹© <code>PROJECT</code> èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ <code>TARGETS</code></p></li><li><p>é€‰æ‹© <code>Info</code> æ ‡ç­¾</p></li><li><p>ç‚¹å‡» <code>+</code> çš„å†…éƒ¨æŒ‰é’®<code>Duplicate &quot;Release&quot; Configuration</code><br> <img src="https://user-gold-cdn.xitu.io/2020/3/9/170bb342a289a24a?w=1026&h=366&f=png&s=63534"></p></li><li><p>å°†æ–°é…ç½®å‘½åä¸º <code>Staging</code>ï¼ˆæˆ–æ‚¨å–œæ¬¢çš„ä»»ä½•åç§°ï¼‰</p></li><li><p>é€‰æ‹© <code>Build Settings</code> é€‰é¡¹å¡</p></li><li><p>å•å‡»å·¥å…·æ ä¸Šçš„ <code>+</code> æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º  <code>CONFIGURATION_BUILD_DIR</code> çš„ <code>User-Defined Setting</code>, ä½¿ç”¨ç›¸åŒçš„ <code>per-configuration</code> é…ç½®ã€‚</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(BUILD_DIR)/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME)`ä¸º`$(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)`</span></span><br></pre></td></tr></table></figure></li></ol><p><img src="https://user-gold-cdn.xitu.io/2020/3/9/170bb34307cf8b7f?w=1058&h=316&f=png&s=99721"></p><blockquote><p>æ³¨æ„ï¼šæ¯æ¬¡åˆ›å»ºè¿™ä¸ª Xcode éƒ½ä¼šå´©æºƒï¼Œåªèƒ½å…ˆæŠŠå€¼å†™å…¥ä¹‹åï¼Œåœ¨ <code>project.pbxproj</code> ä¸­æ–°å»ºã€‚</p></blockquote><ol start="8"><li><p>ç‚¹å‡»å·¥å…·æ çš„ <code>+</code>  å¹¶é€‰æ‹© <code>Add User-Defined Setting</code></p><p><img src="https://user-gold-cdn.xitu.io/2020/3/9/170bb342a1fca283?w=1308&h=228&f=png&s=62560"></p></li><li><p>å°†æ­¤æ–°è®¾ç½®å‘½åä¸º<code>CodePushDeploymentKey</code>ï¼Œå±•å¼€å®ƒï¼Œç„¶åä¸º <code>Staging </code>é…ç½®æŒ‡å®šæ‚¨çš„ <code>Staging</code> éƒ¨ç½²å¯†é’¥ï¼Œä¸º <code>Release</code> é…ç½®æŒ‡å®šæ‚¨çš„ <code>Production</code> éƒ¨ç½²å¯†é’¥ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2020/3/9/170bb342d671ab43?w=890&h=172&f=png&s=67687"></p><blockquote><p>æé†’ä¸€ä¸‹ï¼Œæ‚¨å¯ä»¥é€šè¿‡<code>appcenter codepush deployment list -a &lt;ownerName&gt;/&lt;appName&gt; --displayKeys</code>ä»ç»ˆç«¯è¿è¡Œæ¥æ£€ç´¢è¿™äº›é”®ã€‚</p></blockquote></li><li><p>æ‰“å¼€é¡¹ç›®çš„ <code>Info.plist</code> æ–‡ä»¶ï¼Œç„¶åå°†<code>CodePushDeploymentKey</code>æ¡ç›®çš„å€¼æ›´æ”¹ä¸º<code>$(CODEPUSH_KEY)</code></p><p><img src="https://user-gold-cdn.xitu.io/2020/3/9/170bb342f42a6b4e?w=890&h=110&f=png&s=29574"></p></li></ol><p>å°±æ˜¯è¿™æ ·äº†ï¼Œç°åœ¨å½“ä½ è¿è¡Œæˆ–æ„å»ºä½ çš„Appï¼Œä½ çš„ <code>Staging</code> åŒ…å°†è‡ªåŠ¨åŒæ­¥ä½ çš„ <code>Staging</code> éƒ¨ç½²ï¼Œä½ çš„ <code>Release</code> åŒ…å°†è‡ªåŠ¨åŒæ­¥ä½ çš„ <code>Production</code> éƒ¨ç½²ã€‚</p><h3 id="Androidè®¾ç½®"><a href="#Androidè®¾ç½®" class="headerlink" title="Androidè®¾ç½®"></a>Androidè®¾ç½®</h3><p>ä¸ºäº†å°†CodePushé›†æˆåˆ°æ‚¨çš„Androidé¡¹ç›®ä¸­ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p>åœ¨<code>android/app/build.gradle</code>æ–‡ä»¶ä¸­ï¼Œå°†æ–‡ä»¶<code>codepush.gradle</code>æ·»åŠ ä¸ºä¸‹é¢çš„å…¶ä»–æ„å»ºä»»åŠ¡å®šä¹‰ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">apply <span class="attr">from:</span> <span class="string">&quot;../../node_modules/react-native-code-push/android/codepush.gradle&quot;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p><code>MainApplication.java</code>é€šè¿‡ä»¥ä¸‹æ›´æ”¹æ›´æ–°æ–‡ä»¶ä»¥ä½¿ç”¨ CodePushï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">// 1. å¯¼å…¥æ’ä»¶çš„ç±»</span></span><br><span class="line"><span class="keyword">import</span> com.microsoft.codepush.react.CodePush;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApplication</span> <span class="keyword">extends</span> <span class="title class_">Application</span> <span class="keyword">implements</span> <span class="title class_">ReactApplication</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReactNativeHost</span> <span class="variable">mReactNativeHost</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReactNativeHost</span>(<span class="built_in">this</span>) &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// 2. é‡å†™ getJSBundleFile æ–¹æ³•ï¼Œæ¯æ¬¡ app å¯åŠ¨çš„æ—¶å€™è®© CodePush è¿è¡Œæ—¶å†³å®šä»å“ªé‡ŒåŠ è½½ JS bundle</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> String <span class="title function_">getJSBundleFile</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> CodePush.getJSBundleFile();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å°†éƒ¨ç½²å¯†é’¥æ·»åŠ åˆ°<code>strings.xml</code>ï¼š</p><p>ä¸ºäº†è®© CodePush è¿è¡Œæ—¶çŸ¥é“å®ƒåº”è¯¥æŸ¥è¯¢å“ªäº›éƒ¨ç½²æ›´æ–°ï¼Œè¯·æ‰“å¼€æ‚¨çš„åº”ç”¨ç¨‹åºçš„ <code>string.xml</code> æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªåä¸º <code>CodePushDeploymentKey</code> çš„æ–°å­—ç¬¦ä¸²ï¼Œå®ƒçš„å€¼æ˜¯åº”ç”¨çš„ <code>Staging</code> éƒ¨ç½²ã€‚ä½ å¯ä»¥é€šè¿‡ <code>appcenter deployment list &lt;ownerName&gt;/&lt;appName&gt; -k</code> è·å–è¯¥å€¼ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2020/2/27/170823d9cfe4d5ba?w=1764&h=414&f=png&s=250595"></p><p>æ‚¨<code>strings.xml</code>åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;app_name&quot;</span>&gt;</span>AppName<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">moduleConfig</span>=<span class="string">&quot;true&quot;</span> <span class="attr">name</span>=<span class="string">&quot;CodePushDeploymentKey&quot;</span>&gt;</span>DeploymentKey<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†æœ‰æ•ˆåˆ©ç”¨ä¸CodePushåº”ç”¨ç¨‹åºä¸€èµ·åˆ›å»ºçš„<code>Staging</code>å’Œ<code>Production</code>éƒ¨ç½²ï¼Œè¯·åœ¨å®é™…å°†æ‚¨çš„åº”ç”¨ç¨‹åºå¯¹CodePushçš„ä½¿ç”¨ç§»å…¥ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œè¯·å‚è€ƒä¸‹é¢çš„<strong>å¤šéƒ¨ç½²æµ‹è¯•</strong>ã€‚</p></li></ol><h4 id="å¤šéƒ¨ç½²æµ‹è¯•-1"><a href="#å¤šéƒ¨ç½²æµ‹è¯•-1" class="headerlink" title="å¤šéƒ¨ç½²æµ‹è¯•"></a>å¤šéƒ¨ç½²æµ‹è¯•</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">  ...</span><br><span class="line">  buildTypes &#123;</span><br><span class="line">    debug &#123;</span><br><span class="line">      signingConfig signingConfigs.debug</span><br><span class="line">      <span class="comment">// Note: CodePush updates should not be tested in Debug mode as they are overriden by the RN packager. However, because CodePush checks for updates in all modes, we must supply a key.</span></span><br><span class="line">      resValue <span class="string">&quot;string&quot;</span>, <span class="string">&quot;CodePushDeploymentKey&quot;</span>, <span class="string">&#x27;&quot;&quot;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    release &#123;</span><br><span class="line">      <span class="comment">// Caution! In production, you need to generate your own keystore file.</span></span><br><span class="line">      <span class="comment">// see https://facebook.github.io/react-native/docs/signed-apk-android.</span></span><br><span class="line">      signingConfig signingConfigs.release</span><br><span class="line">      minifyEnabled enableProguardInReleaseBuilds</span><br><span class="line">      proguardFiles getDefaultProguardFile(<span class="string">&quot;proguard-android.txt&quot;</span>), <span class="string">&quot;proguard-rules.pro&quot;</span></span><br><span class="line">      resValue <span class="string">&quot;string&quot;</span>, <span class="string">&quot;CodePushDeploymentKey&quot;</span>, <span class="string">&#x27;&quot;&quot;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    releaseStaging.initWith(release)</span><br><span class="line">    releaseStaging &#123;</span><br><span class="line">        resValue <span class="string">&quot;string&quot;</span>, <span class="string">&quot;CodePushDeploymentKey&quot;</span>, <span class="string">&#x27;&quot;&quot;&#x27;</span></span><br><span class="line">        <span class="comment">// Note: It is a good idea to provide matchingFallbacks for the new buildType you create to prevent build issues</span></span><br><span class="line">        <span class="comment">// Add the following line if not already there</span></span><br><span class="line">        matchingFallbacks = [<span class="string">&#x27;release&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŠ¨æ€éƒ¨ç½²åˆ†é…"><a href="#åŠ¨æ€éƒ¨ç½²åˆ†é…" class="headerlink" title="åŠ¨æ€éƒ¨ç½²åˆ†é…"></a>åŠ¨æ€éƒ¨ç½²åˆ†é…</h2><p>ä¸Šä¸€èŠ‚è¯´æ˜äº†å¦‚ä½•åˆ©ç”¨å¤šä¸ª<code>CodePush</code>éƒ¨ç½²ï¼Œä»¥ä¾¿åœ¨æ›´æ–°å‘å¸ƒç»™ç”¨æˆ·ä¹‹å‰ï¼Œæœ‰æ•ˆåœ°æµ‹è¯•æ‚¨çš„æ›´æ–°å†…å®¹ã€‚ ä½†æ˜¯ï¼Œç”±äºè¯¥å·¥ä½œæµé™æ€åœ°å°†éƒ¨ç½²åˆ†é…åµŒå…¥åˆ°å®é™…äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œå› æ­¤<code>ä¸´æ—¶æ„å»º</code>å’Œ<code>ç”Ÿäº§æ„å»º</code>åªä¼šåŒæ­¥è¯¥éƒ¨ç½²çš„æ›´æ–°å†…å®¹ã€‚</p><p>åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™æ˜¯è¶³å¤Ÿçš„ï¼Œå› ä¸ºæ‚¨åªå¸Œæœ›æ‚¨çš„å›¢é˜Ÿï¼Œå®¢æˆ·ï¼Œåˆ©ç›Šç›¸å…³è€…ç­‰ä¸æ‚¨çš„é¢„ç”Ÿäº§ç‰ˆæœ¬åŒæ­¥ï¼Œå› æ­¤ï¼Œä»–ä»¬åªéœ€è¦çŸ¥é“å¦‚ä½•ä¸è¯¥ç‰ˆæœ¬åŒæ­¥æ„å»ºã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½ å¸Œæœ›èƒ½å¤Ÿè¿›è¡Œ <code>A / B</code> æµ‹è¯•ï¼Œæˆ–è€…ä¸ºæŸäº›ç”¨æˆ·æä¾›åº”ç”¨ç¨‹åºçš„æ—©æœŸè®¿é—®æƒé™ï¼Œé‚£ä¹ˆèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶å°†ç‰¹å®šç”¨æˆ·ï¼ˆæˆ–å—ä¼—ï¼‰åŠ¨æ€åœ°ç½®äºç‰¹å®šéƒ¨ç½²ä¸­å°†éå¸¸æœ‰ç”¨ã€‚</p><p>ä¸ºäº†å®ç°æ­¤å·¥ä½œæµç¨‹ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯æŒ‡å®šè°ƒç”¨è¯¥<code>codePush</code>æ–¹æ³•æ—¶å¸Œæœ›å½“å‰ç”¨æˆ·ä¸ä¹‹åŒæ­¥çš„éƒ¨ç½²å¯†é’¥ã€‚æŒ‡å®šåï¼Œæ­¤å¯†é’¥å°†è¦†ç›–åº”ç”¨ç¨‹åºçš„ <code>Info.plist</code>ï¼ˆiOSï¼‰æˆ– <code>MainActivity.java</code>ï¼ˆAndroidï¼‰æ–‡ä»¶ä¸­æä¾›çš„â€œé»˜è®¤â€å¯†é’¥ã€‚è¿™å…è®¸æ‚¨ç”Ÿæˆä¸´æ—¶æˆ–ç”Ÿäº§æ„å»ºï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€â€œé‡å®šå‘â€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Imagine that &quot;userProfile&quot; is a prop that this component received</span></span><br><span class="line"><span class="comment">// which includes the deployment key that the current user should use.</span></span><br><span class="line">codePush.<span class="title function_">sync</span>(&#123; <span class="attr">deploymentKey</span>: userProfile.<span class="property">CODEPUSH_KEY</span> &#125;);</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™æ ·çš„å˜åŒ–åï¼Œç°åœ¨åªéœ€é€‰æ‹©åº”ç”¨ç¨‹åºå¦‚ä½•ä¸ºå½“å‰ç”¨æˆ·é…ç½®æ­£ç¡®çš„éƒ¨ç½²å¯†é’¥ã€‚ åœ¨å®è·µä¸­ï¼Œé€šå¸¸æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>å°†æ›´æ”¹éƒ¨ç½²çš„åŠŸèƒ½å¼€æ”¾ç»™ç”¨æˆ·ã€‚ä¾‹å¦‚ï¼Œæ‚¨çš„è®¾ç½®é¡µé¢å¯èƒ½ä¼šæœ‰ä¸€ä¸ªåˆ‡æ¢æŒ‰é’®ä»¥å¯ç”¨â€œæµ‹è¯•ç‰ˆâ€çš„è®¿é—®æƒé™ã€‚ å¦‚æœæ‚¨ä¸åœ¨ä¹é¢„ç”Ÿäº§æ›´æ–°çš„å†…å®¹è¢«å¾—çŸ¥ï¼Œå¹¶ä¸”æ‚¨çš„æŸäº›ç”¨æˆ·å¯èƒ½å¸Œæœ›æ ¹æ®è‡ªå·±çš„æ„æ„¿é€‰æ‹©ä½¿ç”¨æœ€æ–°ï¼ˆå¹¶ä¸”å¯èƒ½æœ‰é”™è¯¯ï¼‰çš„æ›´æ–°ï¼ˆæœ‰ç‚¹åƒChromeæ¸ é“ï¼‰ã€‚ ä½†æ˜¯ï¼Œæ­¤è§£å†³æ–¹æ¡ˆå°†å†³ç­–æƒäº¤ç»™æ‚¨çš„ç”¨æˆ·ï¼Œè¿™æ— æ³•å¸®åŠ©æ‚¨é€æ˜åœ°æ‰§è¡Œ <code>A / B</code> æµ‹è¯•ã€‚</li><li>ä½¿ç”¨é¢å¤–çš„å…ƒæ•°æ®æ³¨é‡Šç”¨æˆ·çš„æœåŠ¡å™¨ç«¯é…ç½®æ–‡ä»¶ï¼Œæ ‡æ˜ä¸å…¶åŒæ­¥çš„éƒ¨ç½²ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¨çš„åº”ç”¨åªèƒ½ä½¿ç”¨äºŒè¿›åˆ¶åµŒå…¥å¯†é’¥ï¼Œä½†åœ¨ç”¨æˆ·é€šè¿‡èº«ä»½éªŒè¯åï¼Œæ‚¨çš„æœåŠ¡å™¨å¯ä»¥é€‰æ‹©å°†å…¶â€œé‡å®šå‘â€åˆ°å…¶ä»–éƒ¨ç½²ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥æ ¹æ®éœ€è¦é€æ­¥å°†æŸäº›ç”¨æˆ·æˆ–ç»„æ”¾ç½®åœ¨ä¸åŒçš„éƒ¨ç½²ä¸­ã€‚æ‚¨ç”šè‡³å¯ä»¥é€‰æ‹©å°†æœåŠ¡å™¨å“åº”å­˜å‚¨åœ¨æœ¬åœ°å­˜å‚¨ä¸­ï¼Œä»¥ä½¿å…¶æˆä¸ºæ–°çš„é»˜è®¤å€¼ã€‚ å¦‚ä½•å°†å¯†é’¥ä¸ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ä¸€èµ·å­˜å‚¨å®Œå…¨å–å†³äºæ‚¨çš„èº«ä»½éªŒè¯è§£å†³æ–¹æ¡ˆï¼ˆä¾‹å¦‚ <code>Auth0</code>ï¼Œ<code>Firebase</code>ï¼Œè‡ªå®šä¹‰<code>DB</code> + <code>REST API</code>ï¼‰ï¼Œä½†è¿™é€šå¸¸éå¸¸ç®€å•ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šå¦‚æœéœ€è¦ï¼Œæ‚¨è¿˜å¯ä»¥å®æ–½æ··åˆè§£å†³æ–¹æ¡ˆï¼Œå…è®¸æœ€ç»ˆç”¨æˆ·åœ¨ä¸åŒéƒ¨ç½²ä¹‹é—´åˆ‡æ¢ï¼ŒåŒæ—¶è¿˜å…è®¸æ‚¨çš„æœåŠ¡å™¨è¦†ç›–è¯¥å†³ç­–ã€‚ è¿™æ ·ï¼Œæ‚¨å°±æ‹¥æœ‰äº†â€œéƒ¨ç½²è§£å†³æ–¹æ¡ˆâ€çš„å±‚æ¬¡ç»“æ„ï¼Œå¯ç¡®ä¿æ‚¨çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿè‡ªè¡Œæ›´æ–°ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è·å¾—æœ€æ–°å†…å®¹çš„è®¿é—®æƒé™æ¥è·å¾—æœ€æ–°ä½“éªŒï¼Œä½†æ‚¨ä¹Ÿæœ‰èƒ½åŠ›æ ¹æ®éœ€è¦å¯¹ç”¨æˆ·è¿›è¡Œ <code>A / B</code> æµ‹è¯•ã€‚</p></blockquote><p>ç”±äºæˆ‘ä»¬å»ºè®®å°†<code>Staging</code>éƒ¨ç½²ç”¨äºæ›´æ–°çš„é¢„å‘å¸ƒæµ‹è¯•ï¼ˆå¦‚ä¸Šä¸€èŠ‚ä¸­æ‰€è¿°ï¼‰ï¼Œå› æ­¤ä½¿ç”¨è¯¥éƒ¨ç½²å¯¹ç”¨æˆ·æ‰§è¡Œ <code>A / B</code> æµ‹è¯•å¹¶ä¸ä¸€å®šæœ‰æ„ä¹‰ï¼Œä¸æ­¤ç›¸åï¼Œä½ åº”è¯¥å…è®¸æ—©æœŸè®¿é—®ï¼ˆå¦‚ä¸Šé¢é€‰é¡¹1ä¸­æ‰€è¿°ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®å……åˆ†åˆ©ç”¨è‡ªå®šä¹‰åº”ç”¨ç¨‹åºéƒ¨ç½²ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥æŒ‰ç”¨æˆ·éœ€æ±‚å¯¹ç”¨æˆ·è¿›è¡Œç»†åˆ†ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åˆ›å»ºé•¿æœŸç”šè‡³æ˜¯ä¸€æ¬¡æ€§çš„éƒ¨ç½²ï¼Œå‘å…¶å‘å¸ƒåº”ç”¨ç¨‹åºçš„å˜ä½“ï¼Œç„¶åå°†æŸäº›ç”¨æˆ·æ”¾å…¥å…¶ä¸­ï¼Œä»¥æŸ¥çœ‹å…¶å‚ä¸åº¦ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// <span class="comment">#1) Create your new deployment to hold releases of a specific app variant</span></span><br><span class="line">appcenter codepush deployment add -a &lt;ownerName&gt;/&lt;appName&gt; test-variant-one</span><br><span class="line"></span><br><span class="line">// <span class="comment">#2) Target any new releases at that custom deployment</span></span><br><span class="line">appcenter codepush release-react -a &lt;ownerName&gt;/&lt;appName&gt; -d test-variant-one</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šä»ä¸€ä¸ªéƒ¨ç½²â€œåˆ‡æ¢â€åˆ°å¦ä¸€ä¸ªéƒ¨ç½²çš„ç”¨æˆ·æ•°ï¼Œè¢«çº³å…¥åˆ°éƒ¨ç½²ä¸­çš„â€œå®‰è£…åº¦é‡â€ä¸­æŠ¥å‘Šçš„æ€»ç”¨æˆ·æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„<code>Production</code> éƒ¨ç½²å½“å‰æŠ¥å‘Šçš„ç”¨æˆ·æ€»æ•°ä¸º1ï¼Œä½†æ‚¨å°†è¯¥ç”¨æˆ·åŠ¨æ€åˆ‡æ¢ä¸º <code>Staging</code> éƒ¨ç½²ï¼Œåˆ™ <code>Production</code> éƒ¨ç½²å°†æŠ¥å‘Š 0ä¸ªæ€»ç”¨æˆ·ï¼Œè€Œ <code>Staging</code> éƒ¨ç½²å°†æŠ¥å‘Š1ï¼ˆåˆšåˆšåˆ‡æ¢çš„ç”¨æˆ·ï¼‰ã€‚ å³ä½¿åœ¨ä½¿ç”¨åŸºäºè¿è¡Œæ—¶çš„éƒ¨ç½²é‡å®šå‘è§£å†³æ–¹æ¡ˆçš„æƒ…å†µä¸‹ï¼Œè¿™ç§è¡Œä¸ºå¯ä»¥è®©ä½ å‡†ç¡®åœ°è·Ÿè¸ªæ‚¨çš„ç‰ˆæœ¬ä½¿ç”¨æƒ…å†µã€‚</p></blockquote><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><blockquote><p>æºç ï¼š<a href="https://github.com/youngjuning/AppCenterCodePushDemo">https://github.com/youngjuning/AppCenterCodePushDemo</a></p></blockquote><h3 id="App-js"><a href="#App-js" class="headerlink" title="App.js"></a>App.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;useEffect&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">View</span>, <span class="title class_">StyleSheet</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> codePush <span class="keyword">from</span> <span class="string">&#x27;react-native-code-push&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AwesomeButton</span> <span class="keyword">from</span> <span class="string">&#x27;react-native-really-awesome-button&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;codePushSync, checkForUpdate&#125; <span class="keyword">from</span> <span class="string">&#x27;./CodePushUtils&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getUpdateMetadata</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> running = <span class="keyword">await</span> codePush.<span class="title function_">getUpdateMetadata</span>(</span><br><span class="line">      codePush.<span class="property">UpdateState</span>.<span class="property">RUNNING</span>,</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">const</span> pending = <span class="keyword">await</span> codePush.<span class="title function_">getUpdateMetadata</span>(</span><br><span class="line">      codePush.<span class="property">UpdateState</span>.<span class="property">PENDING</span>,</span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[CodePush] running&#x27;</span>, running);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[CodePush] pending&#x27;</span>, pending);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">codePushSync</span>();</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AwesomeButton</span> <span class="attr">onPress</span>=<span class="string">&#123;checkForUpdate&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;marginBottom:</span> <span class="attr">10</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        Check For Update!</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">AwesomeButton</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">AwesomeButton</span> <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span> codePush.clearUpdates()&#125; style=&#123;&#123;marginBottom: 10&#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        Clear Updates!</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">AwesomeButton</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AwesomeButton</span> <span class="attr">onPress</span>=<span class="string">&#123;getUpdateMetadata&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        getUpdateMetadata!</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">AwesomeButton</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="attr">flex</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">justifyContent</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h3 id="CodePushUtils-js"><a href="#CodePushUtils-js" class="headerlink" title="CodePushUtils.js"></a>CodePushUtils.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">AppState</span>, <span class="title class_">Platform</span>, <span class="title class_">Alert</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> codePush <span class="keyword">from</span> <span class="string">&#x27;react-native-code-push&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> configReader <span class="keyword">from</span> <span class="string">&#x27;react-native-config-reader&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CodePushDeploymentKey</span> = &#123;</span><br><span class="line">  <span class="attr">ios</span>: &#123;</span><br><span class="line">    <span class="attr">debug</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">staging</span>: <span class="string">&#x27;944zuIiRSds-ZZY6AQF82aRl0b1vUL_mMxiie&#x27;</span>,</span><br><span class="line">    <span class="attr">release</span>: <span class="string">&#x27;yyJfk2vtpLUUlOCg3FnvCcky9o4U1lEWR1UJV&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">android</span>: &#123;</span><br><span class="line">    <span class="attr">debug</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">releasestaging</span>: <span class="string">&#x27;tOncLvKACzzSkUaML9tCOUfPZxHVnobfaNIUe&#x27;</span>,</span><br><span class="line">    <span class="attr">release</span>: <span class="string">&#x27;Gtc4iXTPn24yu6CBrbl_V2GTy21xtdQyfm6x1&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getDeploymentKey</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> buildType = configReader.<span class="property">BUILD_TYPE</span>.<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="keyword">const</span> deploymentKey = <span class="title class_">CodePushDeploymentKey</span>[<span class="title class_">Platform</span>.<span class="property">OS</span>][buildType];</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[CodePushUtils]&#x27;</span>, deploymentKey);</span><br><span class="line">  <span class="keyword">return</span> deploymentKey;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">codePushStatusDidChange</span> = <span class="keyword">async</span> syncStatus =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (syncStatus) &#123;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">CHECKING_FOR_UPDATE</span>:</span><br><span class="line">      <span class="comment">// 0 - æ­£åœ¨æŸ¥è¯¢CodePushæœåŠ¡å™¨ä»¥è¿›è¡Œæ›´æ–°ã€‚</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Checking for update.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">AWAITING_USER_ACTION</span>:</span><br><span class="line">      <span class="comment">// 1 - æœ‰å¯ç”¨çš„æ›´æ–°ï¼Œå¹¶ä¸”å‘æœ€ç»ˆç”¨æˆ·æ˜¾ç¤ºäº†ä¸€ä¸ªç¡®è®¤å¯¹è¯æ¡†ã€‚ï¼ˆä»…åœ¨updateDialogä½¿ç”¨æ—¶é€‚ç”¨ï¼‰</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Awaiting user action.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">DOWNLOADING_PACKAGE</span>:</span><br><span class="line">      <span class="comment">// 2 - æ­£åœ¨ä»CodePushæœåŠ¡å™¨ä¸‹è½½å¯ç”¨æ›´æ–°ã€‚</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Downloading package.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">INSTALLING_UPDATE</span>:</span><br><span class="line">      <span class="comment">// 3 - å·²ä¸‹è½½ä¸€ä¸ªå¯ç”¨çš„æ›´æ–°ï¼Œå¹¶å°†å…¶å®‰è£…ã€‚</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Installing update.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">UP_TO_DATE</span>:</span><br><span class="line">      <span class="comment">// 4 - åº”ç”¨ç¨‹åºå·²é…ç½®çš„éƒ¨ç½²å®Œå…¨æœ€æ–°ã€‚</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] App is up to date.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">UPDATE_IGNORED</span>:</span><br><span class="line">      <span class="comment">// 5 è¯¥åº”ç”¨ç¨‹åºå…·æœ‰å¯é€‰æ›´æ–°ï¼Œæœ€ç»ˆç”¨æˆ·é€‰æ‹©å¿½ç•¥è¯¥æ›´æ–°ã€‚ï¼ˆä»…åœ¨updateDialogä½¿ç”¨æ—¶é€‚ç”¨ï¼‰</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] User cancelled the update.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">UPDATE_INSTALLED</span>:</span><br><span class="line">      <span class="comment">// 6 - å®‰è£…äº†ä¸€ä¸ªå¯ç”¨çš„æ›´æ–°ï¼Œå®ƒå°†æ ¹æ® SyncOptions ä¸­çš„ InstallModeæŒ‡å®šåœ¨ syncStatusChangedCallback å‡½æ•°è¿”å›åç«‹å³æˆ–åœ¨ä¸‹æ¬¡åº”ç”¨æ¢å¤/é‡æ–°å¯åŠ¨æ—¶ç«‹å³è¿è¡Œã€‚</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// ç”±äºå®‰è£…äº†CodePushæ›´æ–°ï¼Œæš‚æ—¶ç¦æ­¢ä»»ä½•ç¨‹åºæ€§é‡å¯ã€‚è¿™æ˜¯é«˜çº§APIï¼Œå½“æ‚¨åº”ç”¨ä¸­çš„ç»„ä»¶ï¼ˆä¾‹å¦‚ï¼Œå…¥èŒæµç¨‹ï¼‰éœ€è¦ç¡®ä¿åœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…ä¸ä¼šå‡ºç°æœ€ç»ˆç”¨æˆ·ä¸­æ–­æ—¶ï¼Œæ­¤åŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚</span></span><br><span class="line">      <span class="comment">// codePush.disallowRestart();</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Installed update.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">SYNC_IN_PROGRESS</span>:</span><br><span class="line">      <span class="comment">// 7 - æ­£åœ¨æ‰§è¡Œçš„ sync æ“ä½œ</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Sync already in progress.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">UNKNOWN_ERROR</span>:</span><br><span class="line">      <span class="comment">// -1 - åŒæ­¥æ“ä½œé‡åˆ°æœªçŸ¥é”™è¯¯ã€‚</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] An unknown error occurred.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">codePushDownloadDidProgress</span> = progress =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> curPercent = (</span><br><span class="line">    (progress.<span class="property">receivedBytes</span> / progress.<span class="property">totalBytes</span>) *</span><br><span class="line">    <span class="number">100</span></span><br><span class="line">  ).<span class="title function_">toFixed</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[CodePushUtils] Downloading Progress&#x27;</span>, <span class="string">`<span class="subst">$&#123;curPercent&#125;</span>%`</span>);</span><br><span class="line">  <span class="comment">// console.log(`$&#123;progress.receivedBytes&#125; of $&#123;progress.totalBytes&#125; received.`);</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">syncImmediate</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> deploymentKey = <span class="title function_">getDeploymentKey</span>();</span><br><span class="line">  codePush.<span class="title function_">sync</span>(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">updateDialog</span>: &#123;</span><br><span class="line">        <span class="comment">// æ˜¯å¦æ˜¾ç¤ºæ›´æ–°æè¿°</span></span><br><span class="line">        <span class="attr">appendReleaseDescription</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// æ›´æ–°æè¿°çš„å‰ç¼€ã€‚ é»˜è®¤ä¸º&quot;Description&quot;</span></span><br><span class="line">        <span class="attr">descriptionPrefix</span>: <span class="string">&#x27;\n\næ›´æ–°å†…å®¹ï¼š\n&#x27;</span>,</span><br><span class="line">        <span class="comment">// å¼ºåˆ¶æ›´æ–°æŒ‰é’®æ–‡å­—ï¼Œé»˜è®¤ä¸ºcontinue</span></span><br><span class="line">        <span class="attr">mandatoryContinueButtonLabel</span>: <span class="string">&#x27;ç«‹å³æ›´æ–°&#x27;</span>,</span><br><span class="line">        <span class="comment">// å¼ºåˆ¶æ›´æ–°æ—¶çš„ä¿¡æ¯. é»˜è®¤ä¸º&quot;An update is available that must be installed.&quot;</span></span><br><span class="line">        <span class="attr">mandatoryUpdateMessage</span>: <span class="string">&#x27;å¿…é¡»æ›´æ–°åæ‰èƒ½ä½¿ç”¨&#x27;</span>,</span><br><span class="line">        <span class="comment">// éå¼ºåˆ¶æ›´æ–°æ—¶ï¼ŒæŒ‰é’®æ–‡å­—,é»˜è®¤ä¸º&quot;ignore&quot;</span></span><br><span class="line">        <span class="attr">optionalIgnoreButtonLabel</span>: <span class="string">&#x27;ç¨å&#x27;</span>,</span><br><span class="line">        <span class="comment">// éå¼ºåˆ¶æ›´æ–°æ—¶ï¼Œç¡®è®¤æŒ‰é’®æ–‡å­—. é»˜è®¤ä¸º&quot;Install&quot;</span></span><br><span class="line">        <span class="attr">optionalInstallButtonLabel</span>: <span class="string">&#x27;åå°æ›´æ–°&#x27;</span>,</span><br><span class="line">        <span class="comment">// éå¼ºåˆ¶æ›´æ–°æ—¶ï¼Œæ£€æŸ¥åˆ°æ›´æ–°çš„æ¶ˆæ¯æ–‡æœ¬</span></span><br><span class="line">        <span class="attr">optionalUpdateMessage</span>: <span class="string">&#x27;æœ‰æ–°ç‰ˆæœ¬äº†ï¼Œæ˜¯å¦æ›´æ–°ï¼Ÿ&#x27;</span>,</span><br><span class="line">        <span class="comment">// Alertçª—å£çš„æ ‡é¢˜</span></span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;æ›´æ–°&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      deploymentKey,</span><br><span class="line">      <span class="attr">installMode</span>: codePush.<span class="property">InstallMode</span>.<span class="property">IMMEDIATE</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    codePushStatusDidChange,</span><br><span class="line">    codePushDownloadDidProgress,</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">checkForUpdate</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> deploymentKey = <span class="title function_">getDeploymentKey</span>();</span><br><span class="line">  <span class="keyword">const</span> update = <span class="keyword">await</span> codePush.<span class="title function_">checkForUpdate</span>(deploymentKey);</span><br><span class="line">  <span class="keyword">if</span> (!update) &#123;</span><br><span class="line">    <span class="title class_">Alert</span>.<span class="title function_">alert</span>(<span class="string">&#x27;æç¤º&#x27;</span>, <span class="string">&#x27;å·²æ˜¯æœ€æ–°ç‰ˆæœ¬&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">syncImmediate</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">codePushSync</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">syncImmediate</span>();</span><br><span class="line">  <span class="title class_">AppState</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="function"><span class="params">newState</span> =&gt;</span> &#123;</span><br><span class="line">    newState === <span class="string">&#x27;active&#x27;</span> &amp;&amp; <span class="title function_">syncImmediate</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="Npm-Scripts"><a href="#Npm-Scripts" class="headerlink" title="Npm Scripts"></a>Npm Scripts</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">&quot;gradle:clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cd android &amp;&amp; ./gradlew clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:release&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:assembleRelease&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:installRelease&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:installRelease&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:staging&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:assembleReleaseStaging&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:installStaging&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:installReleaseStaging&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;displayKeys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn disPlayIosKeys &amp;&amp; yarn disPlayAndroidKeys&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;disPlayIosKeys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;appcenter codepush deployment list --app youngjuning/AppCenterCodePushDemo-iOS --displayKeys&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;disPlayAndroidKeys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;appcenter codepush deployment list --app youngjuning/AppCenterCodePushDemo-Android --displayKeys&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release-react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn release-react-ios &amp;&amp; yarn release-react-android&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release-react-ios&quot;</span><span class="punctuation">:</span> <span class="string">&quot;appcenter codepush release-react --app youngjuning/AppCenterCodePushDemo-iOS&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release-react-android&quot;</span><span class="punctuation">:</span> <span class="string">&quot;appcenter codepush release-react --app youngjuning/AppCenterCodePushDemo-Android&quot;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®Jenkins</title>
      <link href="/f0d2184d4dfe/"/>
      <url>/f0d2184d4dfe/</url>
      
        <content type="html"><![CDATA[<p>Docker å®‰è£…é…ç½®è¯·å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« : <a href="https://juejin.im/post/5e839f2851882573ab44f1b4#heading-11">https://juejin.im/post/5e839f2851882573ab44f1b4#heading-11</a></p><h2 id="å®‰è£…Jenkins"><a href="#å®‰è£…Jenkins" class="headerlink" title="å®‰è£…Jenkins"></a>å®‰è£…Jenkins</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -d \</span></span><br><span class="line"><span class="language-bash"> -u root \</span></span><br><span class="line"><span class="language-bash"> -p 8080:8080 -p 50000:50000 \</span></span><br><span class="line"><span class="language-bash"> -v jenkins_home:/var/jenkins_home \</span></span><br><span class="line"><span class="language-bash"> -e PLUGINS_FORCE_UPGRADE=<span class="literal">true</span> \</span></span><br><span class="line"><span class="language-bash"> -e TRY_UPGRADE_IF_NO_MARKER=<span class="literal">true</span> \</span></span><br><span class="line"><span class="language-bash"> -e JAVA_OPTS=-Duser.timezone=Asia/Shanghai \</span></span><br><span class="line"><span class="language-bash"> --name jenkins \</span></span><br><span class="line"><span class="language-bash"> --restart always \</span></span><br><span class="line"><span class="language-bash"> jenkins/jenkins</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ›´å¤šå®šåˆ¶å‚æ•°ä½ å¯ä»¥å‚è€ƒ <a href="https://github.com/jenkinsci/docker">https://github.com/jenkinsci/docker</a></p><h2 id="Nginx-åå‘ä»£ç†"><a href="#Nginx-åå‘ä»£ç†" class="headerlink" title="Nginx åå‘ä»£ç†"></a>Nginx åå‘ä»£ç†</h2><p>æˆ‘æ²¡æœ‰åŸŸåï¼Œæ‰€ä»¥æˆ‘çš„é…ç½®æ˜¯åŸºäºç«¯å£çš„ï¼Œä½ å¯ä»¥æŸ¥çœ‹<a href="https://github.com/jenkinsci/docker/blob/master/README.md">å®˜æ–¹æ–‡æ¡£</a> è·å–æ›´å¤šæ–¹æ¡ˆï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="attribute">listen</span> <span class="number">8882</span>;</span><br><span class="line"><span class="attribute">server_name</span> _;</span><br><span class="line"></span><br><span class="line"><span class="section">location</span> / &#123;</span><br><span class="line"><span class="attribute">proxy_set_header</span>        Host <span class="variable">$host</span>:<span class="variable">$server_port</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span>        X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span>        X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span>        X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fix the &quot;It appears that your reverse proxy set up is broken&quot; error.</span></span><br><span class="line"><span class="attribute">proxy_pass</span>          http://127.0.0.1:8080;</span><br><span class="line"><span class="attribute">proxy_read_timeout</span>  <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Required for new HTTP-based CLI</span></span><br><span class="line"><span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line"><span class="attribute">proxy_request_buffering</span> <span class="literal">off</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–jenkins"><a href="#åˆå§‹åŒ–jenkins" class="headerlink" title="åˆå§‹åŒ–jenkins"></a>åˆå§‹åŒ–jenkins</h2><p>1ã€æ‰§è¡Œ<code>cat /var/lib/docker/volumes/jenkins_home/_data/secrets/initialAdminPassword</code>ï¼Œè·å–<strong>ç®¡ç†å‘˜å¯†ç </strong></p><p>2ã€å¯åŠ¨å®Œjenkinsåé€šè¿‡æµè§ˆå™¨è¾“å…¥åœ°å€<code>http://éƒ¨ç½²jenkinsä¸»æœºIP:ç«¯å£</code></p><img src="https://i.loli.net/2020/04/10/YtRrWTZVQc7Mma3.png" style="zoom:75%;" /><p>3ã€é€‰æ‹©å®‰è£…æ’ä»¶æ–¹å¼ï¼Œè¿™é‡Œæˆ‘æ˜¯é»˜è®¤ç¬¬ä¸€ä¸ªï¼š</p><img src="https://i.loli.net/2020/04/10/IBlrbMFusXmdeA5.png" style="zoom:75%;" /><p>4ã€è¿›å…¥æ’ä»¶å®‰è£…ç•Œé¢ï¼Œè¿ç½‘ç­‰å¾…æ’ä»¶å®‰è£…ï¼š</p><img src="https://i.loli.net/2020/04/10/gimNZtUID5YjK9f.png" style="zoom:75%;" /><p>5ã€å®‰è£…å®Œæ’ä»¶åï¼Œè¿›å…¥åˆ›å»ºç®¡ç†å‘˜ç•Œé¢ï¼š</p><img src="https://i.loli.net/2020/04/10/SxvtAW3McBCqTEX.png" style="zoom:75%;" /><h2 id="åŸºäºè§’è‰²çš„è®¤è¯ç­–ç•¥"><a href="#åŸºäºè§’è‰²çš„è®¤è¯ç­–ç•¥" class="headerlink" title="åŸºäºè§’è‰²çš„è®¤è¯ç­–ç•¥"></a>åŸºäºè§’è‰²çš„è®¤è¯ç­–ç•¥</h2><ol><li><p>è¯·ç¡®ä¿åœ¨ <strong>ç³»ç»Ÿç®¡ç†</strong> -&gt; <strong>æ’ä»¶ç®¡ç†</strong> ä¸­å®‰è£…äº†<strong>Role-based Authorization Strategy</strong>  æ’ä»¶ï¼ï¼</p></li><li><p>åœ¨ <strong>ç³»ç»Ÿç®¡ç†</strong> -&gt; <strong>å®‰å…¨</strong> -&gt; <strong>å…¨å±€å®‰å…¨è®¾ç½®</strong> ä¸­çš„ <strong>æˆæƒç­–ç•¥</strong> é…ç½®é¡¹ä¸­é€‰æ‹© <strong>Role-Based Strategy</strong></p><p><img src="https://i.loli.net/2020/05/09/FiR59LEtqwCbDIh.png"></p></li><li><p>ç„¶åå°±å¯ä»¥åœ¨ <code>Manage and Assign Roles</code> ä¸­ç®¡ç†è§’è‰²</p></li></ol><h2 id="å…¨å±€å·¥å…·é…ç½®"><a href="#å…¨å±€å·¥å…·é…ç½®" class="headerlink" title="å…¨å±€å·¥å…·é…ç½®"></a>å…¨å±€å·¥å…·é…ç½®</h2><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><blockquote><p>è‡ªåŠ¨å®‰è£…è¯·å…ˆåˆ°Oracleæ³¨å†Œè´¦å·</p></blockquote><p><img src="https://i.loli.net/2020/05/09/jbzQ15qthxmTu9Z.png"></p><h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><blockquote><p>éœ€è¦å…ˆæ‰§è¡Œ <code>apt install git</code> å®‰è£…gitï¼Œç„¶åé€šè¿‡ <code>which git</code> æŸ¥çœ‹ git å®‰è£…ä½ç½®ï¼</p></blockquote><p><img src="https://i.loli.net/2020/05/09/lLSYIN5FARQ38uH.png"></p><h3 id="NodeJS"><a href="#NodeJS" class="headerlink" title="NodeJS"></a>NodeJS</h3><blockquote><p>éœ€è¦å…ˆéœ€è¦å®‰è£… <a href="https://plugins.jenkins.io/nodejs">NodeJS Plugin</a> æ’ä»¶</p></blockquote><p><img src="https://i.loli.net/2020/05/09/B9R7pgIXd5OSCbq.png"></p><h2 id="Android-æ‰“åŒ…ç¯å¢ƒ"><a href="#Android-æ‰“åŒ…ç¯å¢ƒ" class="headerlink" title="Android æ‰“åŒ…ç¯å¢ƒ"></a>Android æ‰“åŒ…ç¯å¢ƒ</h2><h3 id="å®‰è£…-android-sdkã€sdkmagager"><a href="#å®‰è£…-android-sdkã€sdkmagager" class="headerlink" title="å®‰è£… android-sdkã€sdkmagager"></a>å®‰è£… android-sdkã€sdkmagager</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt update | apt install android-sdk</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt install snapd</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">snap install androidsdk</span></span><br></pre></td></tr></table></figure><h3 id="å¤åˆ¶android-sdkåˆ°-jenkins-volume"><a href="#å¤åˆ¶android-sdkåˆ°-jenkins-volume" class="headerlink" title="å¤åˆ¶android-sdkåˆ° jenkins volume"></a>å¤åˆ¶android-sdkåˆ° jenkins volume</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> -R /usr/lib/android-sdk/ /var/lib/docker/volume/jenkins_home/_data/</span></span><br></pre></td></tr></table></figure><p>android-sdk çš„å®‰è£…ä½ç½®å¯ä»¥é€šè¿‡ <code>adb --version</code> æŸ¥çœ‹ï¼š</p><img src="https://user-gold-cdn.xitu.io/2020/5/9/171f7fae7cf4ff7a?w=864&h=230&f=png&s=176444" alt="" style="zoom: 75%;" /><h3 id="è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®ç¯å¢ƒå˜é‡"></a>è®¾ç½®ç¯å¢ƒå˜é‡</h3><p>å°†ä¸‹é¢çš„çš„é…ç½®åŠ å…¥åˆ° <code>~/.bash_profile</code> æˆ– <code>~/.zshrc</code> ä¸­ï¼Œå¹¶æ‰§è¡Œ <code>srouce ~/.bash_profile</code> æˆ– <code>srouce ~/.zshrc</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export ANDROID_HOME=/var/lib/docker/volumes/jenkins_home/_data/android-sdk</span><br><span class="line">export PATH=$PATH:$ANDROID_HOME/tools</span><br><span class="line">export PATH=$PATH:$ANDROID_HOME/tools/bin</span><br><span class="line">export PATH=$PATH:$ANDROID_HOME/platform-tools</span><br><span class="line">export PATH=$PATH:$ANDROID_HOME/emulator</span><br></pre></td></tr></table></figure><h3 id="accepted-licences"><a href="#accepted-licences" class="headerlink" title="accepted licences"></a>accepted licences</h3><blockquote><p>å¦‚æœä¸æˆæƒä¼šæŠ¥é”™ï¼š Failed to install the following Android SDK packages as some licences have not been accepted.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">yes</span> | sdkmanager --sdk_root=<span class="variable">$&#123;ANDROID_HOME&#125;</span> --licenses</span></span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä¸æŒ‡å®š <code>--sdk_root=$&#123;ANDROID_HOME&#125;</code> ä¼šæŠ¥é”™ï¼š<a href="https://stackoverflow.com/questions/60730615/sdkmanager-warning-could-not-create-setting-java-lang-illegalargumentexcepti">SDKmanager : Warning: Could not create setting. java.lang.IllegalArgumentException</a></p></blockquote><h3 id="è®¾ç½®-Jenkins-ANDROID-HOME"><a href="#è®¾ç½®-Jenkins-ANDROID-HOME" class="headerlink" title="è®¾ç½® Jenkins ANDROID_HOME"></a>è®¾ç½® Jenkins ANDROID_HOME</h3><p>è¿›å…¥ <strong>ç³»ç»Ÿç®¡ç†</strong> -&gt; <strong>ç³»ç»Ÿé…ç½®</strong> -&gt; <strong>å…¨å±€å±æ€§</strong> æ–°å¢ç¯å¢ƒå˜é‡ <code>ANDROID_HOME</code>ï¼š</p><p><img src="https://i.loli.net/2020/05/09/jWANFZh8xCD1Sgm.png"></p><h2 id="GitHub-Plugin"><a href="#GitHub-Plugin" class="headerlink" title="GitHub Plugin"></a>GitHub Plugin</h2><p>è¿™ä¸ªæ’ä»¶çš„ä½œç”¨æ˜¯é›†æˆ GitHub åˆ° Jenkins</p><h3 id="è·å–-GitHub-çš„-Personal-access-token"><a href="#è·å–-GitHub-çš„-Personal-access-token" class="headerlink" title="è·å– GitHub çš„ Personal access token"></a>è·å– GitHub çš„ Personal access token</h3><blockquote><p><strong>GitHub ä¸»é¡µ</strong> -&gt; <strong>Settings</strong> -&gt; <strong>Developer settings</strong> -&gt; <strong>Personal access tokens</strong></p></blockquote><p><img src="https://i.loli.net/2020/05/09/qTLBC359Z2rNday.png"></p><h3 id="æ·»åŠ GithubæœåŠ¡å™¨"><a href="#æ·»åŠ GithubæœåŠ¡å™¨" class="headerlink" title="æ·»åŠ GithubæœåŠ¡å™¨"></a>æ·»åŠ GithubæœåŠ¡å™¨</h3><blockquote><p><strong>ç³»ç»Ÿç®¡ç†</strong> -&gt; <strong>ç³»ç»Ÿè®¾ç½®</strong> -&gt; <strong>GitHub</strong> -&gt; <strong>æ·»åŠ GithubæœåŠ¡å™¨</strong></p></blockquote><p>è¿™é‡Œçš„åç§°éšä¾¿å¡«ï¼ŒAPI URL å¡«å†™ <code>https://api.github.com/</code>ï¼š</p><p><img src="https://i.loli.net/2020/05/09/1FLEfTHhpexyXQW.png"></p><p>å‡­è¯ç±»å‹é€‰ <code>Secret text</code>ï¼š</p><p><img src="https://i.loli.net/2020/05/09/3Oypr4xniKZamG9.png"></p><p>åœ¨å‡­æ®é€‰ä¸Šåˆšåˆšä½ æ·»åŠ çš„ï¼Œå‹¾ä¸Šç®¡ç† Hookï¼Œç‚¹å‡»â€œè¿æ¥æµ‹è¯•â€ï¼ŒæˆåŠŸä¹‹åå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2020/05/09/pBWKZMfq5IkGvyz.png"></p><h3 id="é…ç½®-GitHub-çš„-webhook-åœ°å€"><a href="#é…ç½®-GitHub-çš„-webhook-åœ°å€" class="headerlink" title="é…ç½® GitHub çš„ webhook åœ°å€"></a>é…ç½® GitHub çš„ webhook åœ°å€</h3><p>webhook æ˜¯é€šçŸ¥ Jenkins æ—¶çš„è¯·æ±‚åœ°å€ï¼Œç”¨æ¥å¡«å†™åˆ° GitHub ä¸Šï¼Œè¿™æ · GitHub å°±èƒ½é€šè¿‡è¯¥åœ°å€é€šçŸ¥åˆ° Jenkins</p><p>å‡è®¾Jenkinsæ‰€åœ¨æœåŠ¡å™¨çš„åœ°å€æ˜¯ï¼š192.168.0.1ï¼Œç«¯å£ä¸º8080ï¼Œé‚£ä¹ˆwebhookåœ°å€å°±æ˜¯ <code>http://192.168.0.1:8080/github-webhook/</code></p><p><img src="https://i.loli.net/2020/05/09/dU7AeiX13mWHqTp.png" alt="image-20200509175614040"></p><p>åœ¨ Payload URL ä½ç½®å¡«å…¥ webhook åœ°å€ï¼Œå†ç‚¹å‡»åº•éƒ¨çš„ Add webhook æŒ‰é’®ï¼Œè¿™æ ·å°±å®Œæˆ webhook é…ç½®äº†ï¼Œä»Šåå½“å‰å·¥ç¨‹æœ‰ä»£ç æäº¤ï¼ŒGitHub å°±ä¼šå‘æ­¤ webhook åœ°å€å‘è¯·æ±‚ï¼Œé€šçŸ¥ Jenkins æ„å»ºï¼š</p><p><img src="https://i.loli.net/2020/05/09/BqoXjUQsile3K7A.png"></p><h3 id="ä»»åŠ¡é…ç½®"><a href="#ä»»åŠ¡é…ç½®" class="headerlink" title="ä»»åŠ¡é…ç½®"></a>ä»»åŠ¡é…ç½®</h3><ul><li><p>æ„é€ è§¦å‘å™¨é€‰æ‹©ï¼šGitHub hook trigger for GITScm polling</p><p><img src="https://i.loli.net/2020/05/09/EF5DYKJHgOPayxA.png"></p></li><li><p>æ„å»ºç¯å¢ƒå’Œç»‘å®š</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‹¾é€‰ Use secret text(s) or file(s)ï¼Œä¸‹é¢çš„â€å‡­æ®â€é€‰æ‹©æˆ‘ä»¬ä¹‹å‰é…ç½®è¿‡çš„å‡­è¯</p><p><img src="https://i.loli.net/2020/05/09/2noTEULmhAzd7Dg.png"></p></li></ul><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="ä¿®æ”¹é»˜è®¤æ—¶åŒºä¸ºä¸Šæµ·æ—¶åŒº"><a href="#ä¿®æ”¹é»˜è®¤æ—¶åŒºä¸ºä¸Šæµ·æ—¶åŒº" class="headerlink" title="ä¿®æ”¹é»˜è®¤æ—¶åŒºä¸ºä¸Šæµ·æ—¶åŒº"></a>ä¿®æ”¹é»˜è®¤æ—¶åŒºä¸ºä¸Šæµ·æ—¶åŒº</h3><p>åœ¨ <strong>ç³»ç»Ÿç®¡ç†</strong> -&gt; <strong>è„šæœ¬å‘½ä»¤è¡Œ</strong> é‡Œè¿è¡Œ <code>System.setProperty(&#39;org.apache.commons.jelly.tags.fmt.timeZone&#39;, &#39;Asia/Shanghai&#39;)</code></p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typora åŸºäº PicGo-Core å®ç°ç²˜è´´ä¸Šä¼ å›¾ç‰‡</title>
      <link href="/cc88fa106758/"/>
      <url>/cc88fa106758/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸‹è½½-PicGo-Core"><a href="#ä¸‹è½½-PicGo-Core" class="headerlink" title="ä¸‹è½½ PicGo-Core"></a>ä¸‹è½½ PicGo-Core</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm install picgo -g</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">$ yarn global add picgo</span><br></pre></td></tr></table></figure><h2 id="è·å–è·¯å¾„"><a href="#è·å–è·¯å¾„" class="headerlink" title="è·å–è·¯å¾„"></a>è·å–è·¯å¾„</h2><ul><li>nodeå®‰è£…è·¯å¾„ï¼ˆ<code>which node</code>ï¼‰ï¼š<code>/usr/local/bin/node</code></li><li>picgoå®‰è£…è·¯å¾„ï¼ˆ<code>which picgo</code>ï¼‰ï¼š<code>/usr/local/bin/picgo</code></li></ul><h3 id="Imgae-Upldoad-Setting"><a href="#Imgae-Upldoad-Setting" class="headerlink" title="Imgae Upldoad Setting"></a>Imgae Upldoad Setting</h3><blockquote><p>æ‰“å¼€ Typora -&gt; åå¥½è®¾ç½® -&gt; å›¾åƒï¼š</p></blockquote><p>ä¸Šä¼ æœåŠ¡é€‰æ‹©â€œCustom Commandâ€ï¼Œè‡ªå®šä¹‰å‘½ä»¤æ ¼å¼æ˜¯ â€œ[your node path] [your picgo-core path] uploadâ€ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ <code>/usr/local/bin/node /usr/local/bin/picgo upload </code></p><p><img src="https://i.loli.net/2020/04/10/aCFG5ZW2xuR6qls.png"></p><h2 id="é…ç½®-sm-ms-api-token"><a href="#é…ç½®-sm-ms-api-token" class="headerlink" title="é…ç½® sm.ms api token"></a>é…ç½® sm.ms api token</h2><p>picgo çš„é»˜è®¤é…ç½®æ–‡ä»¶ä¸º<code>~/.picgo/config.json</code>ã€‚å…¶ä¸­<code>~</code>ä¸ºç”¨æˆ·ç›®å½•ã€‚ä¸åŒç³»ç»Ÿçš„ç”¨æˆ·ç›®å½•ä¸å¤ªä¸€æ ·ã€‚</p><p>linux å’Œ macOS å‡ä¸º<code>~/.picgo/config.json</code>ã€‚</p><p>windows åˆ™ä¸º<code>C:\Users\ä½ çš„ç”¨æˆ·å/.picgo\config.json</code>ã€‚</p><p>é…ç½®æ–‡ä»¶éœ€è¦è‡³å°‘æœ‰å¦‚ä¸‹çš„é…ç½®é¡¹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;picBed&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;uploader&quot;</span><span class="punctuation">:</span> <span class="string">&quot;smms&quot;</span><span class="punctuation">,</span> <span class="comment">// ä»£è¡¨å½“å‰çš„é»˜è®¤ä¸Šä¼ å›¾åºŠä¸º SM.MS,</span></span><br><span class="line">    <span class="attr">&quot;smms&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span> <span class="comment">// ä»https://sm.ms/home/apitokenè·å–çš„token</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;picgoPlugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span> <span class="comment">// ä¸ºæ’ä»¶é¢„ç•™</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>ç‚¹å‡»<strong>éªŒè¯å›¾ç‰‡ä¸Šä¼ é€‰é¡¹</strong> æŒ‰é’®</p><p><img src="https://i.loli.net/2020/04/10/LYNhz8rACdORjP7.png" alt="image-20200410180446932"></p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://picgo.github.io/PicGo-Core-Doc/zh/guide/config.html#%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">Picgo-Core</a></li><li><a href="https://support.typora.io/Upload-Image/">Typora Upload Image</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typora </tag>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆçš„ Docker å­¦ä¹ ç¬”è®°</title>
      <link href="/8e0831eec81f/"/>
      <url>/8e0831eec81f/</url>
      
        <content type="html"><![CDATA[<p>Docker æ˜¯ä¸ªåˆ’æ—¶ä»£çš„å¼€æºé¡¹ç›®ï¼Œå®ƒå½»åº•é‡Šæ”¾äº†è®¡ç®—è™šæ‹ŸåŒ–çš„å¨åŠ›ï¼Œæå¤§æé«˜äº†åº”ç”¨çš„ç»´æŠ¤æ•ˆç‡ï¼Œé™ä½äº†äº‘è®¡ç®—åº”ç”¨å¼€å‘çš„æˆæœ¬ï¼ä½¿ç”¨ Dockerï¼Œå¯ä»¥è®©åº”ç”¨çš„éƒ¨ç½²ã€æµ‹è¯•å’Œåˆ†å‘éƒ½å˜å¾—å‰æ‰€æœªæœ‰çš„é«˜æ•ˆå’Œè½»æ¾ï¼</p><p>æ— è®ºæ˜¯åº”ç”¨å¼€å‘è€…ã€è¿ç»´äººå‘˜ã€è¿˜æ˜¯å…¶ä»–ä¿¡æ¯æŠ€æœ¯ä»ä¸šäººå‘˜ï¼Œéƒ½æœ‰å¿…è¦è®¤è¯†å’ŒæŒæ¡ Dockerï¼ŒèŠ‚çº¦æœ‰é™çš„ç”Ÿå‘½ã€‚</p><p>æœ¬æ–‡æ˜¯ç¬”è€…ä»¥ä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆçš„è§†è§’å­¦ä¹  Docker è¿‡ç¨‹ä¸­çš„ç¬”è®°ï¼Œå¦‚æœå¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œè£å¹¸ä¹‹è‡³ã€‚</p><h1 id="åŸºç¡€å…¥é—¨"><a href="#åŸºç¡€å…¥é—¨" class="headerlink" title="åŸºç¡€å…¥é—¨"></a>åŸºç¡€å…¥é—¨</h1><p><strong>Docker</strong> ä½¿ç”¨ <code>Google</code> å…¬å¸æ¨å‡ºçš„ <a href="https://golang.org/">Go è¯­è¨€</a> è¿›è¡Œå¼€å‘å®ç°ï¼ŒåŸºäº <code>Linux</code> å†…æ ¸çš„ <a href="https://zh.wikipedia.org/wiki/Cgroups">cgroup</a>ï¼Œ<a href="https://en.wikipedia.org/wiki/Linux_namespaces">namespace</a>ï¼Œä»¥åŠ <a href="https://docs.docker.com/storage/storagedriver/overlayfs-driver/">OverlayFS</a> ç±»çš„ <a href="https://en.wikipedia.org/wiki/Union_mount">Union FS</a> ç­‰æŠ€æœ¯ï¼Œå¯¹è¿›ç¨‹è¿›è¡Œå°è£…éš”ç¦»ï¼Œå±äº <a href="https://en.wikipedia.org/wiki/Operating-system-level_virtualization">æ“ä½œç³»ç»Ÿå±‚é¢çš„è™šæ‹ŸåŒ–æŠ€æœ¯</a>ã€‚ç”±äºéš”ç¦»çš„è¿›ç¨‹ç‹¬ç«‹äºå®¿ä¸»å’Œå…¶å®ƒçš„éš”ç¦»çš„è¿›ç¨‹ï¼Œå› æ­¤ä¹Ÿç§°å…¶ä¸ºå®¹å™¨ã€‚æœ€åˆå®ç°æ˜¯åŸºäº <a href="https://linuxcontainers.org/lxc/introduction/">LXC</a>ï¼Œä» 0.7 ç‰ˆæœ¬ä»¥åå¼€å§‹å»é™¤ <code>LXC</code>ï¼Œè½¬è€Œä½¿ç”¨è‡ªè¡Œå¼€å‘çš„ <a href="https://github.com/docker/libcontainer">libcontainer</a>ï¼Œä» 1.11 å¼€å§‹ï¼Œåˆ™è¿›ä¸€æ­¥æ¼”è¿›ä¸ºä½¿ç”¨ <a href="https://github.com/opencontainers/runc">runC</a> å’Œ <a href="https://github.com/containerd/containerd">containerd</a>ã€‚</p><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><h3 id="DevOps"><a href="#DevOps" class="headerlink" title="DevOps"></a><strong>DevOps</strong></h3><p>DevOpsï¼ˆ<strong>Dev</strong>elopmentå’Œ<strong>Op</strong>erationsçš„ç»„åˆè¯ï¼‰æ˜¯ä¸€ç§é‡è§†è½¯ä»¶å¼€å‘äººå‘˜ï¼ˆDevï¼‰å’ŒITè¿ç»´æŠ€æœ¯äººå‘˜ï¼ˆOpsï¼‰ä¹‹é—´æ²Ÿé€šåˆä½œçš„æ–‡åŒ–ã€è¿åŠ¨æˆ–æƒ¯ä¾‹ã€‚é€è¿‡è‡ªåŠ¨åŒ–â€œè½¯ä»¶äº¤ä»˜â€å’Œâ€œæ¶æ„å˜æ›´â€çš„æµç¨‹ï¼Œæ¥ä½¿å¾—æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒè½¯ä»¶èƒ½å¤Ÿæ›´åŠ åœ°å¿«æ·ã€é¢‘ç¹å’Œå¯é ã€‚</p><p>DevOps çš„å¼•å…¥èƒ½å¯¹äº§å“äº¤ä»˜ã€<a href="https://zh.wikipedia.org/wiki/%E6%B5%8B%E8%AF%95">æµ‹è¯•</a>ã€åŠŸèƒ½å¼€å‘å’Œ<a href="https://zh.wikipedia.org/wiki/%E8%BB%9F%E9%AB%94%E7%B6%AD%E8%AD%B7">ç»´æŠ¤</a>ï¼ˆåŒ…æ‹¬æ›¾ç»ç½•è§ä½†å¦‚ä»Šå·²å±¡è§ä¸é²œçš„â€œ<a href="https://zh.wikipedia.org/wiki/Hot_fix">çƒ­è¡¥ä¸</a>â€ï¼‰èµ·åˆ°æ„ä¹‰æ·±è¿œçš„å½±å“ã€‚åœ¨ç¼ºä¹ DevOps èƒ½åŠ›çš„ç»„ç»‡ä¸­ï¼Œå¼€å‘ä¸è¿è¥ä¹‹é—´å­˜åœ¨ç€ä¿¡æ¯â€œé¸¿æ²Ÿâ€ã€‚ä¾‹å¦‚è¿è¥äººå‘˜è¦æ±‚æ›´å¥½çš„å¯é æ€§å’Œå®‰å…¨æ€§ï¼Œå¼€å‘äººå‘˜åˆ™å¸Œæœ›<a href="https://zh.wikipedia.org/wiki/%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD">åŸºç¡€è®¾æ–½</a>å“åº”æ›´å¿«ï¼Œè€Œä¸šåŠ¡ç”¨æˆ·çš„éœ€æ±‚åˆ™æ˜¯æ›´å¿«åœ°å°†æ›´å¤šçš„ç‰¹æ€§å‘å¸ƒç»™æœ€ç»ˆç”¨æˆ·ä½¿ç”¨ã€‚è¿™ç§ä¿¡æ¯é¸¿æ²Ÿå°±æ˜¯æœ€å¸¸å‡ºé—®é¢˜çš„åœ°æ–¹ã€‚</p><h3 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h3><p>å®¹å™¨æœ‰æ•ˆåœ°å°†ç”±å•ä¸ªæ“ä½œç³»ç»Ÿç®¡ç†çš„èµ„æºåˆ’åˆ†åˆ°å­¤ç«‹çš„ç»„ä¸­ï¼Œä»¥æ›´å¥½åœ°åœ¨å­¤ç«‹çš„ç»„ä¹‹é—´å¹³è¡¡æœ‰å†²çªçš„èµ„æºä½¿ç”¨éœ€æ±‚ã€‚ä¸è™šæ‹ŸåŒ–ç›¸æ¯”ï¼Œè¿™æ ·æ—¢ä¸éœ€è¦æŒ‡ä»¤çº§æ¨¡æ‹Ÿï¼Œä¹Ÿä¸éœ€è¦å³æ—¶ç¼–è¯‘ã€‚å®¹å™¨å¯ä»¥åœ¨æ ¸å¿ƒ CPU æœ¬åœ°è¿è¡ŒæŒ‡ä»¤ï¼Œè€Œä¸éœ€è¦ä»»ä½•ä¸“é—¨çš„è§£é‡Šæœºåˆ¶ã€‚æ­¤å¤–ï¼Œä¹Ÿé¿å…äº†å‡†è™šæ‹ŸåŒ–ï¼ˆpara-virtualizationï¼‰å’Œç³»ç»Ÿè°ƒç”¨æ›¿æ¢ä¸­çš„å¤æ‚æ€§ã€‚</p><h3 id="è™šæ‹ŸåŒ–"><a href="#è™šæ‹ŸåŒ–" class="headerlink" title="è™šæ‹ŸåŒ–"></a>è™šæ‹ŸåŒ–</h3><p>åœ¨è®¡ç®—æœºæŠ€æœ¯ä¸­ï¼Œè™šæ‹ŸåŒ–æ˜¯ä¸€ç§èµ„æºç®¡ç†æŠ€æœ¯ï¼Œæ˜¯å°†è®¡ç®—æœºä¸­çš„å„ç§å®ä½“èµ„æºï¼Œå¦‚æœåŠ¡å™¨ã€ç½‘ç»œã€å†…å­˜åŠå­˜å‚¨ç­‰ï¼Œäºˆä»¥æŠ½è±¡ã€è½¬æ¢åå‘ˆç°å‡ºæ¥ï¼Œæ‰“ç ´å®ä½“ç»“æ„é—´çš„ä¸å¯åˆ‡å‰²çš„éšœç¢ï¼Œä½¿ç”¨æˆ·å¯ä»¥ç”¨æ¯”åŸæ¥çš„ç»„æ€æ›´å¥½çš„æ–¹å¼æ¥åº”ç”¨è¿™äº›èµ„æºã€‚</p><h3 id="Docker-ä¸è™šæ‹Ÿæœºæ¯”è¾ƒ"><a href="#Docker-ä¸è™šæ‹Ÿæœºæ¯”è¾ƒ" class="headerlink" title="Docker ä¸è™šæ‹Ÿæœºæ¯”è¾ƒ"></a>Docker ä¸è™šæ‹Ÿæœºæ¯”è¾ƒ</h3><table><thead><tr><th>ç‰¹æ€§</th><th>å®¹å™¨</th><th>è™šæ‹Ÿæœº</th></tr></thead><tbody><tr><td>å¯åŠ¨</td><td>ç§’çº§</td><td>åˆ†é’Ÿçº§</td></tr><tr><td>ç¡¬ç›˜ä½¿ç”¨</td><td>ä¸€èˆ¬ä¸º <code>MB</code></td><td>ä¸€èˆ¬ä¸º <code>GB</code></td></tr><tr><td>æ€§èƒ½</td><td>æ¥è¿‘åŸç”Ÿ</td><td>å¼±äº</td></tr><tr><td>ç³»ç»Ÿæ”¯æŒé‡</td><td>å•æœºæ”¯æŒä¸Šåƒä¸ªå®¹å™¨</td><td>ä¸€èˆ¬å‡ åä¸ª</td></tr></tbody></table><p>å¦‚ä¸‹å›¾ï¼Œè™šæ‹Ÿæœºæ˜¯åœ¨ç¡¬ä»¶å±‚é¢å®ç°è™šæ‹ŸåŒ–ï¼Œéœ€è¦é¢å¤–çš„è™šæ‹Ÿæœºç®¡ç†åº”ç”¨å’Œè™šæ‹Ÿæœºæ“ä½œç³»ç»Ÿå±‚ã€‚Dockerå®¹å™¨æ˜¯åœ¨æ“ä½œç³»ç»Ÿå±‚é¢ä¸Šå®ç°è™šæ‹ŸåŒ–ï¼Œç›´æ¥å¤ç”¨æœ¬åœ°ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œå› æ­¤æ›´åŠ è½»é‡çº§ã€‚</p><p><img src="https://i.loli.net/2020/03/31/mZiyHL2kGAgrMFx.png"></p><h3 id="Dockeræ ¸å¿ƒæ¦‚å¿µ"><a href="#Dockeræ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="Dockeræ ¸å¿ƒæ¦‚å¿µ"></a>Dockeræ ¸å¿ƒæ¦‚å¿µ</h3><h4 id="é•œåƒï¼ˆImageï¼‰"><a href="#é•œåƒï¼ˆImageï¼‰" class="headerlink" title="é•œåƒï¼ˆImageï¼‰"></a>é•œåƒï¼ˆImageï¼‰</h4><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ“ä½œç³»ç»Ÿåˆ†ä¸ºå†…æ ¸å’Œç”¨æˆ·ç©ºé—´ã€‚å¯¹äº Linux è€Œè¨€ï¼Œå†…æ ¸å¯åŠ¨åï¼Œä¼šæŒ‚è½½ <code>root</code> æ–‡ä»¶ç³»ç»Ÿä¸ºå…¶æä¾›ç”¨æˆ·ç©ºé—´æ”¯æŒã€‚è€Œ Docker é•œåƒï¼ˆImageï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ <code>ubuntu:18.04</code> å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu 18.04 æœ€å°ç³»ç»Ÿçš„ <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>Docker é•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚</p><p><strong>åˆ†å±‚å­˜å‚¨</strong></p><p>å› ä¸ºé•œåƒåŒ…å«æ“ä½œç³»ç»Ÿå®Œæ•´çš„ <code>root</code> æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶ä½“ç§¯å¾€å¾€æ˜¯åºå¤§çš„ï¼Œå› æ­¤åœ¨ Docker è®¾è®¡æ—¶ï¼Œå°±å……åˆ†åˆ©ç”¨ <a href="https://en.wikipedia.org/wiki/Union_mount">Union FS</a> çš„æŠ€æœ¯ï¼Œå°†å…¶è®¾è®¡ä¸ºåˆ†å±‚å­˜å‚¨çš„æ¶æ„ã€‚æ‰€ä»¥ä¸¥æ ¼æ¥è¯´ï¼Œé•œåƒå¹¶éæ˜¯åƒä¸€ä¸ª ISO é‚£æ ·çš„æ‰“åŒ…æ–‡ä»¶ï¼Œé•œåƒåªæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„æ¦‚å¿µï¼Œå…¶å®é™…ä½“ç°å¹¶éç”±ä¸€ä¸ªæ–‡ä»¶ç»„æˆï¼Œè€Œæ˜¯ç”±ä¸€ç»„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œæˆ–è€…è¯´ï¼Œç”±å¤šå±‚æ–‡ä»¶ç³»ç»Ÿè”åˆç»„æˆã€‚</p><p>é•œåƒæ„å»ºæ—¶ï¼Œä¼šä¸€å±‚å±‚æ„å»ºï¼Œå‰ä¸€å±‚æ˜¯åä¸€å±‚çš„åŸºç¡€ã€‚æ¯ä¸€å±‚æ„å»ºå®Œå°±ä¸ä¼šå†å‘ç”Ÿæ”¹å˜ï¼Œåä¸€å±‚ä¸Šçš„ä»»ä½•æ”¹å˜åªå‘ç”Ÿåœ¨è‡ªå·±è¿™ä¸€å±‚ã€‚æ¯”å¦‚ï¼Œåˆ é™¤å‰ä¸€å±‚æ–‡ä»¶çš„æ“ä½œï¼Œå®é™…ä¸æ˜¯çœŸçš„åˆ é™¤å‰ä¸€å±‚çš„æ–‡ä»¶ï¼Œè€Œæ˜¯ä»…åœ¨å½“å‰å±‚æ ‡è®°ä¸ºè¯¥æ–‡ä»¶å·²åˆ é™¤ã€‚åœ¨æœ€ç»ˆå®¹å™¨è¿è¡Œçš„æ—¶å€™ï¼Œè™½ç„¶ä¸ä¼šçœ‹åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯å®é™…ä¸Šè¯¥æ–‡ä»¶ä¼šä¸€ç›´è·Ÿéšé•œåƒã€‚å› æ­¤ï¼Œåœ¨æ„å»ºé•œåƒçš„æ—¶å€™ï¼Œéœ€è¦é¢å¤–å°å¿ƒï¼Œæ¯ä¸€å±‚å°½é‡åªåŒ…å«è¯¥å±‚éœ€è¦æ·»åŠ çš„ä¸œè¥¿ï¼Œä»»ä½•é¢å¤–çš„ä¸œè¥¿åº”è¯¥åœ¨è¯¥å±‚æ„å»ºç»“æŸå‰æ¸…ç†æ‰ã€‚</p><p>åˆ†å±‚å­˜å‚¨çš„ç‰¹å¾è¿˜ä½¿å¾—é•œåƒçš„å¤ç”¨ã€å®šåˆ¶å˜çš„æ›´ä¸ºå®¹æ˜“ã€‚ç”šè‡³å¯ä»¥ç”¨ä¹‹å‰æ„å»ºå¥½çš„é•œåƒä½œä¸ºåŸºç¡€å±‚ï¼Œç„¶åè¿›ä¸€æ­¥æ·»åŠ æ–°çš„å±‚ï¼Œä»¥å®šåˆ¶è‡ªå·±æ‰€éœ€çš„å†…å®¹ï¼Œæ„å»ºæ–°çš„é•œåƒã€‚</p><h4 id="å®¹å™¨ï¼ˆContainerï¼‰"><a href="#å®¹å™¨ï¼ˆContainerï¼‰" class="headerlink" title="å®¹å™¨ï¼ˆContainerï¼‰"></a>å®¹å™¨ï¼ˆContainerï¼‰</h4><p>é•œåƒï¼ˆ<code>Image</code>ï¼‰å’Œå®¹å™¨ï¼ˆ<code>Container</code>ï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ <code>ç±»</code> å’Œ <code>å®ä¾‹</code> ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</p><p>å®¹å™¨çš„å®è´¨æ˜¯è¿›ç¨‹ï¼Œä½†ä¸ç›´æ¥åœ¨å®¿ä¸»æ‰§è¡Œçš„è¿›ç¨‹ä¸åŒï¼Œå®¹å™¨è¿›ç¨‹è¿è¡Œäºå±äºè‡ªå·±çš„ç‹¬ç«‹çš„ <a href="https://en.wikipedia.org/wiki/Linux_namespaces">å‘½åç©ºé—´</a>ã€‚å› æ­¤å®¹å™¨å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„ <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€è‡ªå·±çš„ç½‘ç»œé…ç½®ã€è‡ªå·±çš„è¿›ç¨‹ç©ºé—´ï¼Œç”šè‡³è‡ªå·±çš„ç”¨æˆ· ID ç©ºé—´ã€‚å®¹å™¨å†…çš„è¿›ç¨‹æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒé‡Œï¼Œä½¿ç”¨èµ·æ¥ï¼Œå°±å¥½åƒæ˜¯åœ¨ä¸€ä¸ªç‹¬ç«‹äºå®¿ä¸»çš„ç³»ç»Ÿä¸‹æ“ä½œä¸€æ ·ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—å®¹å™¨å°è£…çš„åº”ç”¨æ¯”ç›´æ¥åœ¨å®¿ä¸»è¿è¡Œæ›´åŠ å®‰å…¨ã€‚ä¹Ÿå› ä¸ºè¿™ç§éš”ç¦»çš„ç‰¹æ€§ï¼Œå¾ˆå¤šäººåˆå­¦ Docker æ—¶å¸¸å¸¸ä¼šæ··æ·†å®¹å™¨å’Œè™šæ‹Ÿæœºã€‚</p><p>å‰é¢è®²è¿‡é•œåƒä½¿ç”¨çš„æ˜¯åˆ†å±‚å­˜å‚¨ï¼Œå®¹å™¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æ¯ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶ï¼Œæ˜¯ä»¥é•œåƒä¸ºåŸºç¡€å±‚ï¼Œåœ¨å…¶ä¸Šåˆ›å»ºä¸€ä¸ªå½“å‰å®¹å™¨çš„å­˜å‚¨å±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç§°è¿™ä¸ªä¸ºå®¹å™¨è¿è¡Œæ—¶è¯»å†™è€Œå‡†å¤‡çš„å­˜å‚¨å±‚ä¸º <strong>å®¹å™¨å­˜å‚¨å±‚</strong>ã€‚</p><p>å®¹å™¨å­˜å‚¨å±‚çš„ç”Ÿå­˜å‘¨æœŸå’Œå®¹å™¨ä¸€æ ·ï¼Œå®¹å™¨æ¶ˆäº¡æ—¶ï¼Œå®¹å™¨å­˜å‚¨å±‚ä¹Ÿéšä¹‹æ¶ˆäº¡ã€‚å› æ­¤ï¼Œä»»ä½•ä¿å­˜äºå®¹å™¨å­˜å‚¨å±‚çš„ä¿¡æ¯éƒ½ä¼šéšå®¹å™¨åˆ é™¤è€Œä¸¢å¤±ã€‚</p><p>æŒ‰ç…§ Docker æœ€ä½³å®è·µçš„è¦æ±‚ï¼Œå®¹å™¨ä¸åº”è¯¥å‘å…¶å­˜å‚¨å±‚å†…å†™å…¥ä»»ä½•æ•°æ®ï¼Œå®¹å™¨å­˜å‚¨å±‚è¦ä¿æŒæ— çŠ¶æ€åŒ–ã€‚æ‰€æœ‰çš„æ–‡ä»¶å†™å…¥æ“ä½œï¼Œéƒ½åº”è¯¥ä½¿ç”¨ <a href="https://vuepress.mirror.docker-practice.com/data_management/volume.html">æ•°æ®å·ï¼ˆVolumeï¼‰</a>ã€æˆ–è€…ç»‘å®šå®¿ä¸»ç›®å½•ï¼Œåœ¨è¿™äº›ä½ç½®çš„è¯»å†™ä¼šè·³è¿‡å®¹å™¨å­˜å‚¨å±‚ï¼Œç›´æ¥å¯¹å®¿ä¸»ï¼ˆæˆ–ç½‘ç»œå­˜å‚¨ï¼‰å‘ç”Ÿè¯»å†™ï¼Œå…¶æ€§èƒ½å’Œç¨³å®šæ€§æ›´é«˜ã€‚</p><p>æ•°æ®å·çš„ç”Ÿå­˜å‘¨æœŸç‹¬ç«‹äºå®¹å™¨ï¼Œå®¹å™¨æ¶ˆäº¡ï¼Œæ•°æ®å·ä¸ä¼šæ¶ˆäº¡ã€‚å› æ­¤ï¼Œä½¿ç”¨æ•°æ®å·åï¼Œå®¹å™¨åˆ é™¤æˆ–è€…é‡æ–°è¿è¡Œä¹‹åï¼Œæ•°æ®å´ä¸ä¼šä¸¢å¤±ã€‚</p><h4 id="ä»“åº“æ³¨å†ŒæœåŠ¡å™¨ï¼ˆRegistryï¼‰"><a href="#ä»“åº“æ³¨å†ŒæœåŠ¡å™¨ï¼ˆRegistryï¼‰" class="headerlink" title="ä»“åº“æ³¨å†ŒæœåŠ¡å™¨ï¼ˆRegistryï¼‰"></a>ä»“åº“æ³¨å†ŒæœåŠ¡å™¨ï¼ˆRegistryï¼‰</h4><p>ä¸€ä¸ª <strong>Docker Registry</strong> ä¸­å¯ä»¥åŒ…å«å¤šä¸ª <strong>ä»“åº“</strong>ï¼ˆ<code>Repository</code>ï¼‰ï¼›æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ª <strong>æ ‡ç­¾</strong>ï¼ˆ<code>Tag</code>ï¼‰ï¼›æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚</p><p>é€šå¸¸ï¼Œä¸€ä¸ªä»“åº“ä¼šåŒ…å«åŒä¸€ä¸ªè½¯ä»¶ä¸åŒç‰ˆæœ¬çš„é•œåƒï¼Œè€Œæ ‡ç­¾å°±å¸¸ç”¨äºå¯¹åº”è¯¥è½¯ä»¶çš„å„ä¸ªç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>&lt;ä»“åº“å&gt;:&lt;æ ‡ç­¾&gt;</code> çš„æ ¼å¼æ¥æŒ‡å®šå…·ä½“æ˜¯è¿™ä¸ªè½¯ä»¶å“ªä¸ªç‰ˆæœ¬çš„é•œåƒã€‚å¦‚æœä¸ç»™å‡ºæ ‡ç­¾ï¼Œå°†ä»¥ <code>latest</code> ä½œä¸ºé»˜è®¤æ ‡ç­¾ã€‚</p><p>ä»¥ <a href="https://hub.docker.com/_/ubuntu">Ubuntu é•œåƒ</a> ä¸ºä¾‹ï¼Œ<code>ubuntu</code> æ˜¯ä»“åº“çš„åå­—ï¼Œå…¶å†…åŒ…å«æœ‰ä¸åŒçš„ç‰ˆæœ¬æ ‡ç­¾ï¼Œå¦‚ï¼Œ<code>16.04</code>, <code>18.04</code>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>ubuntu:16.04</code>ï¼Œæˆ–è€… <code>ubuntu:18.04</code> æ¥å…·ä½“æŒ‡å®šæ‰€éœ€å“ªä¸ªç‰ˆæœ¬çš„é•œåƒã€‚å¦‚æœå¿½ç•¥äº†æ ‡ç­¾ï¼Œæ¯”å¦‚ <code>ubuntu</code>ï¼Œé‚£å°†è§†ä¸º <code>ubuntu:latest</code>ã€‚</p><p>ä»“åº“åç»å¸¸ä»¥ <em>ä¸¤æ®µå¼è·¯å¾„</em> å½¢å¼å‡ºç°ï¼Œæ¯”å¦‚ <code>jwilder/nginx-proxy</code>ï¼Œå‰è€…å¾€å¾€æ„å‘³ç€ Docker Registry å¤šç”¨æˆ·ç¯å¢ƒä¸‹çš„ç”¨æˆ·åï¼Œåè€…åˆ™å¾€å¾€æ˜¯å¯¹åº”çš„è½¯ä»¶åã€‚ä½†è¿™å¹¶éç»å¯¹ï¼Œå–å†³äºæ‰€ä½¿ç”¨çš„å…·ä½“ Docker Registry çš„è½¯ä»¶æˆ–æœåŠ¡ã€‚</p><p><strong>å…¬æœ‰ Docker Registryï¼š</strong></p><ul><li><a href="https://hub.docker.com/">Docker Hub</a></li><li><a href="https://c.163.com/hub#/m/library/">ç½‘æ˜“äº‘é•œåƒæœåŠ¡</a></li><li><a href="https://hub.daocloud.io/">DaoCloud é•œåƒå¸‚åœº</a></li><li><a href="https://cr.console.aliyun.com/">aliyuné•œåƒåº“</a></li></ul><p><strong>ç§æœ‰ Docker Registryï¼š</strong></p><ul><li><a href="https://vuepress.mirror.docker-practice.com/repository/nexus3_registry.html">Sonatype Nexus</a></li><li><a href="https://github.com/goharbor/harbor">Harbor</a></li></ul><h3 id="å®ˆæŠ¤è¿›ç¨‹-daemon"><a href="#å®ˆæŠ¤è¿›ç¨‹-daemon" class="headerlink" title="å®ˆæŠ¤è¿›ç¨‹ daemon"></a>å®ˆæŠ¤è¿›ç¨‹ daemon</h3><p>åœ¨ä¸€ä¸ªå¤šä»»åŠ¡çš„ç”µè„‘æ“ä½œç³»ç»Ÿä¸­ï¼Œå®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰æ˜¯ä¸€ç§åœ¨åå°æ‰§è¡Œçš„ç”µè„‘ç¨‹åºã€‚æ­¤ç±»ç¨‹åºä¼šè¢«ä»¥è¿›ç¨‹çš„å½¢å¼åˆå§‹åŒ–ã€‚å®ˆæŠ¤è¿›ç¨‹ç¨‹åºçš„åç§°é€šå¸¸ä»¥å­—æ¯â€dâ€œç»“å°¾ï¼šä¾‹å¦‚ï¼Œ<code>syslogd</code> å°±æ˜¯æŒ‡ç®¡ç†ç³»ç»Ÿæ—¥å¿—çš„å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p>é€šå¸¸ï¼Œå®ˆæŠ¤è¿›ç¨‹æ²¡æœ‰ä»»ä½•å­˜åœ¨çš„çˆ¶è¿›ç¨‹ï¼ˆå³PPID&#x3D;1ï¼‰ï¼Œä¸”åœ¨ UNIX ç³»ç»Ÿè¿›ç¨‹å±‚çº§ä¸­ç›´æ¥ä½äº init ä¹‹ä¸‹ã€‚å®ˆæŠ¤è¿›ç¨‹ç¨‹åºé€šå¸¸é€šè¿‡å¦‚ä¸‹æ–¹æ³•æ˜¯è‡ªå·±æˆä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼šå¯¹ä¸€ä¸ªå­è¿›ç¨‹è¿›è¡Œ forkï¼Œç„¶åä½¿å…¶çˆ¶è¿›ç¨‹ç«‹å³ç»ˆæ­¢ï¼Œä½¿å¾—è¿™ä¸ªå­è¿›ç¨‹èƒ½åœ¨ init ä¸‹è¿è¡Œã€‚è¿™ç§æ–¹æ³•é€šå¸¸è¢«ç§°ä¸ºâ€è„±å£³â€œã€‚</p><p>ç³»ç»Ÿé€šå¸¸åœ¨å¯åŠ¨æ—¶ä¸€åŒå¼•å¯¼å®ˆæŠ¤è¿›ç¨‹ã€‚å®ˆæŠ¤è¿›ç¨‹ä¸ºå¯¹ç½‘ç»œè¯·æ±‚ï¼Œç¡¬ä»¶æ´»åŠ¨ç­‰è¿›è¡Œå“åº”ï¼Œæˆ–å…¶ä»–é€šè¿‡æŸäº›ä»»åŠ¡å¯¹å…¶ä»–åº”ç”¨ç¨‹åºçš„è¯·æ±‚è¿›è¡Œå›åº”æä¾›æ”¯æŒã€‚å®ˆæŠ¤è¿›ç¨‹ä¹Ÿèƒ½å¤Ÿå¯¹ç¡¬ä»¶è¿›è¡Œé…ç½®ï¼ˆå¦‚æŸäº›Linuxç³»ç»Ÿä¸Šçš„devfsdï¼‰ï¼Œè¿è¡Œè®¡åˆ’ä»»åŠ¡ï¼ˆä¾‹å¦‚cronï¼‰ï¼Œä»¥åŠè¿è¡Œå…¶ä»–ä»»åŠ¡ã€‚</p><p>åœ¨ DOS ç¯å¢ƒä¸­ï¼Œæ­¤ç±»åº”ç”¨ç¨‹åºè¢«ç§°ä¸ºé©»ç•™ç¨‹åºï¼ˆTSRï¼‰ã€‚åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œç”±ç§°ä¸º WindowsæœåŠ¡çš„åº”ç”¨ç¨‹åºæ¥å±¥è¡Œå®ˆæŠ¤è¿›ç¨‹çš„èŒè´£ã€‚</p><p>åœ¨åŸæœ¬çš„ Mac OS ç³»ç»Ÿä¸­ï¼Œæ­¤ç±»åº”ç”¨ç¨‹åºè¢«ç§°ä¸ºâ€extensionsâ€œã€‚è€Œä½œä¸º Unux-like çš„ Mac OS X æœ‰å®ˆæŠ¤è¿›ç¨‹ã€‚</p><h2 id="å®‰è£…é…ç½®"><a href="#å®‰è£…é…ç½®" class="headerlink" title="å®‰è£…é…ç½®"></a>å®‰è£…é…ç½®</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šLinux ubuntu18 4.15.0-91-genericï¼Œé€šè¿‡ <code>uname -a</code> æŸ¥çœ‹</li><li>docker-ceé•œåƒï¼š<a href="https://developer.aliyun.com/mirror/docker-ce?spm=a2c6h.13651102.0.0.52471b11cIp2pH">https://developer.aliyun.com/mirror/docker-ce?spm=a2c6h.13651102.0.0.52471b11cIp2pH</a></li></ul><h3 id="å¸è½½æ—§ç‰ˆæœ¬"><a href="#å¸è½½æ—§ç‰ˆæœ¬" class="headerlink" title="å¸è½½æ—§ç‰ˆæœ¬"></a>å¸è½½æ—§ç‰ˆæœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt remove docker docker-engine docker.io containerd runc</span></span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡è½¯ä»¶åŒ…å®‰è£…"><a href="#é€šè¿‡è½¯ä»¶åŒ…å®‰è£…" class="headerlink" title="é€šè¿‡è½¯ä»¶åŒ…å®‰è£…"></a>é€šè¿‡è½¯ä»¶åŒ…å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…·</span></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get -y install apt-transport-https ca-certificates curl gnupg-agent pass software-properties-common</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">step 2: å®‰è£…GPGè¯ä¹¦</span></span><br><span class="line">curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step 3: å†™å…¥è½¯ä»¶æºä¿¡æ¯</span></span><br><span class="line">sudo add-apt-repository &quot;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step 4: æ›´æ–°å¹¶å®‰è£…Docker-CE</span></span><br><span class="line">sudo apt-get -y update</span><br><span class="line">sudo apt-get -y install docker-ce</span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡è„šæœ¬å®‰è£…"><a href="#é€šè¿‡è„šæœ¬å®‰è£…" class="headerlink" title="é€šè¿‡è„šæœ¬å®‰è£…"></a>é€šè¿‡è„šæœ¬å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -fsSL https://get.docker.com -o get-docker.sh</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo sh get-docker.sh --mirror Aliyun</span></span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåï¼Œä¼šè‡ªåŠ¨å¯åŠ¨ Docker æœåŠ¡ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ <code>systemctl is-enabled docker</code> æ¥ç¡®è®¤ Docker æœåŠ¡æ˜¯å¦æ˜¯å¼€æœºè‡ªå¯åŠ¨ã€‚</p><h3 id="å¯é€‰é…ç½®"><a href="#å¯é€‰é…ç½®" class="headerlink" title="å¯é€‰é…ç½®"></a>å¯é€‰é…ç½®</h3><p><strong>è§£å†³ <code>WARNING: Your kernel does not support cgroup swap limit capabilities</code>ï¼š</strong></p><ol><li><p>ç¼–è¾‘ <code>/etc/default/grub</code> æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">nano /etc/default/grub</span></span><br></pre></td></tr></table></figure></li><li><p>æ‰¾åˆ° <code>GRUB_CMDLINE_LINUX=</code> é…ç½®é¡¹ï¼Œå¹¶è¿½åŠ  <code>cgroup_enable=memory swapaccount=1</code>ã€‚</p></li><li><p>ä¿å­˜æ–‡ä»¶åæ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼š<code>sudo update-grub</code></p></li><li><p>é‡å¯æœåŠ¡å™¨ï¼š<code>reboot</code></p></li></ol><h3 id="æµ‹è¯•-Docker-æ˜¯å¦å®‰è£…æ­£ç¡®"><a href="#æµ‹è¯•-Docker-æ˜¯å¦å®‰è£…æ­£ç¡®" class="headerlink" title="æµ‹è¯• Docker æ˜¯å¦å®‰è£…æ­£ç¡®"></a>æµ‹è¯• Docker æ˜¯å¦å®‰è£…æ­£ç¡®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run hello-world</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šå‘½ä»¤ï¼Œè‹¥èƒ½æ­£å¸¸è¾“å‡ºä»¥ä¸‹ä¿¡æ¯ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">1b930d010525: Pull complete</span><br><span class="line">Digest: sha256:f9dfddf63636d84ef479d645ab5885156ae030f611a56f3a7ac7f2fdd86d7e4e</span><br><span class="line">Status: Downloaded newer image for hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image which runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure><h3 id="Docker-Deamon-é…ç½®"><a href="#Docker-Deamon-é…ç½®" class="headerlink" title="Docker Deamon é…ç½®"></a>Docker Deamon é…ç½®</h3><p>æ‰§è¡Œ <code>nano /etc/docker/daemon.json</code> ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;ip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;experimental&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://registry.docker-cn.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://mirror.ccs.tencentyun.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;http://docker.mirrors.ustc.edu.cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;http://hub-mirror.c.163.com&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨æœåŠ¡:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">systemctl daemon-reload</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">systemctl restart docker.service</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨Dockeré•œåƒ"><a href="#ä½¿ç”¨Dockeré•œåƒ" class="headerlink" title="ä½¿ç”¨Dockeré•œåƒ"></a>ä½¿ç”¨Dockeré•œåƒ</h2><h3 id="è·å–é•œåƒ"><a href="#è·å–é•œåƒ" class="headerlink" title="è·å–é•œåƒ"></a>è·å–é•œåƒ</h3><blockquote><p><code>docker pull [é€‰é¡¹] [Docker Registry åœ°å€[:ç«¯å£å·]/][ç”¨æˆ·å]&lt;ä»“åº“å&gt;[:TAG]</code></p></blockquote><ul><li>é»˜è®¤é€‰é¡¹<ul><li><code>-a</code>ï¼Œ<code>--all-tags=true|false</code>ï¼šæ˜¯å¦è·å–ä»“åº“ä¸­çš„æ‰€æœ‰é•œåƒï¼Œé»˜è®¤ä¸ºå¦</li><li><code>--disable-content-trust</code>ï¼šå–æ¶ˆé•œåƒçš„å†…å®¹æ ¡éªŒï¼Œé»˜è®¤ä¸ºçœŸ</li></ul></li><li>é»˜è®¤ Docker Registryï¼š<code>registry.hub.docker.com</code></li><li>é»˜è®¤ç”¨æˆ·åï¼š<code>library</code>ï¼Œä¹Ÿå°±æ˜¯å®˜æ–¹é•œåƒ</li><li>é»˜è®¤TAGï¼š<code>latest</code></li></ul><h3 id="æŸ¥çœ‹é•œåƒä¿¡æ¯"><a href="#æŸ¥çœ‹é•œåƒä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹é•œåƒä¿¡æ¯"></a>æŸ¥çœ‹é•œåƒä¿¡æ¯</h3><h4 id="åˆ—å‡ºæœ¬åœ°ä¸»æœºä¸Šå·²æœ‰é•œåƒ"><a href="#åˆ—å‡ºæœ¬åœ°ä¸»æœºä¸Šå·²æœ‰é•œåƒ" class="headerlink" title="åˆ—å‡ºæœ¬åœ°ä¸»æœºä¸Šå·²æœ‰é•œåƒ"></a>åˆ—å‡ºæœ¬åœ°ä¸»æœºä¸Šå·²æœ‰é•œåƒ</h4><blockquote><p><code>docker image ls</code> | <code>docker images</code></p></blockquote><p>é•œåƒçš„å¤§å°ä¿¡æ¯åªæ˜¯è¡¨ç¤ºäº†è¯¥é•œåƒçš„é€»è¾‘ä½“ç§¯å¤§å°ï¼Œå®é™…ä¸Šç”±äºç›¸åŒçš„é•œåƒå±‚æœ¬åœ°åªä¼šå­˜å‚¨ä¸€ä»½ï¼Œç‰©ç†ä¸Šå ç”¨çš„å­˜å‚¨ç©ºé—´ä¼šå°äºå„é•œåƒé€»è¾‘ä½“ç§¯ä¹‹å’Œã€‚</p><h4 id="ä½¿ç”¨-tag-å‘½ä»¤æ·»åŠ é•œåƒæ ‡ç­¾"><a href="#ä½¿ç”¨-tag-å‘½ä»¤æ·»åŠ é•œåƒæ ‡ç­¾" class="headerlink" title="ä½¿ç”¨ tag å‘½ä»¤æ·»åŠ é•œåƒæ ‡ç­¾"></a>ä½¿ç”¨ tag å‘½ä»¤æ·»åŠ é•œåƒæ ‡ç­¾</h4><blockquote><p><code>docker tag ubuntu:latest myubuntu:latest</code></p></blockquote><p>ä¸ºäº†æ–¹ä¾¿åœ¨åç»­å·¥ä½œä¸­ä½¿ç”¨ç‰¹å®šé•œåƒï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <code>docker tag</code> å‘½ä»¤æ¥ä¸ºæœ¬åœ°é•œåƒä»»æ„æ·»åŠ æ–°çš„æ ‡ç­¾ã€‚</p><h4 id="ä½¿ç”¨-inspect-å‘½ä»¤æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯"><a href="#ä½¿ç”¨-inspect-å‘½ä»¤æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯" class="headerlink" title="ä½¿ç”¨ inspect å‘½ä»¤æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯"></a>ä½¿ç”¨ inspect å‘½ä»¤æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</h4><blockquote><p><code>docker inspect &lt;ä»“åº“&gt;</code></p></blockquote><p>ä½¿ç”¨ <code>docker inspect</code> å‘½ä»¤å¯ä»¥è·å–è¯¥é•œåƒçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åˆ¶ä½œè€…ã€é€‚åº”æ¶æ„ã€å„å±‚çš„æ•°å­—æ‘˜è¦ç­‰ã€‚</p><h4 id="ä½¿ç”¨-history-å‘½ä»¤æŸ¥çœ‹é•œåƒå†å²"><a href="#ä½¿ç”¨-history-å‘½ä»¤æŸ¥çœ‹é•œåƒå†å²" class="headerlink" title="ä½¿ç”¨ history å‘½ä»¤æŸ¥çœ‹é•œåƒå†å²"></a>ä½¿ç”¨ history å‘½ä»¤æŸ¥çœ‹é•œåƒå†å²</h4><blockquote><p><code>docker history &lt;REPOSITORY&gt;[:TAG]</code> æˆ– <code>docker history &lt;IMAGE ID&gt;</code></p></blockquote><p>æ³¨æ„ï¼Œè¿‡é•¿çš„å‘½ä»¤ä¼šè¢«è‡ªåŠ¨æˆªæ–­äº†ï¼Œå¯ä»¥ä½¿ç”¨ <code>--no-trunc</code> é€‰é¡¹æ¥è¾“å‡ºå®Œæ•´å‘½ä»¤ã€‚</p><h4 id="åˆ é™¤é•œåƒ"><a href="#åˆ é™¤é•œåƒ" class="headerlink" title="åˆ é™¤é•œåƒ"></a>åˆ é™¤é•œåƒ</h4><ol><li><p>ä½¿ç”¨æ ‡ç­¾åˆ é™¤é•œåƒ</p><blockquote><p><code>docker rmi &lt;IMAGE&gt; [IMAGE...]</code> æˆ– <code>docker image rm &lt;IMAGE&gt; [IMAGE...]</code></p></blockquote></li><li><p>ä½¿ç”¨é•œåƒ ID æ¥åˆ é™¤é•œåƒ</p><blockquote><p><code>docker rmi &lt;IMAGE ID&gt;</code></p></blockquote><p>å½“ä½¿ç”¨ <code>docker rmi</code> å‘½ä»¤ï¼Œå¹¶ä¸”åé¢è·Ÿä¸Šé•œåƒçš„ IDï¼ˆä¹Ÿå¯ä»¥æ˜¯èƒ½è¿›è¡ŒåŒºåˆ†çš„éƒ¨åˆ† ID ä¸²å‰ç¼€ï¼‰æ—¶ï¼Œä¼šå…ˆå°è¯•åˆ é™¤æ‰€æœ‰æŒ‡å‘è¯¥é•œåƒçš„æ ‡ç­¾ï¼Œç„¶ååˆ é™¤è¯¥é•œåƒæ–‡ä»¶æœ¬èº«ã€‚</p><blockquote><p>æ³¨æ„ï¼Œå½“æœ‰åŸºäºè¯¥é•œåƒåˆ›å»ºçš„å®¹å™¨æ—¶ï¼Œé•œåƒæ–‡ä»¶é»˜è®¤æ˜¯æ— æ³•è¢«åˆ é™¤çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>docker ps -a</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹æœ¬æœºä¸Šå­˜åœ¨çš„æ‰€æœ‰å®¹å™¨ã€‚</p><p>æœ€ä½³å®è·µï¼šå…ˆç”¨ <code>docker rm &lt;Container ID&gt;</code> åˆ é™¤ä¾èµ–è¯¥é•œåƒçš„æ‰€æœ‰å®¹æ˜“ï¼Œç„¶åæ‰§è¡Œ <code>docker rmi &lt;IMAGE ID&gt;</code> å†æ¥åˆ é™¤é•œåƒã€‚</p></blockquote></li></ol><h4 id="æ¸…ç†é•œåƒ"><a href="#æ¸…ç†é•œåƒ" class="headerlink" title="æ¸…ç†é•œåƒ"></a>æ¸…ç†é•œåƒ</h4><blockquote><p><code>docker image prune [options]</code></p><ul><li><code>-a</code>ï¼Œ<code>--all</code>ï¼šåˆ é™¤æ‰€æœ‰æ— ç”¨é•œåƒï¼Œä¸å…‰æ˜¯ä¸´æ—¶é•œåƒ</li><li><code>-f</code>,<code>--force</code>ï¼šå¼ºåˆ¶åˆ é™¤é•œåƒï¼Œè€Œä¸è¿›è¡Œæç¤ºç¡®è®¤</li></ul></blockquote><p>ä½¿ç”¨ Docker ä¸€æ®µæ—¶é—´åï¼Œç³»ç»Ÿä¸­å¯èƒ½ä¼šé—ç•™ä¸€äº›ä¸´æ—¶çš„é•œåƒæ–‡ä»¶ï¼Œä»¥åŠæ²¡æœ‰ä½¿ç”¨çš„é•œåƒï¼Œå¯ä»¥é€šè¿‡ <code>docker image prune</code> å‘½ä»¤æ¥è¿›è¡Œæ¸…ç†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç»“åˆ crontab æ¥å®šæ—¶æ¸…ç†ï¼Œæ‰§è¡Œ <code>crontab -e</code>ï¼Œå†™å…¥ä¸€ä¸‹é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ä¸€å®šè¦è®°å¾—åœ¨åé¢æŒ‰ Enter è¾“å…¥æ¢è¡Œç¬¦ï¼Œå¦åˆ™ä¸ä¼šç”Ÿæ•ˆçš„</span><br><span class="line">59 23 * * * docker image prune -f</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºé•œåƒ"><a href="#åˆ›å»ºé•œåƒ" class="headerlink" title="åˆ›å»ºé•œåƒ"></a>åˆ›å»ºé•œåƒ</h3><h4 id="1-åŸºäºå·²æœ‰å®¹å™¨åˆ›å»º"><a href="#1-åŸºäºå·²æœ‰å®¹å™¨åˆ›å»º" class="headerlink" title="1. åŸºäºå·²æœ‰å®¹å™¨åˆ›å»º"></a>1. åŸºäºå·²æœ‰å®¹å™¨åˆ›å»º</h4><blockquote><p><code>docker commit [OPTIONS] &lt;CONTAINER&gt; &lt;REPOSITORY&gt;[:TAG]</code></p><ul><li><code>-a</code>ï¼Œ<code>--author=</code>ï¼šä½œè€…ä¿¡æ¯</li><li><code>-m</code>ï¼Œ<code>--message=&quot;&quot;</code>ï¼šæäº¤ä¿¡æ¯</li><li><code>-p</code>ï¼Œ<code>--pause=true</code>ï¼šæäº¤æ—¶æš‚åœå®¹å™¨æ‰§è¡Œ</li></ul></blockquote><p>é¦–å…ˆï¼Œå¯åŠ¨ä¸€ä¸ª alpine é•œåƒï¼Œå¹¶åœ¨å…¶ä¸­è¿›è¡Œå®‰è£… nano çš„æ“ä½œï¼Œç„¶åå‘å¸ƒä¸€ä¸ªæ–°çš„é•œåƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -it alpine bash</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker commit -m <span class="string">&quot;install nano&quot;</span> -a <span class="string">&quot;æ¨ä¿Šå®&quot;</span> ff3034d2ffa7 my-alpine:0.1</span></span><br></pre></td></tr></table></figure><h4 id="2-åŸºäº-Dockerfile-åˆ›å»º"><a href="#2-åŸºäº-Dockerfile-åˆ›å»º" class="headerlink" title="2. åŸºäº Dockerfile åˆ›å»º"></a>2. åŸºäº Dockerfile åˆ›å»º</h4><blockquote><p><code>docker build -t &lt;IMAGE NAME&gt; &lt;ä¸Šä¸‹æ–‡è·¯å¾„/URL/-&gt;</code></p></blockquote><p>é€šè¿‡ Dockerfile åˆ›å»ºæ˜¯æœ€å¸¸è§çš„æ–¹å¼ã€‚Dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œåˆ©ç”¨æŒ‡å®šçš„æŒ‡ä»¤æè¿°åŸºäºæŸä¸ªçˆ¶é•œåƒåˆ›å»ºæ–°é•œåƒçš„è¿‡ç¨‹ã€‚</p><p>ä¸‹é¢ç»™å‡º Dockerfile çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼ŒåŸºäº alpine é•œåƒå®‰è£… node ç¯å¢ƒï¼Œæ„æˆä¸€ä¸ªæ–°çš„ <code>youngjuning/alpine</code> é•œåƒï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM alpine</span><br><span class="line"></span><br><span class="line">LABEL version=&quot;1.0&quot; maintainer=&quot;youngjuning&lt;youngjuning@aliyun.com&gt;&quot;</span><br><span class="line"></span><br><span class="line">RUN sed -i &#x27;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&#x27; /etc/apk/repositories</span><br></pre></td></tr></table></figure><p>æ„å»ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build -t youngjuning/alpine:latest .</span></span><br></pre></td></tr></table></figure><h3 id="å­˜å‚¨é•œåƒ"><a href="#å­˜å‚¨é•œåƒ" class="headerlink" title="å­˜å‚¨é•œåƒ"></a>å­˜å‚¨é•œåƒ</h3><p>å¦‚æœè¦å¯¼å‡ºé•œåƒåˆ°æœ¬åœ°æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker save</code> å‘½ä»¤ã€‚è¯¥å‘½ä»¤æ”¯æŒ <code>-o &lt;string&gt;</code> æˆ– <code>--output &lt;string&gt;</code> å‚æ•°ï¼Œå¯¼å‡ºé•œåƒåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¼å‡ºæœ¬åœ° alpine é•œåƒä¸ºæ–‡ä»¶ alpine.tarï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker save -o alpine.tar alpine</span></span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œç”¨æˆ·å°±å¯ä»¥é€šè¿‡å¤åˆ¶ alpine.tar æ–‡ä»¶å°†è¯¥é•œåƒåˆ†äº«ç»™ä»–äººã€‚</p><h3 id="è½½å…¥é•œåƒ"><a href="#è½½å…¥é•œåƒ" class="headerlink" title="è½½å…¥é•œåƒ"></a>è½½å…¥é•œåƒ</h3><p>å¯ä»¥ä½¿ç”¨ <code>docker load</code> å°†å¯¼å‡ºçš„ tar æ–‡ä»¶å†å¯¼å…¥åˆ°æœ¬åœ°é•œåƒåº“ã€‚æ”¯æŒ <code>-i &lt;string&gt;</code> æˆ– <code>-input &lt;string&gt;</code> é€‰é¡¹ï¼Œä»æŒ‡å®šæ–‡ä»¶ä¸­è¯»å…¥é•œåƒå†…å®¹ã€‚</p><p>ä¾‹å¦‚ï¼Œä»æ–‡ä»¶ alpine.tar å¯¼å…¥é•œåƒåˆ°æœ¬åœ°é•œåƒåˆ—è¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker load -i alpine.tar</span></span><br></pre></td></tr></table></figure><h3 id="ä¸Šä¼ é•œåƒ"><a href="#ä¸Šä¼ é•œåƒ" class="headerlink" title="ä¸Šä¼ é•œåƒ"></a>ä¸Šä¼ é•œåƒ</h3><blockquote><p><code>docker push [é€‰é¡¹] [Docker Registry åœ°å€[:ç«¯å£å·]/][ç”¨æˆ·å]&lt;ä»“åº“å&gt;[:TAG]</code></p></blockquote><p><strong>å‘å¸ƒæ–°ç‰ˆæœ¬æµç¨‹ï¼š</strong></p><ul><li>å‘å¸ƒ latest ç‰ˆæœ¬ï¼š<code>docker push youngjuning/alpine:latest</code></li><li>æ·»åŠ æ–°æ ‡ç­¾ï¼š<code>docker tag youngjuning/alpine:latest youngjuning/alpine:1.0.0</code></li><li>å‘å¸ƒ 1.0.0 ç‰ˆæœ¬ï¼š<code>docker push youngjuning/alpine:1.0.0</code></li></ul><blockquote><p>å¯ä»¥æŸ¥çœ‹<a href="https://hub.docker.com/r/youngjuning/alpine%E9%A1%B9%E7%9B%AE%E6%9F%A5%E7%9C%8B%E6%88%91%E5%8F%91%E5%B8%83%E7%9A%84%E5%9F%BA%E4%BA%8Ealiyun%E9%95%9C%E5%83%8F%E7%9A%84">https://hub.docker.com/r/youngjuning/alpineé¡¹ç›®æŸ¥çœ‹æˆ‘å‘å¸ƒçš„åŸºäºaliyuné•œåƒçš„</a> Aplpine Docker Image</p></blockquote><h2 id="æ“ä½œ-Docker-å®¹å™¨"><a href="#æ“ä½œ-Docker-å®¹å™¨" class="headerlink" title="æ“ä½œ Docker å®¹å™¨"></a>æ“ä½œ Docker å®¹å™¨</h2><ul><li>Docker å®¹å™¨æ˜¯é•œåƒçš„ä¸€ä¸ªè¿è¡Œå®ä¾‹ã€‚</li><li>Docker å®¹å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªï¼ˆæˆ–ä¸€ç»„ï¼‰åº”ç”¨ï¼Œä»¥åŠå®ƒä»¬å¿…éœ€çš„è¿è¡Œç¯å¢ƒ</li></ul><h3 id="å¯åŠ¨å®¹å™¨"><a href="#å¯åŠ¨å®¹å™¨" class="headerlink" title="å¯åŠ¨å®¹å™¨"></a>å¯åŠ¨å®¹å™¨</h3><h4 id="1-æ–°å»ºå¹¶å¯åŠ¨"><a href="#1-æ–°å»ºå¹¶å¯åŠ¨" class="headerlink" title="1. æ–°å»ºå¹¶å¯åŠ¨"></a>1. æ–°å»ºå¹¶å¯åŠ¨</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -it ubuntu:18.04 /bin/bash</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­, <code>-t</code> é€‰é¡¹è®© Docker åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼ˆpseudo-ttyï¼‰å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Šï¼Œ<code>-i</code> åˆ™è®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€ã€‚</p><p>å½“åˆ©ç”¨ <code>docker run</code> æ¥åˆ›å»ºå®¹å™¨æ—¶ï¼ŒDocker åœ¨åå°è¿è¡Œçš„æ ‡å‡†æ“ä½œåŒ…æ‹¬ï¼š</p><ol><li>æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨å°±ä»å…¬æœ‰ä»“åº“ä¸‹è½½</li><li>åˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨</li><li>åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚åœ¨ä¸€å±‚å¯è¯»å†™å±‚</li><li>ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­å»</li><li>ä»åœ°å€æ± é…ç½®ä¸€ä¸ªipåœ°å€ç»™å®¹å™¨</li><li>æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åº</li><li>æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«ç»ˆæ­¢</li></ol><p><strong>ä¸€äº›å¸¸ç”¨é€‰é¡¹ï¼š</strong></p><ul><li><code>-d</code>ï¼Œ<code>--detach=true|false</code>ï¼šæ˜¯å¦åœ¨åå°è¿è¡Œå®¹å™¨ï¼Œé»˜è®¤ä¸º<code>false</code></li><li><code>-i</code>ï¼Œ<code>--interactive=true|false</code>ï¼šä¿æŒæ ‡å‡†è¾“å…¥æ‰“å¼€ï¼Œé»˜è®¤ä¸º <code>false</code></li><li><code>-p</code>ï¼Œ<code>--publish=[]</code>ï¼šæŒ‡å®šå¦‚ä½•æ˜ å°„åˆ°æœ¬åœ°ä¸»æœºç«¯å£ï¼Œä¾‹å¦‚ <code>-p 9000:9000</code></li><li><code>--restart=&quot;no&quot;</code>ï¼šå®¹å™¨çš„é‡å¯ç­–ç•¥ï¼ŒåŒ…æ‹¬ <code>no</code>ã€<code>on-failure[:max-retry]</code>ã€<code>always</code>ã€<code>unless-stopped</code> ç­‰</li><li><code>--rm=true|false</code>ï¼šå®¹å™¨é€€å‡ºåæ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼Œä¸èƒ½è·Ÿ <code>-d</code> åŒæ—¶ä½¿ç”¨</li><li><code>-t</code>ï¼Œ<code>--tty=true|false</code>ï¼šæ˜¯å¦åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼Œé»˜è®¤ä¸º <code>false</code></li><li><code>-v [HOST-DIR:]&lt;CONTAINER-DIR&gt;[:OPTIONS]</code>ï¼Œ<code>--volume=[HOST-DIR:]&lt;CONTAINER-DIR&gt;[:OPTIONS]</code>ï¼šæŒ‚åœ¨ä¸»æœºä¸Šçš„æ–‡ä»¶å·åˆ°å®¹å™¨å†…</li><li><code>--name=&quot;&quot;</code>ï¼šæŒ‡å®šå®¹å™¨çš„åˆ«å</li></ul><h4 id="2-å¯åŠ¨å·²ç»ˆæ­¢å®¹å™¨"><a href="#2-å¯åŠ¨å·²ç»ˆæ­¢å®¹å™¨" class="headerlink" title="2. å¯åŠ¨å·²ç»ˆæ­¢å®¹å™¨"></a>2. å¯åŠ¨å·²ç»ˆæ­¢å®¹å™¨</h4><p>å¯ä»¥åˆ©ç”¨ <code>docker start &lt;CONTAINER ID&gt;</code> å‘½ä»¤ï¼Œç›´æ¥å°†ä¸€ä¸ªå·²ç»ç»ˆæ­¢çš„å®¹å™¨å¯åŠ¨è¿è¡Œã€‚</p><h4 id="3-æŸ¥çœ‹å®¹å™¨è¾“å‡º"><a href="#3-æŸ¥çœ‹å®¹å™¨è¾“å‡º" class="headerlink" title="3. æŸ¥çœ‹å®¹å™¨è¾“å‡º"></a>3. æŸ¥çœ‹å®¹å™¨è¾“å‡º</h4><p>è¦è·å–å®¹å™¨çš„è¾“å‡ºä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ <code>docker &lt;CONTAINER ID&gt; logs</code> å‘½ä»¤ã€‚</p><h3 id="ç»ˆæ­¢å®¹å™¨"><a href="#ç»ˆæ­¢å®¹å™¨" class="headerlink" title="ç»ˆæ­¢å®¹å™¨"></a>ç»ˆæ­¢å®¹å™¨</h3><p>å¯ä»¥ä½¿ç”¨ <code>docker stop &lt;CONTAINER ID&gt;</code> æ¥ç»ˆæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ã€‚</p><p>å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡ <code>docker container start</code> å‘½ä»¤æ¥é‡æ–°å¯åŠ¨ã€‚</p><p>æ­¤å¤–ï¼Œ<code>docker container restart</code> å‘½ä»¤ä¼šå°†ä¸€ä¸ªè¿è¡Œæ€çš„å®¹å™¨ç»ˆæ­¢ï¼Œç„¶åå†é‡æ–°å¯åŠ¨å®ƒã€‚</p><h3 id="execè¿›å…¥å®¹å™¨"><a href="#execè¿›å…¥å®¹å™¨" class="headerlink" title="execè¿›å…¥å®¹å™¨"></a><code>exec</code>è¿›å…¥å®¹å™¨</h3><p>åœ¨ä½¿ç”¨ <code>-d</code> å‚æ•°æ—¶ï¼Œå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥åå°ã€‚</p><p>æŸäº›æ—¶å€™éœ€è¦è¿›å…¥å®¹å™¨è¿›è¡Œæ“ä½œï¼Œæ¨èå¤§å®¶ä½¿ç”¨ <code>docker exec</code> å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -dit alpine</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                 COMMAND             CREATED             STATUS              PORTS                      NAMES</span><br><span class="line">3d95dabef801        alpine                &quot;/bin/sh&quot;           21 seconds ago      Up 19 seconds                                  recursing_aryabhata</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker <span class="built_in">exec</span> -it &lt;CONTAINER ID&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä»è¿™ä¸ª stdin ä¸­ exitï¼Œä¸ä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚</p><h3 id="åˆ é™¤å®¹å™¨"><a href="#åˆ é™¤å®¹å™¨" class="headerlink" title="åˆ é™¤å®¹å™¨"></a>åˆ é™¤å®¹å™¨</h3><p>å¯ä»¥ä½¿ç”¨ <code>docker container rm</code> æ¥åˆ é™¤ä¸€ä¸ªå¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚ä¾‹å¦‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker <span class="built_in">rm</span>  &lt;CONTAINER ID&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¹¶åˆ é™¤å®¹å™¨æŒ‚è½½çš„æ•°æ®å·</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker <span class="built_in">rm</span> -vf</span></span><br></pre></td></tr></table></figure><p>å¦‚æœè¦åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥æ·»åŠ  <code>-f</code> å‚æ•°ã€‚Docker ä¼šå‘é€ <code>SIGKILL</code> ä¿¡å·ç»™å®¹å™¨ã€‚</p><h3 id="æ¸…ç†æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨"><a href="#æ¸…ç†æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨" class="headerlink" title="æ¸…ç†æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨"></a>æ¸…ç†æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker container prune</span></span><br></pre></td></tr></table></figure><h3 id="å¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨"><a href="#å¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨" class="headerlink" title="å¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨"></a>å¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker <span class="built_in">export</span> 7691a814370e &gt; ubuntu.tar</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> ubuntu.tar | docker import - <span class="built_in">test</span>/ubuntu:v1.0</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker import http://example.com/exampleimage.tgz example/imagerepo</span></span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å®¹å™¨"><a href="#æŸ¥çœ‹å®¹å™¨" class="headerlink" title="æŸ¥çœ‹å®¹å™¨"></a>æŸ¥çœ‹å®¹å™¨</h3><h4 id="1-æŸ¥çœ‹å®¹å™¨è¯¦æƒ…"><a href="#1-æŸ¥çœ‹å®¹å™¨è¯¦æƒ…" class="headerlink" title="1. æŸ¥çœ‹å®¹å™¨è¯¦æƒ…"></a>1. æŸ¥çœ‹å®¹å™¨è¯¦æƒ…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker inspect [OPTIONS] &lt;CONTAINER ID&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-æŸ¥çœ‹å®¹å™¨å†…è¿›ç¨‹"><a href="#2-æŸ¥çœ‹å®¹å™¨å†…è¿›ç¨‹" class="headerlink" title="2. æŸ¥çœ‹å®¹å™¨å†…è¿›ç¨‹"></a>2. æŸ¥çœ‹å®¹å™¨å†…è¿›ç¨‹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker top [OPTIONS] &lt;CONTAINER ID&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯"><a href="#3-æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="3. æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯"></a>3. æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker stats [OPTIONS] &lt;CONTAINER ID&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°é…ç½®"><a href="#æ›´æ–°é…ç½®" class="headerlink" title="æ›´æ–°é…ç½®"></a>æ›´æ–°é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker update --restart=always &lt;CONTAINER ID&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é‡å‘½åå®¹å™¨"><a href="#é‡å‘½åå®¹å™¨" class="headerlink" title="é‡å‘½åå®¹å™¨"></a>é‡å‘½åå®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker rename &lt;old name&gt; &lt;new name&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å®¹å™¨æ—¥å¿—"><a href="#æŸ¥çœ‹å®¹å™¨æ—¥å¿—" class="headerlink" title="æŸ¥çœ‹å®¹å™¨æ—¥å¿—"></a>æŸ¥çœ‹å®¹å™¨æ—¥å¿—</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker logs -f &lt;CONTAINER ID&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Portainer-å®¹å™¨ç®¡ç†å·¥å…·"><a href="#Portainer-å®¹å™¨ç®¡ç†å·¥å…·" class="headerlink" title="Portainer å®¹å™¨ç®¡ç†å·¥å…·"></a>Portainer å®¹å™¨ç®¡ç†å·¥å…·</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker volume create portainer_data</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -d -p 9000:9000 \</span></span><br><span class="line"><span class="language-bash">-v /var/run/docker.sock:/var/run/docker.sock \</span></span><br><span class="line"><span class="language-bash">-v portainer_data:/data \</span></span><br><span class="line"><span class="language-bash">--name portainer \</span></span><br><span class="line"><span class="language-bash">--restart always \</span></span><br><span class="line"><span class="language-bash">portainer/portainer</span></span><br></pre></td></tr></table></figure><p>é…ç½® <code>/etc/nginx/sites-enabled/dafulat</code> æ–‡ä»¶ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">upstream</span> portainer &#123;</span><br><span class="line">    <span class="attribute">server</span> <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line">  <span class="section">location</span> /portainer/ &#123;</span><br><span class="line">      <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">      <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="attribute">proxy_pass</span> http://portainer/;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="section">location</span> /portainer/ws/ &#123;</span><br><span class="line">      <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">      <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">      <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">      <span class="attribute">proxy_pass</span> http://portainer/ws/;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Docker-æ•°æ®æŒä¹…åŒ–"><a href="#Docker-æ•°æ®æŒä¹…åŒ–" class="headerlink" title="Docker æ•°æ®æŒä¹…åŒ–"></a>Docker æ•°æ®æŒä¹…åŒ–</h2><p><code>æ•°æ®å·</code> æ˜¯ä¸€ä¸ªå¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡ UFSï¼Œå¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼š</p><ul><li><code>æ•°æ®å·</code> å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨</li><li>å¯¹ <code>æ•°æ®å·</code> çš„ä¿®æ”¹ä¼šç«‹é©¬ç”Ÿæ•ˆ</li><li>å¯¹ <code>æ•°æ®å·</code> çš„æ›´æ–°ï¼Œä¸ä¼šå½±å“é•œåƒ</li><li><code>æ•°æ®å·</code> é»˜è®¤ä¼šä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤</li></ul><h3 id="1-åˆ›å»ºæ•°æ®å·"><a href="#1-åˆ›å»ºæ•°æ®å·" class="headerlink" title="1. åˆ›å»ºæ•°æ®å·"></a>1. åˆ›å»ºæ•°æ®å·</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker volume create my-vol</span></span><br></pre></td></tr></table></figure><p>é™¤äº† <code>create</code> å­å‘½ä»¤å¤–ï¼Œdocker volume è¿˜æ”¯æŒ <code>inspect</code>(æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯)ã€<code>ls</code>ï¼ˆåˆ—å‡ºå·²æœ‰æ•°æ®å·ï¼‰ã€<code>prune</code>ï¼ˆæ¸…ç†æ— ç”¨æ•°æ®å·ï¼‰ã€<code>rm</code>ï¼ˆåˆ é™¤æ•°æ®å·ï¼‰</p><h3 id="2-ç»‘å®šæ•°æ®å·"><a href="#2-ç»‘å®šæ•°æ®å·" class="headerlink" title="2. ç»‘å®šæ•°æ®å·"></a>2. ç»‘å®šæ•°æ®å·</h3><h4 id="mount"><a href="#mount" class="headerlink" title="--mount"></a><code>--mount</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -P \</span><br><span class="line">    --name web \</span><br><span class="line">    --mount <span class="built_in">source</span>=my-vol,target=/webapp \</span><br><span class="line">    training/webapp \</span><br><span class="line">    python app.py</span><br></pre></td></tr></table></figure><h4 id="vï¼Œ-volume"><a href="#vï¼Œ-volume" class="headerlink" title="-vï¼Œ--volume"></a><code>-v</code>ï¼Œ<code>--volume</code></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -d -P \</span></span><br><span class="line"><span class="language-bash">    --name web \</span></span><br><span class="line"><span class="language-bash">    -v my-vol:/wepapp \</span></span><br><span class="line"><span class="language-bash">    training/webapp \</span></span><br><span class="line"><span class="language-bash">    python app.py</span></span><br></pre></td></tr></table></figure><blockquote><p>source ä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„çš„ä»»æ„ç³»ç»Ÿä½ç½®ã€‚</p></blockquote><blockquote><p>å¦‚æœç›´æ¥æŒ‚è½½ä¸€ä¸ªæ–‡ä»¶åˆ°å®¹å™¨ï¼Œä½¿ç”¨æ–‡ä»¶ç¼–è¾‘å·¥å…·ï¼ŒåŒ…æ‹¬ vi æˆ–è€… <code>sed --in-place</code> çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šé€ æˆæ–‡ä»¶ inode çš„æ”¹å˜ï¼Œä» Docker 1.1 èµ·ï¼Œè¿™ä¼šå¯¼è‡´æŠ¥é”™è¯¯ä¿¡æ¯ã€‚æ‰€ä»¥æ¨èçš„æ–¹å¼æ˜¯ç›´æ¥æŒ‚è½½æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•åˆ°å®¹å™¨å†…ã€‚</p></blockquote><h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><blockquote><p>è¯¦ç»†æŒ‡ä»¤è¯¦è§£è¯·æŸ¥çœ‹ï¼š<a href="https://vuepress.mirror.docker-practice.com/image/dockerfile/">Dockerfile æŒ‡ä»¤è¯¦è§£</a></p></blockquote><p><img src="https://i.loli.net/2020/04/11/hmlMV4QA2opON9j.png"></p><h1 id="åº”ç”¨å®‰è£…"><a href="#åº”ç”¨å®‰è£…" class="headerlink" title="åº”ç”¨å®‰è£…"></a>åº”ç”¨å®‰è£…</h1><h2 id="GitLab-åŠå…¶å®˜æ–¹é•œåƒ"><a href="#GitLab-åŠå…¶å®˜æ–¹é•œåƒ" class="headerlink" title="GitLab åŠå…¶å®˜æ–¹é•œåƒ"></a>GitLab åŠå…¶å®˜æ–¹é•œåƒ</h2><blockquote><p>ç‰¹åˆ«è€—CPUï¼Œæˆ‘çš„æœåŠ¡å™¨å¤ªè¾£é¸¡å¸¦ä¸åŠ¨ï¼ï¼ï¼</p></blockquote><h3 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">web:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">&#x27;gitlab/gitlab-ce:latest&#x27;</span></span><br><span class="line">  <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">  <span class="attr">hostname:</span> <span class="string">&#x27;gitlab.yangjunning.pro&#x27;</span></span><br><span class="line">  <span class="attr">environment:</span></span><br><span class="line">    <span class="attr">GITLAB_OMNIBUS_CONFIG:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      external_url &#x27;http://gitlab.yangjunning.pro:8929&#x27;</span></span><br><span class="line"><span class="string">      gitlab_rails[&#x27;gitlab_shell_ssh_port&#x27;] = 2224</span></span><br><span class="line"><span class="string"></span>  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;8929:8929&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;2224:22&#x27;</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;gitlab_config:/etc/gitlab&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;gitlab_logs:/var/log/gitlab&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;gitlab_data:/var/opt/gitlab&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose up -d</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°-gitlab"><a href="#æ›´æ–°-gitlab" class="headerlink" title="æ›´æ–° gitlab"></a>æ›´æ–° gitlab</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker-compose pull</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker-compose up -d</span></span><br></pre></td></tr></table></figure><h2 id="å¾…å®è·µ"><a href="#å¾…å®è·µ" class="headerlink" title="å¾…å®è·µ"></a>å¾…å®è·µ</h2><ul><li>SonarQube</li><li>Nexus Repository Manager</li><li>ShowDoc</li><li>Verdaccio</li><li>EasyMock</li><li>Sentry</li><li>Ansible</li><li>code-push-server</li><li>BugOut</li></ul><h1 id="Docker-ç›¸å…³çš„å®šæ—¶ä»»åŠ¡"><a href="#Docker-ç›¸å…³çš„å®šæ—¶ä»»åŠ¡" class="headerlink" title="Docker ç›¸å…³çš„å®šæ—¶ä»»åŠ¡"></a>Docker ç›¸å…³çš„å®šæ—¶ä»»åŠ¡</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># crontab -e</span><br><span class="line"># æ¯å¤©å‡Œæ™¨å¼ºåˆ¶åˆ é™¤æ— ç”¨é•œåƒï¼Œä¸å…‰æ˜¯ä¸´æ—¶é•œåƒï¼›æ¯å¤©å‡Œæ™¨æ¸…ç†æ— ç”¨çš„æ•°æ®å·</span><br><span class="line">00 00 * * * docker image prune -af &amp;&amp; docker volume prune -f &amp;&amp; rsync -arv /var/lib/docker/volumes /backups/docker</span><br></pre></td></tr></table></figure><blockquote><p>qshell åŒæ­¥æ–‡ä»¶åˆ°ä¸ƒç‰›äº‘çš„é…ç½®è¯·å‚è€ƒ<a href="https://juejin.im/post/5e81e2db518825737b4ad911#heading-59">å¤‡ä»½åˆ°ä¸ƒç‰›äº‘</a></p></blockquote><h1 id="æ‰©å±•é˜…è¯»"><a href="#æ‰©å±•é˜…è¯»" class="headerlink" title="æ‰©å±•é˜…è¯»"></a>æ‰©å±•é˜…è¯»</h1><ul><li><a href="https://devops.phodal.com/">DevOps çŸ¥è¯†å¹³å° Ledge</a></li><li><a href="https://juejin.im/post/5b6af759e51d451951138eb4#heading-7">jenkins+docker æŒç»­é›†æˆ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†™ç»™å‰ç«¯çš„Linuxå®æˆ˜æ•™ç¨‹</title>
      <link href="/ef588191ce47/"/>
      <url>/ef588191ce47/</url>
      
        <content type="html"><![CDATA[<p>ç¬”è€…ä½¿ç”¨çš„æ˜¯ AliYun æœåŠ¡å™¨ ECSï¼Œé•œåƒé€‰æ‹©çš„æ˜¯ Ubuntuï¼ŒUbuntuçš„è¯¦ç»†ç‰ˆæœ¬ä¿¡æ¯æ˜¯ï¼š<code>Ubuntu 18.04.4 LTS (GNU/Linux 4.15.0-91-generic x86_64)</code>ï¼Œå¦‚ä½•è´­ä¹°äº‘æœåŠ¡å™¨ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´å†…ï¼Œå¦‚æœåªæ˜¯å­¦ä¹ ï¼Œé‚£ä½ å®Œå…¨å¯ä»¥ä½¿ç”¨ virtualbox å®‰è£… Ubuntuã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh &lt;username&gt;@&lt;hostname&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ–°ç³»ç»Ÿæº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt update</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‡çº§ç³»ç»Ÿæº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt upgrade</span></span><br></pre></td></tr></table></figure><h2 id="å¿…å¤‡ç¯å¢ƒåŠåº”ç”¨"><a href="#å¿…å¤‡ç¯å¢ƒåŠåº”ç”¨" class="headerlink" title="å¿…å¤‡ç¯å¢ƒåŠåº”ç”¨"></a>å¿…å¤‡ç¯å¢ƒåŠåº”ç”¨</h2><h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£… git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt install git</span></span><br></pre></td></tr></table></figure><h4 id="å‘½ä»¤è¡Œé…ç½®"><a href="#å‘½ä»¤è¡Œé…ç½®" class="headerlink" title="å‘½ä»¤è¡Œé…ç½®"></a>å‘½ä»¤è¡Œé…ç½®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€åˆå§‹åŒ–è®¾ç½®</span></span><br><span class="line">$ git config --global user.name <span class="string">&#x27;youngjuning&#x27;</span></span><br><span class="line">$ git config --global user.email <span class="string">&#x27;youngjuning@aliyun.com&#x27;</span></span><br><span class="line"><span class="comment"># 2ã€å°† `color.ui` è®¾ç½®ä¸º `auto` å¯ä»¥è®©å‘½ä»¤çš„è¾“å‡ºæ‹¥æœ‰æ›´é«˜çš„å¯è¯»æ€§ã€‚</span></span><br><span class="line">$ git config --global color.ui auto</span><br><span class="line"><span class="comment"># 3ã€git è®°ä½ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">$ git config --global credential.helper store</span><br><span class="line"><span class="comment"># 4ã€core.autocrlf</span></span><br><span class="line">$ git config --global core.autocrlf input</span><br></pre></td></tr></table></figure><blockquote><p>Linuxæˆ–Macç³»ç»Ÿä½¿ç”¨LFä½œä¸ºè¡Œç»“æŸç¬¦ï¼Œå› æ­¤ä½ ä¸æƒ³ Git åœ¨ç­¾å‡ºæ–‡ä»¶æ—¶è¿›è¡Œè‡ªåŠ¨çš„è½¬æ¢ï¼›å½“ä¸€ä¸ªä»¥ <code>CRLF</code> ä¸ºè¡Œç»“æŸç¬¦çš„æ–‡ä»¶ä¸å°å¿ƒè¢«å¼•å…¥æ—¶ä½ è‚¯å®šæƒ³è¿›è¡Œä¿®æ­£ï¼ŒæŠŠ <code>core.autocrlf</code> è®¾ç½®æˆ <code>input</code> æ¥å‘Šè¯‰ Git åœ¨æäº¤æ—¶æŠŠ <code>CRLF</code> è½¬æ¢æˆ <code>LF</code>ï¼Œç­¾å‡ºæ—¶ä¸è½¬æ¢ï¼š<br>è¿™æ ·ä¼šåœ¨ Windows ç³»ç»Ÿä¸Šçš„ç­¾å‡ºæ–‡ä»¶ä¸­ä¿ç•™ <code>CRLF</code>ï¼Œä¼šåœ¨ Mac å’Œ Linux ç³»ç»Ÿä¸Šï¼ŒåŒ…æ‹¬ä»“åº“ä¸­ä¿ç•™ <code>LF</code>ã€‚</p></blockquote><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£… jreã€jdk</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt install openjdk-8-jre-headless openjdk-8-jdk-headless</span></span><br></pre></td></tr></table></figure><h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>n</code> æ¨¡å—æ¥ç»´æŠ¤ Node çš„ç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt install nodejs npm build-essential</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo npm install -g npm n</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…æœ€æ–°ç‰ˆ</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo n latest</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># å…¶ä»–å‘½ä»¤##</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…æŒ‡å®šç‰ˆæœ¬</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo n 10.16.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…æœ€æ–°çš„ç¨³å®šç‰ˆ</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo n lts</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æŒ‡å®šç‰ˆæœ¬</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">n <span class="built_in">rm</span> 12.10.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é™¤å»å½“å‰ç‰ˆæœ¬ä»¥å¤–çš„æ‰€æœ‰ç¼“å­˜ç‰ˆæœ¬</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">n prune</span></span><br></pre></td></tr></table></figure><h3 id="oh-my-zsh"><a href="#oh-my-zsh" class="headerlink" title="oh-my-zsh"></a>oh-my-zsh</h3><blockquote><p>ä¿®æ”¹ <code>~/.zshrc</code> ä¹‹åéƒ½éœ€è¦æ‰§è¡Œ <code>source ~/.zshrc</code> å‘½ä»¤ä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆ</p><p><code>echo $SHELL</code> å¯ä»¥æŸ¥çœ‹å½“å‰ Shell</p></blockquote><ul><li><code>apt install zsh</code></li><li><code>git clone https://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh</code></li><li><code>cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc</code></li><li><code>nano ~/.zshrc</code></li><li>æ‰¾åˆ° <code>ZSH_THEME=&quot;robbyrussell&quot;</code> ï¼ŒæŠŠ <code>robbyrussell</code> æ›¿æ¢ä¸º <code>ys</code></li><li>ä¿®æ”¹é»˜è®¤Shellï¼š<code>chsh -s /bin/zsh</code></li><li>å‘½ä»¤é«˜äº®<ul><li><code>git clone https://github.com/zsh-users/zsh-syntax-highlighting.git &quot;$HOME/.zsh-syntax-highlighting&quot; --depth 1</code></li><li><code>echo &quot;source $HOME/.zsh-syntax-highlighting/zsh-syntax-highlighting.zsh&quot; &gt;&gt; &quot;$HOME/.zshrc&quot;</code></li></ul></li><li>é‡æ–°æ‰“å¼€å‘½ä»¤è¡Œ</li><li><code>echo &quot;export EDITOR=nano&quot; &gt;&gt; ~/.zshrc</code></li></ul><h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h3><blockquote><p>å»ºè®®ä½¿ç”¨ï¼š<a href="https://github.com/amix/vimrc">https://github.com/amix/vimrc</a></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> --depth=1 https://github.com/amix/vimrc.git ~/.vim_runtime</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sh ~/.vim_runtime/install_awesome_vimrc.sh</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;set number&quot;</span> &gt;&gt; ~/.vimrc</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;set showcmd&quot;</span> &gt;&gt; ~/.vimrc</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> ~/.vimrc</span></span><br></pre></td></tr></table></figure><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ul><li><code>/</code><ul><li><code>bin</code>ï¼šåŒ…å«äº†ä¼šè¢«æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨çš„å¯æ‰§è¡Œç¨‹åº</li><li><code>boot</code>ï¼šåŒ…å«ä¸ Linux å¯åŠ¨å¯†åˆ‡ç›¸å…³çš„æ–‡ä»¶</li><li><code>dev</code>ï¼šåŒ…å«å¤–è®¾ã€‚å®ƒé‡Œé¢çš„å­ç›®å½•ï¼Œæ¯ä¸€ä¸ªå¯¹åº”ä¸€ä¸ªå¤–è®¾</li><li><code>etc</code>ï¼šåŒ…å«ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶</li><li><code>home</code>ï¼šç”¨æˆ·çš„ç§äººç›®å½•</li><li><code>lib</code>ï¼šåŒ…å«è¢«ç¨‹åºæ‰€è°ƒç”¨çš„åº“æ–‡ä»¶ï¼Œä¾‹å¦‚<code>.so</code>ç»“å°¾çš„æ–‡ä»¶</li><li><code>media</code>ï¼šå¯ç§»åŠ¨çš„å¤–è®¾ï¼ˆUSBç›˜ï¼ŒSDå¡ï¼ŒDVDï¼Œå…‰ç›˜ï¼Œç­‰ç­‰ï¼‰æ’å…¥ç”µè„‘æ—¶</li><li><code>mnt</code>ï¼šç”¨äºä¸´æ—¶æŒ‚è½½ä¸€äº›è£…ç½®</li><li><code>opt</code>ï¼šå¯é€‰çš„åº”ç”¨è½¯ä»¶åŒ…ï¼Œç”¨äºå®‰è£…å¤šæ•°ç¬¬ä¸‰æ–¹è½¯ä»¶å’Œæ’ä»¶</li><li><code>root</code>ï¼šè¶…çº§ç”¨æˆ· root çš„å®¶ç›®å½•</li><li><code>sbin</code>ï¼šç”¨äºåŒ…å«ç³»ç»Ÿçº§çš„é‡è¦å¯æ‰§è¡Œç¨‹åº</li><li><code>srv</code>ï¼šåŒ…å«ä¸€äº›ç½‘ç»œæœåŠ¡å¯åŠ¨ä¹‹åæ‰€éœ€è¦å–ç”¨çš„æ•°æ®</li><li><code>tmp</code>ï¼šæ™®é€šç”¨æˆ·å’Œç¨‹åºå­˜æ”¾ä¸´æ—¶æ–‡ä»¶çš„åœ°æ–¹</li><li><code>usr</code>ï¼šUnix Software Resourceï¼Œå®‰è£…äº†å¤§éƒ¨åˆ†ç”¨æˆ·è¦è°ƒç”¨çš„ç¨‹åº</li><li><code>var</code>ï¼šé€šå¸¸åŒ…å«ç¨‹åºçš„æ•°æ®ï¼Œæ¯”å¦‚ logï¼ˆæ—¥å¿—ï¼‰æ–‡ä»¶</li></ul></li></ul><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><blockquote><p>Linuxå‘½ä»¤æœç´¢å¼•æ“ï¼š<a href="https://git.io/linux">https://git.io/linux</a></p></blockquote><ul><li><code>reboot</code>ï¼šé‡æ–°å¯åŠ¨æ­£åœ¨è¿è¡Œçš„Linuxæ“ä½œç³»ç»Ÿ</li><li><code>halt</code>ï¼šå…³é—­ç³»ç»Ÿ</li><li><code>shutdown</code>ï¼šç”¨æ¥ç³»ç»Ÿå…³æœºå‘½ä»¤ã€‚shutdownæŒ‡ä»¤å¯ä»¥å…³é—­æ‰€æœ‰ç¨‹åºï¼Œå¹¶ä¾ç”¨æˆ·çš„éœ€è¦ï¼Œè¿›è¡Œé‡æ–°å¼€æœºæˆ–å…³æœºçš„åŠ¨ä½œã€‚</li><li><code>poweroff</code>ï¼šç›´æ¥è¿è¡Œå³å¯å…³æœº</li><li><code>history</code>ï¼šç”¨äºæ˜¾ç¤ºå†å²å‘½ä»¤</li><li><code>whice</code>ï¼šæŸ¥æ‰¾å¹¶æ˜¾ç¤ºç»™å®šå‘½ä»¤çš„ç»å¯¹è·¯å¾„</li><li><code>pwd</code>ï¼šæ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•ã€‚ï¼ˆPrint Working Directoryï¼‰</li><li><code>source</code>ï¼šåœ¨å½“å‰Shellç¯å¢ƒä¸­ä»æŒ‡å®šæ–‡ä»¶è¯»å–å’Œæ‰§è¡Œå‘½ä»¤ï¼Œè®©æ–‡ä»¶ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆã€‚</li><li><code>updatedb</code>ï¼šåˆ›å»ºæˆ–æ›´æ–°<code>locate</code>å‘½ä»¤æ‰€å¿…éœ€çš„æ•°æ®åº“æ–‡ä»¶</li><li><code>uname -a</code>ï¼šæ˜¾ç¤ºå…¨éƒ¨Linuxç³»ç»Ÿä¿¡æ¯</li><li><code>cat /proc/version</code>ï¼šæ˜¾ç¤ºLinuxä¿¡æ¯</li><li><code>cat /etc/lsb-release</code>ï¼šæŸ¥çœ‹å‘è¡Œç‰ˆä¿¡æ¯</li><li><code>echo $SHELL</code>ï¼šå½“å‰çš„shell</li><li><code>service &lt;service&gt; force-reload|reload|restart|start|status|stop</code></li><li><code>systemctl start|stop|restart|status|reload</code>ï¼š<ul><li><code>enable</code>ï¼šå¼€æœºè‡ªåŠ¨å¯åŠ¨æœåŠ¡</li><li><code>disable</code>ï¼šå¼€æœºä¸è‡ªåŠ¨å¯åŠ¨æœåŠ¡</li><li><code>is-enabled</code>ï¼šæŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€æœºè‡ªåŠ¨å¯åŠ¨</li><li><code>list-unit-files --type=service</code>ï¼šæŸ¥çœ‹å„ä¸ªçº§åˆ«ä¸‹æœåŠ¡çš„å¯åŠ¨å’Œç¦ç”¨æƒ…å†µ</li></ul></li></ul><h2 id="æ–‡ä»¶ç®¡ç†"><a href="#æ–‡ä»¶ç®¡ç†" class="headerlink" title="æ–‡ä»¶ç®¡ç†"></a>æ–‡ä»¶ç®¡ç†</h2><h3 id="æ–‡ä»¶ç›®å½•æ“ä½œ"><a href="#æ–‡ä»¶ç›®å½•æ“ä½œ" class="headerlink" title="æ–‡ä»¶ç›®å½•æ“ä½œ"></a>æ–‡ä»¶ç›®å½•æ“ä½œ</h3><ul><li><p><code>ls</code>ï¼šæ˜¾ç¤ºç›®å½•å†…å®¹åˆ—è¡¨</p><ul><li><code>-a</code>ï¼šåˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬ä»¥ â€œ.â€ å¼€å¤´çš„éšå«æ–‡ä»¶ã€‚</li><li><code>-l</code>ï¼šé™¤æ¯ä¸ªæ–‡ä»¶åå¤–ï¼Œå¢åŠ æ˜¾ç¤ºæ–‡ä»¶ç±»å‹ã€æƒé™ã€ç¡¬é“¾æ¥æ•°ã€æ‰€æœ‰è€…åã€ç»„åã€å¤§å°ï¼ˆbyteï¼‰åŠæ—¶é—´ä¿¡æ¯ï¼ˆå¦‚æœªæŒ‡æ˜æ˜¯å…¶å®ƒæ—¶é—´å³æŒ‡ä¿®æ”¹æ—¶é—´ï¼‰ï¼Œå¯ä»¥ç”¨ <code>ll</code> ä»£æ›¿</li></ul></li><li><p><code>du</code>ï¼šæ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶å’Œç›®å½•çš„ç£ç›˜ä½¿ç”¨ç©ºé—´ï¼ˆDisk Usageï¼‰</p><ul><li><code>-a</code>æˆ–<code>-all</code>ï¼šæ˜¾ç¤ºç›®å½•ä¸­ä¸ªåˆ«æ–‡ä»¶çš„å¤§å°ã€‚</li><li><code>-h</code>æˆ–<code>--human-readable</code>ï¼šä»¥Kï¼ŒMï¼ŒGä¸ºå•ä½ï¼Œæé«˜ä¿¡æ¯çš„å¯è¯»æ€§ã€‚</li><li><code>-s</code>æˆ–<code>--summarize</code>ï¼šä»…æ˜¾ç¤ºæ€»è®¡ï¼Œåªåˆ—å‡ºæœ€ååŠ æ€»çš„å€¼ã€‚</li></ul></li><li><p><code>cat -N</code>ï¼šè¿æ¥å¤šä¸ªæ–‡ä»¶å¹¶æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚(concatenate)</p></li><li><p><code>less -N</code></p><ul><li>ç©ºæ ¼é”®ï¼šå‰è¿›ä¸€é¡µï¼ˆä¸€ä¸ªå±å¹•ï¼‰</li><li>bé”®ï¼šåé€€ä¸€é¡µï¼ˆä¸€ä¸ªå±å¹•ï¼‰</li><li>dé”®ï¼šå‰è¿›åŠé¡µï¼ˆåŠä¸ªå±å¹•ï¼‰</li><li>ué”®ï¼šåé€€åŠé¡µï¼ˆåŠä¸ªå±å¹•ï¼‰</li><li>å›è½¦é”®&#x2F;eé”®&#x2F;ä¸‹ç®­å¤´ï¼šå‰è¿›ä¸€è¡Œ</li><li>yé”®&#x2F;ä¸Šç®­å¤´ï¼šåé€€ä¸€è¡Œ</li><li>qé”®ï¼šåœæ­¢è¯»å–æ–‡ä»¶ï¼Œä¸­æ­¢ less å‘½ä»¤</li><li>&#x3D;é”®ï¼šæ˜¾ç¤ºä½ åœ¨æ–‡ä»¶ä¸­çš„ä»€ä¹ˆä½ç½®</li><li>&#x2F;é”®ï¼šè¿›å…¥æœç´¢æ¨¡å¼<ul><li>né”®ï¼šè·³è½¬åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹</li><li>shift+nï¼šè·³è½¬åˆ°ä¸Šä¸€ä¸ªåŒ¹é…é¡¹</li></ul></li></ul></li><li><p><code>head</code>ï¼šæ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ†</p></li><li><p><code>tail</code>ï¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶çš„æœ«å°¾è‹¥å¹²è¡Œ</p><ul><li><code>-f</code>ï¼šæ˜¾ç¤ºæ–‡ä»¶æœ€æ–°è¿½åŠ çš„å†…å®¹ã€‚</li><li><code>-s&lt;ç§’æ•°&gt;</code>ï¼šä¸<code>-f</code>é€‰é¡¹è¿ç”¨ï¼ŒæŒ‡å®šç›‘è§†æ–‡ä»¶å˜åŒ–æ—¶é—´éš”çš„ç§’æ•°ï¼Œé»˜è®¤1ç§’</li></ul></li><li><p><code>touch</code>ï¼šåˆ›å»ºæ–°çš„ç©ºæ–‡ä»¶</p></li><li><p><code>mkdir</code>ï¼šç”¨æ¥åˆ›å»ºç›®å½•</p><ul><li><code>-p</code>æˆ–<code>--parents</code>ï¼šè‹¥æ‰€è¦å»ºç«‹ç›®å½•çš„ä¸Šå±‚ç›®å½•ç›®å‰å°šæœªå»ºç«‹ï¼Œåˆ™ä¼šä¸€å¹¶å»ºç«‹ä¸Šå±‚ç›®å½•</li></ul></li><li><p><code>cp</code>ï¼šå°†æºæ–‡ä»¶æˆ–ç›®å½•å¤åˆ¶åˆ°ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•ä¸­</p><ul><li><code>-r</code>æˆ–<code>-R</code>ï¼šé€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•ä¸€å¹¶å¤„ç†ï¼Œrecursive</li></ul></li><li><p><code>mv</code>ï¼šç”¨æ¥å¯¹æ–‡ä»¶æˆ–ç›®å½•é‡æ–°å‘½å</p></li><li><p><code>rm</code>ï¼šç”¨äºåˆ é™¤ç»™å®šçš„æ–‡ä»¶å’Œç›®å½•</p><ul><li><code>-r</code>æˆ–<code>-R</code>ï¼šé€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•ä¸€å¹¶å¤„ç†ï¼Œrecursive</li><li><code>-f</code>ï¼šå¼ºåˆ¶åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•</li></ul></li><li><p><code>ln</code>ï¼šç”¨æ¥ä¸ºæ–‡ä»¶åˆ›å»ºé“¾æ¥</p><blockquote><ul><li>ç¡¬é“¾æ¥ç¼ºé™·ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªèƒ½åˆ›å»ºæŒ‡å‘æ–‡ä»¶çš„ç¡¬é“¾æ¥ï¼Œä¸èƒ½åˆ›å»ºæŒ‡å‘ç›®å½•çš„</li><li>ç¡¬é“¾æ¥æŒ‡çš„æ˜¯ä½¿ç”¨äº†åŒä¸€ä¸ª<code>inode</code>å·ï¼Œä½†æ˜¯æ–‡ä»¶åä¸ä¸€æ ·</li><li><code>ls -i</code>ï¼šæ˜¾ç¤º<code>inode</code>å·</li></ul></blockquote><ul><li><code>-s</code>, <code>--symbolic</code>ï¼šå¯¹æºæ–‡ä»¶å»ºç«‹ç¬¦å·é“¾æ¥ï¼Œè€Œéç¡¬é“¾æ¥</li></ul></li><li><p><code>locate</code>ï¼šæ¯” <code>find</code> å¥½ç”¨çš„æ–‡ä»¶æŸ¥æ‰¾å·¥å…·ï¼Œéœ€è¦é…åˆ <code>updatedb</code> ä½¿ç”¨</p></li><li><p><code>find</code>ï¼šåœ¨æŒ‡å®šç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶</p><blockquote><p><code>find [ä½•å¤„] &lt;ä½•ç‰©&gt; [åšä»€ä¹ˆ]</code></p></blockquote><ul><li><p><code>-name &lt;èŒƒæœ¬æ ·å¼&gt;</code>ï¼šæŒ‡å®šå­—ç¬¦ä¸²ä½œä¸ºå¯»æ‰¾æ–‡ä»¶æˆ–ç›®å½•çš„èŒƒæœ¬æ ·å¼</p></li><li><p><code>-size &lt;æ–‡ä»¶å¤§å°&gt;</code>ï¼šæŸ¥æ‰¾ç¬¦åˆæŒ‡å®šçš„æ–‡ä»¶å¤§å°çš„æ–‡ä»¶</p></li><li><p><code>-type &lt;æ–‡ä»¶ç±»å‹&gt;</code>ï¼šåªå¯»æ‰¾ç¬¦åˆæŒ‡å®šçš„æ–‡ä»¶ç±»å‹çš„æ–‡ä»¶ï¼›</p><ul><li><strong>f</strong> æ™®é€šæ–‡ä»¶</li><li><strong>l</strong> ç¬¦å·è¿æ¥</li><li><strong>d</strong> ç›®å½•</li><li><strong>c</strong> å­—ç¬¦è®¾å¤‡</li><li><strong>b</strong> å—è®¾å¤‡</li><li><strong>s</strong> å¥—æ¥å­—</li><li><strong>p</strong> Fifo</li></ul></li><li><p><code>-atime &lt;24å°æ—¶æ•°&gt;</code>ï¼šæŸ¥æ‰¾åœ¨æŒ‡å®šæ—¶é—´æ›¾è¢«å­˜å–è¿‡çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå•ä½ä»¥24å°æ—¶è®¡ç®—ï¼›</p></li><li><p><code>-exec &lt;æ‰§è¡ŒæŒ‡ä»¤&gt;</code>ï¼šå‡è®¾findæŒ‡ä»¤çš„å›ä¼ å€¼ä¸ºTrueï¼Œå°±æ‰§è¡Œè¯¥æŒ‡ä»¤</p><blockquote><p><code>find . -name *.txt -exec chmod 600 &#123;&#125; \;</code></p><p>å¯ä»¥æ¢æˆ<code>-ok</code>,ok ä¼šè®©ä½ ç¡®è®¤æ“ä½œ</p></blockquote></li></ul></li></ul><h3 id="æƒé™ç®¡ç†"><a href="#æƒé™ç®¡ç†" class="headerlink" title="æƒé™ç®¡ç†"></a>æƒé™ç®¡ç†</h3><ul><li><p><code>sudo su</code>ï¼šåˆ‡æ¢ root èº«ä»½ï¼Œsubstitute do</p></li><li><p><code>useradd -m</code>ï¼šåˆ›å»ºçš„æ–°çš„ç³»ç»Ÿç”¨æˆ·è‡ªåŠ¨åˆ›å»ºç”¨æˆ·çš„å®¶ç›®å½•</p></li><li><p><code>passwd</code>ï¼šç”¨äºè®©ç”¨æˆ·å¯ä»¥æ›´æ”¹è‡ªå·±çš„å¯†ç </p></li><li><p>&#96;userdel -rï¼šç”¨äºåˆ é™¤ç»™å®šçš„ç”¨æˆ·ä»¥åŠä¸ç”¨æˆ·ç›¸å…³çš„æ–‡ä»¶</p></li><li><p><code>users</code>ï¼šæ˜¾ç¤ºå½“å‰ç™»å½•ç³»ç»Ÿçš„æ‰€æœ‰ç”¨æˆ·</p></li><li><p><code>usermod</code>ï¼šç”¨äºä¿®æ”¹ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</p><ul><li><code>-l</code>ï¼šå¯¹ç”¨æˆ·é‡å‘½åã€‚<code>/home</code> ä¸­çš„ç”¨æˆ·å®¶ç›®å½•åä¸æ”¹å˜ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹</li><li><code>-g</code>ï¼šä¿®æ”¹ç”¨æˆ·æ‰€åœ¨ç¾¤ç»„</li><li><code>-G</code>ï¼šå°†ç”¨æˆ·æ·»åŠ åˆ°å¤šä¸ªç¾¤ç»„ï¼Œå¤šä¸ªç¾¤ç»„ç”¨<code>,</code>åˆ†å‰²</li><li><code>-aG</code> æˆ– <code>-ag</code>ï¼šä¸ç¦»å¼€åŸæ¥çš„ç¾¤ç»„è¿›å…¥æ–°çš„ç¾¤ç»„</li></ul></li><li><p><code>groupadd</code>ï¼šç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ä½œç»„</p></li><li><p><code>groups</code>ï¼šç”¨æ¥æ‰“å°æŒ‡å®šç”¨æˆ·æ‰€å±çš„å·¥ä½œç»„</p></li><li><p><code>chown</code>ï¼šç”¨æ¥å˜æ›´æ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…æˆ–æ‰€å±ç¾¤ç»„</p><blockquote><p><code>chown &lt;username&gt;[:gruop] &lt;file|dir&gt;</code></p></blockquote><ul><li><code>-R</code>ï¼šé€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ä¸€å¹¶å¤„ç†</li></ul></li><li><p><code>chgrp</code>ï¼šç”¨æ¥å˜æ›´æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç¾¤ç»„</p></li><li><p><code>chmod</code>ï¼šç”¨æ¥å˜æ›´æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™</p><blockquote><img src="https://i.loli.net/2020/03/28/fiXQkrtNn8yZLWY.png" style="zoom:50%;" /><p>ä¸€å…±æœ‰10ä½ï¼Œç¬¬<strong>1</strong>ä½ä»£è¡¨æ–‡ä»¶ç±»å‹ï¼Œç¬¬<strong>2-4</strong>ä½è¡¨ç¤ºæ‰€æœ‰è€…çš„è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ï¼Œç¬¬<strong>5-7</strong>ä½è¡¨ç¤ºåŒç»„ç”¨æˆ·çš„è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ï¼Œç¬¬<strong>8-10</strong>ä½è¡¨ç¤ºå…¶ä»–ç”¨æˆ·çš„è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ã€‚å¦‚æœæ²¡æœ‰æƒé™ç”¨<code>-</code>å ä½ã€‚å¦‚æœå¼€å¯ SELinuxï¼Œåˆ™ç¬¬<strong>11</strong>ä½ä¼šå¤šä¸€ä¸ª<code>.</code>ã€‚</p><ul><li>æ–‡ä»¶ç±»å‹<ul><li><code>d</code>ï¼šè‹±è¯­ directory çš„ç¼©å†™ï¼Œè¡¨ç¤º<strong>ç›®å½•</strong></li><li><code>l</code>ï¼šè‹±æ–‡ link çš„ç¼©å†™ï¼Œè¡¨ç¤º<strong>é“¾æ¥</strong></li><li><code>-</code>ï¼šæ–‡ä»¶</li></ul></li><li><code>r</code>ï¼šè‹±è¯­ read çš„ç¼©å†™ï¼Œè¡¨ç¤º<strong>è¯»</strong></li><li><code>w</code>ï¼šè‹±æ–‡ write çš„ç¼©å†™ï¼Œè¡¨ç¤º<strong>å†™</strong></li><li><code>x</code>ï¼šè‹±è¯­ execute çš„ç¼©å†™ï¼Œè¡¨ç¤º<strong>æ‰§è¡Œ&#x2F;è¿è¡Œ</strong>ã€‚å¯ä»¥è¿è¡Œè¿™ä¸ªæ–‡ä»¶</li><li><code>.</code>ï¼šSELinux çš„å®‰å…¨æ ‡ç­¾ï¼Œå¦‚æœç¬¬11ä½æœ‰<code>.</code>ï¼Œè¡¨ç¤ºå¯ç”¨äº† SELinux</li></ul></blockquote><ul><li><p>ç”¨æ•°å­—æ¥åˆ†é…æƒé™</p><ul><li>æ²¡æœ‰æƒé™ï¼š0</li><li>æ‰§è¡Œæƒé™ï¼š1</li><li>å†™æƒé™ï¼š2</li><li>å†™æ‰§è¡Œæƒé™ï¼š3</li><li>è¯»æƒé™ï¼š4</li><li>è¯»æ‰§è¡Œæƒé™ï¼š5</li><li>è¯»å†™æƒé™ï¼š6</li><li>è¯»å†™æ‰§è¡Œæƒé™ï¼š7</li></ul></li><li><p>ç”¨å­—æ¯æ¥åˆ†é…æƒé™</p><ul><li>uï¼šuser çš„ç¼©å†™ï¼Œæ˜¯è‹±è¯­ç”¨æˆ·çš„æ„æ€ã€‚è¡¨ç¤ºæ‰€æœ‰è€…</li><li>gï¼šgroupçš„ç¼©å†™ï¼Œæ˜¯è‹±è¯­ç¾¤ç»„çš„æ„æ€ã€‚è¡¨ç¤ºç¾¤ç»„ç”¨æˆ·</li><li>oï¼šotherçš„ç¼©å†™ï¼Œæ˜¯è‹±è¯­å…¶ä»–çš„æ„æ€ã€‚è¡¨ç¤ºå…¶ä»–ç”¨æˆ·</li><li>aï¼šallçš„ç¼©å†™ï¼Œæ˜¯è‹±è¯­æ‰€æœ‰çš„æ„æ€ã€‚è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·</li><li>+ï¼šåŠ å·ï¼Œè¡¨ç¤ºæ·»åŠ æƒé™</li><li>-ï¼šå‡å·ï¼Œè¡¨ç¤ºå»é™¤æƒé™</li><li>&#x3D;ï¼šç­‰å·ï¼Œè¡¨ç¤ºåˆ†é…æƒé™</li></ul><blockquote><p><code>chmod u+rx file</code>ï¼šæ–‡ä»¶ file çš„æ‰€æœ‰è€…å¢åŠ è¯»å’Œè¿è¡Œçš„æƒé™</p><p><code>chmod g+r file</code>ï¼šæ–‡ä»¶ file çš„ç¾¤ç»„å…¶ä»–ç”¨æˆ·å¢åŠ è¯»çš„æƒé™</p><p><code>chmod o-r file</code>ï¼šæ–‡ä»¶ file çš„å…¶ä»–ç”¨æˆ·ç§»é™¤è¯»çš„æƒé™</p><p><code>chmod g+r o-r file</code>ï¼šæ–‡ä»¶ file çš„ç¾¤ç»„å…¶ä»–ç”¨æˆ·å¢åŠ è¯»çš„æƒé™ï¼Œå…¶ä»–ç”¨æˆ·ç§»é™¤è¯»çš„æƒé™</p><p><code>chmod go-r file</code>ï¼šæ–‡ä»¶ file çš„ç¾¤ç»„å…¶ä»–ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·å‡ç§»é™¤è¯»çš„æƒé™</p><p><code>chmod +x file</code>ï¼šæ–‡ä»¶ file çš„æ‰€æœ‰ç”¨æˆ·å¢åŠ è¿è¡Œçš„æƒé™</p><p><code>chmod u=rwx,g=r,0=- file</code>ï¼šæ–‡ä»¶ file çš„æ‰€æœ‰è€…åˆ†é…è¯»ï¼Œå†™å’Œæ‰§è¡Œçš„æƒé™ï¼›ç¾¤ç»„å…¶ä»–ç”¨æˆ·åˆ†é…è¯»çš„æƒé™ï¼Œä¸èƒ½å†™æˆ–æ‰§è¡Œï¼›å…¶ä»–ç”¨æˆ·æ²¡æœ‰ä»»ä½•æƒé™</p></blockquote></li></ul></li></ul><h2 id="æ­£åˆ™è¡¨è¾¾å¼å’Œæ•°æ®æ“ä½œ"><a href="#æ­£åˆ™è¡¨è¾¾å¼å’Œæ•°æ®æ“ä½œ" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼å’Œæ•°æ®æ“ä½œ"></a>æ­£åˆ™è¡¨è¾¾å¼å’Œæ•°æ®æ“ä½œ</h2><h3 id="grep-ç­›é€‰æ•°æ®"><a href="#grep-ç­›é€‰æ•°æ®" class="headerlink" title="grep: ç­›é€‰æ•°æ®"></a>grep: ç­›é€‰æ•°æ®</h3><p><strong>grep</strong> ï¼ˆglobal search regular expression(RE) and print out the lineï¼Œå…¨é¢æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æŠŠè¡Œæ‰“å°å‡ºæ¥ï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…·ï¼Œå®ƒèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢æ–‡æœ¬ï¼Œå¹¶æŠŠåŒ¹é…çš„è¡Œæ‰“å°å‡ºæ¥ã€‚ç”¨äºè¿‡æ»¤&#x2F;æœç´¢çš„ç‰¹å®šå­—ç¬¦ã€‚å¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼èƒ½å¤šç§å‘½ä»¤é…åˆä½¿ç”¨ï¼Œä½¿ç”¨ä¸Šååˆ†çµæ´»ã€‚</p><ul><li><code>-i</code> <code>--ignore-case</code>ï¼šå¿½ç•¥å­—ç¬¦å¤§å°å†™çš„å·®åˆ«ã€‚</li><li><code>-n</code>  <code>--line-number</code>ï¼šåœ¨æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—ä¹‹å‰ï¼Œæ ‡ç¤ºå‡ºè¯¥åˆ—çš„ç¼–å·ã€‚</li><li><code>-v</code> <code>--revert-match</code>ï¼šåè½¬æŸ¥æ‰¾ã€‚</li><li><code>-R/-r</code>  <code>--recursive</code>ï¼šåœ¨æ‰€æœ‰å­ç›®å½•å’Œå­æ–‡ä»¶ä¸­æŸ¥æ‰¾ï¼Œå¯ä»¥ç”¨  <code>rgrep</code> æ›¿ä»£</li><li><code>-E</code> <code>--extended-regexp</code>ï¼šå°†èŒƒæœ¬æ ·å¼ä¸ºå»¶ä¼¸çš„æ™®é€šè¡¨ç¤ºæ³•æ¥ä½¿ç”¨ï¼Œæ„å‘³ç€ä½¿ç”¨èƒ½ä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ã€‚å¯ä»¥ç”¨ <code>egrep</code> ä»£æ›¿<ul><li><code>grep -E ^p /etc/profile</code></li><li><code>grep -E [at] /etc/profile</code></li><li><code>grep -E [0-4] /etc/profile</code></li><li><code>grep -E [a-zA-Z] /etc/profile</code></li></ul></li></ul><h4 id="è§„åˆ™è¡¨è¾¾å¼"><a href="#è§„åˆ™è¡¨è¾¾å¼" class="headerlink" title="è§„åˆ™è¡¨è¾¾å¼"></a>è§„åˆ™è¡¨è¾¾å¼</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">^    # é”šå®šè¡Œçš„å¼€å§‹ å¦‚ï¼š&#x27;^grep&#x27;åŒ¹é…æ‰€æœ‰ä»¥grepå¼€å¤´çš„è¡Œã€‚</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">   <span class="comment"># é”šå®šè¡Œçš„ç»“æŸ å¦‚ï¼š&#x27;grep$&#x27; åŒ¹é…æ‰€æœ‰ä»¥grepç»“å°¾çš„è¡Œã€‚</span></span></span><br><span class="line">.    # åŒ¹é…ä¸€ä¸ªéæ¢è¡Œç¬¦çš„å­—ç¬¦ å¦‚ï¼š&#x27;gr.p&#x27;åŒ¹é…gråæ¥ä¸€ä¸ªä»»æ„å­—ç¬¦ï¼Œç„¶åæ˜¯pã€‚</span><br><span class="line">*    # åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå…ˆå‰å­—ç¬¦ å¦‚ï¼š&#x27;*grep&#x27;åŒ¹é…æ‰€æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼åç´§è·Ÿgrepçš„è¡Œã€‚</span><br><span class="line">.*   # ä¸€èµ·ç”¨ä»£è¡¨ä»»æ„å­—ç¬¦ã€‚</span><br><span class="line">[]   # åŒ¹é…ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼Œå¦‚&#x27;[Gg]rep&#x27;åŒ¹é…Grepå’Œgrepã€‚</span><br><span class="line">[^]  # åŒ¹é…ä¸€ä¸ªä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼Œå¦‚ï¼š&#x27;[^A-FH-Z]rep&#x27;åŒ¹é…ä¸åŒ…å«A-Rå’ŒT-Zçš„ä¸€ä¸ªå­—æ¯å¼€å¤´ï¼Œç´§è·Ÿrepçš„è¡Œã€‚</span><br><span class="line">\(..\)  # æ ‡è®°åŒ¹é…å­—ç¬¦ï¼Œå¦‚&#x27;\(love\)&#x27;ï¼Œloveè¢«æ ‡è®°ä¸º1ã€‚</span><br><span class="line">\&lt;      # é”šå®šå•è¯çš„å¼€å§‹ï¼Œå¦‚:&#x27;\&lt;grep&#x27;åŒ¹é…åŒ…å«ä»¥grepå¼€å¤´çš„å•è¯çš„è¡Œã€‚</span><br><span class="line">\&gt;      # é”šå®šå•è¯çš„ç»“æŸï¼Œå¦‚&#x27;grep\&gt;&#x27;åŒ¹é…åŒ…å«ä»¥grepç»“å°¾çš„å•è¯çš„è¡Œã€‚</span><br><span class="line">x\&#123;m\&#125;  # é‡å¤å­—ç¬¦xï¼Œmæ¬¡ï¼Œå¦‚ï¼š&#x27;0\&#123;5\&#125;&#x27;åŒ¹é…åŒ…å«5ä¸ªoçš„è¡Œã€‚</span><br><span class="line">x\&#123;m,\&#125;   # é‡å¤å­—ç¬¦x,è‡³å°‘mæ¬¡ï¼Œå¦‚ï¼š&#x27;o\&#123;5,\&#125;&#x27;åŒ¹é…è‡³å°‘æœ‰5ä¸ªoçš„è¡Œã€‚</span><br><span class="line">x\&#123;m,n\&#125;  # é‡å¤å­—ç¬¦xï¼Œè‡³å°‘mæ¬¡ï¼Œä¸å¤šäºnæ¬¡ï¼Œå¦‚ï¼š&#x27;o\&#123;5,10\&#125;&#x27;åŒ¹é…5--10ä¸ªoçš„è¡Œã€‚</span><br><span class="line">\w    # åŒ¹é…æ–‡å­—å’Œæ•°å­—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯[A-Za-z0-9]ï¼Œå¦‚ï¼š&#x27;G\w*p&#x27;åŒ¹é…ä»¥Gåè·Ÿé›¶ä¸ªæˆ–å¤šä¸ªæ–‡å­—æˆ–æ•°å­—å­—ç¬¦ï¼Œç„¶åæ˜¯pã€‚</span><br><span class="line">\W    # \wçš„åç½®å½¢å¼ï¼ŒåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªéå•è¯å­—ç¬¦ï¼Œå¦‚ç‚¹å·å¥å·ç­‰ã€‚</span><br><span class="line">\b    # å•è¯é”å®šç¬¦ï¼Œå¦‚: &#x27;\bgrep\b&#x27;åªåŒ¹é…grepã€‚</span><br></pre></td></tr></table></figure><h3 id="sort-æ–‡ä»¶æ’åº"><a href="#sort-æ–‡ä»¶æ’åº" class="headerlink" title="sort æ–‡ä»¶æ’åº"></a>sort æ–‡ä»¶æ’åº</h3><p>å¯¹æ–‡æœ¬æ–‡ä»¶ä¸­æ‰€æœ‰è¡Œè¿›è¡Œæ’åºã€‚</p><ul><li><code>-o</code>, <code>--output=FILE</code>ï¼šå°†ç»“æœå†™å…¥FILEè€Œä¸æ˜¯æ ‡å‡†è¾“å‡ºã€‚<code>sort -o name.txt name_sorted.txt</code></li><li><code>-r</code>, <code>--reverse</code>ï¼šå°†ç»“æœå€’åºæ’åˆ—ã€‚</li><li><code>-R</code>ï¼š<code>--random-sort</code> éšæœºæ’åºï¼Œä½†åˆ†ç»„ç›¸åŒçš„è¡Œã€‚</li><li><code>-n</code>, <code>--numeric-sort</code>ï¼šæ ¹æ®æ•°å­—æ’åºã€‚</li></ul><h4 id="ä¸»è¦ç”¨é€”"><a href="#ä¸»è¦ç”¨é€”" class="headerlink" title="ä¸»è¦ç”¨é€”"></a>ä¸»è¦ç”¨é€”</h4><ul><li>å°†æ‰€æœ‰è¾“å…¥æ–‡ä»¶çš„å†…å®¹æ’åºåå¹¶è¾“å‡ºã€‚</li><li>å½“æ²¡æœ‰æ–‡ä»¶æˆ–æ–‡ä»¶ä¸º<code>-</code>æ—¶ï¼Œè¯»å–æ ‡å‡†è¾“å…¥ã€‚</li></ul><h3 id="wc-æ–‡ä»¶ç»Ÿè®¡"><a href="#wc-æ–‡ä»¶ç»Ÿè®¡" class="headerlink" title="wc æ–‡ä»¶ç»Ÿè®¡"></a>wc æ–‡ä»¶ç»Ÿè®¡</h3><p>ç»Ÿè®¡æ–‡ä»¶çš„è¡Œæ•°ã€å­—æ•°ã€å­—èŠ‚æ•°</p><blockquote><p><strong>wcå‘½ä»¤</strong> ç»Ÿè®¡æŒ‡å®šæ–‡ä»¶ä¸­çš„å­—èŠ‚æ•°ã€å­—æ•°ã€è¡Œæ•°ï¼Œå¹¶å°†ç»Ÿè®¡ç»“æœæ˜¾ç¤ºè¾“å‡ºã€‚åˆ©ç”¨wcæŒ‡ä»¤æˆ‘ä»¬å¯ä»¥è®¡ç®—æ–‡ä»¶çš„Byteæ•°ã€å­—æ•°æˆ–æ˜¯åˆ—æ•°ï¼Œè‹¥ä¸æŒ‡å®šæ–‡ä»¶åç§°ï¼Œæˆ–æ˜¯æ‰€ç»™äºˆçš„æ–‡ä»¶åä¸ºâ€œ-â€ï¼Œåˆ™wcæŒ‡ä»¤ä¼šä»æ ‡å‡†è¾“å…¥è®¾å¤‡è¯»å–æ•°æ®ã€‚wcåŒæ—¶ä¹Ÿç»™å‡ºæ‰€æŒ‡å®šæ–‡ä»¶çš„æ€»ç»Ÿè®¡æ•°ã€‚</p></blockquote><ul><li><code>-c</code>ï¼š ç»Ÿè®¡å­—èŠ‚æ•°ï¼Œæˆ–<code>--bytes</code>æˆ–<code>--chars</code>ï¼šåªæ˜¾ç¤ºBytesæ•°</li><li><code>-l</code>ï¼šç»Ÿè®¡è¡Œæ•°ï¼Œæˆ–<code>--lines</code>ï¼šåªæ˜¾ç¤ºåˆ—æ•°</li><li><code>-m</code>ï¼šç»Ÿè®¡å­—ç¬¦æ•°ã€‚è¿™ä¸ªæ ‡å¿—ä¸èƒ½ä¸ <code>-c</code> æ ‡å¿—ä¸€èµ·ä½¿ç”¨</li><li><code>-w</code>ï¼šç»Ÿè®¡å­—æ•°ï¼Œæˆ–<code>--words</code>ï¼šåªæ˜¾ç¤ºå­—æ•°ã€‚ä¸€ä¸ªå­—è¢«å®šä¹‰ä¸ºç”±ç©ºç™½ã€è·³æ ¼æˆ–æ¢è¡Œå­—ç¬¦åˆ†éš”çš„å­—ç¬¦ä¸²</li><li><code>-L</code>ï¼šæ‰“å°æœ€é•¿è¡Œçš„é•¿åº¦</li></ul><h3 id="uniq-åˆ é™¤æ–‡ä»¶ä¸­çš„é‡å¤å†…å®¹"><a href="#uniq-åˆ é™¤æ–‡ä»¶ä¸­çš„é‡å¤å†…å®¹" class="headerlink" title="uniq: åˆ é™¤æ–‡ä»¶ä¸­çš„é‡å¤å†…å®¹"></a>uniq: åˆ é™¤æ–‡ä»¶ä¸­çš„é‡å¤å†…å®¹</h3><p>æ˜¾ç¤ºæˆ–å¿½ç•¥é‡å¤çš„è¡Œã€‚<code>uniq</code> å‘½ä»¤æœ‰ç‚¹â€å‘†â€œï¼Œåªèƒ½å°†è¿ç»­çš„é‡å¤è¡Œå˜ä¸ºä¸€è¡Œ</p><ul><li><code>-c</code>, <code>--count</code>ï¼šåœ¨æ¯è¡Œå¼€å¤´å¢åŠ é‡å¤æ¬¡æ•°</li><li><code>-d</code>, <code>--repeated</code>ï¼šåªæ˜¾ç¤ºé‡å¤è¡Œçš„å€¼</li></ul><h4 id="ä¸»è¦ç”¨é€”-1"><a href="#ä¸»è¦ç”¨é€”-1" class="headerlink" title="ä¸»è¦ç”¨é€”"></a>ä¸»è¦ç”¨é€”</h4><ul><li>å°†è¾“å…¥æ–‡ä»¶ï¼ˆæˆ–æ ‡å‡†è¾“å…¥ï¼‰ä¸­é‚»è¿‘çš„é‡å¤è¡Œå†™å…¥åˆ°è¾“å‡ºæ–‡ä»¶ï¼ˆæˆ–æ ‡å‡†è¾“å‡ºï¼‰ä¸­ã€‚</li><li>å½“æ²¡æœ‰é€‰é¡¹æ—¶ï¼Œé‚»è¿‘çš„é‡å¤è¡Œå°†åˆå¹¶ä¸ºä¸€ä¸ªã€‚</li></ul><h3 id="cut-å‰ªåˆ‡æ–‡ä»¶çš„ä¸€éƒ¨åˆ†å†…å®¹"><a href="#cut-å‰ªåˆ‡æ–‡ä»¶çš„ä¸€éƒ¨åˆ†å†…å®¹" class="headerlink" title="cut: å‰ªåˆ‡æ–‡ä»¶çš„ä¸€éƒ¨åˆ†å†…å®¹"></a>cut: å‰ªåˆ‡æ–‡ä»¶çš„ä¸€éƒ¨åˆ†å†…å®¹</h3><p>è¿æ¥æ–‡ä»¶å¹¶æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ä¸Š</p><ul><li><code>-c</code>ï¼šä»…æ˜¾ç¤ºè¡Œä¸­æŒ‡å®šèŒƒå›´çš„å­—ç¬¦ï¼Œ<code>cut -c 2-4 file</code></li><li><code>-d</code>ï¼šæŒ‡å®šå­—æ®µçš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤çš„å­—æ®µåˆ†éš”ç¬¦ä¸ºâ€œTABâ€ã€‚</li><li></li></ul><h2 id="è¾“å‡ºé‡å®šå‘"><a href="#è¾“å‡ºé‡å®šå‘" class="headerlink" title="è¾“å‡ºé‡å®šå‘"></a>è¾“å‡ºé‡å®šå‘</h2><blockquote><p>é»‘æ´æ–‡ä»¶ <code>/dev/null</code>ï¼Œæ­¤æ–‡ä»¶å…·æœ‰å”¯ä¸€çš„å±æ€§ï¼Œå®ƒæ€»æ˜¯ç©ºçš„ã€‚å®ƒèƒ½ä½¿å‘é€åˆ° <code>/dev/null</code> çš„ä»»ä½•æ•°æ®ä½œåºŸ</p></blockquote><h3 id="gt-é‡å®šå‘åˆ°æ–‡ä»¶"><a href="#gt-é‡å®šå‘åˆ°æ–‡ä»¶" class="headerlink" title="&gt; é‡å®šå‘åˆ°æ–‡ä»¶"></a><code>&gt;</code> é‡å®šå‘åˆ°æ–‡ä»¶</h3><ul><li>å¦‚æœæ­¤æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºä¸€ä¸ªæ–‡ä»¶</li><li>å¦‚æœæ­¤æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œé‚£å°±ä¼šæŠŠæ–‡ä»¶å†…å®¹è¦†ç›–æ‰ï¼Œè€Œä¸”ä¸ä¼šå¾æ±‚ç”¨æˆ·åŒæ„</li></ul><h3 id="gt-gt-é‡å®šå‘åˆ°æ–‡ä»¶æœ«å°¾"><a href="#gt-gt-é‡å®šå‘åˆ°æ–‡ä»¶æœ«å°¾" class="headerlink" title="&gt;&gt; é‡å®šå‘åˆ°æ–‡ä»¶æœ«å°¾"></a><code>&gt;&gt;</code> é‡å®šå‘åˆ°æ–‡ä»¶æœ«å°¾</h3><p><code>&gt;&gt;</code>çš„ä½œç”¨ä¸<code>&gt;</code>æ˜¯ç±»ä¼¼çš„ï¼Œä¸è¿‡å®ƒä¸ä¼šåƒ<code>&gt;</code>é‚£ä¹ˆå±é™©ã€‚å®ƒä¼šå°†é‡å®šå‘çš„å†…å®¹å†™å…¥åˆ°æ–‡ä»¶æœ«å°¾ï¼Œèµ·åˆ°è¿½åŠ çš„ä½œç”¨ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–‡ä»¶</p><h3 id="2-gt-ã€2-gt-gt-é‡å®šå‘åˆ°æ ‡å‡†é”™è¯¯è¾“å‡º"><a href="#2-gt-ã€2-gt-gt-é‡å®šå‘åˆ°æ ‡å‡†é”™è¯¯è¾“å‡º" class="headerlink" title="2&gt; ã€2&gt;&gt;é‡å®šå‘åˆ°æ ‡å‡†é”™è¯¯è¾“å‡º"></a><code>2&gt;</code> ã€<code>2&gt;&gt;</code>é‡å®šå‘åˆ°æ ‡å‡†é”™è¯¯è¾“å‡º</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> not_exist_file.csv &gt; results.txt 2&gt; errors.log</span></span><br></pre></td></tr></table></figure><h3 id="2-gt-amp-1-ç»„åˆç¬¦åˆ"><a href="#2-gt-amp-1-ç»„åˆç¬¦åˆ" class="headerlink" title="2&gt;&amp;1 ç»„åˆç¬¦åˆ"></a><code>2&gt;&amp;1</code> ç»„åˆç¬¦åˆ</h3><ul><li>å°†æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°ä¸æ ‡å‡†è¾“å‡ºç›¸åŒçš„åœ°æ–¹</li><li>è¦†ç›–ï¼š<code>cat not_exist_file_csv &gt; results.txt 2&gt;&amp;1</code></li><li>æœ«å°¾è¿½åŠ ï¼š<code>cat not_exist_file_csv &gt;&gt; results.txt 2&gt;&amp;1</code></li></ul><h3 id="stdinã€stdoutã€stderr"><a href="#stdinã€stdoutã€stderr" class="headerlink" title="stdinã€stdoutã€stderr"></a>stdinã€stdoutã€stderr</h3><ul><li>ä»é”®ç›˜å‘ç»ˆç«¯è¾“å…¥æ•°æ®ï¼Œè¿™æ˜¯æ ‡å‡†è¾“å…¥ï¼Œä¹Ÿå°±æ˜¯ stdin</li><li>ç»ˆç«¯æ¥æ”¶é”®ç›˜è¾“å…¥çš„å‘½ä»¤ï¼Œä¼šäº§ç”Ÿä¸¤ç§è¾“å‡º<ul><li>æ ‡å‡†è¾“å‡ºï¼šstdoutã€‚æŒ‡ç»ˆç«¯è¾“å‡ºçš„ä¿¡æ¯ï¼ˆä¸åŒ…æ‹¬é”™è¯¯ä¿¡æ¯ï¼‰</li><li>æ ‡å‡†é”™è¯¯è¾“å‡ºï¼šstderrã€‚æŒ‡ç»ˆç«¯è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯</li></ul></li></ul><h2 id="è¾“å…¥é‡å®šå‘"><a href="#è¾“å…¥é‡å®šå‘" class="headerlink" title="è¾“å…¥é‡å®šå‘"></a>è¾“å…¥é‡å®šå‘</h2><h3 id="lt-ä»æ–‡ä»¶ä¸­è¯»å–"><a href="#lt-ä»æ–‡ä»¶ä¸­è¯»å–" class="headerlink" title="&lt; ä»æ–‡ä»¶ä¸­è¯»å–"></a><code>&lt;</code> ä»æ–‡ä»¶ä¸­è¯»å–</h3><ul><li><p><code>cat notes.csv</code></p><ul><li><code>cat</code> å‘½ä»¤æ¥å—çš„è¾“å…¥æ˜¯ notes.csv è¿™ä¸ªæ–‡ä»¶å</li><li>é‚£ä¹ˆå®ƒè¦å…ˆæ‰“å¼€ notes.csv æ–‡ä»¶</li><li>ç„¶åæ‰“å°å‡ºæ–‡ä»¶å†…å®¹</li></ul></li><li><p><code>cat &lt; notes.csv</code></p><ul><li><code>cat</code> å‘½ä»¤æ¥å—çš„è¾“å…¥ç›´æ¥æ˜¯ notes.csv è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹</li><li><code>cat</code> å‘½ä»¤åªè´Ÿè´£å°†å…¶å†…å®¹æ‰“å°</li><li>æ‰“å¼€æ–‡ä»¶å¹¶å°†æ–‡ä»¶å†…å®¹ä¼ é€’ç»™ <code>cat</code> å‘½ä»¤çš„å·¥ä½œåˆ™äº¤ç»™ç»ˆç«¯å®Œæˆ</li></ul></li></ul><h3 id="lt-lt-ä»é”®ç›˜è¯»å–"><a href="#lt-lt-ä»é”®ç›˜è¯»å–" class="headerlink" title="&lt;&lt; ä»é”®ç›˜è¯»å–"></a><code>&lt;&lt;</code> ä»é”®ç›˜è¯»å–</h3><ul><li><code>&lt;&lt;</code> ç¬¦å·çš„ä½œç”¨æ˜¯å°†é”®ç›˜çš„è¾“å…¥é‡å®šå‘ä¸ºæŸä¸ªå‘½ä»¤çš„è¾“å…¥</li><li><code>sort -n &lt;&lt; END</code></li></ul><h2 id="ç®¡é“ç¬¦å·"><a href="#ç®¡é“ç¬¦å·" class="headerlink" title="| ç®¡é“ç¬¦å·"></a><code>|</code> ç®¡é“ç¬¦å·</h2><p>å°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥</p><ul><li>ä¼ è¯´ä¸­çš„ â€ç®¡é“ç¬¦å·â€œï¼š<code>|</code></li><li><code>|</code>ç¬¦å·æ—¢ç„¶è¢«ç§°ä¸ºâ€ç®¡é“ç¬¦â€œï¼Œå…¶ä½œç”¨å°±æ˜¯â€å»ºç«‹å‘½ä»¤ç®¡é“â€œ</li><li>ç®¡é“ä¹Ÿç®—æ˜¯é‡å®šå‘æµçš„ä¸€ç§</li><li><code>cut -d , -f 1 notes.csv | sort &gt; sorted_names.txt</code></li><li><code>du -h | sort -n | head</code></li><li><code>sudo grep log -Ir /var/log | cut -d : -f 1 | sort | uniq</code><ul><li><code>-I</code>ï¼šæ’é™¤äºŒè¿›åˆ¶æ–‡ä»¶</li><li><code>-r</code>ï¼šç”¨äºé€’å½’éå†</li></ul></li></ul><h2 id="è¿›ç¨‹å’Œç³»ç»Ÿç›‘æµ‹"><a href="#è¿›ç¨‹å’Œç³»ç»Ÿç›‘æµ‹" class="headerlink" title="è¿›ç¨‹å’Œç³»ç»Ÿç›‘æµ‹"></a>è¿›ç¨‹å’Œç³»ç»Ÿç›‘æµ‹</h2><ul><li><p><code>w</code>ï¼šæ˜¾ç¤ºç›®å‰ç™»å…¥ç³»ç»Ÿçš„ç”¨æˆ·ä¿¡æ¯</p></li><li><p><code>uptime</code>ï¼šæŸ¥çœ‹Linuxç³»ç»Ÿè´Ÿè½½ä¿¡æ¯</p><blockquote><p>èƒ½å¤Ÿæ‰“å°ç³»ç»Ÿæ€»å…±è¿è¡Œäº†å¤šé•¿æ—¶é—´å’Œç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ã€‚uptimeå‘½ä»¤å¯ä»¥æ˜¾ç¤ºçš„ä¿¡æ¯æ˜¾ç¤ºä¾æ¬¡ä¸ºï¼šç°åœ¨æ—¶é—´ã€ç³»ç»Ÿå·²ç»è¿è¡Œäº†å¤šé•¿æ—¶é—´ã€ç›®å‰æœ‰å¤šå°‘ç™»é™†ç”¨æˆ·ã€ç³»ç»Ÿåœ¨è¿‡å»çš„1åˆ†é’Ÿã€5åˆ†é’Ÿå’Œ15åˆ†é’Ÿå†…çš„å¹³å‡è´Ÿè½½ã€‚</p></blockquote></li><li><p><code>tload</code>ï¼šæ˜¾ç¤ºç³»ç»Ÿè´Ÿè½½çŠ¶å†µ</p><blockquote><p>ä»¥å›¾å½¢åŒ–çš„æ–¹å¼è¾“å‡ºå½“å‰ç³»ç»Ÿçš„å¹³å‡è´Ÿè½½åˆ°æŒ‡å®šçš„ç»ˆç«¯ã€‚å‡è®¾ä¸ç»™äºˆç»ˆç«¯æœºç¼–å·ï¼Œåˆ™ä¼šåœ¨æ‰§è¡ŒtloadæŒ‡ä»¤çš„ç»ˆç«¯æœºæ˜¾ç¤ºè´Ÿè½½æƒ…å½¢</p></blockquote></li><li><p><code>who</code>ï¼šæ˜¾ç¤ºç›®å‰ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·ä¿¡æ¯</p><blockquote><p>æ˜¾ç¤ºç›®å‰ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·ä¿¡æ¯ã€‚æ‰§è¡Œwhoå‘½ä»¤å¯å¾—çŸ¥ç›®å‰æœ‰é‚£äº›ç”¨æˆ·ç™»å…¥ç³»ç»Ÿï¼Œå•ç‹¬æ‰§è¡Œwhoå‘½ä»¤ä¼šåˆ—å‡ºç™»å…¥å¸å·ï¼Œä½¿ç”¨çš„ç»ˆç«¯æœºï¼Œç™»å…¥æ—¶é—´ä»¥åŠä»ä½•å¤„ç™»å…¥æˆ–æ­£åœ¨ä½¿ç”¨å“ªä¸ªXæ˜¾ç¤ºå™¨ã€‚</p></blockquote></li><li><p><code>ps</code>ï¼šæŠ¥å‘Šå½“å‰ç³»ç»Ÿçš„è¿›ç¨‹çŠ¶æ€ process status</p><ul><li>è¾“å‡º<ul><li>UIDï¼šè¿è¡Œè¿›ç¨‹çš„ç”¨æˆ·</li><li>PIDï¼šè¿›ç¨‹å·ï¼Œprocess identifierï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰å”¯ä¸€çš„è¿›ç¨‹å·</li><li>PPIDï¼šç¨‹åºçš„çˆ¶è¿›ç¨‹å·ï¼Œparent process ID</li><li>TTYï¼šè¿›ç¨‹è¿è¡Œæ‰€åœ¨çš„ç»ˆç«¯</li><li>TIMEï¼šè¿›ç¨‹è¿è¡Œçš„æ—¶é—´</li><li>CMDï¼šäº§ç”Ÿè¿™ä¸ªè¿›ç¨‹çš„ç¨‹åºå</li></ul></li><li>å®è·µ<ul><li><code>-ef</code>ï¼šåˆ—å‡ºæ‰€æœ‰ç”¨æˆ·åœ¨æ‰€æœ‰ç»ˆç«¯çš„æ‰€æœ‰è¿›ç¨‹ï¼Œå¯ä»¥é…åˆç®¡é“æ–¹ä¾¿æŸ¥çœ‹ <code>ps -ef | less</code></li><li><code>-efH</code>ï¼šæŒ‰ç…§ä¹”æœ¨çŠ¶åˆ—å‡ºè¿›ç¨‹</li><li><code>-u</code>ï¼šåˆ—å‡ºæ­¤ç”¨æˆ·è¿è¡Œçš„è¿›ç¨‹</li><li><code>-aux</code>ï¼šé€šè¿‡CPUå’Œå†…å­˜ä½¿ç”¨æ¥è¿‡æ»¤è¿›ç¨‹<ul><li><code>ps -aux --sort -pcpu | less</code>ï¼šæ ¹æ®CPUä½¿ç”¨ç‡é™åºæ’åˆ—</li><li><code>ps -aux --sort -pmem | less</code>ï¼šæ ¹æ®å†…å­˜ä½¿ç”¨ç‡é™åºæ’åˆ—</li></ul></li><li><code>ps -axjf</code> ï¼Œ<code>pstree</code>ï¼šä»¥æ ‘å½¢ç»“æ„æ˜¾ç¤ºè¿›ç¨‹</li></ul></li></ul><blockquote><p>ç”¨äºæŠ¥å‘Šå½“å‰ç³»ç»Ÿçš„è¿›ç¨‹çŠ¶æ€ã€‚å¯ä»¥æ­é…<code>kill</code>æŒ‡ä»¤éšæ—¶ä¸­æ–­ã€åˆ é™¤ä¸å¿…è¦çš„ç¨‹åºã€‚pså‘½ä»¤æ˜¯æœ€åŸºæœ¬åŒæ—¶ä¹Ÿæ˜¯éå¸¸å¼ºå¤§çš„è¿›ç¨‹æŸ¥çœ‹å‘½ä»¤ï¼Œä½¿ç”¨è¯¥å‘½ä»¤å¯ä»¥ç¡®å®šæœ‰å“ªäº›è¿›ç¨‹æ­£åœ¨è¿è¡Œå’Œè¿è¡Œçš„çŠ¶æ€ã€è¿›ç¨‹æ˜¯å¦ç»“æŸã€è¿›ç¨‹æœ‰æ²¡æœ‰åƒµæ­»ã€å“ªäº›è¿›ç¨‹å ç”¨äº†è¿‡å¤šçš„èµ„æºç­‰ç­‰ï¼Œæ€»ä¹‹å¤§éƒ¨åˆ†ä¿¡æ¯éƒ½æ˜¯å¯ä»¥é€šè¿‡æ‰§è¡Œè¯¥å‘½ä»¤å¾—åˆ°çš„ã€‚</p></blockquote></li><li><p><code>top</code>ï¼šæ˜¾ç¤ºæˆ–ç®¡ç†æ‰§è¡Œä¸­çš„ç¨‹åº</p><ul><li>qé”®ï¼šé€€å‡º</li><li>hé”®ï¼šæ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£</li><li>Bé”®ï¼šåŠ ç²—æŸäº›ä¿¡æ¯</li><li>f&#x2F;Fé”®ï¼šåœ¨è¿›ç¨‹åˆ—è¡¨ä¸­æ·»åŠ æˆ–åˆ é™¤æŸäº›åˆ—</li><li>ué”®ï¼šä¾ç…§ç”¨æˆ·æ¥è¿‡æ»¤æ˜¾ç¤º</li><li>ké”®ï¼šç»“æŸæŸä¸ªè¿›ç¨‹</li><li>sé”®ï¼šæ”¹å˜åˆ·æ–°é¡µé¢çš„æ—¶é—´ï¼Œé»˜è®¤åœ°é¡µé¢æ¯ä¸ª3ç§’åˆ·æ–°ä¸€æ¬¡</li></ul></li><li><p><code>kill</code>ï¼šæ ¹æ®è¿›ç¨‹å·ç»“æŸä¸€ä¸ªè¿›ç¨‹</p><ul><li><code>-9</code>ï¼šå¼ºåˆ¶ç»“æŸè¿›ç¨‹</li></ul></li><li><p><code>killall</code>ï¼šæ ¹æ®è¿›ç¨‹åç»“æŸæ‰€æœ‰è¿›ç¨‹ï¼Œå¯ä»¥ç»“åˆ<code>find</code></p></li></ul><h3 id="glances"><a href="#glances" class="headerlink" title="glances"></a>glances</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt install glances -y</span></span><br></pre></td></tr></table></figure><img src="https://i.loli.net/2020/03/29/mUqi9MRt6vT2HIK.png" style="zoom:25%;" /><h3 id="htop"><a href="#htop" class="headerlink" title="htop"></a>htop</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt install htop -y</span></span><br></pre></td></tr></table></figure><img src="https://i.loli.net/2020/03/29/jZbnwPI3BKq4lES.png" style="zoom:25%;" /><h2 id="ç®¡ç†å‰åå°è¿›ç¨‹"><a href="#ç®¡ç†å‰åå°è¿›ç¨‹" class="headerlink" title="ç®¡ç†å‰åå°è¿›ç¨‹"></a>ç®¡ç†å‰åå°è¿›ç¨‹</h2><img src="https://i.loli.net/2020/03/29/Y15XE8zCdVKDrJP.png" style="zoom:80%;" /><h3 id="amp-ç¬¦å·ï¼šåå°è¿è¡Œè¿›ç¨‹"><a href="#amp-ç¬¦å·ï¼šåå°è¿è¡Œè¿›ç¨‹" class="headerlink" title="&amp; ç¬¦å·ï¼šåå°è¿è¡Œè¿›ç¨‹"></a><code>&amp;</code> ç¬¦å·ï¼šåå°è¿è¡Œè¿›ç¨‹</h3><ul><li><code>cp file.txt file-copy.txt &amp;</code></li><li><code>find / -name &quot;*log&quot; &gt; output_find 2&gt;&amp;1 &amp;</code></li></ul><h3 id="nohup-ä½¿è¿›ç¨‹ä¸ç»ˆç«¯åˆ†ç¦»"><a href="#nohup-ä½¿è¿›ç¨‹ä¸ç»ˆç«¯åˆ†ç¦»" class="headerlink" title="nohup: ä½¿è¿›ç¨‹ä¸ç»ˆç«¯åˆ†ç¦»"></a><code>nohup</code>: ä½¿è¿›ç¨‹ä¸ç»ˆç«¯åˆ†ç¦»</h3><p>æ— è®ºæ˜¯å¦å°† nohup å‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ°ç»ˆç«¯ï¼Œè¾“å‡ºéƒ½å°†é™„åŠ åˆ°å½“å‰ç›®å½•çš„ nohup.out æ–‡ä»¶ä¸­ã€‚hangupï¼ŒæŒ‚èµ·</p><p>å¦‚æœå½“å‰ç›®å½•çš„ nohup.out æ–‡ä»¶ä¸å¯å†™ï¼Œè¾“å‡ºé‡å®šå‘åˆ°<code>$HOME/nohup.out</code>æ–‡ä»¶ä¸­ã€‚å¦‚æœæ²¡æœ‰æ–‡ä»¶èƒ½åˆ›å»ºæˆ–æ‰“å¼€ä»¥ç”¨äºè¿½åŠ ï¼Œé‚£ä¹ˆ command å‚æ•°æŒ‡å®šçš„å‘½ä»¤ä¸å¯è°ƒç”¨ã€‚å¦‚æœæ ‡å‡†é”™è¯¯æ˜¯ä¸€ä¸ªç»ˆç«¯ï¼Œé‚£ä¹ˆæŠŠæŒ‡å®šçš„å‘½ä»¤å†™ç»™æ ‡å‡†é”™è¯¯çš„æ‰€æœ‰è¾“å‡ºä½œä¸ºæ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°ç›¸åŒçš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p><h3 id="Ctrl-Zã€bg-è¿›ç¨‹è½¬ä¸ºåå°è¿è¡Œ"><a href="#Ctrl-Zã€bg-è¿›ç¨‹è½¬ä¸ºåå°è¿è¡Œ" class="headerlink" title="Ctrl + Zã€bg è¿›ç¨‹è½¬ä¸ºåå°è¿è¡Œ"></a>Ctrl + Zã€bg è¿›ç¨‹è½¬ä¸ºåå°è¿è¡Œ</h3><h3 id="jobsï¼šæ˜¾ç¤ºåå°è¿›ç¨‹çŠ¶æ€"><a href="#jobsï¼šæ˜¾ç¤ºåå°è¿›ç¨‹çŠ¶æ€" class="headerlink" title="jobsï¼šæ˜¾ç¤ºåå°è¿›ç¨‹çŠ¶æ€"></a>jobsï¼šæ˜¾ç¤ºåå°è¿›ç¨‹çŠ¶æ€</h3><h3 id="fgï¼šä½¿è¿›ç¨‹è½¬ä¸ºå‰å°è¿è¡Œ"><a href="#fgï¼šä½¿è¿›ç¨‹è½¬ä¸ºå‰å°è¿è¡Œ" class="headerlink" title="fgï¼šä½¿è¿›ç¨‹è½¬ä¸ºå‰å°è¿è¡Œ"></a>fgï¼šä½¿è¿›ç¨‹è½¬ä¸ºå‰å°è¿è¡Œ</h3><h2 id="æ–‡ä»¶çš„è§£å‹å’Œå‹ç¼©"><a href="#æ–‡ä»¶çš„è§£å‹å’Œå‹ç¼©" class="headerlink" title="æ–‡ä»¶çš„è§£å‹å’Œå‹ç¼©"></a>æ–‡ä»¶çš„è§£å‹å’Œå‹ç¼©</h2><ul><li><code>tar</code>ï¼šLinuxä¸‹çš„å½’æ¡£ä½¿ç”¨å·¥å…·ï¼Œç”¨æ¥æ‰“åŒ…å’Œå¤‡ä»½<ul><li><code>-cvf</code>ï¼šåˆ›å»ºä¸€ä¸ª tar å½’æ¡£ï¼Œ<code>tar -cvf a.tar a/</code><ul><li>cï¼šcreate çš„ç¼©å†™ï¼Œè¡¨ç¤ºåˆ›å»º</li><li>vï¼šverbose çš„ç¼©å†™ï¼Œè¡¨ç¤ºå†—ä½™ã€‚ä¼šæ˜¾ç¤ºæ“ä½œç»†èŠ‚</li><li>fï¼šfile çš„ç¼©å†™ï¼Œè¡¨ç¤ºæ–‡ä»¶ï¼ŒæŒ‡å®šå½’æ¡£æ–‡ä»¶</li></ul></li><li><code>-tf</code>ï¼šæ˜¾ç¤ºå½’æ¡£é‡Œçš„å†…å®¹ï¼Œå¹¶ä¸è§£å¼€å½’</li><li><code>-xvf</code>ï¼šè§£å¼€å½’æ¡£<ul><li>xï¼šextract çš„ç¼©å†™ï¼Œè¡¨ç¤ºâ€æå–ï¼Œå–å‡ºâ€œ</li></ul></li><li><code>-zcvf</code>ï¼šå½’æ¡£ï¼Œç„¶åç”¨ gzip æ¥å‹ç¼©å½’æ¡£</li><li><code>-zxvf</code>ï¼šè§£gzipå‹ç¼©ï¼Œç„¶åè§£å¼€å½’æ¡£</li><li><code>-jcvf</code>ï¼šå½’æ¡£ï¼Œç„¶åç”¨ bzip2 æ¥å‹ç¼©å½’æ¡£</li><li><code>-jxvf</code>ï¼šè§£bzip2å‹ç¼©ï¼Œç„¶åè§£å¼€å½’æ¡£</li></ul></li><li><code>zcat</code>ã€<code>zmore</code>ã€<code>zless</code></li><li><code>bzcat</code>ã€<code>bzmore</code>ã€<code>bzless</code></li><li><code>unzip</code>ã€<code>unrar</code>ï¼š<code>apt install zip</code></li></ul><h2 id="å®šæ—¶å’Œå»¶æ—¶æ‰§è¡Œ"><a href="#å®šæ—¶å’Œå»¶æ—¶æ‰§è¡Œ" class="headerlink" title="å®šæ—¶å’Œå»¶æ—¶æ‰§è¡Œ"></a>å®šæ—¶å’Œå»¶æ—¶æ‰§è¡Œ</h2><h3 id="dateï¼šæ˜¾ç¤ºæˆ–è®¾ç½®ç³»ç»Ÿæ—¶é—´ä¸æ—¥æœŸ"><a href="#dateï¼šæ˜¾ç¤ºæˆ–è®¾ç½®ç³»ç»Ÿæ—¶é—´ä¸æ—¥æœŸ" class="headerlink" title="dateï¼šæ˜¾ç¤ºæˆ–è®¾ç½®ç³»ç»Ÿæ—¶é—´ä¸æ—¥æœŸ"></a>dateï¼šæ˜¾ç¤ºæˆ–è®¾ç½®ç³»ç»Ÿæ—¶é—´ä¸æ—¥æœŸ</h3><ul><li><code>date +&quot;%H&quot;</code>ï¼š11</li><li><code>date +&quot;%H:%M:%S&quot;</code>ï¼š11:15:51</li><li><code>date +&quot;%Y-%m-%d&quot;</code>ï¼š2020-03-29</li><li><code>date +&quot;%Y-%m-%d %H:%M:%S&quot;</code>ï¼š2020-03-29 11:15:51</li><li>ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ï¼š<code>date 10121430</code></li></ul><h3 id="atï¼šåœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œä¸€ä¸ªä»»åŠ¡"><a href="#atï¼šåœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œä¸€ä¸ªä»»åŠ¡" class="headerlink" title="atï¼šåœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œä¸€ä¸ªä»»åŠ¡"></a>atï¼šåœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œä¸€ä¸ªä»»åŠ¡</h3><p><strong>atå‘½ä»¤</strong> ç”¨äºåœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œå‘½ä»¤ã€‚<code>at</code>å…è®¸ä½¿ç”¨ä¸€å¥—ç›¸å½“å¤æ‚çš„æŒ‡å®šæ—¶é—´çš„æ–¹æ³•ã€‚å®ƒèƒ½å¤Ÿæ¥å—åœ¨å½“å¤©çš„<code>hh:mmï¼ˆå°æ—¶:åˆ†é’Ÿï¼‰</code>å¼çš„æ—¶é—´æŒ‡å®šã€‚å‡å¦‚è¯¥æ—¶é—´å·²è¿‡å»ï¼Œé‚£ä¹ˆå°±æ”¾åœ¨ç¬¬äºŒå¤©æ‰§è¡Œã€‚å½“ç„¶ä¹Ÿèƒ½å¤Ÿä½¿ç”¨<code>midnight</code>ï¼ˆæ·±å¤œï¼‰ï¼Œ<code>noon</code>ï¼ˆä¸­åˆï¼‰ï¼Œ<code>teatime</code>ï¼ˆé¥®èŒ¶æ—¶é—´ï¼Œä¸€èˆ¬æ˜¯ä¸‹åˆ4ç‚¹ï¼‰ç­‰æ¯”è¾ƒæ¨¡ç³Šçš„è¯è¯­æ¥æŒ‡å®šæ—¶é—´ã€‚ç”¨æˆ·è¿˜èƒ½å¤Ÿé‡‡ç”¨12å°æ—¶è®¡æ—¶åˆ¶ï¼Œå³åœ¨æ—¶é—´åé¢åŠ ä¸ŠAMï¼ˆä¸Šåˆï¼‰æˆ–PMï¼ˆä¸‹åˆï¼‰æ¥è¯´æ˜æ˜¯ä¸Šåˆè¿˜æ˜¯ä¸‹åˆã€‚ ä¹Ÿèƒ½å¤ŸæŒ‡å®šå‘½ä»¤æ‰§è¡Œçš„å…·ä½“æ—¥æœŸï¼ŒæŒ‡å®šæ ¼å¼ä¸º<code>month dayï¼ˆæœˆ æ—¥ï¼‰</code>æˆ– <code>mm/dd/yyï¼ˆæœˆ/æ—¥/å¹´ï¼‰</code>æˆ–<code>dd.mm.yyï¼ˆæ—¥.æœˆ.å¹´ï¼‰</code>ã€‚æŒ‡å®šçš„æ—¥æœŸå¿…é¡»è·Ÿåœ¨æŒ‡å®šæ—¶é—´çš„åé¢ã€‚</p><p>ä¸Šé¢ä»‹ç»çš„éƒ½æ˜¯ç»å¯¹è®¡æ—¶æ³•ï¼Œå…¶å®è¿˜èƒ½å¤Ÿä½¿ç”¨ç›¸å¯¹è®¡æ—¶æ³•ï¼Œè¿™å¯¹äºå®‰æ’ä¸ä¹…å°±è¦æ‰§è¡Œçš„å‘½ä»¤æ˜¯å¾ˆæœ‰å¥½å¤„çš„ã€‚æŒ‡å®šæ ¼å¼ä¸ºï¼š<code>now + count time-units</code>ï¼Œ<code>now</code>å°±æ˜¯å½“å‰æ—¶é—´ï¼Œtime-units æ˜¯æ—¶é—´å•ä½ï¼Œè¿™é‡Œèƒ½å¤Ÿæ˜¯<code>minutes</code>ï¼ˆåˆ†é’Ÿï¼‰ã€<code>hours</code>ï¼ˆå°æ—¶ï¼‰ã€<code>days</code>ï¼ˆå¤©ï¼‰ã€<code>weeks</code>ï¼ˆæ˜ŸæœŸï¼‰ã€‚<code>count</code>æ˜¯æ—¶é—´çš„æ•°é‡ï¼Œç©¶ç«Ÿæ˜¯å‡ å¤©ï¼Œè¿˜æ˜¯å‡ å°æ—¶ï¼Œç­‰ç­‰ã€‚ æ›´æœ‰ä¸€ç§è®¡æ—¶æ–¹æ³•å°±æ˜¯ç›´æ¥ä½¿ç”¨<code>today</code>ï¼ˆä»Šå¤©ï¼‰ã€<code>tomorrow</code>ï¼ˆæ˜å¤©ï¼‰æ¥æŒ‡å®šå®Œæˆå‘½ä»¤çš„æ—¶é—´ã€‚</p><ul><li><code>at 22:10</code>ï¼Œä¼šæç¤ºè®©è¾“å…¥å‘½ä»¤ï¼Œä»¥<code>&lt;EOT&gt;</code>ç»“æŸè¾“å…¥</li><li><code>at 22:10 tomorrow</code>ï¼šæ˜å¤© 22:10 æ‰§è¡Œ</li><li><code>at 22:10 03/30/2020</code>ï¼šåœ¨ 2020å¹´3æœˆ20å·22:10æ‰§è¡Œ</li><li><code>at now +10 minutes</code>ï¼š10åˆ†é’Ÿä¹‹åæ‰§è¡Œ</li></ul><h3 id="atqï¼šåˆ—å‡ºå½“å‰ç”¨æˆ·çš„atä»»åŠ¡åˆ—è¡¨"><a href="#atqï¼šåˆ—å‡ºå½“å‰ç”¨æˆ·çš„atä»»åŠ¡åˆ—è¡¨" class="headerlink" title="atqï¼šåˆ—å‡ºå½“å‰ç”¨æˆ·çš„atä»»åŠ¡åˆ—è¡¨"></a>atqï¼šåˆ—å‡ºå½“å‰ç”¨æˆ·çš„atä»»åŠ¡åˆ—è¡¨</h3><ul><li>qæ˜¯è‹±è¯­ queue çš„é¦–å­—æ¯ï¼Œè¡¨ç¤ºâ€œé˜Ÿåˆ—â€</li></ul><p><strong>atqå‘½ä»¤</strong> æ˜¾ç¤ºç³»ç»Ÿä¸­å¾…æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯åˆ—å‡ºå½“å‰ç”¨æˆ·çš„atä»»åŠ¡åˆ—è¡¨ã€‚</p><h3 id="atrmï¼šåˆ é™¤å¾…æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æŒ‡å®šä»»åŠ¡"><a href="#atrmï¼šåˆ é™¤å¾…æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æŒ‡å®šä»»åŠ¡" class="headerlink" title="atrmï¼šåˆ é™¤å¾…æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æŒ‡å®šä»»åŠ¡"></a>atrmï¼šåˆ é™¤å¾…æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æŒ‡å®šä»»åŠ¡</h3><p><strong>atrmå‘½ä»¤</strong> ç”¨äºåˆ é™¤å¾…æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æŒ‡å®šä»»åŠ¡ã€‚</p><h3 id="sleepï¼šå°†ç›®å‰åŠ¨ä½œå»¶è¿Ÿä¸€æ®µæ—¶é—´"><a href="#sleepï¼šå°†ç›®å‰åŠ¨ä½œå»¶è¿Ÿä¸€æ®µæ—¶é—´" class="headerlink" title="sleepï¼šå°†ç›®å‰åŠ¨ä½œå»¶è¿Ÿä¸€æ®µæ—¶é—´"></a>sleepï¼šå°†ç›®å‰åŠ¨ä½œå»¶è¿Ÿä¸€æ®µæ—¶é—´</h3><ul><li><code>touch file.txt;sleep 10;rm file.txt</code></li></ul><h3 id="amp-amp-ã€-ã€"><a href="#amp-amp-ã€-ã€" class="headerlink" title="&amp;&amp;ã€||ã€;"></a><code>&amp;&amp;</code>ã€<code>||</code>ã€<code>;</code></h3><ul><li><code>&amp;&amp;</code>ï¼š<code>&amp;&amp;</code> å·å‰çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œæ‰ä¼šæ‰§è¡Œåé¢çš„å‘½ä»¤</li><li><code>||</code>ï¼š<code>||</code> å·å‰çš„å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œæ‰ä¼šæ‰§è¡Œåé¢çš„å‘½ä»¤</li><li><code>;</code>ï¼šä¸è®ºåˆ†å·å‰çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¸å¦ï¼Œéƒ½æ‰§è¡Œåˆ†å·åçš„å‘½ä»¤</li></ul><h3 id="crontab-æäº¤å’Œç®¡ç†ç”¨æˆ·çš„éœ€è¦å‘¨æœŸæ€§æ‰§è¡Œçš„ä»»åŠ¡"><a href="#crontab-æäº¤å’Œç®¡ç†ç”¨æˆ·çš„éœ€è¦å‘¨æœŸæ€§æ‰§è¡Œçš„ä»»åŠ¡" class="headerlink" title="crontab æäº¤å’Œç®¡ç†ç”¨æˆ·çš„éœ€è¦å‘¨æœŸæ€§æ‰§è¡Œçš„ä»»åŠ¡"></a>crontab æäº¤å’Œç®¡ç†ç”¨æˆ·çš„éœ€è¦å‘¨æœŸæ€§æ‰§è¡Œçš„ä»»åŠ¡</h3><p><strong>crontabå‘½ä»¤</strong> è¢«ç”¨æ¥æäº¤å’Œç®¡ç†ç”¨æˆ·çš„éœ€è¦å‘¨æœŸæ€§æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¸windowsä¸‹çš„è®¡åˆ’ä»»åŠ¡ç±»ä¼¼ï¼Œå½“å®‰è£…å®Œæˆæ“ä½œç³»ç»Ÿåï¼Œé»˜è®¤ä¼šå®‰è£…æ­¤æœåŠ¡å·¥å…·ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨å¯åŠ¨crondè¿›ç¨‹ï¼Œcrondè¿›ç¨‹æ¯åˆ†é’Ÿä¼šå®šæœŸæ£€æŸ¥æ˜¯å¦æœ‰è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚æœæœ‰è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œåˆ™è‡ªåŠ¨æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚</p><ul><li><code>-e</code>ï¼šç¼–è¾‘è¯¥ç”¨æˆ·çš„è®¡æ—¶å™¨è®¾ç½®ï¼›</li><li><code> -l</code>ï¼šåˆ—å‡ºè¯¥ç”¨æˆ·çš„è®¡æ—¶å™¨è®¾ç½®ï¼›</li><li><code> -r</code>ï¼šåˆ é™¤è¯¥ç”¨æˆ·çš„è®¡æ—¶å™¨è®¾ç½®ï¼›</li><li><code>-u &lt;ç”¨æˆ·åç§°&gt;</code>ï¼šæŒ‡å®šè¦è®¾å®šè®¡æ—¶å™¨çš„ç”¨æˆ·åç§°ã€‚</li></ul><blockquote><p> m h dom mon dow  command</p><ul><li><p>é¡ºåºå£è¯€ï¼šåˆ† æ—¶ æ—¥ æœˆ å‘¨</p></li><li><p>mï¼šminute çš„ç¼©å†™ï¼Œè¡¨ç¤ºâ€åˆ†é’Ÿâ€œï¼ˆ0~59ï¼‰</p></li><li><p>hï¼šhour çš„ç¼©å†™ï¼Œè¡¨ç¤ºâ€œå°æ—¶â€(0~23)</p></li><li><p>domï¼šday of month çš„ç¼©å†™ï¼Œè¡¨ç¤ºâ€œä¸€ä¸ªæœˆçš„å“ªä¸€å¤©â€ï¼ˆ0~31ï¼‰</p></li><li><p>monï¼šmonth çš„ç¼©å†™ï¼Œè¡¨ç¤ºâ€æœˆä»½â€œï¼ˆ1~12ï¼‰</p></li><li><p>dowï¼šday of week çš„ç¼©å†™ï¼Œè¡¨ç¤ºâ€œæ˜ŸæœŸå‡ â€(0~6,æ˜ŸæœŸæ—¥æ˜¯0)</p></li><li><p>commandï¼šè‹±è¯­â€œå‘½ä»¤â€çš„æ„æ€ï¼Œè¡¨ç¤ºéœ€è¦å®šæ—¶æ‰§è¡Œçš„å‘½ä»¤</p></li></ul></blockquote><p><strong>ç‰¹æ®Šå­—ç¬¦ï¼š</strong></p><ul><li>æ˜Ÿå·ï¼ˆ*ï¼‰ï¼šä»£è¡¨æ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œä¾‹å¦‚monthå­—æ®µå¦‚æœæ˜¯æ˜Ÿå·ï¼Œåˆ™è¡¨ç¤ºåœ¨æ»¡è¶³å…¶å®ƒå­—æ®µçš„åˆ¶çº¦æ¡ä»¶åæ¯æœˆéƒ½æ‰§è¡Œè¯¥å‘½ä»¤æ“ä½œã€‚</li><li>é€—å·ï¼ˆ,ï¼‰ï¼šå¯ä»¥ç”¨é€—å·éš”å¼€çš„å€¼æŒ‡å®šä¸€ä¸ªåˆ—è¡¨èŒƒå›´ï¼Œä¾‹å¦‚ï¼Œâ€œ1,2,5,7,8,9â€</li><li>ä¸­æ ï¼ˆ-ï¼‰ï¼šå¯ä»¥ç”¨æ•´æ•°ä¹‹é—´çš„ä¸­æ è¡¨ç¤ºä¸€ä¸ªæ•´æ•°èŒƒå›´ï¼Œä¾‹å¦‚â€œ2-6â€è¡¨ç¤ºâ€œ2,3,4,5,6â€</li><li>æ­£æ–œçº¿ï¼ˆ&#x2F;ï¼‰ï¼šå¯ä»¥ç”¨æ­£æ–œçº¿æŒ‡å®šæ—¶é—´çš„é—´éš”é¢‘ç‡ï¼Œä¾‹å¦‚â€œ0-23&#x2F;2â€è¡¨ç¤ºæ¯ä¸¤å°æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚åŒæ—¶æ­£æ–œçº¿å¯ä»¥å’Œæ˜Ÿå·ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚*&#x2F;10ï¼Œå¦‚æœç”¨åœ¨minuteå­—æ®µï¼Œè¡¨ç¤ºæ¯ååˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚</li></ul><h4 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><blockquote><p>ä¸€å®šè¦æ¢è¡Œï¼Œä¸æ¢è¡Œä¸ä¼šç”Ÿæ•ˆçš„<br>é‡å¯ cron æœåŠ¡ï¼š<code>systemctl cron.service restart</code></p></blockquote><p><strong>æ¯1åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡command</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* * * * * command</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¯å°æ—¶çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3,15 * * * * command</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>åœ¨ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3,15 8-11 * * * command</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¯éš”ä¸¤å¤©çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3,15 8-11 */2 * * command</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¯ä¸ªæ˜ŸæœŸä¸€çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3,15 8-11 * * 1 command</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¯æ™šçš„21:30é‡å¯smb</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">30 21 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¯æœˆ1ã€10ã€22æ—¥çš„4 : 45é‡å¯smb</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">45 4 1,10,22 * * /etc/init.d/smb restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¯å‘¨å…­ã€å‘¨æ—¥çš„1:10é‡å¯smb</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10 1 * * 6,0 /etc/init.d/smb restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¯å¤©18 : 00è‡³23 : 00ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯smb</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">*/30 18-23 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¯æ˜ŸæœŸå…­çš„æ™šä¸Š11:00 pmé‡å¯smb</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0 23 * * 6 /etc/init.d/smb restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¯ä¸€å°æ—¶é‡å¯smb</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* */1 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š7ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯smb</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* 23-7/1 * * * /etc/init.d/smb restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¯æœˆçš„4å·ä¸æ¯å‘¨ä¸€åˆ°å‘¨ä¸‰çš„11ç‚¹é‡å¯smb</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0 11 4 * mon-wed /etc/init.d/smb restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä¸€æœˆä¸€å·çš„4ç‚¹é‡å¯smb</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0 4 1 jan * /etc/init.d/smb restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¯å°æ—¶æ‰§è¡Œ<code>/etc/cron.hourly</code>ç›®å½•å†…çš„è„šæœ¬</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">01 * * * * root run-parts /etc/cron.hourly</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><ul><li>å…¨å±€ SSH å®¢æˆ·ç«¯çš„é…ç½®ï¼š<code>/etc/ssh/ssh_config</code></li><li>ç”¨æˆ· SSH å®¢æˆ·ç«¯çš„é…ç½®ï¼š<code>~/.ssh/config</code><ul><li>å¦‚æœ <code>~/.ssh</code> ä¸å­˜åœ¨ï¼Œæ‰§è¡Œ <code>ssh localhost</code></li><li><code>nano config</code> è¿›è¡Œç¼–è¾‘</li></ul></li><li>SSH æœåŠ¡ç«¯çš„é…ç½®ï¼š<code>/etc/ssh/sshd_config</code></li></ul><h3 id="æœåŠ¡ç«¯-config-æ–‡ä»¶çš„å¸¸ç”¨é…ç½®å‚æ•°"><a href="#æœåŠ¡ç«¯-config-æ–‡ä»¶çš„å¸¸ç”¨é…ç½®å‚æ•°" class="headerlink" title="æœåŠ¡ç«¯ config æ–‡ä»¶çš„å¸¸ç”¨é…ç½®å‚æ•°"></a>æœåŠ¡ç«¯ config æ–‡ä»¶çš„å¸¸ç”¨é…ç½®å‚æ•°</h3><ul><li>Portï¼šsshd æœåŠ¡ç«¯å£å·ï¼ˆé»˜è®¤æ˜¯22ï¼‰</li><li>PermitRootLoginï¼šæ˜¯å¦å…è®¸ä»¥ root ç”¨æˆ·èº«ä»½ç™»å½•ï¼ˆé»˜è®¤æ˜¯å¯ä»¥ï¼‰</li><li>PasswordAuthenticationï¼šæ˜¯å¦å…è®¸å¯†ç éªŒè¯ç™»å½•ï¼ˆé»˜è®¤æ˜¯å¯ä»¥ï¼‰</li><li>PubkeyAuthenticationï¼šæ˜¯å¦å…è®¸å…¬é’¥éªŒè¯ç™»å½•ï¼ˆé»˜è®¤æ˜¯å¯ä»¥ï¼‰</li><li>PermitEmptyPasswordsï¼šæ˜¯å¦å…è®¸ç©ºå¯†ç ç™»å½•ï¼ˆä¸å®‰å…¨ã€‚é»˜è®¤ä¸å¯ä»¥ï¼‰</li></ul><h3 id="å®¢æˆ·ç«¯-config-æ–‡ä»¶çš„é…ç½®"><a href="#å®¢æˆ·ç«¯-config-æ–‡ä»¶çš„é…ç½®" class="headerlink" title="å®¢æˆ·ç«¯ config æ–‡ä»¶çš„é…ç½®"></a>å®¢æˆ·ç«¯ config æ–‡ä»¶çš„é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">nano ~/.ssh/config</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host aliyun</span><br><span class="line">  HostName 47.98.152.68</span><br><span class="line">  Port 22</span><br><span class="line">  User root</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh aliyun</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®å…å¯†ç ç™»å½•"><a href="#é…ç½®å…å¯†ç ç™»å½•" class="headerlink" title="é…ç½®å…å¯†ç ç™»å½•"></a>é…ç½®å…å¯†ç ç™»å½•</h3><ol><li><p>åœ¨å®¢æˆ·æœºä¸­ç”Ÿæˆå¯†é’¥å¯¹ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰</p><blockquote><p><code>ssh-keygen -t rsa -C &quot;youngjuning@aliyun.com&quot;</code></p></blockquote><ul><li><p>åœ¨ <code>~/.ssh/</code> ç›®å½•ä¸‹ï¼Œä¼šæ–°ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶</p><ul><li>id_rsaï¼šç§é’¥</li><li>id_rsa.pubï¼šå…¬é’¥</li></ul></li></ul></li><li><p><code>ssh-copy-id</code>ï¼šæŠŠæœ¬åœ°çš„ ssh å…¬é’¥æ–‡ä»¶å®‰è£…åˆ°è¿œç¨‹ä¸»æœºå¯¹åº”çš„è´¦æˆ·ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh-copy-id -i ~/.ssh/id_rsa.pub root@47.98.152.68</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>ssh-copy-idå‘½ä»¤</strong> å¯ä»¥æŠŠæœ¬åœ°ä¸»æœºçš„å…¬é’¥å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºçš„<code>authorized_keys</code>æ–‡ä»¶ä¸Šï¼Œ<code>ssh-copy-id</code> å‘½ä»¤ä¹Ÿä¼šç»™è¿œç¨‹ä¸»æœºçš„ç”¨æˆ·ä¸»ç›®å½•ï¼ˆhomeï¼‰å’Œ<code>~/.ssh</code>, å’Œ<code>~/.ssh/authorized_keys</code>è®¾ç½®åˆé€‚çš„æƒé™ã€‚</p><ul><li><code>-i</code>ï¼šæŒ‡å®šå…¬é’¥æ–‡ä»¶</li></ul></blockquote></li></ol><p><strong>è®¾ç½®å…å¯†ç åä»æƒ³ä½¿ç”¨å¯†ç ç™»å½•ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no root@47.98.152.68</span></span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•Githubæ˜¯å¦æ­£ç¡®é…ç½®å…å¯†ç ç™»å½•ï¼š</strong></p><p><code>ssh -T git@github.com</code></p><h2 id="Linux-ç½‘ç»œ"><a href="#Linux-ç½‘ç»œ" class="headerlink" title="Linux ç½‘ç»œ"></a>Linux ç½‘ç»œ</h2><h3 id="wgetï¼šLinuxç³»ç»Ÿä¸‹è½½æ–‡ä»¶å·¥å…·"><a href="#wgetï¼šLinuxç³»ç»Ÿä¸‹è½½æ–‡ä»¶å·¥å…·" class="headerlink" title="wgetï¼šLinuxç³»ç»Ÿä¸‹è½½æ–‡ä»¶å·¥å…·"></a>wgetï¼šLinuxç³»ç»Ÿä¸‹è½½æ–‡ä»¶å·¥å…·</h3><p><strong>wgetå‘½ä»¤</strong> ç”¨æ¥ä»æŒ‡å®šçš„URLä¸‹è½½æ–‡ä»¶ã€‚wgetéå¸¸ç¨³å®šï¼Œå®ƒåœ¨å¸¦å®½å¾ˆçª„çš„æƒ…å†µä¸‹å’Œä¸ç¨³å®šç½‘ç»œä¸­æœ‰å¾ˆå¼ºçš„é€‚åº”æ€§ï¼Œå¦‚æœæ˜¯ç”±äºç½‘ç»œçš„åŸå› ä¸‹è½½å¤±è´¥ï¼Œwgetä¼šä¸æ–­çš„å°è¯•ï¼Œç›´åˆ°æ•´ä¸ªæ–‡ä»¶ä¸‹è½½å®Œæ¯•ã€‚å¦‚æœæ˜¯æœåŠ¡å™¨æ‰“æ–­ä¸‹è½½è¿‡ç¨‹ï¼Œå®ƒä¼šå†æ¬¡è”åˆ°æœåŠ¡å™¨ä¸Šä»åœæ­¢çš„åœ°æ–¹ç»§ç»­ä¸‹è½½ã€‚è¿™å¯¹ä»é‚£äº›é™å®šäº†é“¾æ¥æ—¶é—´çš„æœåŠ¡å™¨ä¸Šä¸‹è½½å¤§æ–‡ä»¶éå¸¸æœ‰ç”¨ã€‚</p><p>wgetæ”¯æŒHTTPï¼ŒHTTPSå’ŒFTPåè®®ï¼Œå¯ä»¥ä½¿ç”¨HTTPä»£ç†ã€‚æ‰€è°“çš„è‡ªåŠ¨ä¸‹è½½æ˜¯æŒ‡ï¼Œwgetå¯ä»¥åœ¨ç”¨æˆ·é€€å‡ºç³»ç»Ÿçš„ä¹‹ååœ¨åå°æ‰§è¡Œã€‚è¿™æ„å‘³è¿™ä½ å¯ä»¥ç™»å½•ç³»ç»Ÿï¼Œå¯åŠ¨ä¸€ä¸ªwgetä¸‹è½½ä»»åŠ¡ï¼Œç„¶åé€€å‡ºç³»ç»Ÿï¼Œwgetå°†åœ¨åå°æ‰§è¡Œç›´åˆ°ä»»åŠ¡å®Œæˆï¼Œç›¸å¯¹äºå…¶å®ƒå¤§éƒ¨åˆ†æµè§ˆå™¨åœ¨ä¸‹è½½å¤§é‡æ•°æ®æ—¶éœ€è¦ç”¨æˆ·ä¸€ç›´çš„å‚ä¸ï¼Œè¿™çœå»äº†æå¤§çš„éº»çƒ¦ã€‚</p><p>ç”¨äºä»ç½‘ç»œä¸Šä¸‹è½½èµ„æºï¼Œæ²¡æœ‰æŒ‡å®šç›®å½•ï¼Œä¸‹è½½èµ„æºå›é»˜è®¤ä¸ºå½“å‰ç›®å½•ã€‚wgetè™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼š</p><ol><li><strong>æ”¯æŒæ–­ç‚¹ä¸‹ä¼ åŠŸèƒ½</strong> è¿™ä¸€ç‚¹ï¼Œä¹Ÿæ˜¯ç½‘ç»œèš‚èšå’ŒFlashGetå½“å¹´æœ€å¤§çš„å–ç‚¹ï¼Œç°åœ¨ï¼ŒWgetä¹Ÿå¯ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œé‚£äº›ç½‘ç»œä¸æ˜¯å¤ªå¥½çš„ç”¨æˆ·å¯ä»¥æ”¾å¿ƒäº†ï¼›</li><li><strong>åŒæ—¶æ”¯æŒFTPå’ŒHTTPä¸‹è½½æ–¹å¼</strong> å°½ç®¡ç°åœ¨å¤§éƒ¨åˆ†è½¯ä»¶å¯ä»¥ä½¿ç”¨HTTPæ–¹å¼ä¸‹è½½ï¼Œä½†æ˜¯ï¼Œæœ‰äº›æ—¶å€™ï¼Œä»ç„¶éœ€è¦ä½¿ç”¨FTPæ–¹å¼ä¸‹è½½è½¯ä»¶ï¼›</li><li><strong>æ”¯æŒä»£ç†æœåŠ¡å™¨</strong> å¯¹å®‰å…¨å¼ºåº¦å¾ˆé«˜çš„ç³»ç»Ÿè€Œè¨€ï¼Œä¸€èˆ¬ä¸ä¼šå°†è‡ªå·±çš„ç³»ç»Ÿç›´æ¥æš´éœ²åœ¨äº’è”ç½‘ä¸Šï¼Œæ‰€ä»¥ï¼Œæ”¯æŒä»£ç†æ˜¯ä¸‹è½½è½¯ä»¶å¿…é¡»æœ‰çš„åŠŸèƒ½ï¼›</li><li><strong>è®¾ç½®æ–¹ä¾¿ç®€å•</strong> å¯èƒ½ï¼Œä¹ æƒ¯å›¾å½¢ç•Œé¢çš„ç”¨æˆ·å·²ç»ä¸æ˜¯å¤ªä¹ æƒ¯å‘½ä»¤è¡Œäº†ï¼Œä½†æ˜¯ï¼Œå‘½ä»¤è¡Œåœ¨è®¾ç½®ä¸Šå…¶å®æœ‰æ›´å¤šçš„ä¼˜ç‚¹ï¼Œæœ€å°‘ï¼Œé¼ æ ‡å¯ä»¥å°‘ç‚¹å¾ˆå¤šæ¬¡ï¼Œä¹Ÿä¸è¦æ‹…å¿ƒæ˜¯å¦é”™ç‚¹é¼ æ ‡ï¼›</li><li><strong>ç¨‹åºå°ï¼Œå®Œå…¨å…è´¹</strong> ç¨‹åºå°å¯ä»¥è€ƒè™‘ä¸è®¡ï¼Œå› ä¸ºç°åœ¨çš„ç¡¬ç›˜å®åœ¨å¤ªå¤§äº†ï¼›å®Œå…¨å…è´¹å°±ä¸å¾—ä¸è€ƒè™‘äº†ï¼Œå³ä½¿ç½‘ç»œä¸Šæœ‰å¾ˆå¤šæ‰€è°“çš„å…è´¹è½¯ä»¶ï¼Œä½†æ˜¯ï¼Œè¿™äº›è½¯ä»¶çš„å¹¿å‘Šå´ä¸æ˜¯æˆ‘ä»¬å–œæ¬¢çš„ã€‚</li></ol><h3 id="scpï¼šåŠ å¯†çš„æ–¹å¼åœ¨æœ¬åœ°ä¸»æœºå’Œè¿œç¨‹ä¸»æœºä¹‹é—´å¤åˆ¶æ–‡ä»¶"><a href="#scpï¼šåŠ å¯†çš„æ–¹å¼åœ¨æœ¬åœ°ä¸»æœºå’Œè¿œç¨‹ä¸»æœºä¹‹é—´å¤åˆ¶æ–‡ä»¶" class="headerlink" title="scpï¼šåŠ å¯†çš„æ–¹å¼åœ¨æœ¬åœ°ä¸»æœºå’Œè¿œç¨‹ä¸»æœºä¹‹é—´å¤åˆ¶æ–‡ä»¶"></a>scpï¼šåŠ å¯†çš„æ–¹å¼åœ¨æœ¬åœ°ä¸»æœºå’Œè¿œç¨‹ä¸»æœºä¹‹é—´å¤åˆ¶æ–‡ä»¶</h3><p><strong>scpå‘½ä»¤</strong> ç”¨äºåœ¨Linuxä¸‹è¿›è¡Œè¿œç¨‹æ‹·è´æ–‡ä»¶çš„å‘½ä»¤ï¼Œå’Œå®ƒç±»ä¼¼çš„å‘½ä»¤æœ‰cpï¼Œä¸è¿‡cpåªæ˜¯åœ¨æœ¬æœºè¿›è¡Œæ‹·è´ä¸èƒ½è·¨æœåŠ¡å™¨ï¼Œè€Œä¸”scpä¼ è¾“æ˜¯åŠ å¯†çš„ã€‚å¯èƒ½ä¼šç¨å¾®å½±å“ä¸€ä¸‹é€Ÿåº¦ã€‚å½“ä½ æœåŠ¡å™¨ç¡¬ç›˜å˜ä¸ºåªè¯»read only systemæ—¶ï¼Œç”¨scpå¯ä»¥å¸®ä½ æŠŠæ–‡ä»¶ç§»å‡ºæ¥ã€‚å¦å¤–ï¼Œscpè¿˜éå¸¸ä¸å èµ„æºï¼Œä¸ä¼šæé«˜å¤šå°‘ç³»ç»Ÿè´Ÿè·ï¼Œåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œrsyncå°±è¿œè¿œä¸åŠå®ƒäº†ã€‚è™½ç„¶ rsyncæ¯”scpä¼šå¿«ä¸€ç‚¹ï¼Œä½†å½“å°æ–‡ä»¶ä¼—å¤šçš„æƒ…å†µä¸‹ï¼Œrsyncä¼šå¯¼è‡´ç¡¬ç›˜I&#x2F;Oéå¸¸é«˜ï¼Œè€ŒscpåŸºæœ¬ä¸å½±å“ç³»ç»Ÿæ­£å¸¸ä½¿ç”¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ scp file.txt root@192.168.2.195</span><br></pre></td></tr></table></figure><h3 id="netstat-ntulp-grep-9001"><a href="#netstat-ntulp-grep-9001" class="headerlink" title="netstat -ntulp | grep 9001"></a>netstat -ntulp | grep 9001</h3><p>æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ</p><h3 id="rsyncï¼šè¿œç¨‹æ•°æ®åŒæ­¥å·¥å…·"><a href="#rsyncï¼šè¿œç¨‹æ•°æ®åŒæ­¥å·¥å…·" class="headerlink" title="rsyncï¼šè¿œç¨‹æ•°æ®åŒæ­¥å·¥å…·"></a>rsyncï¼šè¿œç¨‹æ•°æ®åŒæ­¥å·¥å…·</h3><p><strong>rsyncå‘½ä»¤</strong> æ˜¯ä¸€ä¸ªè¿œç¨‹æ•°æ®åŒæ­¥å·¥å…·ï¼Œå¯é€šè¿‡LAN&#x2F;WANå¿«é€ŸåŒæ­¥å¤šå°ä¸»æœºé—´çš„æ–‡ä»¶ã€‚rsyncä½¿ç”¨æ‰€è°“çš„â€œrsyncç®—æ³•â€æ¥ä½¿æœ¬åœ°å’Œè¿œç¨‹ä¸¤ä¸ªä¸»æœºä¹‹é—´çš„æ–‡ä»¶è¾¾åˆ°åŒæ­¥ï¼Œè¿™ä¸ªç®—æ³•åªä¼ é€ä¸¤ä¸ªæ–‡ä»¶çš„ä¸åŒéƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½æ•´ä»½ä¼ é€ï¼Œå› æ­¤é€Ÿåº¦ç›¸å½“å¿«ã€‚ rsyncæ˜¯ä¸€ä¸ªåŠŸèƒ½éå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå…¶å‘½ä»¤ä¹Ÿæœ‰å¾ˆå¤šåŠŸèƒ½ç‰¹è‰²é€‰é¡¹ï¼Œæˆ‘ä»¬ä¸‹é¢å°±å¯¹å®ƒçš„é€‰é¡¹ä¸€ä¸€è¿›è¡Œåˆ†æè¯´æ˜ã€‚</p><ul><li>é»˜è®¤åœ°ï¼Œrsync åœ¨åŒæ­¥æ—¶å¹¶ä¸ä¼šåˆ é™¤ç›®æ ‡ç›®å½•çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œä½ çš„æºç›®å½•ï¼ˆè¢«åŒæ­¥ç›®å½•ï¼‰ä¸­åˆ é™¤äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯ç”¨ rsync åŒæ­¥æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šåˆ é™¤åŒæ­¥ç›®å½•ä¸­çš„ç›¸åŒæ–‡ä»¶ã€‚<code>rsync -arv --delete</code> å¯ä»¥åˆ é™¤</li></ul><p><strong>ç”¨ rsync å¤‡ä»½åˆ°åŒä¸€å°ç”µè„‘çš„å…¶ä»–ç›®å½•ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rsync -arv Images/ backups</span></span><br></pre></td></tr></table></figure><ul><li><code>-a</code>ï¼šä¿ç•™æ–‡ä»¶çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬æƒé™ï¼Œä¿®æ”¹æ—¥æœŸï¼Œç­‰ç­‰ã€‚a æ˜¯ archive çš„ç¼©å†™ï¼Œæ˜¯<strong>å½’æ¡£</strong>çš„æ„æ€</li><li><code>-r</code>ï¼šé€’å½’è°ƒç”¨ã€‚è¡¨ç¤ºå­ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶ä¹Ÿéƒ½åŒ…æ‹¬ã€‚r æ˜¯ recursive çš„ç¼©å†™ï¼Œæ˜¯<strong>é€’å½’</strong>çš„æ„æ€</li><li><code>-v</code> ï¼šå†—ä½™æ¨¡å¼ã€‚è¾“å‡ºè¯¦ç»†æ“ä½œä¿¡æ¯ã€‚v æ˜¯ verbose çš„ç¼©å†™ï¼Œæ˜¯<strong>å†—ä½™çš„</strong>æ„æ€</li></ul><p><strong>ç”¨ rsync å¤‡ä»½åˆ°åŒæ­¥æœ¬åœ°æ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rsync -arvz --progress --delete ~/Desktop/blog root@47.98.152.68:/home/yangjunning/</span></span><br></pre></td></tr></table></figure><h2 id="å¤‡ä»½åˆ°ä¸ƒç‰›äº‘"><a href="#å¤‡ä»½åˆ°ä¸ƒç‰›äº‘" class="headerlink" title="å¤‡ä»½åˆ°ä¸ƒç‰›äº‘"></a>å¤‡ä»½åˆ°ä¸ƒç‰›äº‘</h2><h3 id="å®‰è£…å‘½ä»¤è¡Œå·¥å…·-qshell"><a href="#å®‰è£…å‘½ä»¤è¡Œå·¥å…·-qshell" class="headerlink" title="å®‰è£…å‘½ä»¤è¡Œå·¥å…·(qshell)"></a>å®‰è£…å‘½ä»¤è¡Œå·¥å…·(qshell)</h3><ol><li>è¿›å…¥å®¶ç›®å½•ï¼š<code>cd ~</code></li><li>ä¸‹è½½å‹ç¼©åŒ…ï¼š<code>wget http://devtools.qiniu.com/qshell-linux-x86-v2.4.1.zip</code></li><li>è§£å‹å‹ç¼©åŒ…ï¼š<code>unzip ~/qshell-linux-x86-v2.4.1.zip</code></li><li>ä»»ä½•ä½ç½®è¿è¡Œï¼š<code>mv ~/qshell-linux-x86-v2.4.1 /usr/local/bin/qshell</code></li><li>æƒé™ï¼š<code>chmod +x /usr/local/bin/qshell</code></li><li>åˆ é™¤å‹ç¼©åŒ…ï¼š<code>rm -rf ~/qshell-linux-x86-v2.4.1.zip</code></li></ol><h3 id="å¯†é’¥è®¾ç½®"><a href="#å¯†é’¥è®¾ç½®" class="headerlink" title="å¯†é’¥è®¾ç½®"></a>å¯†é’¥è®¾ç½®</h3><p>éœ€è¦é‰´æƒçš„å‘½ä»¤éƒ½éœ€è¦ä¾èµ–ä¸ƒç‰›è´¦å·ä¸‹çš„ <code>AccessKey</code> å’Œ <code>SecretKey</code>ã€‚æ‰€ä»¥è¿™ç±»å‘½ä»¤è¿è¡Œä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨ <code>account</code> å‘½ä»¤æ¥è®¾ç½®ä¸‹ <code>AccessKey</code> ï¼Œ<code>SecretKey</code> ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ qshell account -- ak sk name</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š<code>ak</code>ã€<code>sk</code> åœ¨ä¸ƒç‰›äº‘<strong>æ§åˆ¶å°</strong> -&gt; <strong>ä¸ªäººä¸­å¿ƒ</strong> - &gt; <strong>å¯†é’¥ç®¡ç†</strong>å†…ã€‚</p></blockquote><p>å¯ä»¥è¿ç»­ä½¿ç”¨ <code>qshell account</code> æ·»åŠ è´¦å·<code>ak</code>, <code>sk</code>, <code>name</code>ä¿¡æ¯ï¼Œqshellä¼šä¿å­˜è¿™äº›è´¦å·çš„ä¿¡æ¯ï¼Œ å¯ä»¥ä½¿ç”¨<code>qshell user</code>å‘½ä»¤åˆ—ä¸¾è´¦å·ä¿¡æ¯ï¼Œåœ¨å„ä¸ªè´¦å·ä¹‹é—´åˆ‡æ¢, åˆ é™¤è´¦å·ç­‰</p><h3 id="è´¦æˆ·ç®¡ç†"><a href="#è´¦æˆ·ç®¡ç†" class="headerlink" title="è´¦æˆ·ç®¡ç†"></a>è´¦æˆ·ç®¡ç†</h3><p>ä½¿ç”¨qshell userå­å‘½ä»¤å¯ä»¥ç”¨æ¥ç®¡ç†è®°å½•çš„å¤šè´¦æˆ·ä¿¡æ¯ã€‚</p><ol><li><code>qshell user ls</code>å¯ä»¥åˆ—ä¸¾è´¦æˆ·ä¸‹æ‰€æœ‰çš„è´¦æˆ·ä¿¡æ¯</li><li><code>qshell user cu</code> å¯ä»¥ç”¨æ¥åˆ‡æ¢è´¦æˆ·</li><li><code>qshell user cu</code> ä¸æºå¸¦çš„è¯ä¼šåˆ‡æ¢åˆ°æœ€è¿‘çš„ä¸Šä¸ªè´¦æˆ·ï¼›æ¯”å¦‚æˆ‘åœ¨Aè´¦æˆ·åšå®Œæ“ä½œåï¼Œä½¿ç”¨<code>qshell user cu B</code>åˆ°äº†B è´¦æˆ·ï¼Œé‚£ä¹ˆä½¿ç”¨<code>qshell user cu</code>å¯ä»¥åˆ‡å›åˆ°Aè´¦æˆ·</li></ol><h3 id="qupload2"><a href="#qupload2" class="headerlink" title="qupload2"></a>qupload2</h3><p>åŒæ­¥æ•°æ®åˆ°ä¸ƒç‰›ç©ºé—´ï¼Œ å¸¦åŒæ­¥è¿›åº¦ä¿¡æ¯ï¼Œå’Œæ•°æ®ä¸Šä¼ å®Œæ•´æ€§æ£€æŸ¥ï¼ˆå‘½ä»¤å¼ï¼‰ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹<a href="http://github.com/qiniu/qshell/blob/master/docs/qupload2.md">æ–‡æ¡£</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ qshell qupload2 --src-dir=/root --bucket=aliyun-server-backup</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯è§„èŒƒåŒ–å¼€å‘å®è·µ</title>
      <link href="/c26ea6288229/"/>
      <url>/c26ea6288229/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä»¥ React Native é¡¹ç›®ä¸ºç¤ºä¾‹ä»‹ç»äº†å‰ç«¯è§„èŒƒåŒ–å¼€å‘æ¶‰åŠçš„å·¥å…·åŠçŸ¥è¯†ï¼Œä½†æ˜¯æ‰€æ¶‰åŠå†…å®¹å…·æœ‰é€šç”¨æ€§ï¼Œå»ºè®®è¯»è€…ç‚¹èµæ”¶è—(^â–½^)ã€‚</p><blockquote><p>å¦å¤–å®‰åˆ©ä¸€ä¸‹ <a href="https://github.com/sigmayun/react-native-template-typescript">@sigmayun&#x2F;react-native-template-typescript</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäº typescript çš„ react native å¼€ç®±å³ç”¨çš„æ¨¡æ¿ã€‚æœ¬æ–‡æ‰€æ¶‰åŠçš„å¤§éƒ¨åˆ†å†…å®¹éƒ½é›†æˆåˆ°äº†è¯¥æ¨¡æ¿ä¸­ã€‚</p><ul><li><a href="https://github.com/sishuguojixuefu/eslint-config">sishuguojixuefu&#x2F;eslint-config</a>ï¼šESLint config for sishuguojixuefu</li><li><a href="https://github.com/youngjuning/conventional-commits-demo">conventional-commits-demo</a>ï¼šæœ¬æ–‡å®è·µçš„é…å¥—ä»£ç åº“</li></ul></blockquote><h2 id="gitconfig"><a href="#gitconfig" class="headerlink" title="gitconfig"></a>gitconfig</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–è®¾ç½®</span></span><br><span class="line">$ git config --global user.name <span class="string">&#x27;your_name&#x27;</span></span><br><span class="line">$ git config --global user.email <span class="string">&#x27;your_email@aliyun.com&#x27;</span></span><br><span class="line"><span class="comment"># æé«˜å‘½ä»¤è¾“å‡ºçš„å¯è¯»æ€§</span></span><br><span class="line">$ git config --global color.ui auto</span><br><span class="line"><span class="comment"># git è®°ä½ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">$ git config --global credential.helper store</span><br><span class="line"><span class="comment"># core.autocrlf</span></span><br><span class="line">$ git config --global core.autocrlf input</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šé…ç½®å†…å®¹å¯ä»¥åœ¨ <code>~/.gitconfig</code> æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚</p><h2 id="npm-scripts"><a href="#npm-scripts" class="headerlink" title="npm scripts"></a>npm scripts</h2><p><code>package.json</code> æ–‡ä»¶çš„ scripts å­—æ®µæ˜¯å®šä¹‰å¯æ‰§è¡Œè„šæœ¬ç”¨çš„ï¼Œå¯ä»¥åˆ©ç”¨å®ƒæ¥å®ç°ç®€å•çš„å·¥ä½œæµã€‚å¦‚æœä¸æ˜¯å¤§å‹çš„é¡¹ç›®ï¼Œä¸å»ºè®®ä½¿ç”¨ gulpï¼Œnpm scripts ä¸€æ ·å¯ä»¥å®Œæˆå·¥ä½œæµè®¾è®¡çš„ä»»åŠ¡ã€‚ä¸‹é¢æ˜¯ React Native é¡¹ç›®é»˜è®¤çš„ scriptsï¼Œå¦‚ä»Šæˆ‘ä»¬å¯ä»¥æŠŠä½¿ç”¨å’Œæ‰©å±• scripts çœ‹åšæ˜¯å‰ç«¯åŸºæœ¬åŠŸã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;android&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-native run-android&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ios&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-native run-ios&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-native start&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jest&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint .&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-EditorConfig-å®ç°è·¨ç¼–è¾‘å™¨ä»£ç é£æ ¼ç»Ÿä¸€"><a href="#ä½¿ç”¨-EditorConfig-å®ç°è·¨ç¼–è¾‘å™¨ä»£ç é£æ ¼ç»Ÿä¸€" class="headerlink" title="ä½¿ç”¨ EditorConfig å®ç°è·¨ç¼–è¾‘å™¨ä»£ç é£æ ¼ç»Ÿä¸€"></a>ä½¿ç”¨ EditorConfig å®ç°è·¨ç¼–è¾‘å™¨ä»£ç é£æ ¼ç»Ÿä¸€</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># EditorConfig is awesome: http://EditorConfig.org</span><br><span class="line"></span><br><span class="line"># top-most EditorConfig file</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line"># Unix-style newlines with a newline ending every file</span><br><span class="line">[*]</span><br><span class="line">indent_style = space</span><br><span class="line">indent_size = 2</span><br><span class="line">end_of_line = lf</span><br><span class="line">charset = utf-8</span><br><span class="line">trim_trailing_whitespace = true</span><br><span class="line">insert_final_newline = true</span><br><span class="line"></span><br><span class="line">[*.md]</span><br><span class="line">trim_trailing_whitespace = false</span><br><span class="line"></span><br><span class="line">[*.gradle]</span><br><span class="line">indent_size = 4</span><br><span class="line"></span><br><span class="line">[BUCK]</span><br><span class="line">indent_size = 4</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨ESLintè§„èŒƒä»£ç "><a href="#ä½¿ç”¨ESLintè§„èŒƒä»£ç " class="headerlink" title="ä½¿ç”¨ESLintè§„èŒƒä»£ç "></a>ä½¿ç”¨ESLintè§„èŒƒä»£ç </h2><blockquote><p>ä½œè€…è‡ªå·±å›¢é˜Ÿçš„ ESLint æ–¹æ¡ˆæ˜¯åŸºäº eslint-config-airbnb æ‰©å±•çš„ï¼Œæœ‰å…´è¶£å¯ä»¥ä½“éªŒä¸€ä¸‹ <a href="https://github.com/sishuguojixuefu/eslint-config">@sishuguojixuefu&#x2F;eslint-config</a></p></blockquote><h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… eslint-config-airbnb åŠå…¶ peerDependencies</span></span><br><span class="line">$ yarn global add install-peerdeps</span><br><span class="line">$ install-peerdeps -D eslint-config-airbnb</span><br><span class="line"><span class="comment"># æ”¯æŒ react-native</span></span><br><span class="line">$ yarn add -D eslint-plugin-react-native</span><br><span class="line"><span class="comment"># æ”¯æŒ typescript</span></span><br><span class="line">$ yarn add -D @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-import-resolver-typescript typescript</span><br><span class="line"><span class="comment"># æ”¯æŒ prettier</span></span><br><span class="line">$ yarn add -D prettier eslint-plugin-prettier eslint-config-prettier</span><br><span class="line"><span class="comment"># å…¶ä»–</span></span><br><span class="line">$ yarn add -D eslint-plugin-promise eslint-plugin-you-dont-need-lodash-underscore eslint-plugin-you-dont-need-momentjs</span><br></pre></td></tr></table></figure><h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;eslintConfig&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;airbnb&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;airbnb/hooks&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;plugin:react-native/all&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;plugin:@typescript-eslint/recommended&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;plugin:promise/recommended&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;plugin:you-dont-need-lodash-underscore/compatible&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;plugin:you-dont-need-momentjs/recommended&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;plugin:prettier/recommended&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;prettier&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;prettier/react&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;prettier/@typescript-eslint&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;react-native/react-native&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;parser&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@typescript-eslint/parser&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;parserOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;ecmaFeatures&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;import/extensions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;.js&quot;</span><span class="punctuation">,</span> <span class="string">&quot;.ts&quot;</span><span class="punctuation">,</span> <span class="string">&quot;.tsx&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;import/resolver&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;typescript&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;alwaysTryTypes&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="prettierrc-js"><a href="#prettierrc-js" class="headerlink" title=".prettierrc.js"></a>.prettierrc.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">printWidth</span>: <span class="number">150</span>, <span class="comment">// ä¸€è¡Œçš„å­—ç¬¦æ•°ï¼Œå¦‚æœè¶…è¿‡ä¼šè¿›è¡Œæ¢è¡Œï¼Œé»˜è®¤ä¸º80</span></span><br><span class="line">  <span class="attr">tabWidth</span>: <span class="number">2</span>, <span class="comment">// tabç¼©è¿›å¤§å°,é»˜è®¤ä¸º2</span></span><br><span class="line">  <span class="attr">useTabs</span>: <span class="literal">false</span>, <span class="comment">// ä½¿ç”¨tabç¼©è¿›ï¼Œé»˜è®¤false</span></span><br><span class="line">  <span class="attr">semi</span>: <span class="literal">false</span>, <span class="comment">// ä½¿ç”¨åˆ†å·, é»˜è®¤true</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è¡Œå°¾é€—å·,é»˜è®¤none,å¯é€‰ none|es5|all</span></span><br><span class="line"><span class="comment">   * es5 åŒ…æ‹¬es5ä¸­çš„æ•°ç»„ã€å¯¹è±¡</span></span><br><span class="line"><span class="comment">   * all åŒ…æ‹¬å‡½æ•°å¯¹è±¡ç­‰æ‰€æœ‰å¯é€‰</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">trailingComma</span>: <span class="string">&#x27;es5&#x27;</span>,</span><br><span class="line">  <span class="attr">singleQuote</span>: <span class="literal">true</span>, <span class="comment">// ä½¿ç”¨å•å¼•å·, é»˜è®¤false(åœ¨jsxä¸­é…ç½®æ— æ•ˆ, é»˜è®¤éƒ½æ˜¯åŒå¼•å·)</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å¯¹è±¡ä¸­çš„ç©ºæ ¼ é»˜è®¤true</span></span><br><span class="line"><span class="comment">   * true: &#123; foo: bar &#125;</span></span><br><span class="line"><span class="comment">   * false: &#123;foo: bar&#125;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">bracketSpacing</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * JSXæ ‡ç­¾é—­åˆä½ç½® é»˜è®¤false</span></span><br><span class="line"><span class="comment">   * false:</span></span><br><span class="line"><span class="comment">   * &lt;div</span></span><br><span class="line"><span class="comment">   *  className=&quot;&quot;</span></span><br><span class="line"><span class="comment">   *  style=&#123;&#123;&#125;&#125;</span></span><br><span class="line"><span class="comment">   * &gt;</span></span><br><span class="line"><span class="comment">   * true:</span></span><br><span class="line"><span class="comment">   * &lt;div</span></span><br><span class="line"><span class="comment">   *  className=&quot;&quot;</span></span><br><span class="line"><span class="comment">   * style=&#123;&#123;&#125;&#125; &gt;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">jsxBracketSameLine</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç®­å¤´å‡½æ•°å‚æ•°æ‹¬å· é»˜è®¤avoid å¯é€‰ avoid| always</span></span><br><span class="line"><span class="comment">   * avoid èƒ½çœç•¥æ‹¬å·çš„æ—¶å€™å°±çœç•¥ ä¾‹å¦‚x =&gt; x</span></span><br><span class="line"><span class="comment">   * always æ€»æ˜¯æœ‰æ‹¬å·</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">arrowParens</span>: <span class="string">&#x27;avoid&#x27;</span>,</span><br><span class="line">  <span class="attr">vueIndentScriptAndStyle</span>: <span class="literal">false</span>, <span class="comment">// vue æ–‡ä»¶ script å’Œ style æ ‡ç­¾ç¼©è¿›ï¼Œé»˜è®¤false</span></span><br><span class="line">  <span class="attr">endOfLine</span>: <span class="string">&#x27;lf&#x27;</span>, <span class="comment">// å¼ºåˆ¶ä½¿ç”¨ unix é£æ ¼çš„æ¢è¡Œç¬¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ’ä»¶ä»‹ç»"><a href="#æ’ä»¶ä»‹ç»" class="headerlink" title="æ’ä»¶ä»‹ç»"></a>æ’ä»¶ä»‹ç»</h3><ul><li>eslint-config-airbnb: è¯¥è½¯ä»¶åŒ…æä¾› Airbnb çš„ .eslintrc ä½œä¸ºå¯æ‰©å±•çš„å…±äº«é…ç½®</li><li>eslint-plugin-react-native: é’ˆå¯¹ ESLint çš„ React Native ç‰¹å®š linting è§„åˆ™</li><li>@typescript-eslint&#x2F;parser: å°† TypeScript è½¬æ¢ä¸º ESTreeï¼Œä½¿ eslint å¯ä»¥è¯†åˆ«</li><li>@typescript-eslint&#x2F;eslint-plugin: ä¸€ä¸ªåŒ…å«ä¸€å †ç‰¹å®šäº TypeScript çš„ ESLint è§„åˆ™çš„æ’ä»¶</li><li>eslint-import-resolver-typescript: ç»™ eslint-plugin-import æ·»åŠ  typescript æ”¯æŒçš„æ’ä»¶</li><li>eslint-plugin-prettier: ä»¥ ESLint æ’ä»¶çš„å½¢å¼è¿è¡Œ prettier</li><li>eslint-config-prettier: å…³é—­æ‰€æœ‰ä¸å¿…è¦æˆ–å¯èƒ½ä¸ prettier çš„è§„åˆ™å†²çªçš„ ESLint è§„åˆ™ã€‚ä¸€å®šè¦æ”¾åˆ°æœ€åã€‚</li></ul><h3 id="vscode-eslint-plugin-config"><a href="#vscode-eslint-plugin-config" class="headerlink" title="vscode eslint plugin config"></a>vscode eslint plugin config</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;source.fixAll.eslint&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;eslint.lintTask.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;eslint.packageManager&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;eslint.alwaysShowStatus&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;eslint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;javascript&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;javascriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;typescript&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;typescriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;html&quot;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><h2 id="ç”¨-husky-å’Œ-lint-staged-æ„å»ºè¶…æºœçš„ä»£ç æ£€æŸ¥å·¥ä½œæµ"><a href="#ç”¨-husky-å’Œ-lint-staged-æ„å»ºè¶…æºœçš„ä»£ç æ£€æŸ¥å·¥ä½œæµ" class="headerlink" title="ç”¨ husky å’Œ lint-staged æ„å»ºè¶…æºœçš„ä»£ç æ£€æŸ¥å·¥ä½œæµ"></a>ç”¨ husky å’Œ lint-staged æ„å»ºè¶…æºœçš„ä»£ç æ£€æŸ¥å·¥ä½œæµ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add -D husky</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;husky&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;hooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;pre-commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsc --noEmit &amp;&amp; lint-staged&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;js,jsx,ts,tsx&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;eslint --fix&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;git add&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;md,json&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;prettier --write&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;git add&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="Conventional-Commits-çº¦å®šå¼æäº¤è§„èŒƒ"><a href="#Conventional-Commits-çº¦å®šå¼æäº¤è§„èŒƒ" class="headerlink" title="Conventional Commits çº¦å®šå¼æäº¤è§„èŒƒ"></a>Conventional Commits çº¦å®šå¼æäº¤è§„èŒƒ</h2><p><a href="https://www.conventionalcommits.org/zh-hans/v1.0.0-beta.4/">Conventional Commits</a> æ˜¯ä¸€ç§ç”¨äºç»™æäº¤ä¿¡æ¯å¢åŠ äººæœºå¯è¯»å«ä¹‰çš„è§„èŒƒã€‚çº¦å®šå¼æäº¤è§„èŒƒæ˜¯ä¸€ç§åŸºäºæ¶ˆæ¯çš„è½»é‡çº§çº¦å®šã€‚å®ƒæä¾›äº†ä¸€ç»„ç”¨äºåˆ›å»ºæ¸…æ™°çš„æäº¤å†å²çš„ç®€å•è§„åˆ™ï¼›è¿™ä½¿å¾—ç¼–å†™åŸºäºè§„èŒƒçš„è‡ªåŠ¨åŒ–å·¥å…·å˜å¾—æ›´å®¹æ˜“ã€‚è¿™ä¸ªçº¦å®šä¸ <a href="http://semver.org/">SemVer</a> ç›¸å»åˆï¼Œåœ¨æäº¤ä¿¡æ¯ä¸­æè¿°æ–°ç‰¹æ€§ã€bug ä¿®å¤å’Œç ´åæ€§å˜æ›´ã€‚</p><p>æäº¤è¯´æ˜çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ç±»å‹&gt;([å¯é€‰çš„ä½œç”¨åŸŸ]): &lt;æè¿°&gt;</span><br><span class="line"></span><br><span class="line">[å¯é€‰çš„æ­£æ–‡]</span><br><span class="line"></span><br><span class="line">[å¯é€‰çš„è„šæ³¨]</span><br></pre></td></tr></table></figure><h3 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h3><ul><li><code>build:</code>: å½±å“æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–å…³ç³»çš„æ›´æ”¹ï¼ˆç¤ºä¾‹èŒƒå›´ï¼šgulpã€broccoliã€NPMï¼‰ã€‚</li><li><code>chore:</code>:  å…¶ä»–ä¸ä¿®æ”¹<code>src</code>æˆ–<code>test</code>æ–‡ä»¶ã€‚</li><li><code>ci:</code>: æ›´æ”¹æŒç»­é›†æˆæ–‡ä»¶å’Œè„šæœ¬ï¼ˆç¤ºä¾‹èŒƒå›´ï¼šTravisã€Circleã€BrowserStackã€SauceLabsï¼‰ã€‚</li><li><code>docs:</code>: åªæ˜¯æ›´æ”¹æ–‡æ¡£ã€‚</li><li><code>feat:</code>:  ç±»å‹ä¸º <code>feat</code> çš„æäº¤è¡¨ç¤ºåœ¨ä»£ç åº“ä¸­æ–°å¢äº†ä¸€ä¸ªåŠŸèƒ½ï¼ˆè¿™å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ä¸­çš„ <a href="https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81"><code>MINOR</code></a> ç›¸å¯¹åº”ï¼‰ã€‚</li><li><code>fix:</code>ï¼šç±»å‹ä¸º <code>fix</code> çš„ æäº¤è¡¨ç¤ºåœ¨ä»£ç åº“ä¸­ä¿®å¤äº†ä¸€ä¸ª bug ï¼ˆè¿™å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ä¸­çš„ <a href="https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81"><code>PATCH</code></a> ç›¸å¯¹åº”ï¼‰ã€‚</li><li><code>improvement:</code>: ç”¨äºå¯¹å½“å‰å®ç°è¿›è¡Œæ”¹è¿›è€Œæ²¡æœ‰æ·»åŠ æ–°åŠŸèƒ½æˆ–ä¿®å¤é”™è¯¯çš„æäº¤ã€‚</li><li><code>perf:</code>: æ”¹è¿›æ€§èƒ½çš„ä»£ç æ›´æ”¹ã€‚</li><li><code>refactor:</code>: ä»£ç é‡æ„ï¼Œæ—¢ä¸ä¿®å¤é”™è¯¯ä¹Ÿä¸æ·»åŠ åŠŸèƒ½ã€‚</li><li><code>revert:</code>: commit å›é€€ã€‚</li><li><code>style:</code>: ä¸å½±å“ä»£ç å«ä¹‰çš„å˜åŒ–ï¼ˆç©ºç™½ã€æ ¼å¼åŒ–ã€ç¼ºå°‘åˆ†å·ç­‰ï¼‰ã€‚</li><li><code>test:</code>: æ·»åŠ ç¡®å®æµ‹è¯•æˆ–æ›´æ­£ç°æœ‰çš„æµ‹è¯•ã€‚</li></ul><h3 id="èŒƒå›´"><a href="#èŒƒå›´" class="headerlink" title="èŒƒå›´"></a>èŒƒå›´</h3><p>å¯ä»¥ä¸ºæäº¤ç±»å‹æ·»åŠ ä¸€ä¸ªå›´åœ¨åœ†æ‹¬å·å†…çš„ä½œç”¨åŸŸï¼Œä»¥ä¸ºå…¶æä¾›é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä¾‹å¦‚ <code>feat(parser): adds ability to parse arrays.</code>ã€‚</p><h3 id="BREAKING-CHANGE"><a href="#BREAKING-CHANGE" class="headerlink" title="BREAKING CHANGE"></a>BREAKING CHANGE</h3><p>åœ¨å¯é€‰çš„æ­£æ–‡æˆ–è„šæ³¨çš„èµ·å§‹ä½ç½®å¸¦æœ‰ <code>BREAKING CHANGE:</code> çš„æäº¤ï¼Œè¡¨ç¤ºå¼•å…¥äº†ç ´åæ€§ API å˜æ›´ï¼ˆè¿™å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ä¸­çš„ <a href="https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81"><code>MAJOR</code></a> ç›¸å¯¹åº”ï¼‰ã€‚ ç ´åæ€§å˜æ›´å¯ä»¥æ˜¯ä»»æ„ <em>ç±»å‹</em> æäº¤çš„ä¸€éƒ¨åˆ†ã€‚</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><h4 id="åŒ…å«äº†æè¿°ä»¥åŠæ­£æ–‡å†…æœ‰ç ´åæ€§å˜æ›´çš„æäº¤è¯´æ˜"><a href="#åŒ…å«äº†æè¿°ä»¥åŠæ­£æ–‡å†…æœ‰ç ´åæ€§å˜æ›´çš„æäº¤è¯´æ˜" class="headerlink" title="åŒ…å«äº†æè¿°ä»¥åŠæ­£æ–‡å†…æœ‰ç ´åæ€§å˜æ›´çš„æäº¤è¯´æ˜"></a>åŒ…å«äº†æè¿°ä»¥åŠæ­£æ–‡å†…æœ‰ç ´åæ€§å˜æ›´çš„æäº¤è¯´æ˜</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">feat: allow provided config object to extend other configs</span><br><span class="line"></span><br><span class="line">BREAKING CHANGE: `extends` key in config file is now used for extending other config files</span><br></pre></td></tr></table></figure><h4 id="åŒ…å«äº†å¯é€‰çš„-å­—ç¬¦ä»¥æé†’æ³¨æ„ç ´åæ€§å˜æ›´çš„æäº¤è¯´æ˜"><a href="#åŒ…å«äº†å¯é€‰çš„-å­—ç¬¦ä»¥æé†’æ³¨æ„ç ´åæ€§å˜æ›´çš„æäº¤è¯´æ˜" class="headerlink" title="åŒ…å«äº†å¯é€‰çš„ ! å­—ç¬¦ä»¥æé†’æ³¨æ„ç ´åæ€§å˜æ›´çš„æäº¤è¯´æ˜"></a>åŒ…å«äº†å¯é€‰çš„ <code>!</code> å­—ç¬¦ä»¥æé†’æ³¨æ„ç ´åæ€§å˜æ›´çš„æäº¤è¯´æ˜</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chore!: drop Node 6 from testing matrix</span><br><span class="line"></span><br><span class="line">BREAKING CHANGE: dropping Node 6 which hits end of life in April</span><br></pre></td></tr></table></figure><h4 id="ä¸åŒ…å«æ­£æ–‡çš„æäº¤è¯´æ˜"><a href="#ä¸åŒ…å«æ­£æ–‡çš„æäº¤è¯´æ˜" class="headerlink" title="ä¸åŒ…å«æ­£æ–‡çš„æäº¤è¯´æ˜"></a>ä¸åŒ…å«æ­£æ–‡çš„æäº¤è¯´æ˜</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docs: correct spelling of CHANGELOG</span><br></pre></td></tr></table></figure><h4 id="åŒ…å«ä½œç”¨åŸŸçš„æäº¤è¯´æ˜"><a href="#åŒ…å«ä½œç”¨åŸŸçš„æäº¤è¯´æ˜" class="headerlink" title="åŒ…å«ä½œç”¨åŸŸçš„æäº¤è¯´æ˜"></a>åŒ…å«ä½œç”¨åŸŸçš„æäº¤è¯´æ˜</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">feat(lang): add polish language</span><br></pre></td></tr></table></figure><h4 id="ä¸º-fix-ç¼–å†™çš„æäº¤è¯´æ˜ï¼ŒåŒ…å«ï¼ˆå¯é€‰çš„ï¼‰-issue-ç¼–å·"><a href="#ä¸º-fix-ç¼–å†™çš„æäº¤è¯´æ˜ï¼ŒåŒ…å«ï¼ˆå¯é€‰çš„ï¼‰-issue-ç¼–å·" class="headerlink" title="ä¸º fix ç¼–å†™çš„æäº¤è¯´æ˜ï¼ŒåŒ…å«ï¼ˆå¯é€‰çš„ï¼‰ issue ç¼–å·"></a>ä¸º fix ç¼–å†™çš„æäº¤è¯´æ˜ï¼ŒåŒ…å«ï¼ˆå¯é€‰çš„ï¼‰ issue ç¼–å·</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fix: correct minor typos in code</span><br><span class="line"></span><br><span class="line">see the issue for details on the typos fixed</span><br><span class="line"></span><br><span class="line">closes issue #12</span><br></pre></td></tr></table></figure><h3 id="çº¦å®šå¼æäº¤è§„èŒƒ"><a href="#çº¦å®šå¼æäº¤è§„èŒƒ" class="headerlink" title="çº¦å®šå¼æäº¤è§„èŒƒ"></a>çº¦å®šå¼æäº¤è§„èŒƒ</h3><ol><li>æ¯ä¸ªæäº¤éƒ½<strong>å¿…é¡»</strong>ä½¿ç”¨ç±»å‹å­—æ®µå‰ç¼€ï¼Œå®ƒç”±ä¸€ä¸ªåè¯ç»„æˆï¼Œè¯¸å¦‚<code>feat</code>æˆ–<code>fix</code>ï¼Œå…¶åæ¥ä¸€ä¸ª<strong>å¯é€‰çš„</strong>ä½œç”¨åŸŸå­—æ®µï¼Œä»¥åŠä¸€ä¸ª<strong>å¿…è¦çš„</strong>å†’å·ï¼ˆè‹±æ–‡åŠè§’ï¼‰å’Œç©ºæ ¼ã€‚</li><li>å½“ä¸€ä¸ªæäº¤ä¸ºåº”ç”¨æˆ–ç±»åº“å®ç°äº†æ–°ç‰¹æ€§æ—¶ï¼Œ<strong>å¿…é¡»</strong>ä½¿ç”¨<code>feat</code>ç±»å‹ã€‚</li><li>å½“ä¸€ä¸ªæäº¤ä¸ºåº”ç”¨ä¿®å¤ bug æ—¶ï¼Œ<strong>å¿…é¡»</strong>ä½¿ç”¨<code>fix</code>ç±»å‹ã€‚</li><li>ä½œç”¨åŸŸå­—æ®µå¯ä»¥è·Ÿéšåœ¨ç±»å‹å­—æ®µåé¢ã€‚ä½œç”¨æœ‰<strong>å¿…é¡»</strong>æ˜¯ä¸€ä¸ªæè¿°æŸéƒ¨åˆ†ä»£ç çš„åè¯ï¼Œå¹¶ç”¨åœ†æ‹¬å·åŒ…å›´ï¼Œä¾‹å¦‚ï¼š<code>fix(parser): </code></li><li>æè¿°å­—æ®µ<strong>å¿…é¡»</strong>ç´§æ¥åœ¨ç±»å‹&#x2F;ä½œç”¨åŸŸå‰ç¼€çš„ç©ºæ ¼ä¹‹åã€‚æè¿°æŒ‡çš„æ˜¯å¯¹ä»£ç å˜æ›´çš„ç®€çŸ­æ€»ç»“ï¼Œä¾‹å¦‚ï¼š<code>fix:array parsing issue when multiplejspaces were contained in string</code>ã€‚</li><li>åœ¨ç®€çŸ­æè¿°ä¹‹åï¼Œ<strong>å¯ä»¥</strong>ç¼–å†™æ›´é•¿çš„æäº¤æ­£æ–‡ï¼Œä¸ºä»£ç å˜æ›´æä¾›é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚æ­£æ–‡<strong>å¿…é¡»</strong>èµ·å§‹äºæè¿°å­—æ®µç»“æŸçš„ä¸€ä¸ªç©ºè¡Œåã€‚</li><li>åœ¨æ­£æ–‡ç»“æŸçš„ä¸€ä¸ªç©ºè¡Œä¹‹åï¼Œ<strong>å¯ä»¥</strong>ç¼–å†™ä¸€è¡Œæˆ–æˆ–å¤šè¡Œè„šæ³¨ã€‚è„šæ³¨<strong>å¿…é¡»</strong>åŒ…å«å…³äºæäº¤çš„å…ƒä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šå…³è”çš„åˆå¹¶è¯·æ±‚ã€Reviewerã€ç ´åæ€§å˜æ›´ã€æ¯æ¡å…ƒä¿¡æ¯ä¸€è¡Œã€‚</li><li>ç ´åæ€§å˜æ›´<strong>å¿…é¡»</strong>æ ‡ç¤ºåœ¨æ­£æ–‡åŒºåŸŸæœ€å¼€å§‹å¤„ï¼Œæˆ–è„šæ³¨åŒºåŸŸä¸­æŸä¸€è¡Œçš„å¼€å§‹ã€‚ä¸€ä¸ªç ´åæ€§å˜æ›´<strong>å¿…é¡»</strong>åŒ…å«å¤§å†™çš„æ–‡æœ¬<code>BREAKING CHANGE</code>ï¼Œåé¢ç´§è·Ÿå†’å·å’Œç©ºæ ¼ã€‚</li><li>åœ¨<code>BREAKING CHANGE:</code>ä¹‹å<strong>å¿…é¡»</strong>æä¾›æè¿°ï¼Œä»¥æè¿°å¯¹ API çš„å˜æ›´ã€‚ä¾‹å¦‚ï¼š<code>BREAKING CHANGE: environment variables now take precedence over config files</code>ã€‚</li><li>åœ¨æäº¤è¯´æ˜ä¸­ï¼Œ<strong>å¯ä»¥</strong>ä½¿ç”¨<code>feat</code>å’Œ<code>fix</code>ä¹‹å¤–çš„ç±»å‹ã€‚</li><li>å·¥å…·çš„å®ç°<strong>å¿…é¡»ä¸</strong>åŒºåˆ†å¤§å°å†™åœ°è§£ææ„æˆçº¦å®šå¼æäº¤çš„ä¿¡æ¯å•å…ƒï¼Œåªæœ‰<code>BREAKING CHANGE</code>  <strong>å¿…é¡»</strong>æ˜¯å¤§å†™çš„ã€‚</li><li><strong>å¯ä»¥</strong>åœ¨ç±»å‹&#x2F;ä½œç”¨åŸŸå‰ç¼€ä¹‹åï¼Œ<code>:</code>ä¹‹å‰ï¼Œé™„åŠ <code>!</code>å­—ç¬¦ï¼Œä»¥è¿›ä¸€æ­¥æé†’æ³¨æ„ç ´åæ€§å˜æ›´ã€‚å½“æœ‰<code>!</code>å‰ç¼€æ—¶ï¼Œæ­£æ–‡æˆ–è„šæ³¨å†…å¿…é¡»åŒ…å«<code>BREAKING CHANGE: description</code></li></ol><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨çº¦å®šå¼æäº¤"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨çº¦å®šå¼æäº¤" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨çº¦å®šå¼æäº¤"></a>ä¸ºä»€ä¹ˆä½¿ç”¨çº¦å®šå¼æäº¤</h3><ul><li>è‡ªåŠ¨åŒ–ç”Ÿäº§ CHANGELOGã€‚</li><li>åŸºäºæäº¤çš„ç±»å‹ï¼Œè‡ªåŠ¨å†³å®šè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬å˜æ›´ã€‚</li><li>å‘åŒäº‹ã€å…¬ä¼—ä¸å…¶ä»–åˆ©ç›Šå…³ç³»è€…ä¼ è¾¾å˜åŒ–çš„æ€§è´¨ã€‚</li><li>è§¦å‘æ„å»ºå’Œéƒ¨ç½²æµç¨‹ã€‚</li><li>è®©äººä»¬æ¢ç´¢ä¸€ä¸ªæ›´åŠ ç»“æ„åŒ–çš„æäº¤å†å²ï¼Œä»¥ä¾¿é™ä½å¯¹ä½ çš„é¡¹ç›®ä½œå‡ºè´¡çŒ®çš„éš¾åº¦ã€‚</li></ul><h2 id="commitlint"><a href="#commitlint" class="headerlink" title="commitlint"></a>commitlint</h2><p>commitlintæ£€æŸ¥æ‚¨çš„æäº¤æ¶ˆæ¯æ˜¯å¦ç¬¦åˆ<a href="https://conventionalcommits.org/">conventional commit format</a>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add -D @commitlint/cli @commitlint/config-conventional @commitlint/prompt-cli</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add -D husky lint-staged</span></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commit&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;commitlint&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;@commitlint/config-conventional&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;husky&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;hooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;commit-msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="standard-version"><a href="#standard-version" class="headerlink" title="standard-version"></a>standard-version</h2><p><a href="https://link.zhihu.com/?target=https://github.com/conventional-changelog/standard-version">standard-version</a> æ˜¯ä¸€æ¬¾éµå¾ª<a href="https://link.zhihu.com/?target=https://semver.org/">è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆ semverï¼‰</a>å’Œ <a href="https://link.zhihu.com/?target=https://conventionalcommits.org/">commit message æ ‡å‡†è§„èŒƒ</a> çš„ç‰ˆæœ¬å’Œ changlog è‡ªåŠ¨åŒ–å·¥å…·ã€‚é€šå¸¸æƒ…å†µçº¿ä¸‹ï¼Œæˆ‘ä»¬ä¼šåœ¨ master åˆ†æ”¯è¿›è¡Œå¦‚ä¸‹çš„ç‰ˆæœ¬å‘å¸ƒæ“ä½œï¼š</p><ol><li><code>git pull origin master</code></li><li>æ ¹æ® <code>package.json</code> ä¸­çš„ <code>version</code> æ›´æ–°ç‰ˆæœ¬å·ï¼Œæ›´æ–° CHANGELOG</li><li><code>git add .</code></li><li><code>git commit</code></li><li><code>git tag</code> æ‰“ç‰ˆæœ¬æ“ä½œ</li><li><code>git push --follow-tags origin master &amp;&amp; npm publish</code>ï¼špush ç‰ˆæœ¬ tag å’Œ master åˆ†æ”¯åˆ°ä»“åº“å¹¶å‘å¸ƒ</li></ol><p>å…¶ä¸­ <strong>2ï¼Œ3ï¼Œ4ï¼Œ5</strong> æ˜¯ standard-version å·¥å…·ä¼šè‡ªåŠ¨å®Œæˆçš„å·¥ä½œï¼Œé…åˆæœ¬åœ°çš„ shell è„šæœ¬ï¼Œåˆ™å¯ä»¥è‡ªåŠ¨å®Œæˆä¸€ç³»åˆ—ç‰ˆæœ¬å‘å¸ƒçš„å·¥ä½œäº†ã€‚</p><h3 id="å®‰è£…-amp-ä½¿ç”¨"><a href="#å®‰è£…-amp-ä½¿ç”¨" class="headerlink" title="å®‰è£… &amp; ä½¿ç”¨"></a>å®‰è£… &amp; ä½¿ç”¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add -D standard-version</span></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;release&quot;</span><span class="punctuation">:</span> <span class="string">&quot;standard-version&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>First Releaseï¼š<code>yarn release --first-release</code></li><li>Cutting Releaseï¼š<code>yarn release</code></li><li>Release as a Pre-Releaseï¼š<code>yarn release --prerelease</code> or <code>yarn release --prerelease alpha</code></li><li>Release as a Target Type Imperatively (<code>npm version</code>-like)ï¼š<code>yarn release --release-as minor</code> or <code>yarn release --release-as 1.1.0</code>ï¼Œå¯ä»¥åˆå¹¶ <code>--prerelease</code>ä»¥æ­¤æ–¹ä¾¿å‘å¸ƒå®éªŒæ€§ç‰¹æ€§</li><li>Prevent Git Hooksï¼š<code>yarn release --no-verify</code></li></ul><h2 id="èµ„æºå‚è€ƒ"><a href="#èµ„æºå‚è€ƒ" class="headerlink" title="èµ„æºå‚è€ƒ"></a>èµ„æºå‚è€ƒ</h2><ul><li><a href="%5Bhttps://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90%5D(https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90)">Git é’©å­</a></li><li><a href="https://juejin.im/post/5ce607946fb9a07ef5620e5b">å‰ç«¯è‡ªåŠ¨åŒ–å·¥ä½œæµä¸­çš„hooks</a></li><li><a href="https://juejin.im/post/5bd2debfe51d457abc710b57">è§„èŒƒä½ çš„ commit message å¹¶ä¸”æ ¹æ® commit è‡ªåŠ¨ç”Ÿæˆ CHANGELOG.md</a></li><li><a href="https://zhuanlan.zhihu.com/p/51894196">git commit ã€CHANGELOG å’Œç‰ˆæœ¬å‘å¸ƒçš„æ ‡å‡†è‡ªåŠ¨åŒ–</a></li><li><a href="https://juejin.im/post/5afc5242f265da0b7f44bee4">ä¼˜é›…çš„æäº¤ä½ çš„ Git Commit Message</a></li><li><a href="https://www.conventionalcommits.org/zh-hans/v1.0.0-beta.4/">Conventional Commits</a>ï¼šçº¦å®šå¼æäº¤ï¼Œä¸€ç§ç”¨äºç»™æäº¤ä¿¡æ¯å¢åŠ äººæœºå¯è¯»å«ä¹‰çš„è§„èŒƒ</li><li><a href="https://github.com/conventional-changelog/standard-version">standard-version</a>ï¼š<a href="https://link.zhihu.com/?target=https://github.com/conventional-changelog/standard-version">standard-version</a> æ˜¯ä¸€æ¬¾éµå¾ª<a href="https://link.zhihu.com/?target=https://semver.org/">è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆ semverï¼‰</a>å’Œ <a href="https://link.zhihu.com/?target=https://conventionalcommits.org/">commit message æ ‡å‡†è§„èŒƒ</a> çš„ç‰ˆæœ¬å’Œ changlog è‡ªåŠ¨åŒ–å·¥å…·</li><li><a href="https://github.com/conventional-changelog/commitlint">commitlint</a>ï¼šæ£€æŸ¥æ‚¨çš„æäº¤æ¶ˆæ¯æ˜¯å¦ç¬¦åˆ<a href="https://conventionalcommits.org/">conventional commit format</a></li><li><a href="https://editorconfig.org/">EditorConfig</a>ï¼šEditorConfigæœ‰åŠ©äºç»´æŠ¤è·¨å¤šä¸ªç¼–è¾‘å™¨å’ŒIDEä»äº‹åŒä¸€é¡¹ç›®çš„å¤šä¸ªå¼€å‘äººå‘˜çš„ä¸€è‡´ç¼–ç é£æ ¼ã€‚</li><li><a href="https://eslint.org/">ESLint</a>ï¼šæŸ¥æ‰¾å¹¶ä¿®å¤JavaScriptä»£ç ä¸­çš„é—®é¢˜</li><li><a href="https://prettier.io/">Prettier</a>ï¼šæ›´æ¼‚äº®ã€å›ºæ‰§çš„ä»£ç æ ¼å¼åŒ–</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§„èŒƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ react-native-amap-geolocation æ¥å…¥é«˜å¾·åœ°å›¾å®šä½</title>
      <link href="/6ab9356b577c/"/>
      <url>/6ab9356b577c/</url>
      
        <content type="html"><![CDATA[<p>react-native-amap-geolocationè¿™æ¬¾æ’ä»¶æ¥å…¥äº†é«˜å¾·åœ°å›¾å®šä½æ¨¡å—ã€‚æ”¯æŒ Android + iOSï¼Œæä¾›å°½å¯èƒ½å®Œå–„çš„åŸç”Ÿæ¥å£ï¼Œ åŒæ—¶æä¾›ç¬¦åˆ Web æ ‡å‡†çš„ Geolocation APIã€‚</p><blockquote><p>æœ¬æ–‡åŸºäº react-native 0.60 ä»¥ä¸Šç‰ˆæœ¬ï¼</p></blockquote><h2 id="è·å–é«˜å¾·-App-Key"><a href="#è·å–é«˜å¾·-App-Key" class="headerlink" title="è·å–é«˜å¾· App Key"></a>è·å–é«˜å¾· App Key</h2><p>ä¸ºäº†ä½¿ç”¨é«˜å¾· SDKï¼Œä½ éœ€è¦å‡†å¤‡é«˜å¾· App Keyï¼Œè·å–æ–¹æ³•å‚è€ƒé«˜å¾·åœ°å›¾ SDK å®˜æ–¹æ–‡æ¡£ï¼š</p><ul><li><p><a href="https://lbs.amap.com/api/android-location-sdk/guide/create-project/get-key">è·å– Android App Key</a></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;an:key-debug&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keytool -list -v -keystore ./android/app/debug.keystore&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;an:key-release&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keytool -v -list -keystore ./android/app/release.keystore&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><a href="https://lbs.amap.com/api/ios-location-sdk/guide/create-project/get-key">è·å– iOS App Key</a></p><blockquote><p>ios åªéœ€è¦ <code>Bundle Identifier</code> å³å¯</p></blockquote></li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add react-native-amap-geolocation</span><br></pre></td></tr></table></figure><h2 id="ios-é…ç½®"><a href="#ios-é…ç½®" class="headerlink" title="ios é…ç½®"></a>ios é…ç½®</h2><h3 id="ä¸‹è½½å’Œå®‰è£…é«˜å¾·IOS-SDK"><a href="#ä¸‹è½½å’Œå®‰è£…é«˜å¾·IOS-SDK" class="headerlink" title="ä¸‹è½½å’Œå®‰è£…é«˜å¾·IOS SDK"></a>ä¸‹è½½å’Œå®‰è£…é«˜å¾·IOS SDK</h3><ol><li>ä¸‹è½½<a href="https://links.jianshu.com/go?to=https://a.amap.com/lbs/static/zip/AMap_iOS_Foundation_Lib_V1.4.3.zip">åŸºç¡€SDK(å«IDFA)</a></li><li>ä¸‹è½½<a href="https://links.jianshu.com/go?to=https://a.amap.com/lbs/static/zip/AMap_iOS_Loc_Lib_V2.6.2.zip">å®šä½SDK</a></li><li>å°†ä¸‹è½½çš„ <code>AMapFoundationKit.framework</code> å’Œ <code>AMapLocationKit.framework</code> ä»¥åŠ é¡¹ç›®è‡ªå¸¦çš„<code>ExternalAccessory.framework</code> æ·»åŠ åˆ° <code>Build Phases</code> âœ <code>Link Binary With Libraries</code>ã€‚</li></ol><h3 id="é…ç½®æƒé™"><a href="#é…ç½®æƒé™" class="headerlink" title="é…ç½®æƒé™"></a>é…ç½®æƒé™</h3><ol><li><p>æ·»åŠ ä»¥ä¸‹æƒé™åˆ° <code>Info.plist</code> æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>NSLocationWhenInUseUsageDescription<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span><span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>NSLocationAlwaysUsageDescription<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span><span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ATSè®¾ç½®:  <code>Target</code>âœ <code>Info</code> âœ <code>App Transport Security Setting</code> å±•å¼€åçš„ <code>Allow Arbitrary Loads</code> è®¾ç½®ä¸º <code>YES</code></p></li></ol><p><strong>å¦‚æœè¦æ”¯æŒåå°æŒç»­å®šä½ï¼Œè¿˜éœ€è¦é…ç½®ä»¥ä¸‹ï¼š</strong></p><ol><li><p>æ‰“å¼€xcodeï¼Œç‚¹å‡»é¡¹ç›®</p></li><li><p>é€‰æ‹© <code>Signing&amp;Capabilities</code>,æŠŠ <code>Background Modes</code> æ‰“å¼€ä¸º <code>ON</code>ï¼Œç„¶åæ‰“å‹¾ <code>Location updates</code></p><img src="https://i.loli.net/2020/03/18/ljTXqS9AboycPNk.png" style="zoom: 67%;" /></li></ol><h2 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h2><p>react-native ä¸º 0.6x çš„è¯ï¼Œ<code>yarn add react-native-amap-geolocation</code> å°±å®Œäº‹äº†ï¼Œä¸€æ­¥åˆ°ä½ä¸éœ€è¦è¿‡å¤šé…ç½®ã€‚</p><h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PermissionsAndroid</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-native&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; init, <span class="title class_">Geolocation</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-native-amap-geolocation&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹äº Android éœ€è¦è‡ªè¡Œæ ¹æ®éœ€è¦ç”³è¯·æƒé™</span></span><br><span class="line"><span class="keyword">await</span> <span class="title class_">PermissionsAndroid</span>.<span class="title function_">request</span>(<span class="title class_">PermissionsAndroid</span>.<span class="property">PERMISSIONS</span>.<span class="property">ACCESS_COARSE_LOCATION</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨è‡ªå·±ç”³è¯·çš„é«˜å¾· App Key è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">await</span> <span class="title function_">init</span>(&#123;</span><br><span class="line">  <span class="attr">ios</span>: <span class="string">&quot;9bd6c82e77583020a73ef1af59d0c759&quot;</span>,</span><br><span class="line">  <span class="attr">android</span>: <span class="string">&quot;043b24fe18785f33c491705ffe5b6935&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Geolocation</span>.<span class="title function_">getCurrentPosition</span>(<span class="function">(<span class="params">&#123; coords &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(coords);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="æ›´å¤šç”¨æ³•"><a href="#æ›´å¤šç”¨æ³•" class="headerlink" title="æ›´å¤šç”¨æ³•"></a>æ›´å¤šç”¨æ³•</h2><p>è¯¥é¡¹ç›®é™¤äº†æä¾›ç¬¦åˆ Web æ ‡å‡†çš„ Geolocation APIï¼ŒåŒæ—¶ä¸ºäº†æœ€å¤§ç¨‹åº¦çš„å‘æŒ¥é«˜å¾·å®šä½ SDK çš„åŠŸèƒ½ï¼Œ ä¼šå°½å¯èƒ½æä¾›ä¸åŸç”Ÿ SDK ä¸€è‡´çš„æ¥å£å°è£…ã€‚ç”±äº iOS å’Œ Android SDK æä¾›çš„æ¥å£å¹¶ä¸ä¸€è‡´ï¼Œ äºæ˜¯æœ€ç»ˆå®ç°çš„æ¥å£å¤§éƒ¨åˆ†æ˜¯å¹¶ä¸é€šç”¨çš„ã€‚è¿™åœ¨æ¥å£æ–‡æ¡£æˆ–æ–‡æ¡£æ³¨é‡Šæœ‰æ³¨æ˜ï¼Œ æ¯”å¦‚ <code>@platform android</code> è¡¨ç¤ºè¯¥æ¥å£ä»…ç”¨äº Androidã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨æ¥å£çš„ç”¨æ³•è¯´æ˜ä»¥åŠç¤ºä¾‹ä»£ç ï¼Œæ›´å¤šæ¥å£çš„å…·ä½“ç”¨æ³•è¯·å‚è€ƒ<a href="https://qiuxiang.github.io/react-native-amap-geolocation/#/">æ¥å£æ–‡æ¡£</a>ã€‚</p><h2 id="ç›´æ¥ä½¿ç”¨åŸç”Ÿæ¥å£"><a href="#ç›´æ¥ä½¿ç”¨åŸç”Ÿæ¥å£" class="headerlink" title="ç›´æ¥ä½¿ç”¨åŸç”Ÿæ¥å£"></a>ç›´æ¥ä½¿ç”¨åŸç”Ÿæ¥å£</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; init, addLocationListener, start, stop &#125; <span class="keyword">from</span> <span class="string">&quot;react-native-amap-geolocation&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å®šä½ç›‘å¬å‡½æ•°</span></span><br><span class="line"><span class="title function_">addLocationListener</span>(<span class="function"><span class="params">location</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(location));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å§‹è¿ç»­å®šä½</span></span><br><span class="line"><span class="title function_">start</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ä¸éœ€è¦çš„æ—¶å€™åœæ­¢å®šä½</span></span><br><span class="line"><span class="title function_">stop</span>();</span><br></pre></td></tr></table></figure><h2 id="é€†åœ°ç†ç¼–ç "><a href="#é€†åœ°ç†ç¼–ç " class="headerlink" title="é€†åœ°ç†ç¼–ç "></a>é€†åœ°ç†ç¼–ç </h2><p>Android é»˜è®¤è¿”å›é€†åœ°ç†ç¼–ç ï¼Œè€Œ iOS éœ€è¦æ‰‹åŠ¨è®¾ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; setLocatingWithReGeocode, setNeedAddress &#125; <span class="keyword">from</span> <span class="string">&quot;react-native-amap-geolocation&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// android</span></span><br><span class="line"><span class="title function_">setNeedAddress</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ios</span></span><br><span class="line"><span class="title function_">setLocatingWithReGeocode</span>(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure><h2 id="å®šä½å›è°ƒé¢‘ç‡é™åˆ¶"><a href="#å®šä½å›è°ƒé¢‘ç‡é™åˆ¶" class="headerlink" title="å®šä½å›è°ƒé¢‘ç‡é™åˆ¶"></a>å®šä½å›è°ƒé¢‘ç‡é™åˆ¶</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="built_in">setInterval</span>, setDistanceFilter &#125; <span class="keyword">from</span> <span class="string">&quot;react-native-amap-geolocation&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// androidï¼Œ5 ç§’è¯·æ±‚ä¸€æ¬¡å®šä½</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// iosï¼Œè®¾å¤‡ç§»åŠ¨è¶…è¿‡ 10 ç±³æ‰ä¼šæ›´æ–°ä½ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="title function_">setDistanceFilter</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://lbs.amap.com/api">é«˜å¾·åœ°å›¾API</a></li><li><a href="https://www.jianshu.com/p/f87316635ff6">react-native-amap-geolocationå®‰è£…ä¸ä½¿ç”¨</a></li><li><a href="https://qiuxiang.github.io/react-native-amap-geolocation/">react-native-amap-geolocation ä½¿ç”¨æŒ‡å—</a></li><li>[<a href="https://qiuxiang.github.io/react-native-amap-geolocation/api/index.html">react-native-amap-geolocation æ¥å£æ–‡æ¡£</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> amap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¨‹åºå‘˜çš„ Mac å¼€å‘ç¯å¢ƒ</title>
      <link href="/da1fab34e822/"/>
      <url>/da1fab34e822/</url>
      
        <content type="html"><![CDATA[<h2 id="Xcode-Command-Line-Tools"><a href="#Xcode-Command-Line-Tools" class="headerlink" title="Xcode Command Line Tools"></a>Xcode Command Line Tools</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ xcode-select --install</span><br></pre></td></tr></table></figure><h2 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a>Homebrew</h2><p>è®¿é—® <a href="https://brew.sh/index_zh-cn">brew.sh</a> å®‰è£…ã€‚ä½¿ç”¨ Homebrew å®‰è£… Appleï¼ˆæˆ–æ‚¨çš„ Linux ç³»ç»Ÿï¼‰æ²¡æœ‰é¢„è£…ä½† <a href="https://formulae.brew.sh/formula/">ä½ éœ€è¦çš„ä¸œè¥¿</a>ã€‚Homebrew å°†å¤§å¤§é™ä½ç»´æŠ¤ç¯å¢ƒçš„æ—¶é—´ã€‚æœ¬æ–‡åé¢å°†å°½å¯èƒ½ä½¿ç”¨ Homebrewã€‚</p><blockquote><p>ç½‘ç»œé—®é¢˜è¯·å‚è€ƒ <a href="https://www.huaweicloud.com/articles/2378bf35864b07da2b8b30db035a9897.html">è§£å†³homebrewå®‰è£…curl: (7) Failed to connect to http://raw.githubusercontent.com port 443é”™è¯¯</a> è§£å†³ã€‚</p></blockquote><ul><li><code>brew install</code>ï¼šå®‰è£…</li><li><code>brew uninstall</code>ï¼šå¸è½½</li><li><code>brew update</code>ï¼šæ›´æ–° homebrew</li><li><code>brew upgrade</code>ï¼šæ›´æ–°å·²å®‰è£…è½¯ä»¶</li><li><code>brew cleanup</code>ï¼šæ¸…ç†</li><li><code>brew update &amp;&amp; brew upgrade &amp;&amp; brew cleanup</code>ï¼šä¸€é”®æ¸…ç†</li></ul><p>å¸è½½è„šæœ¬ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/uninstall.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><h2 id="ohmyzsh"><a href="#ohmyzsh" class="headerlink" title="ohmyzsh"></a>ohmyzsh</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢ shell ä¸º zsh</span></span><br><span class="line">$ chsh -s /bin/zsh</span><br><span class="line"><span class="comment"># é€šè¿‡ curl å®‰è£… ohmyzsh</span></span><br><span class="line">$ sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><h3 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h3><h4 id="zsh-syntax-highlighting"><a href="#zsh-syntax-highlighting" class="headerlink" title="zsh-syntax-highlighting"></a>zsh-syntax-highlighting</h4><ul><li>å®‰è£…: <code>brew install zsh-syntax-highlighting</code></li><li>Oh-my-zsh<ul><li><code>git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting</code></li><li><code>plugins=( [plugins...] zsh-syntax-highlighting)</code></li><li><code>source ~/.zshrc</code></li></ul></li></ul><h4 id="WakaTime-for-Terminal"><a href="#WakaTime-for-Terminal" class="headerlink" title="WakaTime for Terminal"></a>WakaTime for Terminal</h4><ul><li><code>sudo easy_install pip</code></li><li><code>sudo pip install wakatime</code></li><li><code>cd ~/.oh-my-zsh/custom/plugins</code></li><li><code>git clone https://github.com/sobolevn/wakatime-zsh-plugin.git wakatime</code></li><li>åœ¨ä½ çš„ <code>~/.zshrc</code> æ–‡ä»¶çš„ <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/External-plugins">list of plugins</a> æ·»åŠ  <code>wakatime</code></li><li><code>source ~/.zshrc</code></li><li>ç¡®ä¿ä½ çš„ <a href="https://github.com/wakatime/wakatime#configuring">~&#x2F;.wakatime.cfg</a> æ–‡ä»¶ä¸­é…ç½®äº† <a href="https://wakatime.com/settings/api-key">API key</a> ã€‚</li></ul><h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><blockquote><p>å»ºè®®ä½¿ç”¨ï¼š<a href="https://github.com/amix/vimrc">https://github.com/amix/vimrc</a></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> --depth=1 https://github.com/amix/vimrc.git ~/.vim_runtime</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sh ~/.vim_runtime/install_awesome_vimrc.sh</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;set number&quot;</span> &gt;&gt; ~/.vimrc</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;set showcmd&quot;</span> &gt;&gt; ~/.vimrc</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> ~/.vimrc</span></span><br></pre></td></tr></table></figure><h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><h3 id="å‘½ä»¤è¡Œå·¥å…·"><a href="#å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="å‘½ä»¤è¡Œå·¥å…·"></a>å‘½ä»¤è¡Œå·¥å…·</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// Re-installing Git on Mac OSX with Brew</span><br><span class="line">$ <span class="built_in">alias</span> git=<span class="string">&#x27;/usr/local/bin/git&#x27;</span></span><br><span class="line">$ brew install git</span><br></pre></td></tr></table></figure><h3 id="å‘½ä»¤è¡Œé…ç½®"><a href="#å‘½ä»¤è¡Œé…ç½®" class="headerlink" title="å‘½ä»¤è¡Œé…ç½®"></a>å‘½ä»¤è¡Œé…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€åˆå§‹åŒ–è®¾ç½®</span></span><br><span class="line">$ git config --global user.name <span class="string">&#x27;æ´›ç«¹&#x27;</span></span><br><span class="line">$ git config --global user.email <span class="string">&#x27;youngjuning@aliyun.com&#x27;</span></span><br><span class="line"><span class="comment"># 2ã€å°† `color.ui` è®¾ç½®ä¸º `auto` å¯ä»¥è®©å‘½ä»¤çš„è¾“å‡ºæ‹¥æœ‰æ›´é«˜çš„å¯è¯»æ€§ã€‚</span></span><br><span class="line">$ git config --global color.ui auto</span><br><span class="line"><span class="comment"># 3ã€å¿½ç•¥å¤§å°å†™</span></span><br><span class="line">$ git config --global core.ignorecase <span class="literal">false</span></span><br><span class="line"><span class="comment"># 4ã€core.autocrlf</span></span><br><span class="line">$ git config --global core.autocrlf input</span><br><span class="line"><span class="comment"># 5ã€è¾“å‡ºåˆ°terminalè€Œä¸æ˜¯vim</span></span><br><span class="line">$ git config --global pager.branch <span class="literal">false</span></span><br></pre></td></tr></table></figure><blockquote><p>Linux æˆ– Mac ç³»ç»Ÿä½¿ç”¨ LF ä½œä¸ºè¡Œç»“æŸç¬¦ï¼Œå› æ­¤ä½ ä¸æƒ³ Git åœ¨ç­¾å‡ºæ–‡ä»¶æ—¶è¿›è¡Œè‡ªåŠ¨çš„è½¬æ¢ï¼›å½“ä¸€ä¸ªä»¥ <code>CRLF</code> ä¸ºè¡Œç»“æŸç¬¦çš„æ–‡ä»¶ä¸å°å¿ƒè¢«å¼•å…¥æ—¶ä½ è‚¯å®šæƒ³è¿›è¡Œä¿®æ­£ï¼ŒæŠŠ <code>core.autocrlf</code> è®¾ç½®æˆ <code>input</code> æ¥å‘Šè¯‰ Git åœ¨æäº¤æ—¶æŠŠ <code>CRLF</code> è½¬æ¢æˆ <code>LF</code>ï¼Œç­¾å‡ºæ—¶ä¸è½¬æ¢ï¼š<br>è¿™æ ·ä¼šåœ¨ Windows ç³»ç»Ÿä¸Šçš„ç­¾å‡ºæ–‡ä»¶ä¸­ä¿ç•™ <code>CRLF</code>ï¼Œä¼šåœ¨ Mac å’Œ Linux ç³»ç»Ÿä¸Šï¼ŒåŒ…æ‹¬ä»“åº“ä¸­ä¿ç•™ <code>LF</code>ã€‚</p></blockquote><h2 id="ä»£ç†é…ç½®"><a href="#ä»£ç†é…ç½®" class="headerlink" title="ä»£ç†é…ç½®"></a>ä»£ç†é…ç½®</h2><p>éœ€è¦ä¸º git å•ç‹¬è®¾ç½®ä»£ç†åŠ é€Ÿï¼Œ<code>41091</code> æ˜¯ HTTP&#x2F;HTTPS ä»£ç†ç«¯å£ï¼Œè¯·æŒ‰ç…§è‡ªå·±çš„æƒ…å†µå¡«å†™ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global https.proxy http://127.0.0.1:41091</span><br><span class="line">$ git config --global http.proxy http://127.0.0.1:41091</span><br></pre></td></tr></table></figure><h3 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h3><ul><li><a href="https://git-scm.com/book/zh/v2">å®˜æ–¹ Book</a></li><li><a href="http://rogerdudler.github.io/git-guide/index.zh.html">git - ç®€æ˜æŒ‡å—</a>ï¼šåŠ©ä½ å…¥é—¨ git çš„ç®€æ˜æŒ‡å—ï¼Œæœ¨æœ‰é«˜æ·±å†…å®¹</li><li><a href="http://t.cn/RK0tLXB">å»–é›ªå³°çš„ git æ•™ç¨‹</a></li><li><a href="https://backlog.com/git-tutorial/cn/">çŒ´å­éƒ½èƒ½æ‡‚çš„ GIT å…¥é—¨</a></li></ul><h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>n</code> æ¨¡å—æ¥ç»´æŠ¤ Node çš„ç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew install n</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…æœ€æ–°ç‰ˆ</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo n latest</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># å…¶ä»–å‘½ä»¤##</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…æŒ‡å®šç‰ˆæœ¬</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo n 10.16.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…æœ€æ–°çš„ç¨³å®šç‰ˆ</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo n lts</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æŒ‡å®šç‰ˆæœ¬</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">n <span class="built_in">rm</span> 12.10.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é™¤å»å½“å‰ç‰ˆæœ¬ä»¥å¤–çš„æ‰€æœ‰ç¼“å­˜ç‰ˆæœ¬</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">n prune</span></span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°-npm"><a href="#æ›´æ–°-npm" class="headerlink" title="æ›´æ–° npm"></a>æ›´æ–° npm</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo npm install -g npm</span></span><br></pre></td></tr></table></figure><h3 id="nrm-ç®¡ç†-registry"><a href="#nrm-ç®¡ç†-registry" class="headerlink" title="nrm ç®¡ç† registry"></a>nrm ç®¡ç† registry</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo npm install -g nrm</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºå¯ç”¨çš„ä»£ç†</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">nrm <span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ ç§æœ‰ä»£ç†</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">nrm add <span class="built_in">local</span> http://127.0.0.0:4873 http://127.0.0.0:4873</span></span><br></pre></td></tr></table></figure><h2 id="VS-Code"><a href="#VS-Code" class="headerlink" title="VS Code"></a>VS Code</h2><p><a href="https://code.visualstudio.com/">Visual Studio Code</a> æ˜¯ä¸€ä¸ªç”±å¾®è½¯å¼€å‘ï¼ŒåŒæ—¶æ”¯æŒ Windows ã€ Linux å’Œ macOS ç­‰æ“ä½œç³»ç»Ÿä¸”å¼€æ”¾æºä»£ç çš„ä»£ç ç¼–è¾‘å™¨ï¼Œå®ƒæ”¯æŒæµ‹è¯•ï¼Œå¹¶å†…ç½®äº† Git ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿå…·æœ‰å¼€å‘ç¯å¢ƒåŠŸèƒ½ï¼Œä¾‹å¦‚ä»£ç è¡¥å…¨ã€ä»£ç ç‰‡æ®µå’Œä»£ç é‡æ„ç­‰ã€‚</p><h2 id="d8"><a href="#d8" class="headerlink" title="d8"></a>d8</h2><blockquote><p>ä¸è¦ä½¿ç”¨ <code>brew install v8</code>ï¼Œå› ä¸ºå¯ç”¨å‘½ä»¤æ˜¯ä¸å®Œæ•´çš„ã€‚</p></blockquote><h3 id="é¢„å¤‡æ¡ä»¶"><a href="#é¢„å¤‡æ¡ä»¶" class="headerlink" title="é¢„å¤‡æ¡ä»¶"></a>é¢„å¤‡æ¡ä»¶</h3><ul><li>Install Xcode (Avaliable on the Mac App Store)</li><li>Install Xcode Command Line Tools (Preferences &gt; Downloads)</li><li>Install <a href="https://www.chromium.org/developers/how-tos/install-depot-tools">depot_tools</a><ul><li><code>cd ~ &amp;&amp; git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git</code></li><li><code>sudo nano ~/.zshrc</code>(zsh) or <code>sudo nano ~/.bash_profile</code>(bash)</li><li>Add <code>export PATH=~/depot_tools:&quot;$PATH&quot;</code> (itâ€™s important that depot_tools comes first here)</li><li><code>source ~/.zshrc</code></li><li>From the directory you want to install V8 into, run <code>gclient</code></li></ul></li></ul><h3 id="Build-V8"><a href="#Build-V8" class="headerlink" title="Build V8"></a>Build V8</h3><ul><li><code>fetch v8</code></li><li><code>cd ~/v8</code></li><li><code>gclient sync</code></li><li><code>tools/dev/v8gen.py x64.optdebug</code></li><li><code>ninja -C out.gn/x64.optdebug</code> (prepare for lots of fan noise)</li></ul><p>Iâ€™d also recommend adding these to your <code>.zshrc</code>:</p><ul><li><code>sudo nano ~/.zshrc</code></li><li>Add <code>alias d8=~/v8/out.gn/x64.optdebug/d8</code></li><li>Add <code>alias tick-processor=~/v8/tools/mac-tick-processor</code></li><li>Add <code>export D8_PATH=&quot;~/v8/out.gn/x64.optdebug&quot;</code></li><li><code>source ~/.zshrc</code></li></ul><blockquote><p>ä½¿ç”¨ Demo è¯·å‚è€ƒ <a href="https://gist.github.com/kevincennis/0cd2138c78a07412ef21#d8-shell-examples">d8-shell-examples</a></p></blockquote><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h3><ul><li><a href="https://www.oracle.com/hk/java/technologies/javase/javase-jdk8-downloads.html">javase-jdk8-downloads</a></li><li><a href="https://www.oracle.com/cn/java/technologies/oracle-java-archive-downloads.html">Oracle Java å­˜æ¡£</a></li></ul><h3 id="å®ç”¨å‘½ä»¤"><a href="#å®ç”¨å‘½ä»¤" class="headerlink" title="å®ç”¨å‘½ä»¤"></a>å®ç”¨å‘½ä»¤</h3><ul><li><p>Mac ä¸‹æŸ¥çœ‹å·²å®‰è£…çš„ jdk ç‰ˆæœ¬åŠå…¶å®‰è£…ç›®å½•: <code>/usr/libexec/java_home -V</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Matching Java Virtual Machines (2):</span><br><span class="line"> 1.8.0_221, x86_64:<span class="string">&quot;Java SE 8&quot;</span>/Library/Java/JavaVirtualMachines/jdk1.8.0_221.jdk/Contents/Home</span><br><span class="line"> 1.7.0_80, x86_64:<span class="string">&quot;Java SE 7&quot;</span>/Library/Java/JavaVirtualMachines/jdk1.7.0_80.jdk/Contents/Home</span><br><span class="line"></span><br><span class="line">/Library/Java/JavaVirtualMachines/jdk1.8.0_221.jdk/Contents/Home</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹ jre ç‰ˆæœ¬: <code>java -version</code></p></li><li><p>æŸ¥çœ‹ jdk ç‰ˆæœ¬: <code>javac -version</code></p></li></ul><h2 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install maven</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-Maven-æœ¬åœ°ä»“åº“"><a href="#é…ç½®-Maven-æœ¬åœ°ä»“åº“" class="headerlink" title="é…ç½® Maven æœ¬åœ°ä»“åº“"></a>é…ç½® Maven æœ¬åœ°ä»“åº“</h3><p><code>setting.xml</code> è·¯å¾„ä¸º <code>$&#123;Maven Home&#125;/conf/settings.xml</code> ï¼ŒMaven Home å¯ä»¥é€šè¿‡ <code>mvn --version è·å–</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>~/maven_repo<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯å°† <code>settings.xml</code> ç›´æ¥æ‹·è´åˆ° <code>.m2</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œè¿›è¡Œé…ç½®ã€‚</p><p>å¦‚æœæ²¡æœ‰ <code>.m2</code> æ–‡ä»¶å¤¹æ—¶,è¿è¡Œå‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mvn <span class="built_in">help</span>:system</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰“å¼€å½“å‰ç”¨æˆ·çš„ç›®å½•ï¼Œå¯ä»¥åœ¨å…¶ä¸­æ‰¾åˆ° <code>.m2</code> æ–‡ä»¶å¤¹</p><h3 id="é…ç½®é˜¿é‡Œé•œåƒ"><a href="#é…ç½®é˜¿é‡Œé•œåƒ" class="headerlink" title="é…ç½®é˜¿é‡Œé•œåƒ"></a>é…ç½®é˜¿é‡Œé•œåƒ</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å‡çº§-Maven"><a href="#å‡çº§-Maven" class="headerlink" title="å‡çº§ Maven"></a>å‡çº§ Maven</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ brew <span class="built_in">unlink</span></span><br><span class="line">$ brew update</span><br><span class="line">$ brew install maven</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h2><h3 id="MySql"><a href="#MySql" class="headerlink" title="MySql"></a>MySql</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew install mysql</span></span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">nano /usr/local/etc/my.cnf</span></span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">brew services start mysql</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯</span></span><br><span class="line">brew services restart mysql</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœæ­¢</span></span><br><span class="line">brew services stop mysql</span><br></pre></td></tr></table></figure><blockquote><p>Or, if you donâ€™t want&#x2F;need a background service you can just run: <code>mysql.server start</code></p></blockquote><h4 id="å®‰å…¨è®¾ç½®"><a href="#å®‰å…¨è®¾ç½®" class="headerlink" title="å®‰å…¨è®¾ç½®"></a>å®‰å…¨è®¾ç½®</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mysql_secure_installation</span></span><br></pre></td></tr></table></figure><ol><li>å»ºç«‹å¯†ç éªŒè¯æ’ä»¶</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Securing the MySQL server deployment.</span><br><span class="line"></span><br><span class="line">Connecting to MySQL using a blank password.</span><br><span class="line"></span><br><span class="line">VALIDATE PASSWORD PLUGIN can be used to test passwords and improve security. It checks the strength of password and allows the users to set only those passwords which are secure enough. Would you like to setup VALIDATE PASSWORD plugin?</span><br><span class="line"></span><br><span class="line">Press y|Y for Yes, any other key for No: y</span><br></pre></td></tr></table></figure><ol start="2"><li>é€‰æ‹©å¯†ç è§„åˆ™</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">There are three levels of password validation policy:</span><br><span class="line"></span><br><span class="line">LOW    Length &gt;= 8</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é•¿åº¦å¤§äºç­‰äº8</span></span><br><span class="line">MEDIUM Length &gt;= 8, numeric, mixed case, and special characters</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é•¿åº¦å¤§äºç­‰äº8ï¼Œæ•°å­—ã€å¤§å°å†™å­—æ¯ã€ç‰¹æ®Šç¬¦å·</span></span><br><span class="line">STRONG Length &gt;= 8, numeric, mixed case, special characters and dictionary file</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é•¿åº¦å¤§äºç­‰äº8ï¼Œæ•°å­—ã€å¤§å°å†™å­—æ¯ã€ç‰¹æ®Šç¬¦å·å’Œå­—å…¸æ–‡ä»¶ï¼ˆæ…é€‰ï¼ï¼‰</span></span><br><span class="line"></span><br><span class="line">Please enter 0 = LOW, 1 = MEDIUM and 2 = STRONG: 1</span><br><span class="line">Please set the password for root here.</span><br><span class="line"></span><br><span class="line">New password: ï¼ˆè¾“å…¥ä½ çš„å¯†ç ï¼‰</span><br><span class="line">Re-enter new password: ï¼ˆå†æ¬¡è¾“å…¥ä½ çš„å¯†ç ï¼‰</span><br></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»ºç¬¦åˆè§„åˆ™çš„æ–°å¯†ç </li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Estimated strength of the password: 50 #å¯†ç å¼ºåº¦</span><br><span class="line">Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : y</span><br></pre></td></tr></table></figure><ol start="4"><li>åˆ é™¤åŒ¿åç”¨æˆ·</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">By default, a MySQL installation has an anonymous user, allowing anyone to log into MySQL without having to have a user account created for them. This is intended only for testing, and to make the installation go a bit smoother.</span><br><span class="line">You should remove them before moving into a production environment.</span><br><span class="line"></span><br><span class="line">Remove anonymous users? (Press y|Y for Yes, any other key for No) : y</span><br><span class="line">Success.</span><br></pre></td></tr></table></figure><ol start="5"><li>ç¦æ­¢è¿œç¨‹ç™»å½•</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Normally, root should only be allowed to connect from &#x27;localhost&#x27;. This ensures that someone cannot guess at the root password from the network.</span><br><span class="line"></span><br><span class="line">Disallow root login remotely? (Press y|Y for Yes, any other key for No) : y</span><br><span class="line">Success.</span><br></pre></td></tr></table></figure><ol start="6"><li>åˆ é™¤æµ‹è¯•æ•°æ®è¡¨</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">By default, MySQL comes with a database named &#x27;test&#x27; that anyone can access. This is also intended only for testing, and should be removed before moving into a production environment.</span><br><span class="line"></span><br><span class="line">Remove test database and access to it? (Press y|Y for Yes, any other key for No) : y</span><br><span class="line">- Dropping test database...</span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line">- Removing privileges on test database...</span><br><span class="line">Success.</span><br></pre></td></tr></table></figure><ol start="7"><li>Done</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Reloading the privilege tables will ensure that all changes made so far will take effect immediately.</span><br><span class="line"></span><br><span class="line">Reload privilege tables now? (Press y|Y for Yes, any other key for No) : y</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ˜¯å¦é‡æ–°åŠ è½½æƒé™è¡¨</span></span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line">All done!</span><br></pre></td></tr></table></figure><p><strong>Your password does not satisfy the current policy requirementsï¼š</strong></p><p>å¦‚æœä½ åœ¨é€‰æ‹©å¯†ç è§„åˆ™çš„æ—¶å€™ä¸å°å¿ƒé€‰æ‹©äº† 2ï¼Œä¹Ÿå°±æ˜¯æ•°å­—ã€å¤§å°å†™å­—æ¯ã€ç‰¹æ®Šç¬¦å·å’Œå­—å…¸æ–‡ä»¶çš„ç»„åˆã€‚è¿™æ—¶ä½ ä¼šå‘ç° <code>mysql_secure_installation</code>ä¸ä¼šå†ç»™ä½ æœºä¼šé‡æ–°è®¾ç½®äº†ã€‚æ‰‹åŠ¨å¾®ç¬‘ï¼Œmmpã€‚æ–¹æ³•è¿˜æ˜¯æœ‰çš„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#x27;validate_password%&#x27;;</span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/68541c4633b944d69276a3da8f453406~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ä½¿ç”¨å‘½ä»¤ <code>mysql -u root</code> ç™»é™†ï¼Œæ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password.policy=0;</span><br><span class="line">set global validate_password.length=4;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å°†å¯†ç è§„åˆ™è®¾ç½®ä¸ºLOWï¼Œå°±å¯ä»¥ä½¿ç”¨çº¯æ•°å­—çº¯å­—æ¯å¯†ç </span></span><br></pre></td></tr></table></figure><h4 id="ç™»é™†"><a href="#ç™»é™†" class="headerlink" title="ç™»é™†"></a>ç™»é™†</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mysql -u root -p</span></span><br></pre></td></tr></table></figure><h3 id="mongodb"><a href="#mongodb" class="headerlink" title="mongodb"></a>mongodb</h3><blockquote><p>å‚è€ƒ: <a href="https://www.runoob.com/mongodb/mongodb-osx-install.html">Mac OSX å¹³å°å®‰è£… MongoDB</a>ã€<a href="https://www.32e.top/system/mac/article-87.html">Mac ä¸‹å®‰è£… MongoDB æ•°æ®åº“-å¯åŠ¨-åœæ­¢-å¼€å¯éªŒè¯-ç™»é™†</a>ã€<a href="https://uizph.com/article/5db177e4a9f13d7f535810c5">ã€ç¯å¢ƒæ­å»ºï¼šäºŒã€‘Mac å®‰è£…ã€é…ç½® MongoDB</a>ã€<a href="https://www.jianshu.com/p/f5afc6488f9e">MongoDB çš„ç”¨æˆ·åˆ›å»ºæ›´æ–°åŠåˆ é™¤</a>ã€<a href="https://cloud.tencent.com/developer/article/1446551">MongoDB ç”¨æˆ·åå¯†ç ç™»å½• è®¤è¯ç™»é™†</a></p></blockquote><h4 id="ä¸‹è½½å®‰è£…-1"><a href="#ä¸‹è½½å®‰è£…-1" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew install mongodb/brew/mongodb-community</span><br><span class="line">$ mongod -version</span><br></pre></td></tr></table></figure><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p><strong>å¯åŠ¨ mongo</strong>ï¼š</p><ol><li>æ–°å»º dbpath</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">mkdir</span> ~/data/db</span><br><span class="line">$ sudo <span class="built_in">mkdir</span> ~/data/log</span><br></pre></td></tr></table></figure><ol start="2"><li>å¯åŠ¨</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mongod --dbpath ~/data/db --fork --logpath ~/data/log/mongo.log</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šMac OS 10.15.1 ç‰ˆæœ¬ä¹‹åï¼Œ <code>/data/db</code> æ–‡ä»¶å¤¹æ¶ˆå¤±äº†ï¼Œé‡æ–°åˆ›å»ºæ–‡ä»¶å¤¹æç¤º <code>mkdir: /data/db: Read-only file system</code>ï¼Œè§£å†³åŠæ³•ä¹Ÿå¯ä»¥æ˜¯ <code>sudo mkdir ~/data/db &amp;&amp; sudo mongodb --dbpath ~/data/db</code></p></blockquote><p><strong>è®¾ç½®éªŒè¯å’Œç”¨æˆ·åå¯†ç </strong>ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ mongo</span><br><span class="line"><span class="comment"># åˆ›å»ºè¶…çº§ç®¡ç†å‘˜</span></span><br><span class="line">&gt; db.createUser(&#123; user: <span class="string">&quot;root&quot;</span> , <span class="built_in">pwd</span>: <span class="string">&quot;123456&quot;</span>, roles: [<span class="string">&quot;root&quot;</span>]&#125;);</span><br><span class="line">Successfully added user: &#123;</span><br><span class="line">   <span class="string">&quot;user&quot;</span> : <span class="string">&quot;root&quot;</span>,</span><br><span class="line">   <span class="string">&quot;roles&quot;</span> : [<span class="string">&quot;root&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># å°è¯•ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ç”¨æˆ·ä¿¡æ¯è¿›è¡Œè¿æ¥ã€‚</span></span><br><span class="line">&gt; db.auth(<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>)</span><br><span class="line">1</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªåä¸º adminï¼Œå¯†ç ä¸º 123456 çš„ç”¨æˆ·ã€‚</span></span><br><span class="line">&gt; db.createUser(&#123; user: <span class="string">&quot;admin&quot;</span>, <span class="built_in">pwd</span>: <span class="string">&quot;123456&quot;</span>, roles:[<span class="string">&quot;userAdminAnyDatabase&quot;</span>, <span class="string">&quot;dbAdminAnyDatabase&quot;</span>, <span class="string">&quot;readWriteAnyDatabase&quot;</span>]&#125;);</span><br><span class="line">Successfully added user: &#123;</span><br><span class="line">   <span class="string">&quot;user&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">   <span class="string">&quot;roles&quot;</span>: [</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="string">&quot;role&quot;</span>: <span class="string">&quot;userAdminAnyDatabase&quot;</span>,</span><br><span class="line">      <span class="string">&quot;db&quot;</span>: <span class="string">&quot;admin&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># å°è¯•ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ç”¨æˆ·ä¿¡æ¯è¿›è¡Œè¿æ¥ã€‚</span></span><br><span class="line">&gt; db.auth(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;123456&quot;</span>)</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p><strong>å¼€å¯éªŒè¯æ¨¡å¼ç™»å½•</strong>ï¼š</p><p>å¼€å¯ mongod æ—¶ï¼ŒæŒ‡å®š <code>--auth</code> å‚æ•°å³å¯ä»¥éªŒè¯æ¨¡å¼æ‰“å¼€ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mongod --dbpath ~/data/db --fork --logpath ~/data/log/mongo.log --auth</span><br></pre></td></tr></table></figure><p><strong>ç™»å½•æ—¶éªŒè¯</strong>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mongo 127.0.0.1:27017/admin -u admin -p 123456</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç­‰ä»·äº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mongo --port 27017 -u <span class="string">&quot;adminUser&quot;</span> -p <span class="string">&quot;adminPass&quot;</span> --authenticationDatabase <span class="string">&quot;admin&quot;</span></span></span><br></pre></td></tr></table></figure><p><strong>ç™»å½•åéªŒè¯</strong>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mongo</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">use admin</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">ab.auth(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;123456&quot;</span>)</span></span><br></pre></td></tr></table></figure><h4 id="é€€å‡º-mongodb"><a href="#é€€å‡º-mongodb" class="headerlink" title="é€€å‡º mongodb"></a>é€€å‡º mongodb</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆåœæ­¢ mongod æœåŠ¡</span></span><br><span class="line">$ use admin;</span><br><span class="line">$ db.shutdownServer();</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç„¶åé€€å‡º mongo</span></span><br><span class="line">$ <span class="built_in">exit</span>;</span><br></pre></td></tr></table></figure><h2 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h2><h3 id="natapp"><a href="#natapp" class="headerlink" title="natapp"></a>natapp</h3><p>å¼€å¯æ‚¨çš„å†…ç½‘ç©¿é€ä¹‹æ—…,è°ƒè¯•å¾®ä¿¡çš„åˆ©å™¨ï¼Œè¯·è‡³<a href="https://natapp.cn/">å®˜ç½‘</a>ä¸‹è½½ã€‚</p><h3 id="è®¾ç½®-SSH-Key"><a href="#è®¾ç½®-SSH-Key" class="headerlink" title="è®¾ç½® SSH Key"></a>è®¾ç½® SSH Key</h3><p>åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ <code>.ssh</code> ç›®å½•ï¼Œå¦‚æœæœ‰ï¼Œå†çœ‹çœ‹è¿™ä¸ªç›®å½•ä¸‹æœ‰æ²¡æœ‰ <code>id_rsa</code> å’Œ <code>id_rsa.pub</code> è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå·²ç»æœ‰äº†ï¼Œå¯ç›´æ¥è·³åˆ°ä¸‹ä¸€æ­¥ã€‚å¦‚æœæ²¡æœ‰ï¼Œæ‰“å¼€ Shellï¼ˆWindows ä¸‹æ‰“å¼€ Git Bashï¼‰ï¼Œåˆ›å»º SSH Keyï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;youngjuning@163.com&quot;</span></span><br><span class="line"><span class="comment"># æ·»åŠ åˆ°ç³»ç»Ÿ keychain</span></span><br><span class="line">ssh-add --apple-use-keychain ~/.ssh/id_rsa</span><br><span class="line"><span class="comment"># æ·»åŠ  public key åˆ° github</span></span><br><span class="line">gh auth login</span><br><span class="line">gh ssh-key add ~/.ssh/id_rsa.pub -t id_rsa</span><br></pre></td></tr></table></figure><blockquote><p>æœ¬æ–‡é¦–å‘äºã€Œ<a href="https://youngjuning.js.org/">æ´›ç«¹çš„å®˜æ–¹ç½‘ç«™</a>ã€ï¼ŒåŒæ­¥äºã€Œ<a href="https://juejin.cn/user/325111174662855">æ˜é‡‘ä¸“æ </a>ã€ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ¼«è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> å¼€å‘ç¯å¢ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>antd å¿«é€Ÿä¸Šæ‰‹</title>
      <link href="/4f0002889f48/"/>
      <url>/4f0002889f48/</url>
      
        <content type="html"><![CDATA[<p><code>antd</code> æ˜¯åŸºäº Ant Design è®¾è®¡ä½“ç³»çš„ React UI ç»„ä»¶åº“ï¼Œä¸»è¦ç”¨äºç ”å‘ä¼ä¸šçº§ä¸­åå°äº§å“ã€‚</p><blockquote><p>æ–‡ç« å¯å‚è€ƒæºç ï¼š<a href="https://github.com/youngjuning/antd-with-ts-demo">antd-with-ts-demo</a></p></blockquote><h2 id="Ant-Design-è®¾è®¡ä½“ç³»"><a href="#Ant-Design-è®¾è®¡ä½“ç³»" class="headerlink" title="Ant Design è®¾è®¡ä½“ç³»"></a>Ant Design è®¾è®¡ä½“ç³»</h2><p>ä»¥ç¬”è€…çš„ç»éªŒæ¥çœ‹ï¼ŒAnt Design è®¾è®¡ä½“ç³»ä¸‹çš„äº§å“è®¾è®¡ç†å¿µã€ä½¿ç”¨æ–¹å¼ã€åº•å±‚æŠ€æœ¯ã€å‘¨è¾¹å·¥å…·éƒ½ä¿æŒç€é«˜åº¦ä¸€è‡´ï¼Œå·¥å…·ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œæœ‰ä¸€å¥—å¥½ç”¨é¡ºæ‰‹çš„å°±è¡Œï¼ŒUIæ¡†æ¶åƒåƒä¸‡ï¼Œä½ ä¸å¯èƒ½éƒ½å­¦ä¸€éã€‚Ant Design æ— ç–‘èƒ½å¤Ÿå‡å°‘ä½ çš„å­¦ä¹ æˆæœ¬ã€‚</p><ul><li>è®¾è®¡<ul><li>è®¾è®¡ä»·å€¼è§‚</li><li>å…¨å±€æ ·å¼</li><li>è®¾è®¡æ¨¡å¼</li></ul></li><li>ç»„ä»¶åº“<ul><li><a href="https://ant.design/docs/react/introduce-cn">Ant Design of React</a>: åŸºäº Ant Design è®¾è®¡ä½“ç³»çš„ React UI ç»„ä»¶åº“ï¼Œä¸»è¦ç”¨äºç ”å‘ä¼ä¸šçº§ä¸­åå°äº§å“ã€‚</li><li><a href="https://mobile.ant.design/docs/react/introduce-cn">Ant Design Mobile of React</a>: <code>antd-mobile</code> æ˜¯ Ant Design çš„ç§»åŠ¨è§„èŒƒçš„ React å®ç°ï¼ŒæœåŠ¡äºèš‚èšåŠå£ç¢‘æ— çº¿ä¸šåŠ¡ã€‚</li><li><a href="https://rn.mobile.ant.design/docs/react/introduce-cn">Ant Design Mobile RN of React</a>: <code>@ant-design/react-native</code> æ˜¯ <a href="http://ant.design/">Ant Design</a> çš„ç§»åŠ¨è§„èŒƒçš„ React å®ç°ï¼ŒæœåŠ¡äºèš‚èšåŠå£ç¢‘æ— çº¿ä¸šåŠ¡ã€‚</li><li><a href="https://ng.ant.design/docs/introduce/zh">Ant Design of Angular</a>: è¿™é‡Œæ˜¯ Ant Design çš„ Angular å®ç°ï¼Œå¼€å‘å’ŒæœåŠ¡äºä¼ä¸šçº§åå°äº§å“ã€‚</li><li><a href="https://ng.mobile.ant.design/#/docs/introduce/zh">Ant Design Mobile of Angular</a>: è¿™é‡Œæ˜¯ <strong>Ant Design</strong> ç§»åŠ¨è§„èŒƒçš„ <strong>Angular</strong> å®ç°ï¼ŒæœåŠ¡äºé˜¿é‡Œå·´å·´é›†å›¢æ•°æ®æ— çº¿ä¸šåŠ¡ã€‚</li><li><a href="https://www.antdv.com/docs/vue/introduce-cn/">Ant Design of Vue</a>: è¿™é‡Œæ˜¯ Ant Design çš„ Vue å®ç°ï¼Œå¼€å‘å’ŒæœåŠ¡äºä¼ä¸šçº§åå°äº§å“ã€‚</li></ul></li><li><a href="https://ant.design/components/icon-cn/">Icons</a>: ä¸€æ•´å¥—ä¼˜è´¨çš„å›¾æ ‡é›†</li><li><a href="https://antv.vision/zh">AntV</a>: AntV æ˜¯èš‚èšé‡‘æœå…¨æ–°ä¸€ä»£æ•°æ®å¯è§†åŒ–è§£å†³æ–¹æ¡ˆï¼Œè‡´åŠ›äºæä¾›ä¸€å¥—ç®€å•æ–¹ä¾¿ã€ä¸“ä¸šå¯é ã€æ— é™å¯èƒ½çš„æ•°æ®å¯è§†åŒ–æœ€ä½³å®è·µã€‚</li><li><a href="https://pro.ant.design/index-cn">Ant Design Pro</a>: å¼€ç®±å³ç”¨çš„ä¸­å°å‰ç«¯&#x2F;è®¾è®¡è§£å†³æ–¹æ¡ˆ<ul><li><a href="http://dvajs.com/">dva</a>: ä¸€ä¸ªåŸºäº Redux çš„ è½»é‡çº§æ•°æ®æµæ–¹æ¡ˆï¼Œæ¦‚å¿µæ¥è‡ª elmï¼Œæ”¯æŒ side effectsã€çƒ­æ›¿æ¢ã€åŠ¨æ€åŠ è½½ã€react-nativeã€SSR ç­‰ï¼Œå·²åœ¨ç”Ÿäº§ç¯å¢ƒå¹¿æ³›åº”ç”¨ã€‚</li><li><a href="http://umijs.org/">umi</a> : ä¸€ä¸ªå¯æ’æ‹”çš„ä¼ä¸šçº§ react åº”ç”¨æ¡†æ¶ã€‚umi ä»¥è·¯ç”±ä¸ºåŸºç¡€çš„ï¼Œæ”¯æŒ<a href="https://umijs.org/zh/guide/router.html">ç±» next.js çš„çº¦å®šå¼è·¯ç”±</a>ï¼Œä»¥åŠå„ç§è¿›é˜¶çš„è·¯ç”±åŠŸèƒ½ï¼Œå¹¶ä»¥æ­¤è¿›è¡ŒåŠŸèƒ½æ‰©å±•ï¼Œæ¯”å¦‚<a href="https://umijs.org/zh/plugin/umi-plugin-react.html#dynamicimport">æ”¯æŒè·¯ç”±çº§çš„æŒ‰éœ€åŠ è½½</a>ã€‚ç„¶åé…ä»¥å®Œå–„çš„<a href="https://umijs.org/zh/plugin/">æ’ä»¶ä½“ç³»</a>ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ”¯æŒå„ç§åŠŸèƒ½æ‰©å±•å’Œä¸šåŠ¡éœ€æ±‚ï¼ŒåŒæ—¶æä¾› <a href="https://umijs.org/zh/guide/umi-ui.html">Umi UI</a> é€šè¿‡å¯è§†åŒ–è¾…åŠ©ç¼–ç¨‹ï¼ˆVAPï¼‰æé«˜å¼€å‘ä½“éªŒå’Œç ”å‘æ•ˆç‡ã€‚</li></ul></li></ul><p>ä»ä¸Šé¢çš„ä½“ç³»ä¸­å¯ä»¥çœ‹å‡ºï¼ŒAnt Design of React å¯ä»¥è¯´æ˜¯æ•´ä¸ª Ant Design è®¾è®¡ä½“ç³»çš„æ ¸å¿ƒäº§å“ï¼Œæƒ³è¦å­¦ä¹  Ant Design Proï¼Œé¦–å…ˆå°±è¦å…ˆç†Ÿæ‚‰ Ant Design of Reactã€‚</p><h2 id="æµè¡Œè¶‹åŠ¿"><a href="#æµè¡Œè¶‹åŠ¿" class="headerlink" title="æµè¡Œè¶‹åŠ¿"></a>æµè¡Œè¶‹åŠ¿</h2><h3 id="npm-ä¸‹è½½é‡"><a href="#npm-ä¸‹è½½é‡" class="headerlink" title="npm ä¸‹è½½é‡"></a>npm ä¸‹è½½é‡</h3><p>å¦‚æœæ‹¿ antd å’Œ element-uiã€iview è¿™äº›è€ç‰Œ Vue.js UI æ¡†æ¶å¯¹æ¯”ï¼Œé¥é¥é¢†å…ˆå•Šæœ‰æ²¡æœ‰ï¼š</p><p><img src="https://user-gold-cdn.xitu.io/2020/3/4/170a4939e1919973?w=1103&h=458&f=png&s=59582"></p><p>å¦‚æœæ‹¿ ant-design-vue æ¥å’Œ element-uiã€iviewè¿™äº›è€ç‰Œ vue UIæ¡†æ¶å¯¹æ¯”ï¼Œä¹Ÿæ˜¯å¾ˆæœ‰ç«äº‰åŠ›çš„ï¼š</p><p><img src="https://user-gold-cdn.xitu.io/2020/3/4/170a4939e21c45c6?w=1115&h=454&f=png&s=76675"></p><h3 id="GitHub-Star"><a href="#GitHub-Star" class="headerlink" title="GitHub Star"></a>GitHub Star</h3><p><img src="https://user-gold-cdn.xitu.io/2020/3/4/170a4939e23e1d0b?w=1119&h=207&f=png&s=36028"></p><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul><li>ğŸŒˆ æç‚¼è‡ªä¼ä¸šçº§ä¸­åå°äº§å“çš„äº¤äº’è¯­è¨€å’Œè§†è§‰é£æ ¼ã€‚</li><li>ğŸ“¦ å¼€ç®±å³ç”¨çš„é«˜è´¨é‡ React ç»„ä»¶ã€‚</li><li>ğŸ›¡ ä½¿ç”¨ TypeScript å¼€å‘ï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚</li><li>âš™ï¸ å…¨é“¾è·¯å¼€å‘å’Œè®¾è®¡å·¥å…·ä½“ç³»ã€‚</li><li>ğŸŒ æ•°åä¸ªå›½é™…åŒ–è¯­è¨€æ”¯æŒã€‚</li><li>ğŸ¨ æ·±å…¥æ¯ä¸ªç»†èŠ‚çš„ä¸»é¢˜å®šåˆ¶èƒ½åŠ›ã€‚</li></ul><h2 id="æ”¯æŒç¯å¢ƒ"><a href="#æ”¯æŒç¯å¢ƒ" class="headerlink" title="æ”¯æŒç¯å¢ƒ"></a>æ”¯æŒç¯å¢ƒ</h2><ul><li>ç°ä»£æµè§ˆå™¨å’Œ IE11 åŠä»¥ä¸Šï¼ˆéœ€è¦ <a href="https://ant.design/docs/react/getting-started-cn#%E5%85%BC%E5%AE%B9%E6%80%A7">polyfills</a>ï¼‰ã€‚</li><li>æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚<ul><li><a href="https://nextjs.frontendx.cn/">Next.js</a>: <strong>Next.js</strong> æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ React æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨æ¡†æ¶ã€‚</li></ul></li><li><a href="https://electronjs.org/">Electron</a>ï¼šä½¿ç”¨ JavaScriptï¼ŒHTML å’Œ CSS æ„å»ºè·¨å¹³å°çš„æ¡Œé¢åº”ç”¨ç¨‹åº<ul><li><a href="https://github.com/electron-react-boilerplate/electron-react-boilerplate">electron-react-boilerplate</a>: å¯æ‰©å±•çš„è·¨å¹³å°åº”ç”¨ç¨‹åºçš„åŸºç¡€</li></ul></li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add antd</span></span><br></pre></td></tr></table></figure><h2 id="æŒ‰éœ€åŠ è½½"><a href="#æŒ‰éœ€åŠ è½½" class="headerlink" title="æŒ‰éœ€åŠ è½½"></a>æŒ‰éœ€åŠ è½½</h2><p>Antd ç³»åˆ—çš„ UI ç»„ä»¶åº“éƒ½éœ€è¦å¼•å…¥ <a href="https://github.com/ant-design/babel-plugin-import">babel-plugin-import</a> åº“æ¥å®ç°æ‡’åŠ è½½</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .babelrc or babel-loader option</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">    [<span class="string">&quot;import&quot;</span>, &#123;</span><br><span class="line">      <span class="string">&quot;libraryName&quot;</span>: <span class="string">&quot;antd&quot;</span>,</span><br><span class="line">      <span class="string">&quot;libraryDirectory&quot;</span>: <span class="string">&quot;es&quot;</span>,</span><br><span class="line">      <span class="string">&quot;style&quot;</span>: <span class="string">&quot;css&quot;</span> <span class="comment">// `style: true` ä¼šåŠ è½½ less æ–‡ä»¶</span></span><br><span class="line">    &#125;]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååªéœ€ä» antd å¼•å…¥æ¨¡å—å³å¯ï¼Œæ— éœ€å•ç‹¬å¼•å…¥æ ·å¼ã€‚ç­‰åŒäºä¸‹é¢æ‰‹åŠ¨å¼•å…¥çš„æ–¹å¼ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// babel-plugin-import ä¼šå¸®åŠ©ä½ åŠ è½½ JS å’Œ CSS</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DatePicker</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="å¿«é€Ÿä¸Šæ‰‹"><a href="#å¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="å¿«é€Ÿä¸Šæ‰‹"></a>å¿«é€Ÿä¸Šæ‰‹</h2><blockquote><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæ¨èå…ˆå­¦ä¹  <a href="http://reactjs.org/">React</a> å’Œ <a href="http://babeljs.io/docs/learn-es2015/">ES2015</a>ï¼Œå¹¶æ­£ç¡®å®‰è£…å’Œé…ç½®äº† <a href="https://nodejs.org/">Node.js</a> v8 æˆ–ä»¥ä¸Šã€‚å®˜æ–¹æŒ‡å—å‡è®¾ä½ å·²äº†è§£å…³äº HTMLã€CSS å’Œ JavaScript çš„ä¸­çº§çŸ¥è¯†ï¼Œå¹¶ä¸”å·²ç»å®Œå…¨æŒæ¡äº† React å…¨å®¶æ¡¶çš„æ­£ç¡®å¼€å‘æ–¹å¼ã€‚å¦‚æœä½ åˆšå¼€å§‹å­¦ä¹ å‰ç«¯æˆ–è€… Reactï¼Œå°† UI æ¡†æ¶ä½œä¸ºä½ çš„ç¬¬ä¸€æ­¥å¯èƒ½ä¸æ˜¯æœ€å¥½çš„ä¸»æ„ã€‚</p></blockquote><h3 id="1-åˆ›å»ºä¸€ä¸ª-codesanbox"><a href="#1-åˆ›å»ºä¸€ä¸ª-codesanbox" class="headerlink" title="1. åˆ›å»ºä¸€ä¸ª codesanbox"></a>1. åˆ›å»ºä¸€ä¸ª codesanbox</h3><p>è®¿é—® <a href="http://u.ant.design/codesandbox-repro">http://u.ant.design/codesandbox-repro</a> åˆ›å»ºä¸€ä¸ª codesandbox çš„åœ¨çº¿ç¤ºä¾‹ï¼Œåˆ«å¿˜äº†ä¿å­˜ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p><h3 id="2-ä½¿ç”¨ç»„ä»¶"><a href="#2-ä½¿ç”¨ç»„ä»¶" class="headerlink" title="2. ä½¿ç”¨ç»„ä»¶"></a>2. ä½¿ç”¨ç»„ä»¶</h3><p>ç›´æ¥ç”¨ä¸‹é¢çš„ä»£ç æ›¿æ¢ <code>index.js</code> çš„å†…å®¹ï¼Œç”¨ React çš„æ–¹å¼ç›´æ¥ä½¿ç”¨ antd ç»„ä»¶ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ConfigProvider</span>, <span class="title class_">DatePicker</span>, message &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="comment">// ç”±äº antd ç»„ä»¶çš„é»˜è®¤æ–‡æ¡ˆæ˜¯è‹±æ–‡ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸ºä¸­æ–‡</span></span><br><span class="line"><span class="keyword">import</span> zhCN <span class="keyword">from</span> <span class="string">&#x27;antd/es/locale/zh_CN&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;moment&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;moment/locale/zh-cn&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;antd/dist/antd.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line">moment.<span class="title function_">locale</span>(<span class="string">&#x27;zh-cn&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">date</span>: <span class="literal">null</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleChange = <span class="function"><span class="params">date</span> =&gt;</span> &#123;</span><br><span class="line">    message.<span class="title function_">info</span>(<span class="string">`æ‚¨é€‰æ‹©çš„æ—¥æœŸæ˜¯: <span class="subst">$&#123;date ? date.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>) : <span class="string">&#x27;æœªé€‰æ‹©&#x27;</span>&#125;</span>`</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; date &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; date &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">ConfigProvider</span> <span class="attr">locale</span>=<span class="string">&#123;zhCN&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> <span class="attr">400</span>, <span class="attr">margin:</span> &#x27;<span class="attr">100px</span> <span class="attr">auto</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">DatePicker</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">marginTop:</span> <span class="attr">20</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            å½“å‰æ—¥æœŸï¼š&#123;date ? date.format(&#x27;YYYY-MM-DD&#x27;) : &#x27;æœªé€‰æ‹©&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ConfigProvider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br></pre></td></tr></table></figure><h3 id="3-æ¢ç´¢æ›´å¤šç»„ä»¶ç”¨æ³•"><a href="#3-æ¢ç´¢æ›´å¤šç»„ä»¶ç”¨æ³•" class="headerlink" title="3. æ¢ç´¢æ›´å¤šç»„ä»¶ç”¨æ³•"></a>3. æ¢ç´¢æ›´å¤šç»„ä»¶ç”¨æ³•</h3><p>ä½ å¯ä»¥åœ¨å·¦ä¾§èœå•æŸ¥çœ‹ç»„ä»¶åˆ—è¡¨ï¼Œæ¯”å¦‚ <a href="https://ant.design/components/alert-cn/">Alert</a> ç»„ä»¶ï¼Œç»„ä»¶æ–‡æ¡£ä¸­æä¾›äº†å„ç±»æ¼”ç¤ºï¼Œæœ€ä¸‹æ–¹æœ‰ç»„ä»¶ API æ–‡æ¡£å¯ä»¥æŸ¥é˜…ã€‚åœ¨ä»£ç æ¼”ç¤ºéƒ¨åˆ†æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œç‚¹å‡»å³ä¸‹è§’çš„å›¾æ ‡å±•å¼€ä»£ç ã€‚</p><p>ç„¶åä¾ç…§æ¼”ç¤ºä»£ç çš„å†™æ³•ï¼Œåœ¨ä¹‹å‰çš„ codesandbox é‡Œä¿®æ”¹ <code>index.js</code>ï¼Œé¦–å…ˆåœ¨ <code>import</code> å†…å¼•å…¥ Alert ç»„ä»¶ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- import &#123; ConfigProvider, DatePicker, message &#125; from &#x27;antd&#x27;;</span></span><br><span class="line"><span class="addition">+ import &#123; ConfigProvider, DatePicker, message, Alert &#125; from &#x27;antd&#x27;;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>render</code> å†…æ·»åŠ ç›¸åº”çš„ jsx ä»£ç ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  &lt;DatePicker onChange=&#123;value =&gt; this.handleChange(value)&#125; /&gt;</span><br><span class="line">  &lt;div style=&#123;&#123; marginTop: 20 &#125;&#125;&gt;</span><br><span class="line"><span class="deletion">-   å½“å‰æ—¥æœŸï¼š&#123;date ? date.format(&#x27;YYYY-MM-DD&#x27;) : &#x27;æœªé€‰æ‹©&#x27;&#125;</span></span><br><span class="line"><span class="addition">+   &lt;Alert message=&#123;`å½“å‰æ—¥æœŸï¼š$&#123;date ? date.format(&#x27;YYYY-MM-DD&#x27;) : &#x27;æœªé€‰æ‹©&#x27;&#125;`&#125; type=&quot;success&quot; /&gt;</span></span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure><p>å¥½çš„ï¼Œç°åœ¨ä½ å·²ç»ä¼šä½¿ç”¨åŸºæœ¬çš„ antd ç»„ä»¶äº†ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªä¾‹å­ä¸­ç»§ç»­æ¢ç´¢å…¶ä»–ç»„ä»¶çš„ç”¨æ³•ã€‚å¦‚æœä½ é‡åˆ°ç»„ä»¶çš„ bugï¼Œä¹Ÿæ¨èå»ºä¸€ä¸ªå¯é‡ç°çš„ codesandbox æ¥æŠ¥å‘Š bugã€‚</p><h3 id="4-ä¸‹ä¸€æ­¥"><a href="#4-ä¸‹ä¸€æ­¥" class="headerlink" title="4. ä¸‹ä¸€æ­¥#"></a>4. ä¸‹ä¸€æ­¥<a href="https://ant.design/docs/react/getting-started-cn#4.-%E4%B8%8B%E4%B8%80%E6%AD%A5">#</a></h3><p>å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œä½ ä¼šéœ€è¦æ„å»ºã€è°ƒè¯•ã€ä»£ç†ã€æ‰“åŒ…éƒ¨ç½²ç­‰ä¸€ç³»åˆ—å·¥ç¨‹åŒ–çš„éœ€æ±‚ã€‚æ‚¨å¯ä»¥é˜…è¯»åé¢çš„æ–‡æ¡£æˆ–è€…ä½¿ç”¨ä»¥ä¸‹è„šæ‰‹æ¶å’ŒèŒƒä¾‹ï¼š</p><ul><li><a href="http://pro.ant.design/">Ant Design Pro</a></li><li><a href="https://github.com/zuiidea/antd-admin">antd-admin</a></li><li><a href="https://github.com/d2-projects/d2-admin">d2-admin</a></li><li>æ›´å¤šè„šæ‰‹æ¶å¯ä»¥æŸ¥çœ‹ <a href="http://scaffold.ant.design/">è„šæ‰‹æ¶å¸‚åœº</a></li></ul><h2 id="ä½¿ç”¨-Day-js-æ›¿æ¢-momentjs-ä¼˜åŒ–æ‰“åŒ…å¤§å°"><a href="#ä½¿ç”¨-Day-js-æ›¿æ¢-momentjs-ä¼˜åŒ–æ‰“åŒ…å¤§å°" class="headerlink" title="ä½¿ç”¨ Day.js æ›¿æ¢ momentjs ä¼˜åŒ–æ‰“åŒ…å¤§å°"></a>ä½¿ç”¨ Day.js æ›¿æ¢ momentjs ä¼˜åŒ–æ‰“åŒ…å¤§å°</h2><p>ä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/ant-design/antd-dayjs-webpack-plugin">antd-dayjs-webpack-plugin</a> æ’ä»¶ç”¨ Day.js æ›¿æ¢ momentjs æ¥å¤§å¹…å‡å°æ‰“åŒ…å¤§å°ã€‚è¿™éœ€è¦æ›´æ–° webpack çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack-config.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AntdDayjsWebpackPlugin</span> <span class="keyword">from</span> <span class="string">&#x27;antd-dayjs-webpack-plugin&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title class_">AntdDayjsWebpackPlugin</span>()],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="åœ¨-TypeScript-ä¸­ä½¿ç”¨"><a href="#åœ¨-TypeScript-ä¸­ä½¿ç”¨" class="headerlink" title="åœ¨ TypeScript ä¸­ä½¿ç”¨"></a>åœ¨ TypeScript ä¸­ä½¿ç”¨</h2><p>ä½¿ç”¨ <code>create-react-app</code> ä¸€æ­¥æ­¥åœ°åˆ›å»ºä¸€ä¸ª TypeScript é¡¹ç›®ï¼Œå¹¶å¼•å…¥ antdã€‚</p><h3 id="å®‰è£…å’Œåˆå§‹åŒ–"><a href="#å®‰è£…å’Œåˆå§‹åŒ–" class="headerlink" title="å®‰è£…å’Œåˆå§‹åŒ–"></a>å®‰è£…å’Œåˆå§‹åŒ–</h3><p>åˆ›å»º <a href="https://github.com/facebook/create-react-app/tree/master/packages/cra-template-typescript">cra-template-typescript</a> é¡¹ç›®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npx create-react-app my-app --template typescript</span></span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬è¿›å…¥é¡¹ç›®å¹¶å¯åŠ¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> antd-demo-ts</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn start</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æµè§ˆå™¨ä¼šè®¿é—® <a href="http://localhost:3000/">http://localhost:3000/</a> ï¼Œçœ‹åˆ° <code>Welcome to React</code> çš„ç•Œé¢å°±ç®—æˆåŠŸäº†ã€‚</p><h3 id="å¼•å…¥-antd"><a href="#å¼•å…¥-antd" class="headerlink" title="å¼•å…¥ antd"></a>å¼•å…¥ antd</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add antd</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰-create-react-app-é…ç½®"><a href="#è‡ªå®šä¹‰-create-react-app-é…ç½®" class="headerlink" title="è‡ªå®šä¹‰ create-react-app é…ç½®"></a>è‡ªå®šä¹‰ create-react-app é…ç½®</h3><p>æˆ‘ä»¬éœ€è¦å¯¹ create-react-app çš„é»˜è®¤é…ç½®è¿›è¡Œè‡ªå®šä¹‰ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <a href="https://github.com/timarney/react-app-rewired">react-app-rewired</a> ï¼ˆä¸€ä¸ªå¯¹ create-react-app è¿›è¡Œè‡ªå®šä¹‰é…ç½®çš„ç¤¾åŒºè§£å†³æ–¹æ¡ˆï¼‰ã€‚</p><p>å¼•å…¥ react-app-rewired å¹¶ä¿®æ”¹ package.json é‡Œçš„å¯åŠ¨é…ç½®ã€‚ç”±äºæ–°çš„ <a href="https://github.com/timarney/react-app-rewired#alternatives">react-app-rewired@2.x</a> ç‰ˆæœ¬çš„å…³ç³»ï¼Œä½ è¿˜éœ€è¦å®‰è£… <a href="https://github.com/arackaf/customize-cra">customize-cra</a>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add react-app-rewired customize-cra -D</span></span><br></pre></td></tr></table></figure><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/* package.json */</span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line"><span class="deletion">-   &quot;start&quot;: &quot;react-scripts start&quot;,</span></span><br><span class="line"><span class="addition">+   &quot;start&quot;: &quot;react-app-rewired start&quot;,</span></span><br><span class="line"><span class="deletion">-   &quot;build&quot;: &quot;react-scripts build&quot;,</span></span><br><span class="line"><span class="addition">+   &quot;build&quot;: &quot;react-app-rewired build&quot;,</span></span><br><span class="line"><span class="deletion">-   &quot;test&quot;: &quot;react-scripts test&quot;,</span></span><br><span class="line"><span class="addition">+   &quot;test&quot;: &quot;react-app-rewired test&quot;,</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª <code>config-overrides.js</code> ç”¨äºä¿®æ”¹é»˜è®¤é…ç½®:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> <span class="title function_">override</span>(<span class="params">config, env</span>) &#123;</span><br><span class="line">  <span class="comment">// do stuff with the webpack config...</span></span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-babel-plugin-import"><a href="#ä½¿ç”¨-babel-plugin-import" class="headerlink" title="ä½¿ç”¨ babel-plugin-import"></a>ä½¿ç”¨ babel-plugin-import</h3><p><a href="https://github.com/ant-design/babel-plugin-import">babel-plugin-import</a> æ˜¯ä¸€ä¸ªç”¨äºæŒ‰éœ€åŠ è½½ç»„ä»¶ä»£ç å’Œæ ·å¼çš„ babel æ’ä»¶ï¼ˆ<a href="https://ant.design/docs/react/getting-started-cn#%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD">åŸç†</a>ï¼‰ï¼Œç°åœ¨æˆ‘ä»¬å°è¯•å®‰è£…å®ƒå¹¶ä¿®æ”¹ <code>config-overrides.js</code> æ–‡ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add babel-plugin-import -D</span><br></pre></td></tr></table></figure><p>æ›¿æ¢ <code>config-overrides.js</code> æ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; override, fixBabelImports &#125; = <span class="built_in">require</span>(<span class="string">&#x27;customize-cra&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">override</span>(</span><br><span class="line">  <span class="title function_">fixBabelImports</span>(<span class="string">&#x27;import&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">libraryName</span>: <span class="string">&#x27;antd&#x27;</span>,</span><br><span class="line">    <span class="attr">libraryDirectory</span>: <span class="string">&#x27;es&#x27;</span>,</span><br><span class="line">    <span class="attr">style</span>: <span class="string">&#x27;css&#x27;</span>, <span class="comment">// `style: true` ä¼šåŠ è½½ less æ–‡ä»¶</span></span><br><span class="line">  &#125;),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-antd"><a href="#ä½¿ç”¨-antd" class="headerlink" title="ä½¿ç”¨ antd"></a>ä½¿ç”¨ antd</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/App.tsxe</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>Button<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>è¿è¡Œ <code>yarn start</code> è®¿é—®é¡µé¢ï¼Œantd ç»„ä»¶çš„ js å’Œ css ä»£ç éƒ½ä¼šæŒ‰éœ€åŠ è½½ï¼Œä½ åœ¨æ§åˆ¶å°ä¹Ÿä¸ä¼šçœ‹åˆ°è¿™æ ·çš„<a href="https://zos.alipayobjects.com/rmsportal/vgcHJRVZFmPjAawwVoXK.png">è­¦å‘Šä¿¡æ¯</a>ã€‚å…³äºæŒ‰éœ€åŠ è½½çš„åŸç†å’Œå…¶ä»–æ–¹å¼å¯ä»¥é˜…è¯»<a href="https://ant.design/docs/react/getting-started-cn#%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD">è¿™é‡Œ</a>ã€‚</p><h3 id="è‡ªå®šä¹‰ä¸»é¢˜"><a href="#è‡ªå®šä¹‰ä¸»é¢˜" class="headerlink" title="è‡ªå®šä¹‰ä¸»é¢˜"></a>è‡ªå®šä¹‰ä¸»é¢˜</h3><p>æŒ‰ç…§ <a href="https://ant.design/docs/react/customize-theme-cn">é…ç½®ä¸»é¢˜</a> çš„è¦æ±‚ï¼Œè‡ªå®šä¹‰ä¸»é¢˜éœ€è¦ç”¨åˆ° less å˜é‡è¦†ç›–åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥å¼•å…¥ <code>customize-cra</code> ä¸­æä¾›çš„ less ç›¸å…³çš„å‡½æ•° <a href="https://github.com/arackaf/customize-cra#addlessloaderloaderoptions">addLessLoader</a> æ¥å¸®åŠ©åŠ è½½ less æ ·å¼ï¼ŒåŒæ—¶ä¿®æ”¹ <code>config-overrides.js</code> æ–‡ä»¶å¦‚ä¸‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add less less-loader -D</span></span><br></pre></td></tr></table></figure><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- const &#123; override, fixBabelImports &#125; = require(&#x27;customize-cra&#x27;);</span></span><br><span class="line"><span class="addition">+ const &#123; override, fixBabelImports, addLessLoader &#125; = require(&#x27;customize-cra&#x27;);</span></span><br><span class="line"></span><br><span class="line">module.exports = override(</span><br><span class="line">  fixBabelImports(&#x27;import&#x27;, &#123;</span><br><span class="line">    libraryName: &#x27;antd&#x27;,</span><br><span class="line">    libraryDirectory: &#x27;es&#x27;,</span><br><span class="line"><span class="deletion">-   style: &#x27;css&#x27;,</span></span><br><span class="line"><span class="addition">+   style: true,</span></span><br><span class="line">  &#125;),</span><br><span class="line"><span class="addition">+ addLessLoader(&#123;</span></span><br><span class="line"><span class="addition">+   javascriptEnabled: true,</span></span><br><span class="line"><span class="addition">+   modifyVars: &#123; &#x27;@primary-color&#x27;: &#x27;#1DA57A&#x27; &#125;,</span></span><br><span class="line"><span class="addition">+ &#125;),</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåˆ©ç”¨äº† <a href="https://github.com/webpack/less-loader#less-options">less-loader</a> çš„ <code>modifyVars</code> æ¥è¿›è¡Œä¸»é¢˜é…ç½®ï¼Œå˜é‡å’Œå…¶ä»–é…ç½®æ–¹å¼å¯ä»¥å‚è€ƒ <a href="https://ant.design/docs/react/customize-theme-cn">é…ç½®ä¸»é¢˜</a> æ–‡æ¡£ã€‚</p><p>ä¿®æ”¹åé‡å¯ <code>yarn start</code>ï¼Œå¦‚æœçœ‹åˆ°ä¸€ä¸ªç»¿è‰²çš„æŒ‰é’®å°±è¯´æ˜é…ç½®æˆåŠŸäº†ã€‚</p><h3 id="ä½¿ç”¨-Day-js-æ›¿æ¢-momentjs-ä¼˜åŒ–æ‰“åŒ…å¤§å°-1"><a href="#ä½¿ç”¨-Day-js-æ›¿æ¢-momentjs-ä¼˜åŒ–æ‰“åŒ…å¤§å°-1" class="headerlink" title="ä½¿ç”¨ Day.js æ›¿æ¢ momentjs ä¼˜åŒ–æ‰“åŒ…å¤§å°"></a>ä½¿ç”¨ Day.js æ›¿æ¢ momentjs ä¼˜åŒ–æ‰“åŒ…å¤§å°</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ const AntdDayjsWebpackPlugin = require(&#x27;antd-dayjs-webpack-plugin&#x27;);</span></span><br><span class="line"><span class="deletion">- const &#123; override, fixBabelImports, addLessLoader &#125; = require(&#x27;customize-cra&#x27;);</span></span><br><span class="line"><span class="addition">+ const &#123; override, fixBabelImports, addLessLoader, addWebpackPlugin &#125; = require(&#x27;customize-cra&#x27;);</span></span><br><span class="line"></span><br><span class="line">module.exports = override(</span><br><span class="line">  fixBabelImports(&#x27;import&#x27;, &#123;</span><br><span class="line">    libraryName: &#x27;antd&#x27;,</span><br><span class="line">    libraryDirectory: &#x27;es&#x27;,</span><br><span class="line">    style: true,</span><br><span class="line">  &#125;),</span><br><span class="line">  addLessLoader(&#123;</span><br><span class="line">    javascriptEnabled: true,</span><br><span class="line">    modifyVars: &#123; &#x27;@primary-color&#x27;: &#x27;#1DA57A&#x27; &#125;,</span><br><span class="line">  &#125;),</span><br><span class="line"><span class="addition">+  addWebpackPlugin(new AntdDayjsWebpackPlugin()),</span></span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="decorators"><a href="#decorators" class="headerlink" title="decorators"></a>decorators</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add -D @babel/plugin-proposal-decorators</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; addDecoratorsLegacy &#125; = <span class="built_in">require</span>(<span class="string">&#x27;customize-cra&#x27;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">override</span>(</span><br><span class="line">...</span><br><span class="line">  <span class="title function_">addDecoratorsLegacy</span>(),</span><br><span class="line">  ...</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-Babel-æ’ä»¶"><a href="#é…ç½®-Babel-æ’ä»¶" class="headerlink" title="é…ç½® Babel æ’ä»¶"></a>é…ç½® Babel æ’ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">module.exports = override(</span><br><span class="line">  ...,</span><br><span class="line">  ...addBabelPresets(</span><br><span class="line">    [</span><br><span class="line">      &quot;@babel/preset-env&quot;,</span><br><span class="line">      &#123;</span><br><span class="line">        targets: &#123;</span><br><span class="line">          browsers: [&quot;&gt; 1%&quot;, &quot;last 2 versions&quot;],</span><br><span class="line">          ie: 9</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  )</span><br><span class="line">  ...</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="å…è®¸ä½¿ç”¨-babelrc-js-æ–‡ä»¶è¿›è¡ŒBabelé…ç½®ã€‚"><a href="#å…è®¸ä½¿ç”¨-babelrc-js-æ–‡ä»¶è¿›è¡ŒBabelé…ç½®ã€‚" class="headerlink" title="å…è®¸ä½¿ç”¨ .babelrc.js æ–‡ä»¶è¿›è¡ŒBabelé…ç½®ã€‚"></a>å…è®¸ä½¿ç”¨ .babelrc.js æ–‡ä»¶è¿›è¡ŒBabelé…ç½®ã€‚</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config-overrides.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; useBabelRc &#125; = <span class="built_in">require</span>(<span class="string">&#x27;customize-cra&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">override</span>(</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// å…è®¸ä½¿ç”¨ .babelrc.js æ–‡ä»¶è¿›è¡ŒBabelé…ç½®ã€‚</span></span><br><span class="line">  <span class="title function_">useBabelRc</span>()</span><br><span class="line">  ...</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add @babel/preset-env -D</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .babelrc.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@babel/preset-env&quot;</span>, <span class="comment">//å…¼å®¹ie9</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">targets</span>: &#123;</span><br><span class="line">          <span class="attr">ie</span>: <span class="string">&quot;9&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>] <span class="comment">// å¯ä»¥ç”¨æ¥æ›¿æ¢ addDecoratorsLegacy</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> antd </tag>
            
            <tag> UIæ¡†æ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nest.js å¿«é€Ÿä¸Šæ‰‹</title>
      <link href="/f9e39267a7ed/"/>
      <url>/f9e39267a7ed/</url>
      
        <content type="html"><![CDATA[<h2 id="Nest-js-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Nest-js-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Nest.js æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Nest.js æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>â€‹Nest æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºé«˜æ•ˆï¼Œå¯æ‰©å±•çš„ <a href="http://nodejs.cn/">Node.js</a> æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚å®ƒä½¿ç”¨æ¸è¿›å¼ JavaScriptï¼Œå†…ç½®å¹¶å®Œå…¨æ”¯æŒ <a href="https://www.tslang.cn/">TypeScript</a>ï¼ˆä½†ä»ç„¶å…è®¸å¼€å‘äººå‘˜ä½¿ç”¨çº¯ JavaScript ç¼–å†™ä»£ç ï¼‰å¹¶ç»“åˆäº† <code>OOP</code>ï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰ï¼Œ<code>FP</code>ï¼ˆå‡½æ•°å¼ç¼–ç¨‹ï¼‰å’Œ<code> FRP</code>ï¼ˆå‡½æ•°å¼å“åº”ç¼–ç¨‹ï¼‰çš„å…ƒç´ ã€‚</p><p>â€‹åœ¨åº•å±‚ï¼ŒNestä½¿ç”¨å¼ºå¤§çš„ HTTP Server æ¡†æ¶ï¼Œå¦‚ Expressï¼ˆé»˜è®¤ï¼‰å’Œ Fastifyã€‚Nest åœ¨è¿™äº›æ¡†æ¶ä¹‹ä¸Šæä¾›äº†ä¸€å®šç¨‹åº¦çš„æŠ½è±¡ï¼ŒåŒæ—¶ä¹Ÿå°†å…¶ API ç›´æ¥æš´éœ²ç»™å¼€å‘äººå‘˜ã€‚è¿™æ ·å¯ä»¥è½»æ¾ä½¿ç”¨æ¯ä¸ªå¹³å°çš„æ— æ•°ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚</p><h2 id="Nest-js-è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#Nest-js-è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="Nest.js è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>Nest.js è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2><p>â€‹è¿‘å¹´æ¥ï¼Œæ„Ÿè°¢ Node.jsï¼ŒJavaScript å·²æˆä¸ºå‰ç«¯å’Œåç«¯åº”ç”¨ç¨‹åºçš„ç½‘ç»œâ€œé€šç”¨è¯­è¨€â€ã€‚è¿™äº§ç”Ÿäº†ä»¤äººæ•¬ç•çš„é¡¹ç›®ï¼Œå¦‚ <a href="https://angular.cn/">Angular</a>ï¼ŒReact å’Œ Vueï¼Œå®ƒä»¬æé«˜äº†å¼€å‘äººå‘˜çš„å·¥ä½œæ•ˆç‡ï¼Œå¹¶èƒ½å¤Ÿæ„å»ºå¿«é€Ÿï¼Œå¯æµ‹è¯•å’Œå¯æ‰©å±•çš„å‰ç«¯åº”ç”¨ç¨‹åºã€‚ç„¶è€Œï¼Œè™½ç„¶ Nodeï¼ˆå’ŒæœåŠ¡å™¨ç«¯ JavaScript ï¼‰å­˜åœ¨å¤§é‡ä¼˜ç§€çš„åº“ï¼Œå¸®åŠ©å™¨å’Œå·¥å…·ï¼Œä½†å®ƒä»¬éƒ½æ²¡æœ‰æœ‰æ•ˆåœ°è§£å†³ä¸»è¦é—®é¢˜ - æ¶æ„ã€‚</p><p>â€‹Nest æä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„åº”ç”¨ç¨‹åºæ¶æ„ï¼Œå…è®¸å¼€å‘äººå‘˜å’Œå›¢é˜Ÿåˆ›å»ºé«˜åº¦å¯æµ‹è¯•ï¼Œå¯æ‰©å±•ï¼Œæ¾æ•£è€¦åˆä¸”æ˜“äºç»´æŠ¤çš„åº”ç”¨ç¨‹åºã€‚</p><h2 id="æµè¡Œè¶‹åŠ¿"><a href="#æµè¡Œè¶‹åŠ¿" class="headerlink" title="æµè¡Œè¶‹åŠ¿"></a>æµè¡Œè¶‹åŠ¿</h2><h3 id="npmä¸‹è½½é‡"><a href="#npmä¸‹è½½é‡" class="headerlink" title="npmä¸‹è½½é‡"></a>npmä¸‹è½½é‡</h3><img src="https://i.loli.net/2020/03/02/yFtbpaICvz9mlEJ.png" style="zoom:60%;" /><h3 id="starè¶‹åŠ¿"><a href="#starè¶‹åŠ¿" class="headerlink" title="starè¶‹åŠ¿"></a>starè¶‹åŠ¿</h3><img src="https://i.loli.net/2020/03/02/eC8Nitx2Y4QcKwL.png" style="zoom:60%;" /><h2 id="å»ºç«‹æ–°é¡¹ç›®"><a href="#å»ºç«‹æ–°é¡¹ç›®" class="headerlink" title="å»ºç«‹æ–°é¡¹ç›®"></a>å»ºç«‹æ–°é¡¹ç›®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm i -g @nestjs/cli</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">nest new MyNest</span></span><br></pre></td></tr></table></figure><img src="https://i.loli.net/2020/03/02/vyuW5OdrCiSHNPe.png" style="zoom: 67%;" /><h2 id="æ ¸å¿ƒæ–‡ä»¶"><a href="#æ ¸å¿ƒæ–‡ä»¶" class="headerlink" title="æ ¸å¿ƒæ–‡ä»¶"></a>æ ¸å¿ƒæ–‡ä»¶</h2><p>å°†åˆ›å»º <code>project</code> ç›®å½•ï¼Œ å®‰è£…nodeæ¨¡å—å’Œä¸€äº›å…¶ä»–æ ·æ¿æ–‡ä»¶ï¼Œå¹¶å°†åˆ›å»ºä¸€ä¸ª <code>src</code> ç›®å½•ï¼Œç›®å½•ä¸­åŒ…å«å‡ ä¸ªæ ¸å¿ƒæ–‡ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">â”œâ”€â”€ app.controller.ts // å¸¦æœ‰å•ä¸ªè·¯ç”±çš„åŸºæœ¬æ§åˆ¶å™¨ç¤ºä¾‹ã€‚</span><br><span class="line">â”œâ”€â”€ app.module.ts // åº”ç”¨ç¨‹åºçš„æ ¹æ¨¡å—ã€‚</span><br><span class="line">â””â”€â”€ main.ts // åº”ç”¨ç¨‹åºå…¥å£æ–‡ä»¶ã€‚å®ƒä½¿ç”¨ NestFactory ç”¨æ¥åˆ›å»º Nest åº”ç”¨å®ä¾‹ã€‚</span><br></pre></td></tr></table></figure><p><code>main.ts</code> åŒ…å«ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå®ƒè´Ÿè´£<strong>å¼•å¯¼</strong>æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NestFactory</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApplicationModule</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.module&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">bootstrap</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> app = <span class="keyword">await</span> <span class="title class_">NestFactory</span>.<span class="title function_">create</span>(<span class="title class_">ApplicationModule</span>);</span><br><span class="line">  <span class="keyword">await</span> app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">bootstrap</span>();</span><br></pre></td></tr></table></figure><p>è¦åˆ›å»ºä¸€ä¸ª Nest åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>NestFactory</code> æ ¸å¿ƒç±»ã€‚<code>NestFactory</code> æš´éœ²äº†ä¸€äº›é™æ€æ–¹æ³•ç”¨äºåˆ›å»ºåº”ç”¨å®ä¾‹ã€‚<code>create()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªå®ç° <code>INestApplication</code> æ¥å£çš„å¯¹è±¡ï¼Œå¹¶æä¾›ä¸€ç»„å¯ç”¨çš„æ–¹æ³•ã€‚åœ¨ä¸Šé¢çš„ <code>main.ts</code> ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åªæ˜¯å¯åŠ¨äº† HTTP æœåŠ¡å™¨ï¼Œå®ƒå…è®¸åº”ç”¨ç¨‹åºç­‰å¾…å…¥ç«™ HTTP è¯·æ±‚ã€‚</p><h2 id="è¿è¡Œåº”ç”¨ç¨‹åº"><a href="#è¿è¡Œåº”ç”¨ç¨‹åº" class="headerlink" title="è¿è¡Œåº”ç”¨ç¨‹åº"></a>è¿è¡Œåº”ç”¨ç¨‹åº</h2><p>å®‰è£…è¿‡ç¨‹å®Œæˆåï¼Œæ‚¨å¯ä»¥åœ¨ç³»ç»Ÿå‘½ä»¤æç¤ºç¬¦ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä»¥å¯åŠ¨åº”ç”¨ç¨‹åºç›‘å¬å…¥ç«™ HTTP è¯·æ±‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm run start</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤åœ¨ <code>src</code> ç›®å½•ä¸­çš„ <code>main.ts</code> æ–‡ä»¶ä¸­å®šä¹‰çš„ç«¯å£ä¸Šå¯åŠ¨ HTTP æœåŠ¡å™¨ã€‚åœ¨åº”ç”¨ç¨‹åºè¿è¡Œæ—¶, æ‰“å¼€æµè§ˆå™¨å¹¶è®¿é—® <code>http://localhost:3000/</code>ã€‚ ä½ åº”è¯¥çœ‹åˆ° <code>Hello world!</code> ä¿¡æ¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nest.js </tag>
            
            <tag> server </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç©è½¬ React Native è‡ªå®šä¹‰å­—ä½“</title>
      <link href="/78713277e253/"/>
      <url>/78713277e253/</url>
      
        <content type="html"><![CDATA[<ol><li><p>ä¸‹è½½<a href="http://hao.ziticq.com/">å…è´¹å•†ç”¨å­—ä½“</a></p><blockquote><p>æ³•æ£ä½“ï¼šé“¾æ¥:<a href="https://pan.baidu.com/s/1M-CDEqsJ06qj-42uRyF0WA">https://pan.baidu.com/s/1M-CDEqsJ06qj-42uRyF0WA</a>  å¯†ç :83er</p></blockquote></li><li><p>ä½¿ç”¨ FontLab æŸ¥çœ‹å­—ä½“çš„ <code>fontFamily</code></p><blockquote><p>FontLab ç ´è§£ç‰ˆ Macï¼š</p><p>é“¾æ¥:<a href="https://pan.baidu.com/s/1Wb3xgB9mJqF4YGX0xXddMg">https://pan.baidu.com/s/1Wb3xgB9mJqF4YGX0xXddMg</a>  å¯†ç :1cfb</p></blockquote><img src="https://i.loli.net/2020/03/01/m9A5CK2cZMYswBF.png"  style="zoom:40%;" /></li><li><p>å°†å­—ä½“æ”¾åˆ°æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼š</p></li><li><p>åœ¨æ ¹ç›®å½•æ–°å»º <code>react-naitve.config.js</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">project</span>: &#123;</span><br><span class="line">    <span class="attr">ios</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">android</span>: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">assets</span>: [<span class="string">&#x27;./fonts&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨æ ¹ç›®å½•æ‰§è¡Œ <code>react-native link</code> å‘½ä»¤</p></li><li><p>ä½¿ç”¨å­—ä½“ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¨å±€</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TextRender</span> = <span class="title class_">Text</span>.<span class="property">render</span></span><br><span class="line"><span class="title class_">Text</span>.<span class="property">render</span> = <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> originText = <span class="title class_">TextRender</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">  <span class="keyword">const</span> &#123; style &#125; = originText.<span class="property">props</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">React</span>.<span class="title function_">cloneElement</span>(originText, &#123;</span><br><span class="line">    <span class="attr">allowFontScaling</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">style</span>: [&#123; <span class="attr">fontFamily</span>: <span class="string">&#x27;Baguette&#x27;</span> &#125;, style],</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å±€éƒ¨</span></span><br><span class="line">&lt;<span class="title class_">Text</span> style=&#123;&#123; <span class="attr">fontSize</span>: <span class="number">50</span>, <span class="attr">fontFamily</span>: <span class="string">&#x27;Baguette&#x27;</span> &#125;&#125;&gt; æ³•æ£ä½“ğŸ¥– &lt;/<span class="title class_">Text</span>&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ•ˆæœï¼š</p><img src="https://i.loli.net/2020/03/01/6YZlpi3ar87LKQd.jpg" alt="WechatIMG1166.jpeg" style="zoom:50%;" /></li></ol><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><ul><li><a href="https://github.com/react-native-training/react-native-fonts">React Native ä¸­å¼€ç®±å³ç”¨çš„å­—ä½“</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> æ˜é‡‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Native é›†æˆ CodePush æŒ‡å—</title>
      <link href="/2167a27028fb/"/>
      <url>/2167a27028fb/</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.loli.net/2020/02/25/dLMXty7iYKnVk35.png"></p><p>ç›®å‰ç°å­˜çš„çƒ­æ›´æ–°æ–¹æ¡ˆæœ‰è…¾è®¯çš„ Bugly åº”ç”¨å‡çº§](<a href="https://bugly.qq.com/v2/products/upgrade)%E3%80%81React">https://bugly.qq.com/v2/products/upgrade)ã€React</a> Native ä¸­æ–‡ç½‘çš„Pushy](<a href="https://update.reactnative.cn/home)%E3%80%81%E5%BE%AE%E8%BD%AF%E7%9A%84[CodePush](https://bre.is/r3Y9hJvB)">https://update.reactnative.cn/home)ã€å¾®è½¯çš„[CodePush](https://bre.is/r3Y9hJvB)</a> å’Œç”¨æ¥æ­å»ºç§æœçš„ <a href="https://github.com/lisong/code-push-server">code-push-server</a>ã€‚</p><p>æœ¬æ–‡åˆ†äº«çš„æ˜¯åŸºäºå¾®è½¯ AppCenter çš„ CodePush æœåŠ¡å®ç°çƒ­æ›´æ–°ï¼Œè¿™ä¸ªæ¯”è¾ƒæœ‰ä»£è¡¨æ€§ï¼Œä¹Ÿæ–¹ä¾¿å„ä½è¯»è€…å¤§å¤§å®è·µã€‚å½“ç„¶é‰´äºå›½å†…çš„ç½‘ç»œç¯å¢ƒï¼ŒåæœŸä¼šå‘å¸ƒä¸€ç¯‡å¦‚ä½•åŸºäº <code>code-push-server</code> å®ç°çƒ­æ›´æ–°åŠŸèƒ½ã€‚</p><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>Xcodeï¼šVersion 11.3.1 (11C504)</li><li>react-nativeï¼š0.61.5</li><li>react-native-code-push: 6.1.0</li><li>appcenter-cliï¼š2.3.3</li></ul><h2 id="CodePushä»‹ç»"><a href="#CodePushä»‹ç»" class="headerlink" title="CodePushä»‹ç»"></a>CodePushä»‹ç»</h2><p>CodePush æ˜¯ä¸€ä¸ª App Center äº‘æœåŠ¡ï¼Œä½¿ Apache Cordova å’Œ React Native å¼€å‘äººå‘˜å¯ä»¥å°†ç§»åŠ¨åº”ç”¨ç¨‹åºæ›´æ–°ç›´æ¥éƒ¨ç½²åˆ°å…¶ç”¨æˆ·çš„è®¾å¤‡ä¸Šã€‚å®ƒå……å½“ä¸­å¤®å­˜å‚¨åº“çš„è§’è‰²ï¼Œå¼€å‘äººå‘˜å¯ä»¥å°†æŸäº›æ›´æ–°ï¼ˆä¾‹å¦‚JSï¼ŒHTMLï¼ŒCSSå’Œå›¾åƒæ›´æ”¹ï¼‰å‘å¸ƒåˆ°è¯¥å­˜å‚¨åº“ï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºå¯ä»¥ï¼ˆä½¿ç”¨æä¾›çš„å®¢æˆ·ç«¯SDKï¼‰ä»ä¸­æŸ¥è¯¢æ›´æ–°ã€‚è¿™ä½¿ä½ å¯ä»¥ä¸æœ€ç»ˆç”¨æˆ·å»ºç«‹æ›´å…·ç¡®å®šæ€§å’Œç›´æ¥çš„å‚ä¸åº¦æ¨¡å‹ï¼ŒåŒæ—¶è§£å†³é”™è¯¯å’Œ&#x2F;æˆ–æ·»åŠ ä¸€äº›å°çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¸éœ€è¦ä½ é‡å»ºäºŒè¿›åˆ¶æ–‡ä»¶å’Œ&#x2F;æˆ–é€šè¿‡ä»»ä½•å…¬å…±åº”ç”¨å•†åº—é‡æ–°åˆ†å‘äºŒè¿›åˆ¶æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ App Center ä¸Šåˆ›å»ºçš„æ‰€æœ‰ React Native åº”ç”¨ç¨‹åºéƒ½å¯ç”¨äº† CodePushã€‚</p><blockquote><p>æ³¨æ„ï¼šå¯¹äºAndroidè®¾å¤‡ï¼ŒCodePushä»…åœ¨å…¼å®¹TLS 1.2çš„è®¾å¤‡ä¸Šè¿è¡Œ</p></blockquote><h3 id="1-å®‰è£…-App-Center-CLI"><a href="#1-å®‰è£…-App-Center-CLI" class="headerlink" title="1.å®‰è£… App Center CLI"></a>1.å®‰è£… App Center CLI</h3><p>ä½ å¯ä»¥ä½¿ç”¨ App Center CLI ç®¡ç† CodePush çš„å¤§å¤šæ•°åŠŸèƒ½ã€‚è¦å®‰è£… CLIï¼Œè¯·æ‰“å¼€ç»ˆç«¯çª—å£æˆ–å‘½ä»¤æç¤ºç¬¦å¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g appcenter-cli</span><br></pre></td></tr></table></figure><p>æˆåŠŸå®‰è£… App Center CLI åï¼Œæ‰§è¡Œ<code>appcenter login</code>å‘½ä»¤ä¸ºä½ çš„ App Center å¸æˆ·è¯¦ç»†ä¿¡æ¯é…ç½® CLIï¼š</p><p><img src="https://i.loli.net/2020/02/26/TwJyWsBOK5trHmj.png"></p><h3 id="2-åº”ç”¨ç®¡ç†"><a href="#2-åº”ç”¨ç®¡ç†" class="headerlink" title="2.åº”ç”¨ç®¡ç†"></a>2.åº”ç”¨ç®¡ç†</h3><p>éƒ¨ç½²æ›´æ–°ä¹‹å‰ï¼Œå¿…é¡»ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨ App Center åˆ›å»ºåº”ç”¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">appcenter apps create -d &lt;appDisplayName&gt; -o &lt;operatingSystem&gt; -p &lt;platform&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ‚¨çš„åº”ç”¨åŒæ—¶é’ˆå¯¹ Android å’Œ iOSï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨ä½¿ç”¨ CodePush åˆ›å»ºå•ç‹¬çš„åº”ç”¨ã€‚æ¯ä¸ªå¹³å°ä¸€ä¸ªã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥åˆ†åˆ«ç®¡ç†å’Œå‘å¸ƒæ›´æ–°ï¼Œä»é•¿è¿œæ¥çœ‹ï¼Œè¿™ä¼šä½¿äº‹æƒ…å˜å¾—æ›´ç®€å•ã€‚å¤§å¤šæ•°äººåªæ˜¯åœ¨åº”ç”¨åç§°åç¼€<code>-Android</code>å’Œ<code>-iOS</code>ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">appcenter apps create -d MyApp-Android -o Android -p React-Native</span><br><span class="line">appcenter apps create -d MyApp-iOS -o iOS -p React-Native</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šåœ¨ Android å’Œ iOS ä¸Šä½¿ç”¨ç›¸åŒçš„åº”ç”¨ç¨‹åºå¯èƒ½ä¼šå¯¼è‡´å®‰è£…å¼‚å¸¸ï¼Œå› ä¸ºä¸º iOS ç”Ÿæˆçš„ CodePush æ›´æ–°åŒ…å°†å…·æœ‰ä¸ä¸º Android ç”Ÿæˆçš„æ›´æ–°ä¸åŒçš„å†…å®¹ã€‚</p></blockquote><blockquote><p>é€šè¿‡ <code>appcenter apps list</code> å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„åº”ç”¨ã€‚</p></blockquote><blockquote><p>åœ¨Appä¸­å¿ƒCLIçš„ä¸€ä¸ªé‡è¦çš„æ–°åŠŸèƒ½æ˜¯è®¾ç½®ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„èƒ½åŠ›<strong>å½“å‰åº”ç”¨ç¨‹åº</strong>ä½¿ç”¨<code>appcenter apps set-current &lt;ownerName&gt;/&lt;appName&gt;</code>ã€‚é€šè¿‡å°†ä¸€ä¸ªåº”ç”¨ç¨‹åºè®¾ç½®ä¸ºå½“å‰åº”ç”¨ç¨‹åºï¼Œæ‚¨æ— éœ€<code>-a</code>åœ¨å…¶ä»–CLIå‘½ä»¤ä¸­ä½¿ç”¨è¯¥æ ‡å¿—ã€‚ä¾‹å¦‚ï¼Œ<code>appcenter codepush deployment list -a &lt;ownerName&gt;/&lt;appName&gt;</code>å¯ä»¥å°†å‘½ä»¤ç¼©çŸ­<code>appcenter codepush deployment list</code>ä¸ºè®¾ç½®å½“å‰åº”ç”¨ç¨‹åºçš„æ—¶é—´ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ¥æ£€æŸ¥å“ªä¸ªåº”ç”¨ç¨‹åºè¢«è®¾ç½®ä¸ºæ‚¨å¸æˆ·çš„å½“å‰åº”ç”¨ç¨‹åº<code>appcenter apps get-current</code>ã€‚è®¾ç½®å½“å‰åº”ç”¨ç¨‹åºå¯ä»¥ç¼©çŸ­å¤§å¤šæ•°CLIå‘½ä»¤çš„é”®å…¥æ—¶é—´ã€‚</p></blockquote><p>ä½¿ç”¨ <code>code-push-cli</code>ï¼Œåº”ç”¨ç¨‹åºä¼šè‡ªåŠ¨è¿›è¡Œä¸¤æ¬¡éƒ¨ç½²ï¼ˆ<code>Staging</code>å’Œ <code>Production</code>ï¼‰ã€‚åœ¨ App Center ä¸­ï¼Œä½ å¿…é¡»ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è‡ªè¡Œåˆ›å»ºå®ƒä»¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">appcenter codepush deployment add -a &lt;ownerName&gt;/&lt;appName&gt; Staging</span><br><span class="line">appcenter codepush deployment add -a &lt;ownerName&gt;/&lt;appName&gt; Production</span><br></pre></td></tr></table></figure><p>åˆ›å»ºéƒ¨ç½²åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ¥è®¿é—®ä¸¤ä¸ªéƒ¨ç½²çš„éƒ¨ç½²å¯†é’¥<code>appcenter codepush deployment list --displayKeys</code>ï¼Œæ‚¨å¯ä»¥å¼€å§‹é€šè¿‡å®ƒä»¬å„è‡ªçš„SDKï¼ˆç”¨äº<a href="https://docs.microsoft.com/en-us/appcenter/distribution/codepush/cordova">Cordova</a>å’Œ<a href="https://docs.microsoft.com/en-us/appcenter/distribution/codepush/react-native">React Nativeçš„</a>è¯¦ç»†ä¿¡æ¯ï¼‰æ¥é…ç½®ç§»åŠ¨å®¢æˆ·ç«¯ã€‚</p><h3 id="3-ä¿®æ”¹versionNam"><a href="#3-ä¿®æ”¹versionNam" class="headerlink" title="3.ä¿®æ”¹versionNam"></a>3.ä¿®æ”¹versionNam</h3><p>åœ¨ <code> android/app/build.gradle</code> ä¸­æœ‰ä¸ª <code>android.defaultConfig.versionName</code> å±æ€§ï¼ˆåœ¨ <code>ios/**/Info.plist</code> æ˜¯ <code>&lt;key&gt;CFBundleShortVersionString&lt;/key&gt;</code> å±æ€§ ï¼‰ï¼›æˆ‘ä»¬éœ€è¦æŠŠåº”ç”¨ç‰ˆæœ¬æ”¹æˆ <code>1.0.0</code>ï¼ˆé»˜è®¤<code>1.0</code>ï¼Œä½†æ˜¯ <code>codepush</code> éœ€è¦ä¸‰ä½æ•°ï¼‰</p><h3 id="3-å‘å¸ƒåº”ç”¨æ›´æ–°"><a href="#3-å‘å¸ƒåº”ç”¨æ›´æ–°" class="headerlink" title="3.å‘å¸ƒåº”ç”¨æ›´æ–°"></a>3.å‘å¸ƒåº”ç”¨æ›´æ–°</h3><p>æ›´æ”¹åº”ç”¨ç¨‹åºçš„ä»£ç æˆ–èµ„äº§åï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹è¯´æ˜ä½¿ç”¨ App Center CLI å°†æ›´æ–°å‘å¸ƒåˆ°App Centerã€‚</p><p>æ‰§è¡Œ App Center CLI <code>release-react </code> å‘½ä»¤ä»¥æ†ç»‘åº”ç”¨ç¨‹åºçš„ä»£ç å’Œèµ„äº§æ–‡ä»¶ï¼Œç„¶åå°†å®ƒä»¬ä½œä¸ºæ–°ç‰ˆæœ¬å‘å¸ƒåˆ° App Center æœåŠ¡å™¨ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">appcenter codepush release-react -a &lt;ownerName&gt;/&lt;appName&gt; -d Staging -t 1.0.0 -m  --development false --description &lt;description&gt;</span><br></pre></td></tr></table></figure><ul><li><code>[-a|--app &lt;ownerName&gt;/&lt;appName&gt;]</code>:  æŒ‡å®šåº”ç”¨</li><li><code>[-d|--deployment-name &lt;deploymentName&gt;</code>]:  æ­¤å‚æ•°æŒ‡å®šè¦å°†æ›´æ–°å‘å¸ƒåˆ°çš„éƒ¨ç½²ã€‚å®ƒé»˜è®¤ä¸º<code>Staging</code>ï¼Œä½†æ˜¯å½“æ‚¨å‡†å¤‡éƒ¨ç½²åˆ°<code>Production</code>æˆ–æ‚¨è‡ªå·±çš„è‡ªå®šä¹‰éƒ¨ç½²ä¹‹ä¸€æ—¶ï¼Œåªéœ€æ˜¾å¼è®¾ç½®æ­¤å‚æ•°å³å¯ã€‚</li><li><code>[-t|--target-binary-version &lt;targetBinaryVersion&gt;]</code>:  æŒ‡å®šè¦æ›´æ–°çš„åº”ç”¨çš„åŸç”Ÿç‰ˆæœ¬</li><li><code>[-m|--mandatory]</code>:  æ˜¯å¼ºåˆ¶æ›´æ–°ï¼Œé»˜è®¤ <code>false</code></li><li><code>[--development]</code>: æ­¤å‚æ•°æŒ‡å®šæ˜¯å¦ç”Ÿæˆæœªç¼©å°çš„å¼€å‘JSåŒ…ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸º<code>false</code>ç¦ç”¨è­¦å‘Šå¹¶ç¼©å°åŒ…çš„ä½ç½®ã€‚</li><li><code>[--description &lt;description&gt;</code>]:  æ­¤å‚æ•°ä¸ºéƒ¨ç½²æä¾›äº†å¯é€‰çš„â€œæ›´æ”¹æ—¥å¿—â€ã€‚è¯¥å€¼å°†å¾€è¿”ä¼ é€ç»™å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿åœ¨æ£€æµ‹åˆ°æ›´æ–°æ—¶ï¼Œæ‚¨çš„åº”ç”¨å¯ä»¥é€‰æ‹©å°†å…¶æ˜¾ç¤ºç»™æœ€ç»ˆç”¨æˆ·ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡â€œæ–°åŠŸèƒ½â€å¯¹è¯æ¡†ï¼‰ã€‚è¯¥å­—ç¬¦ä¸²æ¥å—è¯¸å¦‚<code>\n</code>å’Œçš„æ§åˆ¶å­—ç¬¦ï¼Œ<code>\t</code>å› æ­¤æ‚¨å¯ä»¥åœ¨æè¿°ä¸­åŒ…æ‹¬ç©ºæ ¼æ ¼å¼ï¼Œä»¥æé«˜å¯è¯»æ€§ã€‚</li></ul><blockquote><p>CodePushå®¢æˆ·ç«¯æ”¯æŒå·®å¼‚æ›´æ–°ï¼Œå› æ­¤ï¼Œå³ä½¿æ‚¨åœ¨æ¯æ¬¡æ›´æ–°ä¸­é‡Šæ”¾JSæ†ç»‘åŒ…å’Œèµ„äº§ï¼Œæœ€ç»ˆç”¨æˆ·ä¹Ÿåªä¼šå®é™…ä¸‹è½½ä»–ä»¬éœ€è¦çš„æ–‡ä»¶ã€‚è¯¥æœåŠ¡ä¼šè‡ªåŠ¨å¤„ç†æ­¤é—®é¢˜ï¼Œå› æ­¤æ‚¨å¯ä»¥ä¸“æ³¨äºåˆ›å»ºå‡ºè‰²çš„åº”ç”¨ç¨‹åºï¼Œè€Œæˆ‘ä»¬ä¼šæ‹…å¿ƒä¼˜åŒ–æœ€ç»ˆç”¨æˆ·çš„ä¸‹è½½ã€‚</p></blockquote><h2 id="React-Native-Client-SDK"><a href="#React-Native-Client-SDK" class="headerlink" title="React Native Client SDK"></a>React Native Client SDK</h2><p>è¯¥æ’ä»¶ä¸º CodePush æœåŠ¡æä¾›äº†å®¢æˆ·ç«¯é›†æˆï¼Œä½¿ä½ å¯ä»¥è½»æ¾åœ°å‘ä½ çš„ React Native åº”ç”¨æ·»åŠ åŠ¨æ€æ›´æ–°ä½“éªŒã€‚</p><blockquote><p>æ³¨æ„ï¼šä»¥ä¸‹é…ç½®å‡åŸºäº react-native 0.60 ç‰ˆæœ¬ã€‚</p></blockquote><h3 id="å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"><a href="#å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ" class="headerlink" title="å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"></a>å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3><p>React Native åº”ç”¨ç¨‹åºç”± JavaScript æ–‡ä»¶å’Œä»»ä½•ç›¸å…³çš„å›¾ç‰‡ç»„æˆï¼Œå®ƒä»¬ç”±æ‰“åŒ…ç¨‹åº <a href="https://facebook.github.io/metro/">metro</a> æ†ç»‘åœ¨ä¸€èµ·, å¹¶ä½œä¸ºç‰¹å®šäºå¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆ<code>.ipa</code> æˆ– <code>.apk</code> æ–‡ä»¶ï¼‰çš„ä¸€éƒ¨åˆ†è¿›è¡Œåˆ†å‘ã€‚å‘è¡Œè¯¥åº”ç”¨ç¨‹åºæ—¶ï¼Œæ›´æ–° JavaScript ä»£ç ï¼ˆä¾‹å¦‚è¿›è¡Œé”™è¯¯ä¿®å¤ï¼Œæ·»åŠ æ–°åŠŸèƒ½ï¼‰æˆ–æ›´æ–°å›¾ç‰‡èµ„æºè¦æ±‚ä½ é‡æ–°ç¼–è¯‘å¹¶é‡æ–°åˆ†å‘æ•´ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸å•†åº—ç›¸å…³çš„æ‰€æœ‰æ—¶é—´ã€‚</p><p>é€šè¿‡ä½¿ä½ çš„ JavaScript å’Œå›¾ç‰‡èµ„æºä¸æ‚¨å‘å¸ƒåˆ° CodePush æœåŠ¡å™¨çš„æ›´æ–°åŒæ­¥ï¼ŒCodePush æ’ä»¶å¯å¸®åŠ©ä½ ç«‹å³åœ¨æœ€ç»ˆç”¨æˆ·é¢å‰è·å¾—äº§å“æ”¹è¿›ã€‚</p><p>ä¸ºäº†ç¡®ä¿æ‚¨çš„æœ€ç»ˆç”¨æˆ·å§‹ç»ˆæ‹¥æœ‰ä½ çš„åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¿è¡Œç‰ˆæœ¬ï¼ŒCodePush æ’ä»¶ä¼šç»´æŠ¤å…ˆå‰æ›´æ–°çš„å‰¯æœ¬ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨ä¸å°å¿ƒæ¨é€äº†åŒ…å«å´©æºƒçš„æ›´æ–°ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨å›æ»šã€‚è¿™æ ·ï¼Œä½ å¯ä»¥æ”¾å¿ƒï¼Œæ–°å‘ç°çš„å‘è¡Œç‰ˆä¸ä¼šå¯¼è‡´ç”¨æˆ·è¢«é˜»å¡ã€‚</p><blockquote><p>æ³¨æ„ï¼šä»»ä½•æ¶‰åŠæœ¬æœºä»£ç çš„äº§å“æ›´æ”¹ï¼ˆä¾‹å¦‚ï¼Œä¿®æ”¹<code>AppDelegate.m</code>&#x2F;<code>MainActivity.java</code>ã€æ·»åŠ  <code>ttf</code> æˆ–æ·»åŠ åŸç”Ÿæ’ä»¶ï¼‰éƒ½æ— æ³•é€šè¿‡ CodePush åˆ†å‘ï¼Œå› æ­¤å¿…é¡»é€šè¿‡ç›¸åº”çš„å•†åº—è¿›è¡Œæ›´æ–°ã€‚</p></blockquote><h3 id="æ”¯æŒçš„React-Nativeå¹³å°"><a href="#æ”¯æŒçš„React-Nativeå¹³å°" class="headerlink" title="æ”¯æŒçš„React Nativeå¹³å°"></a>æ”¯æŒçš„React Nativeå¹³å°</h3><ul><li>iOSï¼ˆ7ä»¥ä¸Šï¼‰</li><li>Androidï¼ˆ4.1ä»¥ä¸Šï¼‰</li><li>Windowsï¼ˆUWPï¼‰</li></ul><h3 id="å®‰è£…-react-native-code-push"><a href="#å®‰è£…-react-native-code-push" class="headerlink" title="å®‰è£… react-native-code-push"></a>å®‰è£… react-native-code-push</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-native-code-push</span><br></pre></td></tr></table></figure><p>ä¸å…¶ä»–æ‰€æœ‰React Nativeæ’ä»¶ä¸€æ ·ï¼ŒiOS å’Œ Android çš„é›†æˆä½“éªŒä¹Ÿæœ‰æ‰€ä¸åŒï¼Œå› æ­¤è¯·æ ¹æ®æ‚¨çš„åº”ç”¨ç›®æ ‡å¹³å°æ‰§è¡Œä»¥ä¸‹è®¾ç½®æ­¥éª¤ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨åŒæ—¶é’ˆå¯¹ä¸¤ä¸ªå¹³å°ï¼Œå»ºè®®ä¸ºæ¯ä¸ªå¹³å°åˆ›å»ºå•ç‹¬çš„ CodePush åº”ç”¨ç¨‹åºã€‚</p><blockquote><p>æœ¬æŒ‡å—å‡å®šæ‚¨å·²ä½¿ç”¨è¯¥<code>react-native init</code>å‘½ä»¤åˆå§‹åŒ–React Nativeé¡¹ç›®ã€‚</p></blockquote><h3 id="iOSè®¾ç½®"><a href="#iOSè®¾ç½®" class="headerlink" title="iOSè®¾ç½®"></a>iOSè®¾ç½®</h3><p>è·å¾— CodePush æ’ä»¶åï¼Œå¿…é¡»å°†å…¶é›†æˆåˆ° React Native åº”ç”¨ç¨‹åºçš„ Xcode é¡¹ç›®ä¸­å¹¶æ­£ç¡®é…ç½®ã€‚</p><ol><li><p>è¿è¡Œ<code>cd ios &amp;&amp; pod install &amp;&amp; cd ..</code>ä»¥å®‰è£…æ‰€æœ‰å¿…éœ€çš„CocoaPodsä¾èµ–é¡¹ã€‚</p></li><li><p>æ‰“å¼€<code>AppDelegate.m</code>æ–‡ä»¶ï¼Œå¹¶ä¸ºCodePushæ ‡å¤´æ·»åŠ å¯¼å…¥è¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;CodePush/CodePush.h&gt;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥æ‰¾ä»¥ä¸‹ä»£ç è¡Œï¼Œè¯¥ä»£ç ä¸ºç”Ÿäº§ç‰ˆæœ¬çš„ç½‘æ¡¥è®¾ç½®æºURLï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return [[NSBundle mainBundle] URLForResource:@&quot;main&quot; withExtension:@&quot;jsbundle&quot;];</span><br></pre></td></tr></table></figure></li><li><p>ç”¨ä»¥ä¸‹è¡Œæ›¿æ¢å®ƒï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return [CodePush bundleURL];</span><br></pre></td></tr></table></figure><p>æ­¤æ›´æ”¹å°†ä½ çš„åº”ç”¨é…ç½®ä¸ºå§‹ç»ˆåŠ è½½åº”ç”¨JSæ†ç»‘åŒ…çš„æœ€æ–°ç‰ˆæœ¬ã€‚åœ¨é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œè¿™å°†ä¸ä½¿ç”¨è¯¥åº”ç”¨ç¨‹åºç¼–è¯‘çš„æ–‡ä»¶ç›¸å¯¹åº”ã€‚ä½†æ˜¯ï¼Œåœ¨é€šè¿‡CodePushæ¨é€æ›´æ–°åï¼Œè¿™å°†è¿”å›æœ€è¿‘å®‰è£…çš„æ›´æ–°çš„ä½ç½®ã€‚</p><p>é€šå¸¸ï¼Œæ‚¨åªæƒ³ä½¿ç”¨ CodePush æ¥è§£å†³å‘è¡Œç‰ˆæœ¬ä¸­çš„ JS åŒ…ä½ç½®ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨<code>DEBUG</code>é¢„å¤„ç†å™¨å®åœ¨æ˜¯å¦ä½¿ç”¨æ‰“åŒ…ç¨‹åºæœåŠ¡å™¨å’Œ CodePush ä¹‹é—´è¿›è¡ŒåŠ¨æ€åˆ‡æ¢ã€‚è¿™æ ·å¯ä»¥æ›´è½»æ¾åœ°ç¡®ä¿æ‚¨åœ¨ç”Ÿäº§ä¸­è·å¾—æ‰€éœ€çš„æ­£ç¡®è¡Œä¸ºï¼ŒåŒæ—¶ä»å¯ä»¥åœ¨è°ƒè¯•æ—¶ä½¿ç”¨Chromeå¼€å‘å·¥å…·ï¼Œå®æ—¶é‡æ–°åŠ è½½ç­‰ã€‚</p><p>ä½ çš„<code>sourceURLForBridge</code>æ–¹æ³•åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (NSURL *)sourceURLForBridge:(RCTBridge *)bridge</span><br><span class="line">&#123;</span><br><span class="line">  #if DEBUG</span><br><span class="line">    return [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@&quot;index&quot; fallbackResource:nil];</span><br><span class="line">  #else</span><br><span class="line">    return [CodePush bundleURL];</span><br><span class="line">  #endif</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å°†éƒ¨ç½²å¯†é’¥æ·»åŠ åˆ°<code>Info.plist</code>ï¼š</p><p>ä¸ºäº†è®© CodePush è¿è¡Œæ—¶çŸ¥é“åº”è¯¥é’ˆå¯¹å“ªä¸ªéƒ¨ç½²æŸ¥è¯¢æ›´æ–°ï¼Œè¯·æ‰“å¼€ä½ çš„åº”ç”¨çš„ <code>Info.plist</code> æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªåä¸º<code>CodePushDeploymentKey</code>çš„æ–°æ¡ç›®ï¼Œå…¶å€¼æ˜¯ä½ è¦é…ç½®çš„åº”ç”¨çš„ <code>Staging Deployment Key</code>ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ <code>appcenter codepush deployment list -k</code> æ¥æ£€ç´¢è¿™ä¸ªå€¼ï¼ˆè¯¥ <code>-k</code> æ ‡å¿—æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹ä¸ä¼šæ˜¾ç¤ºé”®ï¼‰ï¼Œç„¶åå¤åˆ¶ç›¸å¯¹åº”çš„ <code>Deployment Key</code> å³å¯ã€‚</p><p><img src="https://cloud.githubusercontent.com/assets/116461/11601733/13011d5e-9a8a-11e5-9ce2-b100498ffb34.png"></p><p>ä¸ºäº†æœ‰æ•ˆåˆ©ç”¨ä¸ CodePush åº”ç”¨ç¨‹åºä¸€èµ·åˆ›å»ºçš„ <code>Staging</code> å’Œ <code>Production</code> éƒ¨ç½²ï¼Œè¯·åœ¨å®é™…å°†ä½ çš„åº”ç”¨ç¨‹åºå¯¹ CodePush çš„ä½¿ç”¨ç§»å…¥ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œè¿›è¡Œ<a href="#%E5%A4%9A%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95">å¤šéƒ¨ç½²æµ‹è¯•</a>çš„é…ç½®ã€‚</p><blockquote><p>å¦‚æœæ‚¨éœ€è¦åŠ¨æ€ä½¿ç”¨å…¶ä»–éƒ¨ç½²ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<a href="#%E5%8A%A8%E6%80%81%E9%83%A8%E7%BD%B2%E5%88%86%E9%85%8D">åŠ¨æ€éƒ¨ç½²åˆ†é…</a>åœ¨JSä»£ç ä¸­è¦†ç›–éƒ¨ç½²å¯†é’¥</p></blockquote></li></ol><h3 id="Androidè®¾ç½®"><a href="#Androidè®¾ç½®" class="headerlink" title="Androidè®¾ç½®"></a>Androidè®¾ç½®</h3><p>ä¸ºäº†å°†CodePushé›†æˆåˆ°æ‚¨çš„Androidé¡¹ç›®ä¸­ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p>åœ¨<code>android/app/build.gradle</code>æ–‡ä»¶ä¸­ï¼Œå°†æ–‡ä»¶<code>codepush.gradle</code>æ·»åŠ ä¸ºä¸‹é¢çš„å…¶ä»–æ„å»ºä»»åŠ¡å®šä¹‰ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">apply <span class="attr">from:</span> <span class="string">&quot;../../node_modules/react-native-code-push/android/codepush.gradle&quot;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p><code>MainApplication.java</code>é€šè¿‡ä»¥ä¸‹æ›´æ”¹æ›´æ–°æ–‡ä»¶ä»¥ä½¿ç”¨ CodePushï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">// 1. å¯¼å…¥æ’ä»¶çš„ç±»</span></span><br><span class="line"><span class="keyword">import</span> com.microsoft.codepush.react.CodePush;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApplication</span> <span class="keyword">extends</span> <span class="title class_">Application</span> <span class="keyword">implements</span> <span class="title class_">ReactApplication</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReactNativeHost</span> <span class="variable">mReactNativeHost</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReactNativeHost</span>(<span class="built_in">this</span>) &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// 2. é‡å†™ getJSBundleFile æ–¹æ³•ï¼Œæ¯æ¬¡ app å¯åŠ¨çš„æ—¶å€™è®© CodePush è¿è¡Œæ—¶å†³å®šä»å“ªé‡ŒåŠ è½½ JS bundle</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> String <span class="title function_">getJSBundleFile</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> CodePush.getJSBundleFile();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å°†éƒ¨ç½²å¯†é’¥æ·»åŠ åˆ°<code>strings.xml</code>ï¼š</p><p>ä¸ºäº†è®© CodePush è¿è¡Œæ—¶çŸ¥é“å®ƒåº”è¯¥æŸ¥è¯¢å“ªäº›éƒ¨ç½²æ›´æ–°ï¼Œè¯·æ‰“å¼€æ‚¨çš„åº”ç”¨ç¨‹åºçš„ <code>string.xml</code> æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªåä¸º <code>CodePushDeploymentKey</code> çš„æ–°å­—ç¬¦ä¸²ï¼Œå®ƒçš„å€¼æ˜¯åº”ç”¨çš„ <code>Staging</code> éƒ¨ç½²ã€‚ä½ å¯ä»¥é€šè¿‡ <code>appcenter deployment list &lt;ownerName&gt;/&lt;appName&gt; -k</code> è·å–è¯¥å€¼ã€‚</p><p><img src="https://cloud.githubusercontent.com/assets/116461/11601733/13011d5e-9a8a-11e5-9ce2-b100498ffb34.png"></p><p>æ‚¨<code>strings.xml</code>åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;app_name&quot;</span>&gt;</span>AppName<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">moduleConfig</span>=<span class="string">&quot;true&quot;</span> <span class="attr">name</span>=<span class="string">&quot;CodePushDeploymentKey&quot;</span>&gt;</span>DeploymentKey<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†æœ‰æ•ˆåˆ©ç”¨ä¸CodePushåº”ç”¨ç¨‹åºä¸€èµ·åˆ›å»ºçš„<code>Staging</code>å’Œ<code>Production</code>éƒ¨ç½²ï¼Œè¯·åœ¨å®é™…å°†æ‚¨çš„åº”ç”¨ç¨‹åºå¯¹CodePushçš„ä½¿ç”¨ç§»å…¥ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œè¯·å‚è€ƒä¸‹é¢çš„<a href="#%E5%A4%9A%E9%83%A8%E7%BD%B2%E6%B5%8B%E8%AF%95">å¤šéƒ¨ç½²æµ‹è¯•</a>æ–‡æ¡£ã€‚</p><blockquote><p>å¦‚æœæ‚¨éœ€è¦åŠ¨æ€ä½¿ç”¨å…¶ä»–éƒ¨ç½²ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<a href="#%E5%8A%A8%E6%80%81%E9%83%A8%E7%BD%B2%E5%88%86%E9%85%8D">åŠ¨æ€éƒ¨ç½²åˆ†é…</a>åœ¨JSä»£ç ä¸­è¦†ç›–éƒ¨ç½²å¯†é’¥</p></blockquote></li></ol><h3 id="ä½¿ç”¨æ’ä»¶"><a href="#ä½¿ç”¨æ’ä»¶" class="headerlink" title="ä½¿ç”¨æ’ä»¶"></a>ä½¿ç”¨æ’ä»¶</h3><p>ä¸‹è½½å¹¶é“¾æ¥äº† CodePush æ’ä»¶ï¼Œå¹¶ä¸”ä¸ºä½ çš„åº”ç”¨ç¨‹åºè¯¢é—® CodePush ä»ä½•å¤„è·å–æ­£ç¡®çš„ JS bundle åŒ…åï¼Œå‰©ä¸‹çš„å”¯ä¸€ä¸€ä»¶äº‹å°±æ˜¯å‘ä½ çš„åº”ç”¨ç¨‹åºæ·»åŠ å¿…è¦çš„ä»£ç ï¼Œä»¥æ§åˆ¶ä»¥ä¸‹ç­–ç•¥ï¼š</p><ol><li>ä»€ä¹ˆæ—¶å€™ï¼ˆå¤šä¹…ï¼‰æ£€æŸ¥ä¸€æ¬¡æ›´æ–°ï¼Ÿï¼ˆä¾‹å¦‚ï¼Œåº”ç”¨ç¨‹åºå¯åŠ¨ï¼Œåœ¨è®¾ç½®é¡µé¢ä¸­å•å‡»æŒ‰é’®æˆ–æŒ‰å›ºå®šæ—¶é—´é—´éš”å®šæœŸè¿›è¡Œï¼‰</li><li>å½“æœ‰å¯ç”¨æ›´æ–°æ—¶ï¼Œå¦‚ä½•å°†å…¶å‘ˆç°ç»™æœ€ç»ˆç”¨æˆ·ï¼Ÿ</li></ol><p>æœ€ç®€å•çš„æ–¹å¼æ˜¯ <code>CodePush-ify</code> åº”ç”¨ç¨‹åºçš„æ ¹ç»„ä»¶ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä¸€ä¸‹ä¸¤ä¸ªé€‰é¡¹ä¹‹ä¸€ï¼š</p><ul><li><p>é€‰é¡¹1ï¼šå°†æ‚¨çš„æ ¹ç»„ä»¶ä¸ codePush é«˜é˜¶ç»„ä»¶åŒ…è£…åœ¨ä¸€èµ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> codePush <span class="keyword">from</span> <span class="string">&#x27;react-native-code-push&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;&#125;</span><br><span class="line"><span class="title class_">App</span> = <span class="title function_">codePush</span>(<span class="title class_">App</span>)</span><br></pre></td></tr></table></figure></li><li><p>é€‰é¡¹2ï¼šä½¿ç”¨ <a href="https://github.com/wycats/javascript-decorators">ES7è£…é¥°å™¨ </a>è¯­æ³•ï¼š</p><blockquote><p>Babel 6.x å°šä¸æ”¯æŒè£…é¥°å™¨ã€‚æ‚¨å¯èƒ½éœ€è¦é€šè¿‡å®‰è£…å’Œä½¿ç”¨ <a href="https://github.com/skevy/babel-preset-react-native-stage-0#babel-preset-react-native-stage-0">babel-preset-react-native-stage-0</a> æ¥å¯ç”¨è£…é¥°å™¨ã€‚</p></blockquote><blockquote><p>Babel 7.x æ”¯æŒè£…é¥°å™¨è¯­æ³•ã€‚ä½ å¯ä»¥ä½¿ç”¨ <a href="https://babeljs.io/docs/en/next/babel-plugin-proposal-decorators.html">@babel&#x2F;plugin-proposal-decorators</a> æ¥å¯ç”¨è£…é¥°å™¨ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> codePush <span class="keyword">from</span> <span class="string">&quot;react-native-code-push&quot;</span></span><br><span class="line"></span><br><span class="line">@codePush</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyApp</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒCodePush å°†åœ¨æ¯æ¬¡å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶æ£€æŸ¥æ›´æ–°ã€‚å¦‚æœæœ‰å¯ç”¨æ›´æ–°ï¼Œå®ƒå°†åœ¨ä¸‹ä¸€æ¬¡é‡æ–°å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶ï¼ˆç”±æœ€ç»ˆç”¨æˆ·æˆ–æ“ä½œç³»ç»Ÿæ˜ç¡®æ˜¾ç¤ºï¼‰ä»¥é™é»˜æ–¹å¼ä¸‹è½½å¹¶å®‰è£…ï¼Œä»è€Œç¡®ä¿æœ€ç»ˆç”¨æˆ·è·å¾—æœ€å°‘çš„ä¾µå…¥æ€§ä½“éªŒã€‚å¦‚æœå¿…é¡»ä½¿ç”¨å¯ç”¨çš„æ›´æ–°ï¼Œåˆ™å°†ç«‹å³å®‰è£…è¯¥æ›´æ–°ï¼Œä»¥ç¡®ä¿æœ€ç»ˆç”¨æˆ·å°½å¿«è·å¾—å®ƒã€‚</p><p>å¦‚æœæ‚¨å¸Œæœ›åº”ç”¨ç¨‹åºæ›´å¿«åœ°å‘ç°æ›´æ–°ï¼Œåˆ™è¿˜å¯ä»¥é€‰æ‹©æ¯æ¬¡åº”ç”¨ç¨‹åºä»åå°æ¢å¤æ—¶ä¸ CodePush æœåŠ¡å™¨åŒæ­¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> codePushOptions = &#123; <span class="attr">checkFrequency</span>: codePush.<span class="property">CheckFrequency</span>.<span class="property">ON_APP_RESUME</span> &#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">codePush</span>(codePushOptios)(<span class="title class_">App</span>)</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œå¦‚æœæ‚¨æƒ³å¯¹æ£€æŸ¥å‘ç”Ÿçš„æ—¶é—´è¿›è¡Œç»†ç²’åº¦çš„æ§åˆ¶ï¼ˆä¾‹å¦‚æŒ‰æŒ‰é’®æˆ–å®šæ—¶å™¨é—´éš”ï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <a href="https://bre.is/dPuwHWre">CodePush.sync()</a> éšæ—¶è¿›è¡Œè°ƒç”¨ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>SyncOptions</code> é€šè¿‡ <code>CheckFrequency.MANUAL</code> æ¥å…³é—­ CodePush çš„è‡ªåŠ¨æ£€æŸ¥åŠŸèƒ½:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">View</span>, <span class="title class_">StyleSheet</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> codePush <span class="keyword">from</span> <span class="string">&#x27;react-native-code-push&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AwesomeButton</span> <span class="keyword">from</span> <span class="string">&#x27;react-native-really-awesome-button&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> codePushOptions = &#123; <span class="attr">checkFrequency</span>: codePush.<span class="property">CheckFrequency</span>.<span class="property">MANUAL</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">checkForUpdate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    codePush.<span class="title function_">sync</span>(&#123;</span><br><span class="line">      <span class="attr">updateDialog</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">installMode</span>: codePush.<span class="property">InstallMode</span>.<span class="property">IMMEDIATE</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">clear</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    codePush.<span class="title function_">clearUpdates</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AwesomeButton</span> <span class="attr">type</span>=<span class="string">&quot;secondary&quot;</span> <span class="attr">onPress</span>=<span class="string">&#123;checkForUpdate&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        æ£€æŸ¥æ›´æ–°</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">AwesomeButton</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AwesomeButton</span> <span class="attr">type</span>=<span class="string">&quot;secondary&quot;</span> <span class="attr">onPress</span>=<span class="string">&#123;clear&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        æ¸…é™¤æ›´æ–°</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">AwesomeButton</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="attr">flex</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">justifyContent</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šè¿™æ˜¯å¯é€‰çš„ï¼Œå®Œå…¨å¯ä»¥ä¸ä½¿ç”¨ codePush è¿™é‡ŒåŒ…è£…</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">codePush</span>(codePushOptions)(<span class="title class_">App</span>);</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³è¦æ˜¾ç¤ºä¸€ä¸ªæ›´æ–°ç¡®è®¤å¼¹çª—ï¼ˆä¸€ä¸ªä¸»åŠ¨å®‰è£…ï¼‰ã€‚é…ç½®ä½•æ—¶å®‰è£…å¯ç”¨æ›´æ–°ï¼ˆä¾‹å¦‚å¼ºåˆ¶ç«‹å³é‡å¯ï¼‰æˆ–ä»¥ä»»ä½•å…¶ä»–æ–¹å¼è‡ªå®šä¹‰æ›´æ–°ä½“éªŒï¼Œè¯·å‚é˜… <a href="https://docs.microsoft.com/en-us/appcenter/distribution/codepush/react-native#api-reference">codepush</a> APIå‚è€ƒä»¥è·å–æœ‰å…³ä¸€ä¸‹ä¿¡æ¯ï¼šå¦‚ä½•è°ƒæ•´æ­¤é»˜è®¤è¡Œä¸ºã€‚</p><h3 id="åº”ç”¨å•†åº—è§„åˆ™"><a href="#åº”ç”¨å•†åº—è§„åˆ™" class="headerlink" title="åº”ç”¨å•†åº—è§„åˆ™"></a>åº”ç”¨å•†åº—è§„åˆ™</h3><ul><li><p>è‹¹æœAppå…è®¸ä½¿ç”¨çƒ­æ›´æ–°<a href="https://developer.apple.com/programs/ios/information/iOS_Program_Information_4_3_15.pdf">Appleâ€™s developer agreement</a>, ä¸ºäº†ä¸å½±å“ç”¨æˆ·ä½“éªŒï¼Œè§„å®šå¿…é¡»ä½¿ç”¨é™é»˜æ›´æ–°ã€‚</p></li><li><p>Google Playä¸èƒ½ä½¿ç”¨é™é»˜æ›´æ–°ï¼Œå¿…é¡»å¼¹æ¡†å‘ŠçŸ¥ç”¨æˆ·Appæœ‰æ›´æ–°ã€‚</p></li><li><p>ä¸­å›½çš„androidå¸‚åœºå¿…é¡»é‡‡ç”¨é™é»˜æ›´æ–°ï¼ˆå¦‚æœå¼¹æ¡†æç¤ºï¼ŒAppä¼šè¢«â€œè¯·ä¸Šä¼ æœ€æ–°ç‰ˆæœ¬çš„äºŒè¿›åˆ¶åº”ç”¨åŒ…â€åŸå› é©³å›ï¼‰ã€‚</p></li></ul><h2 id="å¤šéƒ¨ç½²æµ‹è¯•"><a href="#å¤šéƒ¨ç½²æµ‹è¯•" class="headerlink" title="å¤šéƒ¨ç½²æµ‹è¯•"></a>å¤šéƒ¨ç½²æµ‹è¯•</h2><p>åœ¨å…¥é—¨æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨ç‰¹å®šçš„éƒ¨ç½²å¯†é’¥é…ç½® CodePush æ’ä»¶ã€‚ä½†æ˜¯ï¼Œä¸ºäº†æœ‰æ•ˆåœ°æµ‹è¯•å‘å‹ç‰ˆï¼Œè‡³å…³é‡è¦çš„æ˜¯ï¼Œåœ¨é¦–æ¬¡åˆ›å»º CodePush åº”ç”¨ç¨‹åºï¼ˆæˆ–ä½ å¯èƒ½å·²ç»åˆ›å»ºçš„ä»»ä½•è‡ªå®šä¹‰éƒ¨ç½²ï¼‰æ—¶ï¼Œåˆ©ç”¨æˆ‘ä»¬å»ºè®®è¿›è¡Œçš„ <code>Staging</code> å’Œ <code>Production</code> éƒ¨ç½²ã€‚</p><blockquote><p>æˆ‘ä»¬çš„å®¢æˆ·ç«¯å›æ»šåŠŸèƒ½å¯ä»¥å¸®åŠ©æ‚¨åœ¨å®‰è£…å¯¼è‡´å´©æºƒçš„ç‰ˆæœ¬åè§£é™¤å¯¹ç”¨æˆ·çš„é˜»æ­¢ï¼ŒæœåŠ¡å™¨ç«¯çš„å›æ»šï¼ˆä¾‹å¦‚<code>appcenter codepush rollback</code>ï¼‰ä½¿æ‚¨å¯ä»¥é˜²æ­¢å…¶ä»–ç”¨æˆ·åœ¨å‘ç°é”™è¯¯çš„ç‰ˆæœ¬åå†å®‰è£…å®ƒã€‚ä½†æ˜¯ï¼Œå¦‚æœå¯ä»¥ä»ä¸€å¼€å§‹å°±é˜²æ­¢å¹¿æ³›å‘å¸ƒé”™è¯¯æ›´æ–°ï¼Œé‚£æ˜¾ç„¶æ›´å¥½ã€‚</p></blockquote><p>åˆ©ç”¨<code>Staging</code>å’Œ<code>Production</code>éƒ¨ç½²ï¼Œæ‚¨å¯ä»¥å®ç°ç±»ä¼¼äºä»¥ä¸‹çš„å·¥ä½œæµç¨‹ï¼ˆéšæ„å®šåˆ¶ï¼ï¼‰ï¼š</p><ol><li><code>Staging</code> ä½¿ç”¨ <code>appcenter codepush release-react</code> å‘½ä»¤å°† CodePush æ›´æ–°å‘å¸ƒåˆ°æ‚¨çš„éƒ¨ç½²ä¸­ï¼ˆå¦‚æœä½ éœ€è¦æ›´å¤šçš„æ§åˆ¶æƒå¯ä»¥ä½¿ç”¨ <code>appcenter codepush release</code> ï¼‰</li><li>æ„å»ºåº”ç”¨ç¨‹åºçš„ staging<code>/</code>beta&#96; ç‰ˆæœ¬ï¼Œä»æœåŠ¡å™¨åŒæ­¥æ›´æ–°ï¼Œå¹¶éªŒè¯å…¶æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ</li><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†æµ‹è¯•çš„å‘è¡Œç‰ˆä» <code>Staging</code> å‡çº§åˆ° <code>Prouction</code>: <code>appcenter codepush promote -a &lt;ownerName&gt;/&lt;appName&gt; -s Staging -d Production</code></li><li>æ„å»ºåº”ç”¨ç¨‹åºçš„ <code>production</code>&#x2F;<code>release</code>ï¼Œä»æœåŠ¡å…¶åŒæ­¥æ›´æ–°å¹¶éªŒè¯å…¶æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ</li></ol><blockquote><p>å¦‚æœæ‚¨æƒ³é‡‡å–æ›´ä¸ºè°¨æ…çš„æ–¹æ³•ï¼Œç”šè‡³å¯ä»¥é€‰æ‹©åœ¨â€œï¼ƒ3â€ä¸­æ‰§è¡Œ <strong>åˆ†é˜¶æ®µæ¨å‡º</strong>ï¼Œè¿™ä½¿æ‚¨å¯ä»¥å‡è½»æ›´æ–°å¸¦æ¥çš„é¢å¤–æ½œåœ¨é£é™©ï¼ˆä¾‹å¦‚ï¼Œï¼ƒ2ä¸­çš„æµ‹è¯•æ˜¯å¦æ¥è§¦äº†æ‰€æœ‰å¯èƒ½çš„è®¾å¤‡ï¼‰ï¼Œä»…ä½¿ä¸€å®šæ¯”ä¾‹çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨ç”Ÿäº§æ›´æ–°ï¼ˆä¾‹å¦‚<code>code-push promote -a / -s Staging -d Production -r 20%</code>ï¼‰ã€‚ç„¶åï¼Œåœ¨ç­‰å¾…äº†ä¸€æ®µåˆç†çš„æ—¶é—´ä»¥æŸ¥çœ‹æ˜¯å¦æœ‰å´©æºƒæŠ¥å‘Šæˆ–å®¢æˆ·åé¦ˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡è¿è¡Œå°†å…¶æ‰©å±•åˆ°æ•´ä¸ªå—ä¼—<code>appcenter codepush patch -a / Production -r 100%</code>ã€‚</p></blockquote><h3 id="å®‰å“ç³»ç»Ÿ"><a href="#å®‰å“ç³»ç»Ÿ" class="headerlink" title="å®‰å“ç³»ç»Ÿ"></a>å®‰å“ç³»ç»Ÿ</h3><p>åœ¨<a href="https://google.github.io/android-gradle-dsl/current/index.html">Android Gradle plugin </a>å…è®¸æ‚¨å®šä¹‰è‡ªå®šä¹‰é…ç½®è®¾ç½®ï¼Œæ¯ä¸ªâ€œæ„å»ºç±»å‹â€ï¼ˆå¦‚è°ƒè¯•ï¼Œå‘å¸ƒï¼‰ã€‚æ­¤æœºåˆ¶ä½¿æ‚¨å¯ä»¥è½»æ¾åœ°ä½¿ç”¨ CodePush éƒ¨ç½²å¯†é’¥é…ç½®è°ƒè¯•ç‰ˆæœ¬ï¼Œè€Œå‘è¡Œç‰ˆæœ¬ä¹Ÿå¯ä»¥é…ç½®ä¸ºä½¿ç”¨ CodePush ç”Ÿäº§éƒ¨ç½²å¯†é’¥ã€‚</p><p>æé†’ä¸€ä¸‹ï¼Œæ‚¨å¯ä»¥é€šè¿‡<code>appcenter codepush deployment list  -k</code>ä»ç»ˆç«¯è¿è¡Œæ¥æ£€ç´¢è¿™äº›é”®ã€‚</p><p>è¦è¿›è¡Œè®¾ç½®ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p>æ‰“å¼€é¡¹ç›®çš„åº”ç”¨ç¨‹åºçº§åˆ«<code>build.gradle</code>æ–‡ä»¶ï¼ˆä¾‹å¦‚æ ‡å‡† React Native é¡¹ç›®ä¸­çš„ <code>android/app/build.gradle</code>ï¼‰</p></li><li><p>æŸ¥æ‰¾æ­¤<code>android &#123; buildTypes &#123;&#125; &#125;</code>éƒ¨åˆ†ï¼Œå¹¶<code>resValue</code>ä¸ºæ‚¨<code>debug</code>å’Œ<code>release</code>æ„å»ºç±»å‹å®šä¹‰æ¡ç›®ï¼Œåˆ†åˆ«å¼•ç”¨æ‚¨çš„å¯†é’¥<code>Staging</code>å’Œ<code>Production</code>éƒ¨ç½²å¯†é’¥ã€‚</p> <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">  ...</span><br><span class="line">  buildTypes &#123;</span><br><span class="line">    debug &#123;</span><br><span class="line">      signingConfig signingConfigs.debug</span><br><span class="line">      <span class="comment">// Note: CodePush updates should not be tested in Debug mode as they are overriden by the RN packager. However, because CodePush checks for updates in all modes, we must supply a key.</span></span><br><span class="line">      resValue <span class="string">&quot;string&quot;</span>, <span class="string">&quot;CodePushDeploymentKey&quot;</span>, <span class="string">&#x27;&quot;&quot;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    release &#123;</span><br><span class="line">      <span class="comment">// Caution! In production, you need to generate your own keystore file.</span></span><br><span class="line">      <span class="comment">// see https://facebook.github.io/react-native/docs/signed-apk-android.</span></span><br><span class="line">      signingConfig signingConfigs.release</span><br><span class="line">      minifyEnabled enableProguardInReleaseBuilds</span><br><span class="line">      proguardFiles getDefaultProguardFile(<span class="string">&quot;proguard-android.txt&quot;</span>), <span class="string">&quot;proguard-rules.pro&quot;</span></span><br><span class="line">      resValue <span class="string">&quot;string&quot;</span>, <span class="string">&quot;CodePushDeploymentKey&quot;</span>, <span class="string">&#x27;&quot;&quot;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// <span class="doctag">NOTE:</span> The naming convention for releaseStaging is significant due to http://t.cn/EAnyAzi</span></span><br><span class="line">    releaseStaging.initWith(release)</span><br><span class="line">    releaseStaging &#123;</span><br><span class="line">        resValue <span class="string">&quot;string&quot;</span>, <span class="string">&quot;CodePushDeploymentKey&quot;</span>, <span class="string">&#x27;&quot;&quot;&#x27;</span></span><br><span class="line">        <span class="comment">// Note: It is a good idea to provide matchingFallbacks for the new buildType you create to prevent build issuesï¼ˆhttp://t.cn/EAex4XHï¼‰</span></span><br><span class="line">        <span class="comment">// Add the following line if not already there</span></span><br><span class="line">        matchingFallbacks = [<span class="string">&#x27;release&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>å¦‚æœè¦åœ¨æ„å»ºè¿‡ç¨‹ä¸­é…ç½®éƒ¨ç½²å¯†é’¥ï¼Œè¯·è®°ä½ä»<code>strings.xml</code>ä¸­åˆ é™¤å¯†é’¥ã€‚</p></blockquote><blockquote><p><code>releaseStaging</code>ç”±äº<a href="https://github.com/facebook/react-native/blob/e083f9a139b3f8c5552528f8f8018529ef3193b9/react.gradle#L79">æ­¤è¡Œ</a>ï¼Œçš„å‘½åçº¦å®šï¼Œè¿™ä¸èƒ½æ”¹ã€‚</p></blockquote><h3 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h3><blockquote><p>è¯¥éƒ¨åˆ†é€‚ç”¨äº Xcode 11</p></blockquote><p>Xcode å…è®¸ä½ ä¸ºæ¯ä¸ª<strong>é…ç½®</strong> (å¦‚ <code>debug</code>, <code>release</code>) è‡ªå®šä¹‰æ„å»ºè®¾ç½®ï¼Œç„¶åå¯ä»¥å°†å…¶å¼•ç”¨ä¸º <code>Info.plist</code> æ–‡ä»¶ä¸­çš„é”®å€¼ï¼ˆå¦‚ <code>CodePushDeploymentKey</code> è®¾ç½®ï¼‰ã€‚æ­¤æœºåˆ¶æ˜¯æ‚¨å¯ä»¥è½»æ¾åœ°è¿›è¡Œæ„å»ºé…ç½®ä»¥ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶è¢«é…ç½®ä¸ºä¸ä¸åŒçš„ CodePush éƒ¨ç½²åŒæ­¥ã€‚</p><p>è¦è¿›è¡Œè®¾ç½®ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p>æ‰“å¼€æ‚¨çš„ Xcode é¡¹ç›®ï¼Œç„¶ååœ¨ <code>Project navigator</code> çª—å£ä¸­é€‰æ‹©æ‚¨çš„é¡¹ç›®</p></li><li><p>ç¡®ä¿å·²é€‰æ‹© <code>PROJECT</code> èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ <code>TARGETS</code></p></li><li><p>é€‰æ‹© <code>Info</code> æ ‡ç­¾</p></li><li><p>ç‚¹å‡» <code>+</code> çš„å†…éƒ¨æŒ‰é’®<code>Duplicate &quot;Release&quot; Configuration</code><br>  <img src="https://docs.microsoft.com/en-us/appcenter/distribution/codepush/images/rn-ios-8.png"></p></li><li><p>å°†æ–°é…ç½®å‘½åä¸º <code>Staging</code>ï¼ˆæˆ–æ‚¨å–œæ¬¢çš„ä»»ä½•åç§°ï¼‰</p></li><li><p>é€‰æ‹© <code>Build Settings</code> é€‰é¡¹å¡</p></li><li><p>å•å‡»å·¥å…·æ ä¸Šçš„ <code>+</code> æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º  <code>CONFIGURATION_BUILD_DIR</code> çš„ <code>User-Defined Setting</code>, ä½¿ç”¨ç›¸åŒçš„ <code>per-configuration</code> é…ç½®ã€‚</p></li></ol><p>  <img src="https://i.stack.imgur.com/Sodu3.png"></p><blockquote><p>æ³¨æ„ï¼šæ¯æ¬¡åˆ›å»ºè¿™ä¸ª Xcode éƒ½ä¼šå´©æºƒï¼Œåªèƒ½å…ˆæŠŠå€¼å†™å…¥ä¹‹åï¼Œåœ¨ <code>project.pbxproj</code> ä¸­æ–°å»ºã€‚</p></blockquote><ol start="8"><li><p>ç‚¹å‡»å·¥å…·æ çš„ <code>+</code>  å¹¶é€‰æ‹© <code>Add User-Defined Setting</code></p><p><img src="https://docs.microsoft.com/en-us/appcenter/distribution/codepush/images/rn-ios-10.png"></p></li><li><p>å°†æ­¤æ–°è®¾ç½®å‘½åä¸º<code>CodePushDeploymentKey</code>ï¼Œå±•å¼€å®ƒï¼Œç„¶åä¸º <code>Staging </code>é…ç½®æŒ‡å®šæ‚¨çš„ <code>Staging</code> éƒ¨ç½²å¯†é’¥ï¼Œä¸º <code>Release</code> é…ç½®æŒ‡å®šæ‚¨çš„ <code>Production</code> éƒ¨ç½²å¯†é’¥ã€‚</p><p><img src="https://docs.microsoft.com/en-us/appcenter/distribution/codepush/images/rn-ios-11.png"></p><blockquote><p>æé†’ä¸€ä¸‹ï¼Œæ‚¨å¯ä»¥é€šè¿‡<code>appcenter codepush deployment list -a &lt;ownerName&gt;/&lt;appName&gt; --displayKeys</code>ä»ç»ˆç«¯è¿è¡Œæ¥æ£€ç´¢è¿™äº›é”®ã€‚</p></blockquote></li><li><p>æ‰“å¼€é¡¹ç›®çš„ <code>Info.plist</code> æ–‡ä»¶ï¼Œç„¶åå°†<code>CodePushDeploymentKey</code>æ¡ç›®çš„å€¼æ›´æ”¹ä¸º<code>$(CODEPUSH_KEY)</code></p><p><img src="https://docs.microsoft.com/en-us/appcenter/distribution/codepush/images/rn-ios-12.png"></p></li></ol><p>å°±æ˜¯è¿™æ ·äº†ï¼Œç°åœ¨å½“ä½ è¿è¡Œæˆ–æ„å»ºä½ çš„Appï¼Œä½ çš„ <code>Staging</code> åŒ…å°†è‡ªåŠ¨åŒæ­¥ä½ çš„ <code>Staging</code> éƒ¨ç½²ï¼Œä½ çš„ <code>Release</code> åŒ…å°†è‡ªåŠ¨åŒæ­¥ä½ çš„ <code>Production</code> éƒ¨ç½²ã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœä½ é‡åˆ° <code>ld: library not found for ...</code> é”™è¯¯ä¿¡æ¯ï¼Œè¯·çœ‹ä¸€ä¸‹è¿™ä¸ª <a href="https://github.com/Microsoft/react-native-code-push/issues/426">issuse</a></p></blockquote><p>æ­¤å¤–ï¼Œå¦‚æœä½ æƒ³ç»™ä»–ä»¬ä¸åŒçš„åç§°å’Œ&#x2F;æˆ–å›¾æ ‡ï¼Œä½ å¯ä»¥ä¿®æ”¹<code>Product Bundle Identifier</code>ï¼Œ<code>Product Name</code>ä»¥åŠ<code>Asset Catalog App Icon Set Name</code></p><h2 id="åŠ¨æ€éƒ¨ç½²åˆ†é…"><a href="#åŠ¨æ€éƒ¨ç½²åˆ†é…" class="headerlink" title="åŠ¨æ€éƒ¨ç½²åˆ†é…"></a>åŠ¨æ€éƒ¨ç½²åˆ†é…</h2><p>ä¸Šä¸€èŠ‚è¯´æ˜äº†å¦‚ä½•åˆ©ç”¨å¤šä¸ª<code>CodePush</code>éƒ¨ç½²ï¼Œä»¥ä¾¿åœ¨æ›´æ–°å‘å¸ƒç»™ç”¨æˆ·ä¹‹å‰ï¼Œæœ‰æ•ˆåœ°æµ‹è¯•æ‚¨çš„æ›´æ–°å†…å®¹ã€‚ ä½†æ˜¯ï¼Œç”±äºè¯¥å·¥ä½œæµé™æ€åœ°å°†éƒ¨ç½²åˆ†é…åµŒå…¥åˆ°å®é™…äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œå› æ­¤<code>ä¸´æ—¶æ„å»º</code>å’Œ<code>ç”Ÿäº§æ„å»º</code>åªä¼šåŒæ­¥è¯¥éƒ¨ç½²çš„æ›´æ–°å†…å®¹ã€‚</p><p>åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™æ˜¯è¶³å¤Ÿçš„ï¼Œå› ä¸ºæ‚¨åªå¸Œæœ›æ‚¨çš„å›¢é˜Ÿï¼Œå®¢æˆ·ï¼Œåˆ©ç›Šç›¸å…³è€…ç­‰ä¸æ‚¨çš„é¢„ç”Ÿäº§ç‰ˆæœ¬åŒæ­¥ï¼Œå› æ­¤ï¼Œä»–ä»¬åªéœ€è¦çŸ¥é“å¦‚ä½•ä¸è¯¥ç‰ˆæœ¬åŒæ­¥æ„å»ºã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½ å¸Œæœ›èƒ½å¤Ÿè¿›è¡Œ <code>A / B</code> æµ‹è¯•ï¼Œæˆ–è€…ä¸ºæŸäº›ç”¨æˆ·æä¾›åº”ç”¨ç¨‹åºçš„æ—©æœŸè®¿é—®æƒé™ï¼Œé‚£ä¹ˆèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶å°†ç‰¹å®šç”¨æˆ·ï¼ˆæˆ–å—ä¼—ï¼‰åŠ¨æ€åœ°ç½®äºç‰¹å®šéƒ¨ç½²ä¸­å°†éå¸¸æœ‰ç”¨ã€‚</p><p>ä¸ºäº†å®ç°æ­¤å·¥ä½œæµç¨‹ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯æŒ‡å®šè°ƒç”¨è¯¥<code>codePush</code>æ–¹æ³•æ—¶å¸Œæœ›å½“å‰ç”¨æˆ·ä¸ä¹‹åŒæ­¥çš„éƒ¨ç½²å¯†é’¥ã€‚æŒ‡å®šåï¼Œæ­¤å¯†é’¥å°†è¦†ç›–åº”ç”¨ç¨‹åºçš„ <code>Info.plist</code>ï¼ˆiOSï¼‰æˆ– <code>MainActivity.java</code>ï¼ˆAndroidï¼‰æ–‡ä»¶ä¸­æä¾›çš„â€œé»˜è®¤â€å¯†é’¥ã€‚è¿™å…è®¸æ‚¨ç”Ÿæˆä¸´æ—¶æˆ–ç”Ÿäº§æ„å»ºï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€â€œé‡å®šå‘â€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Imagine that &quot;userProfile&quot; is a prop that this component received</span></span><br><span class="line"><span class="comment">// which includes the deployment key that the current user should use.</span></span><br><span class="line">codePush.<span class="title function_">sync</span>(&#123; <span class="attr">deploymentKey</span>: userProfile.<span class="property">CODEPUSH_KEY</span> &#125;);</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™æ ·çš„å˜åŒ–åï¼Œç°åœ¨åªéœ€é€‰æ‹©åº”ç”¨ç¨‹åºå¦‚ä½•ä¸ºå½“å‰ç”¨æˆ·é…ç½®æ­£ç¡®çš„éƒ¨ç½²å¯†é’¥ã€‚ åœ¨å®è·µä¸­ï¼Œé€šå¸¸æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>å°†æ›´æ”¹éƒ¨ç½²çš„åŠŸèƒ½å¼€æ”¾ç»™ç”¨æˆ·ã€‚ä¾‹å¦‚ï¼Œæ‚¨çš„è®¾ç½®é¡µé¢å¯èƒ½ä¼šæœ‰ä¸€ä¸ªåˆ‡æ¢æŒ‰é’®ä»¥å¯ç”¨â€œæµ‹è¯•ç‰ˆâ€çš„è®¿é—®æƒé™ã€‚ å¦‚æœæ‚¨ä¸åœ¨ä¹é¢„ç”Ÿäº§æ›´æ–°çš„å†…å®¹è¢«å¾—çŸ¥ï¼Œå¹¶ä¸”æ‚¨çš„æŸäº›ç”¨æˆ·å¯èƒ½å¸Œæœ›æ ¹æ®è‡ªå·±çš„æ„æ„¿é€‰æ‹©ä½¿ç”¨æœ€æ–°ï¼ˆå¹¶ä¸”å¯èƒ½æœ‰é”™è¯¯ï¼‰çš„æ›´æ–°ï¼ˆæœ‰ç‚¹åƒChromeæ¸ é“ï¼‰ã€‚ ä½†æ˜¯ï¼Œæ­¤è§£å†³æ–¹æ¡ˆå°†å†³ç­–æƒäº¤ç»™æ‚¨çš„ç”¨æˆ·ï¼Œè¿™æ— æ³•å¸®åŠ©æ‚¨é€æ˜åœ°æ‰§è¡Œ <code>A / B</code> æµ‹è¯•ã€‚</li><li>ä½¿ç”¨é¢å¤–çš„å…ƒæ•°æ®æ³¨é‡Šç”¨æˆ·çš„æœåŠ¡å™¨ç«¯é…ç½®æ–‡ä»¶ï¼Œæ ‡æ˜ä¸å…¶åŒæ­¥çš„éƒ¨ç½²ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¨çš„åº”ç”¨åªèƒ½ä½¿ç”¨äºŒè¿›åˆ¶åµŒå…¥å¯†é’¥ï¼Œä½†åœ¨ç”¨æˆ·é€šè¿‡èº«ä»½éªŒè¯åï¼Œæ‚¨çš„æœåŠ¡å™¨å¯ä»¥é€‰æ‹©å°†å…¶â€œé‡å®šå‘â€åˆ°å…¶ä»–éƒ¨ç½²ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥æ ¹æ®éœ€è¦é€æ­¥å°†æŸäº›ç”¨æˆ·æˆ–ç»„æ”¾ç½®åœ¨ä¸åŒçš„éƒ¨ç½²ä¸­ã€‚æ‚¨ç”šè‡³å¯ä»¥é€‰æ‹©å°†æœåŠ¡å™¨å“åº”å­˜å‚¨åœ¨æœ¬åœ°å­˜å‚¨ä¸­ï¼Œä»¥ä½¿å…¶æˆä¸ºæ–°çš„é»˜è®¤å€¼ã€‚ å¦‚ä½•å°†å¯†é’¥ä¸ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ä¸€èµ·å­˜å‚¨å®Œå…¨å–å†³äºæ‚¨çš„èº«ä»½éªŒè¯è§£å†³æ–¹æ¡ˆï¼ˆä¾‹å¦‚ <code>Auth0</code>ï¼Œ<code>Firebase</code>ï¼Œè‡ªå®šä¹‰<code>DB</code> + <code>REST API</code>ï¼‰ï¼Œä½†è¿™é€šå¸¸éå¸¸ç®€å•ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šå¦‚æœéœ€è¦ï¼Œæ‚¨è¿˜å¯ä»¥å®æ–½æ··åˆè§£å†³æ–¹æ¡ˆï¼Œå…è®¸æœ€ç»ˆç”¨æˆ·åœ¨ä¸åŒéƒ¨ç½²ä¹‹é—´åˆ‡æ¢ï¼ŒåŒæ—¶è¿˜å…è®¸æ‚¨çš„æœåŠ¡å™¨è¦†ç›–è¯¥å†³ç­–ã€‚ è¿™æ ·ï¼Œæ‚¨å°±æ‹¥æœ‰äº†â€œéƒ¨ç½²è§£å†³æ–¹æ¡ˆâ€çš„å±‚æ¬¡ç»“æ„ï¼Œå¯ç¡®ä¿æ‚¨çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿè‡ªè¡Œæ›´æ–°ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è·å¾—æœ€æ–°å†…å®¹çš„è®¿é—®æƒé™æ¥è·å¾—æœ€æ–°ä½“éªŒï¼Œä½†æ‚¨ä¹Ÿæœ‰èƒ½åŠ›æ ¹æ®éœ€è¦å¯¹ç”¨æˆ·è¿›è¡Œ <code>A / B</code> æµ‹è¯•ã€‚</p></blockquote><p>ç”±äºæˆ‘ä»¬å»ºè®®å°†<code>Staging</code>éƒ¨ç½²ç”¨äºæ›´æ–°çš„é¢„å‘å¸ƒæµ‹è¯•ï¼ˆå¦‚ä¸Šä¸€èŠ‚ä¸­æ‰€è¿°ï¼‰ï¼Œå› æ­¤ä½¿ç”¨è¯¥éƒ¨ç½²å¯¹ç”¨æˆ·æ‰§è¡Œ <code>A / B</code> æµ‹è¯•å¹¶ä¸ä¸€å®šæœ‰æ„ä¹‰ï¼Œä¸æ­¤ç›¸åï¼Œä½ åº”è¯¥å…è®¸æ—©æœŸè®¿é—®ï¼ˆå¦‚ä¸Šé¢é€‰é¡¹1ä¸­æ‰€è¿°ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®å……åˆ†åˆ©ç”¨è‡ªå®šä¹‰åº”ç”¨ç¨‹åºéƒ¨ç½²ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥æŒ‰ç”¨æˆ·éœ€æ±‚å¯¹ç”¨æˆ·è¿›è¡Œç»†åˆ†ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åˆ›å»ºé•¿æœŸç”šè‡³æ˜¯ä¸€æ¬¡æ€§çš„éƒ¨ç½²ï¼Œå‘å…¶å‘å¸ƒåº”ç”¨ç¨‹åºçš„å˜ä½“ï¼Œç„¶åå°†æŸäº›ç”¨æˆ·æ”¾å…¥å…¶ä¸­ï¼Œä»¥æŸ¥çœ‹å…¶å‚ä¸åº¦ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// <span class="comment">#1) Create your new deployment to hold releases of a specific app variant</span></span><br><span class="line">appcenter codepush deployment add -a &lt;ownerName&gt;/&lt;appName&gt; test-variant-one</span><br><span class="line"></span><br><span class="line">// <span class="comment">#2) Target any new releases at that custom deployment</span></span><br><span class="line">appcenter codepush release-react -a &lt;ownerName&gt;/&lt;appName&gt; -d test-variant-one</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šä»ä¸€ä¸ªéƒ¨ç½²â€œåˆ‡æ¢â€åˆ°å¦ä¸€ä¸ªéƒ¨ç½²çš„ç”¨æˆ·æ•°ï¼Œè¢«çº³å…¥åˆ°éƒ¨ç½²ä¸­çš„â€œå®‰è£…åº¦é‡â€ä¸­æŠ¥å‘Šçš„æ€»ç”¨æˆ·æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„<code>Production</code> éƒ¨ç½²å½“å‰æŠ¥å‘Šçš„ç”¨æˆ·æ€»æ•°ä¸º1ï¼Œä½†æ‚¨å°†è¯¥ç”¨æˆ·åŠ¨æ€åˆ‡æ¢ä¸º <code>Staging</code> éƒ¨ç½²ï¼Œåˆ™ <code>Production</code> éƒ¨ç½²å°†æŠ¥å‘Š 0ä¸ªæ€»ç”¨æˆ·ï¼Œè€Œ <code>Staging</code> éƒ¨ç½²å°†æŠ¥å‘Š1ï¼ˆåˆšåˆšåˆ‡æ¢çš„ç”¨æˆ·ï¼‰ã€‚ å³ä½¿åœ¨ä½¿ç”¨åŸºäºè¿è¡Œæ—¶çš„éƒ¨ç½²é‡å®šå‘è§£å†³æ–¹æ¡ˆçš„æƒ…å†µä¸‹ï¼Œè¿™ç§è¡Œä¸ºå¯ä»¥è®©ä½ å‡†ç¡®åœ°è·Ÿè¸ªæ‚¨çš„ç‰ˆæœ¬ä½¿ç”¨æƒ…å†µã€‚</p></blockquote><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><blockquote><p>æºç ï¼š<a href="https://github.com/youngjuning/AppCenterCodePushDemo">https://github.com/youngjuning/AppCenterCodePushDemo</a></p></blockquote><h3 id="App-js"><a href="#App-js" class="headerlink" title="App.js"></a>App.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;useEffect&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">View</span>, <span class="title class_">StyleSheet</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> codePush <span class="keyword">from</span> <span class="string">&#x27;react-native-code-push&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AwesomeButton</span> <span class="keyword">from</span> <span class="string">&#x27;react-native-really-awesome-button&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;codePushSync, checkForUpdate&#125; <span class="keyword">from</span> <span class="string">&#x27;./CodePushUtils&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getUpdateMetadata</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> running = <span class="keyword">await</span> codePush.<span class="title function_">getUpdateMetadata</span>(</span><br><span class="line">      codePush.<span class="property">UpdateState</span>.<span class="property">RUNNING</span>,</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">const</span> pending = <span class="keyword">await</span> codePush.<span class="title function_">getUpdateMetadata</span>(</span><br><span class="line">      codePush.<span class="property">UpdateState</span>.<span class="property">PENDING</span>,</span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[CodePush] running&#x27;</span>, running);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[CodePush] pending&#x27;</span>, pending);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">codePushSync</span>();</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AwesomeButton</span> <span class="attr">onPress</span>=<span class="string">&#123;checkForUpdate&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;marginBottom:</span> <span class="attr">10</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        Check For Update!</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">AwesomeButton</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">AwesomeButton</span> <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span> codePush.clearUpdates()&#125; style=&#123;&#123;marginBottom: 10&#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        Clear Updates!</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">AwesomeButton</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AwesomeButton</span> <span class="attr">onPress</span>=<span class="string">&#123;getUpdateMetadata&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        getUpdateMetadata!</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">AwesomeButton</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="attr">flex</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">justifyContent</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h3 id="CodePushUtils-js"><a href="#CodePushUtils-js" class="headerlink" title="CodePushUtils.js"></a>CodePushUtils.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">AppState</span>, <span class="title class_">Platform</span>, <span class="title class_">Alert</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> codePush <span class="keyword">from</span> <span class="string">&#x27;react-native-code-push&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> configReader <span class="keyword">from</span> <span class="string">&#x27;react-native-config-reader&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CodePushDeploymentKey</span> = &#123;</span><br><span class="line">  <span class="attr">ios</span>: &#123;</span><br><span class="line">    <span class="attr">debug</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">staging</span>: <span class="string">&#x27;944zuIiRSds-ZZY6AQF82aRl0b1vUL_mMxiie&#x27;</span>,</span><br><span class="line">    <span class="attr">release</span>: <span class="string">&#x27;yyJfk2vtpLUUlOCg3FnvCcky9o4U1lEWR1UJV&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">android</span>: &#123;</span><br><span class="line">    <span class="attr">debug</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">releasestaging</span>: <span class="string">&#x27;tOncLvKACzzSkUaML9tCOUfPZxHVnobfaNIUe&#x27;</span>,</span><br><span class="line">    <span class="attr">release</span>: <span class="string">&#x27;Gtc4iXTPn24yu6CBrbl_V2GTy21xtdQyfm6x1&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getDeploymentKey</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> buildType = configReader.<span class="property">BUILD_TYPE</span>.<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="keyword">const</span> deploymentKey = <span class="title class_">CodePushDeploymentKey</span>[<span class="title class_">Platform</span>.<span class="property">OS</span>][buildType];</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[CodePushUtils]&#x27;</span>, deploymentKey);</span><br><span class="line">  <span class="keyword">return</span> deploymentKey;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">codePushStatusDidChange</span> = <span class="keyword">async</span> syncStatus =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (syncStatus) &#123;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">CHECKING_FOR_UPDATE</span>:</span><br><span class="line">      <span class="comment">// 0 - æ­£åœ¨æŸ¥è¯¢CodePushæœåŠ¡å™¨ä»¥è¿›è¡Œæ›´æ–°ã€‚</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Checking for update.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">AWAITING_USER_ACTION</span>:</span><br><span class="line">      <span class="comment">// 1 - æœ‰å¯ç”¨çš„æ›´æ–°ï¼Œå¹¶ä¸”å‘æœ€ç»ˆç”¨æˆ·æ˜¾ç¤ºäº†ä¸€ä¸ªç¡®è®¤å¯¹è¯æ¡†ã€‚ï¼ˆä»…åœ¨updateDialogä½¿ç”¨æ—¶é€‚ç”¨ï¼‰</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Awaiting user action.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">DOWNLOADING_PACKAGE</span>:</span><br><span class="line">      <span class="comment">// 2 - æ­£åœ¨ä»CodePushæœåŠ¡å™¨ä¸‹è½½å¯ç”¨æ›´æ–°ã€‚</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Downloading package.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">INSTALLING_UPDATE</span>:</span><br><span class="line">      <span class="comment">// 3 - å·²ä¸‹è½½ä¸€ä¸ªå¯ç”¨çš„æ›´æ–°ï¼Œå¹¶å°†å…¶å®‰è£…ã€‚</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Installing update.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">UP_TO_DATE</span>:</span><br><span class="line">      <span class="comment">// 4 - åº”ç”¨ç¨‹åºå·²é…ç½®çš„éƒ¨ç½²å®Œå…¨æœ€æ–°ã€‚</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] App is up to date.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">UPDATE_IGNORED</span>:</span><br><span class="line">      <span class="comment">// 5 è¯¥åº”ç”¨ç¨‹åºå…·æœ‰å¯é€‰æ›´æ–°ï¼Œæœ€ç»ˆç”¨æˆ·é€‰æ‹©å¿½ç•¥è¯¥æ›´æ–°ã€‚ï¼ˆä»…åœ¨updateDialogä½¿ç”¨æ—¶é€‚ç”¨ï¼‰</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] User cancelled the update.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">UPDATE_INSTALLED</span>:</span><br><span class="line">      <span class="comment">// 6 - å®‰è£…äº†ä¸€ä¸ªå¯ç”¨çš„æ›´æ–°ï¼Œå®ƒå°†æ ¹æ® SyncOptions ä¸­çš„ InstallModeæŒ‡å®šåœ¨ syncStatusChangedCallback å‡½æ•°è¿”å›åç«‹å³æˆ–åœ¨ä¸‹æ¬¡åº”ç”¨æ¢å¤/é‡æ–°å¯åŠ¨æ—¶ç«‹å³è¿è¡Œã€‚</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Installed update.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">SYNC_IN_PROGRESS</span>:</span><br><span class="line">      <span class="comment">// 7 - æ­£åœ¨æ‰§è¡Œçš„ sync æ“ä½œ</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] Sync already in progress.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> codePush.<span class="property">SyncStatus</span>.<span class="property">UNKNOWN_ERROR</span>:</span><br><span class="line">      <span class="comment">// -1 - åŒæ­¥æ“ä½œé‡åˆ°æœªçŸ¥é”™è¯¯ã€‚</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;[CodePush] An unknown error occurred.&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">codePushDownloadDidProgress</span> = progress =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> curPercent = (</span><br><span class="line">    (progress.<span class="property">receivedBytes</span> / progress.<span class="property">totalBytes</span>) *</span><br><span class="line">    <span class="number">100</span></span><br><span class="line">  ).<span class="title function_">toFixed</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[CodePushUtils] Downloading Progress&#x27;</span>, <span class="string">`<span class="subst">$&#123;curPercent&#125;</span>%`</span>);</span><br><span class="line">  <span class="comment">// console.log(`$&#123;progress.receivedBytes&#125; of $&#123;progress.totalBytes&#125; received.`);</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">syncImmediate</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> deploymentKey = <span class="title function_">getDeploymentKey</span>();</span><br><span class="line">  codePush.<span class="title function_">sync</span>(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">updateDialog</span>: &#123;</span><br><span class="line">        <span class="comment">// æ˜¯å¦æ˜¾ç¤ºæ›´æ–°æè¿°</span></span><br><span class="line">        <span class="attr">appendReleaseDescription</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// æ›´æ–°æè¿°çš„å‰ç¼€ã€‚ é»˜è®¤ä¸º&quot;Description&quot;</span></span><br><span class="line">        <span class="attr">descriptionPrefix</span>: <span class="string">&#x27;\n\næ›´æ–°å†…å®¹ï¼š\n&#x27;</span>,</span><br><span class="line">        <span class="comment">// å¼ºåˆ¶æ›´æ–°æŒ‰é’®æ–‡å­—ï¼Œé»˜è®¤ä¸ºcontinue</span></span><br><span class="line">        <span class="attr">mandatoryContinueButtonLabel</span>: <span class="string">&#x27;ç«‹å³æ›´æ–°&#x27;</span>,</span><br><span class="line">        <span class="comment">// å¼ºåˆ¶æ›´æ–°æ—¶çš„ä¿¡æ¯. é»˜è®¤ä¸º&quot;An update is available that must be installed.&quot;</span></span><br><span class="line">        <span class="attr">mandatoryUpdateMessage</span>: <span class="string">&#x27;å¿…é¡»æ›´æ–°åæ‰èƒ½ä½¿ç”¨&#x27;</span>,</span><br><span class="line">        <span class="comment">// éå¼ºåˆ¶æ›´æ–°æ—¶ï¼ŒæŒ‰é’®æ–‡å­—,é»˜è®¤ä¸º&quot;ignore&quot;</span></span><br><span class="line">        <span class="attr">optionalIgnoreButtonLabel</span>: <span class="string">&#x27;ç¨å&#x27;</span>,</span><br><span class="line">        <span class="comment">// éå¼ºåˆ¶æ›´æ–°æ—¶ï¼Œç¡®è®¤æŒ‰é’®æ–‡å­—. é»˜è®¤ä¸º&quot;Install&quot;</span></span><br><span class="line">        <span class="attr">optionalInstallButtonLabel</span>: <span class="string">&#x27;åå°æ›´æ–°&#x27;</span>,</span><br><span class="line">        <span class="comment">// éå¼ºåˆ¶æ›´æ–°æ—¶ï¼Œæ£€æŸ¥åˆ°æ›´æ–°çš„æ¶ˆæ¯æ–‡æœ¬</span></span><br><span class="line">        <span class="attr">optionalUpdateMessage</span>: <span class="string">&#x27;æœ‰æ–°ç‰ˆæœ¬äº†ï¼Œæ˜¯å¦æ›´æ–°ï¼Ÿ&#x27;</span>,</span><br><span class="line">        <span class="comment">// Alertçª—å£çš„æ ‡é¢˜</span></span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;æ›´æ–°&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      deploymentKey,</span><br><span class="line">      <span class="attr">installMode</span>: codePush.<span class="property">InstallMode</span>.<span class="property">IMMEDIATE</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    codePushStatusDidChange,</span><br><span class="line">    codePushDownloadDidProgress,</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">checkForUpdate</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> deploymentKey = <span class="title function_">getDeploymentKey</span>();</span><br><span class="line">  <span class="keyword">const</span> update = <span class="keyword">await</span> codePush.<span class="title function_">checkForUpdate</span>(deploymentKey);</span><br><span class="line">  <span class="keyword">if</span> (!update) &#123;</span><br><span class="line">    <span class="title class_">Alert</span>.<span class="title function_">alert</span>(<span class="string">&#x27;æç¤º&#x27;</span>, <span class="string">&#x27;å·²æ˜¯æœ€æ–°ç‰ˆæœ¬&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">syncImmediate</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">codePushSync</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title class_">AppState</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="function"><span class="params">newState</span> =&gt;</span> &#123;</span><br><span class="line">    newState === <span class="string">&#x27;active&#x27;</span> &amp;&amp; <span class="title function_">syncImmediate</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="Npm-Scripts"><a href="#Npm-Scripts" class="headerlink" title="Npm Scripts"></a>Npm Scripts</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">&quot;gradle:clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cd android &amp;&amp; ./gradlew clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:release&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:assembleRelease&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:installRelease&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:installRelease&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:staging&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:assembleReleaseStaging&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:installStaging&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:installReleaseStaging&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;displayKeys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn disPlayIosKeys &amp;&amp; yarn disPlayAndroidKeys&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;disPlayIosKeys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;appcenter codepush deployment list --app youngjuning/AppCenterCodePushDemo-iOS --displayKeys&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;disPlayAndroidKeys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;appcenter codepush deployment list --app youngjuning/AppCenterCodePushDemo-Android --displayKeys&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release-react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn release-react-ios &amp;&amp; yarn release-react-android&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release-react-ios&quot;</span><span class="punctuation">:</span> <span class="string">&quot;appcenter codepush release-react --app youngjuning/AppCenterCodePushDemo-iOS&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release-react-android&quot;</span><span class="punctuation">:</span> <span class="string">&quot;appcenter codepush release-react --app youngjuning/AppCenterCodePushDemo-Android&quot;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><h3 id="CodePush-ä»€ä¹ˆæƒ…å†µä¸‹ä¸ä¼šç«‹å³é‡å¯åº”ç”¨"><a href="#CodePush-ä»€ä¹ˆæƒ…å†µä¸‹ä¸ä¼šç«‹å³é‡å¯åº”ç”¨" class="headerlink" title="CodePush ä»€ä¹ˆæƒ…å†µä¸‹ä¸ä¼šç«‹å³é‡å¯åº”ç”¨"></a>CodePush ä»€ä¹ˆæƒ…å†µä¸‹ä¸ä¼šç«‹å³é‡å¯åº”ç”¨</h3><ol><li>è‡ªä¸Šä¸€æ¬¡<code>disallowRestart</code>è¢«è°ƒç”¨ï¼Œæ²¡æœ‰æ–°çš„æ›´æ–°ã€‚</li><li>æœ‰æ›´æ–°ï¼Œä½†<code>installMode</code>ä¸º<code>InstallMode.ON_NEXT_RESTART</code>çš„æƒ…å†µä¸‹ã€‚</li><li>æœ‰æ›´æ–°ï¼Œä½†<code>installMode</code>ä¸º<code>InstallMode.ON_NEXT_RESUME</code>ï¼Œå¹¶ä¸”ç¨‹åºä¸€ç›´å¤„äºå‰å°ï¼Œå¹¶æ²¡æœ‰ä»åå°åˆ‡æ¢åˆ°å‰å°çš„æƒ…å†µä¸‹ã€‚</li><li>è‡ªä»ä¸Šæ¬¡<code>disallowRestart</code>è¢«è°ƒç”¨ï¼Œæ²¡æœ‰å†è°ƒç”¨<code>restartApp</code>ã€‚</li></ol><h3 id="TypeSctipt"><a href="#TypeSctipt" class="headerlink" title="TypeSctipt"></a>TypeSctipt</h3><p>å¦‚æœä½¿ç”¨ TypeScriptï¼Œå†æµè§ˆä¸€æ¬¡æ–‡æ¡£çš„APIéƒ¨åˆ†ä¹‹åï¼Œå°±å¯ä»¥ä¾é ç±»å‹ç³»ç»Ÿçš„æç¤ºæ¥å·¥ä½œå•¦ï¼š <a href="https://github.com/microsoft/react-native-code-push/blob/master/typings/react-native-code-push.d.ts">react-native-code-push.d.ts</a></p><h3 id="iOS-æ·»åŠ -BUILD-Type"><a href="#iOS-æ·»åŠ -BUILD-Type" class="headerlink" title="iOS æ·»åŠ  BUILD_Type"></a>iOS æ·»åŠ  BUILD_Type</h3><p>åœ¨ <code>Info.plist</code> ä¸­æ·»åŠ  <code>BUILD_TYPE</code>ï¼Œå–å€¼ä¸º <code>$(CONFIGURATION)</code></p><h3 id="react-native-bundle"><a href="#react-native-bundle" class="headerlink" title="react-native bundle"></a>react-native bundle</h3><p>ç”Ÿæˆ  <code>bundle</code> å‘½åï¼š<code>react-native bundle --platform</code> å¹³å° <code> --entry-file</code>å¯åŠ¨æ–‡ä»¶ <code>--bundle-output</code> æ‰“åŒ…jsè¾“å‡ºæ–‡ä»¶ <code> --assets-dest</code>  èµ„æºè¾“å‡ºç›®å½• <code> --dev</code>  æ˜¯å¦è°ƒè¯•ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ react-native bundle --platform android --entry-file index.js --bundle-output ./bundle/android/main.jsbundle --assets-dest ./bundle/android --dev <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="è”ç³»ä½œè€…"><a href="#è”ç³»ä½œè€…" class="headerlink" title="è”ç³»ä½œè€…"></a>è”ç³»ä½œè€…</h2><table><thead><tr><th align="center">ä½œè€…å¾®ä¿¡</th><th align="center">çŸ¥è¯†æ˜Ÿçƒ</th><th align="center">èµèµä½œè€…</th></tr></thead><tbody><tr><td align="center"><img src="https://user-gold-cdn.xitu.io/2020/2/24/17074acbb24c7412?w=200&h=200&f=jpeg&s=17183" style="width:200px"/></td><td align="center"><img src="https://user-gold-cdn.xitu.io/2020/2/24/17074acbb26af8e1?w=200&h=200&f=png&s=39093" style="width:200px"/></td><td align="center"><img src="https://user-gold-cdn.xitu.io/2020/2/24/17074acbb338c643?w=698&h=700&f=png&s=315492" style="width:200px"/></td></tr></tbody></table><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://docs.microsoft.com/en-us/appcenter/distribution/codepush/">Appcenter CodePush</a></li><li><a href="https://bre.is/DxWyD6wP">React-Nativeåº”ç”¨éƒ¨ç½²-çƒ­æ›´æ–°-CodePushæœ€æ–°é›†æˆæ€»ç»“</a></li><li><a href="https://www.jianshu.com/p/6a5e00d22723">CodePushçƒ­æ›´æ–°è¯¦ç»†æ¥å…¥æ•™ç¨‹</a></li><li><a href="http://techblog.sishuxuefu.com/atricle.html?5beaa7e59f5454007039e01c">react-nativeçƒ­æ›´æ–°</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> æ¶æ„ </tag>
            
            <tag> æœ€ä½³å®è·µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Native æ¶æ„é¢é¢è§‚</title>
      <link href="/f5a60d0347b3/"/>
      <url>/f5a60d0347b3/</url>
      
        <content type="html"><![CDATA[<h2 id="sigmayun-x2F-react-native-template-typescript"><a href="#sigmayun-x2F-react-native-template-typescript" class="headerlink" title="@sigmayun&#x2F;react-native-template-typescript"></a>@sigmayun&#x2F;react-native-template-typescript</h2><p><a href="https://github.com/sigmayun/react-native-template-typescript">@sigmayun&#x2F;react-native-template-typescript</a>æ˜¯åŸºäº <a href="https://github.com/react-native-community/react-native-template-typescript">react-native-community&#x2F;react-native-template-typescript</a> äºŒæ¬¡å¼€å‘çš„æ¨¡æ¿è„šæ‰‹æ¶ã€‚æœ¬æ–‡çš„æ¶æ„æ–¹æ¡ˆèè¿›äº†è¯¥æ¨¡æ¿ã€‚ä½ ç”šè‡³ä¸éœ€è¦é˜…è¯»æœ¬æ–‡çš„å†…å®¹å³å¯ä½¿ç”¨æœ¬æ–‡ä¸­çš„æœ€ä½³å®è·µï¼ï¼ï¼</p><h2 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h2><p>æ—¢ç„¶éƒ½å¼•å…¥ TypeScript äº†ï¼Œå°±ä¸ç”¨å†æ‹…å¿ƒç»™å…¨å±€å¯¹è±¡æ·»åŠ å±æ€§ä¸å°å¿ƒæ±¡æŸ“å®ƒäº†ï¼Œä½†æ˜¯éœ€è¦æˆ‘ä»¬è¿›è¡Œä¸€äº›é…ç½®ã€‚</p><p>1ã€åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º <code>types</code>,å¹¶æ–°å»º <code>global.d.ts</code> æ–‡ä»¶åï¼Œæ·»åŠ ä¸€ä¸‹å†…å®¹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> <span class="attr">global</span>: &#123;</span><br><span class="line">  <span class="title class_">HermesInternal</span>: <span class="literal">null</span> | &#123;&#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€ä¸ºäº†é˜²æ­¢å’Œ <code>@types/node</code> çš„ <code>Global</code> å£°æ˜å†²çªï¼Œéœ€è¦æŠŠ <code>tsconfig.json</code> ä¸­çš„ <code>skipLibCheck</code> çš„å€¼è®¾ç½®ä¸º <code>true</code></p><blockquote><p>è¯¥éƒ¨åˆ†ç¤ºä¾‹ä»£ç æ¶‰åŠ <code>global.ts</code>ã€<code>types/global.d.ts</code>ã€<code>tsconfig.json</code>ï¼Œè¯·åˆ° <a href="https://github.com/sigmayun/react-native-template-typescript">https://github.com/sigmayun/react-native-template-typescript</a> æŸ¥çœ‹ã€‚</p></blockquote><h2 id="ç¼–ç è§„èŒƒ"><a href="#ç¼–ç è§„èŒƒ" class="headerlink" title="ç¼–ç è§„èŒƒ"></a>ç¼–ç è§„èŒƒ</h2><ul><li><a href="https://github.com/sishuguojixuefu/eslint-config">@sishuguojixuefu&#x2F;eslint-config</a>ï¼šå¤§è€Œå…¨çš„ ESlint é…ç½®ï¼Œæ”¯æŒ vueã€jsxã€jsã€tsã€tsxã€html çš„ ESLint é…ç½®æ’ä»¶ï¼ŒåŸºäº airbnbï¼Œæ”¯æŒPrettier</li><li>husky + lint-staged: ç¦æ­¢ <code>commit</code> ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç </li></ul><blockquote><p>è¯¥éƒ¨åˆ†ç¤ºä¾‹ä»£ç ï¼š<a href="https://bre.is/3GD7cHKn">https://bre.is/3GD7cHKn</a></p></blockquote><h2 id="Npm-Scripts"><a href="#Npm-Scripts" class="headerlink" title="Npm Scripts"></a>Npm Scripts</h2><p>å–„ç”¨ NPM Scripts èƒ½å¸®åŠ©æ”¹å–„å·¥ä½œæµç¨‹ï¼ï¼ï¼</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;postinstall&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx jetifier&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;android&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-native run-android&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ios&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-native run-ios&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-native start&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jest&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint . --ext .js,.jsx,.ts,.tsx&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pod&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cd ios &amp;&amp; pod install&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gradle:clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cd android &amp;&amp; ./gradlew clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:release&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:assembleRelease&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:installRelease&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:installRelease&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:releaseStaging&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:assembleReleaseStaging&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:installReleaseStaging&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn gradle:clean &amp;&amp; cd android &amp;&amp; ./gradlew app:installReleaseStaging&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:genkeypair&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keytool -genkeypair -v -keystore release.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:key-debug&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keytool -list -v -keystore ./android/app/debug.keystore&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;an:key-release&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keytool -v -list -keystore ./android/app/release.keystore&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx iconfont-rn&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>è¯¥éƒ¨åˆ†ç¤ºä¾‹ä»£ç ï¼š<a href="https://bre.is/LC6uu8kc">https://bre.is/LC6uu8kc</a></p></blockquote><h2 id="ç½‘ç»œç¼–ç¨‹"><a href="#ç½‘ç»œç¼–ç¨‹" class="headerlink" title="ç½‘ç»œç¼–ç¨‹"></a>ç½‘ç»œç¼–ç¨‹</h2><ul><li><a href="https://www.kancloud.cn/yunye/axios/234845">axios</a>: Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚</li><li><a href="https://www.npmjs.com/package/qs">qs</a>: A querystring parsing and stringifying library with some added security.</li><li><a href="https://www.npmjs.com/package/clean-deep">clean-deep</a>: ä»å¯¹è±¡ä¸­é€’å½’åˆ é™¤ç©ºå¯¹è±¡ã€ç©ºæ•°ç»„ã€ç©ºå­—ç¬¦ä¸²ã€<code>null</code>å’Œ <code>value</code>å€¼ã€‚ä¸æ”¹å˜åŸå§‹æ•°æ®ã€‚</li></ul><blockquote><p>è¯¥éƒ¨åˆ†ç¤ºä¾‹ä»£ç ï¼š<a href="https://bre.is/39khhJtn">https://bre.is/39khhJtn</a></p></blockquote><h2 id="è·¯ç”±ç®¡ç†"><a href="#è·¯ç”±ç®¡ç†" class="headerlink" title="è·¯ç”±ç®¡ç†"></a>è·¯ç”±ç®¡ç†</h2><ul><li>React Navigation: è¿™ä¸ªæ¨¡å—æ˜¯å®˜æ–¹æ¨èçš„å¯¼èˆªç»„ä»¶ï¼Œå‡çº§åˆ°5ä¹‹åä¸ä»…æ”¯æŒäº† <code>hooks</code>ï¼Œæ›´æ˜¯æ”¯æŒäº†åŠ¨æ€è·¯ç”±ã€‚</li></ul><blockquote><p>è¯¥éƒ¨åˆ†ç¤ºä¾‹ä»£ç ï¼š<a href="https://bre.is/pzA7JArY">https://bre.is/pzA7JArY</a></p><p>ç›¸å…³åšå®¢ï¼š<a href="https://bre.is/pzA7JArY">https://bre.is/pzA7JArY</a></p></blockquote><h2 id="çŠ¶æ€ç®¡ç†"><a href="#çŠ¶æ€ç®¡ç†" class="headerlink" title="çŠ¶æ€ç®¡ç†"></a>çŠ¶æ€ç®¡ç†</h2><ul><li><code>mobx</code> + <code>mobx-react</code>: ç›¸å¯¹äº redux æ¥è¯´æ›´ç®€å•æ˜“ç”¨ï¼Œè¿˜åœ¨çŠ¹è±«çš„åŒå­¦ï¼Œå¯ä»¥è¯»ä¸€ä¸‹æœ‰èµçš„ä¸€ç¯‡æ–‡ç«  <a href="https://tech.youzan.com/mobx_vs_redux/">æˆ‘ä¸ºä»€ä¹ˆä»Reduxè¿ç§»åˆ°äº†Mobx</a></li></ul><h2 id="æœ¬åœ°å­˜å‚¨"><a href="#æœ¬åœ°å­˜å‚¨" class="headerlink" title="æœ¬åœ°å­˜å‚¨"></a>æœ¬åœ°å­˜å‚¨</h2><ul><li><a href="https://www.npmjs.com/package/react-native-simple-store">react-native-simple-storage</a>:  AsyncStorage çš„ä¸€ä¸ªç®€å•åŒ…è£…å™¨</li><li><a href="https://github.com/pubkey/rxdb">rxdb</a>:  JavaScript å³æ—¶æ•°æ®åº“ï¼Œå¦‚æœæœ‰å¤æ‚çš„ç¼“å­˜ä¸šåŠ¡å¯ä»¥è€ƒè™‘ä½¿ç”¨</li><li><a href="https://github.com/Nozbe/WatermelonDB">watermelonDB</a>: ä¸€ä¸ªä¸“ä¸º Reactã€React Native æœåŠ¡çš„å“åº”å¼æ•°æ®åº“æ¡†æ¶</li></ul><h2 id="å¯åŠ¨å±"><a href="#å¯åŠ¨å±" class="headerlink" title="å¯åŠ¨å±"></a>å¯åŠ¨å±</h2><ul><li><a href="https://github.com/crazycodeboy/react-native-splash-screen">react-native-splash-screen</a></li></ul><blockquote><p>å¯åŠ¨å±çš„é…ç½®æ¶‰åŠåˆ°ä¸å°‘åŸç”ŸçŸ¥è¯†ï¼Œè¯·é˜…è¯» <a href="https://bre.is/CRC2SkqP">https://bre.is/CRC2SkqP</a> è¿›è¡Œé…ç½®ã€‚</p></blockquote><h2 id="çƒ­æ›´æ–°"><a href="#çƒ­æ›´æ–°" class="headerlink" title="çƒ­æ›´æ–°"></a>çƒ­æ›´æ–°</h2><ul><li><a href="https://update.reactnative.cn/home">react-native-pushy</a>: ReactNativeä¸­æ–‡ç½‘æ¨å‡ºçš„ä»£ç çƒ­æ›´æ–°æœåŠ¡ï¼Œå…è´¹ï¼Œä½†æ˜¯é™åˆ¶å¤šï¼Œä¸æ¨èä½¿ç”¨</li><li><a href="https://github.com/microsoft/react-native-code-push">react-native-code-push</a> + <a href="https://appcenter.ms/">AppCenter</a>ï¼šå®Œå…¨å…è´¹ï¼Œå›½å†…é€Ÿåº¦å¯èƒ½æ…¢ï¼Œé€‚åˆä¸ªäººå¼€å‘è€…ã€æ¨èã€‘</li><li><a href="https://github.com/microsoft/react-native-code-push">react-native-code-push</a> + <a href="https://github.com/lisong/code-push-server">code-push-server</a>ï¼šé€‚åˆå…¬å¸è‡ªå»ºçƒ­æ›´æ–°æœåŠ¡å™¨</li></ul><blockquote><p>æ–°ç‰ˆçƒ­æ›´æ–°éƒ¨åˆ†æˆ‘è¿˜æ²¡å†™å¥½åšå®¢ï¼Œå¯ä»¥å…ˆå‚è€ƒæˆ‘ä¹‹å‰å†™çš„ï¼š <a href="http://techblog.sishuxuefu.com/atricle.html?5beaa7e59f5454007039e01c%EF%BC%8C%E6%88%91%E4%BC%9A%E5%9C%A8%E7%9C%8B%E5%AE%8C%E6%96%B0%E6%96%87%E6%A1%A3%E4%B9%8B%E5%90%8E%E6%8A%8A%E8%BF%99%E9%83%A8%E5%88%86%E9%85%8D%E7%BD%AE%E4%B9%9F%E5%86%85%E7%BD%AE%E5%88%B0%E8%84%9A%E6%89%8B%E6%9E%B6%E4%B8%AD%EF%BC%8C%E6%AF%95%E7%AB%9F%E8%BF%99%E4%B8%AA%E6%9C%8D%E5%8A%A1%E4%B9%9F%E6%98%AF">http://techblog.sishuxuefu.com/atricle.html?5beaa7e59f5454007039e01cï¼Œæˆ‘ä¼šåœ¨çœ‹å®Œæ–°æ–‡æ¡£ä¹‹åæŠŠè¿™éƒ¨åˆ†é…ç½®ä¹Ÿå†…ç½®åˆ°è„šæ‰‹æ¶ä¸­ï¼Œæ¯•ç«Ÿè¿™ä¸ªæœåŠ¡ä¹Ÿæ˜¯</a> React Native çš„æ ‡é…ã€‚</p></blockquote><h2 id="UIæ¡†æ¶"><a href="#UIæ¡†æ¶" class="headerlink" title="UIæ¡†æ¶"></a>UIæ¡†æ¶</h2><ul><li><a href="https://rn.mobile.ant.design/index-cn">@ant-design&#x2F;react-native</a>:  Ant Design å‡ºå“çš„ä¸€ä¸ªåŸºäº React Native çš„ UI ç»„ä»¶åº“</li><li><a href="https://github.com/Meituan-Dianping/beeshell">beeshell</a>: ç¾å›¢ React Native ç»„ä»¶åº“</li><li><a href="https://react-native-elements.github.io/react-native-elements/">react-native-elements</a>: è·¨å¹³å°React Native UIå·¥å…·åŒ…</li><li><a href="https://github.com/wix/react-native-ui-lib">react-native-ui-lib</a>: æ²¡æœ‰ä½“éªŒè¿‡ï¼Œçœ‹èµ·æ¥å¾ˆå¼ºå¤§</li></ul><blockquote><p>å…¶ä»–ç»„ä»¶æ”¶è—è¯·æŸ¥çœ‹ï¼š<a href="https://bre.is/jWUGvPrK">https://bre.is/jWUGvPrK</a></p></blockquote><h2 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h2><ul><li><a href="https://bre.is/yqJ2EEdL">mobx+react-native-largelist å®ç°åˆ†é¡µåŠŸèƒ½</a>: æ¨èä½¿ç”¨ <a href="https://github.com/bolan9999/react-native-largelist">react-native-largelist-v3</a>ï¼Œæ”¯æŒä¸‹æ‹‰åˆ·æ–°ã€ä¸Šæ‹‰åŠ è½½æ›´å¤šã€åˆ†ç»„åˆ—è¡¨ã€è¡¨æ ¼å’Œç€‘å¸ƒæµ</li><li>è‡ªè¡Œå°è£… <code>FlatList</code>ã€<code>SectionList</code>: å¹¶ä¸å¤æ‚ï¼Œå»ºè®®è¿˜æ˜¯è¦å›æ‰‹å†™çš„ï¼Œreact-native-largelist-v3 ä¸ä¸€å®šèƒ½æ»¡è¶³æ‰€æœ‰åœºæ™¯</li></ul><h2 id="å›¾æ ‡"><a href="#å›¾æ ‡" class="headerlink" title="å›¾æ ‡"></a>å›¾æ ‡</h2><ul><li><a href="https://www.npmjs.com/package/react-native-iconfont-cli">react-native-iconfont-cli</a>: ã€æ¨èã€‘ç”¨çº¯JSæŠŠå›¾æ ‡è½¬æ¢æˆRNç»„ä»¶ï¼Œä¸ä¾èµ–å­—ä½“ï¼Œæ”¯æŒå¤šè‰²å½©ï¼Œæ”¯æŒçƒ­æ›´æ–°</li><li><a href="https://bre.is/dfCDM2Kw">@ant-design&#x2F;icons-react-native</a>: Ant Design Icons for React Native</li><li><a href="https://github.com/oblador/react-native-vector-icons">react-native-vector-icons</a>: Perfect for buttons, logos and nav&#x2F;tab bars. Easy to extend, style and integrate into your project.</li></ul><h2 id="å­—ä½“"><a href="#å­—ä½“" class="headerlink" title="å­—ä½“"></a>å­—ä½“</h2><ul><li><a href="https://github.com/react-native-training/react-native-fonts">react-native-fonts</a>: åœ¨React Nativeé¡¹ç›®ä¸­å¼€ç®±å³ç”¨çš„å¯ç”¨å­—ä½“ï¼Œè¿™ä¸ªåº“åªæ˜¯ç»Ÿè®¡äº†ä¸€ä¸‹ React Native ä¸­å¯ç”¨çš„å­—ä½“è€Œå·²</li><li><a href="https://juejin.im/entry/59c74c91f265da065c5e9282">React Native é…ç½®è‡ªå®šä¹‰å­—ä½“</a></li><li><a href="https://bre.is/N2NqkX4N">React Native Custom Fonts</a></li><li><a href="https://github.com/heyman333/react-native-responsive-fontSize">react-native-responsive-fontSize</a>: å“åº”å¼fontSizeåŸºäºReact Nativeä¸­è®¾å¤‡çš„å±å¹•å°ºå¯¸</li><li><a href="https://bre.is/WTxnrfPV">React Native é…ç½®å­—ä½“å¤§å°ä¸éšå­—ä½“è®¾ç½®å˜åŒ–</a></li><li><a href="https://juejin.im/post/5ce66c26e51d4555fd20a2a0">React Nativeå­—ä½“é—®é¢˜è§£å†³æ–¹æ¡ˆæŒ‡åŒ—</a></li><li><a href="https://www.npmjs.com/package/react-native-responsive-fontsize">react-native-responsive-fontsize</a></li></ul><h2 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h2><ul><li><a href="https://ethercreative.github.io/react-native-shadow-generator/">react-native-shadow-generator</a>: åœ¨çº¿ç”Ÿæˆ React Native é˜´å½±ä»£ç </li><li><a href="https://github.com/JonnyBurger/npx-visualize-bundle">visualize-bundle</a>: <code>npx visualize-bundle</code> å…è®¸ä½ ä¸€é”®æ£€æŸ¥ä½ çš„ React Native bundle åŒ… å¹¶ä¸”æ‰¾åˆ°å¤§çš„ä¾èµ–</li><li><a href="https://icon.wuruihong.com/">å›¾æ ‡å·¥å‚</a>: ä¸€é”®ç”Ÿæˆæ‰€æœ‰å°ºå¯¸çš„åº”ç”¨å›¾æ ‡&#x2F;å¯åŠ¨å›¾</li></ul><h2 id="React-Hooks"><a href="#React-Hooks" class="headerlink" title="React Hooks"></a>React Hooks</h2><p>è¿™ä¸ªæ–°è¯­æ³•æ˜¯2019å¹´çš„æ˜æ˜Ÿï¼ŒReact Navigationã€Mobxè¿™äº›å¸¸ç”¨åº“éƒ½å†…ç½®æ”¯æŒäº†ï¼Œè¿˜æ²¡æœ‰å­¦ä¹ çš„åŒå­¦å¿«å»è¡¥è¯¾å§ï¼ï¼ï¼</p><h3 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h3><blockquote><p>å»ºè®®å…ˆè¯»å®˜æ–¹æ–‡æ¡£ï¼ï¼ï¼</p></blockquote><ul><li><a href="https://zh-hans.reactjs.org/docs/hooks-intro.html">å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://juejin.im/post/5be3ea136fb9a049f9121014">30åˆ†é’Ÿç²¾é€šReact Hooks</a></li><li><a href="https://juejin.im/post/5dbbdbd5f265da4d4b5fe57d">React Hooks è¯¦è§£ ã€è¿‘ 1W å­—ã€‘+ é¡¹ç›®å®æˆ˜</a></li><li><a href="https://juejin.im/post/5d985deae51d4577f9285c2f">å‘•å¿ƒæ²¥è¡€ï¼Œä¸€æ–‡çœ‹æ‡‚ react hooks</a></li><li><a href="https://zhuanlan.zhihu.com/p/86211675">React Hooks å¸¦æ¥çš„å›°æ‰°ä¸æ€è€ƒ</a></li></ul><h3 id="å¦‚ä½•å…¼å®¹ç±»ç»„ä»¶"><a href="#å¦‚ä½•å…¼å®¹ç±»ç»„ä»¶" class="headerlink" title="å¦‚ä½•å…¼å®¹ç±»ç»„ä»¶"></a>å¦‚ä½•å…¼å®¹ç±»ç»„ä»¶</h3><p>è€ƒè™‘åˆ°å¯¹äºä¸é€‚åº” Hooks çš„ä½†æ˜¯ä¸šåŠ¡åˆå¾ˆç´§æ€¥çš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç±»ç»„ä»¶ä¹‹ä¸Šå°è£…ä¸€å±‚æ¥æ”¯æŒ React Navigation çš„ Hooks ç»„ä»¶ï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆåšï¼Œèµ·å› æ˜¯å› ä¸º React Navigation 5 ä¸­æˆ‘ä»¬åªèƒ½é€šè¿‡ <code>useHeaderHeight()</code> æ–¹æ³•è·å–æ ‡é¢˜æ é«˜åº¦ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Albums</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ScrollView</span> <span class="attr">ref</span>=<span class="string">&#123;this.props.scrollRef&#125;</span>&gt;</span><span class="tag">&lt;<span class="name">Text</span>&gt;</span>&#123;this.props.headerHeight&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span><span class="tag">&lt;/<span class="name">ScrollView</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å°è£…å¹¶å¯¼å‡º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> ref = <span class="title class_">React</span>.<span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> headerHeight = <span class="title function_">useHeaderHeight</span>();</span><br><span class="line">  <span class="title function_">useScrollToTop</span>(ref);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Albums</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">scrollRef</span>=<span class="string">&#123;ref&#125;</span> <span class="attr">headerHeight</span>=<span class="string">&#123;headerHeight&#125;/</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Metro"><a href="#Metro" class="headerlink" title="Metro"></a>Metro</h2><ul><li><a href="https://juejin.im/post/5e54d910f265da571671090d">åˆ©ç”¨Metroé…ç½®React Nativeç«¯å£</a></li></ul><h2 id="ç¬¬ä¸‰æ”¾æœåŠ¡"><a href="#ç¬¬ä¸‰æ”¾æœåŠ¡" class="headerlink" title="ç¬¬ä¸‰æ”¾æœåŠ¡"></a>ç¬¬ä¸‰æ”¾æœåŠ¡</h2><blockquote><p>è¿™é‡Œå°½é‡ä¸ºå¤§å®¶æ¨èäº†å…è´¹çš„æœåŠ¡ï¼Œå½“ç„¶é€‰æ‹©è‡ªè¡Œæ­å»ºæœåŠ¡ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆæ£’çš„é€‰æ‹©ï¼ï¼</p></blockquote><h3 id="Sentry"><a href="#Sentry" class="headerlink" title="Sentry"></a><a href="https://sentry.io/welcome/">Sentry</a></h3><blockquote><p>Sentry èƒœåœ¨å¯ä»¥æŠŠæœåŠ¡æ­å»ºåˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œå¹¶ä¸”å®˜æ–¹æä¾›äº†<a href="https://github.com/getsentry/sentry-react-native">sentry-react-native</a>æ’ä»¶æ¥å¸®åŠ© React Native å·¥ç¨‹å¸ˆå¿«é€Ÿé›†æˆã€‚å¦‚æœæœ‰æ¡ä»¶ï¼Œé€‰æ‹© Sentry ææ€•æ˜¯ç›®å‰è¡Œä¸šçš„æœ€ä½³é€‰æ‹©ã€‚</p></blockquote><p>Sentryæä¾›è‡ªæ‰˜ç®¡å’ŒåŸºäºäº‘çš„é”™è¯¯ç›‘æ§ï¼Œå¯å¸®åŠ©æ‰€æœ‰è½¯ä»¶å›¢é˜Ÿå®æ—¶å‘ç°åˆ†ç±»å’Œç¡®å®šé”™è¯¯çš„ä¼˜å…ˆçº§ã€‚å·²ç»æœ‰è¶…è¿‡äº”ä¸‡å®¶å…¬å¸çš„100ä¸‡åå¼€å‘äººå‘˜ä½¿ç”¨ï¼ŒSentryå¯ä»¥æ›´å¿«åœ°æä¾›æ›´å¥½çš„è½¯ä»¶ã€‚ä½ ä¸åŠ å…¥ä»–ä»¬å—ï¼Ÿ</p><h3 id="è…¾è®¯-Bugly"><a href="#è…¾è®¯-Bugly" class="headerlink" title="è…¾è®¯ Bugly"></a><a href="https://bugly.qq.com/v2/">è…¾è®¯ Bugly</a></h3><p>è…¾è®¯Buglyï¼Œä¸ºç§»åŠ¨å¼€å‘è€…æä¾›ä¸“ä¸šçš„å¼‚å¸¸ä¸ŠæŠ¥å’Œè¿è¥ç»Ÿè®¡ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå‘ç°å¹¶è§£å†³å¼‚å¸¸ï¼ŒåŒæ—¶æŒæ¡äº§å“è¿è¥åŠ¨æ€ï¼ŒåŠæ—¶è·Ÿè¿›ç”¨æˆ·åé¦ˆã€‚å…è´¹æä¾›å¼‚å¸¸ä¸ŠæŠ¥ã€è¿è¥ç»Ÿè®¡ã€åº”ç”¨å‡çº§</p><h3 id="æ¨é€"><a href="#æ¨é€" class="headerlink" title="æ¨é€"></a>æ¨é€</h3><h4 id="ä¿¡é¸½-è…¾è®¯ç§»åŠ¨æ¨é€"><a href="#ä¿¡é¸½-è…¾è®¯ç§»åŠ¨æ¨é€" class="headerlink" title="ä¿¡é¸½ | è…¾è®¯ç§»åŠ¨æ¨é€"></a><a href="https://xg.qq.com/">ä¿¡é¸½ | è…¾è®¯ç§»åŠ¨æ¨é€</a></h4><p>ä¸ºå¼€å‘è€…æä¾›å…è´¹ã€å¿«é€Ÿã€ç®€å•çš„æ¨é€æœåŠ¡ã€‚QQç™»å½•å³å¯å¿«é€Ÿæ³¨å†Œï¼Œä¸ºAPPæ¥å…¥SDKåé©¬ä¸Šè·å¾—æ— é™é‡åº”ç”¨æ¨é€èƒ½åŠ›ï¼Œ<br>æœ‰æ•ˆæå‡ç”¨æˆ·ç•™å­˜ç‡ã€æ´»è·ƒåº¦ï¼Œå¼€å‘è€…çš„ä¸äºŒé€‰æ‹©ï¼</p><h4 id="å°ç±³æ¶ˆæ¯æ¨é€æœåŠ¡"><a href="#å°ç±³æ¶ˆæ¯æ¨é€æœåŠ¡" class="headerlink" title="å°ç±³æ¶ˆæ¯æ¨é€æœåŠ¡"></a><a href="https://dev.mi.com/console/appservice/push.html">å°ç±³æ¶ˆæ¯æ¨é€æœåŠ¡</a></h4><ul><li>MIUIä¸Šç³»ç»Ÿçº§é€šé“</li><li>iOS&#x2F;Androidå…¨å¹³å°æ”¯æŒ</li><li>å…è´¹ ç¨³å®š å®‰å…¨ é«˜æ•ˆ</li></ul><h4 id="æå…‰æ¨é€"><a href="#æå…‰æ¨é€" class="headerlink" title="æå…‰æ¨é€"></a><a href="https://www.jiguang.cn/push">æå…‰æ¨é€</a></h4><p>æå…‰æ¨é€æœåŠ¡ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨ï¼Œä½†é™åˆ¶è¾ƒå¤šã€‚å®˜æ–¹SDK, React Native é›†æˆå®¹æ˜“</p><h4 id="U-Push"><a href="#U-Push" class="headerlink" title="U-Push"></a><a href="https://www.umeng.com/push">U-Push</a></h4><p>å’Œæå…‰å±äºä¸€ç±»ï¼Œé™åˆ¶çº§å…è´¹ï¼Œå‹ç›Ÿçš„äº§å“èƒœåœ¨ç”Ÿæ€ï¼Œå…¬å¸äº§å“è€ƒè™‘ï¼ŒåæœŸç”¨æˆ·ä¸Šæ¥ä¹‹åæ–¹ä¾¿æ‰©å±•ã€‚</p><h3 id="ç¤¾ä¼šåŒ–åˆ†äº«"><a href="#ç¤¾ä¼šåŒ–åˆ†äº«" class="headerlink" title="ç¤¾ä¼šåŒ–åˆ†äº«"></a>ç¤¾ä¼šåŒ–åˆ†äº«</h3><h4 id="ShareSDK"><a href="#ShareSDK" class="headerlink" title="ShareSDK"></a><a href="http://www.mob.com/mobService/sharesdk">ShareSDK</a></h4><p>ä¸ºå¼€å‘è€…æä¾›40+ä¸»æµå¹³å°çš„åˆ†äº«ä¸æˆæƒç­‰ç¤¾ä¼šåŒ–åŠŸèƒ½ï¼Œæ•ˆæœç¨³å®šï¼Œå®Œæ•´æ¸…æ™°ç»Ÿè®¡åˆ†äº«æ•°æ®</p><ul><li>ä¸€é”®åˆ†äº«</li><li>ç¬¬ä¸‰æ–¹ç™»å½•</li><li>é—­ç¯åˆ†äº«</li><li>çŸ­é“¾è½¬æ¢</li><li>æ•°æ®ç»Ÿè®¡</li><li>æ–°æµªå¾®åšç‹¬å®¶LinkCard</li></ul><h4 id="jshare"><a href="#jshare" class="headerlink" title="jshare"></a><a href="https://github.com/jpush/jshare-react-native">jshare</a></h4><ul><li>ä¸€é”®åˆ†äº«</li><li>ç¬¬ä¸‰æ”¾ç™»å½•</li><li>ç¤¾ä¼šåŒ–ç»Ÿè®¡</li><li>å®˜æ–¹ React Native SDK é›†æˆæ–¹ä¾¿</li></ul><h3 id="U-Share"><a href="#U-Share" class="headerlink" title="U-Share"></a><a href="https://bre.is/LM3eaCsL">U-Share</a></h3><ul><li>å…¨é¢è¦†ç›–å›½å†…å¤–ç¤¾äº¤å¹³å°</li><li>é›†æˆæˆæœ¬ä½ã€é€Ÿåº¦å¿«</li><li>è‡ªç”±å®šåˆ¶åˆ†äº«ç•Œé¢</li><li>æƒå¨ã€å®æ—¶çš„å¤§æ•°æ®åˆ†æ</li></ul><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><ul><li><a href="https://github.com/yorkie/react-native-wechat">react-native-wechat</a>: ğŸš€ <strong>WeChat login</strong>, <strong>share</strong>, <strong>favorite</strong> and <strong>payment</strong> for React-Native on iOS and Android platforms</li><li><a href="https://github.com/0x5e/react-native-alipay">@0x5e&#x2F;react-native-alipay</a>: Alipay SDK for React Native. Support mobile webpage url payment. Support RN &gt;&#x3D; 0.47.</li></ul><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><blockquote><p>è¿™éƒ¨åˆ†ä½œè€…çš„ç†è§£ä»…é™äº Jestï¼Œæœ‰å¤§ä½¬å¯ä»¥è”ç³»æˆ‘è¡¥å……ï¼ï¼ï¼</p></blockquote><ul><li><a href="https://jestjs.io/zh-Hans/">Jest</a>: Jestæ˜¯ä¸€ä¸ªä»¤äººæ„‰å¿«çš„ JavaScript æµ‹è¯•æ¡†æ¶ï¼Œä¸“æ³¨äºç®€æ´æ˜å¿«ã€‚React Native å·²ç»é›†æˆå¥½äº†ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</li></ul><h2 id="è‡ªåŠ¨åŒ–è¿ç»´"><a href="#è‡ªåŠ¨åŒ–è¿ç»´" class="headerlink" title="è‡ªåŠ¨åŒ–è¿ç»´"></a>è‡ªåŠ¨åŒ–è¿ç»´</h2><blockquote><p>è¿™éƒ¨åˆ†ä½œè€…æ¥è§¦ä¸æ·±ï¼ŒåªçŸ¥é“ Jekens + GitLab çš„æ–¹æ¡ˆ</p></blockquote><h3 id="shell-æ–‡ä»¶çš„å‘"><a href="#shell-æ–‡ä»¶çš„å‘" class="headerlink" title="shell æ–‡ä»¶çš„å‘"></a>shell æ–‡ä»¶çš„å‘</h3><p>ä¸ºäº†å®‰å…¨æ€§ shell æ–‡ä»¶é»˜è®¤éƒ½æ˜¯ä¸å¯æ‰§è¡Œçš„ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬ <code>android/gradlew</code> è¿™ä¸ªç”¨æ¥æ‰“åŒ…çš„è„šæœ¬æ–‡ä»¶ï¼Œè¿™ä¼šç»™æŒç»­é›†æˆå¸¦æ¥éº»çƒ¦ï¼šè¿ç»´åŒå­¦é»˜è®¤æ˜¯æ‰§è¡Œä¸äº†æˆ‘ä»¬çš„æ‰“åŒ…å‘½ä»¤çš„ã€‚è§£å†³åŠæ³•å¾ˆç®€å•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git update-index --add --<span class="built_in">chmod</span>=+x android/gradlew</span></span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€è®¾ç½®-package-json-çš„ç‰ˆæœ¬"><a href="#åŠ¨æ€è®¾ç½®-package-json-çš„ç‰ˆæœ¬" class="headerlink" title="åŠ¨æ€è®¾ç½® package.json çš„ç‰ˆæœ¬"></a>åŠ¨æ€è®¾ç½® package.json çš„ç‰ˆæœ¬</h3><p>set-version.sh:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># current_git_branch_latest_id=`git rev-parse HEAD`</span></span><br><span class="line">current_git_branch_latest_short_id=`git rev-parse --short HEAD`</span><br><span class="line">current_os=`<span class="built_in">uname</span> -s`</span><br><span class="line"></span><br><span class="line"><span class="comment"># echo current git branch latest commit id=$current_git_branch_latest_id</span></span><br><span class="line"><span class="built_in">echo</span> current git branch latest commit short <span class="built_in">id</span>=<span class="variable">$current_git_branch_latest_short_id</span></span><br><span class="line"><span class="built_in">echo</span> current os=<span class="variable">$current_os</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$current_os</span>&quot;</span> == <span class="string">&quot;Darwin&quot;</span> ]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">  sed -i <span class="string">&#x27;&#x27;</span> <span class="string">&#x27;s/&quot;version&quot;.*/&quot;version&quot;: &quot;1.0.0-&#x27;</span><span class="variable">$current_git_branch_latest_short_id</span><span class="string">&#x27;&quot;,/g&#x27;</span> package.json</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> windows</span><br><span class="line">  sed -i <span class="string">&#x27;s/&quot;version&quot;.*/&quot;version&quot;: &quot;&#x27;</span><span class="variable">$current_git_branch_latest_short_id</span><span class="string">&#x27;&quot;,/g&#x27;</span> package.json</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>package.json:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// ä¾èµ– husky</span></span><br><span class="line">  <span class="attr">&quot;husky&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;hooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;pre-commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;post-commit&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;./scripts/set-version.sh&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;git add .&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;git commit -m bump version&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;git push&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="å®˜æ–¹ç»„ä»¶ç¼ºé™·å¤„ç†"><a href="#å®˜æ–¹ç»„ä»¶ç¼ºé™·å¤„ç†" class="headerlink" title="å®˜æ–¹ç»„ä»¶ç¼ºé™·å¤„ç†"></a>å®˜æ–¹ç»„ä»¶ç¼ºé™·å¤„ç†</h2><ul><li><a href="https://github.com/youngjuning/blog/issues/7">React Native è§£å†³Image åœ†è§’åœ¨å®‰å“ä¸Šé¢æ²¡æ•ˆæœ</a></li><li><a href="https://github.com/youngjuning/blog/issues/6">React Native å¤„ç†Androidç³»ç»Ÿä¸Šæ–‡å­—åä¸‹çš„é—®é¢˜</a></li><li><a href="https://github.com/youngjuning/blog/issues/5">React Native è‡ªå®šä¹‰ TextInput é«˜åº¦çš„é—®é¢˜</a></li><li><a href="https://github.com/youngjuning/blog/issues/32">[Android] Using TextInput inside ViewPagerAndroid causes context menu (copy&#x2F;paste) in some cases to not display</a></li></ul><h2 id="VsCode-æ’ä»¶æ¨è"><a href="#VsCode-æ’ä»¶æ¨è" class="headerlink" title="VsCode æ’ä»¶æ¨è"></a>VsCode æ’ä»¶æ¨è</h2><ul><li>React Native TypeScript Snippets: æœ¬äººå¼€å‘ï¼Œä¸»è¦æœåŠ¡äºæœ¬æ–‡çš„æ¶æ„ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ­å»ºé¡µé¢å’Œç»„ä»¶ï¼Œå‡¡æ˜¯é‡å¤çš„å·¥ä½œéƒ½å¯ä»¥é å·¥å…·æ¥è§£å†³ï¼Œä¸€ä¸ªä¸å¤Ÿï¼Œå°±æ¥ä¿©ï¼ï¼ï¼</li><li>ES7 React&#x2F;Redux&#x2F;GraphQL&#x2F;React-Native Snippets</li></ul><h2 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h2><h3 id="è‡ªåŠ¨-remove-console-è¯­å¥"><a href="#è‡ªåŠ¨-remove-console-è¯­å¥" class="headerlink" title="è‡ªåŠ¨ remove console è¯­å¥"></a>è‡ªåŠ¨ remove console è¯­å¥</h3><p>å‡†ç¡®åœ°è¯´ï¼Œæ˜¯åœ¨æ­£å¼ç¯å¢ƒä¸‹åˆ é™¤ <code>console</code> è¯­å¥ï¼Œé…ç½®æ–¹å¼è¯·å‚è€ƒ <a href="https://bre.is/2CTUZyUj">è‡ªåŠ¨ remove console è¯­å¥</a></p><h3 id="æ¨èé˜…è¯»-1"><a href="#æ¨èé˜…è¯»-1" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h3><ul><li><a href="https://juejin.im/post/5e1676e16fb9a04847095b12">React Native æ€§èƒ½ä¼˜åŒ–æŒ‡å—ã€å…¨ç½‘æœ€å…¨ï¼Œå€¼å¾—æ”¶è—ã€‘</a></li></ul><h2 id="åº”ç”¨å†…æµ‹"><a href="#åº”ç”¨å†…æµ‹" class="headerlink" title="åº”ç”¨å†…æµ‹"></a>åº”ç”¨å†…æµ‹</h2><ul><li><a href="https://fir.im/">fir</a>: å…è´¹åº”ç”¨å†…æµ‹æ‰˜ç®¡å¹³å°</li><li><a href="https://www.pgyer.com/">è’²å…¬è‹±</a>: å…è´¹çš„è‹¹æœiosåº”ç”¨appå†…æµ‹åˆ†å‘æ‰˜ç®¡ã€androidå®‰å“appå†…æµ‹åˆ†å‘æ‰˜ç®¡ã€iosä¼ä¸šç­¾åã€iosä¸“å±ç­¾åã€iosè¶…çº§ç­¾åã€iosä¼ä¸šè´¦å·</li></ul><h2 id="å®‰å“å¿…çŸ¥å¿…ä¼š"><a href="#å®‰å“å¿…çŸ¥å¿…ä¼š" class="headerlink" title="å®‰å“å¿…çŸ¥å¿…ä¼š"></a>å®‰å“å¿…çŸ¥å¿…ä¼š</h2><h3 id="é…ç½®åº”ç”¨å"><a href="#é…ç½®åº”ç”¨å" class="headerlink" title="é…ç½®åº”ç”¨å"></a>é…ç½®åº”ç”¨å</h3><p>å¾ˆç®€å•,æˆ‘ä»¬ç›´æ¥æ‰“å¼€ <code>android/app/src/main/res/values/strings.xml</code>ï¼Œå³å¯çœ‹åˆ°é…ç½®ä¸­çš„ <code>app_name</code>ï¼Œä¿®æ”¹ä¸ºä½ æƒ³è¦çš„å³å¯ã€‚</p><blockquote><p>ä½ å¯ä»¥åœ¨åˆå§‹åŒ–é¡¹ç›®çš„æ—¶å€™æŒ‡å®šåº”ç”¨çš„åå­—ï¼Œåƒè¿™æ ·ï¼š<code>npx react-native init MyApp --title æ˜é‡‘</code></p></blockquote><h3 id="é…ç½®å›¾æ ‡"><a href="#é…ç½®å›¾æ ‡" class="headerlink" title="é…ç½®å›¾æ ‡"></a>é…ç½®å›¾æ ‡</h3><p>1ã€ä½¿ç”¨<a href="https://icon.wuruihong.com/">å›¾æ ‡å·¥å‚</a>ã€<a href="https://www.npmjs.com/package/react-native-svg-app-icon">react-native-svg-app-icon</a> æˆ–è€…è®©è®¾è®¡å¸ˆç»™å›¾ç‰‡</p><p>2ã€åœ¨ <code>android\app\src\main\res\mipmap-xxxxxx</code> ä¸­ç›´æ¥è¦†ç›–å›¾æ ‡å°±å¯ä»¥ï¼Œæ³¨æ„å›¾æ ‡çš„å¤§å°ã€‚</p><h3 id="æ‰“åŒ…-APK"><a href="#æ‰“åŒ…-APK" class="headerlink" title="æ‰“åŒ… APK"></a>æ‰“åŒ… APK</h3><p>1ã€åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ <code>keytool -genkeypair -v -keystore release.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000</code> ç”Ÿæˆå¯†é’¥æ–‡ä»¶ <code>release.keystore</code></p><p>2ã€æŠŠ <code>release.keystore</code> æ–‡ä»¶æ”¾åˆ°ä½ å·¥ç¨‹ä¸­çš„ <code>android/app</code> æ–‡ä»¶å¤¹ä¸‹ã€‚</p><p>3ã€é…ç½® <code>android/app/build.gradle</code></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">android&#123;</span><br><span class="line">    ...</span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            storeFile file(<span class="string">&quot;release.keystore&quot;</span>)</span><br><span class="line">            storePassword <span class="string">&quot;****&quot;</span></span><br><span class="line">            keyAlias <span class="string">&quot;my-key-alias&quot;</span></span><br><span class="line">            keyPassword <span class="string">&quot;****&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            ...</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰“åŒ…ä¼˜åŒ–"><a href="#æ‰“åŒ…ä¼˜åŒ–" class="headerlink" title="æ‰“åŒ…ä¼˜åŒ–"></a>æ‰“åŒ…ä¼˜åŒ–</h3><h4 id="å»é™¤æ— ç”¨çš„è¯­è¨€èµ„æº"><a href="#å»é™¤æ— ç”¨çš„è¯­è¨€èµ„æº" class="headerlink" title="å»é™¤æ— ç”¨çš„è¯­è¨€èµ„æº"></a>å»é™¤æ— ç”¨çš„è¯­è¨€èµ„æº</h4><p>é€šè¿‡é…ç½® <code>android/defaultConfig/resConfigs</code> å¯ä»¥é€‰æ‹©åªæ‰“åŒ…å“ªå‡ ç§è¯­è¨€ï¼Œè¿›è€Œå»æ‰å„ç§ <code>aar</code> åŒ…ä¸­å…¨ä¸–ç•Œçš„è¯­è¨€ï¼Œå°¤å…¶æ˜¯ <code>support</code> åŒ…ä¸­çš„ã€‚</p><p>é€‰æ‹©ä¿ç•™ä»€ä¹ˆè¯­è¨€è¦æ ¹æ®äº§å“çš„ç”¨æˆ·å’Œå¸‚åœºæ¥å®šï¼Œå¦‚æœåªé€‰æ‹©é»˜è®¤è‹±è¯­å’Œä¸­æ–‡è¯­è¨€ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line">resConfigs <span class="string">&quot;en&quot;</span>,<span class="string">&quot;zh&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é…ç½®-PackagingOptions"><a href="#é…ç½®-PackagingOptions" class="headerlink" title="é…ç½® PackagingOptions"></a>é…ç½® PackagingOptions</h4><p>æ‰“å¼€ <code>android/app/build.gradle</code> æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">packagingOptions &#123;</span><br><span class="line">    exclude <span class="string">&#x27;META-INF/android_release.kotlin_module&#x27;</span></span><br><span class="line">    exclude <span class="string">&#x27;META-INF/DEPENDENCIES&#x27;</span></span><br><span class="line">    exclude <span class="string">&#x27;META-INF/LICENSE&#x27;</span></span><br><span class="line">    exclude <span class="string">&#x27;META-INF/LICENSE.txt&#x27;</span></span><br><span class="line">    exclude <span class="string">&#x27;META-INF/license.txt&#x27;</span></span><br><span class="line">    exclude <span class="string">&#x27;META-INF/NOTICE&#x27;</span></span><br><span class="line">    exclude <span class="string">&#x27;META-INF/NOTICE.txt&#x27;</span></span><br><span class="line">    exclude <span class="string">&#x27;META-INF/notice.txt&#x27;</span></span><br><span class="line">    exclude <span class="string">&#x27;META-INF/ASL2.0&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>pickFirsts</code>: å½“å‡ºç°é‡å¤æ–‡ä»¶ï¼Œä¼šä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶æ‰“åŒ…è¿›å…¥ apk</li><li><code>merges</code>: å½“å‡ºç°é‡å¤æ–‡ä»¶ï¼Œåˆå¹¶é‡å¤çš„æ–‡ä»¶æ‰“å…¥ apk</li><li><code>excludes</code>: æ‰“åŒ…çš„æ—¶å€™æ’é™¤åŒ¹é…çš„æ–‡ä»¶</li></ul><h4 id="é…ç½®-splits"><a href="#é…ç½®-splits" class="headerlink" title="é…ç½® splits"></a>é…ç½® splits</h4><blockquote><p>æŸ¥çœ‹æ‰‹æœº CPU ä¿¡æ¯ï¼š<code>adb shell</code> -&gt; <code>cd /proc</code> -&gt; <code>cat cpuinfo</code></p></blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„ <code>APK</code> ä¼šåŒæ—¶åŒ…å«é’ˆå¯¹äº <code>x86</code> å’Œ <code>ARMv7a</code> ä¸¤ç§ <code>CPU</code> æ¶æ„çš„åŸç”Ÿä»£ç ã€‚è¿™æ ·å¯ä»¥è®©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„å‘å…¶ä»–äººåˆ†äº«è¿™ä¸ª <code>APK</code>ï¼Œå› ä¸ºå®ƒå‡ ä¹å¯ä»¥è¿è¡Œåœ¨æ‰€æœ‰çš„ Android è®¾å¤‡ä¸Šã€‚ä½†æ˜¯ï¼Œè¿™ä¼šå¯¼è‡´æ‰€æœ‰è®¾å¤‡ä¸Šéƒ½æœ‰ä¸€äº›æ ¹æœ¬ä¸ä¼šè¿è¡Œçš„ä»£ç ï¼Œç™½ç™½å æ®äº†ç©ºé—´ã€‚ç›®å‰å®‰å“è®¾å¤‡ç»å¤§å¤šæ•°æ˜¯ <code>ARM</code> æ¶æ„ï¼Œå› æ­¤å¯¹äºå¤§éƒ¨åˆ†åº”ç”¨æ¥è¯´å¯ä»¥è€ƒè™‘å»æ‰ <code>x86</code> æ¶æ„çš„æ”¯æŒã€‚</p><p>ä½ å¯ä»¥åœ¨ <code>android/app/build.gradle</code> ä¸­ä¿®æ”¹å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- include &quot;armeabi-v7a&quot;, &quot;x86&quot;, &quot;arm64-v8a&quot;, &quot;x86_64&quot;</span></span><br><span class="line"><span class="addition">+ include &quot;armeabi-v7a&quot;, &quot;arm64-v8a&quot;</span></span><br><span class="line"><span class="deletion">- def versionCodes = [&quot;armeabi-v7a&quot;:1, &quot;x86&quot;:2, &quot;arm64-v8a&quot;: 3, &quot;x86_64&quot;: 4]</span></span><br><span class="line"><span class="addition">+ def versionCodes = [&quot;armeabi-v7a&quot;:1, &quot;arm64-v8a&quot;: 2]</span></span><br></pre></td></tr></table></figure><h3 id="gradle-ç¼–è¯‘é€Ÿåº¦ä¼˜åŒ–é…ç½®"><a href="#gradle-ç¼–è¯‘é€Ÿåº¦ä¼˜åŒ–é…ç½®" class="headerlink" title="gradle ç¼–è¯‘é€Ÿåº¦ä¼˜åŒ–é…ç½®"></a>gradle ç¼–è¯‘é€Ÿåº¦ä¼˜åŒ–é…ç½®</h3><p>åœ¨ <code>android\gradle.properties</code> ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># è®©gradleä½¿ç”¨å•ç‹¬çš„å®ˆæŠ¤è¿›ç¨‹</span><br><span class="line">org.gradle.daemon=true</span><br><span class="line"># è®©gradleå¹¶è¡Œç¼–è¯‘</span><br><span class="line">org.gradle.parallel=true</span><br><span class="line"># è®©gradleåœ¨éœ€è¦çš„æ—¶å€™æ‰é…ç½®</span><br><span class="line">org.gradle.configureondemand=true</span><br><span class="line"># å¢åŠ gradleè¿è¡Œçš„javaè™šæ‹Ÿæœºçš„å¤§å°</span><br><span class="line">org.gradle.jvmargs=-Xmx4096m -XX:MaxPermSize=4096m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8</span><br></pre></td></tr></table></figure><h3 id="BuildConfig"><a href="#BuildConfig" class="headerlink" title="BuildConfig"></a>BuildConfig</h3><blockquote><p>åœ¨ react-native ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© react-native-config-reader æ¥æ–¹ä¾¿åœ°è¯»å–è¿™äº›å±æ€§</p></blockquote><p><code>BuildConfig</code> æ˜¯ç¨‹åºç¼–è¯‘åï¼Œæ ¹æ® <code>buildType</code> ç”Ÿæˆåœ¨ <code>app\build\generated\source\buildConfig\debug(release)\</code> åŒ…åä¸‹çš„ä¸€ä¸ª java æ–‡ä»¶ã€‚é»˜è®¤æœ‰ä¸€ä¸‹å±æ€§ï¼š</p><ul><li><code>DEBUG</code>ï¼šæ˜¯å¦æ˜¯è°ƒè¯•ç‰ˆæœ¬</li><li><code>APPLICATION_ID</code>ï¼šå½“å‰åº”ç”¨çš„åŒ…å</li><li><code>FLAVOR</code>ï¼šäº§å“ï¼ˆæ¸ é“åŒ…çš„åç§°ï¼‰</li><li><code>BUILD_TYPE</code>ï¼šå½“å‰çš„ç¼–è¯‘ç±»å‹(<code>release</code>&#x2F;<code>debug</code>)</li><li><code>VERSION_CODE</code>ï¼šç‰ˆæœ¬å·(æ•°å­—)</li><li><code>VERSION_NAME</code>ï¼šç‰ˆæœ¬å·</li></ul><h4 id="è‡ªå®šä¹‰-BuildConfig"><a href="#è‡ªå®šä¹‰-BuildConfig" class="headerlink" title="è‡ªå®šä¹‰ BuildConfig"></a>è‡ªå®šä¹‰ BuildConfig</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line">  <span class="comment">// ä¸‰ä¸ªå‚æ•°: 1.è¦å®šä¹‰çš„å¸¸é‡çš„ç±»å‹ 2.è¯¥å¸¸é‡çš„å‘½å 3.è¯¥å¸¸é‡çš„å€¼</span></span><br><span class="line">  <span class="comment">// APP_NAMEï¼Œå¯¹åº” ios çš„ CFBundleDisplayName</span></span><br><span class="line">  buildConfigField <span class="string">&quot;String&quot;</span>, <span class="string">&quot;APP_NAME&quot;</span>, <span class="string">&#x27;&quot;æˆ‘æ˜¯è°&quot;&#x27;</span></span><br><span class="line">  <span class="comment">// BUILD_TIME</span></span><br><span class="line">  buildConfigField <span class="string">&quot;String&quot;</span>, <span class="string">&quot;BUILD_TIME&quot;</span>, <span class="string">&#x27;&quot;&#x27;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().format(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>, TimeZone.getTimeZone(<span class="string">&quot;Asia/Shanghai&quot;</span>)) + <span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åœ¨å­æ¨¡å—ä¸­å–ä¸»é¡¹ç›®çš„-BuildConfig"><a href="#åœ¨å­æ¨¡å—ä¸­å–ä¸»é¡¹ç›®çš„-BuildConfig" class="headerlink" title="åœ¨å­æ¨¡å—ä¸­å–ä¸»é¡¹ç›®çš„ BuildConfig"></a>åœ¨å­æ¨¡å—ä¸­å–ä¸»é¡¹ç›®çš„ BuildConfig</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">getBuildConfigValue</span><span class="params">(Context context, String fieldName)</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    Class&lt;?&gt; clazz = Class.forName(context.getPackageName() + <span class="string">&quot;.BuildConfig&quot;</span>);</span><br><span class="line">    <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getField(fieldName);</span><br><span class="line">    <span class="keyword">return</span> field.get(<span class="literal">null</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (NoSuchFieldException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="type">String</span> <span class="variable">versionName</span> <span class="operator">=</span> (String)getBuildConfigValue(activity, <span class="string">&quot;VERSION_NAME&quot;</span>))</span><br></pre></td></tr></table></figure><h3 id="è§£å†³åœ¨-Android-P-ä¸Šçš„æé†’å¼¹çª—-ï¼ˆDetected-problems-with-API-compatibility-visit-g-co-x2F-dev-x2F-appcompat-for-more-info"><a href="#è§£å†³åœ¨-Android-P-ä¸Šçš„æé†’å¼¹çª—-ï¼ˆDetected-problems-with-API-compatibility-visit-g-co-x2F-dev-x2F-appcompat-for-more-info" class="headerlink" title="è§£å†³åœ¨ Android P ä¸Šçš„æé†’å¼¹çª— ï¼ˆDetected problems with API compatibility(visit g.co&#x2F;dev&#x2F;appcompat for more info)"></a>è§£å†³åœ¨ Android P ä¸Šçš„æé†’å¼¹çª— ï¼ˆDetected problems with API compatibility(visit g.co&#x2F;dev&#x2F;appcompat for more info)</h3><p>åœ¨ <code>MainActivity.java</code> ä¸­æ·»åŠ  closeAndroidPDialog æ–¹æ³•å¹¶åœ¨ <code>onCreate</code> æ–¹æ³•ä¸­è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line">...</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">  closeAndroidPDialog(); <span class="comment">// here</span></span><br><span class="line">  <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">closeAndroidPDialog</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">aClass</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;android.content.pm.PackageParser$Package&quot;</span>);</span><br><span class="line">    <span class="type">Constructor</span> <span class="variable">declaredConstructor</span> <span class="operator">=</span> aClass.getDeclaredConstructor(String.class);</span><br><span class="line">    declaredConstructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;android.app.ActivityThread&quot;</span>);</span><br><span class="line">    <span class="type">Method</span> <span class="variable">declaredMethod</span> <span class="operator">=</span> cls.getDeclaredMethod(<span class="string">&quot;currentActivityThread&quot;</span>);</span><br><span class="line">    declaredMethod.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">activityThread</span> <span class="operator">=</span> declaredMethod.invoke(<span class="literal">null</span>);</span><br><span class="line">    <span class="type">Field</span> <span class="variable">mHiddenApiWarningShown</span> <span class="operator">=</span> cls.getDeclaredField(<span class="string">&quot;mHiddenApiWarningShown&quot;</span>);</span><br><span class="line">    mHiddenApiWarningShown.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    mHiddenApiWarningShown.setBoolean(activityThread, <span class="literal">true</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰å®‰å“æ‰“åŒ…çš„åç¼€"><a href="#è‡ªå®šä¹‰å®‰å“æ‰“åŒ…çš„åç¼€" class="headerlink" title="è‡ªå®šä¹‰å®‰å“æ‰“åŒ…çš„åç¼€"></a>è‡ªå®šä¹‰å®‰å“æ‰“åŒ…çš„åç¼€</h3><p>é…ç½® <code>android/app/build.gradle</code>:</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">def</span> releaseTime() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Date().format(<span class="string">&quot;yyyyMMdd-HHmmss&quot;</span>, TimeZone.getTimeZone(<span class="string">&quot;GMT+08:00&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="attr">android:</span> &#123;</span><br><span class="line">    applicationVariants.all &#123; variant -&gt;</span><br><span class="line">        ...</span><br><span class="line">    variant.outputs.all &#123;</span><br><span class="line">            <span class="comment">// the apk name is e.g. galaxy_v1.0.1_2018-11-1_debug.apk</span></span><br><span class="line">           outputFileName = <span class="string">&quot;galaxy_v$&#123;defaultConfig.versionName&#125;_$&#123;releaseTime()&#125;_$&#123;variant.buildType.name&#125;.apk&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¸¸è§æŠ¥é”™åŠè§£å†³åŠæ³•"><a href="#å¸¸è§æŠ¥é”™åŠè§£å†³åŠæ³•" class="headerlink" title="å¸¸è§æŠ¥é”™åŠè§£å†³åŠæ³•"></a>å¸¸è§æŠ¥é”™åŠè§£å†³åŠæ³•</h3><h4 id="Failed-to-read-PNG-signature-file-does-not-start-with-PNG-signature"><a href="#Failed-to-read-PNG-signature-file-does-not-start-with-PNG-signature" class="headerlink" title="Failed to read PNG signature: file does not start with PNG signature"></a>Failed to read PNG signature: file does not start with PNG signature</h4><p>æœ‰æ—¶ä»ç½‘ä¸Šä¸‹è½½çš„ Demo èµ„æºæ–‡ä»¶ä¸è§„èŒƒï¼Œä¼šå‡ºç°ç›´æ¥å°† jpg æ–‡ä»¶æ”¹ä¸º png åç¼€åçš„æƒ…å†µï¼Œgradle æ‰“åŒ…æ£€æŸ¥æ—¶æŠ¥é”™ç¼–è¯‘é€šä¸è¿‡çš„ã€‚æˆ‘ä»¬é€šè¿‡ <code>aaptOptions.cruncherEnabled=false</code> æ¥ç¦æ­¢ Gradle æ£€æŸ¥ png çš„åˆæ³•æ€§ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">  aaptOptions &#123;</span><br><span class="line">    cruncherEnabled=<span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="com-android-build-api-transform-TransformException"><a href="#com-android-build-api-transform-TransformException" class="headerlink" title="com.android.build.api.transform.TransformException"></a><a href="http://t.cn/EZcTDtV">com.android.build.api.transform.TransformException</a></h4><p>åœ¨ <code>android\gradle.properties</code> ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dexOptions.javaMaxHeapSize = 2g</span><br></pre></td></tr></table></figure><h4 id="The-number-of-method-references-in-a-dex-file-cannot-exceed-64K"><a href="#The-number-of-method-references-in-a-dex-file-cannot-exceed-64K" class="headerlink" title="The number of method references in a .dex file cannot exceed 64K."></a>The number of method references in a .dex file cannot exceed 64K.</h4><p>éšç€ Android å¹³å°çš„æŒç»­æˆé•¿ï¼ŒAndroid åº”ç”¨çš„å¤§å°ä¹Ÿåœ¨å¢åŠ ã€‚å½“æ‚¨çš„åº”ç”¨åŠå…¶å¼•ç”¨çš„åº“è¾¾åˆ°ç‰¹å®šå¤§å°æ—¶ï¼Œæ‚¨ä¼šé‡åˆ°æ„å»ºé”™è¯¯ï¼ŒæŒ‡æ˜æ‚¨çš„åº”ç”¨å·²è¾¾åˆ° Android åº”ç”¨æ„å»ºæ¶æ„çš„æé™ã€‚</p><p>è§£å†³åŠæ³•æ˜¯é…ç½®æ‚¨çš„åº”ç”¨è¿›è¡Œ <code>Dalvik</code> å¯æ‰§è¡Œæ–‡ä»¶åˆ†åŒ…ï¼Œåœ¨ <code>android/app/build.gradle</code> ä¸­åšä¸‹é¢çš„é…ç½®ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line"><span class="addition">+    multiDexEnabled true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ioså¿…çŸ¥å¿…ä¼š"><a href="#ioså¿…çŸ¥å¿…ä¼š" class="headerlink" title="ioså¿…çŸ¥å¿…ä¼š"></a>ioså¿…çŸ¥å¿…ä¼š</h2><blockquote><p>è¿™éƒ¨åˆ†ç›®å‰ä½œè€…æ¥è§¦ä¸æ·±ï¼Œæœ‰å¤§ä½¬å¯ä»¥è”ç³»æˆ‘è¡¥å……ï¼ï¼ï¼</p></blockquote><h3 id="é•œåƒ"><a href="#é•œåƒ" class="headerlink" title="é•œåƒ"></a>é•œåƒ</h3><blockquote><p><code>pod install</code> ä¼šä» GitHub æ‹‰ä»£ç ï¼Œæ‰€ä»¥åœ¨å›½å†…ä¼šå¾ˆæ…¢ã€‚å¹´è½»äººè¦çˆ±å›½ï¼Œè‡ªè§‰ä¸ç¿»å¢™ï¼ï¼ï¼</p></blockquote><ul><li><a href="https://github.com/youngjuning/blog/issues/10">Homebrew é•œåƒä½¿ç”¨å¸®åŠ©</a></li><li><a href="https://mirror.tuna.tsinghua.edu.cn/help/CocoaPods/">CocoaPods é•œåƒä½¿ç”¨å¸®åŠ©</a></li></ul><h3 id="é…ç½®åº”ç”¨å-1"><a href="#é…ç½®åº”ç”¨å-1" class="headerlink" title="é…ç½®åº”ç”¨å"></a>é…ç½®åº”ç”¨å</h3><ol><li>é€‰ä¸­å·¥ç¨‹åç§°</li><li>æ‰¾åˆ°å³ä¾§èœå• <code>Info</code> é€‰é¡¹</li><li>æ·»åŠ  <code>Bundle display name</code> å¹¶æŠŠ <code>value</code> è®¾ç½®æˆ â€œåº”ç”¨åç§°â€</li><li>æœ€åé‡æ–°å† <code>Run</code>ä¸€æ¬¡ï¼Œå³å¯çœ‹åˆ°æœ€æ–°çš„æ•ˆæœ</li></ol><blockquote><p>ä½ å¯ä»¥åœ¨åˆå§‹åŒ–é¡¹ç›®çš„æ—¶å€™æŒ‡å®šåº”ç”¨çš„åå­—ï¼Œåƒè¿™æ ·ï¼š<code>npx react-native init MyApp --title æ˜é‡‘</code></p></blockquote><h3 id="é…ç½®å›¾æ ‡-1"><a href="#é…ç½®å›¾æ ‡-1" class="headerlink" title="é…ç½®å›¾æ ‡"></a>é…ç½®å›¾æ ‡</h3><p>1ã€ä½¿ç”¨<a href="https://icon.wuruihong.com/">å›¾æ ‡å·¥å‚</a>ã€<a href="https://www.npmjs.com/package/react-native-svg-app-icon">react-native-svg-app-icon</a> æˆ–è€…è®©è®¾è®¡å¸ˆç»™å›¾ç‰‡<br>2ã€æŠŠå‡†å¤‡å¥½çš„å›¾æ ‡æ‹–åˆ°å›¾ä¸­ç®­å¤´æŒ‡å‘çš„ä½ç½®ï¼š</p><img src="https://i.loli.net/2020/02/21/Sy3OjWBKbMdYgoH.png" style="zoom:36%;" /><h3 id="è·å–BUILD-TYPE"><a href="#è·å–BUILD-TYPE" class="headerlink" title="è·å–BUILD_TYPE"></a>è·å–BUILD_TYPE</h3><p>åœ¨ <code>Info.plist</code> ä¸­æ·»åŠ  <code>BUILD_TYPE</code>ï¼Œå–å€¼ä¸º <code>$(CONFIGURATION)</code></p><h3 id="è·å–æ„å»ºæ—¶é—´"><a href="#è·å–æ„å»ºæ—¶é—´" class="headerlink" title="è·å–æ„å»ºæ—¶é—´"></a>è·å–æ„å»ºæ—¶é—´</h3><p>åœ¨ <code>Info.plist</code> ä¸­æ·»åŠ  <code>BUILD_TIME</code>,å–å€¼ä¸ºç©ºï¼Œå¹¶é€šè¿‡è„šæœ¬åœ¨æ¯æ¬¡ç¼–è¯‘çš„æ—¶å€™å¯¹å…¶æ›´æ–°ï¼Œè„šæœ¬æ·»åŠ æ­¥éª¤ <code>Target</code>-&gt; <code>Build Phases</code> -&gt; <code>+</code> -&gt; <code>New Run Script Phase</code>, Shell ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">infoplist=&quot;$BUILT_PRODUCTS_DIR/$INFOPLIST_PATH&quot;</span><br><span class="line">builddate=`date +%Y-%m-%d_%H:%M`</span><br><span class="line">if [[ -n &quot;$builddate&quot; ]]; then</span><br><span class="line">/usr/libexec/PlistBuddy -c &quot;Set :BUILD_TIME $builddate&quot; $&#123;infoplist&#125;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h3 id="æƒé™ç”³è¯·"><a href="#æƒé™ç”³è¯·" class="headerlink" title="æƒé™ç”³è¯·"></a>æƒé™ç”³è¯·</h3><ul><li><code>Privacy - Camera Usage Description</code></li><li><code>Privacy - Photo Library Usage Description</code></li><li><code>Privacy - Microphone Usage Description</code></li></ul><h2 id="Lean-Core"><a href="#Lean-Core" class="headerlink" title="Lean Core"></a>Lean Core</h2><table><thead><tr><th align="left">COMPONENT</th><th align="left">DEPRECATED?</th><th align="left">NEW HOME</th></tr></thead><tbody><tr><td align="left"><strong>AsyncStorage</strong></td><td align="left">0.59</td><td align="left"><a href="https://github.com/react-native-community/react-native-async-storage">@react-native-community&#x2F;react-native-async-storage</a></td></tr><tr><td align="left"><strong>ImageStore</strong></td><td align="left">0.59</td><td align="left"><a href="https://github.com/expo/expo/tree/master/packages/expo-file-system">expo-file-system</a> or <a href="https://github.com/itinance/react-native-fs">react-native-fs</a></td></tr><tr><td align="left"><strong>MaskedViewIOS</strong></td><td align="left">0.59</td><td align="left"><a href="https://github.com/react-native-community/react-native-masked-view">@react-native-community&#x2F;react-native-masked-view</a></td></tr><tr><td align="left"><strong>NetInfo</strong></td><td align="left">0.59</td><td align="left"><a href="https://github.com/react-native-community/react-native-netinfo">@react-native-community&#x2F;react-native-netinfo</a></td></tr><tr><td align="left"><strong>Slider</strong></td><td align="left">0.59</td><td align="left"><a href="https://github.com/react-native-community/react-native-slider">@react-native-community&#x2F;react-native-slider</a></td></tr><tr><td align="left"><strong>ViewPagerAndroid</strong></td><td align="left">0.59</td><td align="left"><a href="https://github.com/react-native-community/react-native-viewpager">@react-native-community&#x2F;react-native-viewpager</a></td></tr><tr><td align="left"><strong>WebView</strong></td><td align="left">0.60</td><td align="left"><a href="https://github.com/react-native-community/react-native-webview">react-native-webview</a></td></tr><tr><td align="left"><strong>NetInfo</strong></td><td align="left">0.60</td><td align="left"><a href="https://github.com/react-native-community/react-native-netinfo">@react-native-community&#x2F;netinfo</a></td></tr><tr><td align="left"><strong>Geolocation</strong></td><td align="left">0.60</td><td align="left"><a href="https://github.com/react-native-community/react-native-geolocation">@react-native-community&#x2F;geolocation</a></td></tr><tr><td align="left"><strong>Apple TV Support</strong></td><td align="left">0.62</td><td align="left"><a href="https://github.com/react-native-community/react-native-tvos">react-native-community&#x2F;react-native-tvos</a></td></tr></tbody></table><h2 id="è”ç³»ä½œè€…"><a href="#è”ç³»ä½œè€…" class="headerlink" title="è”ç³»ä½œè€…"></a>è”ç³»ä½œè€…</h2><table><thead><tr><th align="center">ä½œè€…å¾®ä¿¡</th><th align="center">çŸ¥è¯†æ˜Ÿçƒ</th><th align="center">èµèµä½œè€…</th></tr></thead><tbody><tr><td align="center"><img src="https://user-gold-cdn.xitu.io/2020/2/24/17074acbb24c7412?w=200&h=200&f=jpeg&s=17183" style="width:200px"/></td><td align="center"><img src="https://user-gold-cdn.xitu.io/2020/2/24/17074acbb26af8e1?w=200&h=200&f=png&s=39093" style="width:200px"/></td><td align="center"><img src="https://user-gold-cdn.xitu.io/2020/2/24/17074acbb338c643?w=698&h=700&f=png&s=315492" style="width:200px"/></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> æ¶æ„ </tag>
            
            <tag> æœ€ä½³å®è·µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é…ç½® react native splash screen é˜²æ­¢å¯åŠ¨ç™½å±</title>
      <link href="/c948214d88f6/"/>
      <url>/c948214d88f6/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœä½ æœ‰è®¾è®¡å¸ˆï¼Œè¯·è®©è®¾è®¡å¸ˆç»™ä½ è¦çš„æ‰€æœ‰å°ºå¯¸å›¾ï¼Œå¦‚æœæ²¡æœ‰è¯·è‡ªè¡Œä½¿ç”¨ <a href="https://icon.wuruihong.com/">å›¾æ ‡å·¥å‚</a> ä¸€é”®ç”Ÿæˆæ‰€æœ‰å°ºå¯¸çš„å›¾æ ‡&#x2F;å¯åŠ¨å›¾ã€‚</p><h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h2><p>$ yarn add react-native-splash-screen</p><h2 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h2><p>1ã€é€šè¿‡åˆ›å»º <code>launch_screen.png</code> æ–‡ä»¶å¹¶æŠŠå®ƒä»¬æ”¾åˆ° <code>mipmap-</code> æ–‡ä»¶å¤¹ä¸‹æ¥è‡ªå®šä¹‰ä½ çš„å¯åŠ¨å›¾ã€‚å®‰å“ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„åˆ†è¾¨ç‡ï¼Œå› æ­¤ä½ ä¸æ˜¯å¿…é¡»ä¸ºæ‰€æœ‰æ‰‹æœºåˆ†è¾¨ç‡æä¾›å›¾ç‰‡ã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥ä¸ºä»¥ä¸‹æ‰€æœ‰åˆ†è¾¨ç‡æä¾›å¯åŠ¨å›¾ï¼š</p><ul><li><code>mipmap-mdpi</code></li><li><code>mipmap-hdpi</code></li><li><code>mipmap-xhdpi</code></li><li><code>mipmap-xxhdpi</code></li><li><code>mipmap-xxxhdpi</code></li></ul><p>2ã€æ›´æ–°ä½ çš„ <code>MainActivity.java</code> æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> org.devio.rn.splashscreen.SplashScreen;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">ReactActivity</span> &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">     SplashScreen.show(<span class="built_in">this</span>, <span class="literal">true</span>);  <span class="comment">// æ·»åŠ è¿™ä¸€å¥</span></span><br><span class="line">     <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...other code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€åˆ›å»ºä¸€ä¸ªåä¸º <code>launch_screen.xml</code> çš„å¸ƒå±€æ–‡ä»¶æ¥è‡ªå®šä¹‰ä½ çš„å¯åŠ¨å±å¹•ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span> <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span> <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span> <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> <span class="attr">android:src</span>=<span class="string">&quot;@mipmap/launch_screen&quot;</span> <span class="attr">android:scaleType</span>=<span class="string">&quot;centerCrop&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3ã€ä½ ä¹Ÿå¯ä»¥å¯ç”¨appä¸»é¢˜é€æ˜é€‰é¡¹æ¥è§£å†³åœ¨APPå¯åŠ¨æ—¶å› ä¸»é¢˜åŸå› å¯¼è‡´çš„çŸ­æš‚ç™½å±çš„é—®é¢˜,å…·ä½“æ­¥éª¤å¦‚ä¸‹:</p><p>æ‰“å¼€ <code>android/app/src/main/res/values/styles.xml</code> æ–‡ä»¶,æ·»åŠ  <code>&lt;item name=&quot;android:windowIsTranslucent&quot;&gt;true&lt;/item&gt;</code>,å¦‚ä¸‹ :</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Base application theme. --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;AppTheme&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.AppCompat.Light.NoActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--è®¾ç½®é€æ˜èƒŒæ™¯--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsTranslucent&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4ã€Add a color called <code>primary_dark</code> in <code>app/src/main/res/values/colors.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;primary_dark&quot;</span>&gt;</span>#000000<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h2><h3 id="Xcode-11-é…ç½®-LaunchImage"><a href="#Xcode-11-é…ç½®-LaunchImage" class="headerlink" title="Xcode 11 é…ç½® LaunchImage"></a>Xcode 11 é…ç½® LaunchImage</h3><p>å¦‚æœæœ‰è®¾è®¡å¸ˆèµ„æºï¼Œè¯· ui åŒå­¦æä¾›ä»¥ä¸‹å°ºå¯¸çš„å›¾ç‰‡</p><ul><li>640x960</li><li>640x1136</li><li>750x1334</li><li>828x1792</li><li>1125x2436</li><li>1242x2436</li></ul><p>å¦‚æœä½ æ²¡æœ‰è®¾è®¡å¸ˆèµ„æºï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://icon.wuruihong.com/">å›¾æ ‡å·¥å‚</a> è‡ªè¡Œç”Ÿæˆ</p><p>1ã€æ·»åŠ  LaunchImage</p><p><img src="https://i.loli.net/2019/09/16/SpIYPmE7MHTzw6o.png"></p><p>2ã€å°†å‡†å¤‡å¥½çš„å›¾ç‰‡æ‹–åˆ°ä¸‹å›¾çº¢æ¡†çš„åŒºåŸŸ</p><p><img src="https://i.loli.net/2019/09/16/bBO1u4PAaWLdMqV.png"></p><p>3ã€ä½ åœ¨ <code>buildSetting</code> ä¸­æœç´¢ <code>launch</code>,å¯çœ‹åˆ° <code>Asset Catalog Launch Image Set Name</code> ä½ åªè¦æŠŠå¯¹åº”çš„<code>LaunchImage</code> åç§°è®¾ç½®ä¸Šå»å°±å¥½äº†:</p><p><img src="https://i.loli.net/2020/02/21/dXqnrGc2sWK4aVP.png"></p><p>4ã€æ¸…ç©º Launch Screen File</p><p><img src="https://i.loli.net/2020/02/21/oyFKjUY1RZwtf45.png"></p><p>5ã€æœ€ååˆ«å¿˜äº†æŠŠ <code>Info.list</code> çš„ <code>UILaunchStoryboardName</code> åˆ é™¤:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>UILaunchStoryboardName<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>LaunchScreen<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°-AppDelegate-m"><a href="#æ›´æ–°-AppDelegate-m" class="headerlink" title="æ›´æ–° AppDelegate.m"></a>æ›´æ–° <code>AppDelegate.m</code></h3><figure class="highlight obj-c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&quot;AppDelegate.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="string">&lt;React/RCTBundleURLProvider.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="string">&lt;React/RCTRootView.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="string">&quot;RNSplashScreen.h&quot;</span>  <span class="comment">// æ·»åŠ è¿™ä¸€å¥</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">AppDelegate</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="type">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...other code</span></span><br><span class="line"></span><br><span class="line">    [RNSplashScreen show];  <span class="comment">// æ·»åŠ è¿™ä¸€å¥ï¼Œè¿™ä¸€å¥ä¸€å®šè¦åœ¨æœ€å</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><h2 id="éšè—å¯åŠ¨å›¾"><a href="#éšè—å¯åŠ¨å›¾" class="headerlink" title="éšè—å¯åŠ¨å›¾"></a>éšè—å¯åŠ¨å›¾</h2><h3 id="ç±»ç»„ä»¶"><a href="#ç±»ç»„ä»¶" class="headerlink" title="ç±»ç»„ä»¶"></a>ç±»ç»„ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">SplashScreen</span> <span class="keyword">from</span> <span class="string">&#x27;react-native-splash-screen&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">WelcomePage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">SplashScreen</span>.<span class="title function_">hide</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°ç»„ä»¶"><a href="#å‡½æ•°ç»„ä»¶" class="headerlink" title="å‡½æ•°ç»„ä»¶"></a>å‡½æ•°ç»„ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">SplashScreen</span>.<span class="title function_">hide</span>()</span><br><span class="line">  &#125;, [])</span><br><span class="line">  <span class="keyword">return</span> (...)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> æ˜é‡‘ </tag>
            
            <tag> å¯åŠ¨å± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Native é…ç½®å­—ä½“å¤§å°ä¸éšå­—ä½“è®¾ç½®å˜åŒ–</title>
      <link href="/528f99f5addc/"/>
      <url>/528f99f5addc/</url>
      
        <content type="html"><![CDATA[<p>æ·»åŠ ä»¥ä¸‹ä»£ç åˆ° <code>index.js</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppRegistry</span>, <span class="title class_">Text</span>, <span class="title class_">TextInput</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span></span><br><span class="line"><span class="title class_">Text</span>.<span class="property">defaultProps</span> = &#123; ...<span class="title class_">Text</span>.<span class="property">defaultProps</span>, <span class="attr">allowFontScaling</span>: <span class="literal">false</span> &#125;</span><br><span class="line"><span class="title class_">TextInput</span>.<span class="property">defaultProps</span> = &#123; ...<span class="title class_">TextInput</span>.<span class="property">defaultProps</span>, <span class="attr">allowFontScaling</span>: <span class="literal">false</span> &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> å­—ä½“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Native å®‰å“å¿…çŸ¥å¿…ä¼š</title>
      <link href="/e49e15e51f69/"/>
      <url>/e49e15e51f69/</url>
      
        <content type="html"><![CDATA[<h2 id="é…ç½®åº”ç”¨å"><a href="#é…ç½®åº”ç”¨å" class="headerlink" title="é…ç½®åº”ç”¨å"></a>é…ç½®åº”ç”¨å</h2><p>å¾ˆç®€å•,æˆ‘ä»¬ç›´æ¥æ‰“å¼€ <code>android/app/src/main/res/values/strings.xml</code>ï¼Œå³å¯çœ‹åˆ°é…ç½®ä¸­çš„ <code>app_name</code>ï¼Œä¿®æ”¹ä¸ºä½ æƒ³è¦çš„å³å¯ã€‚</p><h2 id="é…ç½®å›¾æ ‡"><a href="#é…ç½®å›¾æ ‡" class="headerlink" title="é…ç½®å›¾æ ‡"></a>é…ç½®å›¾æ ‡</h2><p>ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ <code>android\app\src\main\res\mipmap-xxxxxx</code> ä¸­ç›´æ¥è¦†ç›–å›¾æ ‡å°±å¯ä»¥ï¼Œæ³¨æ„å›¾æ ‡çš„å¤§å°ã€‚</p><h2 id="æ‰“åŒ…-APK"><a href="#æ‰“åŒ…-APK" class="headerlink" title="æ‰“åŒ… APK"></a>æ‰“åŒ… APK</h2><p>1ã€åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ <code>keytool -genkeypair -v -keystore release.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000</code> ç”Ÿæˆå¯†é’¥æ–‡ä»¶ <code>release.keystore</code></p><p>2ã€æŠŠ <code>release.keystore</code> æ–‡ä»¶æ”¾åˆ°ä½ å·¥ç¨‹ä¸­çš„ <code>android/app</code> æ–‡ä»¶å¤¹ä¸‹ã€‚</p><p>3ã€é…ç½® <code>android/app/build.gradle</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">android&#123;</span><br><span class="line">    ...</span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            storeFile <span class="title function_">file</span><span class="params">(<span class="string">&quot;release.keystore&quot;</span>)</span></span><br><span class="line">            storePassword <span class="string">&quot;****&quot;</span></span><br><span class="line">            keyAlias <span class="string">&quot;my-key-alias&quot;</span></span><br><span class="line">            keyPassword <span class="string">&quot;****&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            ...</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å»é™¤æ— ç”¨çš„è¯­è¨€èµ„æº"><a href="#å»é™¤æ— ç”¨çš„è¯­è¨€èµ„æº" class="headerlink" title="å»é™¤æ— ç”¨çš„è¯­è¨€èµ„æº"></a>å»é™¤æ— ç”¨çš„è¯­è¨€èµ„æº</h3><p>é€šè¿‡é…ç½® <code>android/defaultConfig/resConfigs</code> å¯ä»¥é€‰æ‹©åªæ‰“åŒ…å“ªå‡ ç§è¯­è¨€ï¼Œè¿›è€Œå»æ‰å„ç§ aar åŒ…ä¸­å…¨ä¸–ç•Œçš„è¯­è¨€ï¼Œå°¤å…¶æ˜¯ support åŒ…ä¸­çš„ã€‚</p><p>é€‰æ‹©ä¿ç•™ä»€ä¹ˆè¯­è¨€è¦æ ¹æ®äº§å“çš„ç”¨æˆ·å’Œå¸‚åœºæ¥å®šï¼Œå¦‚æœåªé€‰æ‹©é»˜è®¤è‹±è¯­å’Œä¸­æ–‡è¯­è¨€ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line"><span class="addition">+    resConfigs &quot;en&quot;,&quot;zh&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-PackagingOptions"><a href="#é…ç½®-PackagingOptions" class="headerlink" title="é…ç½® PackagingOptions"></a>é…ç½® PackagingOptions</h3><p>æ‰“å¼€ <code>android/app/build.gradle</code> æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">packagingOptions &#123;</span><br><span class="line">    exclude &#x27;META-INF/android_release.kotlin_module&#x27;</span><br><span class="line">    exclude &#x27;META-INF/DEPENDENCIES&#x27;</span><br><span class="line">    exclude &#x27;META-INF/LICENSE&#x27;</span><br><span class="line">    exclude &#x27;META-INF/LICENSE.txt&#x27;</span><br><span class="line">    exclude &#x27;META-INF/license.txt&#x27;</span><br><span class="line">    exclude &#x27;META-INF/NOTICE&#x27;</span><br><span class="line">    exclude &#x27;META-INF/NOTICE.txt&#x27;</span><br><span class="line">    exclude &#x27;META-INF/notice.txt&#x27;</span><br><span class="line">    exclude &#x27;META-INF/ASL2.0&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>pickFirsts: å½“å‡ºç°é‡å¤æ–‡ä»¶ï¼Œä¼šä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶æ‰“åŒ…è¿›å…¥ apk</li><li>merges: å½“å‡ºç°é‡å¤æ–‡ä»¶ï¼Œåˆå¹¶é‡å¤çš„æ–‡ä»¶æ‰“å…¥ apk</li><li>excludes: æ‰“åŒ…çš„æ—¶å€™æ’é™¤åŒ¹é…çš„æ–‡ä»¶</li></ul><p><strong>å‚è€ƒé“¾æ¥</strong></p><ul><li><a href="http://t.cn/Ewt1xD2">PackagingOptions</a></li><li><a href="http://t.cn/AipuM9Ll">More than one file was found with OS independent path</a></li><li><a href="http://t.cn/AipuMfcH">More than one file was found with OS independent path â€˜META-INF&#x2F;LICENSEâ€™</a></li></ul><h3 id="é…ç½®-splits"><a href="#é…ç½®-splits" class="headerlink" title="é…ç½® splits"></a>é…ç½® splits</h3><blockquote><p>æŸ¥çœ‹æ‰‹æœº CPU ä¿¡æ¯ï¼š<code>adb shell</code> -&gt; <code>cd /proc</code> -&gt; <code>cat cpuinfo</code></p></blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„ <code>APK</code> ä¼šåŒæ—¶åŒ…å«é’ˆå¯¹äº <code>x86</code> å’Œ <code>ARMv7a</code> ä¸¤ç§ <code>CPU</code> æ¶æ„çš„åŸç”Ÿä»£ç ã€‚è¿™æ ·å¯ä»¥è®©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„å‘å…¶ä»–äººåˆ†äº«è¿™ä¸ª <code>APK</code>ï¼Œå› ä¸ºå®ƒå‡ ä¹å¯ä»¥è¿è¡Œåœ¨æ‰€æœ‰çš„ Android è®¾å¤‡ä¸Šã€‚ä½†æ˜¯ï¼Œè¿™ä¼šå¯¼è‡´æ‰€æœ‰è®¾å¤‡ä¸Šéƒ½æœ‰ä¸€äº›æ ¹æœ¬ä¸ä¼šè¿è¡Œçš„ä»£ç ï¼Œç™½ç™½å æ®äº†ç©ºé—´ã€‚ç›®å‰å®‰å“è®¾å¤‡ç»å¤§å¤šæ•°æ˜¯ <code>ARM</code> æ¶æ„ï¼Œå› æ­¤å¯¹äºå¤§éƒ¨åˆ†åº”ç”¨æ¥è¯´å¯ä»¥è€ƒè™‘å»æ‰ <code>x86</code> æ¶æ„çš„æ”¯æŒã€‚</p><p>ä½ å¯ä»¥åœ¨ <code>android/app/build.gradle</code> ä¸­ä¿®æ”¹å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- include &quot;armeabi-v7a&quot;, &quot;x86&quot;, &quot;arm64-v8a&quot;, &quot;x86_64&quot;</span></span><br><span class="line"><span class="addition">+ include &quot;armeabi-v7a&quot;, &quot;arm64-v8a&quot;</span></span><br><span class="line"><span class="deletion">- def versionCodes = [&quot;armeabi-v7a&quot;:1, &quot;x86&quot;:2, &quot;arm64-v8a&quot;: 3, &quot;x86_64&quot;: 4]</span></span><br><span class="line"><span class="addition">+ def versionCodes = [&quot;armeabi-v7a&quot;:1, &quot;arm64-v8a&quot;: 2]</span></span><br></pre></td></tr></table></figure><ul><li><p>abi: Application Binary Interfaceï¼Œé’ˆå¯¹ä¸åŒçš„ <code>CPU</code> æ¶æ„ç”Ÿæˆ <code>APK</code> ä»¥å‡å° <code>APK</code> æ–‡ä»¶çš„å¤§å°</p><ul><li><code>mips/mips64</code>ï¼šæå°‘ç”¨äºæ‰‹æœºï¼Œå‡ºå‘ç‚¹æ˜¯é«˜æ€§èƒ½,ä¸»è¦ç”¨äºè·¯ç”±å™¨ã€çŒ«ã€‚</li><li><code>armeabi</code>ï¼šè€ç‰ˆæœ¬ <code>ARMv5</code>ï¼Œä¸æ”¯æŒç¡¬ä»¶è¾…åŠ©æµ®ç‚¹è¿ç®—ï¼Œæ”¯æŒæ‰€æœ‰çš„ <code>ARM</code> è®¾å¤‡ã€‚</li><li><code>x86</code>&#x2F;<code>x86_64</code>ï¼š<code>x86</code> æ¶æ„çš„æ‰‹æœºçš„å¸‚åœºå æœ‰ç‡å¾ˆä½ï¼Œçº¦ä¸º 1%å·¦å³ã€‚è€Œä¸” <code>x86</code> æ¶æ„éƒ½åŒ…å« <code>ARM</code> æ¨¡æ‹Ÿå±‚ï¼Œå…¼å®¹ <code>ARM</code> ç±»å‹çš„ <code>ABI</code>ã€‚æ³¨æ„ï¼Œæ¨¡æ‹Ÿå™¨ä¸º <code>x86</code> æ¶æ„ã€‚</li><li><code>arm64-v8a</code>ï¼š64 ä½ <code>ARM</code> æ¶æ„ã€‚å¯ç”¨ 32 ä½æ¨¡å¼è¿è¡Œ <code>armeabi-v7a</code> å’Œ <code>armeabi</code>ã€‚ï¼ˆæ‰€è°“çš„ <code>ARMv8</code> æ¶æ„ï¼Œå°±æ˜¯åœ¨ <code>MIPS64</code> æ¶æ„ä¸Šå¢åŠ äº† <code>ARMv7</code> æ¶æ„ä¸­å·²ç»æ‹¥æœ‰çš„çš„ <code>TrustZone</code> æŠ€æœ¯ã€è™šæ‹ŸåŒ–æŠ€æœ¯åŠ <code>NEON advanced SIMD</code> æŠ€æœ¯ç­‰ç‰¹æ€§ï¼Œç ”å‘æˆçš„ï¼‰</li><li><code>armeabi-v7a</code>ï¼šä¸»æµç‰ˆæœ¬ <code>AMRv7</code>ï¼Œ2011 å¹´ 15 æœˆä»¥åçš„ç”Ÿäº§çš„å¤§éƒ¨åˆ† Android è®¾å¤‡éƒ½ä½¿ç”¨å®ƒã€‚</li></ul></li><li><p>density: é’ˆå¯¹ä¸åŒçš„åˆ†è¾¨ç‡ç”Ÿæˆ <code>APK</code> ä»¥å‡å° <code>APK</code> æ–‡ä»¶çš„å¤§å°</p></li></ul><h3 id="Failed-to-read-PNG-signature-file-does-not-start-with-PNG-signature"><a href="#Failed-to-read-PNG-signature-file-does-not-start-with-PNG-signature" class="headerlink" title="Failed to read PNG signature: file does not start with PNG signature"></a>Failed to read PNG signature: file does not start with PNG signature</h3><p>æœ‰æ—¶ä»ç½‘ä¸Šä¸‹è½½çš„ Demo èµ„æºæ–‡ä»¶ä¸è§„èŒƒï¼Œä¼šå‡ºç°ç›´æ¥å°† jpg æ–‡ä»¶æ”¹ä¸º png åç¼€åçš„æƒ…å†µï¼Œgradle æ‰“åŒ…æ£€æŸ¥æ—¶æŠ¥é”™ç¼–è¯‘é€šä¸è¿‡çš„ã€‚æˆ‘ä»¬é€šè¿‡ <code>aaptOptions.cruncherEnabled=false</code> æ¥ç¦æ­¢ Gradle æ£€æŸ¥ png çš„åˆæ³•æ€§ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">  aaptOptions &#123;</span><br><span class="line">    cruncherEnabled=false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-dexOptions-javaMaxHeapSize"><a href="#é…ç½®-dexOptions-javaMaxHeapSize" class="headerlink" title="é…ç½® dexOptions.javaMaxHeapSize"></a>é…ç½® dexOptions.javaMaxHeapSize</h3><blockquote><p>android studio éœ€è¦è¾ƒå¤§çš„å†…å­˜æ‰èƒ½æ­£å¸¸ç¼–è¯‘é¡¹ç›®ï¼Œä¸»è¦è§£å†³è¿™ä¸ªè­¦å‘Šï¼š<a href="http://t.cn/EZcTDtV">com.android.build.api.transform.TransformException</a></p></blockquote><p>åœ¨ <code>android\gradle.properties</code> ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ dexOptions.javaMaxHeapSize = 2g</span></span><br></pre></td></tr></table></figure><h3 id="gradle-ä¼˜åŒ–é…ç½®"><a href="#gradle-ä¼˜åŒ–é…ç½®" class="headerlink" title="gradle ä¼˜åŒ–é…ç½®"></a>gradle ä¼˜åŒ–é…ç½®</h3><p>åœ¨ <code>android\gradle.properties</code> ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># è®©gradleä½¿ç”¨å•ç‹¬çš„å®ˆæŠ¤è¿›ç¨‹</span><br><span class="line">org.gradle.daemon=true</span><br><span class="line"># è®©gradleå¹¶è¡Œç¼–è¯‘</span><br><span class="line">org.gradle.parallel=true</span><br><span class="line"># è®©gradleåœ¨éœ€è¦çš„æ—¶å€™æ‰é…ç½®</span><br><span class="line">org.gradle.configureondemand=true</span><br><span class="line"># å¢åŠ gradleè¿è¡Œçš„javaè™šæ‹Ÿæœºçš„å¤§å°</span><br><span class="line">org.gradle.jvmargs=-Xmx3072m -XX:MaxPermSize=1024m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8</span><br></pre></td></tr></table></figure><h3 id="é…ç½®æ–¹æ³•æ•°è¶…è¿‡-64K-çš„åº”ç”¨"><a href="#é…ç½®æ–¹æ³•æ•°è¶…è¿‡-64K-çš„åº”ç”¨" class="headerlink" title="é…ç½®æ–¹æ³•æ•°è¶…è¿‡ 64K çš„åº”ç”¨"></a>é…ç½®æ–¹æ³•æ•°è¶…è¿‡ 64K çš„åº”ç”¨</h3><p>éšç€ Android å¹³å°çš„æŒç»­æˆé•¿ï¼ŒAndroid åº”ç”¨çš„å¤§å°ä¹Ÿåœ¨å¢åŠ ã€‚å½“æ‚¨çš„åº”ç”¨åŠå…¶å¼•ç”¨çš„åº“è¾¾åˆ°ç‰¹å®šå¤§å°æ—¶ï¼Œæ‚¨ä¼šé‡åˆ°æ„å»ºé”™è¯¯ï¼ŒæŒ‡æ˜æ‚¨çš„åº”ç”¨å·²è¾¾åˆ° Android åº”ç”¨æ„å»ºæ¶æ„çš„æé™ã€‚ä¼šæŠ¥å‘Šè¿™ä¸€é”™è¯¯ï¼š</p><blockquote><p>The number of method references in a .dex file cannot exceed 64K.</p></blockquote><p>è§£å†³åŠæ³•æ˜¯é…ç½®æ‚¨çš„åº”ç”¨è¿›è¡Œ Dalvik å¯æ‰§è¡Œæ–‡ä»¶åˆ†åŒ…ï¼Œåœ¨ <code>android/app/build.gradle</code> ä¸­åšä¸‹é¢çš„é…ç½®ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line"><span class="addition">+    multiDexEnabled true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="BuildConfig"><a href="#BuildConfig" class="headerlink" title="BuildConfig"></a>BuildConfig</h2><blockquote><p>åœ¨ react-native ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© react-native-config-reader æ¥æ–¹ä¾¿åœ°è¯»å–è¿™äº›å±æ€§</p></blockquote><p>BuildConfig æ˜¯ç¨‹åºç¼–è¯‘åï¼Œæ ¹æ® buildType ç”Ÿæˆåœ¨ <code>app\build\generated\source\buildConfig\debug(release)\</code> åŒ…åä¸‹çš„ä¸€ä¸ª java æ–‡ä»¶ã€‚é»˜è®¤æœ‰ä¸€ä¸‹å±æ€§ï¼š</p><ul><li>DEBUGï¼šæ˜¯å¦æ˜¯è°ƒè¯•ç‰ˆæœ¬</li><li>APPLICATION_IDï¼šå½“å‰åº”ç”¨çš„åŒ…å</li><li>FLAVORï¼šäº§å“ï¼ˆæ¸ é“åŒ…çš„åç§°ï¼‰</li><li>BUILD_TYPEï¼šå½“å‰çš„ç¼–è¯‘ç±»å‹(release&#x2F;debug)</li><li>VERSION_CODEï¼šç‰ˆæœ¬å·(æ•°å­—)</li><li>VERSION_NAMEï¼šç‰ˆæœ¬å·</li></ul><h3 id="è‡ªå®šä¹‰-BuildConfig"><a href="#è‡ªå®šä¹‰-BuildConfig" class="headerlink" title="è‡ªå®šä¹‰ BuildConfig"></a>è‡ªå®šä¹‰ BuildConfig</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line">  <span class="comment">// ä¸‰ä¸ªå‚æ•°: 1.è¦å®šä¹‰çš„å¸¸é‡çš„ç±»å‹ 2.è¯¥å¸¸é‡çš„å‘½å 3.è¯¥å¸¸é‡çš„å€¼</span></span><br><span class="line">  <span class="comment">// APP_NAMEï¼Œå¯¹åº” ios çš„ CFBundleDisplayName</span></span><br><span class="line">  buildConfigField <span class="string">&quot;String&quot;</span>, <span class="string">&quot;APP_NAME&quot;</span>, <span class="string">&#x27;&quot;æˆ‘æ˜¯è°&quot;&#x27;</span></span><br><span class="line">  <span class="comment">// BUILD_TIME</span></span><br><span class="line">  buildConfigField <span class="string">&quot;String&quot;</span>, <span class="string">&quot;BUILD_TIME&quot;</span>, <span class="string">&#x27;&quot;&#x27;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().format(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>, TimeZone.getTimeZone(<span class="string">&quot;Asia/Shanghai&quot;</span>)) + <span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åœ¨å­æ¨¡å—ä¸­å–ä¸»é¡¹ç›®çš„-BuildConfig"><a href="#åœ¨å­æ¨¡å—ä¸­å–ä¸»é¡¹ç›®çš„-BuildConfig" class="headerlink" title="åœ¨å­æ¨¡å—ä¸­å–ä¸»é¡¹ç›®çš„ BuildConfig"></a>åœ¨å­æ¨¡å—ä¸­å–ä¸»é¡¹ç›®çš„ BuildConfig</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">getBuildConfigValue</span><span class="params">(Context context, String fieldName)</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    Class&lt;?&gt; clazz = Class.forName(context.getPackageName() + <span class="string">&quot;.BuildConfig&quot;</span>);</span><br><span class="line">    <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getField(fieldName);</span><br><span class="line">    <span class="keyword">return</span> field.get(<span class="literal">null</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (NoSuchFieldException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="type">String</span> <span class="variable">versionName</span> <span class="operator">=</span> (String)getBuildConfigValue(activity, <span class="string">&quot;VERSION_NAME&quot;</span>))</span><br></pre></td></tr></table></figure><ul><li><a href="https://www.jianshu.com/p/3d9b23afe514">BuildConfig ä¸ build.gradle çš„å…³ç³»</a></li><li><a href="https://www.jianshu.com/p/274c9d95cf76">Gradle ä¹‹ BuildConfig è‡ªå®šä¹‰å¸¸é‡</a></li></ul><h2 id="è§£å†³åœ¨-Android-P-ä¸Šçš„æé†’å¼¹çª—-ï¼ˆDetected-problems-with-API-compatibility-visit-g-co-x2F-dev-x2F-appcompat-for-more-info"><a href="#è§£å†³åœ¨-Android-P-ä¸Šçš„æé†’å¼¹çª—-ï¼ˆDetected-problems-with-API-compatibility-visit-g-co-x2F-dev-x2F-appcompat-for-more-info" class="headerlink" title="è§£å†³åœ¨ Android P ä¸Šçš„æé†’å¼¹çª— ï¼ˆDetected problems with API compatibility(visit g.co&#x2F;dev&#x2F;appcompat for more info)"></a>è§£å†³åœ¨ Android P ä¸Šçš„æé†’å¼¹çª— ï¼ˆDetected problems with API compatibility(visit g.co&#x2F;dev&#x2F;appcompat for more info)</h2><p>åœ¨ <code>MainActivity.java</code> ä¸­æ·»åŠ  closeAndroidPDialog æ–¹æ³•å¹¶åœ¨ <code>onCreate</code> æ–¹æ³•ä¸­è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line">...</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">  closeAndroidPDialog(); <span class="comment">// here</span></span><br><span class="line">  <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">closeAndroidPDialog</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">aClass</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;android.content.pm.PackageParser$Package&quot;</span>);</span><br><span class="line">    <span class="type">Constructor</span> <span class="variable">declaredConstructor</span> <span class="operator">=</span> aClass.getDeclaredConstructor(String.class);</span><br><span class="line">    declaredConstructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;android.app.ActivityThread&quot;</span>);</span><br><span class="line">    <span class="type">Method</span> <span class="variable">declaredMethod</span> <span class="operator">=</span> cls.getDeclaredMethod(<span class="string">&quot;currentActivityThread&quot;</span>);</span><br><span class="line">    declaredMethod.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">activityThread</span> <span class="operator">=</span> declaredMethod.invoke(<span class="literal">null</span>);</span><br><span class="line">    <span class="type">Field</span> <span class="variable">mHiddenApiWarningShown</span> <span class="operator">=</span> cls.getDeclaredField(<span class="string">&quot;mHiddenApiWarningShown&quot;</span>);</span><br><span class="line">    mHiddenApiWarningShown.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    mHiddenApiWarningShown.setBoolean(activityThread, <span class="literal">true</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é—ªå±å›¾å°ºå¯¸"><a href="#é—ªå±å›¾å°ºå¯¸" class="headerlink" title="é—ªå±å›¾å°ºå¯¸"></a>é—ªå±å›¾å°ºå¯¸</h2><ul><li>mdpiï¼š320x480</li><li>hdpiï¼š480x800</li><li>xhdpiï¼š720x1280</li><li>xxhdpiï¼š1080x1920</li><li>xxxhdpiï¼š2160x3840</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> å®‰å“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹å†™ JavaScript bind å‡½æ•°</title>
      <link href="/ef0fa347e647/"/>
      <url>/ef0fa347e647/</url>
      
        <content type="html"><![CDATA[<p><code>bind</code> æ˜¯åœ¨ ES5 åŠ å…¥çš„è¯­æ³•ï¼Œå…·ä½“å¦‚ä½•ä½¿ç”¨ MDN éƒ½æœ‰ã€‚ä½†æœ‰ä¸€ç‚¹éœ€è¦é¢å¤–æ³¨æ„ä¸€ä¸‹ï¼š<code>bind</code> ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå®ƒä¼šä¿®æ”¹ <code>this</code> çš„æŒ‡å‘ï¼Œå¹¶è¿”å›æ–°çš„å‡½æ•°ä½“ã€‚</p><h2 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h2><ol><li>æ”¹å˜ <code>this</code> æŒ‡å‘: éœ€è¦ä½¿ç”¨ <code>apply</code> æˆ– <code>call</code></li><li>è¿”å›æ–°çš„å‡½æ•°ä½“: å‡½æ•°ä½œä¸ºå€¼è¿”å›</li></ol><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ä½¿ç”¨é—­åŒ…ä¿å­˜ this æŒ‡é’ˆã€ä¸Šä¸‹æ–‡å’Œå‚æ•°ï¼Œå¹¶å°†ä¸Šä¸‹æ–‡å’Œå‚æ•°ä½¿ç”¨ apply æ”¹å˜ this æŒ‡å‘ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bind1</span> = <span class="keyword">function</span>(<span class="params">context</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> that = <span class="variable language_">this</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    that.<span class="title function_">apply</span>(context, <span class="variable language_">arguments</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼å’ŒåŸç”Ÿ <code>bind()</code> ä¸€æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123; <span class="attr">name</span>:<span class="string">&quot;æ¨ä¿Šå®&quot;</span> &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayHi</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>, name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> pSay = sayHi.<span class="title function_">bind1</span>(person)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> æ‰‹å†™ä»£ç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript ä¸­ type å’Œ interface çš„åŒºåˆ«</title>
      <link href="/a7d393e0caa2/"/>
      <url>/a7d393e0caa2/</url>
      
        <content type="html"><![CDATA[<h2 id="ç›¸åŒç‚¹"><a href="#ç›¸åŒç‚¹" class="headerlink" title="ç›¸åŒç‚¹"></a>ç›¸åŒç‚¹</h2><h3 id="éƒ½å¯ä»¥æè¿°ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°"><a href="#éƒ½å¯ä»¥æè¿°ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°" class="headerlink" title="éƒ½å¯ä»¥æè¿°ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°"></a>éƒ½å¯ä»¥æè¿°ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°</h3><h4 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SetUser</span> &#123;</span><br><span class="line">  (<span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>) : <span class="built_in">void</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="type"><a href="#type" class="headerlink" title="type"></a>type</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">SetUser</span> = <span class="function">(<span class="params">name:<span class="built_in">string</span>, age: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span></span><br></pre></td></tr></table></figure><h3 id="éƒ½å…è®¸æ‹“å±•ï¼ˆextendsï¼‰"><a href="#éƒ½å…è®¸æ‹“å±•ï¼ˆextendsï¼‰" class="headerlink" title="éƒ½å…è®¸æ‹“å±•ï¼ˆextendsï¼‰"></a>éƒ½å…è®¸æ‹“å±•ï¼ˆ<code>extends</code>ï¼‰</h3><p><code>interface</code> å’Œ <code>type</code> éƒ½å¯ä»¥æ‰©å±•ï¼Œå¹¶ä¸”ä¸¤è€…å¹¶ä¸æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>interface</code> å¯ä»¥ <code>extends</code> <code>type</code>ï¼Œ<code>type</code> ä¹Ÿå¯ä»¥ <code>extends</code> <code>interface</code>ã€‚<strong>è™½ç„¶æ•ˆæœå·®ä¸å¤šï¼Œä½†æ˜¯ä¸¤è€…è¯­æ³•ä¸åŒ</strong>ã€‚</p><h4 id="interface-extends-type"><a href="#interface-extends-type" class="headerlink" title="interface extends type"></a>interface extends type</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Name</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> <span class="keyword">extends</span> <span class="title class_">Name</span> &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="type-extends-interface"><a href="#type-extends-interface" class="headerlink" title="type extends interface"></a>type extends interface</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Name</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = <span class="title class_">Name</span> &amp; &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸åŒç‚¹"><a href="#ä¸åŒç‚¹" class="headerlink" title="ä¸åŒç‚¹"></a>ä¸åŒç‚¹</h2><h3 id="type-å¯ä»¥è€Œ-interface-ä¸è¡Œ"><a href="#type-å¯ä»¥è€Œ-interface-ä¸è¡Œ" class="headerlink" title="type å¯ä»¥è€Œ interface ä¸è¡Œ"></a>type å¯ä»¥è€Œ interface ä¸è¡Œ</h3><h4 id="type-å¯ä»¥å£°æ˜åŸºæœ¬ç±»å‹åˆ«åï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ç­‰ç±»å‹"><a href="#type-å¯ä»¥å£°æ˜åŸºæœ¬ç±»å‹åˆ«åï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ç­‰ç±»å‹" class="headerlink" title="type å¯ä»¥å£°æ˜åŸºæœ¬ç±»å‹åˆ«åï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ç­‰ç±»å‹"></a>type å¯ä»¥å£°æ˜åŸºæœ¬ç±»å‹åˆ«åï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ç­‰ç±»å‹</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸºæœ¬ç±»å‹åˆ«å</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Name</span> = <span class="built_in">string</span></span><br><span class="line"><span class="comment">// è”åˆç±»å‹</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">  <span class="title function_">wong</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">  <span class="title function_">miao</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Pet</span> = <span class="title class_">Dog</span> | <span class="title class_">Cat</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…·ä½“å®šä¹‰æ•°ç»„æ¯ä¸ªçš„ç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PetList</span> = [<span class="title class_">Dog</span>, <span class="title class_">Pet</span>]</span><br></pre></td></tr></table></figure><h4 id="type-è¯­å¥ä¸­è¿˜å¯ä»¥ä½¿ç”¨-typeof-è·å–å®ä¾‹çš„ç±»å‹è¿›è¡Œèµ‹å€¼"><a href="#type-è¯­å¥ä¸­è¿˜å¯ä»¥ä½¿ç”¨-typeof-è·å–å®ä¾‹çš„ç±»å‹è¿›è¡Œèµ‹å€¼" class="headerlink" title="type è¯­å¥ä¸­è¿˜å¯ä»¥ä½¿ç”¨ typeof è·å–å®ä¾‹çš„ç±»å‹è¿›è¡Œèµ‹å€¼"></a>type è¯­å¥ä¸­è¿˜å¯ä»¥ä½¿ç”¨ typeof è·å–å®ä¾‹çš„ç±»å‹è¿›è¡Œèµ‹å€¼</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“ä½ æƒ³è·å–ä¸€ä¸ªå˜é‡çš„ç±»å‹æ—¶ï¼Œä½¿ç”¨ typeof</span></span><br><span class="line"><span class="keyword">let</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="keyword">type</span> B = <span class="keyword">typeof</span> div</span><br></pre></td></tr></table></figure><h3 id="interface-å¯ä»¥è€Œ-type-ä¸è¡Œ"><a href="#interface-å¯ä»¥è€Œ-type-ä¸è¡Œ" class="headerlink" title="interface å¯ä»¥è€Œ type ä¸è¡Œ"></a>interface å¯ä»¥è€Œ type ä¸è¡Œ</h3><p>interface èƒ½å¤Ÿå£°æ˜åˆå¹¶</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">sex</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">User æ¥å£ä¸º &#123;</span></span><br><span class="line"><span class="comment">  name: string</span></span><br><span class="line"><span class="comment">  age: number</span></span><br><span class="line"><span class="comment">  sex: string</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä¸æ¸…æ¥šä»€ä¹ˆæ—¶å€™ç”¨interface&#x2F;typeï¼Œèƒ½ç”¨ interface å®ç°ï¼Œå°±ç”¨ interface , å¦‚æœä¸èƒ½å°±ç”¨ type ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
            <tag> æ˜é‡‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wx-promise-pro</title>
      <link href="/2f2bd5ced1a6/"/>
      <url>/2f2bd5ced1a6/</url>
      
        <content type="html"><![CDATA[<p>âœ¨å¼ºå¤§ã€ä¼˜é›…çš„å°ç¨‹åºå¼‚æ­¥åº“ğŸš€ å°ç¨‹åºpromise</p><p><a href="https://nodei.co/npm/wx-promise-pro/"><img src="https://user-gold-cdn.xitu.io/2020/2/18/1705883821e962d8?w=297&h=45&f=png&s=3701" alt="NPM"></a></p><h2 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h2><ul><li>æ–¹ä¾¿é›†æˆï¼šä¸€å¤„å¼•ç”¨ï¼Œå¤„å¤„ä½¿ç”¨</li><li>æŠŠå¾®ä¿¡å°ç¨‹åºæ‰€æœ‰å¼‚æ­¥ API promise åŒ–å¹¶æŒ‚åœ¨åˆ°<code>wx.pro</code> å¯¹è±¡ä¸‹</li><li>æ”¯æŒ ES2018 <code>finally</code> ç‰¹æ€§</li><li>æ”¯æŒ TypeScript å¼€å‘</li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm i wx-promise-pro</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">$ yarn add wx-promise-pro</span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; promisifyAll, promisify &#125; <span class="keyword">from</span> <span class="string">&#x27;wx-promise-pro&#x27;</span></span><br><span class="line"><span class="comment">// promisify all wxâ€˜s api</span></span><br><span class="line"><span class="title function_">promisifyAll</span>()</span><br><span class="line"><span class="comment">// promisify single api</span></span><br><span class="line"><span class="title function_">promisify</span>(wx.<span class="property">getSystemInfo</span>)().<span class="title function_">then</span>(<span class="variable language_">console</span>.<span class="property">log</span>)</span><br></pre></td></tr></table></figure><h2 id="æ”¯æŒæ‰€æœ‰çš„å¾®ä¿¡å°ç¨‹åºå¼‚æ­¥API"><a href="#æ”¯æŒæ‰€æœ‰çš„å¾®ä¿¡å°ç¨‹åºå¼‚æ­¥API" class="headerlink" title="æ”¯æŒæ‰€æœ‰çš„å¾®ä¿¡å°ç¨‹åºå¼‚æ­¥API"></a>æ”¯æŒæ‰€æœ‰çš„å¾®ä¿¡å°ç¨‹åºå¼‚æ­¥API</h2><p>ä½¿ç”¨ <code>promisifyAll</code> å¼€å‘è€…æ— éœ€å…³å¿ƒå…¼å®¹ä¸å¦ï¼Œåªè¦æ˜¯ <code>wx</code> æ”¯æŒçš„ apiï¼Œ<code>wx.pro</code> å…¨éƒ¨æ”¯æŒã€‚</p><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¼”ç¤º wxPromise çš„èƒ½åŠ›</span></span><br><span class="line">wx.<span class="property">pro</span>.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;åŠ è½½ä¸­&#x27;</span>,</span><br><span class="line">  <span class="attr">mask</span>: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line">wx.<span class="property">pro</span>.<span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://cnodejs.org/api/v1/topics&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">header</span>: &#123;<span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>&#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">&#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Contributors"><a href="#Contributors" class="headerlink" title="Contributors"></a>Contributors</h2><p>This project exists thanks to all the people who contribute. <!--[[Contribute](CONTRIBUTING.md)].--><br><a href="https://github.com/youngjuning/wx-promise-pro/graphs/contributors"><img src="https://user-gold-cdn.xitu.io/2020/2/18/17058837fd8af7c9?w=890&h=74&f=svg&s=150945" /></a></p><h2 id="GitHubæºç ï¼šhttps-github-com-youngjuning-wx-promise-pro"><a href="#GitHubæºç ï¼šhttps-github-com-youngjuning-wx-promise-pro" class="headerlink" title="GitHubæºç ï¼šhttps://github.com/youngjuning/wx-promise-pro"></a>GitHubæºç ï¼š<a href="https://github.com/youngjuning/wx-promise-pro">https://github.com/youngjuning/wx-promise-pro</a></h2>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å¼€å‘ä¸€ä¸ª Node Cli</title>
      <link href="/614cd34a921f/"/>
      <url>/614cd34a921f/</url>
      
        <content type="html"><![CDATA[<p>Node.js ç”¨é€”å¾ˆå¹¿ï¼Œå¸¸ç”¨æ¥å¼€å‘æœåŠ¡ã€æ¡Œé¢åº”ç”¨ç­‰è¢«å¼€å‘è€…ç†ŸçŸ¥ï¼ŒNode.js è¿˜æœ‰å¦å¤–ä¸€ä¸ªéå¸¸å®ç”¨çš„åœºæ™¯ - å‘½ä»¤è¡Œåº”ç”¨ï¼ˆåæ–‡ç»Ÿç§° CLIï¼‰ã€‚</p><blockquote><p>æœ¬æ–‡å¯å‚è€ƒçš„æºç ï¼š<a href="https://github.com/youngjuning/cli">https://github.com/youngjuning/cli</a></p></blockquote><h2 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h2><p>åˆ›å»ºä¸€ä¸ª<code>youngjuning</code> ç›®å½•ï¼Œå¹¶ä½¿ç”¨è¿›å…¥è¯¥ç›®å½•:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> youngjuning &amp;&amp; <span class="built_in">cd</span> youngjuning</span><br></pre></td></tr></table></figure><p>åœ¨è¯¥ç›®å½•ä¸‹æ–°å»º <code>bin/cli.js</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello World&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>package.json</code> çš„ <code>bin</code> é¡¹æ˜¯ç”¨æ¥æŒ‡å®šå„ä¸ªå†…éƒ¨å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;bin&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;youngjuning&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./bin/cli.js&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨å‘½ä»¤è¡Œè¾“å…¥ <code>npm link</code> æˆ– <code>npm install -g</code> å°†å½“å‰é¡¹ç›®å®‰è£…åˆ°å…¨å±€ç¯å¢ƒï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>youngjuning</code> æ¥è¿è¡Œæ–‡ä»¶äº†ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9dc89f3724cf4aa5bc71f7089c27c28d~tplv-k3u1fbpfcp-zoom-1.image"></p><h2 id="commander-js"><a href="#commander-js" class="headerlink" title="commander.js"></a>commander.js</h2><p>Node.js ä¸ºæˆ‘ä»¬æä¾›äº† <code>process.argv</code> æ¥è¯»å–å‘½ä»¤è¡Œå‚æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬å¯¹æ­¤ä¸ä½œä»‹ç»ï¼Œæœ‰å…´è¶£å¯ä»¥è‡ªè¡Œç ”ç©¶ï¼Œæˆ‘é€‰æ‹©äº† tj å¤§ç¥çš„ <a href="https://www.npmjs.com/package/commander">commander</a>ï¼š</p><ul><li><code>command</code>: å®šä¹‰å‘½ä»¤è¡ŒæŒ‡ä»¤ï¼Œåé¢å¯è·Ÿä¸Šä¸€ä¸ª nameï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œå¦‚ <code>.command( &#39;app [name]&#39;)</code></li><li><code>alias</code>: å®šä¹‰ä¸€ä¸ªæ›´çŸ­çš„å‘½ä»¤è¡ŒæŒ‡ä»¤</li><li><code>description</code>: æè¿°ï¼Œå®ƒä¼šåœ¨ help é‡Œé¢å±•ç¤º</li><li><code>option</code>: å®šä¹‰å‚æ•°ã€‚å®ƒæ¥å—å››ä¸ªå‚æ•°<ul><li>åœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ï¼Œå®ƒå¯è¾“å…¥çŸ­åå­— <code>-a</code> å’Œé•¿åå­— <code>â€“app</code>ï¼Œä½¿ç”¨ <code>|</code> æˆ–è€… <code>,</code> åˆ†éš”ï¼Œåœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨æ—¶ï¼Œè¿™ä¸¤ä¸ªæ˜¯ç­‰ä»·çš„ï¼ŒåŒºåˆ«æ˜¯åè€…å¯ä»¥åœ¨ç¨‹åºé‡Œé€šè¿‡å›è°ƒè·å–åˆ°</li><li>ç¬¬äºŒä¸ªä¸ºæè¿°, ä¼šåœ¨ <code>help</code> ä¿¡æ¯é‡Œå±•ç¤ºå‡ºæ¥</li><li>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œä»–æ¥æ”¶çš„å‚æ•°ä¸ºä¸€ä¸ª <code>string</code>ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‘½ä»¤è¡Œåˆ›å»ºå¤šä¸ªæ¨¡å—ï¼Œå°±éœ€è¦ä¸€ä¸ªå›è°ƒæ¥å¤„ç†</li><li>ç¬¬å››ä¸ªå‚æ•°ä¸ºé»˜è®¤å€¼</li></ul></li><li><code>action</code>: æ³¨å†Œä¸€ä¸ª <code>callback</code> å‡½æ•°,è¿™é‡Œéœ€æ³¨æ„ç›®å‰å›è°ƒä¸æ”¯æŒ let å£°æ˜å˜é‡</li><li><code>parse</code>: è§£æå‘½ä»¤è¡Œ</li></ul><h2 id="inquire-js"><a href="#inquire-js" class="headerlink" title="inquire.js"></a>inquire.js</h2><blockquote><p>äº¤äº’å‘½ä»¤è¾“å…¥æ’ä»¶ï¼</p></blockquote><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> answers = <span class="keyword">await</span> inquirer.<span class="title function_">prompt</span>([</span><br><span class="line">  <span class="comment">/* Pass your questions in here */</span></span><br><span class="line">])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(answers)</span><br></pre></td></tr></table></figure><h3 id="å‚æ•°è¯¦è§£"><a href="#å‚æ•°è¯¦è§£" class="headerlink" title="å‚æ•°è¯¦è§£"></a>å‚æ•°è¯¦è§£</h3><ul><li><code>type</code>: è¡¨ç¤ºæé—®çš„ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š<code>input</code>, <code>confirm</code>, <code>list</code>, <code>rawlist</code>, <code>expand</code>, <code>checkbox</code>, <code>password</code>, <code>editor</code>ï¼›</li><li><code>name</code>: å­˜å‚¨å½“å‰é—®é¢˜å›ç­”çš„å˜é‡ï¼›</li><li><code>message</code>: é—®é¢˜çš„æè¿°ï¼›</li><li><code>default</code>: é»˜è®¤å€¼ï¼›</li><li><code>choices</code>: åˆ—è¡¨é€‰é¡¹ï¼Œåœ¨æŸäº› type ä¸‹å¯ç”¨ï¼Œå¹¶ä¸”åŒ…å«ä¸€ä¸ªåˆ†éš”ç¬¦(separator)ï¼›</li><li><code>validate</code>: å¯¹ç”¨æˆ·çš„å›ç­”è¿›è¡Œæ ¡éªŒï¼›</li><li><code>filter</code>: å¯¹ç”¨æˆ·çš„å›ç­”è¿›è¡Œè¿‡æ»¤å¤„ç†ï¼Œè¿”å›å¤„ç†åçš„å€¼ï¼›</li><li><code>transformer</code>: å¯¹ç”¨æˆ·å›ç­”çš„æ˜¾ç¤ºæ•ˆæœè¿›è¡Œå¤„ç†(å¦‚ï¼šä¿®æ”¹å›ç­”çš„å­—ä½“æˆ–èƒŒæ™¯é¢œè‰²)ï¼Œä½†ä¸ä¼šå½±å“æœ€ç»ˆçš„ç­”æ¡ˆçš„å†…å®¹ï¼›</li><li><code>when</code>: æ ¹æ®å‰é¢é—®é¢˜çš„å›ç­”ï¼Œåˆ¤æ–­å½“å‰é—®é¢˜æ˜¯å¦éœ€è¦è¢«å›ç­”ï¼›</li><li><code>pageSize</code>: ä¿®æ”¹æŸäº› <code>type</code> ç±»å‹ä¸‹çš„æ¸²æŸ“è¡Œæ•°ï¼›</li><li><code>prefix</code>: ä¿®æ”¹ <code>message</code> é»˜è®¤å‰ç¼€ï¼›</li><li><code>suffix</code>: ä¿®æ”¹ <code>message</code> é»˜è®¤åç¼€ã€‚</li></ul><h2 id="å®ç°åŠ¨æ€æ¨¡æ¿"><a href="#å®ç°åŠ¨æ€æ¨¡æ¿" class="headerlink" title="å®ç°åŠ¨æ€æ¨¡æ¿"></a>å®ç°åŠ¨æ€æ¨¡æ¿</h2><ul><li>åˆ©ç”¨ <code>recursive-readdir</code> åº“é€’å½’è¯»å–é¡¹ç›®æ‰€æœ‰æ–‡ä»¶</li><li>åˆ©ç”¨ <code>handlebars</code> è¿›è¡Œæ¨¡æ¿æ›¿æ¢</li><li>åˆ©ç”¨ <code>fs</code> æ¨¡å—è¿›è¡Œè¯»æ–‡ä»¶å’Œå†™æ–‡ä»¶æ“ä½œ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> handlebars = <span class="built_in">require</span>(<span class="string">&#x27;handlebars&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> recursive = <span class="built_in">require</span>(<span class="string">&#x27;recursive-readdir&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">compile</span> = (<span class="params">meta, file</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> content = fs.<span class="title function_">readFileSync</span>(file).<span class="title function_">toString</span>()</span><br><span class="line">  <span class="keyword">const</span> result = handlebars.<span class="title function_">compile</span>(content)(meta)</span><br><span class="line">  fs.<span class="title function_">writeFileSync</span>(file, result)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">meta, src</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">recursive</span>(src, <span class="function">(<span class="params">err, files</span>) =&gt;</span> &#123;</span><br><span class="line">    files.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">compile</span>(meta, file)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‘½ä»¤è¡Œå·¥å…·"><a href="#å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="å‘½ä»¤è¡Œå·¥å…·"></a>å‘½ä»¤è¡Œå·¥å…·</h2><ul><li><a href="https://www.npmjs.com/package/chalk">chalk.js</a>: ç¾åŒ–å‘½ä»¤è¡Œçš„æ¨¡å—</li><li><a href="https://www.npmjs.com/package/ora">ora</a>: Elegant terminal spinner</li><li><a href="https://www.npmjs.com/package/ncp">ncp</a>: å¼‚æ­¥çš„æ‹·è´æ–‡ä»¶ï¼ŒåŒ…å«ç©ºæ–‡ä»¶å¤¹</li><li><a href="https://www.npmjs.com/package/recursive-readdir">recursive-readdir</a>: é€’å½’åœ°åˆ—å‡ºç›®å½•å’Œå­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¸åŒ…å«ç›®å½•æœ¬èº«ã€‚</li><li><a href="https://github.com/shelljs/shelljs">shelljs</a>: Unix shell commands for Node.js</li><li><a href="https://www.npmjs.com/package/log-symbols">log-symbols</a>: æ‰“å°æ—¥å¿—çš„ç‰¹æ®Šæ ‡å¿—</li><li><a href="https://www.npmjs.com/package/download-git-repo">download-git-repo</a>: Download and extract a git repository (GitHub, GitLab, Bitbucket) from node</li><li><a href="https://www.npmjs.com/package/global-prefix">global-prefix</a>: è·å– npm å…¨å±€å®‰è£…çš„å‰ç¼€</li><li><a href="https://www.npmjs.com/package/exec-sh">exec-sh</a>: æ‰§è¡Œ shell å‘½ä»¤è½¬å‘æ‰€æœ‰ stdio æµï¼Œæ¯” shelljs exec å‘½ä»¤å¥½ç”¨</li><li><a href="https://www.npmjs.com/package/wml">wml</a>: wml ä¾¦å¬æŸä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ›´æ”¹ï¼ˆä½¿ç”¨ watchmanï¼‰ï¼Œç„¶åå°†æ›´æ”¹çš„æ–‡ä»¶å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚</li><li><a href="https://blog.ihaiu.com/cmd-open/">cmd-open</a>: æ‰©å±• Windows å‘½ä»¤ open</li><li><a href="https://github.com/shelljs/shx">shx</a>: shx is a wrapper around ShellJS Unix commands, providing an easy solution for simple Unix-like, cross-platform commands in npm package scripts.</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> æ˜é‡‘ </tag>
            
            <tag> cli </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Navigation 5 æœ€ä½³å®è·µ</title>
      <link href="/863ed71c199e/"/>
      <url>/863ed71c199e/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ–‡ç« ç¤ºä¾‹æºç : <a href="https://github.com/youngjuning/react-navigation-best-practice">https://github.com/youngjuning/react-navigation-best-practice</a></p></blockquote><h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add @react-navigation/native @react-navigation/stack @react-navigation/bottom-tabs react-native-reanimated react-native-gesture-handler react-native-screens react-native-safe-area-context @react-native-community/masked-view</span><br></pre></td></tr></table></figure><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>ä¸ºäº†å®Œæˆ  <code>react-native-screens</code> çš„å®‰è£…ï¼Œæ·»åŠ ä¸‹é¢ä¸¤è¡Œä»£ç åˆ° <code>android/app/build.gradle</code> æ–‡ä»¶çš„ <code>dependencies</code> éƒ¨åˆ†ä¸­ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&#x27;androidx.appcompat:appcompat:1.1.0-rc01&#x27;</span></span><br><span class="line">implementation <span class="string">&#x27;androidx.swiperefreshlayout:swiperefreshlayout:1.1.0-alpha02&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†å®Œæˆ  <code>react-native-gesture-handler</code> çš„å®‰è£…, åœ¨å…¥å£æ–‡ä»¶çš„é¡¶éƒ¨æ·»åŠ ä¸‹é¢çš„ä»£ç , æ¯”å¦‚ <code>index.js</code> æˆ– <code>App.js</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;react-native-gesture-handler&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ•´ä¸ª Appç”¨ <code>NavigationContainer</code>åŒ…è£¹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NavigationContainer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-navigation/native&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">NavigationContainer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* Rest of your app code */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">NavigationContainer</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h2 id="App-js"><a href="#App-js" class="headerlink" title="App.js"></a>App.js</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">View</span>,</span><br><span class="line">  <span class="title class_">Text</span>,</span><br><span class="line">  <span class="title class_">StyleSheet</span>,</span><br><span class="line">  <span class="title class_">SafeAreaView</span>,</span><br><span class="line">  <span class="title class_">StatusBar</span>,</span><br><span class="line">  <span class="title class_">BackHandler</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">NavigationContainer</span>, useFocusEffect&#125; <span class="keyword">from</span> <span class="string">&#x27;@react-navigation/native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;createBottomTabNavigator&#125; <span class="keyword">from</span> <span class="string">&#x27;@react-navigation/bottom-tabs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;createStackNavigator, <span class="title class_">HeaderBackButton</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@react-navigation/stack&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">IconOutline</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons-react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Button</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">IconWithBadge</span> <span class="keyword">from</span> <span class="string">&#x27;./IconWithBadge&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HeaderButtons</span> <span class="keyword">from</span> <span class="string">&#x27;./HeaderButtons&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> getActiveRouteName <span class="keyword">from</span> <span class="string">&#x27;./getActiveRouteName&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> getScreenOptions <span class="keyword">from</span> <span class="string">&#x27;./getScreenOptions&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;navigationRef&#125; <span class="keyword">from</span> <span class="string">&#x27;./NavigationService&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">HomeScreen</span> = (<span class="params">&#123;navigation, route&#125;</span>) =&gt; &#123;</span><br><span class="line">  navigation.<span class="title function_">setOptions</span>(&#123;</span><br><span class="line">    <span class="attr">headerLeft</span>: <span class="function"><span class="params">props</span> =&gt;</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">HeaderBackButton</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#123;<span class="attr">...props</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          console.log(&#x27;ä¸èƒ½å†è¿”å›äº†ï¼&#x27;);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="attr">headerRight</span>: <span class="function">() =&gt;</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">HeaderButtons</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* titleã€iconNameã€onPressã€IconComponentã€iconSizeã€color */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">HeaderButtons.Item</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">title</span>=<span class="string">&quot;æ·»åŠ &quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">iconName</span>=<span class="string">&quot;plus&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span> console.log(&#x27;ç‚¹å‡»äº†æ·»åŠ æŒ‰é’®&#x27;)&#125;</span></span><br><span class="line"><span class="language-xml">          iconSize=&#123;24&#125;</span></span><br><span class="line"><span class="language-xml">          color=&quot;#ffffff&quot;</span></span><br><span class="line"><span class="language-xml">        /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">HeaderButtons</span>&gt;</span></span></span><br><span class="line">    ),</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useFocusEffect</span>(</span><br><span class="line">    <span class="title class_">React</span>.<span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// Do something when the screen is focused</span></span><br><span class="line">      <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// Do something when the screen is unfocused</span></span><br><span class="line">        <span class="comment">// Useful for cleanup functions</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;, []),</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> &#123;author&#125; = route.<span class="property">params</span> || &#123;&#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">StatusBar</span> <span class="attr">barStyle</span>=<span class="string">&quot;dark-content&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Text</span>&gt;</span>Home Screen<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Text</span>&gt;</span>&#123;author&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          // <span class="attr">ä½¿ç”¨</span> <span class="attr">setOptions</span> <span class="attr">æ›´æ–°æ ‡é¢˜</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span> navigation.setOptions(&#123;headerTitle: &#x27;Updated!&#x27;&#125;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">          Update the title</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">            // è·³è½¬åˆ°æŒ‡å®šé¡µé¢ï¼Œå¹¶ä¼ é€’ä¸¤ä¸ªå‚æ•°</span></span><br><span class="line"><span class="language-xml">            navigation.navigate(&#x27;DetailsScreen&#x27;, &#123;</span></span><br><span class="line"><span class="language-xml">              otherParam: &#x27;anything you want here&#x27;,</span></span><br><span class="line"><span class="language-xml">            &#125;)</span></span><br><span class="line"><span class="language-xml">          &#125;&gt;</span></span><br><span class="line"><span class="language-xml">          Go to DetailsScreen</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span> navigation.navigate(&#x27;SafeAreaViewScreen&#x27;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">          Go SafeAreaViewScreen</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">            navigation.navigate(&#x27;CustomAndroidBackButtonBehaviorScreen&#x27;)</span></span><br><span class="line"><span class="language-xml">          &#125;&gt;</span></span><br><span class="line"><span class="language-xml">          Go CustomAndroidBackButtonBehavior</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">DetailsScreen</span> = (<span class="params">&#123;navigation, route&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// é€šè¿‡ props.route.params æ¥æ”¶å‚æ•°</span></span><br><span class="line">  <span class="keyword">const</span> &#123;itemId, otherParam&#125; = route.<span class="property">params</span>;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>Details Screen<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>itemId: &#123;itemId&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>otherParam: &#123;otherParam&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        // <span class="attr">è¿”å›ä¸Šä¸€é¡µ</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span> navigation.goBack()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        Go back</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        // <span class="attr">å¦‚æœè¿”å›ä¸Šä¸€ä¸ªé¡µé¢éœ€è¦ä¼ é€’å‚æ•°</span>ï¼Œ<span class="attr">è¯·ä½¿ç”¨</span> <span class="attr">navigate</span> <span class="attr">æ–¹æ³•</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span> navigation.navigate(&#x27;HomeScreen&#x27;, &#123;author: &#x27;æ¨ä¿Šå®&#x27;&#125;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        Go back with Params</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">SettingsScreen</span> = (<span class="params">&#123;navigation, route&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">SafeAreaView</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">style</span>=<span class="string">&#123;&#123;flex:</span> <span class="attr">1</span>, <span class="attr">justifyContent:</span> &#x27;<span class="attr">space-between</span>&#x27;, <span class="attr">alignItems:</span> &#x27;<span class="attr">center</span>&#x27;&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>This is top text.<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>This is bottom text.<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">SafeAreaView</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">SafeAreaViewScreen</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">SafeAreaView</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">style</span>=<span class="string">&#123;&#123;flex:</span> <span class="attr">1</span>, <span class="attr">justifyContent:</span> &#x27;<span class="attr">space-between</span>&#x27;, <span class="attr">alignItems:</span> &#x27;<span class="attr">center</span>&#x27;&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>This is top text.<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>This is bottom text.<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">SafeAreaView</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">CustomAndroidBackButtonBehaviorScreen</span> = (<span class="params">&#123;navigation, route&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">useFocusEffect</span>(</span><br><span class="line">    <span class="title class_">React</span>.<span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="title function_">onBackPress</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;ç‰©ç†è¿”å›é”®è¢«æ‹¦æˆªäº†ï¼&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="title class_">BackHandler</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;hardwareBackPress&#x27;</span>, onBackPress);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="function">() =&gt;</span></span><br><span class="line">        <span class="title class_">BackHandler</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;hardwareBackPress&#x27;</span>, onBackPress);</span><br><span class="line">    &#125;, []),</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>AndroidBackHandlerScreen<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Stack</span> = <span class="title function_">createStackNavigator</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">BottomTab</span> = <span class="title function_">createBottomTabNavigator</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">BottomTabScreen</span> = (<span class="params"></span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">BottomTab.Navigator</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">screenOptions</span>=<span class="string">&#123;(&#123;route&#125;)</span> =&gt;</span> (&#123;</span></span><br><span class="line"><span class="language-xml">      tabBarIcon: (&#123;focused, color, size&#125;) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        let iconName;</span></span><br><span class="line"><span class="language-xml">        if (route.name === &#x27;HomeScreen&#x27;) &#123;</span></span><br><span class="line"><span class="language-xml">          iconName = focused ? &#x27;apple&#x27; : &#x27;apple&#x27;;</span></span><br><span class="line"><span class="language-xml">          return (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">IconWithBadge</span> <span class="attr">badgeCount</span>=<span class="string">&#123;90&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">IconOutline</span> <span class="attr">name</span>=<span class="string">&#123;iconName&#125;</span> <span class="attr">size</span>=<span class="string">&#123;size&#125;</span> <span class="attr">color</span>=<span class="string">&#123;color&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">IconWithBadge</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          );</span></span><br><span class="line"><span class="language-xml">        &#125; else if (route.name === &#x27;SettingsScreen&#x27;) &#123;</span></span><br><span class="line"><span class="language-xml">          iconName = focused ? &#x27;twitter&#x27; : &#x27;twitter&#x27;;</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">        return <span class="tag">&lt;<span class="name">IconOutline</span> <span class="attr">name</span>=<span class="string">&#123;iconName&#125;</span> <span class="attr">size</span>=<span class="string">&#123;size&#125;</span> <span class="attr">color</span>=<span class="string">&#123;color&#125;</span> /&gt;</span>;</span></span><br><span class="line"><span class="language-xml">      &#125;,</span></span><br><span class="line"><span class="language-xml">    &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">    tabBarOptions=&#123;&#123;</span></span><br><span class="line"><span class="language-xml">      activeTintColor: &#x27;tomato&#x27;,</span></span><br><span class="line"><span class="language-xml">      inactiveTintColor: &#x27;gray&#x27;,</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Stack.Screen</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">name</span>=<span class="string">&quot;HomeScreen&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">component</span>=<span class="string">&#123;HomeScreen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">options</span>=<span class="string">&#123;&#123;tabBarLabel:</span> &#x27;<span class="attr">é¦–é¡µ</span>&#x27;&#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Stack.Screen</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">name</span>=<span class="string">&quot;SettingsScreen&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">component</span>=<span class="string">&#123;SettingsScreen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">options</span>=<span class="string">&#123;&#123;tabBarLabel:</span> &#x27;<span class="attr">è®¾ç½®</span>&#x27;&#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">BottomTab.Navigator</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> routeNameRef = <span class="title class_">React</span>.<span class="title function_">useRef</span>();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">NavigationContainer</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;navigationRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onStateChange</span>=<span class="string">&#123;state</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          const previousRouteName = routeNameRef.current;</span></span><br><span class="line"><span class="language-xml">          const currentRouteName = getActiveRouteName(state);</span></span><br><span class="line"><span class="language-xml">          if (previousRouteName !== currentRouteName) &#123;</span></span><br><span class="line"><span class="language-xml">            console.log(&#x27;[onStateChange]&#x27;, currentRouteName);</span></span><br><span class="line"><span class="language-xml">            if (currentRouteName === &#x27;HomeScreen&#x27;) &#123;</span></span><br><span class="line"><span class="language-xml">              StatusBar.setBarStyle(&#x27;dark-content&#x27;); // ä¿®æ”¹ StatusBar</span></span><br><span class="line"><span class="language-xml">            &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">              StatusBar.setBarStyle(&#x27;dark-content&#x27;); // ä¿®æ”¹ StatusBar</span></span><br><span class="line"><span class="language-xml">            &#125;</span></span><br><span class="line"><span class="language-xml">          &#125;</span></span><br><span class="line"><span class="language-xml">          // Save the current route name for later comparision</span></span><br><span class="line"><span class="language-xml">          routeNameRef.current = currentRouteName;</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Stack.Navigator</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">initialRouteName</span>=<span class="string">&quot;HomeScreen&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          // <span class="attr">é¡µé¢å…±äº«çš„é…ç½®</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">screenOptions</span>=<span class="string">&#123;getScreenOptions()&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Stack.Screen</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">name</span>=<span class="string">&quot;BottomTabScreen&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">component</span>=<span class="string">&#123;BottomTabScreen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">options</span>=<span class="string">&#123;&#123;headerShown:</span> <span class="attr">false</span>&#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Stack.Screen</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">name</span>=<span class="string">&quot;DetailsScreen&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">component</span>=<span class="string">&#123;DetailsScreen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">options</span>=<span class="string">&#123;&#123;headerTitle:</span> &#x27;<span class="attr">è¯¦æƒ…</span>&#x27;&#125;&#125; // <span class="attr">headerTitle</span> <span class="attr">ç”¨æ¥è®¾ç½®æ ‡é¢˜æ </span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">initialParams</span>=<span class="string">&#123;&#123;itemId:</span> <span class="attr">42</span>&#125;&#125; // <span class="attr">é»˜è®¤å‚æ•°</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Stack.Screen</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">name</span>=<span class="string">&quot;SafeAreaViewScreen&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">component</span>=<span class="string">&#123;SafeAreaViewScreen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">options</span>=<span class="string">&#123;&#123;headerTitle:</span> &#x27;<span class="attr">SafeAreaView</span>&#x27;&#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Stack.Screen</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">name</span>=<span class="string">&quot;CustomAndroidBackButtonBehaviorScreen&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">component</span>=<span class="string">&#123;CustomAndroidBackButtonBehaviorScreen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">options</span>=<span class="string">&#123;&#123;headerTitle:</span> &#x27;<span class="attr">æ‹¦æˆªå®‰å“ç‰©ç†è¿”å›é”®</span>&#x27;&#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Stack.Navigator</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">NavigationContainer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="attr">flex</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">justifyContent</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><blockquote><p>è·¯ç”±åç§°çš„å¤§å°å†™æ— å…³ç´§è¦ â€“ ä½ å¯ä»¥ä½¿ç”¨å°å†™å­—æ¯<code>home</code>æˆ–å¤§å†™å­—æ¯<code>Home</code>ï¼Œè¿™å–å†³äºä½ çš„å–œå¥½ã€‚ æˆ‘ä»¬æ›´å–œæ¬¢å°†è·¯ç”±åç§°å¤§å†™ã€‚ æˆ‘ä»¬æ›´å–œæ¬¢åˆ©ç”¨æˆ‘ä»¬çš„è·¯ç”±åç§°ã€‚</p></blockquote><blockquote><p>è·³è½¬æ–¹æ³•æœ‰ <code>navigate</code>ã€ <code>push</code> ã€<code>goBack</code>ã€<code>popToTop</code></p></blockquote><blockquote><p>å¯ä»¥ç”¨ <code>navigation.setParams</code> æ–¹æ³•æ›´æ–°é¡µé¢çš„å‚æ•°</p></blockquote><blockquote><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>options=&#123;(&#123; route, navigation &#125;) =&gt; (&#123; headerTitle: route.params.name &#125;)&#125;</code> çš„æ–¹å¼åœ¨æ ‡é¢˜ä¸­ä½¿ç”¨å‚æ•°</p></blockquote><blockquote><p>æˆ‘ä»¬å¯ä»¥ç”¨ <code>navigation.setOptions</code> æ›´æ–°é¡µé¢é…ç½®</p></blockquote><ul><li><code>Stack.Navigator</code><ul><li><code>initialRouteName</code> : ç”¨æ¥é…ç½® <code>Stack.Navigator</code> çš„åˆå§‹è·¯ç”±</li><li><code>screenOptions</code>: é¡µé¢å…±äº«é…ç½®å¯¹è±¡</li></ul></li><li><code>Stack.Screen</code><ul><li><code>name</code>: é¡µé¢å</li><li><code>component</code>: é¡µé¢å¯¹åº”ç»„ä»¶</li><li><code>options</code>: é¡µé¢é…ç½®å¯¹è±¡</li><li><code>initialParams</code>: é»˜è®¤å‚æ•°</li></ul></li></ul><h2 id="HeaderButtons-js"><a href="#HeaderButtons-js" class="headerlink" title="HeaderButtons.js"></a>HeaderButtons.js</h2><p>ä½¿ç”¨ <code>react-navigation-header-buttons</code> ç»„ä»¶æ­é…ä»»æ„ Icon ç»„ä»¶å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„ Header Button ç»„ä»¶ï¼Œæˆ‘è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œä½¿ç”¨äº† <code>@ant-design/icons-react-native</code>ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">HeaderButtons</span> <span class="keyword">as</span> <span class="title class_">RNHeaderButtons</span>,</span><br><span class="line">  <span class="title class_">HeaderButton</span> <span class="keyword">as</span> <span class="title class_">RNHeaderButton</span>,</span><br><span class="line">  <span class="title class_">Item</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react-navigation-header-buttons&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">IconOutline</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons-react-native&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">HeaderButton</span> = props =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">RNHeaderButton</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#123;<span class="attr">...props</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">IconComponent</span>=<span class="string">&#123;IconOutline&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">iconSize</span>=<span class="string">&#123;props.iconSize</span> || <span class="attr">23</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">color</span>=<span class="string">&#123;props.color</span> || &#x27;#<span class="attr">000000</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">HeaderButtons</span> = props =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">RNHeaderButtons</span> <span class="attr">HeaderButtonComponent</span>=<span class="string">&#123;HeaderButton&#125;</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">HeaderButtons</span>.<span class="property">Item</span> = <span class="title class_">Item</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">HeaderButtons</span>;</span><br></pre></td></tr></table></figure><h2 id="IconWithBadge-js"><a href="#IconWithBadge-js" class="headerlink" title="IconWithBadge.js"></a>IconWithBadge.js</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">View</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Badge</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/react-native&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">IconWithBadge</span> = (<span class="params">&#123;children, badgeCount, ...props&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;&#123;width:</span> <span class="attr">24</span>, <span class="attr">height:</span> <span class="attr">24</span>, <span class="attr">margin:</span> <span class="attr">5</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Badge</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#123;<span class="attr">...props</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">style</span>=<span class="string">&#123;&#123;position:</span> &#x27;<span class="attr">absolute</span>&#x27;, <span class="attr">right:</span> <span class="attr">-6</span>, <span class="attr">top:</span> <span class="attr">-3</span>&#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">text</span>=<span class="string">&#123;badgeCount&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">IconWithBadge</span>;</span><br></pre></td></tr></table></figure><h2 id="getActiveRouteName-js"><a href="#getActiveRouteName-js" class="headerlink" title="getActiveRouteName.js"></a>getActiveRouteName.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Gets the current screen from navigation state</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">state</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getActiveRouteName</span> = state =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> route = state.<span class="property">routes</span>[state.<span class="property">index</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (route.<span class="property">state</span>) &#123;</span><br><span class="line">    <span class="comment">// Dive into nested navigators</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getActiveRouteName</span>(route.<span class="property">state</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> route.<span class="property">name</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getActiveRouteName;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="getScreenOptions-js"><a href="#getScreenOptions-js" class="headerlink" title="getScreenOptions.js"></a>getScreenOptions.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">TransitionPresets</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@react-navigation/stack&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getScreenOptions</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">headerStyle</span>: &#123;</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="string">&#x27;#ffffff&#x27;</span>,</span><br><span class="line">    &#125;, <span class="comment">// ä¸€ä¸ªåº”ç”¨äº header çš„æœ€å¤–å±‚ View çš„ æ ·å¼å¯¹è±¡</span></span><br><span class="line">    <span class="attr">headerTintColor</span>: <span class="string">&#x27;#000000&#x27;</span>, <span class="comment">// è¿”å›æŒ‰é’®å’Œæ ‡é¢˜éƒ½ä½¿ç”¨è¿™ä¸ªå±æ€§ä½œä¸ºå®ƒä»¬çš„é¢œè‰²</span></span><br><span class="line">    <span class="attr">headerTitleStyle</span>: &#123;</span><br><span class="line">      <span class="attr">fontWeight</span>: <span class="string">&#x27;bold&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">headerBackTitleVisible</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">headerTitleAlign</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">cardStyle</span>: &#123;</span><br><span class="line">      <span class="attr">flex</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="string">&#x27;#f5f5f9&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    ...<span class="title class_">TransitionPresets</span>.<span class="property">SlideFromRightIOS</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getScreenOptions;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="NavigationService-js"><a href="#NavigationService-js" class="headerlink" title="NavigationService.js"></a>NavigationService.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> navigationRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">navigate</span> = (<span class="params">name, params</span>) =&gt; &#123;</span><br><span class="line">  navigationRef.<span class="property">current</span> &amp;&amp; navigationRef.<span class="property">current</span>.<span class="title function_">navigate</span>(name, params);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getNavigation</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> navigationRef.<span class="property">current</span> &amp;&amp; navigationRef.<span class="property">current</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  navigate,</span><br><span class="line">  getNavigation,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="é¡µé¢ç”Ÿå‘½å‘¨æœŸä¸React-Navigation"><a href="#é¡µé¢ç”Ÿå‘½å‘¨æœŸä¸React-Navigation" class="headerlink" title="é¡µé¢ç”Ÿå‘½å‘¨æœŸä¸React Navigation"></a>é¡µé¢ç”Ÿå‘½å‘¨æœŸä¸React Navigation</h2><p>ä¸€ä¸ªåŒ…å« é¡µé¢ A å’Œ B çš„ StackNavigator ï¼Œå½“è·³è½¬åˆ° A æ—¶ï¼Œ<code>componentDidMount</code> æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼› å½“è·³è½¬åˆ° B æ—¶ï¼Œ<code>componentDidMount</code> æ–¹æ³•ä¹Ÿä¼šè¢«è°ƒç”¨ï¼Œä½†æ˜¯ A ä¾ç„¶åœ¨å †æ ˆä¸­ä¿æŒ è¢«åŠ è½½çŠ¶æ€ï¼Œä»–çš„ <code>componentWillUnMount</code> ä¹Ÿä¸ä¼šè¢«è°ƒç”¨ã€‚</p><p>å½“ä» B è·³è½¬åˆ° Aï¼ŒBçš„ <code>componentWillUnmount</code> æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œä½†æ˜¯ A çš„ <code>componentDidMount</code>æ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ï¼Œåº”ä¸ºæ­¤æ—¶ A ä¾ç„¶æ˜¯è¢«åŠ è½½çŠ¶æ€ã€‚</p><h2 id="React-Navigation-ç”Ÿå‘½å‘¨æœŸäº‹ä»¶"><a href="#React-Navigation-ç”Ÿå‘½å‘¨æœŸäº‹ä»¶" class="headerlink" title="React Navigation ç”Ÿå‘½å‘¨æœŸäº‹ä»¶"></a>React Navigation ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</h2><h3 id="addListener"><a href="#addListener" class="headerlink" title="addListener"></a>addListener</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params">&#123; navigation &#125;</span>) &#123;</span><br><span class="line">  <span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> unsubscribe = navigation.<span class="title function_">addListener</span>(<span class="string">&#x27;focus&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// Screen was focused</span></span><br><span class="line">      <span class="comment">// Do something</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> unsubscribe;</span><br><span class="line">  &#125;, [navigation]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ProfileContent</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useFocusEffect"><a href="#useFocusEffect" class="headerlink" title="useFocusEffect"></a>useFocusEffect</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useFocusEffect</span>(</span><br><span class="line">    <span class="title class_">React</span>.<span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// Do something when the screen is focused</span></span><br><span class="line">      <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// Do something when the screen is unfocused</span></span><br><span class="line">        <span class="comment">// Useful for cleanup functions</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;, []),</span><br><span class="line">  );</span><br></pre></td></tr></table></figure><h2 id="éšè—-Header-x2F-TabBar"><a href="#éšè—-Header-x2F-TabBar" class="headerlink" title="éšè— Header&#x2F;TabBar"></a>éšè— Header&#x2F;TabBar</h2><ul><li><code>headerMode:&quot;none&quot;</code>: hide Header for <code>Stack.Navigator</code></li><li><code>headerShown:false</code>: hide Header for <code>Stack.Screen</code></li><li><code>tabBar=&#123;() =&gt; null&#125;</code>: hide TabBar for <code>BottomTab.Navigator</code></li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">NavigationContainer</span>, useFocusEffect&#125; <span class="keyword">from</span> <span class="string">&#x27;@react-navigation/native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;createStackNavigator, <span class="title class_">TransitionPresets</span>, <span class="title class_">HeaderBackButton</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@react-navigation/stack&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;createBottomTabNavigator&#125; <span class="keyword">from</span> <span class="string">&#x27;@react-navigation/bottom-tabs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Stack</span> = <span class="title function_">createStackNavigator</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">BottomTab</span> = <span class="title function_">createBottomTabNavigator</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">NavigationContainer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">Stack.Navigator</span> <span class="attr">headerMode</span>=<span class="string">&quot;none&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Stack.Screen</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">...</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">options</span>=<span class="string">&#123;&#123;</span> <span class="attr">headerShown:</span> <span class="attr">false</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Stack.Screen</span> <span class="attr">...</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;() =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">BottomTab.Navigator</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">...</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">           <span class="attr">tabBar</span>=<span class="string">&#123;()</span> =&gt;</span> null&#125;</span></span><br><span class="line"><span class="language-xml">          &gt;</span></span><br><span class="line"><span class="language-xml">            ...</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">BottomTab.Navigator</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Stack.Screen</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Stack.Navigator</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">NavigationContainer</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="TabBar-çš„-StatusBar-ä¸åŒ"><a href="#TabBar-çš„-StatusBar-ä¸åŒ" class="headerlink" title="TabBar çš„ StatusBar ä¸åŒ"></a>TabBar çš„ StatusBar ä¸åŒ</h2><p>ä¸€èˆ¬æˆ‘ä»¬ä¼šå¯¹ç‰¹æ®Šçš„é‚£ä¸ªTabBarè¿›è¡Œå¤„ç†ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getActiveRouteName</span> = state =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> route = state.<span class="property">routes</span>[state.<span class="property">index</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (route.<span class="property">state</span>) &#123;</span><br><span class="line">    <span class="comment">// Dive into nested navigators</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getActiveRouteName</span>(route.<span class="property">state</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> route.<span class="property">name</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> ref = <span class="title class_">React</span>.<span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;/* è®¿é—® ref.current?.navigate */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">NavigationContainer</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onStateChange</span>=<span class="string">&#123;state</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          const previousRouteName = ref.current;</span></span><br><span class="line"><span class="language-xml">          const currentRouteName = getActiveRouteName(state);</span></span><br><span class="line"><span class="language-xml">          if (previousRouteName !== currentRouteName) &#123;</span></span><br><span class="line"><span class="language-xml">            console.log(&#x27;[onStateChange]&#x27;, currentRouteName);</span></span><br><span class="line"><span class="language-xml">            if (currentRouteName === &#x27;HomeScreen&#x27;) &#123;</span></span><br><span class="line"><span class="language-xml">              StatusBar.setBarStyle(&#x27;dark-content&#x27;);  // ä¿®æ”¹ StatusBar</span></span><br><span class="line"><span class="language-xml">            &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">              StatusBar.setBarStyle(&#x27;dark-content&#x27;);  // ä¿®æ”¹ StatusBar</span></span><br><span class="line"><span class="language-xml">            &#125;</span></span><br><span class="line"><span class="language-xml">          &#125;</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">NavigationContainer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç›‘å¬å®‰å“ç‰©ç†è¿”å›é”®"><a href="#ç›‘å¬å®‰å“ç‰©ç†è¿”å›é”®" class="headerlink" title="ç›‘å¬å®‰å“ç‰©ç†è¿”å›é”®"></a>ç›‘å¬å®‰å“ç‰©ç†è¿”å›é”®</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">View</span>, <span class="title class_">Text</span>, <span class="title class_">BackHandler</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">CustomAndroidBackButtonBehaviorScreen</span> = (<span class="params">&#123;navigation, route&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">useFocusEffect</span>(</span><br><span class="line">    <span class="title class_">React</span>.<span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="title function_">onBackPress</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;ç‰©ç†è¿”å›é”®è¢«æ‹¦æˆªäº†ï¼&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="title class_">BackHandler</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;hardwareBackPress&#x27;</span>, onBackPress);</span><br><span class="line">      <span class="keyword">return</span> <span class="function">() =&gt;</span></span><br><span class="line">        <span class="title class_">BackHandler</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;hardwareBackPress&#x27;</span>, onBackPress);</span><br><span class="line">    &#125;, []),</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>AndroidBackHandlerScreen<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="åœ¨å­ç»„ä»¶ä¸­è®¿é—®-navigation"><a href="#åœ¨å­ç»„ä»¶ä¸­è®¿é—®-navigation" class="headerlink" title="åœ¨å­ç»„ä»¶ä¸­è®¿é—® navigation"></a>åœ¨å­ç»„ä»¶ä¸­è®¿é—® <code>navigation</code></h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>useNavigation()</code> hook æ¥è®¿é—® navigationï¼Œå†ä¹Ÿä¸ç”¨ä¼ é€’å¤šå±‚ <code>navigation</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useNavigation &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-navigation/native&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GoToButton</span>(<span class="params">&#123; screenName &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> navigation = <span class="title function_">useNavigation</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&#123;</span>`<span class="attr">Go</span> <span class="attr">to</span> $&#123;<span class="attr">screenName</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span> navigation.navigate(screenName)&#125;</span></span><br><span class="line"><span class="language-xml">    /&gt;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»™é¡µé¢ä¼ é€’é¢å¤–çš„å±æ€§"><a href="#ç»™é¡µé¢ä¼ é€’é¢å¤–çš„å±æ€§" class="headerlink" title="ç»™é¡µé¢ä¼ é€’é¢å¤–çš„å±æ€§"></a>ç»™é¡µé¢ä¼ é€’é¢å¤–çš„å±æ€§</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Stack</span>.<span class="property">Screen</span></span><br><span class="line">  name=<span class="string">&quot;HomeScreen&quot;</span></span><br><span class="line">  options=&#123;&#123;<span class="attr">headerTitle</span>: <span class="string">&#x27;é¦–é¡µ&#x27;</span>&#125;&#125;&gt;</span><br><span class="line">  &#123;<span class="function"><span class="params">props</span> =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">HomeScreen</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">extraData</span>=<span class="string">&#123;&#123;author:</span> &#x27;<span class="attr">æ¨ä¿Šå®</span>&#x27;&#125;&#125; /&gt;</span></span>&#125;</span><br><span class="line">&lt;/<span class="title class_">Stack</span>.<span class="property">Screen</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="è·å–-Header-Height"><a href="#è·å–-Header-Height" class="headerlink" title="è·å– Header Height"></a>è·å– Header Height</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useHeaderHeight &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-navigation/stack&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title class_">HeaderHeight</span> = <span class="title function_">useHeaderHeight</span>() <span class="comment">// è·å–Header Height</span></span><br><span class="line">    <span class="keyword">return</span>(...)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h2 id="ç»§ç»­ä½¿ç”¨ç±»ç»„ä»¶"><a href="#ç»§ç»­ä½¿ç”¨ç±»ç»„ä»¶" class="headerlink" title="ç»§ç»­ä½¿ç”¨ç±»ç»„ä»¶"></a>ç»§ç»­ä½¿ç”¨ç±»ç»„ä»¶</h2><p>è€ƒè™‘åˆ°å¯¹äºä¸é€‚åº” Hooks çš„ä½†æ˜¯ä¸šåŠ¡åˆå¾ˆç´§æ€¥çš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥å†ç±»ç»„ä»¶ä¹‹ä¸Šå°è£…ä¸€å±‚æ¥æ”¯æŒ React Navigation çš„ Hooks ç»„ä»¶ï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆåšï¼Œèµ·å› æ˜¯å› ä¸º React Navigation 5 ä¸­æˆ‘ä»¬åªèƒ½é€šè¿‡ <code>useHeaderHeight()</code> æ–¹æ³•è·å–æ ‡é¢˜æ é«˜åº¦ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Albums</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ScrollView</span> <span class="attr">ref</span>=<span class="string">&#123;this.props.scrollRef&#125;</span>&gt;</span>&#123;/* content */&#125;<span class="tag">&lt;/<span class="name">ScrollView</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å°è£…å¹¶å¯¼å‡º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> ref = <span class="title class_">React</span>.<span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="title function_">useScrollToTop</span>(ref);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Albums</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">scrollRef</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> æœ€ä½³å®è·µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript å¾ªç¯é—­åŒ…</title>
      <link href="/082429a479e9/"/>
      <url>/082429a479e9/</url>
      
        <content type="html"><![CDATA[<p>å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨è¯æ³•ä½œç”¨åŸŸæ—¶ï¼Œå°±äº§ç”Ÿäº†é—­åŒ…ï¼Œå³ä½¿å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œçš„ã€‚</p><p>è¦è¯´æ˜å¾ªç¯é—­åŒ…ï¼Œfor å¾ªç¯æ˜¯æœ€å¸¸è§çš„ä¾‹å­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++)&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">  &#125;, i * <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç”±äºå¾ˆå¤šå¼€å‘è€…å¯¹é—­åŒ…çš„æ¦‚å¿µè®¤è¯†åœ°ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå› æ­¤å½“å¾ªç¯å†…éƒ¨åŒ…å«å‡½æ•°å®šä¹‰æ—¶ï¼Œä»£ç æ ¼å¼æ£€æŸ¥å™¨ç»å¸¸å‘å‡ºè­¦å‘Šï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä»‹ç»å¦‚ä½•æ‰èƒ½æ­£ç¡®ä½¿ç”¨é—­åŒ…å¹¶å‘æŒ¥å®ƒçš„å¨åŠ›ï¼Œä½†æ˜¯ä»£ç æ ¼å¼æ£€æŸ¥å™¨å¹¶æ²¡æœ‰é‚£ä¹ˆçµæ•ï¼Œå®ƒä¼šå‡è®¾ä½ å¹¶ä¸çœŸæ­£äº†è§£è‡ªå·±åœ¨åšä»€ä¹ˆï¼Œæ‰€ä»¥æ— è®ºå¦‚ä½•éƒ½ä¼šå‘å‡ºè­¦å‘Šã€‚</p></blockquote><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯¹è¿™æ®µä»£ç è¡Œä¸ºçš„é¢„æœŸæ˜¯åˆ†åˆ«è¾“å‡ºæ•°å­— 1-5ï¼Œæ¯ç§’ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªã€‚</p><p>ä½†å®é™…ä¸Šï¼Œè¿™æ®µä»£ç åœ¨è¿è¡Œæ—¶ä¼šä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡è¾“å‡ºäº”æ¬¡ <code>6</code>.</p><p>è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p><p>é¦–å…ˆè§£é‡Š 6 æ˜¯ä»å“ªé‡Œæ¥çš„ã€‚è¿™ä¸ªå¾ªç¯çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ <code>i</code> ä¸åœ¨ <code>&lt;=5</code>ã€‚æ¡ä»¶é¦–æ¬¡æˆç«‹æ—¶ <code>i</code> çš„å€¼æ˜¯ <code>6</code>ã€‚å› æ­¤ï¼Œè¾“å‡ºæ˜¾ç¤ºçš„æ˜¯å¾ªç¯ç»“æŸæ—¶ <code>i</code> çš„æœ€ç»ˆå€¼ã€‚</p><p>ä»”ç»†æƒ³ä¸€ä¸‹ï¼Œè¿™å¥½åƒåˆæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå»¶è¿Ÿå‡½æ•°çš„å›è°ƒä¼šåœ¨å¾ªç¯ç»“æŸæ—¶æ‰æ‰§è¡Œã€‚äº‹å®ä¸Šï¼Œå½“å®šæ—¶å™¨è¿è¡Œæ—¶å³ä½¿æ¯ä¸ªè¿­ä»£ä¸­æ‰§è¡Œçš„æ˜¯ <code>setTimeout(..., 0)</code>ï¼Œæ‰€æœ‰çš„å›è°ƒå‡½æ•°ä¾ç„¶æ˜¯åœ¨å¾ªç¯ç»“æŸåæ‰è¢«æ‰§è¡Œï¼Œå› æ­¤ä¼šæ¯æ¬¡è¾“å‡ºä¸€ä¸ª 6 å‡ºæ¥ã€‚</p><p>è¿™é‡Œå¼•ç”³å‡ºä¸€ä¸ªæ›´æ·±å…¥çš„é—®é¢˜ï¼Œä»£ç ä¸­åˆ°åº•æœ‰ä»€ä¹ˆç¼ºé™·å¯¼è‡´å®ƒçš„è¡Œä¸ºåŒè¯­ä¹‰æ‰€æš—ç¤ºçš„ä¸ä¸€è‡´å‘¢ï¼Ÿ</p><p>ç¼ºé™·æ˜¯æˆ‘ä»¬è¯•å›¾å‡è®¾å¾ªç¯ä¸­çš„æ¯ä¸ªè¿­ä»£åœ¨è¿è¡Œæ—¶éƒ½ä¼šç»™è‡ªå·± â€œæ•è·â€ ä¸€ä¸ª <code>i</code> çš„å‰¯æœ¬ã€‚ä½†æ˜¯ä¸ªæ ¹æ®ä½œç”¨åŸŸçš„å·¥ä½œåŸç†ï¼Œå®é™…æƒ…å†µæ˜¯å°½ç®¡å¾ªç¯ä¸­çš„äº”ä¸ªå‡½æ•°æ˜¯åœ¨å„ä¸ªè¿­ä»£ä¸­åˆ†åˆ«å®šä¹‰çš„ï¼Œä½†æ˜¯<strong>å®ƒä»¬éƒ½è¢«å°é—­åœ¨ä¸€ä¸ªå…±äº«çš„å…¨å±€ä½œç”¨åŸŸä¸­</strong>ï¼Œå› æ­¤å®é™…ä¸Šåªæœ‰ä¸€ä¸ª <code>i</code>ã€‚</p><p>è¿™æ ·çš„è¯ï¼Œå½“ç„¶æ‰€æœ‰å‡½æ•°å…±äº«ä¸€ä¸ª <code>i</code> çš„å¼•ç”¨ã€‚å¾ªç¯ç»“æ„è®©æˆ‘ä»¬è¯¯ä»¥ä¸ºèƒŒåè¿˜æœ‰æ›´å¤æ‚çš„æœºåˆ¶åœ¨èµ·ä½œç”¨ï¼Œä½†å®é™…ä¸Šæ²¡æœ‰ã€‚å¦‚æœå°†å»¶è¿Ÿå‡½æ•°çš„å›è°ƒé‡å¤å®šä¹‰äº”æ¬¡ï¼Œå®Œå…¨ä¸ä½¿ç”¨å¾ªç¯ï¼Œé‚£å®ƒåŒè¿™æ®µä»£ç æ—¶å®Œå…¨ç­‰ä»·çš„ã€‚</p><p>ä¸‹é¢å›åˆ°æ­£é¢˜ã€‚ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬éœ€è¦æ›´å¤šçš„é—­åŒ…ä½œç”¨åŸŸï¼Œç‰¹åˆ«æ˜¯åœ¨å¾ªç¯çš„è¿‡ç¨‹ä¸­æ¯ä¸ªè¿­ä»£éƒ½éœ€è¦ä¸€ä¸ªé—­åŒ…ä½œç”¨åŸŸã€‚</p><h3 id="IIFE"><a href="#IIFE" class="headerlink" title="IIFE"></a>IIFE</h3><p>é€šè¿‡ IIFE ä¼šç«‹å³æ‰§è¡Œä¸€ä¸ªå‡½æ•°æ¥åˆ›å»ºä½œç”¨åŸŸã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ IIFE çš„ç‰¹æ€§æ¥åˆ›å»ºä¸€ä¸ªä½œç”¨åŸŸå¹¶ä¿å­˜æ¯æ¬¡å¾ªç¯çš„ <code>i</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">  (<span class="keyword">function</span>(<span class="params">j</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(j)</span><br><span class="line">    &#125;, j *<span class="number">1000</span>)</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œè¿™äº› IIFE ä¹Ÿä¸è¿‡å°±æ˜¯å‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°† i ä¼ é€’è¿›å»ï¼Œå¦‚æœæ„¿æ„çš„è¯å¯ä»¥å°†å˜é‡åå®šä¹‰ä¸º jï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è¿˜å«åš iã€‚æ— è®ºå¦‚ä½•è¿™æ®µä»£ç ç°åœ¨å¯ä»¥å·¥ä½œäº†ã€‚</p><p>åœ¨è¿­ä»£å†…ä½¿ç”¨ IIFE ä¼šä¸ºæ¯ä¸ªè¿­ä»£éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œä½¿å¾—å»¶è¿Ÿå‡½æ•°çš„å›è°ƒå¯ä»¥å°†æ–°çš„ä½œç”¨åŸŸå°é—­åœ¨æ¯ä¸ªè¿­ä»£å†…éƒ¨ï¼Œæ¯ä¸ªè¿­ä»£ä¸­éƒ½ä¼šå«æœ‰ä¸€ä¸ªå…·æœ‰æ­£ç¡®å€¼çš„å˜é‡ä¾›æˆ‘ä»¬è®¿é—®ã€‚</p><h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>; i&lt;= <span class="number">5</span>; i++) &#123; <span class="comment">// é€šè¿‡letåˆ›å»ºé—­åŒ…çš„ä½œç”¨åŸŸ</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">  &#125;, i++)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>let éšå¼åœ°åˆ›å»ºäº†ä¸€ä¸ªä½œç”¨åŸŸï¼Œèµ·åˆ°äº†é—­åŒ…çš„ä½œç”¨ã€‚å¾ˆé…·æ˜¯å§ï¼Ÿå—ä½œç”¨åŸŸå’Œé—­åŒ…è”æ‰‹ä¾¿å¯å¤©ä¸‹æ— æ•Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Native æ‹†åŒ…è§£å†³æ–¹æ¡ˆ</title>
      <link href="/c2664d63468a/"/>
      <url>/c2664d63468a/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ªRNåº”ç”¨ä¸­å¯èƒ½åŒ…å«è®¸å¤šä¸åŒçš„ä¸šåŠ¡ï¼Œè¿™äº›ä¸åŒçš„ä¸šåŠ¡å¾ˆå¯èƒ½æ˜¯ä¸åŒéƒ¨é—¨å¼€å‘çš„ï¼Œè¿™æ ·ä¸€ä¸ªåº“ä¸­å°±æœ‰è®¸è®¸å¤šå¤šçš„é‡å¤çš„RNä»£ç å’Œç¬¬ä¸‰æ–¹åº“ä»£ç ã€‚</p><p>æ‰€ä»¥ä¸€èˆ¬åšæ³•éƒ½æ˜¯å°†é‡å¤çš„RNä»£ç å’Œç¬¬ä¸‰æ–¹åº“æ‰“åŒ…æˆä¸€ä¸ªåŸºç¡€åŒ…ï¼Œç„¶åå„ä¸ªä¸šåŠ¡åœ¨åŸºç¡€åŒ…çš„åŸºç¡€ä¸Šè¿›è¡Œå¼€å‘ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥é™ä½å¯¹å†…å­˜çš„å ç”¨ï¼Œå‡å°‘åŠ è½½æ—¶é—´ï¼Œå‡å°‘çƒ­æ›´æ–°æ—¶æµé‡å¸¦å®½ç­‰ï¼Œåœ¨ä¼˜åŒ–æ–¹é¢èµ·åˆ°äº†éå¸¸å¤§çš„ä½œç”¨ã€‚</p><h2 id="æ‹†åŒ…æ–¹æ¡ˆé€‰æ‹©"><a href="#æ‹†åŒ…æ–¹æ¡ˆé€‰æ‹©" class="headerlink" title="æ‹†åŒ…æ–¹æ¡ˆé€‰æ‹©"></a>æ‹†åŒ…æ–¹æ¡ˆé€‰æ‹©</h2><p>ç›®å‰ï¼Œæœ€å¥½çš„RNåˆ†åŒ…æ–¹æ¡ˆè¿˜æ˜¯facebookå®˜æ–¹æä¾›çš„<a href="https://facebook.github.io/metro/docs/en/getting-started">metro bundle</a>ï¼Œæ­¤æ–¹æ¡ˆæ˜¯fbåœ¨0.50ç‰ˆæœ¬å¼•å…¥çš„ï¼Œå¹¶éšç€RNç‰ˆæœ¬çš„è¿­ä»£ä¸æ–­å®Œå–„ã€‚ä¹Ÿå³æ˜¯è¯´ï¼Œåªè¦ä½ ä½¿ç”¨çš„æ˜¯0.50ä»¥ä¸Šçš„RNç‰ˆæœ¬ï¼Œå°±å¯ä»¥ä½¿ç”¨metro bundleè¿›è¡Œå·®åˆ†åŒ…è¿›è¡Œçƒ­æ›´æ–°ã€‚</p><p>æˆ‘ä»¬é€‰æ‹© react-native-multibundler ä½œä¸ºæˆ‘ä»¬çš„æ‹†åŒ…æ–¹æ¡ˆï¼Œå®ƒåŸºäºreact nativeçš„metro bundlerçš„é…ç½®åŒ–å¼€å‘æ¥å¤„ç†åˆ†åŒ…ï¼Œæ”¯æŒiOSå’ŒAndroidï¼Œmetro bundlerä¸ºå®˜æ–¹æ‰“åŒ…çš„å·¥å…·ï¼Œä½¿ç”¨å®˜æ–¹åˆ†åŒ…æ–¹æ³•æ›´çµæ´»ç¨³å®šï¼Œæ¯”ç½‘ä¸Šçš„ä¸€äº›æ–¹æ³•æ›´å®ç”¨å¯é ã€‚</p><p>ä¸‹å›¾æ˜¯æˆ‘ä»¬çš„ç›®æ ‡æ¶æ„ï¼š</p><img src="https://i.loli.net/2019/10/12/AYqMTmdfp5jRlEi.png" style="zoom: 50%;" /><h2 id="metro-bundle"><a href="#metro-bundle" class="headerlink" title="metro bundle"></a>metro bundle</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">react-native bundle</span><br><span class="line">\ --platform android</span><br><span class="line">\ --dev false</span><br><span class="line">\ --entry-file platformDep.js</span><br><span class="line">\ --bundle-output ./android/app/src/main/assets/platform.android.bundle</span><br><span class="line">\ --assets-dest android/app/src/main/res/</span><br><span class="line">\ --config /&#123;ä½ çš„ç»å¯¹è·¯å¾„&#125;/platform57.config.js</span><br></pre></td></tr></table></figure><ul><li><code>--platform [string]</code>ï¼šios æˆ– androidï¼ˆé»˜è®¤iosï¼‰</li><li><code>--dev [boolean]</code>ï¼šæ‰“æ­£å¼åŒ…è¯·è®¾ç½®ä¸ºfalseï¼ˆé»˜è®¤trueï¼‰</li><li><code>--entry-file &lt;path&gt;</code> ï¼šæ‰“åŒ…å…¥å£æ–‡ä»¶ï¼Œç»å¯¹è·¯å¾„ã€ç›¸å¯¹è·¯å¾„éƒ½å¯ä»¥</li><li>s&#96;â€“bundle-output [string]ï¼šbundleåŒ…å­˜æ”¾çš„ä½ç½®</li><li><code>--assets-dest [string]</code> ï¼šå­˜æ”¾é™æ€èµ„æºçš„æ–‡ä»¶å¤¹</li><li><code>--config [string]</code>ï¼šCLI é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œæ ¹æ®åŸºç¡€åŒ…ä¸šåŠ¡åŒ…çš„ä¸åŒï¼Œæ·»åŠ  <code>--config &lt;path/to/config&gt;</code> å‚æ•°å¯¹ç›¸åº”å…¥å£æ–‡ä»¶æ‰“åŒ…ã€‚</li></ul><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://juejin.im/post/5cee0095f265da1b6d4006ec">React Native æ‹†åŒ…åŠå®è·µã€ŒiOS&amp;Androidã€</a></li><li><a href="https://www.zhuanzhi.ai/document/70cdd36e33264f337529e3a18c27215c">React Native åˆ†åŒ…å“ªå®¶å¼ºï¼Ÿçœ‹è¿™æ–‡å°±å¤Ÿäº†ï¼</a></li><li><a href="https://github.com/ctripcorp/CRN">ctripcorp&#x2F;CRN</a>ï¼šåå‘äºæ€§èƒ½ä¼˜åŒ–ï¼Œæ‹†åŒ…è¿™å—ä¸å¤Ÿè¯¦ç»†</li><li><a href="https://github.com/smallnew/react-native-multibundler">react-native-multibundler</a>ï¼šreact nativeå¯è§†åŒ–bundleæ‹†åŒ…,æ”¯æŒdebug,æ”¯æŒå®˜æ–¹çš„0.57~0.60ç‰ˆæœ¬,ä½¿ç”¨å®˜æ–¹çš„metroæ‹†åŒ…,é€‚ç”¨äºAndroidã€iOS</li><li><a href="https://juejin.im/post/5d906e19f265da5b9c3cf2ea">ä¸€ç§å¼ºå¤§ã€å¯é çš„React Nativeæ‹†åŒ…ä»¥åŠçƒ­æ›´æ–°æ–¹æ¡ˆï¼ŒåŸºäºCodePushï¼ŒMetro</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> metro </tag>
            
            <tag> React Native </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Native æ”¶è—å¤¹</title>
      <link href="/2d966006042c/"/>
      <url>/2d966006042c/</url>
      
        <content type="html"><![CDATA[<h2 id="å®˜æ–¹"><a href="#å®˜æ–¹" class="headerlink" title="å®˜æ–¹"></a>å®˜æ–¹</h2><ul><li><a href="https://github.com/react-native-community/cli/">@react-native-community&#x2F;cli</a>: Command line tools that ship with react-native</li><li><a href="https://react-native-community.github.io/upgrade-helper/">React Native upgrade helper</a></li><li><a href="https://react-navigation.canny.io/">React Navigation FeedBack</a></li><li><a href="https://github.com/facebook/metro">metro</a>:  ğŸš‡ The JavaScript bundler for React Native</li><li><a href="https://fbflipper.com/">Flipper</a>: Extensible mobile app debugger</li></ul><h2 id="å¿…å¤‡"><a href="#å¿…å¤‡" class="headerlink" title="å¿…å¤‡"></a>å¿…å¤‡</h2><ul><li><a href="https://github.com/ant-design/ant-design-mobile-rn">ant-design&#x2F;ant-design-mobile-rn</a>: Ant Design for React Native</li><li><a href="https://reactnavigation.org/zh-Hans/">react-navigation</a>: React Native åº”ç”¨ç¨‹åºçš„è·¯ç”±å’Œå¯¼èˆª</li><li><a href="https://github.com/Microsoft/react-native-code-push">react-native-code-push</a> React Native module for CodePush<ul><li><a href="https://github.com/strawferry/CodePushDialog">react-native-code-push-dialog</a></li></ul></li><li><a href="http://t.cn/RM8Gg7q">react-native-splash-screen</a>): React Native å¯åŠ¨å±ï¼Œè§£å†³ iOSï¼ŒAndroid å¯åŠ¨ç™½å±é—®é¢˜ï¼Œæ”¯æŒ Android å’Œ iOS</li><li><a href="https://github.com/jasonmerino/react-native-simple-store">react-native-simple-store</a>: <a href="https://github.com/jasonmerino/react-native-simple-store">https://github.com/jasonmerino/react-native-simple-store</a></li><li><a href="https://github.com/react-native-community/react-native-device-info">react-native-device-info</a>: Device Information for React Native iOS and Android</li></ul><h2 id="è¡¨å•"><a href="#è¡¨å•" class="headerlink" title="è¡¨å•"></a>è¡¨å•</h2><ul><li><a href="https://www.npmjs.com/package/rc-form">rc-form</a></li><li><a href="https://www.npmjs.com/package/react-native-validator">react-native-validator</a></li><li><a href="https://www.npmjs.com/package/react-native-confirmation-code-field">react-native-confirmation-code-field</a>: A react-native confirmation code field compatible with iOS, Android</li><li><a href="https://github.com/halilb/react-native-textinput-effects">react-native-textinput-effects</a>: Text inputs with custom label and icon animations for iOS and android. Built with react native and inspired by Codrops.</li><li><a href="https://www.npmjs.com/package/react-native-hide-show-password-input">react-native-hide-show-password-input</a>: React Native Hide Show Password InputText Component</li><li><a href="https://github.com/react-native-community/react-native-datetimepicker">react-native-community&#x2F;react-native-datetimepicker</a>: React Native date &amp; time picker component for iOS and Android</li><li><a href="https://github.com/umhan35/react-native-search-bar">react-native-search-bar</a>: The high-quality iOS native search bar for react native.</li></ul><h2 id="åŠ¨ç”»-x2F-æ‰‹åŠ¿-x2F-è¿›åº¦"><a href="#åŠ¨ç”»-x2F-æ‰‹åŠ¿-x2F-è¿›åº¦" class="headerlink" title="åŠ¨ç”»&#x2F;æ‰‹åŠ¿&#x2F;è¿›åº¦"></a>åŠ¨ç”»&#x2F;æ‰‹åŠ¿&#x2F;è¿›åº¦</h2><ul><li><a href="https://github.com/oblador/react-native-animatable">react-native-animatable</a>: React Native æ ‡å‡†æ˜“ç”¨çš„åŠ¨ç”»é›†å’Œå£°æ˜æ€§è¿‡æ¸¡</li><li><a href="https://github.com/react-native-community/lottie-react-native">lottie-react-native</a>: Lottie wrapper for React Native</li><li><a href="http://t.cn/RsYAM96">react-native-linear-gradient</a>: A <code>&lt;LinearGradient&gt;</code> component for react-native</li><li><a href="http://t.cn/AiKMLWNy">react-native-gesture-handler</a>: å£°æ˜æ€§ API å°†å¹³å°åŸç”Ÿè§¦æ‘¸å’Œæ‰‹åŠ¿ç³»ç»Ÿæš´éœ²ç»™ React Native</li><li><a href="http://t.cn/AiC4H5l3">react-native-spinkit</a>: React Native çš„åŠ¨ç”»åŠ è½½æŒ‡ç¤ºç¬¦é›†åˆ</li><li><a href="https://github.com/oblador/react-native-progress">react-native-progress</a>: Progress indicators and spinners for React Native using ReactART</li><li><a href="https://github.com/oblador/react-native-image-progress">react-native-image-progress</a>: Progress indicator for networked images in React Native</li></ul><h2 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h2><ul><li><a href="https://github.com/tomLadder/react-native-echarts-wrapper">react-native-echarts-wrapper</a>: ECharts Wrapper for React Native</li><li><a href="https://github.com/avishayil/react-native-user-avatar">react-native-user-avatar</a>: React Native çš„å¤´åƒç»„ä»¶</li><li><a href="https://www.npmjs.com/package/react-native-icon-badge">react-native-icon-badge</a>: Icon badge is used to create icon badge on some element, such as avatar, icon, imageâ€¦</li><li><a href="https://www.npmjs.com/package/react-native-signature-capture">react-native-signature-capture</a>: React Native library for capturing signature</li><li><a href="http://t.cn/AiC4Tgcw">@react-native-community&#x2F;blur</a>: React Native Blur component</li><li><a href="https://github.com/react-native-community/react-native-viewpager">react-native-viewpager</a>: This component allows the user to swipe left and right through pages of data</li><li><a href="http://t.cn/Ai9YU5QM">react-native-looped-carousel</a>: ğŸ ReactNative çš„å¾ªç¯æ—‹è½¬æœ¨é©¬</li><li><a href="http://t.cn/Ai9YybZ6">react-native-snap-carousel</a>: deckã€layoutã€parallax images</li><li><a href="http://t.cn/Ai9Y4qZ0">react-native-app-intro-slider</a>: Easy-to-use yet very configurable app introduction slider&#x2F;swiper based on FlatList</li><li><a href="https://github.com/bolan9999/react-native-largelist">react-native-largelist </a>: The best large list component for React Native.</li><li><a href="https://github.com/Spikef/react-native-gesture-password">react-native-gesture-password</a>: ä¸€ä¸ªReact Nativeçš„æ‰‹åŠ¿å¯†ç ç»„ä»¶ï¼Œçº¯JavaScriptå®ç°ï¼Œå› æ­¤åŒæ—¶æ”¯æŒiOSã€å®‰å“å’ŒWebå¹³å°ã€‚</li><li><a href="https://github.com/i6mi6/react-native-parallax-scroll-view">react-native-parallax-scroll-view</a>: A ScrollView-like component with parallax and sticky header support.</li><li><a href="http://t.cn/EIJQNBS">react-native-loading-spinner-overlay</a>: React Native Loading Spinner Overlay</li><li><a href="https://github.com/crazycodeboy/react-native-easy-toast">react-native-easy-toast</a>: A react native module to show toast like android, it works on iOS and Android.</li><li><a href="https://github.com/jeanregisser/react-native-popover">react-native-popover</a>: A <code>&lt;Popover /&gt;</code> component for react-native</li><li><a href="https://github.com/morenoh149/react-native-contacts">react-native-contacts</a>: é€šè®¯å½•</li><li><a href="https://github.com/jeanregisser/react-native-slider">react-native-slider</a>: React Native çš„çº¯ JavaScript Slider ç»„ä»¶</li><li><a href="https://github.com/deanmcpherson/react-native-sortable-listview">react-native-sortable-listview</a>: Drag drop capable wrapper of ListView for React Native</li><li><a href="https://github.com/alexbrillant/react-native-deck-swiper">react-native-deck-swiper</a>: react-native deck swiper</li><li><a href="https://github.com/WheelerLee/react-native-dropdown-menu">react-native-dropdown-menu</a>: æ˜“äºä½¿ç”¨çš„ React Native ä¸‹æ‹‰èœå•ç»„ä»¶</li><li><a href="https://github.com/gitim/react-native-sortable-list">react-native-sortable-list</a>: React Native Sortable List component</li></ul><h2 id="System"><a href="#System" class="headerlink" title="System"></a>System</h2><ul><li><a href="http://t.cn/AiCl5HTw">react-native-app-shortcuts</a>: ç”¨äºåœ¨ React Native ä¸­åˆ›å»º Android App å¿«æ·æ–¹å¼çš„åº“</li><li><a href="http://t.cn/AiC5uTiP">react-native-push-notification</a>: React Native Local and Remote Notifications</li><li><a href="https://github.com/jordanbyron/react-native-quick-actions">react-native-quick-actions</a>: A react-native interface for Touch 3D home screen quick actions</li><li><a href="http://t.cn/RsYAuMA">react-native-orientation</a>: åœ¨ react-native ä¸­ç›‘å¬è®¾å¤‡æ–¹å‘æ›´æ”¹</li><li><a href="https://github.com/react-native-community/react-native-permissions">react-native-permissions</a>:An unified permissions API for React Native on iOS and Android</li><li><a href="https://github.com/douglasjunior/react-native-keyboard-manager">react-native-keyboard-manager</a>: âš› Library to prevent issues of keyboard sliding up and cover inputs on React-Native iOS projects.</li></ul><h2 id="å¤šåª’ä½“"><a href="#å¤šåª’ä½“" class="headerlink" title="å¤šåª’ä½“"></a>å¤šåª’ä½“</h2><ul><li><a href="http://t.cn/RcqvN9z">react-native-image-crop-picker</a>: iOS&#x2F;Android image picker with support for camera, video, configurable compression, multiple images and cropping</li><li><a href="https://github.com/huangzuizui/react-native-file-opener">react-native-file-opener</a>: A React Native module that allows you to open a file (mp3, mp4, pdf, word, excel, dwg etc.) on your device with its default application</li><li><a href="https://github.com/react-native-community/react-native-audio-toolkit">react-native-audio-toolkit</a>: Cross-platform audio library for React Native</li><li><a href="https://github.com/react-native-community/react-native-video">react-native-video</a>: A Video component for react-native</li><li><a href="https://github.com/react-native-community/react-native-camera">react-native-camera</a>: A Camera component for React Native. Also supports barcode scanning!</li><li><a href="https://github.com/DylanVann/react-native-fast-image">react-native-fast-image</a>: ğŸš© FastImage, performant React Native image component.</li><li><a href="https://github.com/shahen94/react-native-video-processing">react-native-video-processing</a>: React Native çš„åŸç”Ÿè§†é¢‘ç¼–è¾‘&#x2F;ä¿®å‰ª&#x2F;å‹ç¼© ğŸ¥ åº“</li></ul><h2 id="Utils"><a href="#Utils" class="headerlink" title="Utils"></a>Utils</h2><ul><li><a href="https://github.com/ptelad/react-native-iphone-x-helper">react-native-iphone-x-helper</a>: A library to help you design your react-native app for the iPhone X, XS, XS Max &amp; XR</li><li><a href="https://github.com/oblador/react-native-keychain">react-native-keychain</a>: ğŸ”‘ Keychain Access for React Native</li><li><a href="https://github.com/joshswan/react-native-globalize">react-native-globalize</a>: å›½é™…åŒ–</li></ul><h2 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h2><ul><li><a href="https://github.com/JonnyBurger/npx-visualize-bundle">visualize-bundle</a>: <code>npx visualize-bundle</code> allows you to inspect your React Native bundle in just one command and to diagnose big modules.</li><li><a href="https://github.com/smallnew/react-native-multibundler">react-native-multibundler</a>: react native å¯è§†åŒ– bundle æ‹†åŒ…ï¼Œæ”¯æŒå®˜æ–¹çš„ 0.57~0.59 ç‰ˆæœ¬ï¼Œä½¿ç”¨å®˜æ–¹çš„ metro æ‹†åŒ…ï¼Œé€‚ç”¨äº Androidã€iOS</li><li><a href="https://github.com/shwenzhang/AndResGuard">AndResGuard</a>: Android èµ„æºæ··æ·†å·¥å…·</li><li><a href="https://github.com/skylot/jadx">jadx</a>: åç¼–è¯‘å·¥å…·</li><li><a href="https://github.com/frostney/react-native-create-library">react-native-create-library</a>: ğŸ““ Command line tool to create a React Native library with a single command</li><li><a href="http://t.cn/Rk0o2em">lisong&#x2F;code-push-server</a>: è‡ªå»º code-push æœåŠ¡å™¨</li><li><a href="https://github.com/wix/wml">wml</a>: ç¬¦å·é“¾æ¥çš„æ›¿ä»£æ–¹æ³•ï¼Œå®ƒå®é™…ä¸Šå°†å·²æ›´æ”¹çš„æ–‡ä»¶ä»æºæ–‡ä»¶å¤¹å¤åˆ¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹</li><li><a href="https://ethercreative.github.io/react-native-shadow-generator/">react-native-shadow-generator</a></li></ul><h2 id="ç¬¬ä¸‰æ–¹SDK"><a href="#ç¬¬ä¸‰æ–¹SDK" class="headerlink" title="ç¬¬ä¸‰æ–¹SDK"></a>ç¬¬ä¸‰æ–¹SDK</h2><ul><li><a href="http://t.cn/RIPNOd5">jpush-react-native</a>: æå…‰æ¨é€å®˜æ–¹æ”¯æŒçš„ React Native æ’ä»¶</li><li><a href="https://github.com/sishuguojixuefu/react-native-qiniu">react-native-qiniu</a>: react-native-qiniu</li><li><a href="http://t.cn/E9W1RhM">react-native-amap3d</a>: react-native é«˜å¾·åœ°å›¾ç»„ä»¶ï¼Œä½¿ç”¨æœ€æ–° 3D SDKï¼Œæ”¯æŒ Android + iOS</li><li><a href="http://t.cn/E9W1rwb">react-native-amap-geolocation</a>: React Native geolocation module for Android + iOS</li><li><a href="https://github.com/getsentry/sentry-react-native">sentry-react-native</a>: Official Sentry SDK for react-native</li></ul><h2 id="å¼€æºé¡¹ç›®"><a href="#å¼€æºé¡¹ç›®" class="headerlink" title="å¼€æºé¡¹ç›®"></a>å¼€æºé¡¹ç›®</h2><ul><li><a href="https://github.com/stoneWeb/elm-react-native">elm-react-native</a>: A react native app simulating eleme appï¼Œrun ios and android.</li><li><a href="https://github.com/listenzz/MyApp">React Native å·¥ç¨‹å®è·µ</a></li></ul><h2 id="ä¼˜è´¨æ–‡ç« "><a href="#ä¼˜è´¨æ–‡ç« " class="headerlink" title="ä¼˜è´¨æ–‡ç« "></a>ä¼˜è´¨æ–‡ç« </h2><ul><li><a href="https://bre.is/JdW9YRdE">ç”¨React-Native+Mobxåšä¸€ä¸ªè¿·ä½ æ°´æœå•†åŸAPP</a></li><li><a href="https://bre.is/xNQwNZbZ">react-native é€šè®¯å½•å­—æ¯è·³è½¬åˆ†ç»„åŠŸèƒ½</a></li><li><a href="https://bre.is/DxEXYBfx">React Nativeåº”ç”¨éƒ¨ç½²&#x2F;çƒ­æ›´æ–°-CodePushæœ€æ–°é›†æˆæ€»ç»“(æ–°)</a></li></ul><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ul><li>LeancloudPushDemo: React native + leancloud push notification demo</li><li>react-native-code-push-dialog: CodePush Custom Dialogï¼Œæ³¨æ„ï¼šè‹¹æœ Appã€ä¸­å›½çš„ android å¸‚åœºå¿…é¡»é‡‡ç”¨é™é»˜æ›´æ–°</li><li>react-native-dropdownè¿™æ˜¯ä¸‹æ‹‰èœå•çš„ç®€å•å®ç°</li><li>react-native-baidu-mapç™¾åº¦åœ°å›¾ React Native æ¨¡å—ï¼Œæ”¯æŒ react native 0.57+ï¼Œå·²æ›´æ–°åˆ°æœ€æ–°çš„ç™¾åº¦åœ°å›¾ SDK ç‰ˆæœ¬ã€‚</li><li>react-native-search-boxA simple search box with animation, inspired from ios search bar. Lightweight, fast, flexible.</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> æ”¶è—å¤¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–</title>
      <link href="/74820d054d6e/"/>
      <url>/74820d054d6e/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å‰ç«¯å¼€å‘ä¸­æœ‰ä¸€éƒ¨åˆ†çš„ç”¨æˆ·è¡Œä¸ºä¼šé¢‘ç¹åœ°è§¦å‘äº‹ä»¶æ‰§è¡Œï¼Œè€Œå¯¹äº DOM æ“ä½œã€èµ„æºåŠ è½½ç­‰è€—è´¹æ€§èƒ½çš„å¤„ç†ï¼Œå¾ˆå¯èƒ½å¯¼è‡´ç•Œé¢å¡é¡¿ï¼Œç”šè‡³æµè§ˆå™¨çš„å´©æºƒï¼Œå‡½æ•°èŠ‚æµï¼ˆ<code>throttle</code>ï¼‰å’Œå‡½æ•°é˜²æŠ–ï¼ˆ<code>debounce</code>ï¼‰å°±æ˜¯ä¸ºäº†è§£å†³ç±»ä¼¼éœ€æ±‚åº”è¿è€Œç”Ÿçš„ã€‚</p><h2 id="å‡½æ•°èŠ‚æµ"><a href="#å‡½æ•°èŠ‚æµ" class="headerlink" title="å‡½æ•°èŠ‚æµ"></a>å‡½æ•°èŠ‚æµ</h2><p>å‡½æ•°èŠ‚æµå°±æ˜¯é¢„å®šä¸€ä¸ªå‡½æ•°åªæœ‰åœ¨å¤§äºç­‰äºæ‰§è¡Œå‘¨æœŸæ—¶æ‰æ‰§è¡Œï¼Œå‘¨æœŸå†…è°ƒç”¨ä¸æ‰§è¡Œã€‚å¥½åƒæ°´æ»´æ”’åˆ°ä¸€å®šé‡é‡æ‰ä¼šè½ä¸‹ä¸€æ ·ã€‚åœºæ™¯ï¼šçª—å£è°ƒæ•´ï¼ˆresizeï¼‰ã€é¡µé¢æ»šåŠ¨ï¼ˆscrollï¼‰ã€æŠ¢è´­ç–¯ç‹‚ç‚¹å‡»ï¼ˆmousedownï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span> (fn, wait = <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> lastTime = <span class="number">0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">    <span class="keyword">if</span>(now - lastTime &gt;= wait) &#123;</span><br><span class="line">      <span class="comment">// è¿™é‡Œå¹¶ä¸éœ€è¦è€ƒè™‘æ‰§è¡Œç¯å¢ƒï¼Œæ‰€ä»¥è°ƒç”¨ apply() æ—¶ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ nullï¼Œä¹‹æ‰€ä»¥ä½¿ç”¨ apply ä¼ é€’å‚æ•°ï¼Œæ˜¯å› ä¸ºç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯ arguments å¯¹è±¡</span></span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="literal">null</span>, <span class="variable language_">arguments</span>)</span><br><span class="line">      lastTime = now</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">boom</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;boom&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="title function_">throttle</span>(boom,<span class="number">2000</span>), <span class="number">1000</span>) <span class="comment">// ä¸€ä¸ªå‘¨æœŸå†…è§¦å‘äº†ä¸¤æ¬¡å®šæ—¶å™¨ï¼Œä½†æ˜¯ä¸€ä¸ªå‘¨æœŸå†…åªä¼šæ‰§è¡Œä¸€æ¬¡ boom æ–¹æ³•ã€‚</span></span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°é˜²æŠ–"><a href="#å‡½æ•°é˜²æŠ–" class="headerlink" title="å‡½æ•°é˜²æŠ–"></a>å‡½æ•°é˜²æŠ–</h2><p>å‡½æ•°é˜²æŠ–å°±æ˜¯åœ¨å‡½æ•°éœ€è¦é¢‘ç¹è§¦å‘æƒ…å†µæ—¶ï¼Œåªæœ‰è¶³å¤Ÿç©ºé—²çš„æ—¶é—´ï¼Œæ‰æ‰§è¡Œä¸€æ¬¡ã€‚å¥½åƒå…¬äº¤å¸æœºä¼šç­‰äººéƒ½ä¸Šè½¦åæ‰å‡ºç«™ä¸€æ ·ã€‚åœºæ™¯ï¼šå®æ—¶æœç´¢ï¼ˆkeyupï¼‰ã€æ‹–æ‹½ï¼ˆmousemoveï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, wait = <span class="number">0</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(fn.<span class="property">tId</span>)</span><br><span class="line">    fn.<span class="property">tId</span> = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>)</span><br><span class="line">    &#125;.<span class="title function_">bind</span>(<span class="variable language_">this</span>), wait) <span class="comment">// ä½¿ç”¨ bind æ¥ç¡®ä¿å‡½æ•°æ‰§è¡Œç¯å¢ƒçš„æ­£ç¡®æ€§ï¼Œå¦åˆ™å°±æ˜¯ global äº†</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;debounce&quot;</span>).<span class="property">onclick</span> = <span class="title function_">debounce</span>(boom, <span class="number">300</span>)</span><br><span class="line"><span class="comment">// å•ä½æ—¶é—´å†…æ— è®ºæ“ä½œå¤šå°‘æ¬¡ï¼Œéƒ½ä¼šåˆå¹¶æˆä¸€æ¬¡æ“ä½œï¼Œå¹¶åœ¨æœ€åä¸€æ¬¡æ“ä½œåå»¶è¿Ÿ 300 æ¯«ç§’æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sliceã€substring å’Œ substr çš„åŒºåˆ«</title>
      <link href="/b0aeb6b939b0/"/>
      <url>/b0aeb6b939b0/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th>æ–¹æ³•</th><th>å‚æ•°</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td><code>slice(start,end)</code></td><td><code>start</code>(å¿…éœ€)-èµ·å§‹ä½ç½®<br /><code>end</code>(å¯é€‰)-ç»“æŸä½ç½®ï¼Œè‹¥æœªæŒ‡å®šï¼Œåˆ™é»˜è®¤åˆ°æœ«å°¾æ‰€æœ‰å…ƒç´ </td><td>è¿”å› <code>[start,end]</code>ä¹‹é—´çš„å…ƒç´ </td></tr><tr><td><code>substring(start, end)</code></td><td><code>start</code>(å¿…éœ€)-èµ·å§‹ä½ç½®<br /><code>end</code>(å¿…éœ€)-ç»“æŸä½ç½®ï¼Œè‹¥æœªæŒ‡å®šï¼Œåˆ™é»˜è®¤åˆ°æœ«å°¾æ‰€æœ‰å…ƒç´ </td><td>è¿”å› <code>[start, end]</code> ä¹‹é—´çš„å…ƒç´ </td></tr><tr><td><code>substr(start)</code></td><td><code>start</code>(å¿…éœ€)-èµ·å§‹ä½ç½®<br /><code>length</code>(å¯é€‰)-æ‰€æˆªå–çš„å…ƒç´ çš„ä¸ªæ•°ï¼Œè‹¥æœªæŒ‡å®šï¼Œåˆ™é»˜è®¤åˆ°æœ«å°¾</td><td>è¿”å› <code>[start, start+length]</code>ä¹‹é—´çš„å…ƒç´ </td></tr></tbody></table><blockquote><p>å½“ä¼ é€’çš„å‚æ•°éƒ½ä¸ºæ­£æ•°æ—¶ï¼Œ<code>substring</code> æ²¡æœ‰åŒºåˆ«ï¼Œå½“å‚æ•°ä¸ºè´Ÿæ•°æ—¶ï¼Œä¸‰ä¸ªå‡½æ•°çš„è¡Œä¸ºä¸å°½ç›¸åŒã€‚</p></blockquote><ul><li><code>slice</code>: å°†ä¼ å…¥çš„ç¦å‚æ•°ä¸å­—ç¬¦ä¸²é•¿åº¦æƒ³åŠ ï¼›</li><li><code>substring</code>: æŠŠæ‰€æœ‰çš„è´Ÿå€¼ç½®ä¸º0ï¼›</li><li><code>substr</code>: å°†è´Ÿçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸å­—ç¬¦ä¸²é•¿åº¦ç›¸åŠ ï¼Œè´Ÿçš„ç¬¬äºŒä¸ªå‚æ•°ç½®ä¸º0ã€‚</li></ul><p><strong>å‚æ•°ä¸ºæ­£æ•°çš„ä¾‹å­</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;hello world&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">slice</span>(<span class="number">3</span>)); <span class="comment">// lo world</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substring</span>(<span class="number">3</span>));<span class="comment">// lo world</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substr</span>(<span class="number">3</span>));<span class="comment">// lo world</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">slice</span>(<span class="number">3</span>, <span class="number">7</span>)); <span class="comment">// lo w</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substring</span>(<span class="number">3</span>, <span class="number">7</span>)); <span class="comment">// lo w</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substr</span>(<span class="number">3</span>, <span class="number">7</span>));<span class="comment">//lo worl</span></span><br></pre></td></tr></table></figure><p><strong>å‚æ•°ä¸ºè´Ÿæ•°</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;hello world&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">slice</span>(-<span class="number">3</span>)); <span class="comment">// rld</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substring</span>(-<span class="number">3</span>));<span class="comment">// hello world</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substr</span>(-<span class="number">3</span>));<span class="comment">// rld</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">slice</span>(<span class="number">3</span>, -<span class="number">4</span>)); <span class="comment">// lo w</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substring</span>(<span class="number">3</span>, -<span class="number">4</span>)); <span class="comment">// hel</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substr</span>(<span class="number">3</span>, -<span class="number">4</span>));<span class="comment">// &quot;&quot;(ç©ºå­—ç¬¦ä¸²)</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript applyã€callã€bind ä¸‰å…„å¼Ÿ</title>
      <link href="/30547169b42e/"/>
      <url>/30547169b42e/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸‰ä¸ªå‡½æ•°çš„å­˜åœ¨æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿç­”æ¡ˆæ˜¯<strong>æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡</strong>ï¼Œå†å…·ä½“ä¸€ç‚¹å°±æ˜¯æ”¹å˜å‡½æ•°è¿è¡Œæ—¶çš„ <code>this</code> æŒ‡å‘ã€‚</p><h2 id="åœ¨ç‰¹å®šçš„ä½œç”¨åŸŸä¸­è°ƒç”¨å‡½æ•°"><a href="#åœ¨ç‰¹å®šçš„ä½œç”¨åŸŸä¸­è°ƒç”¨å‡½æ•°" class="headerlink" title="åœ¨ç‰¹å®šçš„ä½œç”¨åŸŸä¸­è°ƒç”¨å‡½æ•°"></a>åœ¨ç‰¹å®šçš„ä½œç”¨åŸŸä¸­è°ƒç”¨å‡½æ•°</h2><p><code>apply()</code> å’Œ <code>call()</code> æ–¹æ³•çš„ç”¨é€”éƒ½æ˜¯åœ¨ç‰¹å®šçš„ä½œç”¨åŸŸä¸­è°ƒç”¨å‡½æ•°ã€‚</p><h3 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h3><blockquote><p><code>apply</code> æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ˜¯åœ¨å…¶ä¸­è¿è¡Œå‡½æ•°çš„ä½œç”¨åŸŸï¼Œå¦ä¸€ä¸ªæ˜¯å‚æ•°æ•°ç»„ã€‚å…¶ä¸­ï¼Œç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯ Array çš„å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ <code>arguments</code> å¯¹è±¡ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">callSum1</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> sum.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>) <span class="comment">// ä¼ å…¥ arguments å¯¹è±¡</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">callSum2</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> sum.<span class="title function_">apply</span>(<span class="variable language_">this</span>, [num1, num2]) <span class="comment">// ä¼ å…¥å‚æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">callSum1</span>(<span class="number">10</span>, <span class="number">10</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">callSum2</span>(<span class="number">10</span>, <span class="number">10</span>))</span><br></pre></td></tr></table></figure><h2 id="call"><a href="#call" class="headerlink" title="call"></a>call</h2><blockquote><p><code>call()</code> æ–¹æ³•ä¸ <code>apply()</code> æ–¹æ³•çš„ä½œç”¨ç›¸åŒï¼Œå®ƒä»¬åŒºåˆ«ä»…åœ¨äºæ¥å—å‚æ•°çš„æ–¹å¼ä¸åŒã€‚å¯¹äº <code>call()</code> æ–¹æ³•è€Œè¨€ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>this</code> å€¼æ²¡æœ‰å˜åŒ–ï¼Œå˜åŒ–çš„æ˜¯å…¶ä½™å‚æ•°éƒ½ç›´æ¥ä¼ é€’ç»™å‡½æ•°ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">callSum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> sum.<span class="title function_">call</span>(<span class="variable language_">this</span>, num1, num2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">callSum</span>(<span class="number">10</span>, <span class="number">10</span>))</span><br></pre></td></tr></table></figure><blockquote><p>ä¸ä¼ é€’å‚æ•°çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ <code>call()</code> æ–¹æ³•è¯­ä¹‰è·Ÿæ˜ç¡®</p></blockquote><h2 id="åˆ›å»ºä¸€ä¸ªæ”¹å˜äº†ä¸Šä¸‹æ–‡çš„å‡½æ•°"><a href="#åˆ›å»ºä¸€ä¸ªæ”¹å˜äº†ä¸Šä¸‹æ–‡çš„å‡½æ•°" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ”¹å˜äº†ä¸Šä¸‹æ–‡çš„å‡½æ•°"></a>åˆ›å»ºä¸€ä¸ªæ”¹å˜äº†ä¸Šä¸‹æ–‡çš„å‡½æ•°</h2><p><code>call()</code> å’Œ <code>apply()</code> æ–¹æ³•æ”¹å˜äº†å‡½æ•°çš„ <code>this</code> ä¸Šä¸‹æ–‡ä¹‹åä¾¿ç«‹å³æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè€Œ <code>bind()</code> æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°çš„å®ä¾‹å¹¶è¿”å›ï¼Œå…¶ <code>this</code> å€¼ä¼šè¢«ç»‘å®šåˆ°ä¼ é€’ç»™ <code>bind()</code> å‡½æ•°çš„å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> color = <span class="string">&#x27;red&#x27;</span></span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">  <span class="attr">sayColor</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">color</span>) <span class="comment">// è¿™ä¸ª this çš„å€¼æ˜¯ o</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(</span><br><span class="line">      <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">color</span>) <span class="comment">// é»˜è®¤çš„å€¼æ˜¯ this çš„å€¼æ˜¯ window</span></span><br><span class="line">      &#125;.<span class="title function_">bind</span>(<span class="variable language_">this</span>),</span><br><span class="line">      <span class="number">1000</span>,</span><br><span class="line">    )</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o.<span class="title function_">sayColor</span>()) <span class="comment">// blue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayColor</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">color</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> objectSayColor = sayColor.<span class="title function_">bind</span>(o)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">objectSayColor</span>()) <span class="comment">// blue</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> apply </tag>
            
            <tag> call </tag>
            
            <tag> bind </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>let å’Œ const çš„åŒºåˆ«</title>
      <link href="/d9064012188b/"/>
      <url>/d9064012188b/</url>
      
        <content type="html"><![CDATA[<p><code>let</code> ä¸ <code>const</code> éƒ½æ˜¯åªåœ¨å£°æ˜æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆã€‚</p><p><code>let</code> å£°æ˜çš„å˜é‡å¯ä»¥æ”¹å˜ï¼Œå€¼å’Œç±»å‹éƒ½å¯ä»¥æ”¹å˜ï¼Œæ²¡æœ‰é™åˆ¶ã€‚<br><code>const</code> å£°æ˜çš„å˜é‡ä¸å¾—æ”¹å˜å€¼ï¼Œè¿™æ„å‘³ç€ï¼Œ<code>const</code> ä¸€æ—¦å£°æ˜å˜é‡ï¼Œå°±å¿…é¡»ç«‹å³åˆå§‹åŒ–ï¼Œä¸èƒ½ç•™åˆ°ä»¥åèµ‹å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a <span class="comment">// Uncaught SyntaxError: Missing initializer in const declaration</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="number">2</span></span><br><span class="line">b = <span class="number">3</span> <span class="comment">// Uncaught TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure><p>å¯¹äºå¼•ç”¨ç±»å‹çš„å€¼ï¼Œå¦‚æ•°ç»„å’Œå¯¹è±¡ï¼Œå˜é‡ä¿å­˜çš„æ˜¯å€¼çš„å¼•ç”¨ã€‚<code>const</code> å‘½ä»¤åªæ˜¯ä¿è¯å¼•ç”¨ä¸å˜ï¼Œå¹¶ä¸ä¿è¯å€¼ä¸å˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> names = []</span><br><span class="line">names = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment">// Uncaught TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºnamesæŒ‡å‘çš„åœ°å€ä¸å˜ï¼Œæ”¹å˜çš„åªæ˜¯å†…éƒ¨æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> names = []</span><br><span class="line">names[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">names[<span class="number">1</span>] = <span class="number">2</span></span><br><span class="line">names[<span class="number">2</span>] = <span class="number">3</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript æµ…æ‹·è´ä¸æ·±æ‹·è´</title>
      <link href="/97c7a5c526fe/"/>
      <url>/97c7a5c526fe/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€ç±»å‹å€¼å’Œå¼•ç”¨ç±»å‹å€¼çš„åŒºåˆ«"><a href="#åŸºç¡€ç±»å‹å€¼å’Œå¼•ç”¨ç±»å‹å€¼çš„åŒºåˆ«" class="headerlink" title="åŸºç¡€ç±»å‹å€¼å’Œå¼•ç”¨ç±»å‹å€¼çš„åŒºåˆ«"></a>åŸºç¡€ç±»å‹å€¼å’Œå¼•ç”¨ç±»å‹å€¼çš„åŒºåˆ«</h2><h3 id="ä¿å­˜æ–¹å¼"><a href="#ä¿å­˜æ–¹å¼" class="headerlink" title="ä¿å­˜æ–¹å¼"></a>ä¿å­˜æ–¹å¼</h3><blockquote><p>åŸºç¡€ç±»å‹ï¼šå˜é‡ -&gt; å€¼<br>å¼•ç”¨ç±»å‹ï¼šå˜é‡ -&gt; å€¼çš„å †å†…å­˜åœ°å€ -&gt; å€¼</p></blockquote><p>å˜é‡ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­ï¼Œæ ˆå†…å­˜æ˜¯æœ‰åºæ’åˆ—çš„ï¼Œå¤§å°æ˜¯å›ºå®šçš„ã€‚åœ¨å°†ä¸€ä¸ªå€¼èµ‹å€¼ç»™å˜é‡æ—¶ï¼Œè§£æå™¨å¿…é¡»ç¡®å®šè¿™ä¸ªå€¼æ˜¯åŸºæœ¬ç±»å‹å€¼è¿˜æ˜¯å¼•ç”¨ç±»å‹å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´å˜é‡çš„å€¼åˆ°åº•å­˜çš„æ˜¯å®é™…å€¼è¿˜æ˜¯å®é™…å€¼çš„å¼•ç”¨æ˜¯æ ¹æ®å®é™…å€¼çš„ç±»å‹å†³å®šçš„ï¼šåŸºç¡€ç±»å‹çš„å€¼æ˜¯ä¿å­˜åœ¨å˜é‡ä¸­å®é™…å€¼ï¼Œè€Œå¼•ç”¨ç±»å‹çš„å€¼æ˜¯ä¿å­˜åœ¨å †å†…å­˜ä¸­çš„å †å†…å­˜æ˜¯æ— åºæ’åˆ—çš„ï¼Œå¤§å°æ˜¯ä¸å›ºå®šçš„ï¼‰ï¼Œå˜é‡ä¸­å­˜çš„å€¼æ˜¯å®é™…å€¼çš„å †å†…å­˜åœ°å€ã€‚</p><h3 id="å¤åˆ¶å˜é‡å€¼"><a href="#å¤åˆ¶å˜é‡å€¼" class="headerlink" title="å¤åˆ¶å˜é‡å€¼"></a>å¤åˆ¶å˜é‡å€¼</h3><blockquote><p>åŸºç¡€ç±»å‹ï¼šå˜é‡a -&gt; å€¼ï¼›å˜é‡b -&gt;å€¼çš„å‰¯æœ¬<br>å¼•ç”¨ç±»å‹ï¼šå˜é‡b -&gt; å˜é‡a -&gt; å€¼çš„å †å†…å­˜åœ°å€ -&gt; å€¼</p></blockquote><p>åœ¨ ECMAScript ä¸­ï¼Œé™¤äº†ä¿å­˜çš„æ–¹å¼ä¸åŒä¹‹å¤–ï¼Œåœ¨ä»ä¸€ä¸ªå˜é‡å‘å¦ä¸€ä¸ªå˜é‡å¤åˆ¶åŸºæœ¬ç±»å‹å€¼å’Œå¼•ç”¨ç±»å‹å€¼æ—¶ï¼Œä¹Ÿå­˜åœ¨ä¸åŒã€‚</p><p>å¦‚æœä»ä¸€ä¸ªå˜é‡å‘å¦ä¸€ä¸ªå˜é‡å¤åˆ¶åŸºæœ¬ç±»å‹çš„å€¼ï¼Œä¼šåœ¨å˜é‡å¯¹è±¡ä¸Šåˆ›å»ºä¸€ä¸ªæ–°å€¼ï¼Œç„¶åæŠŠè¯¥å€¼å¤åˆ¶åˆ°ä¸ºæ–°å˜é‡åˆ†é…çš„ä½ç½®ä¸Šã€‚æ–°å€¼åªæ˜¯ä¸€ä¸ªå‰¯æœ¬ã€‚</p><p>å½“ä»ä¸€ä¸ªå˜é‡å‘å¦ä¸€ä¸ªå˜é‡å¤åˆ¶å¼•ç”¨ç±»å‹çš„å€¼æ—¶ï¼ŒåŒæ ·ä¹Ÿä¼šå°†å­˜å‚¨åœ¨å˜é‡å¯¹è±¡ä¸Šçš„å€¼å¤åˆ¶ä¸€ä»½æ”¾åˆ°ä¸ºæ–°å˜é‡åˆ†é…çš„ç©ºé—´ä¸Šã€‚ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªå€¼çš„å‰¯æœ¬å®é™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å­˜å‚¨åœ¨å †ä¸­çš„ä¸€ä¸ªå¯¹è±¡ã€‚å¤åˆ¶æ“ä½œç»“æŸåï¼Œä¸¤ä¸ªå˜é‡å®é™…ä¸Šå°†å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚å› æ­¤æ”¹å˜å…¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œå°±ä¼šå½±å“å¦ä¸€ä¸ªå˜é‡ã€‚</p><h3 id="ä¼ é€’å‚æ•°"><a href="#ä¼ é€’å‚æ•°" class="headerlink" title="ä¼ é€’å‚æ•°"></a>ä¼ é€’å‚æ•°</h3><p>ECMAScript ä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ï¼ˆå˜é‡çš„å€¼ï¼Œä¸ä¸€å®šæ˜¯å®é™…å€¼ï¼‰ä¼ é€’çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠå‡½æ•°å¤–éƒ¨çš„å€¼å¤åˆ¶ç»™å‡½æ•°å†…éƒ¨å‚æ•°ï¼Œå°±å’ŒæŠŠå€¼ä»ä¸€ä¸ªå˜é‡å¤åˆ¶ç»™å¦ä¸€ä¸ªå˜é‡æ˜¯ä¸€æ ·çš„ã€‚</p><p>åœ¨å‘å‚æ•°ä¼ é€’åŸºæœ¬ç±»å‹çš„å€¼æ—¶ï¼Œè¢«ä¼ é€’çš„å€¼ä¼šè¢«å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼ˆå³å‘½åå‚æ•°ï¼Œæˆ–è€…ç”¨ ECMAScript çš„æ¦‚å¿µæ¥è¯´ï¼Œå°±æ˜¯ <code>arguments</code> å¯¹è±¡ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚</p><p>åœ¨å‘å‚æ•°ä¼ é€’å¼•ç”¨ç±»å‹çš„å€¼æ—¶ï¼Œä¼šæŠŠè¿™ä¸ªå€¼åœ¨å†…å­˜ä¸­çš„åœ°å€å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå› æ­¤è¿™ä¸ªå±€éƒ¨å˜é‡çš„å˜åŒ–ä¼šåæ˜ åœ¨å‡½æ•°çš„å¤–éƒ¨ã€‚è™½ç„¶å˜é‡æ˜¯æŒ‰å€¼ä¼ é€’çš„ï¼Œä½†æ˜¯è¿™ä¸ªå€¼å®ƒæ˜¯å®é™…å€¼çš„å¼•ç”¨ï¼Œæ‰€ä»¥å±€éƒ¨å˜é‡ä¹Ÿæ˜¯æŒ‰ç…§è¿™ä¸ªå¼•ç”¨è®¿é—®äº†åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><h2 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h2><p>æµ…å¤åˆ¶åªå¤åˆ¶ä¸€å±‚å¯¹è±¡çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´æ‹·è´åŸå¯¹è±¡çš„å®ä¾‹ï¼Œä½†æ˜¯å¯¹å…¶å†…éƒ¨çš„å¼•ç”¨ç±»å‹å€¼ï¼Œæ‹·è´çš„æ˜¯å…¶å¼•ç”¨</p><h3 id="è‡ªè¡Œå®ç°æµ…æ‹·è´"><a href="#è‡ªè¡Œå®ç°æµ…æ‹·è´" class="headerlink" title="è‡ªè¡Œå®ç°æµ…æ‹·è´"></a>è‡ªè¡Œå®ç°æµ…æ‹·è´</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">shallowCopy</span>(<span class="params">src</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> dst = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> prop <span class="keyword">in</span> src) &#123;</span><br><span class="line">    <span class="keyword">if</span> (src.<span class="title function_">hasOwnProperty</span>(prop)) &#123;</span><br><span class="line">      dst[prop] = src[prop]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dst</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>:<span class="number">1</span>, <span class="attr">arr</span>: [<span class="number">2</span>,<span class="number">3</span>] &#125;</span><br><span class="line"><span class="keyword">var</span> shallowObj = <span class="title function_">shallowCopy</span>(obj)</span><br><span class="line"><span class="comment">// shallowObj.a = 1</span></span><br><span class="line"><span class="comment">// console.log(obj) // &#123; a:1, arr: [2,3] &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// shallowObj.arr[0] = 1</span></span><br><span class="line"><span class="comment">// console.log(obj) // &#123; a:1, arr: [1,3] &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// shallowObj.arr = [1,3]</span></span><br><span class="line"><span class="comment">// console.log(obj) // &#123; a:1, arr: [2,3] &#125;</span></span><br></pre></td></tr></table></figure><h3 id="å·¥ç¨‹åŒ–"><a href="#å·¥ç¨‹åŒ–" class="headerlink" title="å·¥ç¨‹åŒ–"></a>å·¥ç¨‹åŒ–</h3><ul><li><a href="https://www.lodashjs.com/docs/latest#_clonevalue">_.clone</a>: åˆ›å»ºä¸€ä¸ª value çš„æµ…æ‹·è´ã€‚</li></ul><h2 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h2><p>æ·±æ‹·è´æ˜¯å¯¹å¯¹è±¡ä»¥åŠå¯¹è±¡çš„æ‰€æœ‰å­å¯¹è±¡è¿›è¡Œæ‹·è´ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ lodash çš„ <code>cloneDeep</code> æ–¹æ³•ï¼Œä½†æ˜¯æ·±æ‹·è´å¤§æ•°æ®çš„æ—¶å€™ï¼Œç”±äºå†…éƒ¨å®ç°æ˜¯é€’å½’ï¼Œæ‰€ä»¥æœ€å¥½æ¢å®ç°æ€è·¯ã€‚</p><h3 id="JSON-parse-JSON-stringify-æ·±æ‹·è´çš„å±€é™"><a href="#JSON-parse-JSON-stringify-æ·±æ‹·è´çš„å±€é™" class="headerlink" title="JSON.parse(JSON.stringify) æ·±æ‹·è´çš„å±€é™"></a><code>JSON.parse(JSON.stringify)</code> æ·±æ‹·è´çš„å±€é™</h3><ol><li>å¦‚æœè¢«æ‹·è´çš„å¯¹è±¡ä¸­æœ‰ <code>function</code>ï¼Œåˆ™æ‹·è´ä¹‹åçš„å¯¹è±¡å°±ä¼š<strong>ä¸¢å¤±</strong>è¿™ä¸ª <code>function</code></li><li>å¦‚æœè¢«æ‹·è´çš„å¯¹è±¡ä¸­æœ‰æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™æ‹·è´ä¹‹åçš„æ­£åˆ™è¡¨è¾¾å¼ä¼šå˜æˆ <code>Object</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;<span class="attr">name</span>: <span class="string">&#x27;youngjuning&#x27;</span>, <span class="attr">sayName</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;<span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)&#125;, <span class="attr">numberReg</span>: <span class="regexp">/\d+/</span>&#125;</span><br><span class="line"><span class="keyword">let</span> b = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(a))</span><br><span class="line"><span class="comment">// sayNameä¸¢å¤±ï¼ŒnumberRegå˜ä¸ºäº†å¯¹è±¡</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(b) <span class="comment">// &#123;name: &#x27;youngjuning&#x27;, numberReg: &#123;&#125;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="æ·±æ‹·è´ä¸æµ…æ‹·è´çš„åŒºåˆ«"><a href="#æ·±æ‹·è´ä¸æµ…æ‹·è´çš„åŒºåˆ«" class="headerlink" title="æ·±æ‹·è´ä¸æµ…æ‹·è´çš„åŒºåˆ«"></a>æ·±æ‹·è´ä¸æµ…æ‹·è´çš„åŒºåˆ«</h2><ul><li>æ·±æ‹·è´ï¼šå°† B å¯¹è±¡æ‹·è´åˆ° A å¯¹è±¡ä¸­ï¼ŒåŒ…æ‹¬ B é‡Œé¢çš„å­å¯¹è±¡ï¼Œ</li><li>æµ…æ‹·è´ï¼šå°† B å¯¹è±¡æ‹·è´åˆ° A å¯¹è±¡ä¸­ï¼Œä½†ä¸åŒ…æ‹¬ B é‡Œé¢çš„å­å¯¹è±¡</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹é˜…è¯»ç¬”è®°</title>
      <link href="/689ef57f4320/"/>
      <url>/689ef57f4320/</url>
      
        <content type="html"><![CDATA[<h2 id="1-JavaScript-ç”±å“ªäº›éƒ¨åˆ†ç»„æˆï¼Ÿ"><a href="#1-JavaScript-ç”±å“ªäº›éƒ¨åˆ†ç»„æˆï¼Ÿ" class="headerlink" title="1. JavaScript ç”±å“ªäº›éƒ¨åˆ†ç»„æˆï¼Ÿ"></a>1. JavaScript ç”±å“ªäº›éƒ¨åˆ†ç»„æˆï¼Ÿ</h2><ul><li>ECMAScriptï¼šç”± ECMA-262d å®šä¹‰å¹¶æä¾›æ ¸å¿ƒåŠŸèƒ½ã€‚</li><li>æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDOMï¼ŒDocument Object Modelï¼‰ï¼šæä¾›ä¸ç½‘é¡µäº¤äº’çš„æ–¹æ³•å’Œæ¥å£</li><li>æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼ˆBOMï¼ŒBrowser Object Modelï¼‰ï¼šæä¾›ä¸æµè§ˆå™¨äº¤äº’çš„æ–¹æ³•å’Œæ¥å£</li></ul><h2 id="2-ECMA-262-åˆ°åº•å®šä¹‰äº†ä»€ä¹ˆï¼Ÿ"><a href="#2-ECMA-262-åˆ°åº•å®šä¹‰äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. ECMA-262 åˆ°åº•å®šä¹‰äº†ä»€ä¹ˆï¼Ÿ"></a>2. ECMA-262 åˆ°åº•å®šä¹‰äº†ä»€ä¹ˆï¼Ÿ</h2><ul><li>è¯­æ³•</li><li>ç±»å‹</li><li>è¯­å¥</li><li>å…³é”®å­—</li><li>ä¿ç•™å­—</li><li>æ“ä½œç¬¦</li><li>å…¨å±€å¯¹è±¡</li></ul><p>ECMAScript åªæ˜¯å¯¹å®ç°è¿™ä¸ªè§„èŒƒæè¿°çš„æ‰€æœ‰æ–¹é¢çš„ä¸€ä¸ªæŠ½è±¡ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯­è¨€ã€‚JavaScript å®ç°äº† ECMAScripï¼Œè€Œ Adobe ActionScript åŒæ ·å®ç°äº† ECMAScriptã€‚</p><h2 id="3-JavaScript-æ ‡è¯†ç¬¦"><a href="#3-JavaScript-æ ‡è¯†ç¬¦" class="headerlink" title="3. JavaScript æ ‡è¯†ç¬¦"></a>3. JavaScript æ ‡è¯†ç¬¦</h2><p>æ‰€è°“æ ‡è¯†ç¬¦ï¼Œå°±æ˜¯å˜é‡ã€å‡½æ•°ã€å‡½æ•°å‚æ•°æˆ–å¯¹è±¡å±æ€§çš„åç§°ã€‚æ ‡è¯†ç¬¦å¯ä»¥ç”±ä¸€æˆ–å¤šä¸ªä¸‹åˆ—å­—ç¬¦ç»„æˆï¼š</p><ul><li>ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ã€ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰æˆ–ç¾å…ƒç¬¦åˆï¼ˆ$ï¼‰ï¼›</li><li>å‰©ä¸‹çš„å…¶ä»–å­—ç¬¦å¯ä»¥æ˜¯å­—æ¯ã€ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ã€ç¾å…ƒç¬¦å·æˆ–æ•°å­—ã€‚</li></ul><blockquote><p>æ³¨æ„ï¼šæ ‡è¯†ç¬¦ä¸­çš„å­—æ¯å¯ä»¥æ˜¯æ‰©å±• ASCIIï¼ˆExtended ASCIIï¼‰ ä¸­çš„å­—æ¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ Unicode çš„å­—æ¯å­—ç¬¦ã€‚</p></blockquote><blockquote><p>æ³¨æ„ï¼šå…³é”®å­—ã€ä¿ç•™å­—ã€trueã€falseã€null ä¸èƒ½ä½œä¸ºæ ‡è¯†ç¬¦ã€‚</p></blockquote><h2 id="4-var-å£°æ˜ä½œç”¨åŸŸ"><a href="#4-var-å£°æ˜ä½œç”¨åŸŸ" class="headerlink" title="4. var å£°æ˜ä½œç”¨åŸŸ"></a>4. var å£°æ˜ä½œç”¨åŸŸ</h2><p>ä½¿ç”¨ var æ“ä½œç¬¦å®šä¹‰çš„å˜é‡ä¼šæˆä¸ºåŒ…å«çš„å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œå‡½æ•°ç»“æŸåå˜é‡å°±ä¼šè¢«é”€æ¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> message = <span class="string">&#x27;Hello World&#x27;</span>; <span class="comment">// å±€éƒ¨å˜é‡</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message); <span class="comment">// ReferenceError: message is not defined</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå»æ‰ä¹‹å‰çš„ var æ“ä½œç¬¦ä¹‹åï¼Œmessage å°±å˜æˆäº†å…¨å±€å˜é‡ã€‚åªè¦è°ƒç”¨ä¸€æ¬¡å‡½æ•° <code>test()</code>ï¼Œå°±ä¼šå®šä¹‰è¿™ä¸ªå˜é‡ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å‡½æ•°å¤–éƒ¨è®¿é—®åˆ°ã€‚</p></blockquote><h2 id="5-var-å£°æ˜æå‡"><a href="#5-var-å£°æ˜æå‡" class="headerlink" title="5. var å£°æ˜æå‡"></a>5. var å£°æ˜æå‡</h2><p>ä½¿ç”¨ <code>var</code> å£°æ˜çš„å˜é‡ä¼šè¢«è‡ªåŠ¨æå‡åˆ°å‡½æ•°ä½œç”¨åŸŸé¡¶éƒ¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// undefined</span></span><br><span class="line">  <span class="keyword">var</span> age = <span class="number">18</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹æ‰€ä»¥ä¸ä¼šæŠ¥é”™ï¼Œæ˜¯å› ä¸º ECMAScript è¿è¡Œæ—¶æŠŠå®ƒçœ‹æˆç­‰ä»·å¦‚ä¸‹çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> age;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// undefined</span></span><br><span class="line">  age = <span class="number">18</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯æ‰€è°“çš„â€œæå‡â€ï¼ˆhoistï¼‰ï¼Œä¹Ÿå°±æ˜¯æŠŠæ‰€æœ‰å˜é‡å£°æ˜éƒ½æ‹‰åˆ°å‡½æ•°ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚</p><h2 id="6-var-é‡å¤å£°æ˜"><a href="#6-var-é‡å¤å£°æ˜" class="headerlink" title="6. var é‡å¤å£°æ˜"></a>6. var é‡å¤å£°æ˜</h2><p>åå¤å¤šæ¬¡ä½¿ç”¨ <code>var</code> å£°æ˜åŒä¸€ä¸ªå˜é‡ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> age = <span class="number">16</span>;</span><br><span class="line">  <span class="keyword">var</span> age = <span class="number">26</span>;</span><br><span class="line">  <span class="keyword">var</span> age = <span class="number">36</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// 36</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="JSçš„åŸå§‹ç±»å‹æœ‰å“ªå‡ ç§ï¼Ÿ"><a href="#JSçš„åŸå§‹ç±»å‹æœ‰å“ªå‡ ç§ï¼Ÿ" class="headerlink" title="JSçš„åŸå§‹ç±»å‹æœ‰å“ªå‡ ç§ï¼Ÿ"></a>JSçš„åŸå§‹ç±»å‹æœ‰å“ªå‡ ç§ï¼Ÿ</h2><p>åœ¨ JS ä¸­ï¼Œå­˜åœ¨è¿™6ç§åŸå§‹å€¼ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li><code>number</code></li><li><code>string</code></li><li><code>boolean</code></li><li><code>undefined</code></li><li><code>null</code></li><li><code>symbol</code></li></ul><h2 id="null-æ˜¯å¯¹è±¡å—ï¼Ÿ"><a href="#null-æ˜¯å¯¹è±¡å—ï¼Ÿ" class="headerlink" title="null æ˜¯å¯¹è±¡å—ï¼Ÿ"></a>null æ˜¯å¯¹è±¡å—ï¼Ÿ</h2><p>å¯¹äº <code>null</code> æ¥è¯´ï¼Œå¾ˆå¤šäººä¼šè®¤ä¸ºä»–æ˜¯ä¸ªå¯¹è±¡ç±»å‹ï¼Œå…¶å®è¿™æ˜¯é”™è¯¯çš„ã€‚è™½ç„¶ <code>typeof null</code> ä¼šè¾“å‡º <code>object</code>ï¼Œä½†æ˜¯è¿™åªæ˜¯ JS å­˜åœ¨çš„ä¸€ä¸ªæ‚ ä¹… Bugã€‚åœ¨ JS çš„æœ€åˆç‰ˆæœ¬ä¸­ä½¿ç”¨çš„æ˜¯ 32 ä½ç³»ç»Ÿï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ä½¿ç”¨ä½ä½å­˜å‚¨å˜é‡çš„ç±»å‹ä¿¡æ¯ï¼Œ<code>000</code> å¼€å¤´ä»£è¡¨å¯¹è±¡ï¼Œç„¶è€Œ <code>null</code> è¡¨ç¤ºä¸ºå…¨é›¶ï¼Œæ‰€ä»¥å°†å®ƒé”™è¯¯åœ°åˆ¤æ–­ä¸º <code>object</code>ã€‚è™½ç„¶ç°åœ¨çš„å†…éƒ¨ç±»å‹åˆ¤æ–­ä»£ç å·²ç»æ”¹å˜äº†ï¼Œä½†æ˜¯å¯¹äºè¿™ä¸ª Bug å´æ˜¯ä¸€ç›´æµä¼ ä¸‹æ¥ã€‚</p><h2 id="æ ˆå†…å­˜å’Œå †å†…å­˜çš„åŒºåˆ«"><a href="#æ ˆå†…å­˜å’Œå †å†…å­˜çš„åŒºåˆ«" class="headerlink" title="æ ˆå†…å­˜å’Œå †å†…å­˜çš„åŒºåˆ«"></a>æ ˆå†…å­˜å’Œå †å†…å­˜çš„åŒºåˆ«</h2><ul><li>æ ˆå†…å­˜ï¼šæ ˆæ˜¯ä¸€ç§å…ˆè¿›åå‡ºï¼ˆFILOï¼ŒFirst-In-Last-Outï¼‰çš„æ•°æ®ç»“æ„ã€‚æ ˆå†…å­˜ä¸­å­˜æ”¾å˜é‡</li><li>å †å†…å­˜ï¼šå †æ˜¯ä¸€ç§ç»è¿‡æ’åºçš„æ ‘å½¢æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªç»“ç‚¹éƒ½æœ‰ä¸€ä¸ªå€¼ã€‚å †çš„å­˜å–æ˜¯éšæ„çš„ã€‚å †å†…å­˜ä¸­å­˜æ”¾å¤æ‚å¯¹è±¡</li></ul><h2 id="åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼"><a href="#åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼" class="headerlink" title="åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼"></a>åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼</h2><p>ECMAScript å˜é‡å¯èƒ½åŒ…å«ä¸¤ç§ä¸åŒæ•°æ®ç±»å‹çš„å€¼ï¼šåŸºæœ¬ç±»å‹å€¼å’Œå¼•ç”¨ç±»å‹å€¼ã€‚<strong>åŸºæœ¬ç±»å‹å€¼</strong>æŒ‡çš„æ˜¯ç®€å•çš„æ•°æ®æ®µï¼Œè€Œ<strong>å¼•ç”¨ç±»å‹å€¼</strong>æŒ‡é‚£äº›å¯èƒ½ç”±å¤šä¸ªå€¼æ„æˆçš„å¯¹è±¡ã€‚</p><h3 id="ä¿å­˜æ–¹å¼"><a href="#ä¿å­˜æ–¹å¼" class="headerlink" title="ä¿å­˜æ–¹å¼"></a>ä¿å­˜æ–¹å¼</h3><p>åœ¨å°†ä¸€ä¸ªå€¼èµ‹ç»™å˜é‡æ—¶ï¼Œè§£æå™¨å¿…é¡»ç¡®å®šè¿™ä¸ªå€¼æ˜¯åŸºæœ¬ç±»å‹å€¼è¿˜æ˜¯å¼•ç”¨ç±»å‹å€¼ã€‚åŸºæœ¬ç±»å‹çš„å€¼æ˜¯ç›´æ¥ä¿å­˜åœ¨å˜é‡ä¸­çš„ï¼Œå› æ­¤å¯ä»¥ç›´æ¥æ“ä½œä¿å­˜åœ¨å˜é‡ä¸­çš„å®é™…å€¼ï¼Œæ‰€ä»¥åŸºæœ¬ç±»å‹çš„å€¼æ˜¯æŒ‰å€¼è®¿é—®çš„ã€‚å¼•ç”¨ç±»å‹çš„å€¼æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œåœ¨æ“ä½œå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ“ä½œå¯¹è±¡çš„å¼•ç”¨è€Œä¸æ˜¯å®é™…çš„å¯¹è±¡ï¼Œä½†åœ¨ä¸ºå¯¹è±¡æ·»åŠ å±æ€§æ—¶ï¼Œæ“ä½œçš„æ˜¯å®é™…çš„å¯¹è±¡ï¼Œä¸ºæ­¤ï¼Œå¼•ç”¨ç±»å‹çš„å€¼æ˜¯æŒ‰å¼•ç”¨è®¿é—®çš„ã€‚</p><h3 id="åŠ¨æ€çš„å±æ€§"><a href="#åŠ¨æ€çš„å±æ€§" class="headerlink" title="åŠ¨æ€çš„å±æ€§"></a>åŠ¨æ€çš„å±æ€§</h3><p>åŸºæœ¬ç±»å‹çš„å€¼æ˜¯ä¸å¯å˜çš„ï¼Œæ˜¯æ²¡æœ‰å‡½æ•°å¯ä»¥è°ƒç”¨çš„ã€‚å¯¹äºå¼•ç”¨ç±»å‹çš„å€¼ï¼Œå®ƒçš„å±æ€§åˆ™æ˜¯åŠ¨æ€çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶æ·»åŠ å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ”¹å˜å’Œåˆ é™¤å…¶å±æ€§å’Œæ–¹æ³•ã€‚</p><h3 id="å¤åˆ¶å˜é‡å€¼"><a href="#å¤åˆ¶å˜é‡å€¼" class="headerlink" title="å¤åˆ¶å˜é‡å€¼"></a>å¤åˆ¶å˜é‡å€¼</h3><p>é™¤äº†ä¿å­˜çš„æ–¹å¼ä¸åŒä¹‹å¤–ï¼Œåœ¨ä»ä¸€ä¸ªå˜é‡å‘å¦ä¸€ä¸ªå˜é‡å¤åˆ¶åŸºæœ¬ç±»å‹å€¼å’Œå¼•ç”¨ç±»å‹å€¼æ—¶ï¼Œä¹Ÿå­˜åœ¨ä¸åŒã€‚å¦‚æœä»ä¸€ä¸ªå˜é‡å‘å¦ä¸€ä¸ªå˜é‡å¤åˆ¶åŸºæœ¬ç±»å‹çš„å€¼ï¼Œä¼šåœ¨å˜é‡å¯¹è±¡ä¸Šåˆ›å»ºä¸€ä¸ªæ–°å€¼ï¼Œç„¶åæŠŠè¯¥å€¼å¤åˆ¶åˆ°ä¸ºæ–°å˜é‡åˆ†é…çš„ä½ç½®ä¸Šã€‚å½“ä»ä¸€ä¸ªå˜é‡å‘å¦ä¸€ä¸ªå˜é‡å¤åˆ¶å¼•ç”¨ç±»å‹çš„å€¼æ—¶ï¼ŒåŒæ ·ä¹Ÿä¼šå°†å­˜å‚¨åœ¨å˜é‡å¯¹è±¡ä¸­çš„å€¼å¤åˆ¶ä¸€ä»½æ”¾åˆ°ä¸ºæ–°å˜é‡åˆ†é…çš„ç©ºé—´ä¸­ã€‚ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªå€¼çš„å‰¯æœ¬å®é™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å­˜å‚¨åœ¨å †ä¸­çš„ä¸€ä¸ªå¯¹è±¡ã€‚å¤åˆ¶æ“ä½œç»“æŸåï¼Œä¸¤ä¸ªå˜é‡å®é™…ä¸Šå°†å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚å› æ­¤ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œå°±ä¼šå½±å“å¦ä¸€ä¸ªå˜é‡ã€‚</p><blockquote><p>å¯¹è±¡ç±»å‹å’ŒåŸå§‹ç±»å‹çš„ä¸åŒä¹‹å¤„ï¼Ÿ</p><p>åœ¨ JS ä¸­ï¼Œé™¤äº†åŸå§‹ç±»å‹é‚£ä¹ˆå…¶ä»–çš„éƒ½æ˜¯å¯¹è±¡ç±»å‹äº†ã€‚å¯¹è±¡ç±»å‹å’ŒåŸå§‹ç±»å‹ä¸åŒçš„æ˜¯ï¼ŒåŸå§‹ç±»å‹å­˜å‚¨çš„å€¼ï¼Œå¯¹è±¡ç±»å‹å­˜å‚¨çš„æ˜¯åœ°å€ï¼ˆæŒ‡é’ˆï¼‰ã€‚å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„æ—¶å€™ï¼Œè®¡ç®—æœºä¼šåœ¨å†…å­˜ä¸­å¸®æˆ‘ä»¬å¼€è¾Ÿä¸€ä¸ªç©ºé—´æ¥å­˜æ”¾å€¼ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¿™ä¸ªç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´ä¼šæ‹¥æœ‰ä¸€ä¸ªåœ°å€ï¼ˆæŒ‡é’ˆï¼‰ã€‚</p></blockquote><h2 id="å‡½æ•°å‚æ•°æ˜¯å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#å‡½æ•°å‚æ•°æ˜¯å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="å‡½æ•°å‚æ•°æ˜¯å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>å‡½æ•°å‚æ•°æ˜¯å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2><p>åœ¨å‘å‚æ•°ä¼ é€’åŸºæœ¬ç±»å‹çš„å€¼æ—¶ï¼Œè¢«ä¼ é€’çš„å€¼ä¼šè¢«å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼ˆå³å‘½åå‚æ•°ï¼Œæˆ–è€…ç”¨ ECMAScript çš„æ¦‚å¿µæ¥è¯´ï¼Œå°±æ˜¯ <code>arguments</code> å¯¹è±¡ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚åœ¨å‘å‚æ•°ä¼ é€’å¼•ç”¨ç±»å‹çš„å€¼æ—¶ï¼Œä¼šæŠŠè¿™ä¸ªå€¼åœ¨å†…å­˜ä¸­çš„åœ°å€å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå› æ­¤è¿™ä¸ªå±€éƒ¨å˜é‡çš„å˜åŒ–ä¼šåæ˜ åœ¨å‡½æ•°çš„å¤–éƒ¨ã€‚å½“åœ¨å‡½æ•°å†…éƒ¨é‡å†™å¼•ç”¨ç±»å‹çš„å€¼æ—¶ï¼Œè¿™ä¸ªå˜é‡å¼•ç”¨çš„å°±æ˜¯ä¸€ä¸ªå±€éƒ¨å¯¹è±¡äº†ã€‚è€Œè¿™ä¸ªå±€éƒ¨å¯¹è±¡ä¼šåœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åç«‹å³è¢«é”€æ¯ã€‚</p><h2 id="typeof-æ˜¯å¦èƒ½æ­£ç¡®åˆ¤æ–­ç±»å‹ï¼Ÿ"><a href="#typeof-æ˜¯å¦èƒ½æ­£ç¡®åˆ¤æ–­ç±»å‹ï¼Ÿ" class="headerlink" title="typeof æ˜¯å¦èƒ½æ­£ç¡®åˆ¤æ–­ç±»å‹ï¼Ÿ"></a>typeof æ˜¯å¦èƒ½æ­£ç¡®åˆ¤æ–­ç±»å‹ï¼Ÿ</h2><p><code>typeof</code> å¯¹äºåŸå§‹ç±»å‹æ¥è¯´ï¼Œé™¤äº† <code>null</code> éƒ½å¯ä»¥æ˜¾ç¤ºæ­£ç¡®çš„ç±»å‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">1</span> <span class="comment">// &#x27;number&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&#x27;1&#x27;</span> <span class="comment">// &#x27;string&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span> <span class="comment">// &#x27;boolean&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span> <span class="comment">// &#x27;undefined&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="title class_">Symbol</span>() <span class="comment">// &#x27;symbol&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span> <span class="comment">// &#x27;object&#x27;</span></span><br></pre></td></tr></table></figure><p><code>typeof</code> å¯¹äºå¯¹è±¡æ¥è¯´ï¼Œé™¤äº†å‡½æ•°éƒ½ä¼šæ˜¾ç¤º <code>object</code>ï¼Œæ‰€ä»¥è¯´ <code>typeof</code> å¹¶ä¸èƒ½å‡†ç¡®åˆ¤æ–­å˜é‡åˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> [] <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125; <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="variable language_">console</span>.<span class="property">log</span> <span class="comment">// &#x27;function&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="instanceof-èƒ½æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#instanceof-èƒ½æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="instanceof èƒ½æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>instanceof èƒ½æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å¦‚æœæˆ‘ä»¬æƒ³åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡çš„æ­£ç¡®ç±»å‹ï¼Œè¿™æ—¶å€™å¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>instanceof</code>ï¼Œå› ä¸ºå†…éƒ¨æœºåˆ¶æ˜¯é€šè¿‡åŸå‹é“¾æ¥åˆ¤æ–­çš„ã€‚</p><h2 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h2><table><thead><tr><th>å€¼</th><th>è½¬å­—ç¬¦ä¸²</th><th>è½¬æ•°å­—</th><th>è½¬å¸ƒå°”å€¼</th><th>è½¬å¯¹è±¡</th></tr></thead><tbody><tr><td><code>undefined</code></td><td><code>â€undefinedâ€œ</code></td><td><code>NaN</code></td><td><code>false</code></td><td>throws TypeError</td></tr><tr><td><code>null</code></td><td><code>&quot;null&quot;</code></td><td><code>0</code></td><td><code>false</code></td><td>throws TypeError</td></tr><tr><td><code>true</code></td><td><code>&quot;true&quot;</code></td><td><code>1</code></td><td></td><td>new Boolean(true)</td></tr><tr><td><code>false</code></td><td><code>&quot;false&quot;</code></td><td><code>0</code></td><td></td><td>new Boolean(false)</td></tr><tr><td><code>&quot;&quot;</code>ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰</td><td></td><td><code>0</code></td><td><code>false</code></td><td>new String(â€œâ€)</td></tr><tr><td><code>&quot;1.2&quot;</code>ï¼ˆéç©ºæ•°å­—å­—ç¬¦ä¸²ï¼‰</td><td></td><td><code>1.2</code></td><td><code>true</code></td><td>new String(â€œ1.2â€)</td></tr><tr><td><code>&quot;one&quot;</code>ï¼ˆéç©ºéæ•°å­—å­—ç¬¦ä¸²ï¼‰</td><td></td><td><code>NaN</code></td><td><code>true</code></td><td>new String(â€œoneâ€)</td></tr><tr><td><code>0</code></td><td><code>&quot;0&quot;</code></td><td></td><td><code>false</code></td><td>new Number(0)</td></tr><tr><td><code>-0</code></td><td><code>&quot;-0&quot;</code></td><td></td><td><code>false</code></td><td>new Number(-0)</td></tr><tr><td><code>NaN</code></td><td><code>&quot;NaN&quot;</code></td><td></td><td><code>false</code></td><td>new Number(NaN)</td></tr><tr><td><code>Infinity</code></td><td><code>&quot;Infinity&quot;</code></td><td></td><td><code>true</code></td><td>new Number(Infinity)</td></tr><tr><td><code>-Infinity</code></td><td><code>&quot;-Infinity&quot;</code></td><td></td><td><code>true</code></td><td>new Number(-Infinity)</td></tr><tr><td><code>1</code>ï¼ˆéé›¶æ— ç©·å¤§ï¼‰</td><td><code>&quot;1&quot;</code></td><td></td><td><code>true</code></td><td>new Number(1)</td></tr><tr><td><code>Symbol(&quot;name&quot;)</code></td><td>throws TypeError</td><td>throws TypeError</td><td><code>true</code></td><td></td></tr><tr><td><code>&#123;&#125;</code>ï¼ˆä»»æ„å¯¹è±¡ï¼‰</td><td><code>&quot;[object Object]&quot;</code></td><td><code>NaN</code></td><td><code>true</code></td><td></td></tr><tr><td><code>[]</code>ï¼ˆä»»æ„æ•°ç»„ï¼‰</td><td><code>&quot;&quot;</code></td><td><code>0</code></td><td><code>true</code></td><td></td></tr><tr><td><code>[9]</code>ï¼ˆ1ä¸ªæ•°å­—å…ƒç´ ï¼‰</td><td><code>&quot;9&quot;</code></td><td><code>9</code></td><td><code>true</code></td><td></td></tr><tr><td><code>[&#39;a&#39;]</code>ï¼ˆå…¶ä»–æ•°ç»„ï¼‰</td><td>ä½¿ç”¨<code>join</code> æ–¹æ³•</td><td><code>NaN</code></td><td><code>true</code></td><td></td></tr><tr><td><code>function() &#123;&#125;</code>ï¼ˆä»»æ„å‡½æ•°ï¼‰</td><td>å‚è€ƒ<strong>å¯¹è±¡è½¬åŸºæœ¬ç±»å‹</strong></td><td><code>NaN</code></td><td><code>true</code></td><td></td></tr></tbody></table><h3 id="è½¬æ¢ä¸ºBoolean"><a href="#è½¬æ¢ä¸ºBoolean" class="headerlink" title="è½¬æ¢ä¸ºBoolean"></a>è½¬æ¢ä¸ºBoolean</h3><p>é™¤äº† <code>0</code>ã€<code>-0</code>ã€<code>NaN</code>ã€<code>&#39;&#39;</code>ã€<code>false</code>ã€<code>undefined</code>ã€<code>null</code>ï¼Œå…¶ä»–æ‰€æœ‰å€¼éƒ½è½¬ä¸º <code>true</code>,åŒ…æ‹¬å¯¹è±¡</p><h3 id="å¯¹è±¡è½¬åŸºæœ¬ç±»å‹"><a href="#å¯¹è±¡è½¬åŸºæœ¬ç±»å‹" class="headerlink" title="å¯¹è±¡è½¬åŸºæœ¬ç±»å‹"></a>å¯¹è±¡è½¬åŸºæœ¬ç±»å‹</h3><p>å¯¹è±¡åœ¨è½¬æ¢ç±»å‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å†…ç½®çš„ <code>[[ToPrimitive]]</code> å¯¹è±¡ï¼Œå¯¹äºè¯¥å‡½æ•°æ¥è¯´ï¼Œç®—æ³•é€»è¾‘ä¸€èˆ¬æ¥è¯´å¦‚ä¸‹ï¼š</p><ul><li>å¦‚æœå·²ç»æ˜¯åŸºæœ¬ç±»å‹äº†ï¼Œé‚£å°±ä¸éœ€è¦è½¬æ¢äº†</li><li>å¦‚æœéœ€è¦è½¬å­—ç¬¦ä¸²ç±»å‹å°±è°ƒç”¨<code>x.toString()</code>ï¼Œè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹çš„è¯å°±è¿”å›è½¬æ¢çš„å€¼ã€‚ä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„è¯å°±å…ˆè°ƒç”¨ <code>x.valueOf()</code>ï¼Œå¦‚æœè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹ï¼Œå°±è¿”å›è½¬æ¢çš„å€¼</li><li>å¦‚æœéƒ½æ²¡æœ‰è¿”å›åŸå§‹ç±»å‹ï¼Œå°±ä¼šæŠ¥é”™</li></ul><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥é‡å†™ <code>Symbol.toPrimitive</code> ï¼Œè¯¥æ–¹æ³•åœ¨è½¬åŸå§‹ç±»å‹æ—¶è°ƒç”¨ä¼˜å…ˆçº§æœ€é«˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  <span class="title function_">valueOf</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;1&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  [<span class="title class_">Symbol</span>.<span class="property">toPrimitive</span>]() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1</span> + a <span class="comment">// =&gt; 3</span></span><br></pre></td></tr></table></figure><h2 id="åŠ æ³•è¿ç®—ç¬¦"><a href="#åŠ æ³•è¿ç®—ç¬¦" class="headerlink" title="åŠ æ³•è¿ç®—ç¬¦"></a>åŠ æ³•è¿ç®—ç¬¦</h2><p>åŠ æ³•è¿ç®—ç¬¦æ¯”è¾ƒç‰¹åˆ«ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>è¿ç®—ä¸­å…¶ä¸­ä¸€æ–¹ä¸ºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠå¦ä¸€æ–¹ä¹Ÿè½¬æ¢ä¸ºå­—ç¬¦ä¸²</li><li>å¦‚æœä¸€æ–¹ä¸æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ï¼Œé‚£ä¹ˆä¼šå°†å®ƒè½¬æ¢ä¸ºæ•°å­—æˆ–è€…å­—ç¬¦ä¸²</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span> + <span class="string">&#x27;&#x27;</span> <span class="comment">// -&gt; &quot;undefined&quot;</span></span><br><span class="line"><span class="literal">null</span> + <span class="string">&#x27;&#x27;</span> <span class="comment">// -&gt; &quot;null&quot;</span></span><br><span class="line"><span class="literal">true</span> + <span class="string">&#x27;&#x27;</span> <span class="comment">// -&gt; &quot;true&quot;</span></span><br><span class="line"><span class="literal">false</span> + <span class="string">&#x27;&#x27;</span> <span class="comment">// -&gt; &quot;false&quot;</span></span><br><span class="line"><span class="number">1</span> + <span class="string">&#x27;&#x27;</span> <span class="comment">// -&gt; &quot;1&quot;</span></span><br><span class="line"><span class="title class_">NaN</span> + <span class="string">&#x27;&#x27;</span></span><br><span class="line">(&#123;&#125;) +<span class="string">&#x27;&#x27;</span> <span class="comment">// -&gt; &quot;[object Object]&quot;</span></span><br><span class="line">&#123;&#125; + <span class="string">&#x27;&#x27;</span> <span class="comment">// -&gt; 0</span></span><br><span class="line">[] + <span class="string">&#x27;&#x27;</span> <span class="comment">// -&gt; &quot;&quot;</span></span><br><span class="line"><span class="literal">undefined</span> + <span class="number">1</span> <span class="comment">// -&gt; NaN</span></span><br><span class="line"><span class="literal">null</span> + <span class="number">1</span> <span class="comment">// -&gt; 1</span></span><br><span class="line"><span class="literal">true</span> + <span class="number">1</span> <span class="comment">// -&gt; 2</span></span><br><span class="line"><span class="literal">false</span> + <span class="number">1</span> <span class="comment">// -&gt; 1</span></span><br><span class="line">(&#123;&#125;) + <span class="number">2</span> <span class="comment">// -&gt; &quot;[object Object]2&quot;</span></span><br><span class="line">&#123;&#125; + <span class="number">2</span> <span class="comment">// -&gt; 2</span></span><br><span class="line">[] + <span class="number">1</span> <span class="comment">// -&gt; &quot;1&quot;</span></span><br><span class="line">+ <span class="string">&#x27;&#x27;</span> <span class="comment">// -&gt; 0</span></span><br><span class="line">+ <span class="string">&#x27;b&#x27;</span> <span class="comment">// -&gt; NaN</span></span><br><span class="line">+ &#123;&#125; <span class="comment">// -&gt; NaN</span></span><br><span class="line">+ [] <span class="comment">// -&gt; 0</span></span><br><span class="line"><span class="string">&#x27;a&#x27;</span> + + <span class="string">&#x27;b&#x27;</span> <span class="comment">// -&gt; &quot;aNaN&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="æ¯”è¾ƒè¿ç®—ç¬¦"></a>æ¯”è¾ƒè¿ç®—ç¬¦</h2><ol><li>å¦‚æœæ˜¯å¯¹è±¡ï¼Œå°±é€šè¿‡<code>[[toPrimitive]]</code> è½¬æ¢å¯¹è±¡</li><li>å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå°±é€šè¿‡ <code>unicode</code> å­—ç¬¦ä¸²ç´¢å¼•æ¥æ¯”è¾ƒ</li></ol><h2 id="thiså¯¹è±¡"><a href="#thiså¯¹è±¡" class="headerlink" title="thiså¯¹è±¡"></a>thiså¯¹è±¡</h2><p><code>this</code> å¯¹è±¡æ˜¯åœ¨è¿è¡Œæ—¶åŸºäºå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒç»‘å®šçš„ï¼š</p><ul><li>åœ¨å…¨å±€å‡½æ•°ä¸­ï¼Œ<code>this</code> ç­‰åŒäº <code>window</code></li><li>å½“å‡½æ•°è¢«ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œ<code>this</code> ç­‰äºé‚£ä¸ªå¯¹è±¡</li><li>åŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå…·æœ‰å…¨å±€æ€§ï¼Œå› æ­¤å…¶ <code>this</code>å¯¹è±¡é€šå¸¸æŒ‡å‘ <code>window</code></li><li><code>new</code>ï¼š<code>this</code> è¢«å›ºåŒ–åˆ°å®ä¾‹ä¸Šï¼Œä¸ä¼šè¢«ä»»ä½•æ–¹å¼æ”¹å˜</li><li><code>bind</code>ã€<code>apply</code>ã€<code>call</code>ï¼š<code>this</code> å¯¹è±¡æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°</li><li>ç®­å¤´å‡½æ•°å…¶å®æ˜¯æ²¡æœ‰ <code>this</code> çš„ï¼Œç®­å¤´å‡½æ•°ä¸­çš„ <code>this</code> åªå–å†³åŒ…è£¹ç®­å¤´å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ™®é€šå‡½æ•°çš„ <code>this</code></li></ul><h2 id="x3D-x3D-å’Œ-x3D-x3D-x3D-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#x3D-x3D-å’Œ-x3D-x3D-x3D-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="&#x3D;&#x3D; å’Œ &#x3D;&#x3D;&#x3D; æœ‰ä»€ä¹ˆåŒºåˆ«"></a>&#x3D;&#x3D; å’Œ &#x3D;&#x3D;&#x3D; æœ‰ä»€ä¹ˆåŒºåˆ«</h2><p>å¯¹äº <code>==</code> æ¥è¯´ï¼Œå¦‚æœå¯¹æ¯”åŒæ–¹çš„ç±»å‹ä¸ä¸€æ ·çš„è¯ï¼Œå°±ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬åŒ–ã€‚å‡å¦‚æˆ‘ä»¬éœ€è¦å¯¹æ¯” <code>x</code> å’Œ <code>y</code> æ˜¯å¦ç›¸åŒï¼Œå°±ä¼šè¿›è¡Œå¦‚ä¸‹åˆ¤æ–­æµç¨‹ï¼š</p><ol><li>é¦–å…ˆä¼šåˆ¤æ–­ä¸¤è€…ç±»å‹æ˜¯å¦ç›¸åŒã€‚ç›¸åŒçš„è¯å°±æ˜¯æ¯”å¤§å°äº†</li><li>ç±»å‹ä¸åŒçš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šè¿›è¡Œç±»å‹è½¬æ¢</li><li>ä¼šå…ˆåˆ¤æ–­æ˜¯å¦åœ¨å¯¹æ¯” <code>null</code> å’Œ <code>undefined</code>ï¼Œæ˜¯çš„è¯å°±ä¼šè¿”å› <code>true</code></li><li>åˆ¤æ–­ä¸¤è€…ç±»å‹æ˜¯å¦ä¸º <code>string</code> å’Œ <code>number</code>ï¼Œæ˜¯çš„è¯å°±ä¼šå°†å­—ç¬¦ä¸²è½¬ä¸º <code>number</code></li><li>åˆ¤æ–­å…¶ä¸­ä¸€æ–¹æ˜¯å¦ä¸º <code>boolean</code>ï¼Œæ˜¯çš„è¯å°±ä¼šæŠŠ <code>boolean</code> è½¬ä¸º <code>number</code> å†è¿›è¡Œåˆ¤æ–­</li><li>åˆ¤æ–­å…¶ä¸­ä¸€æ–¹æ˜¯å¦ä¸º <code>object</code> ä¸”å¦ä¸€æ–¹ä¸º <code>string</code>ã€<code>number</code> æˆ–è€… <code>symbol</code>ï¼Œæ˜¯çš„è¯å°±ä¼šæŠŠ <code>object</code> è½¬ä¸ºåŸå§‹ç±»å‹å†è¿›è¡Œåˆ¤æ–­</li></ol><blockquote><p><code>[] == ![]</code> &#x3D;&gt; <code>true</code></p></blockquote><p><img src="https://i.loli.net/2020/04/30/inuaIUJvYQP5BjD.png"></p><h2 id="é—­åŒ…ï¼ˆClosureï¼‰"><a href="#é—­åŒ…ï¼ˆClosureï¼‰" class="headerlink" title="é—­åŒ…ï¼ˆClosureï¼‰"></a>é—­åŒ…ï¼ˆClosureï¼‰</h2><h3 id="ä»€ä¹ˆæ˜¯é—­åŒ…"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ…"></a>ä»€ä¹ˆæ˜¯é—­åŒ…</h3><p><strong>å‡½æ•°A</strong>é‡Œé¢åŒ…å«äº†<strong>å‡½æ•°B</strong>ï¼Œè€Œ<strong>å‡½æ•°B</strong>é‡Œé¢ä½¿ç”¨äº†<strong>å‡½æ•°A</strong>çš„å˜é‡ï¼Œé‚£ä¹ˆ<strong>å‡½æ•°B</strong>è¢«ç§°ä¸ºé—­åŒ…å‡½æ•°ã€‚åœ¨JSä¸­ï¼Œé—­åŒ…çš„æ„ä¹‰æ˜¯èƒ½è®©ä½ ä»å†…éƒ¨å‡½æ•°è®¿é—®å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸã€‚</p><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œé—­åŒ…ï¼ˆClosureï¼‰ï¼Œåˆç§°è¯æ³•é—­åŒ…ï¼ˆLexical Closureï¼‰æˆ–å‡½æ•°é—­åŒ…ï¼ˆFunction Closureï¼‰ï¼Œæ˜¯åœ¨æ”¯æŒå¤´ç­‰å‡½æ•°çš„ç¼–ç¨‹è¯­è¨€ä¸­å®ç°è¯æ³•ç»‘å®šçš„ä¸€ç§æŠ€æœ¯ã€‚é—­åŒ…å®é™…ä¸Šæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå®ƒå­˜å‚¨äº†ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªå…³è”ç¯å¢ƒã€‚ç¯å¢ƒé‡Œæ˜¯è‹¥å¹²å¯¹ç¬¦å·å’Œå€¼çš„å¯¹åº”å…³ç³»ï¼Œå®ƒæ—¢è¦åŒ…æ‹¬çº¦æŸå˜é‡ï¼ˆè¯¥å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼‰ï¼Œä¹Ÿè¦åŒ…æ‹¬è‡ªç”±å˜é‡ï¼ˆåœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰ä½†åœ¨å‡½æ•°å†…è¢«å¼•ç”¨ï¼‰ã€‚é—­åŒ…è·Ÿå‡½æ•°æœ€å¤§çš„ä¸åŒåœ¨äºï¼Œå½“æ•æ‰é—­åŒ…çš„æ—¶å€™ï¼Œå®ƒçš„è‡ªç”±å˜é‡ä¼šåœ¨æ•æ‰æ—¶è¢«ç¡®å®šï¼Œè¿™æ ·å³ä¾¿è„±ç¦»äº†æ•æ‰æ—¶çš„ä¸Šä¸‹æ–‡ï¼Œå®ƒä¹Ÿèƒ½ç…§å¸¸è¿è¡Œã€‚</p><h3 id="é—­åŒ…çš„å‰¯ä½œç”¨"><a href="#é—­åŒ…çš„å‰¯ä½œç”¨" class="headerlink" title="é—­åŒ…çš„å‰¯ä½œç”¨"></a>é—­åŒ…çš„å‰¯ä½œç”¨</h3><ul><li>ç”±äºé—­åŒ…ä¼šæºå¸¦åŒ…å«å®ƒçš„å‡½æ•°çš„ä½œç”¨åŸŸï¼Œå› æ­¤ä¼šæ¯”å…¶ä»–å‡½æ•°å ç”¨æ›´å¤šçš„å†…å­˜ã€‚</li><li>é—­åŒ…åªèƒ½å–å¾—åŒ…å«å‡½æ•°ä¸­ä»»ä½•å˜é‡çš„æœ€åä¸€ä¸ªå€¼ã€‚é—­åŒ…ä¿å­˜çš„æ˜¯æ•´ä¸ªå˜é‡å¯¹è±¡ï¼Œè€Œä¸æ˜¯æŸä¸ªç‰¹æ®Šçš„å˜é‡ã€‚</li><li>åœ¨IE9ä¹‹å‰çš„æµè§ˆå™¨ä¸­ï¼Œå¦‚æœé—­åŒ…çš„ä½œç”¨åŸŸé“¾ä¸­ä¿å­˜ç€HTMLå…ƒç´ ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€è¯¥å…ƒç´ å°†æ— æ³•è¢«é”€æ¯ã€‚</li></ul><h3 id="å¾ªç¯ä¸­ä½¿ç”¨é—­åŒ…è§£å†³-var-å®šä¹‰å‡½æ•°çš„é—®é¢˜"><a href="#å¾ªç¯ä¸­ä½¿ç”¨é—­åŒ…è§£å†³-var-å®šä¹‰å‡½æ•°çš„é—®é¢˜" class="headerlink" title="å¾ªç¯ä¸­ä½¿ç”¨é—­åŒ…è§£å†³ var å®šä¹‰å‡½æ•°çš„é—®é¢˜"></a>å¾ªç¯ä¸­ä½¿ç”¨é—­åŒ…è§£å†³ <code>var</code> å®šä¹‰å‡½æ•°çš„é—®é¢˜</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;=<span class="number">5</span>: i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">  &#125;, i * <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆå› ä¸º <code>setTimeout</code> æ˜¯ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œæ‰€ä»¥ä¼šæŠŠå¾ªç¯å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œè¿™æ—¶å€™ <code>i</code> å°±æ˜¯ 6 äº†ï¼Œæ‰€ä»¥ä¼šè¾“å‡º 5 ä¸ª 6ã€‚</p><h4 id="ä½¿ç”¨é—­åŒ…è§£å†³"><a href="#ä½¿ç”¨é—­åŒ…è§£å†³" class="headerlink" title="ä½¿ç”¨é—­åŒ…è§£å†³"></a>ä½¿ç”¨é—­åŒ…è§£å†³</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">  ;(<span class="keyword">function</span>(<span class="params">j</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(j)</span><br><span class="line">    &#125;, j * <span class="number">1000</span>)</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨äº†ç«‹å³æ‰§è¡Œå‡½æ•°å°† <code>i</code> ä¼ å…¥å‡½æ•°å†…éƒ¨ï¼Œè¿™ä¸ªæ—¶å€™å€¼å°±è¢«å›ºå®šåœ¨äº†å‚æ•° <code>j</code> ä¸Šé¢ä¸ä¼šæ”¹å˜ï¼Œå½“ä¸‹æ¬¡æ‰§è¡Œ <code>timer</code> è¿™ä¸ªé—­åŒ…çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ <code>j</code>ï¼Œä»è€Œè¾¾åˆ°ç›®çš„ã€‚</p><h4 id="ä½¿ç”¨-setTimeout-çš„ç¬¬ä¸‰ä¸ªå‚æ•°"><a href="#ä½¿ç”¨-setTimeout-çš„ç¬¬ä¸‰ä¸ªå‚æ•°" class="headerlink" title="ä½¿ç”¨ setTimeout çš„ç¬¬ä¸‰ä¸ªå‚æ•°"></a>ä½¿ç”¨ setTimeout çš„ç¬¬ä¸‰ä¸ªå‚æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params">j</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(j)</span><br><span class="line">    &#125;,</span><br><span class="line">    i * <span class="number">1000</span>,</span><br><span class="line">    i</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰ä¸ªå‚æ•°ä¼šè¢«å½“æˆ <code>timer</code> å‡½æ•°çš„å‚æ•°ä¼ å…¥ã€‚</p><h4 id="ä½¿ç”¨letå®šä¹‰i"><a href="#ä½¿ç”¨letå®šä¹‰i" class="headerlink" title="ä½¿ç”¨letå®šä¹‰i"></a>ä½¿ç”¨letå®šä¹‰i</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">  &#125;, i * <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ·±æµ…æ‹·è´"><a href="#æ·±æµ…æ‹·è´" class="headerlink" title="æ·±æµ…æ‹·è´"></a>æ·±æµ…æ‹·è´</h2><p>å¯¹äºå¼•ç”¨ç±»å‹çš„å€¼ï¼Œå¤åˆ¶æ“ä½œç»“æŸåï¼Œä¸¤ä¸ªå˜é‡å®é™…ä¸Šå°†å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚å› æ­¤ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œå°±ä¼šå½±å“å¦ä¸€ä¸ªå˜é‡ã€‚é€šå¸¸åœ¨å¼€å‘ä¸­æˆ‘ä»¬ä¸å¸Œæœ›å‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ·±æµ…æ‹·è´æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h3 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h3><p>æµ…å¤åˆ¶åªå¤åˆ¶ä¸€å±‚å¯¹è±¡çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´æ‹·è´åŸå¯¹è±¡çš„å®ä¾‹ï¼Œä½†æ˜¯å¯¹å…¶å†…éƒ¨çš„å¼•ç”¨ç±»å‹å€¼ï¼Œæ‹·è´çš„æ˜¯å…¶å¼•ç”¨ã€‚å®ç°æµ…æ‹·è´ï¼š</p><ul><li><code>Object.assign(&#123;&#125;, ...)</code></li><li><code>...</code> æ‰©å±•æ“ä½œç¬¦</li><li>lodash <code>_.clone</code></li></ul><h3 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h3><p>æ·±æ‹·è´æ˜¯å¯¹å¯¹è±¡ä»¥åŠå¯¹è±¡çš„æ‰€æœ‰å­å¯¹è±¡è¿›è¡Œæ‹·è´ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ lodash çš„ <code>cloneDeep</code> æ–¹æ³•ï¼Œä½†æ˜¯æ·±æ‹·è´å¤§æ•°æ®çš„æ—¶å€™ï¼Œç”±äºå†…éƒ¨å®ç°æ˜¯é€’å½’ï¼Œæ‰€ä»¥æœ€å¥½æ¢å®ç°æ€è·¯ã€‚</p><p><strong><code>JSON.parse(JSON.stringify(object))</code> æ·±æ‹·è´çš„å±€é™ï¼š</strong></p><ol><li>ä¼šå¿½ç•¥ <code>undefined</code>ã€<code>symbol</code>ã€<code>function</code></li><li>å¦‚æœè¢«æ‹·è´çš„å¯¹è±¡ä¸­æœ‰æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™æ‹·è´ä¹‹åçš„æ­£åˆ™è¡¨è¾¾å¼ä¼šå˜æˆ <code>Object</code></li><li>ä¸èƒ½è§£å†³å¾ªç¯å¼•ç”¨çš„å¯¹è±¡</li></ol><h2 id="åŸå‹ã€åŸå‹é“¾"><a href="#åŸå‹ã€åŸå‹é“¾" class="headerlink" title="åŸå‹ã€åŸå‹é“¾"></a>åŸå‹ã€åŸå‹é“¾</h2><h3 id="åŸå‹"><a href="#åŸå‹" class="headerlink" title="åŸå‹"></a>åŸå‹</h3><p>æ¯ä¸ª JS å¯¹è±¡éƒ½æœ‰ <code>__proto__</code> å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘äº†åŸå‹ã€‚è¿™ä¸ªå±æ€§åœ¨ç°åœ¨æ¥è¯´å·²ç»ä¸æ¨èç›´æ¥å»ä½¿ç”¨å®ƒäº†ï¼Œè¿™åªæ˜¯æµè§ˆå™¨åœ¨æ—©æœŸä¸ºäº†è®©æˆ‘ä»¬è®¿é—®åˆ°å†…éƒ¨å±æ€§ <code>[[prototype]]</code> æ¥å®ç°çš„ä¸€ä¸ªä¸œè¥¿ã€‚åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡åŒ…å«äº†å¾ˆå¤šå‡½æ•°ã€‚åŸå‹å¯¹è±¡é€šè¿‡ <code>constructor</code> æŒ‡å‘äº†æ„é€ å‡½æ•°ï¼Œæ„é€ å‡½æ•°åˆé€šè¿‡ <code>prototype</code> æŒ‡å‘äº†åŸå‹ã€‚</p><h3 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h3><p>åŸå‹é“¾å°±æ˜¯å¤šä¸ªå¯¹è±¡é€šè¿‡ <code>__proto__</code> çš„æ–¹å¼è¿æ¥äº†èµ·æ¥ã€‚</p><h2 id="æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸé“¾"><a href="#æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸé“¾" class="headerlink" title="æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸé“¾"></a>æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸé“¾</h2><h3 id="æ‰§è¡Œç¯å¢ƒï¼ˆexecution-contextï¼‰-x2F-ä½œç”¨åŸŸ"><a href="#æ‰§è¡Œç¯å¢ƒï¼ˆexecution-contextï¼‰-x2F-ä½œç”¨åŸŸ" class="headerlink" title="æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼‰&#x2F;ä½œç”¨åŸŸ"></a>æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼‰&#x2F;ä½œç”¨åŸŸ</h3><p>æ‰§è¡Œç¯å¢ƒä¹Ÿç§°ä½œç”¨åŸŸï¼Œå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œå†³å®šäº†å®ƒä»¬å„è‡ªçš„è¡Œä¸ºã€‚æ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼ˆvariable objectï¼‰ï¼Œæ‰§è¡Œç¯å¢ƒä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚è™½ç„¶æˆ‘ä»¬ç¼–å†™çš„ä»£ç æ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼Œä½†è§£æå™¨åœ¨å¤„ç†æ•°æ®æ—¶ä¼šåœ¨åå°ä½¿ç”¨å®ƒã€‚</p><p>åœ¨ JS ä¸­ï¼Œæ‰§è¡Œç¯å¢ƒåˆ†ä¸ºå…¨å±€æ‰§è¡Œç¯å¢ƒå’Œå‡½æ•°æ‰§è¡Œç¯å¢ƒï¼š</p><ul><li>å…¨å±€æ‰§è¡Œç¯å¢ƒï¼šæœ€å¤–å›´çš„æ‰§è¡Œç¯å¢ƒï¼Œæ ¹æ® ECMAScript å®ç°æ‰€åœ¨çš„å®¿ä¸»ç¯å¢ƒä¸åŒï¼Œè¡¨ç¤ºæ‰§è¡Œç¯å¢ƒçš„å¯¹è±¡ä¹Ÿä¸ä¸€æ ·ã€‚æŸä¸ªæ‰§è¡Œç¯å¢ƒä¸­çš„æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œè¯¥ç¯å¢ƒè¢«é”€æ¯ï¼Œä¿å­˜åœ¨å…¶ä¸­çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°å®šä¹‰ä¹Ÿéšä¹‹é”€æ¯ã€‚å…¨å±€æ‰§è¡Œç¯å¢ƒç›´åˆ°åº”ç”¨ç¨‹åºé€€å‡ºï¼ˆä¾‹å¦‚å…³é—­ç½‘é¡µæˆ–æµè§ˆå™¨ï¼‰æ—¶æ‰ä¼šè¢«é”€æ¯</li><li>å‡½æ•°æ‰§è¡Œç¯å¢ƒï¼šæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒã€‚å½“æ‰§è¡Œæµè¿›å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ã€‚è€Œåœ¨å‡½æ•°æ‰§è¡Œä¹‹åï¼Œæ ˆå°†å…¶ç¯å¢ƒå¼¹å‡ºï¼ŒæŠŠæ§åˆ¶æƒè¿”å›ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚</li></ul><h3 id="ä½œç”¨åŸŸé“¾"><a href="#ä½œç”¨åŸŸé“¾" class="headerlink" title="ä½œç”¨åŸŸé“¾"></a>ä½œç”¨åŸŸé“¾</h3><p>å½“ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼ˆscope chainï¼‰ã€‚ä½œç”¨åŸŸé“¾çš„ç”¨é€”ï¼Œæ˜¯ä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ã€‚ä½œç”¨åŸŸé“¾çš„å‰ç«¯ï¼Œå§‹ç»ˆéƒ½æ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªç¯å¢ƒæ˜¯å‡½æ•°ï¼Œåˆ™å°†å…¶æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼‰ä½œä¸ºå˜é‡å¯¹è±¡ã€‚æ´»åŠ¨å¯¹è±¡åœ¨æœ€å¼€å§‹åªåŒ…å«ä¸€ä¸ªå˜é‡ï¼Œå³ arguments å¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡åœ¨å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼‰ã€‚ä½œç”¨åŸŸçš„ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªåŒ…å«ï¼ˆå¤–éƒ¨ï¼‰ç¯å¢ƒï¼Œè€Œå†ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡åˆ™æ¥è‡ªä¸‹ä¸€ä¸ªåŒ…å«ç¯å¢ƒã€‚è¿™æ ·ï¼Œä¸€ç›´å»¶ç»­åˆ°å…¨å±€æ‰§è¡Œç¯å¢ƒï¼›å…¨å±€æ‰§è¡Œç¯å¢ƒçš„å˜é‡å¯¹è±¡å§‹ç»ˆéƒ½æ˜¯ä½œç”¨åŸŸé“¾ä¸­çš„æœ€åä¸€ä¸ªå¯¹è±¡ã€‚</p><p>æ ‡è¯†ç¬¦è§£ææ˜¯æ²¿ç€ä½œç”¨åŸŸé“¾ä¸€çº§ä¸€çº§åœ°æœç´¢æ ‡è¯†ç¬¦çš„è¿‡ç¨‹ã€‚æœç´¢è¿‡ç¨‹ä»ä½œç”¨åŸŸçš„å‰ç«¯å¼€å§‹ï¼Œç„¶åé€çº§åœ°å‘åå›æº¯ï¼Œç›´åˆ°æ‰¾åˆ°æ ‡è¯†ç¬¦ä¸ºæ­¢ï¼ˆå¦‚æœæ‰¾ä¸åˆ°æ ‡è¯†ç¬¦ï¼Œé€šå¸¸ä¼šå¯¼è‡´é”™è¯¯å‘ç”Ÿï¼‰ã€‚</p><h2 id="varã€let-å’Œ-const-çš„åŒºåˆ«"><a href="#varã€let-å’Œ-const-çš„åŒºåˆ«" class="headerlink" title="varã€let å’Œ const çš„åŒºåˆ«"></a>varã€let å’Œ const çš„åŒºåˆ«</h2><h3 id="å£°æ˜æå‡ï¼ˆhoistingï¼‰"><a href="#å£°æ˜æå‡ï¼ˆhoistingï¼‰" class="headerlink" title="å£°æ˜æå‡ï¼ˆhoistingï¼‰"></a>å£°æ˜æå‡ï¼ˆhoistingï¼‰</h3><ul><li>å‡½æ•°å£°æ˜æå‡ï¼šè§£æå™¨ä¼šç‡å…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œå¹¶ä½¿å…¶åœ¨ä»»ä½•ä»£ç ä¹‹å‰å¯ç”¨ï¼ˆå¯ä»¥è®¿é—®ï¼‰</li><li>å˜é‡å£°æ˜æå‡ï¼šå’Œå‡½æ•°å£°æ˜ä¸€æ ·ï¼Œä½†æ˜¯èµ‹å€¼æ“ä½œæ˜¯åœ¨ä»£ç æ‰§è¡Œæ—¶æ‰è¿›è¡Œçš„ï¼Œæ‰€ä»¥å‡½æ•°è¡¨è¾¾å¼ä¸èƒ½è¢«æå‡</li><li>å‡½æ•°æå‡ä¼˜å…ˆäºå˜é‡æå‡ï¼Œå‡½æ•°æå‡ä¼šæŠŠæ•´ä¸ªå‡½æ•°æŒªåˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œå˜é‡æå‡åªä¼šæŠŠå£°æ˜æŒªåˆ°ä½œç”¨åŸŸé¡¶éƒ¨</li></ul><h3 id="æš‚æ—¶æ€§æ­»åŒºï¼ˆtemporal-dead-zoneï¼‰"><a href="#æš‚æ—¶æ€§æ­»åŒºï¼ˆtemporal-dead-zoneï¼‰" class="headerlink" title="æš‚æ—¶æ€§æ­»åŒºï¼ˆtemporal dead zoneï¼‰"></a>æš‚æ—¶æ€§æ­»åŒºï¼ˆtemporal dead zoneï¼‰</h3><p>åœ¨è§£æä»£ç æ—¶ï¼ŒJavaScript å¼•æ“ä¹Ÿä¼šæ³¨æ„å‡ºç°åœ¨å—åé¢çš„ <code>let</code> å£°æ˜ï¼Œåªä¸è¿‡åœ¨æ­¤ä¹‹å‰ä¸èƒ½ä»¥ä»»ä½•æ–¹å¼æ¥å¼•ç”¨æœªå£°æ˜çš„å˜é‡ã€‚åœ¨ let å£°æ˜ä¹‹å‰çš„æ‰§è¡Œç¬é—´è¢«ç§°ä¸ºâ€œæš‚æ—¶æ€§æ­»åŒºâ€ï¼ˆtemporal dead zoneï¼‰ï¼Œåœ¨æ­¤é˜¶æ®µå¼•ç”¨ä»»ä½•åé¢æ‰å£°æ˜çš„å˜é‡éƒ½ä¼šæŠ›å‡º ReferenceErrorã€‚</p><h3 id="letã€constä¸-var-çš„åŒºåˆ«"><a href="#letã€constä¸-var-çš„åŒºåˆ«" class="headerlink" title="letã€constä¸ var çš„åŒºåˆ«"></a>letã€constä¸ var çš„åŒºåˆ«</h3><ul><li>å—çº§ä½œç”¨åŸŸï¼š<code>let</code> å’Œ <code>const</code> æ”¯æŒå—çº§ä½œç”¨åŸŸ</li><li>æš‚æ—¶æ€§æ­»åŒºï¼š<code>let</code> å’Œ <code>const</code> å› ä¸ºå­˜åœ¨æš‚æ—¶æ€§æ­»åŒºæ‰€ä»¥ä¸å­˜åœ¨å˜é‡æå‡</li><li>å£°æ˜å†—ä½™ï¼šä½¿ç”¨ <code>let</code> å’Œ <code>const</code> ä¸èƒ½è¿›è¡Œé‡å¤å£°æ˜ï¼Œä¸”ä¸ <code>var</code> æ··ç”¨æ—¶ä¹Ÿä¸å…è®¸å£°æ˜å†—ä½™ã€‚</li><li>åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä½¿ç”¨ <code>let</code> å’Œ <code>const</code> å£°æ˜å˜é‡ï¼Œå˜é‡å¹¶ä¸ä¼šè¢«æŒ‚åœ¨åˆ° <code>window</code> ä¸Šã€‚</li></ul><h3 id="let-å’Œ-const-çš„åŒºåˆ«"><a href="#let-å’Œ-const-çš„åŒºåˆ«" class="headerlink" title="let å’Œ const çš„åŒºåˆ«"></a>let å’Œ const çš„åŒºåˆ«</h3><p>ä½¿ç”¨ const å£°æ˜å˜é‡æ—¶å¿…é¡»åŒæ—¶åˆå§‹åŒ–å˜é‡ï¼Œä¸”å°è¯•ä¿®æ”¹ const å£°æ˜çš„å˜é‡ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ä½†æ˜¯ const å£°æ˜çš„é™åˆ¶åªé€‚ç”¨äºå®ƒæŒ‡å‘çš„å˜é‡çš„å¼•ç”¨ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœ const å˜é‡å¼•ç”¨çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä¿®æ”¹è¿™ä¸ªå¯¹è±¡å†…éƒ¨çš„å±æ€§å¹¶ä¸è¿å const çš„é™åˆ¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;&#125;;</span><br><span class="line">person.<span class="property">name</span> = <span class="string">&#x27;Matt&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="äº‹ä»¶ä»£ç†"><a href="#äº‹ä»¶ä»£ç†" class="headerlink" title="äº‹ä»¶ä»£ç†"></a>äº‹ä»¶ä»£ç†</h2><p>äº‹ä»¶ä»£ç†ï¼ˆEvent Delegationï¼‰,åˆç§°ä¹‹ä¸ºäº‹ä»¶å§”æ‰˜ã€‚æ˜¯JavaScriptä¸­ç»‘å®šäº‹ä»¶çš„å¸¸ç”¨æŠ€å·§ã€‚é¡¾åæ€ä¹‰ï¼Œâ€œäº‹ä»¶ä»£ç†â€å³æ˜¯æŠŠåŸæœ¬éœ€è¦ç»‘å®šçš„äº‹ä»¶å§”æ‰˜ç»™çˆ¶å…ƒç´ ï¼Œè®©çˆ¶å…ƒç´ æ‹…å½“äº‹ä»¶ç›‘å¬çš„èŒåŠ¡ã€‚äº‹ä»¶ä»£ç†çš„åŸç†æ˜¯DOMå…ƒç´ çš„äº‹ä»¶å†’æ³¡ã€‚ä½¿ç”¨äº‹ä»¶ä»£ç†çš„å¥½å¤„æ˜¯å¯ä»¥æé«˜æ€§èƒ½ã€‚</p><h2 id="æ ‡è¯†ç¬¦"><a href="#æ ‡è¯†ç¬¦" class="headerlink" title="æ ‡è¯†ç¬¦"></a>æ ‡è¯†ç¬¦</h2><p>æ‰€è°“æ ‡è¯†ç¬¦ï¼Œå°±æ˜¯æŒ‡å˜é‡ã€å‡½æ•°ã€å±æ€§çš„åå­—ã€æˆ–è€…å‡½æ•°çš„å‚æ•°ã€‚</p><h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><p>ECMAScript å˜é‡æ—¶æ¾æ•£ç±»å‹çš„ï¼Œæ‰€è°“æ¾æ•£ç±»å‹å°±æ˜¯å¯ä»¥ç”¨æ¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚æ¢å¥è¯è¯´ï¼Œæ¯ä¸ªå˜é‡ä»…ä»…æ˜¯ä¸€ä¸ªç”¨äºä¿å­˜å€¼çš„å ä½ç¬¦è€Œå·²ã€‚</p><blockquote><p>å˜é‡åªæ˜¯æŒ‡å‘ä¿å­˜å€¼çš„æ ˆå†…å­˜åœ°å€çš„æŒ‡é’ˆè€Œå·²</p></blockquote><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>ECMAScript ä¸­æœ‰ 5 ä¸­ç®€å•çš„æ•°æ®ç±»å‹ï¼ˆä¹Ÿç§°ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼‰: <code>Undefined</code>ã€<code>Null</code>ã€<code>Boolean</code>ã€<code>Number</code> å’Œ <code>String</code>ã€‚è¿˜æœ‰ 1 ä¸­å¤æ‚æ•°æ®ç±»å‹ï¼ˆä¹Ÿç§°ä¸ºå¼•ç”¨æ•°æ®ç±»å‹ï¼‰â€”â€” <code>Object</code>ï¼Œ<code>Object</code> æœ¬è´¨ä¸Šæ˜¯ç”±ä¸€ç»„æ— åºåå€¼å¯¹ç»„æˆçš„ã€‚</p><h2 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h2><p>ECMAScript å¯¹è±¡å…¶å®å°±æ˜¯ä¸€ç»„æ•°æ®å’ŒåŠŸèƒ½çš„é›†åˆã€‚å¯¹è±¡å¯ä»¥é€šè¿‡æ‰§è¡Œ <code>new</code> æ“ä½œç¬¦è·Ÿè¦åˆ›å»ºçš„å¯¹è±¡ç±»å‹çš„åç§°æ¥åˆ›å»ºã€‚</p><h2 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h2><p>ECMA-262 æè¿°äº†ä¸€ç»„ç”¨äºæ“ä½œæ•°æ®å€¼çš„æ“ä½œç¬¦ï¼ŒåŒ…æ‹¬ç®—æœ¯æ“ä½œç¬¦ã€ä½æ“ä½œç¬¦ã€å…³ç³»æ“ä½œç¬¦å’Œç›¸ç­‰æ“ä½œç¬¦ã€‚ECMAScript æ“ä½œç¬¦çš„ä¸ä¼—ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä»¬èƒ½å¤Ÿé€‚ç”¨äºå¾ˆå¤šå€¼ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—å€¼ã€å¸ƒå°”å€¼ï¼Œç”šè‡³å¯¹è±¡ã€‚ä¸è¿‡åœ¨åº”ç”¨äºå¯¹è±¡æ—¶ï¼Œç›¸åº”åœ°æ“ä½œç¬¦é€šå¸¸éƒ½ä¼šè°ƒç”¨å¯¹è±¡çš„ <code>valueOf()</code> å’Œ(æˆ–)</p><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>å‡½æ•°å¯¹ä»»ä½•è¯­è¨€æ¥è¯´éƒ½æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚é€šè¿‡å‡½æ•°å¯ä»¥å°è£…ä»»æ„å¤šæ¡è¯­å¥ï¼Œè€Œä¸”å¯ä»¥å†ä»»ä½•åœ°æ–¹ã€ä»»ä½•æ—¶å€™è°ƒç”¨æ‰§è¡Œã€‚ECMAScript ä¸­çš„å‡½æ•°ä½¿ç”¨ <code>function</code> å…³é”®å­—æ¥å£°æ˜ï¼Œåè·Ÿä¸€ç»„å‚æ•°ä»¥åŠå‡½æ•°ä½“ã€‚</p><h2 id="ä¼ é€’å‚æ•°"><a href="#ä¼ é€’å‚æ•°" class="headerlink" title="ä¼ é€’å‚æ•°"></a>ä¼ é€’å‚æ•°</h2><p>ECMAScript ä¸­æ‰€æœ‰çš„å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠå‡½æ•°å¤–éƒ¨çš„å€¼å¤åˆ¶ç»™å‡½æ•°å†…éƒ¨çš„å‚æ•°ï¼Œå°±å’ŒæŠŠå€¼ä»ä¸€ä¸ªå˜é‡å¤åˆ¶ç»™å¦ä¸€ä¸ªå˜é‡ä¸€æ ·ã€‚<strong>åŸºæœ¬ç±»å‹å€¼</strong>çš„ä¼ é€’å¦‚åŒåŸºæœ¬ç±»å‹å˜é‡çš„å¤åˆ¶ä¸€æ ·ï¼Œè€Œ<strong>å¼•ç”¨ç±»å‹å€¼</strong>çš„ä¼ é€’åˆ™å¦‚åŒå¼•ç”¨ç±»å‹å˜é‡çš„å¤åˆ¶ä¸€æ ·ã€‚</p><p>åœ¨å‘å‚æ•°ä¼ é€’åŸºæœ¬ç±»å‹çš„å€¼æ—¶ï¼Œè¢«ä¼ é€’çš„å€¼ä¼šè¢«å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼ˆå³å‘½åå‚æ•°ï¼Œæˆ–è€…ç”¨ ECMAScript çš„æ¦‚å¿µæ¥è¯´ï¼Œå°±æ˜¯ arguments å¯¹è±¡ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚åœ¨å‘å‚æ•°ä¼ é€’å¼•ç”¨ç±»å‹çš„å€¼æ—¶ï¼Œä¼šæŠŠè¿™ä¸ªå€¼åœ¨å†…å­˜åœ°å€ä¸­çš„åœ°å€å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå› æ­¤è¿™ä¸ªå±€éƒ¨å˜é‡çš„å˜åŒ–ä¼šååº”åœ¨å‡½æ•°çš„å¤–éƒ¨ã€‚</p><h2 id="æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸ"><a href="#æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸ" class="headerlink" title="æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸ"></a>æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸ</h2><p>æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼Œä¸ºç®€å•èµ·è§ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸ºâ€ç¯å¢ƒâ€œï¼‰æ˜¯ JavaScript ä¸­æœ€ä¸ºé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡å’Œå‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œå†³å®šäº†å®ƒä»¬å„è‡ªçš„è¡Œä¸ºã€‚æ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„<strong>å˜é‡å¯¹è±¡</strong>ï¼ˆvariable objectï¼‰ã€‚ç¯å¢ƒä¸­å®šä¹‰çš„æ‰€æœ‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚è™½ç„¶æˆ‘ä»¬ç¼–å†™çš„ä»£ç æ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼Œä½†è§£æå™¨åœ¨å¤„ç†æ•°æ®æ—¶ä¼šåœ¨åå°ä½¿ç”¨å®ƒã€‚</p><p>å…¨å±€æ‰§è¡Œç¯å¢ƒæ˜¯æœ€å¤–å›´çš„ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒã€‚æ ¹æ® ECMAScript å®ç°æ‰€åœ¨çš„å®¿ä¸»ç¯å¢ƒä¸åŒï¼Œè¡¨ç¤ºæ‰§è¡Œç¯å¢ƒçš„å¯¹è±¡ä¹Ÿä¸ä¸€æ ·ã€‚åœ¨ Web æµè§ˆå™¨ä¸­,å…¨å±€æ‰§è¡Œç¯å¢ƒè¢«è®¤ä¸ºæ˜¯ <code>window</code> å¯¹è±¡ï¼Œå› æ­¤æ‰€æœ‰å…¨å±€å˜é‡å’Œå‡½æ•°éƒ½æ˜¯ä½œä¸º <code>window</code> å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•åˆ›å»ºçš„ã€‚æŸä¸ªæ‰§è¡Œç¯å¢ƒä¸­çš„æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œè¯¥ç¯å¢ƒè¢«é”€æ¯ï¼Œä¿å­˜åœ¨å…¶ä¸­çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°å®šä¹‰ä¹Ÿéšä¹‹é”€æ¯ï¼ˆå…¨å±€æ‰§è¡Œç¯å¢ƒç›´åˆ°åº”ç”¨ç¨‹åºé€€å‡ºâ€”â€”ä¾‹å¦‚å…³é—­ç½‘é¡µæˆ–æµè§ˆå™¨â€”â€”æ—¶æ‰ä¼šè¢«é”€æ¯ï¼‰ã€‚</p><p>æ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒã€‚å½“æ‰§è¡Œæµè¿›å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ã€‚è€Œåœ¨å‡½æ•°æ‰§è¡Œä¹‹åï¼Œæ ˆå°†å…¶ç¯å¢ƒå¼¹å‡ºï¼ŒæŠŠæ§åˆ¶æƒè¿”å›ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚ECMAScript ç¨‹åºä¸­çš„æ‰§è¡Œæµæ­£æ˜¯ç”±è¿™ä¸ªæ–¹ä¾¿çš„æœºåˆ¶æ§åˆ¶ç€ã€‚</p><p>å½“ä»£ç åœ¨ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾ã€‚ä½œç”¨åŸŸé“¾çš„ç”¨é€”ï¼Œæ˜¯ä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ã€‚ä½œç”¨åŸŸé“¾çš„å‰ç«¯ï¼Œå§‹ç»ˆéƒ½æ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªç¯å¢ƒæ˜¯å‡½æ•°ï¼Œåˆ™å°†å…¶æ´»åŠ¨å¯¹è±¡ä½œä¸ºå˜é‡å¯¹è±¡ã€‚æ´»åŠ¨å¯¹è±¡åœ¨æœ€å¼€å§‹æ—¶åªåŒ…å«ä¸€ä¸ªå˜é‡ï¼Œå³ <code>arguments</code> å¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡åœ¨å…¨å±€ç¯å¢ƒä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼‰ã€‚ä½œç”¨åŸŸé“¾ä¸­çš„ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªåŒ…å«ï¼ˆå¤–éƒ¨ï¼‰ç¯å¢ƒï¼Œè€Œä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡åˆ™æ¥è‡ªä¸‹ä¸€ä¸ªåŒ…å«ç¯å¢ƒã€‚è¿™æ ·ï¼Œä¸€ç›´å»¶ç»­åˆ°å…¨å±€æ‰§è¡Œç¯å¢ƒï¼›å…¨å±€æ‰§è¡Œç¯å¢ƒçš„å˜é‡å¯¹è±¡å§‹ç»ˆéƒ½æ˜¯ä½œç”¨åŸŸé“¾ä¸­çš„æœ€åä¸€ä¸ªå¯¹è±¡ã€‚</p><p>æ ‡è¯†ç¬¦è§£ææ˜¯æ²¿ç€ä½œç”¨åŸŸé“¾ä¸€çº§ä¸€çº§åœ°æœç´¢æ ‡è¯†ç¬¦çš„è¿‡ç¨‹ã€‚æœç´¢è¿‡ç¨‹å§‹ç»ˆä»ä½œç”¨åŸŸé“¾çš„å‰ç«¯å¼€å§‹ï¼Œç„¶åé€çº§åœ°å‘åå›æº¯ï¼Œç›´è‡³æ‰¾åˆ°æ ‡è¯†ç¬¦ä¸ºæ­¢ï¼ˆå¦‚æœæ‰¾ä¸åˆ°æ ‡è¯†ç¬¦ï¼Œé€šå¸¸ä¼šå¯¼è‡´é”™è¯¯å‘ç”Ÿï¼‰ã€‚</p><h2 id="æŸ¥è¯¢æ ‡è¯†ç¬¦"><a href="#æŸ¥è¯¢æ ‡è¯†ç¬¦" class="headerlink" title="æŸ¥è¯¢æ ‡è¯†ç¬¦"></a>æŸ¥è¯¢æ ‡è¯†ç¬¦</h2><p>å½“åœ¨æŸä¸ªç¯å¢ƒä¸­ä¸ºäº†è¯»å–æˆ–å†™å…¥è€Œå¼•å…¥ä¸€ä¸ªæ ‡è¯†ç¬¦æ—¶ï¼Œå¿…é¡»é€šè¿‡æœç´¢æ¥ç¡®å®šè¯¥æ ‡è¯†ç¬¦å®é™…ä»£è¡¨ä»€ä¹ˆã€‚æœç´¢è¿‡ç¨‹ä»ä½œç”¨åŸŸçš„å‰ç«¯å¼€å§‹ï¼Œå‘ä¸Šé€çº§æŸ¥è¯¢ä¸ç»™å®šåå­—åŒ¹é…çš„æ ‡è¯†ç¬¦ã€‚å¦‚æœåœ¨å±€éƒ¨ç¯å¢ƒä¸­æ‰¾åˆ°äº†è¯¥æ ‡è¯†ç¬¦ï¼Œæœç´¢è¿‡ç¨‹åœæ­¢ï¼Œå˜é‡å°±ç»ªã€‚å¦‚æœåœ¨å±€éƒ¨ç¯å¢ƒä¸­æ²¡æœ‰æ‰¾åˆ°è¯¥å˜é‡åï¼Œåˆ™ç»§ç»­æ²¿ä½œç”¨åŸŸé“¾å‘ä¸Šæœç´¢ã€‚æœç´¢è¿‡ç¨‹å°†ä¸€ç›´è¿½æº¯åˆ°å…¨å±€ç¯å¢ƒçš„å˜é‡å¯¹è±¡ã€‚å¦‚æœåœ¨å…¨å±€ç¯å¢ƒä¸­ä¹Ÿæ²¡æ‰¾åˆ°è¿™ä¸ªæ ‡è¯†ç¬¦ï¼Œåˆ™æ„å‘³ç€è¯¥å˜é‡å°šæœªå£°æ˜ã€‚</p><h2 id="åƒåœ¾æ”¶é›†"><a href="#åƒåœ¾æ”¶é›†" class="headerlink" title="åƒåœ¾æ”¶é›†"></a>åƒåœ¾æ”¶é›†</h2><p>JavaScript å…·æœ‰è‡ªåŠ¨åƒåœ¾æ”¶é›†æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰§è¡Œç¯å¢ƒä¼šè´Ÿè´£ç®¡ç†ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨çš„å†…å­˜ã€‚è€Œåœ¨ C å’Œ C++ ä¹‹ç±»çš„è¯­è¨€ä¸­ï¼Œå¼€å‘äººå‘˜çš„ä¸€é¡¹åŸºæœ¬ä»»åŠ¡å°±æ˜¯æ‰‹å·¥è·Ÿè¸ªå†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œè¿™æ˜¯é€ æˆè®¸å¤šé—®é¢˜çš„ä¸€ä¸ªæ ¹æºã€‚åœ¨ç¼–å†™ JavaScript ç¨‹åºæ—¶ã€‚å¼€å‘äººå‘˜ä¸å†å…³å¿ƒå†…å­˜ä½¿ç”¨é—®é¢˜ï¼Œæ‰€éœ€å†…å­˜çš„åˆ†é…ä»¥åŠæ— ç”¨å†…å­˜çš„å›æ”¶å®Œå…¨å®ç°äº†è‡ªåŠ¨ç®¡ç†ã€‚è¿™ç§åƒåœ¾æ”¶é›†æœºåˆ¶çš„åŸç†å…¶å®å¾ˆç®€å•ï¼šæ‰¾å‡ºé‚£äº›ä¸å†ä½¿ç”¨çš„å˜é‡ï¼Œç„¶åé‡Šæ”¾å…¶å ç”¨çš„å†…å­˜ã€‚ä¸ºæ­¤ï¼Œåƒåœ¾æ”¶é›†å™¨ä¼šæŒ‰ç…§å›ºå®šçš„æ—¶é—´é—´éš”ï¼ˆæˆ–ä»£ç æ‰§è¡Œä¸­é¢„å®šçš„æ”¶é›†æ—¶é—´ï¼‰ï¼Œå‘¨æœŸæ€§åœ°æ‰§è¡Œè¿™ä¸€æ“ä½œã€‚</p><h2 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h2><p>å¼•ç”¨ç±»å‹çš„å€¼ï¼ˆå¯¹è±¡ï¼‰æ˜¯å¼•ç”¨ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ã€‚åœ¨ ECMAScript ä¸­ï¼Œå¼•ç”¨ç±»å‹æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå°†æ•°æ®å’ŒåŠŸèƒ½ç»„ç»‡åœ¨ä¸€èµ·ã€‚å¼•ç”¨ç±»å‹æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºå¯¹è±¡å®šä¹‰ï¼Œå› ä¸ºå®ƒä»¬æè¿°çš„æ˜¯ä¸€ç±»å¯¹è±¡æ‰€å…·æœ‰çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><blockquote><p>è™½ç„¶å¼•ç”¨ç±»å‹ä¸ç±»çœ‹èµ·æ¥ç›¸ä¼¼ï¼Œä½†å®ƒä»¬å¹¶ä¸æ˜¯ç›¸åŒçš„æ¦‚å¿µã€‚</p></blockquote><p>å¯¹è±¡æ˜¯æŸä¸ªç‰¹å®šå¼•ç”¨ç±»å‹çš„å®ä¾‹ã€‚æ–°å¯¹è±¡æ˜¯ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦åè·Ÿä¸€ä¸ªæ„é€ å‡½æ•°æ¥åˆ›å»ºã€‚æ„é€ å‡½æ•°æœ¬èº«å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåªä¸è¿‡è¿™ä¸ªå‡½æ•°æ˜¯å¤„äºåˆ›å»ºæ–°å¯¹è±¡çš„ç›®çš„è€Œå®šä¹‰çš„ã€‚è¯·çœ‹ä¸‹é¢è¿™è¡Œä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br></pre></td></tr></table></figure><p>è¿™è¡Œä»£ç åˆ›å»ºäº† <code>Object</code> å¼•ç”¨ç±»å‹çš„ä¸€ä¸ªæ–°å®ä¾‹ï¼Œç„¶åæŠŠè¯¥å®ä¾‹ä¿å­˜åœ¨äº†å˜é‡ <code>person</code> ä¸­ã€‚ä½¿ç”¨çš„æ„é€ å‡½æ•°æ˜¯ <code>Object</code>ï¼Œå®ƒåªä¸ºæ–°å¯¹è±¡å®šä¹‰äº†é»˜è®¤çš„å±æ€§å’Œæ–¹æ³•ã€‚ ECMAScript æä¾›äº†å¾ˆå¤šåŸç”Ÿå¼•ç”¨ç±»å‹ï¼ˆä¾‹å¦‚ <code>Object</code>ï¼‰ï¼Œä»¥ä¾¿å¼€å‘äººå‘˜ç”¨ä»¥å®ç°å¸¸è§çš„è®¡ç®—ä»»åŠ¡ã€‚</p><h3 id="Object-ç±»å‹"><a href="#Object-ç±»å‹" class="headerlink" title="Object ç±»å‹"></a>Object ç±»å‹</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„å¤§å¤šæ•°å¼•ç”¨ç±»å‹å€¼éƒ½æ˜¯ <code>Object</code> ç±»å‹çš„å®ä¾‹ï¼›è€Œä¸”ï¼Œ<code>Object</code> ä¹Ÿæ˜¯ ECMAScript ä¸­ä½¿ç”¨æœ€å¤šçš„ä¸€ä¸ªç±»å‹ã€‚è™½ç„¶ <code>Object</code> çš„å®ä¾‹ä¸å…·å¤‡å¤šå°‘åŠŸèƒ½ï¼Œä½†å¯¹äºåœ¨åº”ç”¨ç¨‹åºä¸­å­˜å‚¨å’Œä¼ è¾“æ•°æ®è€Œè¨€ï¼Œå®ƒä»¬ç¡®å®æ˜¯éå¸¸ç†æƒ³çš„é€‰æ‹©ã€‚</p><h3 id="Array-ç±»å‹"><a href="#Array-ç±»å‹" class="headerlink" title="Array ç±»å‹"></a>Array ç±»å‹</h3><p>é™¤äº† <code>Object</code> ä¹‹å¤–ï¼Œ<code>Array</code> ç±»å‹ææ€•æ˜¯ ECMAScript ä¸­æœ€å¸¸ç”¨çš„ç±»å‹äº†ã€‚è€Œä¸”ï¼ŒECMAScript ä¸­çš„æ•°ç»„ä¸å…¶ä»–å¤šæ•°è¯­è¨€ä¸­çš„æ•°ç»„æœ‰ç€ç›¸å½“å¤§çš„åŒºåˆ«ã€‚è™½ç„¶ ECMAScript æ•°ç»„ä¸å…¶ä»–è¯­è¨€ä¸­çš„æ•°ç»„éƒ½æ˜¯æ•°æ®çš„æœ‰åºé›†åˆï¼Œä½†ä¸å…¶ä»–è¯­è¨€ä¸åŒçš„æ˜¯ï¼ŒECMAScript æ•°ç»„çš„æ¯ä¸€é¡¹å¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥ç”¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®æ¥ä¿å­˜å­—ç¬¦ä¸²ï¼Œç”¨ç¬¬äºŒä¸ªä½ç½®ä¿å­˜æ•°å€¼ï¼Œç”¨ç¬¬ä¸‰ä¸ªä½ç½®ä¿å­˜å¯¹è±¡ï¼Œä»¥æ­¤ç±»æ¨ã€‚è€Œä¸” ECMAScript æ•°ç»„çš„å¤§å°æ˜¯å¯ä»¥åŠ¨æ€è°ƒæ•´çš„ï¼Œå³å¯ä»¥éšç€æ•°æ®çš„æ·»åŠ è‡ªåŠ¨å¢é•¿ä»¥å®¹çº³æ–°å¢æ•°æ®ã€‚</p><h3 id="Date-ç±»å‹"><a href="#Date-ç±»å‹" class="headerlink" title="Date ç±»å‹"></a>Date ç±»å‹</h3><blockquote><p>æ¨èä½¿ç”¨ <a href="https://github.com/iamkun/dayjs">dayjs</a> å¤„ç†æ—¶é—´ç›¸å…³çš„æ“ä½œã€‚</p></blockquote><p>ECMAScript ä¸­çš„ <code>Date</code> ç±»å‹æ˜¯åœ¨æ—©æœŸ Java ä¸­çš„ <code>java.util.Date</code> ç±»å‹åŸºç¡€ä¸Šæ„å»ºçš„ã€‚ä¸ºæ­¤ï¼Œ<code>Date</code> ç±»å‹ä½¿ç”¨è‡ª UTC 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œï¼ˆé›¶æ—¶ï¼‰å¼€å§‹ç»è¿‡çš„æ¯«ç§’æ•°æ¥ä¿å­˜æ—¥æœŸã€‚åœ¨ä½¿ç”¨è¿™ç§æ•°æ®å­˜å‚¨æ ¼å¼çš„æ¡ä»¶ä¸‹ï¼Œ<code>Date</code> ç±»å‹ä¿å­˜çš„æ—¥æœŸèƒ½å¤Ÿç²¾ç¡®åˆ° 1970 å¹´ 1 æœˆ 1 æ—¥ä¹‹å‰æˆ–ä¹‹åçš„ 2851616 å¹´ã€‚</p><p>æ—¥æœŸå­—ç¬¦ä¸²åœ¨ä¸åŒæµè§ˆå™¨æœ‰ä¸åŒçš„å®ç°ï¼Œä¾‹å¦‚ <code>new Date(&#39;1970-1-1&#39;)</code> åœ¨ IEã€Safariã€Android ä¸Šæ˜¯ Invalid Dateï¼Œè€Œåœ¨ Chrome ä¸Šæ˜¯èƒ½æ­£å¸¸è§£æçš„ã€‚è¯·åŠ¡å¿…ä½¿ç”¨ <code>new Date(&#39;1970/1/1&#39;)</code> æˆ– <code>new Date(1970, 1, 1)</code> ä»£æ›¿ <code>new Date(&#39;1970-1-1&#39;)</code></p><h3 id="RegExp-ç±»å‹"><a href="#RegExp-ç±»å‹" class="headerlink" title="RegExp ç±»å‹"></a>RegExp ç±»å‹</h3><blockquote><p>æ¨èåœ¨çº¿è¯¾ç¨‹ <a href="https://www.imooc.com/learn/706">JavaScript æ­£åˆ™è¡¨è¾¾å¼</a></p></blockquote><p>ECMAScript é€šè¿‡ RegExp ç±»å‹æ¥æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚ä½¿ç”¨ä¸‹é¢ç±»ä¼¼ Perl çš„è¯­æ³•ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> expression = <span class="regexp">/ pattern /</span> flags</span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„æ¨¡å¼ï¼ˆpatternï¼‰éƒ¨åˆ†å¯ä»¥æ˜¯ä»»ä½•ç®€å•æˆ–å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥åŒ…å«å­—ç¬¦ç±»ã€é™å®šç¬¦ã€åˆ†ç»„ã€å‘å‰æŸ¥æ‰¾ä»¥åŠåå‘å¼•ç”¨ã€‚æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼éƒ½å¯å¸¦æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡å¿—ï¼ˆflagsï¼‰ï¼Œç”¨ä»¥æ ‡æ˜æ­£åˆ™è¡¨è¾¾å¼çš„è¡Œä¸ºã€‚æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ¨¡å¼æ”¯æŒä¸‹åˆ— 3 ä¸ªæ ‡å¿—ï¼š</p><ul><li><code>g</code>: è¡¨ç¤ºå…¨å±€ï¼ˆglobalï¼‰æ¨¡å¼ï¼Œå³æ¨¡å¼å°†è¢«åº”ç”¨äºæ‰€æœ‰å­—ç¬¦ä¸²ï¼Œè€Œéåœ¨å‘ç°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹æ—¶ç«‹å³åœæ­¢ï¼›</li><li><code>i</code>: è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼ˆcase-insensitiveï¼‰æ¨¡å¼ï¼Œå³åœ¨ç¡®å®šåŒ¹é…é¡¹æ—¶å¿½ç•¥æ¨¡å¼ä¸å­—ç¬¦ä¸²çš„å¤§å°å†™ï¼›</li><li><code>m</code>: è¡¨ç¤ºå¤šè¡Œï¼ˆmultilineï¼‰æ¨¡å¼ï¼Œå³åœ¨åˆ°è¾¾ä¸€è¡Œæ–‡æœ¬æœ«å°¾æ—¶è¿˜ä¼šç»§ç»­æœæŸ¥æ‰¾ä¸‹ä¸€è¡Œä¸­æ˜¯å¦å­˜åœ¨ä¸æ¨¡å¼åŒ¹é…çš„é¡¹ã€‚</li></ul><h3 id="Function-ç±»å‹"><a href="#Function-ç±»å‹" class="headerlink" title="Function ç±»å‹"></a>Function ç±»å‹</h3><p>è¯´èµ·æ¥ ECMAScript ä¸­ä»€ä¹ˆæœ€æœ‰æ„æ€ï¼Œæˆ‘æƒ³è«è¿‡äºå‡½æ•°äº†â€”â€”è€Œæœ‰æ„æ€çš„æ ¹æºï¼Œåˆ™åœ¨äºå‡½æ•°å®é™…ä¸Šæ˜¯å¯¹è±¡ã€‚æ¯ä¸ªå‡½æ•°éƒ½æ˜¯ <code>Function</code> ç±»å‹çš„å®ä¾‹ï¼Œè€Œä¸”éƒ½ä¸å…¶ä»–å¼•ç”¨ç±»å‹ä¸€æ ·å…·æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ç”±äºå‡½æ•°æ˜¯å¯¹è±¡ï¼Œå› æ­¤å‡½æ•°åå®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡å‘å‡½æ•°å¯¹è±¡çš„æŒ‡é’ˆï¼Œä¸ä¼šä¸æŸä¸ªå‡½æ•°ç»‘å®šã€‚å‡½æ•°é€šå¸¸æ˜¯ä½¿ç”¨å‡½æ•°å£°æ˜è¯­æ³•å®šä¹‰çš„ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ä¸‹é¢ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼å®šä¹‰å‡½æ•°çš„æ–¹å¼å‡ ä¹ç›¸å·®æ— å‡ ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="keyword">function</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°çš„å±æ€§å’Œæ–¹æ³•"><a href="#å‡½æ•°çš„å±æ€§å’Œæ–¹æ³•" class="headerlink" title="å‡½æ•°çš„å±æ€§å’Œæ–¹æ³•"></a>å‡½æ•°çš„å±æ€§å’Œæ–¹æ³•</h2><ul><li><code>length</code>: è¡¨ç¤ºå‡½æ•°å¸Œæœ›æ¥æ”¶çš„å‘½åå‚æ•°çš„ä¸ªæ•°ï¼›</li><li><code>prototype</code>: åœ¨ ECMAScript ä¸­ï¼Œ<code>prototype</code> å±æ€§æ—¶ä¸å¯æšä¸¾çš„ï¼Œå› æ­¤ä½¿ç”¨ <code>for-in</code> æ— æ³•å‘ç°</li><li><code>apply</code>: <code>apply</code> æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯åœ¨å…¶ä¸­è¿è¡Œå‡½æ•°çš„ä½œç”¨åŸŸï¼Œå¦ä¸€ä¸ªæ˜¯å‚æ•°æ•°ç»„ã€‚</li><li><code>call</code>: <code>call</code> æ–¹æ³•ä¸ <code>apply</code> æ–¹æ³•çš„ä½œç”¨ç›¸åŒï¼Œå®ƒä»¬çš„åŒºåˆ«ä»…åœ¨äºæ¥æ”¶å‚æ•°çš„æ–¹å¼ä¸åŒã€‚å¯¹äº <code>call()</code> æ–¹æ³•è€Œè¨€ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>this</code> å€¼æ²¡æœ‰å˜åŒ–ï¼Œå˜åŒ–çš„æ˜¯å…¶ä½™å‚æ•°éƒ½ç›´æ¥ä¼ é€’ç»™å‡½æ•°ã€‚</li><li><code>bind</code>: è¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°å®ä¾‹ï¼Œå…¶ä¸­ <code>this</code> å€¼ä¼šè¢«ç»‘å®šåˆ°ä¼ ç»™ <code>bind()</code> å‡½æ•°çš„å€¼ã€‚</li></ul><h2 id="toStringã€toLocalStringã€valueOf"><a href="#toStringã€toLocalStringã€valueOf" class="headerlink" title="toStringã€toLocalStringã€valueOf"></a>toStringã€toLocalStringã€valueOf</h2><table><thead><tr><th></th><th>toString</th><th>toLocalString</th><th>valueOf</th></tr></thead><tbody><tr><td>Array</td><td>ç”±æ•°ç»„ä¸­æ¯ä¸ªå€¼çš„å­—ç¬¦ä¸²å½¢å¼æ‹¼æ¥è€Œæˆçš„ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²</td><td>åŒ toString</td><td>è¿”å›çš„è¿˜æ˜¯æ•°ç»„</td></tr><tr><td>Date</td><td>è¿”å›å¸¦æœ‰æ—¶åŒºä¿¡æ¯çš„æ—¥æœŸå’Œæ—¶é—´</td><td>ä¼šæŒ‰ç…§ä¸æµè§ˆå™¨è®¾ç½®çš„åœ°åŒºç›¸é€‚åº”çš„æ ¼å¼è¿”å›æ—¥æœŸå’Œæ—¶é—´</td><td>è¿”å›æ—¥æœŸçš„æ¯«ç§’è¡¨ç¤º</td></tr><tr><td>RegExp</td><td>è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„å­—é¢é‡</td><td>åŒ toString</td><td>è¿”å›æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«</td></tr><tr><td>Function</td><td>è¿”å›å‡½æ•°çš„ä»£ç </td><td>åŒ toString</td><td>åŒ toString</td></tr></tbody></table><h2 id="è®¿é—®å¯¹è±¡å±æ€§"><a href="#è®¿é—®å¯¹è±¡å±æ€§" class="headerlink" title="è®¿é—®å¯¹è±¡å±æ€§"></a>è®¿é—®å¯¹è±¡å±æ€§</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œè®¿é—®å¯¹è±¡å±æ€§æ—¶ä½¿ç”¨çš„éƒ½æ˜¯ç‚¹è¡¨ç¤ºæ³•ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šé¢å‘å¯¹è±¡è¯­è¨€ä¸­é€šç”¨çš„è¯­æ³•ã€‚ä¸è¿‡ï¼Œåœ¨ JavaScript ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·è¡¨ç¤ºæ³•æ¥è®¿é—®å¯¹è±¡çš„å±æ€§ã€‚åœ¨ä½¿ç”¨æ–¹æ‹¬å·è¯­æ³•æ—¶ï¼Œåº”è¯¥å°†è¦è®¿é—®çš„å±æ€§ä»¥å­—ç¬¦ä¸²çš„å½¢å¼æ”¾åœ¨æ–¹æ‹¬å·ä¸­ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123; <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>); <span class="comment">// å¼ ä¸‰</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person[<span class="string">&quot;name&quot;</span>]); <span class="comment">// å¼ ä¸‰</span></span><br></pre></td></tr></table></figure><p>ä»åŠŸèƒ½ä¸Šçœ‹ï¼Œè¿™ä¸¤ç§è®¿é—®å¯¹è±¡å±æ€§çš„æ–¹æ³•æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚ä½†æ–¹æ‹¬å·è¯­æ³•çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å¯ä»¥é€šè¿‡å˜é‡æ¥è®¿é—®å±æ€§ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> propertyName = <span class="string">&quot;name&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person[propertyName]); <span class="comment">// &quot;å¼ ä¸‰&quot;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå±æ€§åä¸­åŒ…å«ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯çš„å­—ç¬¦ï¼Œæˆ–è€…å±æ€§åä½¿ç”¨çš„æ˜¯å…³é”®å­—æˆ–ä¿ç•™å­—ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·è¡¨ç¤ºæ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person[<span class="string">&quot;first name&quot;</span>] = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br></pre></td></tr></table></figure><p>ç”±äº <code>&quot;first name&quot;</code> ä¸­åŒ…å«ä¸€ä¸ªç©ºæ ¼ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•æ¥è®¿é—®å®ƒã€‚ç„¶åï¼Œå±æ€§åä¸­æ˜¯å¯ä»¥åŒ…å«éå­—æ¯éæ•°å­—çš„ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·è¡¨ç¤ºæ³•æ¥è®¿é—®ä»–ä»¬ã€‚</p><p>é€šå¸¸ï¼Œé™¤éå¿…é¡»ä½¿ç”¨å˜é‡æ¥è®¿é—®å±æ€§ï¼Œå¦åˆ™æˆ‘ä»¬å»ºè®®ä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•ã€‚</p><h2 id="å¼•ç”¨ç±»å‹ä¸åŸºæœ¬åŒ…è£…ç±»å‹çš„åŒºåˆ«"><a href="#å¼•ç”¨ç±»å‹ä¸åŸºæœ¬åŒ…è£…ç±»å‹çš„åŒºåˆ«" class="headerlink" title="å¼•ç”¨ç±»å‹ä¸åŸºæœ¬åŒ…è£…ç±»å‹çš„åŒºåˆ«"></a>å¼•ç”¨ç±»å‹ä¸åŸºæœ¬åŒ…è£…ç±»å‹çš„åŒºåˆ«</h2><p>å¼•ç”¨ç±»å‹ä¸åŸºæœ¬åŒ…è£…ç±»å‹çš„ä¸»è¦åŒºåˆ«å°±æ˜¯å¯¹è±¡çš„ç”Ÿå­˜æœŸã€‚ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦åˆ›å»ºçš„å¼•ç”¨ç±»å‹çš„å®ä¾‹ï¼Œåœ¨æ‰§è¡Œæµç¦»å¼€å½“å‰ä½œç”¨åŸŸä¹‹å‰éƒ½ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚è€Œè‡ªåŠ¨åˆ›å»ºçš„åŸºæœ¬åŒ…è£…ç±»å‹çš„å¯¹è±¡ï¼Œåˆ™åªå­˜åœ¨äºä¸€è¡Œä»£ç çš„æ‰§è¡Œç¬é—´ï¼Œç„¶åç«‹å³è¢«é”€æ¯ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½åœ¨è¿è¡Œæ—¶ä¸ºåŸºæœ¬ç±»å‹æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚</p><h2 id="å•ä½“å†…ç½®å¯¹è±¡"><a href="#å•ä½“å†…ç½®å¯¹è±¡" class="headerlink" title="å•ä½“å†…ç½®å¯¹è±¡"></a>å•ä½“å†…ç½®å¯¹è±¡</h2><p>ECMAScript-262 å¯¹å†…ç½®å¯¹è±¡çš„å®šä¹‰æ˜¯ï¼šâ€ç”± ECMAScript å®ç°æä¾›çš„ã€ä¸ä¾èµ–äºå®¿ä¸»ç¯å¢ƒçš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡åœ¨ ECMAScript ç¨‹åºæ‰§è¡Œä¹‹å‰å°±å·²ç»å­˜åœ¨äº†ã€‚â€œæ„æ€å°±æ˜¯è¯´ï¼Œå¼€å‘äººå‘˜ä¸å¿…æ˜¾å¼åœ°å®ä¾‹åŒ–å†…ç½®å¯¹è±¡ï¼Œå› ä¸ºå®ƒä»¬å·²ç»å®ä¾‹åŒ–äº†ã€‚ECMAScript å®šä¹‰äº†ä¸¤ä¸ªå•ä½“å†…ç½®å¯¹è±¡ï¼šGlobal å’Œ Mathã€‚</p><h2 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h2><p>é¢å‘å¯¹è±¡ï¼ˆObject-Orientedï¼ŒOOï¼‰çš„è¯­è¨€æœ‰ä¸€ä¸ªæ ‡å¿—ï¼Œé‚£å°±æ˜¯å®ƒä»¬éƒ½æœ‰ç±»çš„æ¦‚å¿µï¼Œè€Œé€šè¿‡ç±»å¯ä»¥åˆ›å»ºä»»æ„å¤šä¸ªå…·æœ‰å±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡ã€‚ECMAScript ä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œå› æ­¤å®ƒçš„å¯¹è±¡ä¹Ÿä¸åŸºäºç±»çš„è¯­è¨€ä¸­çš„å¯¹è±¡æœ‰æ‰€ä¸åŒã€‚</p><p>ECMA-262 æŠŠå¯¹è±¡å®šä¹‰ä¸ºï¼šâ€æ— åºå±æ€§çš„é›†åˆï¼Œå…¶å±æ€§å¯ä»¥åŒ…å«åŸºç¡€å€¼ã€å¯¹è±¡æˆ–è€…å‡½æ•°ã€‚â€œ ä¸¥æ ¼æ¥è®²ï¼Œè¿™å°±ç›¸å½“äºè¯´æ˜¯å¯¹è±¡æ—¶ä¸€ç»„æ²¡æœ‰ç‰¹å®šé¡ºåºçš„å€¼ã€‚å¯¹è±¡çš„æ¯ä¸ªå±æ€§æˆ–æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œè€Œæ¯ä¸ªåå­—éƒ½æ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚æ­£å› ä¸ºè¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ ECMAScript çš„å¯¹è±¡æƒ³è±¡æˆæ•£åˆ—è¡¨ï¼šæ— éå°±æ˜¯ä¸€ç»„é”®å€¼å¯¹ï¼Œå…¶ä¸­å€¼å¯ä»¥æ˜¯æ•°æ®æˆ–å‡½æ•°ã€‚</p><p>æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯åŸºäºä¸€ä¸ªå¼•ç”¨ç±»å‹åˆ›å»ºçš„ï¼Œè¿™ä¸ªå¼•ç”¨ç±»å‹å¯ä»¥æ˜¯åŸç”Ÿç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼€å‘äººå‘˜å®šä¹‰çš„ç±»å‹ã€‚</p><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><p>æ„é€ å‡½æ•°ä¸å…¶ä»–å‡½æ•°çš„å”¯ä¸€åŒºåˆ«ï¼Œå°±åœ¨äºè°ƒç”¨å®ƒä»¬çš„æ–¹å¼ä¸åŒã€‚ä¸è¿‡ï¼Œæ„é€ å‡½æ•°æ¯•ç«Ÿä¹Ÿæ˜¯å‡½æ•°ï¼Œä¸å­˜åœ¨å®šä¹‰æ„é€ å‡½æ•°çš„ç‰¹æ®Šè¯­æ³•ã€‚ä»»ä½•å‡½æ•°ï¼Œåªè¦é€šè¿‡ <code>new</code> æ“ä½œç¬¦æ¥è°ƒç”¨ï¼Œé‚£ä»–å°±å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°ï¼›è€Œä»»ä½•å‡½æ•°ï¼Œå¦‚æœä¸é€šè¿‡ <code>new</code> æ“ä½œç¬¦æ¥è°ƒç”¨ï¼Œé‚£å®ƒè·Ÿæ™®é€šçš„å‡½æ•°ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆä¸¤æ ·ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sayName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(name);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å½“ä½œæ™®é€šå‡½æ•°è°ƒç”¨</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;æ¨ä¿Šå®&quot;</span>);</span><br><span class="line">person.<span class="title function_">sayName</span>(); <span class="comment">// æ¨ä¿Šå®</span></span><br><span class="line"><span class="comment">// å½“ä½œæ™®é€šå‡½æ•°è°ƒç”¨</span></span><br><span class="line"><span class="title class_">Person</span>(<span class="string">&quot;æ¨ä¿Šå®&quot;</span>); <span class="comment">// æ·»åŠ åˆ° window</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">sayName</span>(); <span class="comment">// æ¨ä¿Šå®</span></span><br><span class="line"><span class="comment">// åœ¨å¦ä¸€ä¸ªå¯¹è±¡çš„ä½œç”¨åŸŸä¸­è°ƒç”¨</span></span><br><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"><span class="title class_">Person</span>.<span class="title function_">call</span>(o, <span class="string">&quot;æ¨å°ç„¶&quot;</span>);</span><br><span class="line">o.<span class="title function_">sayName</span>(); <span class="comment">// æ¨å°ç„¶</span></span><br></pre></td></tr></table></figure><h3 id="åŸå‹-prototype"><a href="#åŸå‹-prototype" class="headerlink" title="åŸå‹ prototype"></a>åŸå‹ prototype</h3><p>æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª <code>prototype</code>(åŸå‹)å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆ,æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„ç”¨é€”æ˜¯åŒ…å«å¯ä»¥ç”±ç‰¹å®šç±»å‹çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœæŒ‰ç…§å­—é¢æ„æ€æ¥ç†è§£ï¼Œé‚£ä¹ˆ <code>prototype</code> å°±æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„é‚£ä¸ªå¯¹è±¡å®ä¾‹çš„åŸå‹å¯¹è±¡ã€‚ä½¿ç”¨åŸå‹å¯¹è±¡çš„å¥½å¤„æ˜¯å¯ä»¥è®©æ‰€æœ‰å¯¹è±¡å®ä¾‹å…±äº«å®ƒæ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³•ã€‚æ¢å¥è¯è¯´ï¼Œä¸å¿…åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰å¯¹è±¡å®ä¾‹çš„ä¿¡æ¯ï¼Œè€Œæ˜¯å°†è¿™äº›ä¿¡æ¯ç›´æ¥æ·»åŠ åˆ°åŸå‹å¯¹è±¡ä¸­ã€‚</p><h3 id="æŸ¥æ‰¾å¯¹è±¡å±æ€§"><a href="#æŸ¥æ‰¾å¯¹è±¡å±æ€§" class="headerlink" title="æŸ¥æ‰¾å¯¹è±¡å±æ€§"></a>æŸ¥æ‰¾å¯¹è±¡å±æ€§</h3><p>æ¯å½“ä»£ç è¯»å–æŸä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡æœç´¢ï¼Œç›®æ ‡æ˜¯å…·æœ‰ç»™å®šåå­—çš„å±æ€§ã€‚æœç´¢é¦–å…ˆä»å¯¹è±¡å®ä¾‹æœ¬èº«å¼€å§‹ã€‚å¦‚æœåœ¨å®ä¾‹ä¸­æ‰¾åˆ°äº†å…·æœ‰ç»™å®šåå­—çš„å±æ€§ï¼Œåˆ™è¿”å›è¯¥å±æ€§çš„å€¼ï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ç»§ç»­æœç´¢æŒ‡é’ˆæŒ‡å‘çš„åŸå‹å¯¹è±¡ï¼Œåœ¨åŸå‹å¯¹è±¡ä¸­æŸ¥æ‰¾å…·æœ‰ç»™å®šåå­—çš„å±æ€§ã€‚å¦‚æœåœ¨åŸå‹å¯¹è±¡ä¸­æ‰¾åˆ°äº†è¿™ä¸ªå±æ€§ï¼Œåˆ™è¿”å›è¯¥å±æ€§çš„å€¼ã€‚è¿™å°±æ˜¯å¤šä¸ªå¯¹è±¡å®ä¾‹å…±äº«åŸå‹æ‰€ä¿å­˜çš„å±æ€§å’Œæ–¹æ³•çš„åŸç†ã€‚</p><blockquote><p>åŸå‹å¯¹è±¡æœ€åˆåªåŒ…å« <code>constructor</code> å±æ€§ï¼Œè€Œè¯¥å±æ€§ä¹Ÿæ˜¯å…±äº«çš„ï¼Œå› æ­¤å¯ä»¥é€šè¿‡å¯¹è±¡å®ä¾‹è®¿é—®ã€‚</p></blockquote><p>è™½ç„¶å¯ä»¥é€šè¿‡å¯¹è±¡å®ä¾‹è®¿é—®ä¿å­˜åœ¨åŸå‹ä¸­çš„å€¼ï¼Œä½†å´ä¸èƒ½é€šè¿‡å¯¹è±¡å®ä¾‹é‡å†™åŸå‹ä¸­çš„å€¼ã€‚å¦‚æœæˆ‘ä»¬åœ¨å®ä¾‹ä¸­æ·»åŠ äº†ä¸€ä¸ªå±æ€§ï¼Œè€Œè¯¥å±æ€§ä¸å®ä¾‹åŸå‹ä¸­çš„ä¸€ä¸ªå±æ€§åŒåï¼Œé‚£æˆ‘ä»¬å°±åœ¨å®ä¾‹ä¸­åˆ›å»ºè¯¥å±æ€§ï¼Œè¯¥å±æ€§å°†ä¼šå±è”½åŸå‹ä¸­çš„é‚£ä¸ªå±æ€§ã€‚æ¢å¥è¯è¯´ï¼Œæ·»åŠ è¿™ä¸ªå±æ€§åªä¼šé˜»æ­¢æˆ‘ä»¬è®¿é—®åŸå‹ä¸­çš„é‚£ä¸ªå±æ€§ï¼Œä½†ä¸ä¼šä¿®æ”¹é‚£ä¸ªå±æ€§ã€‚å³ä½¿å°†è¿™ä¸ªå±æ€§è®¾ç½®ä¸º <code>null</code>ï¼Œä¹Ÿåªä¼šåœ¨å®ä¾‹ä¸­è®¾ç½®è¿™ä¸ªå±æ€§ï¼Œè€Œä¸ä¼šå›å¤å…¶æŒ‡å‘åŸå‹çš„è¿æ¥ã€‚ä¸è¿‡ï¼Œä½¿ç”¨ <code>delete</code> æ“ä½œç¬¦åˆ™å¯ä»¥å®Œå…¨åˆ é™¤å®ä¾‹å±æ€§ï¼Œä»è€Œè®©æˆ‘ä»¬èƒ½å¤Ÿé‡æ–°è®¿é—®åŸå‹ä¸­çš„å±æ€§ã€‚</p><h3 id="proto-ã€Object-getPrototypeOf"><a href="#proto-ã€Object-getPrototypeOf" class="headerlink" title="__proto__ã€Object.getPrototypeOf"></a><code>__proto__</code>ã€<code>Object.getPrototypeOf</code></h3><p>åˆ›å»ºäº†è‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ä¹‹åï¼Œå…¶åŸå‹å¯¹è±¡é»˜è®¤åªä¼šå–å¾— <code>constructor</code> å±æ€§ï¼›è‡³äºå…¶ä»–æ–¹æ³•ï¼Œåˆ™éƒ½æ˜¯ä» <code>Object</code> é›†æˆè€Œæ¥çš„ã€‚å½“è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹åï¼Œè¯¥å®ä¾‹çš„å†…éƒ¨å°†åŒ…å«ä¸€ä¸ªæŒ‡é’ˆï¼ˆå†…éƒ¨å±æ€§ï¼‰ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚ECMAScript-262 ç¬¬ 5 ç‰ˆä¸­ç®¡è¿™ä¸ªæŒ‡é’ˆå« <code>[[Prototype]]</code>ã€‚è™½ç„¶åœ¨è„šæœ¬ä¸­æ²¡æœ‰æ ‡å‡†çš„æ–¹å¼è®¿é—® <code>[[Prototype]]</code>ï¼Œä½† Firefoxã€Safari å’Œ Chrome åœ¨æ¯ä¸ªå¯¹è±¡ä¸Šéƒ½æ”¯æŒä¸€ä¸ªå±æ€§ <code>__proto__</code>ï¼›è€Œåœ¨å…¶ä»–å®ç°ä¸­ï¼Œè¿™ä¸ªå±æ€§å¯¹è„šæœ¬åˆ™æ˜¯å®Œå…¨ä¸å¯è§çš„ã€‚ä¸è¿‡è¦æ˜ç¡®çš„çœŸæ­£é‡è¦å¾—ä¸€ç‚¹å°±æ˜¯ï¼Œè¿™ä¸ªè¿æ¥å­˜åœ¨äºå®ä¾‹ä¸æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¹‹é—´ï¼Œè€Œä¸æ˜¯å®ä¾‹äºæ„é€ å‡½æ•°ä¹‹é—´ã€‚</p><p>æˆ‘ä»¬å¯ä»¥éšæ—¶ä¸ºåŸå‹æ·»åŠ å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶ä¸”ä¿®æ”¹èƒ½å¤Ÿç«‹å³åœ¨æ‰€æœ‰å¯¹è±¡å®ä¾‹ä¸Šåæ˜ å‡ºæ¥ï¼Œä½†å¦‚æœæ˜¯é‡å†™æ•´ä¸ªåŸå‹å¯¹è±¡ï¼Œé‚£ä¹ˆæƒ…å†µå°±ä¸ä¸€æ ·äº†ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œè°ƒç”¨æ„é€ å‡½æ•°æ—¶ä¼šä¸ºå®ä¾‹æ·»åŠ ä¸€ä¸ªæŒ‡å‘æœ€åˆåŸå‹çš„ <code>[[Prototype]]</code> æŒ‡é’ˆï¼Œè€ŒæŠŠåŸå‹ä¿®æ”¹ä¸ºå¦å¤–ä¸€ä¸ªå¯¹è±¡å°±ç­‰äºåˆ‡æ–­äº†æ„é€ å‡½æ•°ä¸æœ€åˆåŸå‹ä¹‹é—´çš„è”ç³»ã€‚è¯·è®°ä½ï¼šå®ä¾‹ä¸­çš„æŒ‡é’ˆä»…æŒ‡å‘åŸå‹ï¼Œè€Œä¸æŒ‡å‘æ„é€ å‡½æ•°ã€‚</p><p>è™½ç„¶åœ¨æ‰€æœ‰çš„å®ç°ä¸­éƒ½æ— æ³•è®¿é—®åˆ° <code>[[Prototype]]</code>ï¼Œä½†å¯ä»¥é€šè¿‡ <code>Object.getPrototypeOf()</code> æ–¹æ³•æ¥ç¡®å®šå¯¹è±¡ä¹‹é—´æ˜¯å¦å­˜åœ¨è¿™ç§å…³ç³»ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œå¦‚æœ <code>[[Prototype]]</code> æŒ‡å‘è°ƒç”¨ <code>isPrototypeOf()</code> æ–¹æ³•çš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±è¿”å› trueã€‚</p><p>ECMAScript 5 å¢åŠ äº†ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œå« <code>Object.getPrototypeOf()</code>ï¼Œåœ¨æ‰€æœ‰æ”¯æŒçš„å®ç°ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å› <code>[[Prototype]]</code> çš„å€¼ã€‚</p><h3 id="ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼"><a href="#ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼" class="headerlink" title="ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼"></a>ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼</h3><p>åˆ›å»ºè‡ªå®šä¹‰ç±»å‹çš„æœ€å¸¸è§æ–¹å¼ï¼Œå°±æ˜¯ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼ä¸åŸå‹æ¨¡å¼ã€‚æ„é€ å‡½æ•°æ¨¡å¼ç”¨äºå®šä¹‰å®ä¾‹å±æ€§ï¼Œè€ŒåŸå‹æ¨¡å¼ç”¨äºå®šä¹‰æ–¹æ³•å’Œå…±äº«å±æ€§ã€‚ç»“æœï¼Œæ¯ä¸ªå®ä¾‹éƒ½ä¼šæœ‰è‡ªå·±çš„ä¸€ä»½å®ä¾‹å±æ€§çš„å‰¯æœ¬ï¼Œä½†åŒæ—¶æœ‰å…±äº«ç€å¯¹æ–¹æ³•çš„å¼•ç”¨ï¼Œæœ€å¤§é™åº¦åœ°èŠ‚çœäº†å†…å­˜ã€‚å¦å¤–ï¼Œè¿™ç§æ··æ‚æ¨¡å¼è¿˜æ”¯æŒå‘æ„é€ å‡½æ•°ä¼ é€’å‚æ•°ï¼›å¯è°“æ˜¯é›†ä¸¤ç§æ¨¡å¼ä¹‹é•¿ã€‚ä¸‹é¢çš„ä»£ç é‡å†™äº†å‰é¢çš„ä¾‹å­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age, job</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">job</span> = job;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">friends</span> = [<span class="string">&quot;Shelby&quot;</span>, <span class="string">&quot;Court&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">  <span class="attr">constructor</span>: <span class="title class_">Person</span>,</span><br><span class="line">  <span class="attr">sayName</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Nicholas&quot;</span>, <span class="number">29</span>, <span class="string">&quot;Software Engineer&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Greg&quot;</span>, <span class="number">27</span>, <span class="string">&quot;Doctor&quot;</span>);</span><br><span class="line"></span><br><span class="line">person1.<span class="property">friends</span>.<span class="title function_">push</span>(<span class="string">&quot;Van&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">friends</span>); <span class="comment">// [&quot;Shelby&quot;, &quot;Court&quot;, &quot;Van&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person2.<span class="property">friends</span>); <span class="comment">// [&quot;Shelby&quot;, &quot;Court&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">friends</span> === person2.<span class="property">friends</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">sayName</span> === person2.<span class="property">sayName</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ä¾‹å±æ€§éƒ½æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰çš„ï¼Œè€Œç”±æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§ <code>constructor</code> å’Œæ–¹æ³• <code>sayName()</code> åˆ™æ˜¯åœ¨åŸå‹ä¸­å®šä¹‰çš„ã€‚è€Œä¿®æ”¹äº† <code>person1.friends</code>(å‘å…¶ä¸­æ·»åŠ ä¸€ä¸ªæ–°å­—ç¬¦ä¸²)ï¼Œå¹¶ä¸ä¼šå½±å“åˆ° <code>person2.friends</code>ï¼Œå› ä¸ºå®ƒä»¬åˆ†åˆ«å¼•ç”¨äº†ä¸åŒçš„æ•°ç»„ã€‚</p><p>è¿™ç§æ„é€ å‡½æ•°ä¸åŸå‹æ··æˆçš„æ¨¡å¼ï¼Œæ˜¯ç›®å‰åœ¨ ECMAScript ä¸­ä½¿ç”¨æœ€å¹¿æ³›ã€è®¤åŒåº¦æœ€é«˜çš„ä¸€ç§åˆ›å»ºè‡ªå®šä¹‰ç±»å‹çš„æ–¹æ³•ã€‚å¯ä»¥è¯´ï¼Œè¿™æ˜¯ç”¨æ¥å®šä¹‰å¼•ç”¨ç±»å‹çš„ä¸€ç§é»˜è®¤æ¨¡å¼ã€‚</p><h3 id="åŠ¨æ€åŸå‹æ¨¡å¼"><a href="#åŠ¨æ€åŸå‹æ¨¡å¼" class="headerlink" title="åŠ¨æ€åŸå‹æ¨¡å¼"></a>åŠ¨æ€åŸå‹æ¨¡å¼</h3><p>æœ‰å…¶ä»– OO è¯­è¨€ç»éªŒçš„å¼€å‘äººå‘˜åœ¨çœ‹åˆ°ç‹¬ç«‹çš„æ„é€ å‡½æ•°å’ŒåŸå‹æ—¶ï¼Œå¾ˆå¯èƒ½ä¼šæ„Ÿåˆ°éå¸¸å›°æƒ‘ã€‚åŠ¨æ€åŸå‹æ¨¡å¼æ­£å¼è‡´åŠ›äºè§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œå®ƒæŠŠæ‰€æœ‰ä¿¡æ¯éƒ½å°è£…åœ¨äº†æ„é€ å‡½æ•°ä¸­ï¼Œè€Œé€šè¿‡åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–åŸå‹ï¼ˆä»…åœ¨å¿…è¦çš„æƒ…å†µä¸‹ï¼‰ï¼Œåˆä¿æŒäº†åŒæ—¶ä½¿ç”¨æ„é€ å‡½æ•°å’ŒåŸå‹çš„ä¼˜ç‚¹ã€‚æ¢å¥è¯è¯´ï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥æŸä¸ªåº”è¯¥å­˜åœ¨çš„æ–¹æ³•æ˜¯å¦æœ‰æ•ˆï¼Œæ¥å†³å®šæ˜¯å¦éœ€è¦åˆå§‹åŒ–åŸå‹ã€‚æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age, job</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">job</span> = job</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable language_">this</span>.<span class="property">sayName</span> !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">    <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> friend = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;Nicholas&#x27;</span>, <span class="number">29</span>, <span class="string">&#x27;Software Engineer&#x27;</span>)</span><br><span class="line">friend.<span class="title function_">sayName</span>() <span class="comment">// &quot;Nicholas&quot;</span></span><br></pre></td></tr></table></figure><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><p>ç»§æ‰¿æ˜¯ OO è¯­è¨€ä¸­çš„ä¸€ä¸ªæœ€ä¸ºäººæ´¥æ´¥ä¹é“çš„æ¦‚å¿µã€‚è®¸å¤š OO è¯­è¨€éƒ½æ”¯æŒä¸¤ç§ç»§æ‰¿æ–¹å¼ï¼šæ¥å£ä¸ç»§æ‰¿å’Œå®ç°ç»§æ‰¿ã€‚æ¥å£ç»§æ‰¿åªç»§æ‰¿æ–¹æ³•ç­¾åï¼Œè€Œå®ç°ç»§æ‰¿åˆ™ç»§æ‰¿å®é™…çš„æ–¹æ³•ã€‚å¦‚å‰æ‰€è¿°ï¼Œç”±äºå‡½æ•°æ²¡æœ‰ç­¾åï¼Œåœ¨ ECMAScript ä¸­æ— æ³•å®ç°æ¥å£ç»§æ‰¿ã€‚ECMAScript åªæ”¯æŒå®ç°ç»§æ‰¿ï¼Œè€Œä¸”å…¶å®å®ç°ç»§æ‰¿ä¸»è¦æ˜¯ä¾é åŸå‹é“¾æ¥å®ç°çš„</p><h3 id="ç»§æ‰¿-1"><a href="#ç»§æ‰¿-1" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><h4 id="åŸå‹é“¾-1"><a href="#åŸå‹é“¾-1" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h4><p>ECMAScript æè¿°äº†åŸå‹é“¾çš„æ¦‚å¿µï¼Œå¹¶å°†åŸå‹é“¾ä½œä¸ºå®ç°ç»§æ‰¿çš„ä¸»è¦æ–¹æ³•ã€‚å…¶åŸºæœ¬æ€æƒ³æ˜¯åˆ©ç”¨åŸå‹è®©ä¸€ä¸ªå¼•ç”¨ç±»å‹ç»§æ‰¿å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³•ã€‚ç®€å•å›é¡¾ä¸€ä¸‹æ„é€ å‡½æ•°ã€åŸå‹å’Œå®ä¾‹çš„å…³ç³»ï¼šæ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œå®ä¾‹éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘åŸå‹å¯¹è±¡çš„å†…éƒ¨æŒ‡é’ˆ <code>[[Prototype]]</code>ã€‚é‚£ä¹ˆï¼Œå‡å¦‚æˆ‘ä»¬è®©åŸå‹å¯¹è±¡ç­‰äºå¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼Œç»“æœä¼šæ€ä¹ˆæ ·ï¼Ÿæ˜¾ç„¶ï¼Œæ­¤æ—¶çš„åŸå‹å¯¹è±¡å°†åŒ…å«æŒ‡å‘å¦ä¸€ä¸ªåŸå‹çš„æŒ‡é’ˆï¼Œç›¸åº”åœ°ï¼Œå¦ä¸€ä¸ªåŸå‹ä¸­ä¹ŸåŒ…å«ç€ä¸€ä¸ªæŒ‡å‘å¦ä¸€ä¸ªæ„é€ å‡½æ•°çš„æŒ‡é’ˆã€‚å‡å¦‚å¦ä¸€ä¸ªåŸå‹åˆæ˜¯å¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼Œé‚£ä¹ˆä¸Šè¿°å…³ç³»ä¾ç„¶æˆç«‹ï¼Œå¦‚æ­¤å±‚å±‚é€’è¿›ï¼Œå°±æ„æˆäº†å®ä¾‹äºåŸå‹çš„é“¾æ¡ã€‚è¿™å°±æ˜¯æ‰€è°“åŸå‹é“¾çš„åŸºæœ¬æ¦‚å¿µã€‚</p><h4 id="å€Ÿç”¨æ„é€ å‡½æ•°"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°"></a>å€Ÿç”¨æ„é€ å‡½æ•°</h4><p>åœ¨è§£å†³åŸå‹ä¸­åŒ…å«å¼•ç”¨ç±»å‹å€¼æ‰€å¸¦æ¥çš„é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œå¼€å‘äººå‘˜å¼€å§‹ä½¿ç”¨ä¸€ç§å«åšå€Ÿç”¨æ„é€ å‡½æ•°ï¼ˆconstructor stealingï¼‰çš„æŠ€æœ¯ï¼ˆæœ‰æ—¶å€™ä¹Ÿå«åšä¼ªé€ å¯¹è±¡æˆ–ç»å…¸ç»§æ‰¿ï¼‰ã€‚åˆ«å¿˜äº†ï¼Œå‡½æ•°åªä¸è¿‡æ˜¯åœ¨ç‰¹å®šç¯å¢ƒä¸­æ‰§è¡Œä»£ç çš„å¯¹è±¡ï¼Œå› æ­¤é€šè¿‡ä½¿ç”¨ <code>apply()</code> å’Œ <code>call()</code> æ–¹æ³•ä¹Ÿå¯ä»¥åœ¨ï¼ˆå°†æ¥ï¼‰æ–°åˆ›å»ºçš„å¯¹è±¡ä¸Šæ‰§è¡Œæ„é€ å‡½æ•°ã€‚</p><h4 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h4><p>ç»„åˆç»§æ‰¿ï¼ˆcombination inheritanceï¼‰ï¼Œæœ‰æ—¶å€™ä¹Ÿå«åšä¼ªç»å…¸ç»§æ‰¿ï¼ŒæŒ‡çš„æ˜¯å°†æ¥åŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°çš„æŠ€æœ¯ç»„åˆåˆ°ä¸€å—ï¼Œä»è€Œå‘æŒ¥äºŒè€…ä¹‹é•¿çš„ä¸€ç§é›†æˆæ¨¡å¼ã€‚å…¶èƒŒåçš„æ€è·¯æ˜¯ä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œè€Œé€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿ã€‚è¿™æ ·ï¼Œæ—¢é€šè¿‡åœ¨åŸå‹ä¸Šå®šä¹‰æ–¹æ³•å®ç°äº†å‡½æ•°å¤ç”¨ï¼Œåˆèƒ½å¤Ÿä¿è¯æ¯ä¸ªå®ä¾‹éƒ½æœ‰å®ƒè‡ªå·±çš„å±æ€§ã€‚</p><p>ç»„åˆç»§æ‰¿é¿å…äº†åŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°çš„ç¼ºé™·ï¼Œèåˆäº†å®ƒä»¬çš„ä¼˜ç‚¹ï¼Œç§°ä¸º JavaScript ä¸­æœ€å¸¸ç”¨çš„ç»§æ‰¿æ¨¡å¼ã€‚è€Œä¸”ï¼Œ<code>instanceOf</code> å’Œ <code>isPrototypeOf()</code> ä¹Ÿèƒ½å¤Ÿç”¨äºè¯†åˆ«åŸºäºç»„åˆç»§æ‰¿åˆ›å»ºçš„å¯¹è±¡ã€‚</p><h2 id="æ·±å…¥"><a href="#æ·±å…¥" class="headerlink" title="æ·±å…¥"></a>æ·±å…¥</h2><ul><li><code>var</code>ã€<code>let</code>ã€<code>const</code></li><li><code>null</code> å’Œ <code>undefined</code></li><li><a href="https://www.jianshu.com/p/07ba2b0c8fca">Object.defineProperty()</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript æµ…æ¯”è¾ƒå’Œæ·±æ¯”è¾ƒ</title>
      <link href="/cc30b413f4a8/"/>
      <url>/cc30b413f4a8/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼"><a href="#åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼" class="headerlink" title="åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼"></a>åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼</h2><p>ECMAScript å˜é‡å¯èƒ½åŒ…å«ä¸¤ç§ä¸åŒæ•°æ®ç±»å‹çš„å€¼ï¼šåŸºæœ¬ç±»å‹å€¼å’Œå¼•ç”¨ç±»å‹å€¼ã€‚<strong>åŸºæœ¬ç±»å‹å€¼</strong>æŒ‡çš„æ˜¯ç®€å•çš„æ•°æ®æ®µï¼Œè€Œ<strong>å¼•ç”¨ç±»å‹çš„å€¼</strong>æŒ‡é‚£äº›å¯èƒ½ç”±å¤šä¸ªå€¼æ„æˆçš„å¯¹è±¡ã€‚</p><p>åœ¨å°†ä¸€ä¸ªå€¼èµ‹ç»™å˜é‡æ—¶ï¼Œè§£æå™¨å¿…é¡»ç¡®å®šè¿™ä¸ªå€¼æ˜¯åŸºæœ¬ç±»å‹å€¼è¿˜æ˜¯å¼•ç”¨ç±»å‹å€¼ã€‚</p><p>ECMAScript ä¸­æœ‰äº”ç§åŸºæœ¬ç±»å‹: Undefinedã€Nullã€Booleanã€Number å’Œ Stringã€‚è¿™äº”ç§åŸºæœ¬æ•°æ®ç±»å‹æ˜¯æŒ‰å€¼è®¿é—®çš„ï¼Œå› ä¸ºå¯ä»¥æ“ä½œä¿å­˜åœ¨å˜é‡ä¸­çš„å®é™…çš„å€¼ã€‚</p><p>å¼•ç”¨ç±»å‹çš„å€¼æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„å¯¹è±¡ã€‚ä¸å…¶ä»–è¯­è¨€ä¸åŒï¼ŒJavaScript ä¸å…è®¸ç›´æ¥è®¿é—®å†…å­˜ä¸­çš„ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸èƒ½ç›´æ¥æ“ä½œå¯¹è±¡çš„å†…å­˜ç©ºé—´ã€‚åœ¨å¤åˆ¶ä¿å­˜ç€å¯¹è±¡çš„æŸä¸ªå˜é‡æ—¶ï¼Œæ“ä½œçš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚ä½†åœ¨ä¸ºå¯¹è±¡æ·»åŠ å±æ€§æ—¶ï¼Œæ“ä½œçš„æ˜¯å®é™…çš„å¯¹è±¡ã€‚</p><blockquote><p>åœ¨å¾ˆå¤šè¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²ä»¥å¯¹è±¡çš„å½¢å¼æ¥è¡¨ç¤ºï¼Œå› æ­¤è¢«è®¤ä¸ºæ˜¯å¼•ç”¨ç±»å‹çš„ã€‚ECMAScript æ”¾å¼ƒäº†è¿™ä¸€ä¼ ç»Ÿ</p></blockquote><h2 id="æµ…æ¯”è¾ƒ"><a href="#æµ…æ¯”è¾ƒ" class="headerlink" title="æµ…æ¯”è¾ƒ"></a>æµ…æ¯”è¾ƒ</h2><p><strong>æµ…æ¯”è¾ƒ</strong>ä¹Ÿç§°å¼•ç”¨ç›¸ç­‰ï¼Œåœ¨ javascript ä¸­ï¼Œ <code>===</code> æ˜¯ä½œ<strong>æµ…æ¯”è¾ƒ</strong>,åªæ£€æŸ¥å·¦å³ä¸¤è¾¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">var</span> n = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">var</span> x = m</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m === n) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m === n) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><blockquote><p>å˜é‡ååªæ˜¯æŒ‡å‘æ ˆå†…å­˜çš„æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯ç»™è¿™ä¸ªæ ˆå†…å­˜å–å¾—åˆ«å</p></blockquote><h2 id="æ·±æ¯”è¾ƒ"><a href="#æ·±æ¯”è¾ƒ" class="headerlink" title="æ·±æ¯”è¾ƒ"></a>æ·±æ¯”è¾ƒ</h2><p><strong>æ·±æ¯”è¾ƒ</strong>ä¹Ÿç§°åŸå€¼ç›¸ç­‰ï¼Œæ·±æ¯”è¾ƒæ˜¯æŒ‡æ£€æŸ¥ä¸¤ä¸ª<strong>å¯¹è±¡</strong>çš„æ‰€æœ‰å±æ€§æ˜¯å¦<strong>éƒ½ç›¸ç­‰</strong>,æ·±æ¯”è¾ƒéœ€è¦ä»¥é€’å½’çš„æ–¹å¼éå†ä¸¤ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œæ“ä½œæ¯”è¾ƒè€—æ—¶ï¼Œæ·±æ¯”è¾ƒä¸ç®¡è¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯åŒä¸€å¯¹è±¡çš„å¼•ç”¨ã€‚</p><h3 id="lodash-isEqual"><a href="#lodash-isEqual" class="headerlink" title="lodash.isEqual"></a>lodash.isEqual</h3><blockquote><p><code>_.isEqual</code>: æ‰§è¡Œæ·±æ¯”è¾ƒæ¥ç¡®å®šä¸¤è€…çš„å€¼æ˜¯å¦ç›¸ç­‰ã€‚<br>æ³¨æ„: è¿™ä¸ªæ–¹æ³•æ”¯æŒæ¯”è¾ƒ <code>arrays</code>, <code>array buffers</code>, <code>booleans</code>, <code>date objects</code>, <code>error objects</code>, <code>maps</code>, <code>numbers</code>, <code>Object objects</code>, <code>regexes</code>, <code>sets</code>, <code>strings</code>, <code>symbols</code>, ä»¥åŠ <code>typed arrays</code>. Objectå¯¹è±¡å€¼æ¯”è¾ƒè‡ªèº«çš„å±æ€§ï¼Œä¸åŒ…æ‹¬ç»§æ‰¿çš„å’Œå¯æšä¸¾çš„å±æ€§ã€‚ä¸æ”¯æŒå‡½æ•°å’ŒDOMèŠ‚ç‚¹æ¯”è¾ƒã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"><span class="keyword">const</span> m = &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">const</span> n = &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_.<span class="title function_">isEqual</span>(m, n)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="fast-deep-equal"><a href="#fast-deep-equal" class="headerlink" title="fast-deep-equal"></a>fast-deep-equal</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> deepEqual <span class="keyword">from</span> <span class="string">&#x27;fast-deep-equal&#x27;</span></span><br><span class="line"><span class="title function_">deepEqual</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;æ´›ç«¹&#x27;</span>&#125;,&#123;<span class="attr">name</span>: <span class="string">&#x27;æ´›ç«¹&#x27;</span>&#125;) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES æ ‡å‡†ä¸­ç›¸ç­‰æ¯”è¾ƒç®—æ³• SameValue å’Œ SameValueZero</title>
      <link href="/39d6576dcc94/"/>
      <url>/39d6576dcc94/</url>
      
        <content type="html"><![CDATA[<p>JavaScript å¯¹å€¼çš„ç›¸ç­‰åˆ¤æ–­æœ‰å¾ˆå¤šä¸åŒçš„ç®—æ³•ï¼Œ<code>==</code> åªæ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§ã€‚ç”±äº <code>NaN</code> å’Œæ­£è´Ÿé›¶çš„æ¶‰å…¥ï¼Œé™¤äº† <code>==</code> å’Œ <code>===</code> ä¹‹å¤–è¿˜æœ‰ SameValue å’Œ SameValueZero ç®—æ³•ã€‚</p><h2 id="ã€-ã€SameValue"><a href="#ã€-ã€SameValue" class="headerlink" title="==ã€===ã€SameValue"></a><code>==</code>ã€<code>===</code>ã€SameValue</h2><table><thead><tr><th></th><th>&#x3D;&#x3D;</th><th>&#x3D;&#x3D;&#x3D;</th><th>SameValueï¼ˆObject.isï¼‰</th></tr></thead><tbody><tr><td><code>NaN</code></td><td><code>NaN == NaN</code> <code>false</code></td><td><code>NaN === NaN</code> <code>false</code></td><td><code>Object.is(NaN, NaN)</code> <code>true</code></td></tr><tr><td><code>0</code>ã€<code>-0</code></td><td><code>0 == -0</code> <code>true</code></td><td><code>0 === -0</code> <code>true</code></td><td><code>Object.is(0, -0)</code> <code>false</code></td></tr></tbody></table><h2 id="SameValueZero"><a href="#SameValueZero" class="headerlink" title="SameValueZero"></a>SameValueZero</h2><p>ä½†æ˜¯ä½ åœ¨ä½¿ç”¨es6ä¸­æœ‰æ²¡æœ‰ç–‘æƒ‘è¿™ç§æƒ…å†µï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>()</span><br><span class="line">set.<span class="title function_">add</span>(<span class="number">0</span>)</span><br><span class="line">set.<span class="title function_">add</span>(<span class="title class_">NaN</span>)</span><br><span class="line">set.<span class="title function_">has</span>(-<span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line">set.<span class="title function_">has</span>(<span class="title class_">NaN</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯ä¸ä¸Šè¿°çš„ä¸‰ç§ç®—æ³•çš„è¡¨ç°å¤šä¸ä¸€æ ·ï¼Œè¿™å°±æ˜¯ç¬¬å››ç§æ¯”è¾ƒç®—æ³• SameValueZeroï¼Œå®ƒä¸ SameValue çš„åŒºåˆ«ä¸»è¦åœ¨äº <code>0</code> ä¸ <code>-0</code> æ˜¯å¦ç›¸ç­‰ã€‚</p><p>æ‰€ä»¥ä½ åœ¨å®è·µ <code>includes</code> æ–¹æ³•æ—¶ï¼Œé‡åˆ°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="number">0</span>, <span class="title class_">NaN</span>]</span><br><span class="line">array.<span class="title function_">includes</span>(-<span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line">array.<span class="title function_">includes</span>(<span class="title class_">NaN</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>å°±ä¸ç”¨å¤§æƒŠå°æ€ªäº†ï¼Œå› ä¸º <code>includes</code> å†…éƒ¨ä½¿ç”¨çš„æ¯”è¾ƒç®—æ³•å°±æ˜¯SameValueZeroã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript å¼‚æ­¥ç¼–ç¨‹</title>
      <link href="/60882b7c0e5d/"/>
      <url>/60882b7c0e5d/</url>
      
        <content type="html"><![CDATA[<p>å›´ç»•å¼‚æ­¥ç¼–ç¨‹é¢†åŸŸï¼Œç°ä»£è½¯ä»¶è®¾è®¡æ­£åœ¨åŠ é€Ÿæ—‹è½¬ï¼Œå°±ä¸ºäº†è®©ç¨‹åºåœ¨ä¸€ä¸ªæ—¶é—´å†…åšæ›´å¤šçš„äº‹æƒ…ã€‚å½“ä½ ä½¿ç”¨æ›´æ–°æ›´å¼ºå¤§çš„ API æ—¶ï¼Œä½ ä¼šå‘ç°åœ¨æ›´å¤šçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹æ˜¯å”¯ä¸€çš„é€”å¾„ã€‚ä»¥å‰å†™å¼‚æ­¥ä»£ç å¾ˆå›°éš¾ï¼Œç°åœ¨ä¹Ÿéœ€è¦ä½ æ¥é€‚åº”ï¼Œä½†æ˜¯å·²ç»å˜å®¹æ˜“äº†å¾ˆå¤šã€‚</p><h2 id="å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰"><a href="#å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰" class="headerlink" title="å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰"></a>å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰</h2><p>å›è°ƒå‡½æ•°æ˜¯å¼‚æ­¥æ“ä½œæœ€åŸºæœ¬çš„æ–¹æ³•ã€‚ä»¥ä¸‹ä»£ç å°±æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°çš„ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">ajax</span>(url, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¤„ç†é€»è¾‘</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å›è°ƒå‡½æ•°æœ‰ä¸€ä¸ªè‡´å‘½çš„å¼±ç‚¹ï¼Œå°±æ˜¯å®¹æ˜“å†™å‡ºå›è°ƒåœ°ç‹±ï¼ˆCallback hellï¼‰ã€‚å‡è®¾å¤šä¸ªè¯·æ±‚å­˜åœ¨ä¾èµ–æ€§ï¼Œä½ å¯èƒ½å°±ä¼šå†™å‡ºå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">ajax</span>(url, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¤„ç†é€»è¾‘</span></span><br><span class="line">  <span class="title function_">ajax</span>(url1, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="title function_">ajax</span>(url2, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// å¤„ç†é€»è¾‘</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å›è°ƒå‡½æ•°çš„ä¼˜ç‚¹æ˜¯ç®€å•ã€å®¹æ˜“ç†è§£å’Œå®ç°ï¼Œç¼ºç‚¹æ˜¯ä¸åˆ©äºä»£ç çš„é˜…è¯»å’Œç»´æŠ¤ï¼Œå„ä¸ªéƒ¨åˆ†ä¹‹é—´é«˜åº¦è€¦åˆï¼Œä½¿å¾—ç¨‹åºç»“æ„æ··ä¹±ã€æµç¨‹éš¾ä»¥è¿½è¸ªï¼ˆå°¤å…¶æ˜¯å¤šä¸ªå›è°ƒå‡½æ•°åµŒå¥—çš„æƒ…å†µï¼‰ï¼Œè€Œä¸”æ¯ä¸ªä»»åŠ¡åªèƒ½æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚æ­¤å¤–å®ƒä¸èƒ½ä½¿ç”¨ try catch æ•è·é”™è¯¯ï¼Œä¸èƒ½ç›´æ¥ returnã€‚</p><h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><h3 id="Promise-çŠ¶æ€"><a href="#Promise-çŠ¶æ€" class="headerlink" title="Promise çŠ¶æ€"></a>Promise çŠ¶æ€</h3><ul><li>pending: åˆå§‹çŠ¶æ€ï¼Œæ—¢ä¸æ˜¯æˆåŠŸï¼Œä¹Ÿä¸æ˜¯å¤±è´¥çŠ¶æ€ã€‚</li><li>fulfilled: æ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆã€‚</li><li>rejected: æ„å‘³ç€æ“ä½œå¤±è´¥ã€‚</li><li>Settled: Promise è¦ä¹ˆè¢«å®Œæˆï¼Œè¦ä¹ˆè¢«æ‹’ç»ã€‚Promise ä¸€æ—¦è¾¾æˆï¼Œå®ƒçš„çŠ¶æ€å°±ä¸å†æ”¹å˜ã€‚</li></ul><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>ES6 è§„å®šï¼ŒPromise å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Promise å®ä¾‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ... some code</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* å¼‚æ­¥æ“ä½œæˆåŠŸ */</span>)&#123;</span><br><span class="line">    <span class="title function_">resolve</span>(value)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="çŸ­è·¯ç‰¹æ€§"><a href="#çŸ­è·¯ç‰¹æ€§" class="headerlink" title="çŸ­è·¯ç‰¹æ€§"></a>çŸ­è·¯ç‰¹æ€§</h3><ul><li><code>Promise.all()</code>: å¦‚æœå‚æ•°ä¸­ promise æœ‰ä¸€ä¸ªå¤±è´¥ï¼ˆrejectedï¼‰ï¼Œæ­¤å®ä¾‹å›è°ƒå¤±è´¥ï¼ˆrejectï¼‰</li><li><code>Promise.race()</code>: å¦‚æœå‚æ•°ä¸­æŸä¸ª promise è§£å†³æˆ–æ‹’ç»ï¼Œè¿”å›çš„ promise å°±ä¼šè§£å†³æˆ–æ‹’ç»ã€‚</li></ul><h3 id="Promise-all-äº-Array-prototype-map"><a href="#Promise-all-äº-Array-prototype-map" class="headerlink" title="Promise.all äº Array.prototype.map"></a>Promise.all äº Array.prototype.map</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> urls = [<span class="string">&#x27;http://example.com/first.txt&#x27;</span>, <span class="string">&#x27;http://example.com/second.txt&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promises = urls.<span class="title function_">map</span>(<span class="function"><span class="params">url</span> =&gt;</span> <span class="title function_">downloadText</span>(url))</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>(promises).<span class="title function_">then</span>(<span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="Promise-allSettled"><a href="#Promise-allSettled" class="headerlink" title="Promise.allSettled()"></a>Promise.allSettled()</h3><p><code>Promise.allSettled</code> è¿™ä¸€ç‰¹æ€§æ˜¯ç”± Jason Williamsï¼ŒRobert Pamely å’Œ Mathias Bynens æå‡ºã€‚</p><p>å®ƒè¿”å›ä¸€ä¸ª Array çš„ Promiseï¼Œå…¶å…ƒç´ å…·æœ‰ä»¥ä¸‹ç±»å‹ç‰¹å¾ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">SettlementObject</span>&lt;T&gt; = <span class="title class_">FulfillmentObject</span>&lt;T&gt; | <span class="title class_">RejectionObject</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">FulfillmentObject</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="string">&#x27;fulfilled&#x27;</span></span><br><span class="line">  <span class="attr">value</span>: T</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">RejectionObject</span> &#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="string">&#x27;rejected&#x27;</span></span><br><span class="line">  <span class="attr">reason</span>: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react-native-scrollable-tab-view</title>
      <link href="/af0984676cf5/"/>
      <url>/af0984676cf5/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡é¦–å‘äº <a href="https://youngjuning.js.org/af0984676cf5">æ´›ç«¹çš„åšå®¢</a>ï¼Œæš‚æœªåŒæ­¥äºä»»ä½•å¹³å°ã€‚</p></blockquote><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add react-native-scrollable-tab-view</span><br><span class="line"><span class="comment"># support AndroidX</span></span><br><span class="line">$ yarn add @react-native-community/viewpager</span><br></pre></td></tr></table></figure><hr><h2 id="renderTabBar"><a href="#renderTabBar" class="headerlink" title="renderTabBar"></a>renderTabBar</h2><p>TabBar çš„æ ·å¼ï¼Œç³»ç»Ÿæä¾›äº†ä¸¤ç§é»˜è®¤çš„ï¼Œåˆ†åˆ«æ˜¯ <code>DefaultTabBar</code> å’Œ <code>ScrollableTabBar</code>ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªã€‚</p><h3 id="DefaultTabBar"><a href="#DefaultTabBar" class="headerlink" title="DefaultTabBar"></a>DefaultTabBar</h3><p>Tab ä¼šå¹³åˆ†åœ¨æ°´å¹³æ–¹å‘çš„ç©ºé—´</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Text</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ScrollableTabView</span>, &#123; <span class="title class_">DefaultTabBar</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native-scrollable-tab-view&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ScrollableTabView</span> <span class="attr">renderTabBar</span>=<span class="string">&#123;()</span> =&gt;</span> <span class="tag">&lt;<span class="name">DefaultTabBar</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span> <span class="attr">tabLabel</span>=<span class="string">&quot;Tab #1&quot;</span>&gt;</span>My<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span> <span class="attr">tabLabel</span>=<span class="string">&quot;Tab #2&quot;</span>&gt;</span>favorite<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span> <span class="attr">tabLabel</span>=<span class="string">&quot;Tab #3&quot;</span>&gt;</span>project<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ScrollableTabView</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ScrollableTabBar"><a href="#ScrollableTabBar" class="headerlink" title="ScrollableTabBar"></a>ScrollableTabBar</h3><p>Tab å¯ä»¥è¶…è¿‡å±å¹•èŒƒå›´ï¼Œæ»šåŠ¨å¯ä»¥æ˜¾ç¤º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Text</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ScrollableTabView</span>, &#123; <span class="title class_">ScrollableTabsExample</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native-scrollable-tab-view&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ScrollableTabView</span> <span class="attr">renderTabBar</span>=<span class="string">&#123;()</span> =&gt;</span> <span class="tag">&lt;<span class="name">ScrollableTabsExample</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span> <span class="attr">tabLabel</span>=<span class="string">&quot;Tab #1&quot;</span>&gt;</span>My<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span> <span class="attr">tabLabel</span>=<span class="string">&quot;Tab #2&quot;</span>&gt;</span>favorite<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Text</span> <span class="attr">tabLabel</span>=<span class="string">&quot;Tab #3&quot;</span>&gt;</span>project<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ScrollableTabView</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="children"><a href="#children" class="headerlink" title="children"></a>children</h3><p>è¡¨ç¤ºæ‰€æœ‰å­è§†å›¾çš„æ•°ç»„ï¼Œè¯·è®¾ç½® <code>tabLabel</code> å±æ€§ï¼Œä½ å¯ä»¥å®ç°ä¸€ä¸ªç®€å•åœ°åŒ…è£…ç»„ä»¶:</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Props</span> &#123;</span><br><span class="line">  <span class="attr">tabLabel</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ScrollableTabViewItem</span>: <span class="title class_">React</span>.<span class="property">SFC</span>&lt;<span class="title class_">Props</span>&gt; = <span class="function"><span class="params">props</span> =&gt;</span> <span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;props.children&#125;<span class="tag">&lt;/&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">ScrollableTabViewItem</span></span><br></pre></td></tr></table></figure><h3 id="onChangeTab"><a href="#onChangeTab" class="headerlink" title="onChangeTab"></a>onChangeTab</h3><p>Tab åˆ‡æ¢ä¹‹åä¼šè§¦å‘æ­¤æ–¹æ³•ï¼ŒåŒ…å«ä¸€ä¸ªå‚æ•°ï¼ˆ<code>Object</code>ç±»å‹ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸¤ä¸ªå‚æ•°</p><ul><li><code>i</code>: è¢«é€‰ä¸­çš„ Tab çš„ä¸‹æ ‡ï¼ˆä» 0 å¼€å§‹ï¼‰</li><li><code>ref</code>: è¢«é€‰ä¸­çš„ Tab å¯¹è±¡ï¼ˆåŸºæœ¬ç”¨ä¸åˆ°ï¼‰</li></ul><h2 id="å…¶ä»–-Props"><a href="#å…¶ä»–-Props" class="headerlink" title="å…¶ä»– Props"></a>å…¶ä»– Props</h2><ul><li><code>tabBarPosition</code>(String) é»˜è®¤å€¼ <code>&#39;top&#39;</code><ul><li><code>top</code>ï¼šä½äºå±å¹•é¡¶éƒ¨</li><li><code>bottom</code>ï¼šä½äºå±å¹•åº•éƒ¨</li><li><code>overlayTop</code>ï¼šä½äºå±å¹•é¡¶éƒ¨ï¼Œæ‚¬æµ®åœ¨å†…å®¹è§†å›¾ä¹‹ä¸Šï¼ˆçœ‹é¢œè‰²åŒºåˆ†ï¼šè§†å›¾æœ‰é¢œè‰²ï¼ŒTab æ æ²¡æœ‰é¢œè‰²ï¼‰</li><li><code>overlayBottom</code>ï¼šä½äºå±å¹•åº•éƒ¨ï¼Œæ‚¬æµ®åœ¨å†…å®¹è§†å›¾ä¹‹ä¸Šï¼ˆçœ‹é¢œè‰²åŒºåˆ†ï¼šè§†å›¾æœ‰é¢œè‰²ï¼ŒTab æ æ²¡æœ‰é¢œè‰²ï¼‰</li></ul></li><li><code>onScroll</code> (Function): è§†å›¾æ­£åœ¨æ»‘åŠ¨çš„æ—¶å€™è§¦å‘æ­¤æ–¹æ³•ï¼ŒåŒ…å«ä¸€ä¸ª Float ç±»å‹çš„æ•°å­—ï¼ŒèŒƒå›´æ˜¯<code>[0, tabæ•°é‡-1]</code></li><li><code>locked</code>(Bool): è¡¨ç¤ºæ‰‹æŒ‡æ˜¯å¦èƒ½æ‹–åŠ¨è§†å›¾ï¼Œé»˜è®¤ä¸º <code>false</code>ï¼ˆè¡¨ç¤ºå¯ä»¥æ‹–åŠ¨ï¼‰ã€‚è®¾ä¸º <code>true</code> çš„è¯ï¼Œæˆ‘ä»¬åªèƒ½â€œç‚¹å‡»â€Tab æ¥åˆ‡æ¢è§†å›¾ã€‚</li><li><code>initialPage</code>(Integer): åˆå§‹åŒ–æ—¶è¢«é€‰ä¸­çš„ Tab ä¸‹æ ‡ï¼Œé»˜è®¤æ˜¯ 0ï¼ˆå³ç¬¬ä¸€é¡µï¼‰</li><li><code>tabBarUnderlineStyle</code>(style): è®¾ç½® <code>DefaultTabBar</code> å’Œ<code>ScrollableTabBarTab</code> é€‰ä¸­æ—¶ä¸‹æ–¹æ¨ªçº¿çš„æ ·å¼</li><li><code>tabBarBackgroundColor</code>(String): è®¾ç½®æ•´ä¸ª Tab è¿™ä¸€æ çš„èƒŒæ™¯é¢œè‰²</li><li><code>tabBarActiveTextColor</code>(String): è®¾ç½®é€‰ä¸­ Tab çš„æ–‡å­—é¢œè‰²</li><li><code>tabBarInactiveTextColor(String)</code>: è®¾ç½®æœªé€‰ä¸­ Tab çš„æ–‡å­—é¢œè‰²</li><li><code>tabBarTextStyle(Object)</code>: è®¾ç½® Tab æ–‡å­—çš„æ ·å¼ï¼Œæ¯”å¦‚å­—å·ã€å­—ä½“ç­‰</li><li><code>style</code>: ç³»ç»Ÿ View éƒ½æ‹¥æœ‰çš„å±æ€§ï¼ŒåŸºæœ¬ä¸ä¼šæ¶‰åŠåˆ°ã€‚</li><li><code>contentProps</code>: è¿™é‡Œè¦ç¨å¾®è¯´ä¸‹ react-native-scrollable-tab-view çš„å®ç°ï¼Œå…¶å®åœ¨ Android å¹³å°åº•å±‚ç”¨çš„æ˜¯ <code>ViewPagerAndroid</code>ï¼ŒiOS å¹³å°ç”¨çš„æ˜¯ <code>ScrollView</code>ã€‚è¿™ä¸ªå±æ€§çš„æ„ä¹‰æ˜¯ï¼šæ¯”å¦‚æˆ‘ä»¬è®¾ç½®äº†æŸä¸ªå±æ€§ï¼Œæœ€åè¿™ä¸ªå±æ€§ä¼šè¢«åº”ç”¨åœ¨ <code>ScrollView</code>&#x2F;<code>ViewPagerAndroid</code>ï¼Œè¿™æ ·ä¼šè¦†ç›–åº“é‡Œé¢é»˜è®¤çš„ï¼Œé€šå¸¸å®˜æ–¹ä¸å»ºè®®æˆ‘ä»¬å»ä½¿ç”¨ã€‚</li><li><code>scrollWithoutAnimation</code>(Boolï¼Œé»˜è®¤ä¸º <code>false</code>): è®¾ç½®â€œç‚¹å‡»â€Tab æ—¶ï¼Œè§†å›¾åˆ‡æ¢æ˜¯å¦æœ‰åŠ¨ç”»ï¼Œé»˜è®¤ä¸º <code>false</code>ï¼ˆå³ï¼šæœ‰åŠ¨ç”»æ•ˆæœï¼‰ã€‚</li><li><code>prerenderingSiblingsNumber</code> (Integer): é¢„åŠ è½½ç›¸è¿‘çš„å…„å¼ŸèŠ‚ç‚¹æ•°é‡ï¼Œ<code>Infinity</code> è¡¨ç¤ºæ¸²æŸ“æ‰€æœ‰çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œ é»˜è®¤å€¼æ˜¯ <code>0</code> è¡¨ç¤ºæ¸²æŸ“å½“å‰é¡µé¢</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> æ–‡æ¡£ </tag>
            
            <tag> ç¿»è¯‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ React Native ä¸­ä½¿ç”¨ Mobx</title>
      <link href="/581baf20cc1c/"/>
      <url>/581baf20cc1c/</url>
      
        <content type="html"><![CDATA[<p>Mobx æ˜¯ç®€å•ã€å¯æ‰©å±•çš„çŠ¶æ€ç®¡ç†ï¼ŒReact å’Œ MobX æ˜¯ä¸€å¯¹å¼ºåŠ›ç»„åˆã€‚React é€šè¿‡æä¾›æœºåˆ¶æŠŠåº”ç”¨çŠ¶æ€è½¬æ¢ä¸ºå¯æ¸²æŸ“ç»„ä»¶æ ‘å¹¶å¯¹å…¶è¿›è¡Œæ¸²æŸ“ã€‚è€Œ MobX æä¾›æœºåˆ¶æ¥å­˜å‚¨å’Œæ›´æ–°åº”ç”¨çŠ¶æ€ä¾› React ä½¿ç”¨ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add mobx</span><br><span class="line"><span class="comment"># React ç»‘å®šåº“</span></span><br><span class="line">$ yarn add mobx-react</span><br></pre></td></tr></table></figure><h2 id="å¯ç”¨è£…é¥°å™¨è¯­æ³•"><a href="#å¯ç”¨è£…é¥°å™¨è¯­æ³•" class="headerlink" title="å¯ç”¨è£…é¥°å™¨è¯­æ³•"></a>å¯ç”¨è£…é¥°å™¨è¯­æ³•</h2><h3 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h3><p>åœ¨ <code>tsconfig.json</code> ä¸­å¯ç”¨ç¼–è¯‘å™¨é€‰é¡¹ <code>&quot;experimentalDecorators&quot;: true</code> ã€‚</p><h3 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h3><p>åœ¨ Babel ä¸­é…ç½® MobX çš„æ–¹å¼æ˜¯ä½¿ç”¨ mobx presetï¼Œè¿™ç§æ–¹å¼æ›´æ–¹ä¾¿ï¼Œå…¶ä¸­åŒ…å«äº†è£…é¥°å™¨åŠå…¶ä»–å‡ ä¸ªç»å¸¸ä¸ mobx ä¸€èµ·ä½¿ç”¨çš„æ’ä»¶:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add babel-preset-mobx -D</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [<span class="string">&#x27;module:metro-react-native-babel-preset&#x27;</span>, <span class="string">&#x27;mobx&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h2><h3 id="observable-å¯è§‚å¯Ÿçš„çŠ¶æ€"><a href="#observable-å¯è§‚å¯Ÿçš„çŠ¶æ€" class="headerlink" title="@observable: å¯è§‚å¯Ÿçš„çŠ¶æ€"></a><code>@observable</code>: å¯è§‚å¯Ÿçš„çŠ¶æ€</h3><p>è£…é¥°å™¨å¯ä»¥åœ¨ ES7 æˆ–è€… TypeScript ç±»å±æ€§ä¸­å±æ€§ä½¿ç”¨ï¼Œå°†å…¶è½¬æ¢æˆå¯è§‚å¯Ÿçš„ã€‚ <code>@observable</code> å¯ä»¥åœ¨å®ä¾‹å­—æ®µå’Œå±æ€§ <code>getter</code> ä¸Šä½¿ç”¨ã€‚ å¯¹äºå¯¹è±¡çš„å“ªéƒ¨åˆ†éœ€è¦æˆä¸ºå¯è§‚å¯Ÿçš„ï¼Œ<code>@observable</code> æä¾›äº†ç»†ç²’åº¦çš„æ§åˆ¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OrderLine</span> &#123;</span><br><span class="line">  @observable price = <span class="number">0</span></span><br><span class="line">  @observable amount = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  @computed <span class="keyword">get</span> <span class="title function_">total</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">price</span> * <span class="variable language_">this</span>.<span class="property">amount</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="computed-è®¡ç®—å€¼"><a href="#computed-è®¡ç®—å€¼" class="headerlink" title="@computed: è®¡ç®—å€¼"></a><code>@computed</code>: è®¡ç®—å€¼</h3><blockquote><p>é»„é‡‘æ³•åˆ™: å¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªåŸºäºå½“å‰çŠ¶æ€çš„å€¼æ—¶ï¼Œè¯·ä½¿ç”¨ <code>computed</code>ã€‚</p></blockquote><p>è®¡ç®—å€¼(computed values)æ˜¯å¯ä»¥æ ¹æ®ç°æœ‰çš„çŠ¶æ€æˆ–å…¶å®ƒè®¡ç®—å€¼è¡ç”Ÿå‡ºçš„å€¼ã€‚ æ¦‚å¿µä¸Šæ¥è¯´ï¼Œå®ƒä»¬ä¸ excel è¡¨æ ¼ä¸­çš„å…¬å¼ååˆ†ç›¸ä¼¼ã€‚ ä¸è¦ä½ä¼°è®¡ç®—å€¼ï¼Œå› ä¸ºå®ƒä»¬æœ‰åŠ©äºä½¿å®é™…å¯ä¿®æ”¹çš„çŠ¶æ€å°½å¯èƒ½çš„å°ã€‚ æ­¤å¤–è®¡ç®—å€¼è¿˜æ˜¯é«˜åº¦ä¼˜åŒ–è¿‡çš„ï¼Œæ‰€ä»¥å°½å¯èƒ½çš„å¤šä½¿ç”¨å®ƒä»¬ã€‚</p><p>ä¸è¦æŠŠ <code>computed</code> å’Œ <code>autorun</code> ææ··ã€‚å®ƒä»¬éƒ½æ˜¯å“åº”å¼è°ƒç”¨çš„è¡¨è¾¾å¼ï¼Œä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³å“åº”å¼çš„äº§ç”Ÿä¸€ä¸ªå¯ä»¥è¢«å…¶å®ƒ <code>observer</code> ä½¿ç”¨çš„å€¼ï¼Œè¯·ä½¿ç”¨ <code>@computed</code>ï¼Œå¦‚æœä½ ä¸æƒ³äº§ç”Ÿä¸€ä¸ªæ–°å€¼ï¼Œè€Œæƒ³è¦è¾¾åˆ°ä¸€ä¸ªæ•ˆæœï¼Œè¯·ä½¿ç”¨ <code>autorun</code>ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œæ•ˆæœæ˜¯åƒæ‰“å°æ—¥å¿—ã€å‘èµ·ç½‘ç»œè¯·æ±‚ç­‰è¿™æ ·å‘½ä»¤å¼çš„å‰¯ä½œç”¨ã€‚</p><h3 id="action-ä¿®æ”¹å¯è§‚å¯ŸçŠ¶æ€"><a href="#action-ä¿®æ”¹å¯è§‚å¯ŸçŠ¶æ€" class="headerlink" title="@action: ä¿®æ”¹å¯è§‚å¯ŸçŠ¶æ€"></a><code>@action</code>: ä¿®æ”¹å¯è§‚å¯ŸçŠ¶æ€</h3><p>åªæœ‰åœ¨ä¸¥æ ¼æ¨¡å¼(é»˜è®¤æ˜¯ä¸å¯ç”¨)ä¸‹ä½¿ç”¨ MobX æ—¶æ‰éœ€è¦ <code>action</code> åŒ…è£…ã€‚ å»ºè®®ä½¿ç”¨ <code>action</code>ï¼Œå› ä¸ºå®ƒå°†å¸®åŠ©ä½ æ›´å¥½åœ°ç»„ç»‡åº”ç”¨ï¼Œå¹¶è¡¨è¾¾å‡ºä¸€ä¸ªå‡½æ•°ä¿®æ”¹çŠ¶æ€çš„æ„å›¾ã€‚ åŒæ—¶,</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Ticker</span> &#123;</span><br><span class="line">  @observable tick = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  @action increment = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">tick</span>++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ticker = <span class="keyword">new</span> <span class="title class_">Ticker</span>()</span><br><span class="line"><span class="built_in">setInterval</span>(ticker.<span class="property">increment</span>, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure><h3 id="runInAction-å¼‚æ­¥-Action"><a href="#runInAction-å¼‚æ­¥-Action" class="headerlink" title="runInAction: å¼‚æ­¥ Action"></a><code>runInAction</code>: å¼‚æ­¥ Action</h3><p><code>runInAction</code> æ˜¯ä¸ªç®€å•çš„å·¥å…·å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä»£ç å—å¹¶åœ¨(å¼‚æ­¥çš„)åŠ¨ä½œä¸­æ‰§è¡Œã€‚è¿™å¯¹äºå³æ—¶åˆ›å»ºå’Œæ‰§è¡ŒåŠ¨ä½œéå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚åœ¨å¼‚æ­¥è¿‡ç¨‹ä¸­ã€‚<code>runInAction(f)</code> æ˜¯ <code>action(f)()</code> çš„è¯­æ³•ç³–ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Store</span> &#123;</span><br><span class="line">  @observable data = []</span><br><span class="line"></span><br><span class="line">  asyncAction = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> getData = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(&#123; <span class="attr">data</span>: [] &#125;)</span><br><span class="line">      &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> &#123; data &#125; = <span class="keyword">await</span> <span class="title function_">getData</span>()</span><br><span class="line">    <span class="title function_">runInAction</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">data</span> = data</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><ul><li>ä¸è¦ä¼ é€’åŸºç¡€ç±»å‹å€¼ç»™å­ç»„ä»¶ï¼Œä½¿ç”¨å¯¹è±¡åŒ…è£¹æˆ–å°†æ•´ä¸ª store ä¼ ç»™å­ç»„ä»¶</li><li>åœ¨æ‰€æœ‰æ¸²æŸ“ <code>@observable</code> çš„ç»„ä»¶ä¸Šä½¿ç”¨ <code>@observer</code></li><li>ä¸è¦æ‹·è´å¯è§‚å¯Ÿå±æ€§å¹¶å­˜å‚¨åœ¨æœ¬åœ°</li><li>Render å›è°ƒå‡½æ•°ä¸æ˜¯ render æ–¹æ³•çš„ä¸€éƒ¨åˆ†</li><li>é—´æ¥å¼•ç”¨å€¼å°½å¯èƒ½æ™šçš„ä½¿ç”¨</li><li>ä½¿ç”¨å¤§é‡çš„å°ç»„ä»¶</li><li>åœ¨ä¸“ç”¨ç»„ä»¶ä¸­æ¸²æŸ“åˆ—è¡¨é¡¹</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> React Native </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React Native </tag>
            
            <tag> Mobx </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
