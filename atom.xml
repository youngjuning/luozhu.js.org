<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ´›ç«¹çš„åšå®¢</title>
  
  <subtitle>çœŸç†æ— ç©·ï¼Œä¸€å¯¸æ¬¢å–œã€‚</subtitle>
  <link href="https://youngjuning.js.org/atom.xml" rel="self"/>
  
  <link href="https://youngjuning.js.org/"/>
  <updated>2023-03-05T10:40:29.054Z</updated>
  <id>https://youngjuning.js.org/</id>
  
  <author>
    <name>æ´›ç«¹</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>React æ€§èƒ½ä¼˜åŒ–å®è·µ</title>
    <link href="https://youngjuning.js.org/8132b809f088/"/>
    <id>https://youngjuning.js.org/8132b809f088/</id>
    <published>2023-03-05T09:22:41.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<h1 id="React-Profiler"><a href="#React-Profiler" class="headerlink" title="React Profiler"></a>React Profiler</h1><p>React 16.5 æ·»åŠ äº†å¯¹å¼€å‘è€…å·¥å…·çš„ Profiler æ’ä»¶çš„æ”¯æŒã€‚è¯¥æ’ä»¶ä½¿ç”¨äº† React çš„ Profiler API æ¥æ”¶é›†æ‰€æœ‰ç»„ä»¶æ¸²æŸ“çš„è€—æ—¶ï¼Œç›®çš„æ˜¯ä¸ºäº†æ‰¾å‡º React åº”ç”¨ç¨‹åºçš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p>è¿™ä¸ªâ€œProfilerâ€é¢æ¿åˆå§‹ä¸ºç©ºï¼Œä½ å¯ä»¥ç‚¹å‡» record æŒ‰é’®å¼€å§‹åˆ†æï¼š</p><p><img src="https://zh-hans.reactjs.org/static/bae8d10e17f06eeb8c512c91c0153cff/ad997/start-profiling.png"></p><p>å½“ä½ å¼€å§‹è®°å½•ä¹‹åï¼Œå¼€å‘è€…å·¥å…·å°†åœ¨æ¯æ¬¡åº”ç”¨ç¨‹åºæ¸²æŸ“æ—¶è‡ªåŠ¨æ”¶é›†æ€§èƒ½æ•°æ®ã€‚ ä½ å¯ä»¥å’Œå¹³å¸¸ä¸€æ ·ä½¿ç”¨ä½ çš„åº”ç”¨ç¨‹åºï¼Œ å½“ä½ å®Œæˆåˆ†æä¹‹åï¼Œè¯·ç‚¹å‡»â€œStopâ€æŒ‰é’®ã€‚</p><p><img src="https://zh-hans.reactjs.org/static/45619de03bed468869f7a0878f220586/ad997/stop-profiling.png"></p><h1 id="ä¼˜åŒ–æ³•åˆ™"><a href="#ä¼˜åŒ–æ³•åˆ™" class="headerlink" title="ä¼˜åŒ–æ³•åˆ™"></a>ä¼˜åŒ–æ³•åˆ™</h1><ul><li>æ³•åˆ™ä¸€ï¼šåŠ¨é™åˆ†ç¦»ï¼Œå°†å˜çš„éƒ¨åˆ†ä¸ä¸å˜çš„éƒ¨åˆ†åˆ†ç¦»ã€‚</li><li>æ³•åˆ™äºŒï¼šç¼“å­˜ï¼Œå¤æ‚è®¡ç®—å’Œæœ‰æ˜‚è´µæ¶ˆè€—çš„ç»„ä»¶ memo åŒ–ï¼Œæ¯”å¦‚ React çš„ useMemoã€useCallbackï¼ŒRedux çš„ useSelectorã€‚</li></ul><p>ä¸‹é¢æˆ‘ä»¬å°†æ ¹æ®è¿™äº›æ³•åˆ™ç»“åˆå®é™…å¼€å‘ä¸­æ¡ˆä¾‹è¿›è¡Œåˆ†æã€‚</p><h1 id="æ¡ˆä¾‹ä¸€"><a href="#æ¡ˆä¾‹ä¸€" class="headerlink" title="æ¡ˆä¾‹ä¸€"></a>æ¡ˆä¾‹ä¸€</h1><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå½“ state æ›´æ–°åï¼Œæ•´ä¸ªç»„ä»¶ä»¥åŠå®ƒçš„å­ç»„ä»¶éƒ½ä¼šé‡æ–°æ›´æ–°ï¼Œå°½ç®¡å­ç»„ä»¶æ²¡æœ‰ä¾èµ–ä»»ä½• stateï¼Œä¸‹é¢çš„ä¾‹å­å°±èƒ½å¾ˆå¥½åœ°å±•ç¤ºè¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params">props: &#123; count: <span class="built_in">number</span>&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;props.count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªæ˜¾ç¤ºéšæœºæ•°çš„ç»„ä»¶å’Œä¸€ä¸ªä¾èµ– count çŠ¶æ€çš„æ•°å­—æ˜¾ç¤ºç»„ä»¶ï¼Œä½¿ç”¨ React Profiler å·¥å…·åˆ†æå¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/09/25/zKn9HslamJi6Ro5.png"></p><p>å°±åƒé¢„æœŸçš„é‚£æ ·ï¼ŒAppã€Count å’Œ Random ç»„ä»¶éƒ½æ›´æ–°äº†ï¼Œä»å·¥å…·ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒä»¬æ›´æ–°çš„åŸå› ï¼š</p><ul><li>Appï¼šHook 1 changed.</li><li>Countï¼šProps changedï¼ˆcountï¼‰.</li><li>Randomï¼šThe parent component rendered.</li></ul><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œè¾¹é™¤äº† Count æ˜¯å› ä¸º count æ›´æ–°ä¹‹å¤–ï¼Œå…¶ä»–ç»„ä»¶çš„æ›´æ–°éƒ½æ˜¯è¢«æ— è¾œç‰µè¿çš„ã€‚æ ¹æ®æ³•åˆ™ä¸€ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å°† Count ç»„ä»¶å’Œå®ƒä¾èµ–çš„çŠ¶æ€å°è£…èµ·æ¥ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>ä»ä¸‹å›¾ Profiler åˆ†æå¯ä»¥çœ‹åˆ°å½“ count æ›´æ–°æ—¶ï¼Œåªæœ‰ Count ç»„ä»¶æ›´æ–°äº†ã€‚</p><p><img src="https://s2.loli.net/2022/09/25/YheAM9ZuviaJDmo.png"></p><p>ä¸Šé¢çš„ç¤ºä¾‹å¤ªè¿‡ç†æƒ³åŒ–ï¼Œå¤§éƒ¨åˆ†æ—¶å€™ï¼Œè´Ÿè´£æ›´æ–°çŠ¶æ€çš„ç»„ä»¶å’Œè´Ÿè´£å±•ç¤ºçŠ¶æ€çš„ç»„ä»¶å¯èƒ½å¹¶ä¸åœ¨ä¸€èµ·ï¼Œä¹Ÿå°±æ²¡åŠæ³•æŠ½ç¦»åŠ¨æ€ç»„ä»¶ã€‚æ¯”å¦‚æˆ‘ä»¬å°†ç¤ºä¾‹ä¸­çš„ç»„ä»¶ä½ç½®åšä¸‹è°ƒæ•´ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦æ³•åˆ™äºŒæ¥å¸®åŠ©æˆ‘ä»¬ï¼Œæœ€ç®€å•çš„æ˜¯é€šè¿‡ props.children å±æ€§æ¥å®ç°ï¼ŒåŸç†ä¸Šæ˜¯ä¸€ç§ä¾é ç¼“å­˜çš„ bailout ä¼˜åŒ–æ–¹æ¡ˆã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">CountProps</span> &#123;</span><br><span class="line">  children?: <span class="variable constant_">JSX</span>.<span class="property">Element</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params">props: CountProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;props.children&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Count</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h1 id="bailout"><a href="#bailout" class="headerlink" title="bailout"></a>bailout</h1><p>æƒ³è¦è§£é‡Šä¸ºä»€ä¹ˆæ¡ˆä¾‹ä¸€ä¸­ä½¿ç”¨ props.children å¯ä»¥è§£å†³é‡å¤æ¸²æŸ“ï¼Œå°±è¦äº†è§£ä¸€ä¸‹ React bailout æœºåˆ¶ã€‚</p><p>bailoutï¼ˆbail out of re-renderingï¼‰å¯ä»¥ç®€å•ç†è§£ä¸ºæ˜¯å¦é‡æ–°æ¸²æŸ“ã€‚</p><p>è¦è§¦å‘ bailout å‡½æ•°ï¼Œéœ€è¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ol><li>oldProps &#x3D;&#x3D;&#x3D; newProps å¹¶ä¸” Context æ²¡æœ‰æ”¹å˜</li><li>!includesSomeLane(renderLanes, updateLanes)</li></ol><p>å½“å‰ fiber ä¸Šæ˜¯å¦å­˜åœ¨æ›´æ–°ï¼Œå¦‚æœå­˜åœ¨é‚£ä¹ˆæ›´æ–°çš„ä¼˜å…ˆçº§æ˜¯å¦å’Œæœ¬æ¬¡æ•´æ£µ Fiber æ ‘è°ƒåº¦çš„ä¼˜å…ˆçº§ä¸€è‡´ï¼Ÿå¦‚æœä¸€è‡´ä»£è¡¨è¯¥ç»„ä»¶ä¸Šå­˜åœ¨æ›´æ–°ï¼Œéœ€è¦èµ° render é€»è¾‘ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// beginWork å‡½æ•°</span></span><br><span class="line"><span class="keyword">if</span> (current !== <span class="literal">null</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> oldProps = current.<span class="property">memoizedProps</span>;</span><br><span class="line">  <span class="keyword">const</span> newProps = workInProgress.<span class="property">pendingProps</span>;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    oldProps !== newProps ||</span><br><span class="line">    <span class="title function_">hasLegacyContextChanged</span>()</span><br><span class="line">  ) &#123;</span><br><span class="line">    didReceiveUpdate = <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="title function_">includesSomeLane</span>(renderLanes, updateLanes)) &#123;</span><br><span class="line">    didReceiveUpdate = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// å‘½ä¸­ bailoutOnAlreadyFinishedWork</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">bailoutOnAlreadyFinishedWork</span>(current, workInProgress, renderLanes);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bailout å‡½æ•°é€»è¾‘å¤§è‡´æ˜¯ï¼šå°½é‡å¤ç”¨ fiberï¼Œä¸è¿›è¡Œ renderã€‚fiber å¤ç”¨ï¼Œåˆ¤æ–­ fiber çš„å­æ ‘æ˜¯å¦æœ‰ workã€‚æœ‰ï¼Œè¿”å› childï¼Œç»§ç»­éå†å­æ ‘ã€‚æ— ï¼Œè¿”å› nullï¼Œè·³è¿‡å­æ ‘ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bailoutOnAlreadyFinishedWork å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bailoutOnAlreadyFinishedWork</span>(<span class="params"></span></span><br><span class="line"><span class="params">  current: Fiber | <span class="literal">null</span>,</span></span><br><span class="line"><span class="params">  workInProgress: Fiber,</span></span><br><span class="line"><span class="params">  renderLanes: Lanes,</span></span><br><span class="line"><span class="params"></span>): <span class="title class_">Fiber</span> | <span class="literal">null</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (current !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// é‡ç”¨ä»¥å‰çš„ context ä¾èµ–å…³ç³»</span></span><br><span class="line">    workInProgress.<span class="property">dependencies</span> = current.<span class="property">dependencies</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ£€æµ‹å­æ ‘(childLanes)æ˜¯å¦æœ‰ work</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">includesSomeLane</span>(renderLanes, workInProgress.<span class="property">childLanes</span>)) &#123;</span><br><span class="line">    <span class="comment">//æ— ï¼Œè·³è¿‡å­æ ‘</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è™½ç„¶ fiber æ²¡æœ‰ workï¼Œä½†æ˜¯å®ƒçš„å­æ ‘æœ‰ï¼Œå…‹éš†å­æ ‘çš„ fiber ç„¶åç»§ç»­æ£€æŸ¥</span></span><br><span class="line">  <span class="title function_">cloneChildFibers</span>(current, workInProgress);</span><br><span class="line">  <span class="keyword">return</span> workInProgress.<span class="property">child</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹ä¸€ä¸­ï¼Œç”±äº children Random ç»„ä»¶çš„ props æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¹¶ä¸” lanes ä¹Ÿä¸åœ¨ renderLanes ä¸Š ï¼ŒDiff ç»„ä»¶å‘½ä¸­ bailoutOnAlreadyFinishedWorkã€‚</p><p>lane æ˜¯ React è°ƒåº¦æ¨¡å‹ä¸­çš„ä¼˜å…ˆçº§æ¨¡å‹ã€‚æƒ³è±¡ä¸€ä¸‹ä¸åŒçš„èµ›è½¦ç–¾é©°åœ¨ä¸åŒçš„èµ›é“ã€‚å†…åœˆçš„èµ›é“æ€»é•¿åº¦æ›´çŸ­ï¼Œå¤–åœˆæ›´é•¿ã€‚æŸå‡ ä¸ªä¸´è¿‘çš„èµ›é“çš„é•¿åº¦å¯ä»¥çœ‹ä½œå·®ä¸å¤šé•¿ã€‚</p><p>lane æ¨¡å‹å€Ÿé‰´äº†åŒæ ·çš„æ¦‚å¿µï¼Œä½¿ç”¨ 31 ä½çš„äºŒè¿›åˆ¶è¡¨ç¤º 31 æ¡èµ›é“ï¼Œä½æ•°è¶Šå°çš„èµ›é“ä¼˜å…ˆçº§è¶Šé«˜ï¼ŒæŸäº›ç›¸é‚»çš„èµ›é“æ‹¥æœ‰ç›¸åŒä¼˜å…ˆçº§ã€‚</p><h1 id="æ¡ˆä¾‹äºŒ"><a href="#æ¡ˆä¾‹äºŒ" class="headerlink" title="æ¡ˆä¾‹äºŒ"></a>æ¡ˆä¾‹äºŒ</h1><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> countContext = <span class="title class_">React</span>.<span class="property">createContext</span>&lt;<span class="built_in">number</span>&gt;(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CountProvider</span> = countContext.<span class="property">Provider</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">CountProps</span> &#123;</span><br><span class="line">  children?: <span class="variable constant_">JSX</span>.<span class="property">Element</span></span><br><span class="line">  <span class="attr">onAdd</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">  <span class="attr">onMinus</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params">props: CountProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">useContext</span>(countContext);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;props?.onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;props?.onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">CountProvider</span> <span class="attr">value</span>=<span class="string">&#123;count&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Count</span> <span class="attr">onAdd</span>=<span class="string">&#123;onAdd&#125;</span> <span class="attr">onMinus</span>=<span class="string">&#123;onMinus&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">CountProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>è¯¥æ¡ˆä¾‹ä¸­æˆ‘ä»¬å¼•å…¥äº† Contextï¼Œå½“ context çš„ value æ”¹å˜æ—¶ï¼Œ</p><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><ul><li><a href="https://zh-hans.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html">React Profiler ä»‹ç»</a></li><li><a href="https://blog.wuct.me/react-internal-reconciliation-bailout-587695eb05a8?gi=c4bc84e7c1df">æ·±å…¥ React Reconciliation Bailout æ©Ÿåˆ¶</a></li><li><a href="https://jishuin.proginn.com/p/763bfbd32552">æˆ‘åœ¨å¤§å‚å†™Reactå­¦åˆ°äº†ä»€ä¹ˆï¼Ÿæ€§èƒ½ä¼˜åŒ–ç¯‡</a></li><li><a href="https://juejin.cn/post/7090466770774917150">react æ€§èƒ½ä¼˜åŒ– - childrenå¦‚ä½•é¿å…ä¸å¿…è¦çš„æ¸²æŸ“</a></li><li><a href="https://juejin.cn/post/7092593300233781285#heading-4">React æ€§èƒ½ä¼˜åŒ–ï¼Œä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡</a></li></ul>]]></content>
    
    
    <summary type="html">React ç»„ä»¶æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæ˜¯å‡å°‘æ¸²æŸ“çœŸå® DOM èŠ‚ç‚¹çš„é¢‘ç‡ï¼Œå‡å°‘ VirtualDOM æ¯”å¯¹çš„é¢‘ç‡ã€‚</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="React" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/React/"/>
    
    
    <category term="React" scheme="https://youngjuning.js.org/tags/React/"/>
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://youngjuning.js.org/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    <category term="React.memo" scheme="https://youngjuning.js.org/tags/React-memo/"/>
    
    <category term="useMemo" scheme="https://youngjuning.js.org/tags/useMemo/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯ç»„ä»¶åŒ–å®æˆ˜ä¹‹ Button</title>
    <link href="https://youngjuning.js.org/f4ea430d1d6d/"/>
    <id>https://youngjuning.js.org/f4ea430d1d6d/</id>
    <published>2023-03-03T02:36:18.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>âš ï¸æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½</p></blockquote><blockquote><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<a href="https://youngjuning.js.org/">æ´›ç«¹ğŸ‹</a>ï¼Œä¸€åªä½åœ¨æ­åŸçš„æœ¨ç³»å‰ç«¯ğŸ§šğŸ»â€â™€ï¸ï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ğŸ“šï¼Œå¯ä»¥é€šè¿‡ç‚¹èµå¸®æˆ‘èšé›†çµåŠ›â­ï¸ã€‚</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ <a href="https://juejin.cn/post/6983854006124675108">ã€Šæ¯ä¸ªå‰ç«¯éƒ½åº”è¯¥æ‹¥æœ‰è‡ªå·±çš„ç»„ä»¶åº“,å°±åƒæ¯ä¸ªå¤å¤©éƒ½æœ‰è¥¿ç“œğŸ‰ã€‹</a> ä¸€æ–‡ä¸­ï¼Œæ´›ç«¹å¸¦é¢†å°é»‘ä»é›¶æ­å»ºäº†ä¸€ä¸ªç»„ä»¶åº“é¡¹ç›®ï¼Œå®Œæˆäº†é¡¹ç›®ç»“æ„ã€æ„å»ºã€æµ‹è¯•ã€æ–‡æ¡£ç­‰åŸºç¡€å·¥ç¨‹åŒ–å·¥ä½œå¹¶å®Œæˆäº†ç¬¬ä¸€ä¸ªç»„ä»¶ Iconã€‚æœ¬æœŸå»¶ç»­ä¸ŠæœŸçš„ç»„ä»¶å·¥ç¨‹åŒ–çš„ä¸»é¢˜ï¼Œå¤æ—¥ç‚çƒ­ï¼Œç‚¹ä¸Šä¸€æ¯æ¨æç”˜éœ²ï¼Œå’Œæ´›ç«¹èµ´ä¸€åœº Button å¼€å‘ä¹‹çº¦å§ã€‚èµ´çº¦åï¼Œä½ å°†ä¼šæ”¶è·ä»¥ä¸‹çš„å†…å®¹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58285f3cce144972b2ccb88e11efd73f~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>PSï¼šé…åˆ<a href="https://github.com/youngjuning/vant-react-native">ä»“åº“</a>å’Œ<a href="https://vant-react-native.js.org/">ç»„ä»¶åº“æ–‡æ¡£</a>é˜…è¯»æœ¬æ–‡æ•ˆæœæ›´ä½³å–²ï¼</p></blockquote><h2 id="Button-ä¸è®¾è®¡å¿ƒç†å­¦"><a href="#Button-ä¸è®¾è®¡å¿ƒç†å­¦" class="headerlink" title="Button ä¸è®¾è®¡å¿ƒç†å­¦"></a>Button ä¸è®¾è®¡å¿ƒç†å­¦</h2><p>ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œå…¥è¡Œè‡³ä»Šæ¥è§¦æœ€å¤šçš„å°±æ˜¯è®¾è®¡å¸ˆäº†ã€‚è€³æ¿¡ç›®æŸ“ä¸‹è™½è¯´æ²¡å­¦ä¼šä»€ä¹ˆè®¾è®¡å·¥å…·ï¼Œä½†æ˜¯å¯¹è®¾è®¡ä¸äººçš„å¿ƒç†æœ‰äº†ä¸€å®šè®¤è¯†ã€‚</p><p>æ´›ç«¹è®¤ä¸ºä»»ä½•äº‹ç‰©éƒ½ä¸å¯èƒ½å‡­ç©ºå‡ºç°ï¼Œè‡ªæœ‰å…¶ä¼ æ‰¿ã€‚ä½¿ç”¨å¹¿æ³›çš„åŸºç¡€ç•Œé¢å…ƒç´  Button ä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘ä»¬ç”Ÿæ´»ä¸­å°±æœ‰éšå¤„å¯è§çš„æŒ‰é’®ã€‚ä¸¾ä¸ªæ —å­ğŸŒ°ï¼Œæ¯å¤©ä¸Šç­ä¸‹ç­å¿…ç„¶è¦æŒ‰çš„ç”µæ¢¯æŒ‰é’®ã€æ‰‹æœºéŸ³é‡æŒ‰é’®ã€å°ç±³ 9 é¸¡è‚‹çš„å°çˆ±åŒå­¦å”¤èµ·æŒ‰é’®ã€‚è¦ææ¸…æ¥šä¸ºä»€ä¹ˆéœ€è¦æŒ‰é’®ï¼Œæˆ‘ä»¬æœ‰å¿…è¦æ¢ç©¶ä¸‹ç”Ÿæ´»ä¸­è¿™äº›æŒ‰é’®çš„ä½œç”¨ã€‚</p><h3 id="ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ"><a href="#ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ" class="headerlink" title="ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ"></a>ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ</h3><p>æƒ³è±¡ä¸€ä¸‹æŠŠé”®ç›˜æŒ‰é”®æ¢æˆè§¦æ‘¸å±ï¼Œä½ æœ€åœ¨ä¹çš„ä¸€å®šæ˜¯å®Œç¾è¿˜åŸç‰©ç†é”®çš„æ•²å‡»æ„Ÿï¼Œåƒæ´›ç«¹ç”¨æ‰‹æœºè™šæ‹Ÿé”®ç›˜å°±å–œæ¬¢è®¾ç½®æŒ‰é”®éœ‡åŠ¨å’ŒéŸ³æ•ˆã€‚é€šè¿‡æ‰“å‡»ï¼ˆç‚¹å‡»ï¼‰è·å¾—å¿«æ„Ÿæ˜¯è¾ƒä¸ºæ™®éçš„äººæ€§ã€‚æŒ‰é’®åœ¨æŒ‰ä¸‹ã€æ¾å¼€æ—¶æœ‰ä¸°å¯Œçš„è´¨æ„Ÿå’Œäº¤äº’æ„Ÿï¼Œå®Œç¾æ»¡è¶³äº†äººä»¬ç‚¹ä¸€ä¸‹çš„å¿«æ„Ÿã€‚</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/542a6bbb880e4594ae384ee0bd1e511d~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="ç°å®çš„å®ç”¨æ€§"><a href="#ç°å®çš„å®ç”¨æ€§" class="headerlink" title="ç°å®çš„å®ç”¨æ€§"></a>ç°å®çš„å®ç”¨æ€§</h3><p>ä» BB æœºåˆ°è¯ºåŸºäºšå†åˆ°å¦‚ä»Šçš„æ™ºèƒ½æœºï¼Œå®ä½“æŒ‰é’®å‰Šå‡åˆ°åªå‰©ä¸‹éŸ³é‡é”®å’Œå¼€å…³æœºé”®ã€‚æŒ‰é”®è™½ç„¶å…‰ç§ƒç§ƒæ²¡æœ‰ä»»ä½•æ ‡è¯†ï¼Œä½†æˆ‘ä»¬å°±æ˜¯çŸ¥é“å®ƒçš„åŠŸèƒ½ã€‚è¯•æƒ³ä¸€ä¸‹æ²¡æœ‰è¿™ä¸ªæ¥è‡ªè¿œå¤æ—¶ä»£çš„å¼€å…³é”®ï¼Œä½ æ‰‹é‡Œçš„æ‰‹æœºå°±æ˜¯ä¸€å—æ¿ç –ã€‚</p><h3 id="ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„"><a href="#ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„" class="headerlink" title="ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„"></a>ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„</h3><p>å°ç±³ 9 å•ç‹¬å”¤èµ·å°çˆ±åŒå­¦çš„æŒ‰é”®ç»å¸¸ä¼šè¢«è¯¯æŒ‰ï¼Œä¹‹å‰æˆ‘è¿˜ä¸ç†è§£è¿™ä¹ˆè ¢çš„è®¾è®¡çš„ç›®çš„ã€‚åœ¨ç®€å•ç ”ç©¶äº†ç‚¹è®¾è®¡å¿ƒç†å­¦æˆ‘æ˜ç™½äº†ã€‚å°çˆ±çš„è®¾è®¡è€…ä¸ºäº† äº§å“æ—¥æ´»å’Œ AI è®­ç»ƒå°±æ˜¯æ•…æ„è¿™ä¸ªè®¾è®¡çš„ã€‚</p><p>å°ç±³ 10 è™½ç„¶ç§»é™¤äº†å•ç‹¬çš„å”¤èµ·é”®ï¼Œå´æŠŠåŸæ¥çš„ç”µæºé”®æ”¹æˆäº†ä¸€é”®å¤šç”¨ã€‚æ¯æ¬¡æƒ³è¦é‡å¯æ‰‹æœºè¿˜å¾—å…ˆå”¤èµ·ä¸€ä¸‹å°çˆ±åŒå­¦ã€‚ä¸å¾—ä¸è¯´ï¼Œå°çˆ±åŒå­¦å°ç±³äº²å¥³å„¿ã€‚</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/633381b8c2c342ed94bf024dbc19cf76~tplv-k3u1fbpfcp-watermark.image"></p><p>åæ§½å½’åæ§½ï¼Œå°ç±³è¿™ä¸ªæŒ‰é’®ç¡®å®èµ·åˆ°äº†åŸ¹å…»ç”¨æˆ·ä¹ æƒ¯çš„ä»»åŠ¡ã€‚å½“ç”¨æˆ·çŸ¥æ‚‰æŸä¸ªæŒ‰é’®èƒ½æŒ‡å‘æŸä¸ªæ“ä½œï¼Œæˆ–è€…è·å–æŸç±»ä¿¡æ¯åï¼Œé•¿æ­¤ä»¥å¾€ç”¨æˆ·å°±ä¼šå½¢æˆä½¿ç”¨ä¹ æƒ¯ã€‚å¦‚æœæŸæ“ä½œèƒ½å¤Ÿä¸ºç”¨æˆ·å’Œå‚å•†æŒç»­å¸¦æ¥ä»·å€¼ï¼Œé‚£å°±å¯ä»¥è®©æŒ‰é’®çš„ä½ç½®æ›´åŠ é†’ç›®ï¼ŒæŒç»­åŸ¹å…»ç”¨æˆ·ç‚¹å‡»ä¹ æƒ¯ã€‚</p><h3 id="æŒ‡å¼•ç”¨æˆ·æ“ä½œ"><a href="#æŒ‡å¼•ç”¨æˆ·æ“ä½œ" class="headerlink" title="æŒ‡å¼•ç”¨æˆ·æ“ä½œ"></a>æŒ‡å¼•ç”¨æˆ·æ“ä½œ</h3><p>è¿™ä¸ªåœ¨ Web å¼€å‘ä¸­æ˜¯æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯ä¸ªå¯äº¤äº’é¡µé¢ä¸Šéƒ½æœ‰è¿™ç±»æŒ‰é’®çš„å‡ºç°ï¼Œç”¨æ¥æŒ‡å¼•ç”¨æˆ·ä¸‹ä¸€æ­¥è¯¥æ€ä¹ˆåšã€‚æ¯”å¦‚è¡¨å•çš„æäº¤å’Œé‡ç½®ã€‚</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2c2a8abbe84471f96a67e18196c53fb~tplv-k3u1fbpfcp-watermark.image"></p><p>è™½ç„¶æŒ‰é’®ä¹Ÿå¸¸ä½œä¸ºè¡¨å•å…ƒç´ ï¼Œä½†æ˜¯åŒºåˆ«äºå…¶ä»–è¡¨å•å…ƒç´ ï¼ŒæŒ‰é’®å› å…¶å¤©ç„¶åœ°è‡ªè¯´æ˜æ€§ï¼Œä¸éœ€è¦ Label å¯¹å…¶è¿›è¡Œè¾…åŠ©è¯´æ˜ï¼Œå•°å—¦è¿™ä¹ˆå¤šï¼Œæ˜å‹ä»¬åº”è¯¥åœ¨çœ‹åˆ°ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œåº”è¯¥ä¹Ÿä¼šæœ‰ä»è®¾è®¡ä¸Šå“é‰´çš„æ„è¯†äº†ï¼Œæ¬¢è¿å°†å¯¹ä¸‹å›¾çš„å“é‰´åœ¨è¯„è®ºåŒºå‘Šè¯‰æ´›ç«¹ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/88c6754b28984fc3866319c35790fc03~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="ç»„ä»¶ä¸»é¢˜åŒ–"><a href="#ç»„ä»¶ä¸»é¢˜åŒ–" class="headerlink" title="ç»„ä»¶ä¸»é¢˜åŒ–"></a>ç»„ä»¶ä¸»é¢˜åŒ–</h2><p>åœ¨å¼€å§‹å¼€å‘å…·ä½“ç»„ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆçº¦å®šå¥½ç»„ä»¶ä¸»é¢˜åŒ–çš„è§„èŒƒã€‚ä¹‹å‰ antd-mobile-rn å°±å› ä¸ºè®¾è®¡é—®é¢˜ï¼Œä¸­é€”èŠ±è´¹å¤§åŠ›æ°”é‡æ„ã€‚å‡ ä¹æ‰€æœ‰çš„ç»„ä»¶åº“éƒ½ä¼šå°†è‰²å½©ã€å¸ƒå±€è¿™äº›ä»¥ css å˜é‡çš„å½¢å¼æä¾›ç»™ä½¿ç”¨è€…å’Œå¼€å‘è€…ä¸ºï¼ŒReact Native ä¸åŒçš„æ˜¯æ ·å¼åŸºäº CSS in JSï¼Œä¸è¿‡é“ç†ç›¸é€šï¼Œå‚ç…§ vant çš„<a href="https://github.com/youzan/vant/blob/dev/src/style/var.less">è®¾è®¡èµ„æº</a>ï¼Œæˆ‘ä»¬æŠ½å‡ºäº†ä¸€å¥— JavaScript å¸¸é‡ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// packages/themes</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Theme</span> &#123;</span><br><span class="line">  <span class="string">&#x27;animation-duration-base&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;animation-duration-fast&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;animation-timing-function-enter&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;animation-timing-function-leave&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-xs&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-sm&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-md&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-lg&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-weight-bold&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="comment">// å˜é‡è¿‡å¤šï¼Œè¿™é‡Œä»…å±•ç¤ºéƒ¨åˆ†å˜é‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™äº› JS å¸¸é‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¾è®¡ä¸»é¢˜ç³»ç»Ÿã€‚åŸºäº CSS in JS çš„ä¸»é¢˜åŒ–è®¾è®¡ä¸€èˆ¬æ˜¯åŸºäº React Context å®ç°ï¼Œéœ€è¦æä¾› ThemeProvider ä¼ å…¥ä¸»é¢˜ä¸Šä¸‹æ–‡ï¼ŒThemeConsumerã€WithThemeï¼ˆé«˜é˜¶ç±»ç»„ä»¶ï¼‰ã€withThemeï¼ˆé«˜é˜¶å‡½æ•°ç»„ä»¶ï¼‰ æˆ– useThemeï¼ˆReact Hooksï¼‰ä½œä¸ºæ¶ˆè´¹è€…è·å–ä¸Šä¸‹æ–‡ã€‚è‡ªå·±å®ç°ä¹Ÿä¸éš¾ï¼Œä¸è¿‡æ›´æ–‡ä»»åŠ¡æ¯”è¾ƒç´§æ€¥ï¼Œæˆ‘ä»¬å…ˆåŸºäº <a href="https://github.com/cssinjs/theming">cssinjs&#x2F;theming</a> å®ç°åŠŸèƒ½ï¼ŒåæœŸæœ‰éœ€è¦å†å›æ¥é€ è½®å­ä¹Ÿä¸è¿Ÿã€‚ä¸‹é¢ğŸ‘‡å°±æ˜¯æˆ‘ä»¬åŸºäº theming çš„ <code>createTheming</code> å‡½æ•°åˆ›å»ºè‡ªå®šä¹‰ä¸»é¢˜ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createTheming &#125; <span class="keyword">from</span> <span class="string">&#x27;theming&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> context = <span class="title class_">React</span>.<span class="title function_">createContext</span>(defaultTheme);</span><br><span class="line"><span class="keyword">const</span> theming = <span class="title function_">createTheming</span>(context);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> &#123; <span class="title class_">ThemeProvider</span>, withTheme, useTheme &#125; = theming;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸»é¢˜åŠŸèƒ½æ˜¯é€šç”¨çš„ï¼Œå› æ­¤æˆ‘å°†ä¸»é¢˜ç›¸å…³çš„èƒ½åŠ›éƒ½æ”¾åœ¨ <code>@vant-react-native/theme</code> åŒ…ä¸­å‘å¸ƒã€‚</p></blockquote><h2 id="Button-çš„å®ç°"><a href="#Button-çš„å®ç°" class="headerlink" title="Button çš„å®ç°"></a>Button çš„å®ç°</h2><p>React Native å†…ç½®çš„ Button ç»„ä»¶çš„æ ·å¼æ˜¯å›ºå®šçš„ï¼Œåªèƒ½è¿›è¡Œä¸€äº›ç®€å•çš„è®¾ç½®ã€‚ä¸”å†…ç½®çš„ Button ç»„ä»¶åœ¨ Android å’Œ ios ä¸¤ä¸ªå¹³å°ä¸Šçš„è¡¨ç°å¹¶ä¸ä¸€è‡´ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ ¹æ®æ›´åº•å±‚çš„ç»„ä»¶è¿›è¡Œå°è£…ã€‚æˆ‘ä»¬å¯¹æ¯” ant-design-mobile-rn å’Œ react-native-elements åé‡‡ç”¨äº†å‰è€…ä½¿ç”¨çš„ <code>TouchableHighlight</code> ç»„ä»¶ã€‚ç”±äºç»§æ‰¿è‡ª TouchableHighlightï¼Œæ‰€ä»¥æˆ‘ä»¬ç»„ä»¶çš„ Props ç±»å‹å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TouchableHighlightProps</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ButtonProps</span> <span class="keyword">extends</span> <span class="title class_">TouchableHighlightProps</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŒ‰é’®ç±»å‹"><a href="#æŒ‰é’®ç±»å‹" class="headerlink" title="æŒ‰é’®ç±»å‹"></a>æŒ‰é’®ç±»å‹</h3><p>vant çš„ <a href="https://youzan.github.io/vant/#/zh-CN/button#an-niu-lei-xing">Button</a> æ”¯æŒ <code>default</code>ã€<code>primary</code>ã€<code>info</code>ã€<code>warning</code>ã€<code>danger</code> äº”ç§ç±»å‹ï¼Œé»˜è®¤ä¸º <code>default</code>ã€‚ç°åœ¨ï¼Œç»„ä»¶çš„åŸºæœ¬å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">FunctionComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Text</span>, <span class="title class_">View</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ButtonProps</span> &#123;</span><br><span class="line">  <span class="keyword">type</span>?: <span class="string">&#x27;default&#x27;</span> | <span class="string">&#x27;primary&#x27;</span> | <span class="string">&#x27;info&#x27;</span> | <span class="string">&#x27;warning&#x27;</span> | <span class="string">&#x27;danger&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Button</span>: <span class="title class_">FunctionComponent</span>&lt;<span class="title class_">ButtonProps</span>&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„ç»„ä»¶ä¸ºäº†é€‚åº”ä¸»é¢˜åŒ–éœ€æ±‚ï¼Œæ ·å¼ä¸èƒ½æ˜¯å†™æ­»åœ¨ç»„ä»¶é‡Œçš„ï¼Œè€Œæ˜¯è¦é€šè¿‡ä¸Šä¸‹æ–‡è·å–æ ·å¼å¸¸é‡ã€‚æˆ‘ä»¬æ€è·¯æ˜¯é¦–å…ˆä½¿ç”¨ <code>useTheme</code> ä»ä¸Šä¸‹æ–‡ä¸­è·å–ä¸»é¢˜ï¼Œç„¶åç”±äºæ ·å¼å®šä¹‰è¾ƒå¤šï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªç»„ä»¶ç¼–å†™ä¸€ä¸ª <code>useStyle</code> hook æ”¾åœ¨å•ç‹¬çš„ style.ts æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StyleSheet</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Theme</span>, useTheme &#125; <span class="keyword">from</span> <span class="string">&#x27;@vant-react-native/theme&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">useStyle</span> = props =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> theme = useTheme&lt;<span class="title class_">Theme</span>&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getBackgroundColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">switch</span> (props.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;primary&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;success-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;info&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;primary-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;warning&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;warning-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;danger&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;danger-color&#x27;</span>];</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getTextColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">type</span> === <span class="string">&#x27;default&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getBorderRadius</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">round</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-max&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">square</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-sm&#x27;</span>];</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">container</span>: &#123;</span><br><span class="line">      <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="title function_">getBackgroundColor</span>(),</span><br><span class="line">      <span class="attr">borderColor</span>: <span class="title function_">getBorderColor</span>(),</span><br><span class="line">      <span class="attr">borderRadius</span>: theme[<span class="string">&#x27;border-radius-sm&#x27;</span>],</span><br><span class="line">      <span class="attr">borderWidth</span>: theme[<span class="string">&#x27;border-width-base&#x27;</span>],</span><br><span class="line">      <span class="attr">flexDirection</span>: <span class="string">&#x27;row&#x27;</span>,</span><br><span class="line">      <span class="attr">flex</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">justifyContent</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">      <span class="attr">opacity</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">paddingHorizontal</span>: <span class="number">15</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">indicator</span>: &#123;</span><br><span class="line">      <span class="attr">marginRight</span>: theme[<span class="string">&#x27;padding-xs&#x27;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">textStyle</span>: &#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="title function_">getTextColor</span>(),</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="number">14</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">wrapper</span>: &#123;</span><br><span class="line">      <span class="attr">borderRadius</span>: theme[<span class="string">&#x27;border-radius-sm&#x27;</span>],</span><br><span class="line">      <span class="attr">height</span>: <span class="number">44</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> styles;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åŸºäº <code>useStyle</code> æˆ‘ä»¬ä¾¿å¯å®Œæˆä¸€ä¸ªæ”¯æŒå¤šç±»å‹çš„ Button ç»„ä»¶ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Button</span>: <span class="title class_">FunctionComponent</span>&lt;<span class="title class_">ButtonProps</span>&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> styles = <span class="title function_">useStyle</span>(props);</span><br><span class="line">  <span class="keyword">const</span> &#123; style, ...restProps &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">TouchableHighlight</span> <span class="attr">style</span>=<span class="string">&#123;[styles.wrapper,</span> <span class="attr">style</span>]&#125; &#123;<span class="attr">...restProps</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;typeof props.children === &#x27;string&#x27; ? (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;styles.textStyle&#125;</span>&gt;</span>&#123;props.children&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ) : (</span></span><br><span class="line"><span class="language-xml">          props.children</span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">TouchableHighlight</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå­ç»„ä»¶å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯èƒ½æ˜¯ç»„ä»¶ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­ç±»å‹ã€‚</p></blockquote><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a0b412c227e4dc994b818294165240d~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æœ´ç´ æŒ‰é’®"><a href="#æœ´ç´ æŒ‰é’®" class="headerlink" title="æœ´ç´ æŒ‰é’®"></a>æœ´ç´ æŒ‰é’®</h3><p>æœ´ç´ æŒ‰é’®çš„æ–‡å­—ä¸ºæŒ‰é’®é¢œè‰²ï¼ŒèƒŒæ™¯ä¸ºç™½è‰²ï¼Œæˆ‘ä»¬é€šè¿‡ <code>plain</code> å±æ€§å°†æŒ‰é’®è®¾ç½®ä¸ºæœ´ç´ æŒ‰é’®ã€‚è°ƒç ”äº† antd å’Œ react-native-elements å‘ç°å®ƒä»¬éƒ½æ˜¯å®šä¹‰äº†å¾ˆå¤šæ ·å¼ï¼Œç„¶ååœ¨ç»„ä»¶å†…é€šè¿‡é€»è¾‘åˆ¤æ–­è®¡ç®—å…·ä½“æ ·å¼çš„å€¼ã€‚ä¸ªäººå¾ˆä¸å–œæ¬¢è¿™ç§æ–¹å¼ï¼Œä¸æ˜¯å½»åº•çš„ CSS in JSï¼Œæˆ‘çš„å¤„ç†æ–¹å¼æ˜¯å°†æ‰€æœ‰æœ‰å…³æ ·å¼è®¡ç®—çš„éƒ½å°è£…åœ¨æ¯ä¸ªç»„ä»¶çš„ <code>useStyle</code> é’©å­ä¸­ï¼Œæ¯”å¦‚å½“å¼•å…¥æœ´ç´ æŒ‰é’®å±æ€§æ—¶ï¼Œç›¸å¯¹äºæ™®é€šæŒ‰é’®æ”¹å˜çš„æœ‰å®¹å™¨èƒŒæ™¯è‰²ã€å®¹å™¨è¾¹æ¡†å’Œå­—ä½“é¢œè‰²ã€‚æ‰€ä»¥æˆ‘ä»¬å°†è¿™ä¸‰ä¸ªå±æ€§çš„å€¼éƒ½é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°è®¡ç®—ã€‚å¯¹æ¯” antd çš„æºç ï¼Œä¼šå‘ç°ä¸ä»…ä»£ç æ›´æ˜“è¯»ï¼Œç”šè‡³ä»£ç é‡ä¹Ÿå°‘äº†ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getBackgroundColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">plain</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getTextColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">plain</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (props.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;primary&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;success-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;info&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;primary-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;warning&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;warning-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;danger&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;danger-color&#x27;</span>];</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;gray-3&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (props.<span class="property">type</span> === <span class="string">&#x27;default&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0fc1bedf56fe4dd0a31e6d18b048665c~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="ç»†è¾¹æ¡†"><a href="#ç»†è¾¹æ¡†" class="headerlink" title="ç»†è¾¹æ¡†"></a>ç»†è¾¹æ¡†</h3><p>vant å®ç°ç»†è¾¹æ¡†æ˜¯é€šè¿‡è®¾ç½® <code>hairline</code> å±æ€§å¯ä»¥å±•ç¤º 0.5px çš„ç»†è¾¹æ¡†ã€‚ä½†æ˜¯æ‰‹æœºä¸Šç”±äºåˆ†è¾¨ç‡çš„å½±å“ï¼Œè´¸ç„¶è®¾ç½® 0.5 ä¼šå¯¼è‡´è¾¹æ¡†ä¸æ˜¾ç¤ºçš„å…¼å®¹é—®é¢˜ã€‚å¥½åœ¨ React Native ä¸ºæˆ‘ä»¬æä¾›äº† <code>StyleSheet.hairlineWidth</code> å¸¸é‡æ¥å…¼å®¹æœ€ç»†è¾¹æ¡†é—®é¢˜ï¼Œä¸‹é¢æ˜¯å®˜æ–¹å¯¹å®ƒçš„å®šä¹‰ï¼š</p><blockquote><p>hairlineWidth è¿™ä¸€å¸¸é‡å§‹ç»ˆæ˜¯ä¸€ä¸ªæ•´æ•°çš„åƒç´ å€¼ï¼ˆçº¿çœ‹èµ·æ¥ä¼šåƒå¤´å‘ä¸ä¸€æ ·ç»†ï¼‰ï¼Œå¹¶ä¼šå°½é‡ç¬¦åˆå½“å‰å¹³å°æœ€ç»†çš„çº¿çš„æ ‡å‡†ã€‚å¯ä»¥ç”¨ä½œè¾¹æ¡†æˆ–æ˜¯ä¸¤ä¸ªå…ƒç´ é—´çš„åˆ†éš”çº¿ã€‚ç„¶è€Œï¼Œä½ ä¸èƒ½æŠŠå®ƒâ€œè§†ä¸ºä¸€ä¸ªå¸¸é‡â€ï¼Œå› ä¸ºä¸åŒçš„å¹³å°å’Œä¸åŒçš„å±å¹•åƒç´ å¯†åº¦ä¼šå¯¼è‡´ä¸åŒçš„ç»“æœã€‚</p><p>å¦‚æœæ¨¡æ‹Ÿå™¨ç¼©æ”¾è¿‡ï¼Œå¯èƒ½ä¼šçœ‹ä¸åˆ°è¿™ä¹ˆç»†çš„çº¿ã€‚</p></blockquote><p>ç”±äº <code>hairline</code> åªå½±å“äº†å®¹å™¨ <code>borderWidth</code> å±æ€§ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç¼–å†™å•ç‹¬çš„æ ·å¼è®¡ç®—å‡½æ•°ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">borderWidth</span>: props.<span class="property">hairline</span> ? theme[<span class="string">&#x27;border-width-hairline&#x27;</span>] : theme[<span class="string">&#x27;border-width-base&#x27;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43d80d537b07487d9043d718e6541f7e~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="ç¦ç”¨çŠ¶æ€"><a href="#ç¦ç”¨çŠ¶æ€" class="headerlink" title="ç¦ç”¨çŠ¶æ€"></a>ç¦ç”¨çŠ¶æ€</h3><p>è¡¨å•å…ƒç´ æˆ–è€…è¯´å¯è§¦æ‘¸å¯ç‚¹å‡»çš„å…ƒç´ ä¸€èˆ¬éƒ½æœ‰ç¦ç”¨çŠ¶æ€ï¼Œvant ä¸­æ˜¯é€šè¿‡ disabled å±æ€§æ¥ç¦ç”¨æŒ‰é’®ï¼Œç¦ç”¨çŠ¶æ€ä¸‹æŒ‰é’®ä¸å¯ç‚¹å‡»ã€‚TouchableHighlight ç»§æ‰¿åœ°æœ‰ <code>disabled</code> å±æ€§ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®ä¸€äº›ç¦ç”¨çŠ¶æ€ä¸‹çš„æŒ‰é’®æ ·å¼å°±å¯ä»¥ï¼ŒæŸ¥çœ‹ vant æºç æˆ‘ä»¬å‘ç°åªéœ€è¦ä¿®æ”¹é€æ˜åº¦ä¸º 0.5 å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">opacity</span>: props.<span class="property">disabled</span> ? <span class="number">0.5</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/892589086d07426a8346319d8466bccf~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="åŠ è½½çŠ¶æ€"><a href="#åŠ è½½çŠ¶æ€" class="headerlink" title="åŠ è½½çŠ¶æ€"></a>åŠ è½½çŠ¶æ€</h3><p>vant æ˜¯é€šè¿‡ <code>loading</code> å±æ€§è®¾ç½®æŒ‰é’®ä¸ºåŠ è½½çŠ¶æ€ï¼ŒåŠ è½½çŠ¶æ€ä¸‹é»˜è®¤ä¼šéšè—æŒ‰é’®æ–‡å­—ï¼Œå¯ä»¥é€šè¿‡ <code>loading-text</code> è®¾ç½®åŠ è½½çŠ¶æ€ä¸‹çš„æ–‡å­—ã€‚æˆ‘ä»¬å€ŸåŠ© React Native çš„ ActivityIndicator ç»„ä»¶å¯ä»¥è½»æ¾å®ç°è¿™ä¸ªç‰¹æ€§ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">&lt;<span class="title class_">TouchableHighlight</span> &#123;...restProps&#125;&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.contentWrapper&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;props.loading ? (</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ActivityIndicator</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">color</span>=<span class="string">&#123;indicatorColor&#125;</span> <span class="attr">style</span>=<span class="string">&#123;styles.indicator&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;props.loadingText ? <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;styles.textStyle&#125;</span>&gt;</span>&#123;props.loadingText&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span> : null&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    ) : <span class="literal">null</span>&#125;</span><br><span class="line">  &lt;/<span class="title class_">View</span>&gt;</span><br><span class="line">&lt;/<span class="title class_">TouchableHighlight</span>&gt;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>æ ·å¼å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useIndicatorColor = (<span class="attr">props</span>: <span class="title class_">ButtonProps</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> theme = useTheme&lt;<span class="title class_">Theme</span>&gt;();</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">plain</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (props.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;primary&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;success-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;info&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;primary-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;warning&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;warning-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;danger&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;danger-color&#x27;</span>];</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (props.<span class="property">type</span> === <span class="string">&#x27;default&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27c4340df2254245a3c830bf667a2e28~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æŒ‰é’®å½¢çŠ¶"><a href="#æŒ‰é’®å½¢çŠ¶" class="headerlink" title="æŒ‰é’®å½¢çŠ¶"></a>æŒ‰é’®å½¢çŠ¶</h3><p>é»˜è®¤çš„æŒ‰é’®æœ‰å€¼ä¸º 2 çš„åœ†è§’ï¼Œvant ä¸­é€šè¿‡ <code>square</code> è®¾ç½®æ–¹å½¢æŒ‰é’®ï¼Œé€šè¿‡ <code>round</code> è®¾ç½®åœ†å½¢æŒ‰é’®ã€‚æŒ‰ä¾‹ï¼Œæˆ‘ä»¬é€šè¿‡åˆ¤æ–­è®¾ç½®æ ·å¼ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getBorderRadius</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">round</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-max&#x27;</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">square</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-sm&#x27;</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="attr">borderColor</span>: <span class="title function_">getBorderColor</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">wrapper</span>: &#123;</span><br><span class="line">    <span class="attr">borderRadius</span>: <span class="title function_">getBorderRadius</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1402517566e49d1a1920fd9b3f7bb20~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æŒ‰é’®å°ºå¯¸"><a href="#æŒ‰é’®å°ºå¯¸" class="headerlink" title="æŒ‰é’®å°ºå¯¸"></a>æŒ‰é’®å°ºå¯¸</h3><p>Antd RN åªæä¾›äº† largeã€small ä¸¤ä¸ªå°ºå¯¸ï¼Œè€Œåœ¨ vant ä¸­æ”¯æŒ largeã€normalã€smallã€mini å››ç§å°ºå¯¸ï¼Œé»˜è®¤ä¸º normalã€‚è™½ç„¶å†™åˆ°è¿™é‡Œå·²ç»å¾ˆç–²å€¦äº†ï¼Œæ¨æç”˜éœ²ä¹Ÿæ—©å–å®Œäº†ï¼Œä½†æ˜¯ä¸ºäº†å®Œæ•´å¤åŸï¼Œè¿˜æ˜¯ç»­ä¸Šä¸€æ¯å’–å•¡ç»§ç»­è‚ã€‚æ ¹æ® vant è®¾è®¡ç¨¿æˆ‘ä»¬æ–°å¢ä¸‰ä¸ªæ ·å¼è·å–å‡½æ•°å¹¶åŠ¨æ€åŒ–æŒ‡å®šæ ·å¼ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getSizeHeight</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (props.<span class="property">size</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;large&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">50</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;small&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">32</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;mini&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">24</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">44</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getSizePadding</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (props.<span class="property">size</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;small&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;mini&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">15</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getSizeFontSize</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (props.<span class="property">size</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;large&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;small&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;mini&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">14</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="attr">paddingHorizontal</span>: <span class="title function_">getSizePadding</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">textStyle</span>: &#123;</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="title function_">getSizeFontSize</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">wrapper</span>: &#123;</span><br><span class="line">    <span class="attr">height</span>: <span class="title function_">getSizeHeight</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/59c01002f25b477d85ed26fa1e21c86b~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="è‡ªå®šä¹‰é¢œè‰²"><a href="#è‡ªå®šä¹‰é¢œè‰²" class="headerlink" title="è‡ªå®šä¹‰é¢œè‰²"></a>è‡ªå®šä¹‰é¢œè‰²</h3><p>å¦‚æœä¸æ˜¯è‡ªå·±äº²è‡ªå¤åˆ» Vantï¼Œæ˜¯æ²¡æƒ³åˆ°ä¸€ä¸ª Button èƒ½ç©å‡ºè¿™ä¹ˆå¤šèŠ±ï¼Œæ”¯æŒç‰¹æ€§è¿™ä¹ˆå¤šè€å¿ƒå’Œä»£ç ç®¡ç†éƒ½æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚å½“ç„¶äº†ï¼Œæ´›ç«¹é‡‡å–çš„æ ·å¼ç®¡ç†æ–¹å¼æ¯”è¾ƒåæ¿€ï¼Œå¤§å®¶æœ‰å¥½çš„æ–¹å¼ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</p><p>é€šè¿‡ <code>color</code> å±æ€§è‡ªå®šä¹‰æŒ‰é’®çš„é¢œè‰²ã€‚æˆ‘ä»¬å¯ä»¥å¾—å‡ºéœ€æ±‚ï¼Œä¸ç®¡ type æ˜¯ä»€ä¹ˆï¼Œ<code>color</code> å±æ€§éœ€å§‹ç»ˆè¦†ç›–åŸæœ‰æ ·å¼ï¼Œcolor èƒ½å½±å“çš„å°±æ˜¯èƒŒæ™¯è‰²ã€å­—ä½“é¢œè‰²å’Œè¾¹æ¡†é¢œè‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ <code>getBackgroundColor</code>ã€<code>getTextColor</code>ã€<code>getBorderColor</code> æ ·å¼å‡½æ•°åœ¨åˆé€‚çš„åœ°æ–¹åŠ ä¸Šä»¥ä¸‹ä»£ç å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (props.<span class="property">color</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> props.<span class="property">color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8efffdbfd6424618be6152895a53e8ee~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="åŒå‡»äº‹ä»¶çš„å®ç°"><a href="#åŒå‡»äº‹ä»¶çš„å®ç°" class="headerlink" title="åŒå‡»äº‹ä»¶çš„å®ç°"></a>åŒå‡»äº‹ä»¶çš„å®ç°</h2><p>æˆ‘ä»¬ä» React Native å†…ç½®çš„ TouchableHighlight ç»„ä»¶ç»§æ‰¿äº†å¾ˆå¤šäº‹ä»¶ï¼Œå…¶ä¸­ onPressã€onLongPress åˆ†åˆ«ä»£è¡¨å•å‡»å’Œé•¿æŒ‰ã€‚ä½†å”¯ç‹¬â€œåŒå‡» 666â€çš„åŒå‡»äº‹ä»¶æ²¡æœ‰å§“åã€‚ä¹‹å‰åœ¨å®é™…ä¸šåŠ¡æ›¾ç»å°è£…è¿‡åŒå‡»äº‹ä»¶ï¼Œè¿™æ¬¡æˆ‘ä»¬å°±ç›´æ¥å°±å†…ç½®äº†ã€‚</p><p>å®ç°æ€è·¯æ˜¯å»¶æ—¶æ‰§è¡Œå•å‡»äº‹ä»¶ï¼ˆé»˜è®¤ 200 æ¯«ç§’ï¼‰ï¼Œç„¶åè®°å½•ç‚¹å‡»æ¬¡æ•°å’Œä¸¤æ¬¡æ—¶é—´é—´éš”ï¼Œå½“è¯†åˆ«ä¸ºç¬¬äºŒæ¬¡ç‚¹å‡»ä¸”æ—¶é—´é—´éš”å°äºå•å‡»å»¶æ—¶æ—¶é—´ã€‚é‚£ä¹ˆå°±å–æ¶ˆå•å‡»äº‹ä»¶å»¶æ—¶ï¼Œå¹¶ç«‹å³æ‰§è¡ŒåŒå‡»äº‹ä»¶ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> lastTime = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> clickCount = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> timeout = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">_onPress</span> = (<span class="params">event: GestureResponderEvent</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">  <span class="keyword">if</span> (timeout) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">  &#125;</span><br><span class="line">  timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    props.<span class="title function_">onPress</span>(event);</span><br><span class="line">    clickCount = <span class="number">1</span>;</span><br><span class="line">    lastTime = <span class="number">0</span>;</span><br><span class="line">  &#125;, props.<span class="property">delayDoublePress</span>);</span><br><span class="line">  <span class="keyword">if</span> (clickCount === <span class="number">2</span> &amp;&amp; now - lastTime &lt;= props.<span class="property">delayDoublePress</span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">    clickCount = <span class="number">1</span>;</span><br><span class="line">    lastTime = <span class="number">0</span>;</span><br><span class="line">    props.<span class="title function_">onDoublePress</span>(event);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    clickCount++;</span><br><span class="line">    lastTime = now;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¤§å®¶ä¼šå‘ç°è¿™é‡Œçš„å®ç°ç³…åˆäº†å‡½æ•°é˜²æŠ–ã€èŠ‚æµä»¥åŠè®¡æ•°å™¨çš„åŸç†ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œå¤ä¹ ä¸‹åŸç†ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚</p><h2 id="API-æ–‡æ¡£"><a href="#API-æ–‡æ¡£" class="headerlink" title="API æ–‡æ¡£"></a>API æ–‡æ¡£</h2><p>ä¸€ä¸ªç»„ä»¶çš„æ–‡æ¡£ï¼Œé™¤äº† Demoï¼Œè¿˜éœ€è¦å±•ç¤ºå‡ºæ¥å¯ç”¨çš„ Propsï¼ŒDumi å†…ç½®çš„ <code>&lt;API&gt;&lt;/API&gt;</code> ç»„ä»¶å¯ä»¥æ ¹æ®ç»„ä»¶è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£ã€‚é¦–å…ˆæˆ‘ä»¬åƒä¸‹é¢ä¸€æ ·ç¼–å†™ Props æ³¨é‡Šï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ButtonProps</span> <span class="keyword">extends</span> <span class="title class_">TouchableHighlightProps</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>       Can be set to primaryã€infoã€warningã€danger</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>.zh-CN ç±»å‹ï¼Œå¯é€‰å€¼ä¸º primaryã€infoã€warningã€danger</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">type</span>?: <span class="string">&#x27;default&#x27;</span> | <span class="string">&#x27;primary&#x27;</span> | <span class="string">&#x27;info&#x27;</span> | <span class="string">&#x27;warning&#x27;</span> | <span class="string">&#x27;danger&#x27;</span>;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>       Can be set to largeã€smallã€mini</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>.zh-CN å°ºå¯¸ï¼Œå¯é€‰å€¼ä¸º</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  size?: <span class="string">&#x27;large&#x27;</span> | <span class="string">&#x27;normal&#x27;</span> | <span class="string">&#x27;small&#x27;</span> | <span class="string">&#x27;mini&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ Markdown ä¸­å¼•å…¥ API ç»„ä»¶å³å¯ï¼š</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">API</span> <span class="attr">src</span>=<span class="string">&quot;./index.tsx&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">API</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>å†…ç½®ç»„ä»¶ API æ²¡æœ‰å¤„ç†ç»§æ‰¿çš„æƒ…å†µï¼Œæˆ‘ä»¬åç»­ä¼šè‡ªå®šä¹‰ä¸€ä¸ª API ç»„ä»¶ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œæµè§ˆ <a href="https://vant-react-native.js.org/components/button#api">Button æ–‡æ¡£</a> å¯ä»¥æŸ¥çœ‹ç°åœ¨çš„æ•ˆæœï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7bedac7240334ff79c4142005a66b158~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="å·¥ç¨‹åŒ–ä¸²è®²"><a href="#å·¥ç¨‹åŒ–ä¸²è®²" class="headerlink" title="å·¥ç¨‹åŒ–ä¸²è®²"></a>å·¥ç¨‹åŒ–ä¸²è®²</h2><p>ç”±äºå¾ˆéš¾åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å°†ç»„ä»¶å¼€å‘ç›¸å…³çš„å·¥ç¨‹åŒ–è®²å®Œï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ç¯‡å®æˆ˜ä¸­ä¸²è®²ä¸€ä¸‹ã€‚</p><h3 id="ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶"><a href="#ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶" class="headerlink" title="ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶"></a>ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶</h3><blockquote><p>å°é»‘ï¼šæ´›ç«¹ï¼Œ<code>lerna create</code> å‘½ä»¤åˆ›å»ºå‡ºæ¥çš„æ¨¡å—å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œä»¥åè¦åˆ›å»ºå¾ˆå¤šå¾ˆå¤šç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªåˆ›å»ºç»„ä»¶æ¨¡å—çš„è„šæ‰‹æ¶å—ï¼Ÿ</p></blockquote><p>lerna ä½¿ç”¨èµ·æ¥æ˜¯æœ‰ä¸å°‘ç—›ç‚¹çš„ï¼Œ<code>lerna create</code> å‘½ä»¤æ²¡åŠæ³•æŒ‡å®šæ¨¡æ¿ï¼Œè€ƒè™‘åˆ°ä¹‹åçš„å‡ åä¸Šç™¾ä¸ªç»„ä»¶æ¯æ¬¡åˆ›å»ºéƒ½è¦è¿›è¡Œé¡¹ç›®ç»“æ„ã€Typescript é…ç½®ã€å•å…ƒæµ‹è¯•é…ç½®ã€Babel é…ç½®ç­‰ç­‰å·¥ä½œæ­¥éª¤ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å†™ä¸€ä¸ªè„šæ‰‹æ¶ã€‚</p><h4 id="æ¨¡æ¿è§£æ"><a href="#æ¨¡æ¿è§£æ" class="headerlink" title="æ¨¡æ¿è§£æ"></a>æ¨¡æ¿è§£æ</h4><p>è¯´åˆ°æ¨¡æ¿è§£æï¼Œç›¸ä¿¡å¤§å®¶å’Œæˆ‘ä¸€æ ·æƒ³åˆ°çš„æ˜¯ vue-cli çš„ template è§£æã€‚é€šè¿‡é˜…è¯» <a href="https://cdn.jsdelivr.net/npm/vue-cli@2.9.6/lib/generate.js">vue-cli@2.9.6 generate.js</a> æºç ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æå‡ºå°¤å¤§æ˜¯åŸºäº metalsmithã€handlebarsã€consolidate è¿™ä¸‰ä¸ªåŒ…æ¥å®ç°æ¨¡æ¿è§£æèƒ½åŠ›çš„ã€‚è®©äººä¸å®‰çš„æ˜¯å…¶ä¸­ metalsmith åº“æœ‰é•¿è¾¾ 5 å¹´æ²¡æœ‰ç»´æŠ¤äº†ï¼Œæ´›ç«¹æŒ‘é€‰å¼€æºé¡¹ç›®ä¸€èˆ¬å¯¹ç»´æŠ¤åº¦å¾ˆæ•æ„Ÿï¼Œæœ¬ç€è½®å­è¦ç”¨è‡ªå·±é€ çš„åŸåˆ™ï¼Œæˆ‘ç¿»çœ‹äº† Metalsmith çš„ Readme å‘ç°è¿™ä¸ªæ’ä»¶æ— éæ˜¯é€šè¿‡é€’å½’è¯»æ–‡ä»¶çš„æ–¹å¼æ¸²æŸ“æ¨¡æ¿ï¼Œå¹¶ä¸”å®ƒçš„é™æ€ç½‘ç«™ç”Ÿæˆçš„èƒ½åŠ›å¯¹æˆ‘ä»¬æ¨¡æ¿è§£æçš„éœ€æ±‚ä¹Ÿæ˜¯å¤šä½™çš„ã€‚</p><p>è¯´å¹²å°±å¹²ï¼Œåœ¨å’Œ <a href="https://juejin.cn/user/3175045313873943">@æ—å°å¸…</a> åŒå­¦ç®€å•æ²Ÿé€šåï¼Œæˆ‘åŠ¨æ‰‹é€ äº† <a href="https://github.com/youngjuning/handlebars-template-compiler">handlebars-template-compiler</a> è¿™ä¸ªè½®å­ï¼Œå…¶ä¸»è¦åŸç†å¦‚ä¸‹ï¼š</p><ol><li>ä½¿ç”¨ recursive-readdir é€’å½’è·å–æ‰€æœ‰æ–‡ä»¶è·¯å¾„</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> files = <span class="keyword">await</span> <span class="title function_">recursive</span>(rootDir);</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨ <code>handlebars.compile</code> æ–¹æ³•ä½¿ç”¨å…ƒæ•°æ®å¯¹æ¨¡æ¿è¿›è¡Œæ¸²æŸ“</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> content = fs.<span class="title function_">readFileSync</span>(file).<span class="title function_">toString</span>();</span><br><span class="line"><span class="keyword">const</span> result = handlebars.<span class="title function_">compile</span>(content)(meta);</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨ <code>fs.writeFileSync</code> API é‡å†™æ–‡ä»¶</li></ol><p>å¦å¤–ï¼Œé€šè¿‡å¼•å…¥ <a href="https://www.npmjs.com/package/micromatch">glob</a> æ¨¡å¼åŒ¹é…å®ç°äº† <code>exclude</code> é…ç½®ä»¥åŠåªå¤„ç†æŒ‡å®šåç¼€ï¼ˆé»˜è®¤ <code>**/*.tpl.*</code>ï¼‰çš„æ–‡ä»¶æ¥é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚ï¼ˆPSï¼šNPM ä¸€å‘¨æœ‰äº† 300 å¤šä¸‹è½½ï¼Œæœ‰éœ€è¦çš„æ˜å‹å€¼å¾—ä¸€è¯•ğŸ˜„ï¼‰</p><h4 id="Node-CLIï¼ˆ-vant-react-native-x2F-scriptsï¼‰æ­å»º"><a href="#Node-CLIï¼ˆ-vant-react-native-x2F-scriptsï¼‰æ­å»º" class="headerlink" title="Node CLIï¼ˆ@vant-react-native&#x2F;scriptsï¼‰æ­å»º"></a>Node CLIï¼ˆ@vant-react-native&#x2F;scriptsï¼‰æ­å»º</h4><p>è¿™é‡Œæ´›ç«¹å°è¯•ç”¨æœ€ç®€æ´çš„è¯­è¨€ä¸ºå¤§å®¶æè¿°ä¸€ä¸ªè„šæ‰‹æ¶çš„è¯ç”Ÿï¼Œæºç åœ¨ <a href="https://github.com/youngjuning/vant-react-native/tree/main/packages/scripts">packages&#x2F;scripts</a> ç›®å½•ä¸‹ï¼Œæ²¡æœ‰æ¥è§¦è¿‡ CLI çš„æ˜å‹è¯·ç›¸ä¿¡æˆ‘ï¼ŒNode CLI å¾ˆå®¹æ˜“ä¸Šæ‰‹çš„ã€‚æ¥è§¦è¿‡çš„åŒå­¦ä¹Ÿå¯ä»¥æŸ¥æ¼è¡¥ç¼ºå€Ÿé‰´ä¸€äºŒã€‚</p><ol><li><code>package.json</code> æ–‡ä»¶çš„ <code>bin</code> å­—æ®µæ˜¯æˆ‘ä»¬è„šæ‰‹æ¶çš„å…¥å£</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‡å®šå¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ä»¥åŠåˆ«å</span></span><br><span class="line"><span class="attr">&quot;bin&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;vant&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./bin/cli.js&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰ <code>./bin/cli.js</code> ä¸ºå¯æ‰§è¡Œæ–‡ä»¶å¹¶è°ƒç”¨ <code>init</code> æ–¹æ³•ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”±äºæˆ‘ä»¬çš„è„šæœ¬æ˜¯ Node ç¼–å†™çš„ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®š node æ‰€åœ¨ä½ç½®</span></span><br><span class="line">#!<span class="regexp">/usr/</span>bin/env node</span><br><span class="line"><span class="keyword">const</span> &#123; init &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../lib&#x27;</span>);</span><br><span class="line"><span class="comment">// è¿™ä¸ªåœ°æ–¹å‚è€ƒäº† create-react-native çš„è®¾è®¡</span></span><br><span class="line"><span class="comment">// æœ¬æ–‡ç‚¹èµè¿‡ 300ï¼Œä¸‹ä¸€ç¯‡æ´›ç«¹å¸¦å°é»‘ä¸ºå¤§å®¶å¸¦æ¥ã€ŠåŸºäº TypeScript é‡æ„ create-react-nativeã€‹</span></span><br><span class="line"><span class="title function_">init</span>();</span><br></pre></td></tr></table></figure><ol start="3"><li>ç„¶ååœ¨ <code>src/index.ts</code> ä¸­åˆå§‹åŒ– commander è¿™ä¸ªä¹…è´Ÿç››åçš„å‘½ä»¤è¡Œæ¡†æ¶</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> init = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> packageJson = <span class="built_in">require</span>(<span class="string">&#x27;../package.json&#x27;</span>);</span><br><span class="line">  program.<span class="title function_">version</span>(packageJson.<span class="property">version</span>).<span class="title function_">description</span>(packageJson.<span class="property">description</span>);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  program.<span class="title function_">parse</span>(process.<span class="property">argv</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="4"><li>ä¸ºäº†æ–¹ä¾¿ç®¡ç†å‘½ä»¤ï¼Œæˆ‘ä»¬å°†å‘½ä»¤éƒ½æ”¾ç½®åœ¨ <code>src/commands</code> ç›®å½•ä¸‹å¹¶é€šè¿‡ <code>fs.readdirSync</code> API åŠ¨æ€æ‰«ææ³¨å†Œã€‚</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> init = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™æ®µä»£ç å€Ÿé‰´è‡ª NeteaseCloudMusicApi é¡¹ç›®ï¼Œä½œè€…çš„ä»£ç å¾ˆæœ‰è®¾è®¡æ„Ÿï¼Œæ¨èé˜…è¯»ã€‚</span></span><br><span class="line">  fs.<span class="title function_">readdirSync</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;commands&#x27;</span>)).<span class="title function_">forEach</span>(<span class="function">(<span class="params">file: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!file.<span class="title function_">endsWith</span>(<span class="string">&#x27;.js&#x27;</span>)) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">require</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;commands&#x27;</span>, file));</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="5"><li>æœ€ååœ¨ <code>commands</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>create.ts</code> æ–‡ä»¶ç¼–å†™å‘½ä»¤</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; program &#125; <span class="keyword">from</span> <span class="string">&#x27;commander&#x27;</span>;</span><br><span class="line">program</span><br><span class="line">  .<span class="title function_">command</span>(<span class="string">&#x27;create &lt;name&gt; [loc]&#x27;</span>)</span><br><span class="line">  .<span class="title function_">description</span>(<span class="string">&#x27;Create a new vant-react-native package&#x27;</span>)</span><br><span class="line">  .<span class="title function_">action</span>(<span class="function">(<span class="params">name,loc</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello Luozhu&#x27;</span>);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h4 id="è„šæ‰‹æ¶å®ç°"><a href="#è„šæ‰‹æ¶å®ç°" class="headerlink" title="è„šæ‰‹æ¶å®ç°"></a>è„šæ‰‹æ¶å®ç°</h4><p>ä¸Šä¸€å°ç»“ï¼Œæˆ‘ä»¬åˆå§‹åŒ–äº† CLI å¹¶æ·»åŠ äº† <code>create</code> å‘½ä»¤ï¼Œè¿™ä¸€å°èŠ‚æˆ‘ä»¬å°±æ¥å®ç°ä¸€ä¸‹è„šæ‰‹æ¶åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆåœ¨ <code>packages/scripts</code> ç›®å½•ä¸‹åˆ›å»ºç»„ä»¶æ¨¡æ¿</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.tpl.md <span class="comment"># tpl åç¼€åœ¨ç”Ÿæˆç»„ä»¶æ¨¡æ¿çš„æ—¶å€™ä¼šè¢« handlebars-template-compiler è‡ªåŠ¨å»æ‰ã€‚</span></span><br><span class="line">â”œâ”€â”€ package.tpl.json</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â””â”€â”€ index.ts <span class="comment"># æ²¡æœ‰ tpl åç¼€åˆ™ä¸ä¼šè¢«ç¼–è¯‘ï¼Œæ¨¡æ¿å¾ˆå¤§æ—¶å¯ä»¥èŠ‚çœæ—¶é—´ã€‚</span></span><br><span class="line">â””â”€â”€ tsconfig.json</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬æ˜ç¡®æˆ‘ä»¬çš„æ¨¡æ¿å…ƒæ•°æ®çš„æ•°æ®ç»“æ„ï¼Œæˆ‘è¿™é‡Œçš„æ•°æ®ç»“æ„æ˜¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IMeta</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">version</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">description</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">author</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">email</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">url</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">directory</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ inquirer æ¨¡å—å¼•å¯¼ç”¨æˆ·è¾“å…¥ä¿¡æ¯ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> inquirer <span class="keyword">from</span> <span class="string">&#x27;inquirer&#x27;</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// getQuestions è¿‡é•¿ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹ï¼šhttp://tny.im/UFbg</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">answer</span>: <span class="title class_">IMeta</span> = <span class="keyword">await</span> inquirer.<span class="title function_">prompt</span>(<span class="title function_">getQuestions</span>(name));</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>tmp-promise</code> æ¨¡å—åˆ›å»ºä¸€ä¸ªç³»ç»Ÿä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå¹¶å°†å‰æ–‡æåˆ°çš„ template æ–‡ä»¶å¤¹çš„å†…å®¹æ‹·è´è¿›å»ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tmp <span class="keyword">from</span> <span class="string">&#x27;tmp-promise&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs-extra&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">const</span> tmpdir = <span class="keyword">await</span> tmp.<span class="title function_">dir</span>(&#123; <span class="attr">unsafeCleanup</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">fs.<span class="title function_">copySync</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;../../template&#x27;</span>), tmpdir.<span class="property">path</span>);</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæˆ‘ä»¬å¯¹ä¸´æ—¶æ–‡ä»¶å¤¹çš„å†…å®¹è¿›è¡Œç¼–è¯‘å†æ‹·è´åˆ°æŒ‡å®šä½ç½®å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> htc <span class="keyword">from</span> <span class="string">&#x27;handlebars-template-compiler&#x27;</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">await</span> htc&lt;<span class="title class_">IMeta</span>&gt;(answer, tmpdir.<span class="property">path</span>);</span><br><span class="line">fs.<span class="title function_">copySync</span>(tmpdir.<span class="property">path</span>, <span class="string">`<span class="subst">$&#123;process.cwd()&#125;</span>/packages/<span class="subst">$&#123;locPath&#125;</span>`</span>);</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>æŠ˜è…¾è¿™ä¸€é¡¿ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸‹æˆæœå§ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ba477bcbd8b4ef6b880c7e8e5a095bc~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="Github-CODEOWENERS"><a href="#Github-CODEOWENERS" class="headerlink" title="Github CODEOWENERS"></a>Github CODEOWENERS</h3><p>å¤§å‹çš„å¼€æºé¡¹ç›®æœ€éš¾çš„ä¸æ˜¯æŠ€æœ¯é—®é¢˜ï¼ŒæŠ€æœ¯å¤§å’–æ°¸è¿œä¸ä¼šç¼ºã€‚æœ€éš¾çš„å…¶å®æ˜¯åä½œå’ŒåæœŸç»´æŠ¤ã€‚è¯•æƒ³ä¸€ä¸‹ä¸€ä¸ªæˆç™¾ä¸Šåƒäººå‚ä¸çš„é¡¹ç›®å½“æœ‰æ–°çš„ pr æ—¶ï¼Œæ­£å¸¸äººæ ¹æœ¬æ— åŠ›å»å¿«é€Ÿæ£€ç´¢å‡ºéœ€è¦è°å» review ä»£ç ã€‚æˆ‘ä»¬çš„ vant-react-native ç”±äºæ˜¯å°†æ¯ä¸ªç»„ä»¶å•ç‹¬å‘åŒ…ç»´æŠ¤ï¼Œå½“å‚ä¸çš„å°ä¼™ä¼´å¤šäº†ä¹Ÿä¼šäº§ç”Ÿè¿™ä¸ªå›°æ‰°ã€‚</p><p>è€Œ GitHub CODEOWNERSï¼ˆä»£ç æ‰€æœ‰è€…ï¼‰å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œåœ¨ 5000+ è´¡çŒ®è€…å‚ä¸çš„ <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a> é¡¹ç›®ä¸­æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å®ƒçš„èº«å½±ã€‚å®˜æ–¹å¯¹ä»£ç æ‰€æœ‰è€…å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>ä½ å¯ä»¥ä½¿ç”¨ CODEOWNERS æ–‡ä»¶å®šä¹‰è´Ÿè´£ä»“åº“ä»£ç çš„ä¸ªäººæˆ–å›¢é˜Ÿã€‚å½“æœ‰äººä¿®æ”¹ä»£ç å¹¶æ‰“å¼€ä¸€ä¸ª pull request æ—¶ï¼Œå°†è‡ªåŠ¨è¯·æ±‚ä»£ç æ‰€æœ‰è€…è¿›è¡Œå®¡æŸ¥ã€‚</p></blockquote><p>CODEOWNERS æ–‡ä»¶ä½¿ç”¨éµå¾ª gitignore æ–‡ä»¶ä¸­æ‰€ç”¨å¤§å¤šæ•°è§„åˆ™çš„æ¨¡å¼ï¼ŒCODEOWNERS æ–‡ä»¶ä½ç½®ä¸€èˆ¬ä½äº <code>.github/</code> ç›®å½•ä¸‹ã€‚</p><p>åœ¨ vant-react-nativeï¼Œæ´›ç«¹æ˜¯ä»“åº“çš„æœ€ç»ˆè´Ÿè´£äººï¼Œæ‰€ä»¥æ˜¯æœŸæœ›æ¯ä¸ª pr éƒ½å¯ä»¥åˆ†é…ç»™è‡ªå·±å®¡æŸ¥ä¸€ä¸‹çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬è¿™å°±æ¥å®éªŒä¸€ä¸‹å§ï¼Œæ–°å»ºä¸€ä¸ª <code>.github/CODEOWNERS</code> æ–‡ä»¶å¹¶å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># This is a comment.</span><br><span class="line"># Each line is a file pattern followed by one or more owners.</span><br><span class="line"></span><br><span class="line"># These owners will be the default owners for everything in</span><br><span class="line"># the repo. Unless a later match takes precedence,</span><br><span class="line"># @youngjuning will be requested for review when someone opens a pull request.</span><br><span class="line">*       @youngjuning</span><br><span class="line"></span><br><span class="line"># In this example, @doctocat owns any files in the build/logs</span><br><span class="line"># directory at the root of the repository and any of its</span><br><span class="line"># subdirectories.</span><br><span class="line">/packages/ @luozhu1994</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬å¦‚æœæ–‡ä»¶å…·æœ‰ä»£ç æ‰€æœ‰è€…ï¼Œåˆ™åœ¨æ‰“å¼€æ‹‰å–è¯·æ±‚ä¹‹å‰å¯ä»¥çœ‹åˆ°ä»£ç æ‰€æœ‰è€…æ˜¯è°ã€‚åœ¨ä»“åº“ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°æ–‡ä»¶å¹¶æ‚¬åœäºä¸€ä¸ªé”å›¾æ ‡ä¸Šï¼Œæ‚¬æµ®ä¹‹åä¼šå‘Šè¯‰ä½ è¯¥æ–‡ä»¶æ‰€æœ‰è€…æ˜¯è°ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/726bd5144a104902ae27ad31e1d46f93~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç„¶åæˆ‘ä»¬æäº¤ä¸€ä¸ª pr çœ‹çœ‹æ•ˆæœï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf4cb8b7ef5c41989660e735e621fc4e~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="NPM-å‘åŒ…è‡ªåŠ¨åŒ–"><a href="#NPM-å‘åŒ…è‡ªåŠ¨åŒ–" class="headerlink" title="NPM å‘åŒ…è‡ªåŠ¨åŒ–"></a>NPM å‘åŒ…è‡ªåŠ¨åŒ–</h3><p>å‘åŒ…æƒé™ä¸€èˆ¬åªæœ‰ä»“åº“æ‰€æœ‰è€…ä¸€ä¸ªäººæ‹¥æœ‰ï¼Œä½†æ˜¯ owner åŒæ—¶ç»´æŠ¤å¥½å‡ ä¸ª NPM è´¦å·ï¼Œæˆ–è€…æ˜¯ owner å¿½ç„¶å¾ˆå¿™å°†å‘å¸ƒæƒé™äº¤ç»™å…¶ä»–äººç®¡ç†å‘˜ä½†æ˜¯ä¸ä¾¿å‘ŠçŸ¥ NPM è´¦å·è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿç­”æ¡ˆæ˜¯å°† NPM å‘åŒ… CDï¼ˆæŒç»­éƒ¨ç½²ï¼‰åŒ–ï¼Œå…¬å¸ä¸€èˆ¬ä¼šåŸºäº Gitlab æˆ–è‡ªå»ºå¹³å°å®ç°è¯¥åŠŸèƒ½ã€‚ä½œä¸ºå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬å½“ç„¶æ˜¯ä½¿ç”¨ GitHub Actionã€‚</p><p>æ­£å¸¸çš„å•åŒ…é¡¹ç›®ï¼Œä½¿ç”¨ <a href="https://github.com/JS-DevTools/npm-publish">npm-publish</a> æˆ– <a href="https://github.com/pascalgn/npm-publish-action">npm-publish-action</a> è¿™ä¸¤ä¸ª GitHub Actionï¼Œè¿™å¹¶æ²¡æœ‰å¥½è®²çš„ã€‚ä½†æ˜¯åŸºäº lerna çš„å¤šåŒ…å•ä½“ä»“åº“å¹¶æ²¡æœ‰ç°æˆçš„æ’ä»¶å¯ä»¥ç”¨ï¼Œç…§ä¾‹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹è‡ªå·±å®ç°çš„æ­¥éª¤ï¼š</p><ol><li>åˆ¤æ–­ commit message æ˜¯å¦ä»¥ <code>chore(release):</code> å¼€å¤´<blockquote><p>é€šè¿‡ GitHub Action <code>startsWith(github.event.head_commit.message, &#39;chore(release):&#39;)</code> å®ç°</p></blockquote></li><li>é€šè¿‡ NPM publish token è®¤è¯ç™»å½•<blockquote><p>é€šè¿‡ <code>npm config set //registry.npmjs.org/:_authToken=$&#123;&#123; secrets.NPM_TOKEN &#125;&#125;</code> è®¤è¯</p></blockquote></li><li>æ‰§è¡Œ <code>lerna publish from-package --yes</code> å‘å¸ƒ<blockquote><p>éœ€è¦æœ¬åœ°å…ˆæ‰§è¡Œ <code>lerna version</code> ç³»åˆ—å‘½ä»¤æå‡ç‰ˆæœ¬</p></blockquote></li></ol><p>å®Œæ•´ GitHub Action å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">npm-publish</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">npm-publish:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">startsWith(github.event.head_commit.message,</span> <span class="string">&#x27;chore(release):&#x27;</span><span class="string">)</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">c-hive/gha-yarn-cache@v2</span> <span class="comment"># ç¼“å­˜ node_modules åŠ å¿«æ„å»ºé€Ÿåº¦</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Packages</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">install</span> <span class="string">--registry=https://registry.npmjs.org/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Authenticate</span> <span class="string">with</span> <span class="string">Registry</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npm config set //registry.npmjs.org/:_authToken=$&#123;NPM_TOKEN&#125;</span></span><br><span class="line"><span class="string"></span>        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">NPM_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.NPM_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Publish</span> <span class="string">package</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">lerna</span> <span class="string">publish</span> <span class="string">from-package</span> <span class="string">--yes</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†åœ¨å‘å¸ƒååŠæ—¶è·å–é€šçŸ¥ï¼Œæ´›ç«¹ä½¿ç”¨äº† <code>peter-evans/commit-comment</code> æ’ä»¶åœ¨å‘å¸ƒå¤±è´¥æˆ–æˆåŠŸåå¯¹ç›¸åº” commit è¿›è¡Œè¯„è®ºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ”¶åˆ°é‚®ä»¶å’Œç«™å†…é€šçŸ¥ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Create</span> <span class="string">commit</span> <span class="string">comment</span> <span class="string">after</span> <span class="string">publish</span> <span class="string">successfully</span></span><br><span class="line">  <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">success()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">peter-evans/commit-comment@v1</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      Hello Dear @youngjuning. This commit has been publish to NPM successfully.</span></span><br><span class="line"><span class="string">      &gt; Created by [commit-comment][1]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      [<span class="number">1</span>]<span class="string">:</span> <span class="string">https://github.com/peter-evans/commit-comment</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Create</span> <span class="string">commit</span> <span class="string">comment</span> <span class="string">after</span> <span class="string">publish</span> <span class="string">unsuccessfully</span></span><br><span class="line">  <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">failure()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">peter-evans/commit-comment@v1</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      Hello Dear @youngjuning. This commit has been publish to NPM unsuccessfully.</span></span><br><span class="line"><span class="string">      &gt; Created by [commit-comment][1]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      [<span class="number">1</span>]<span class="string">:</span> <span class="string">https://github.com/peter-evans/commit-comment</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;âš ï¸æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯&lt;a href=&quot;https://youngjuning.js.org/&quot;&gt;æ´›ç«¹ğŸ‹&lt;/a&gt;ï¼Œä¸€åªä½åœ¨æ­åŸçš„æœ¨ç³»å‰ç«¯ï¿½</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ç»„ä»¶åŒ–" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    
    
    <category term="React Native" scheme="https://youngjuning.js.org/tags/React-Native/"/>
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ç»„ä»¶åŒ–" scheme="https://youngjuning.js.org/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    
    <category term="ç»„ä»¶åº“" scheme="https://youngjuning.js.org/tags/%E7%BB%84%E4%BB%B6%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>æ˜é‡‘ä¸€ä¸‹ | ä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•</title>
    <link href="https://youngjuning.js.org/609531a3ab52/"/>
    <id>https://youngjuning.js.org/609531a3ab52/</id>
    <published>2023-02-28T16:55:47.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>âš ï¸æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½</p></blockquote><blockquote><p>æ¸©é¦¨æç¤ºï¼šç»“åˆæœ¬æ–‡é…å¥—<a href="https://github.com/youngjuning/juejin-me">æºç </a>é˜…è¯»ä½“éªŒæ›´ä½³ï¼</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å›¢é˜Ÿé™æœ¬ææ•ˆçš„åŸºå»ºä¸­ï¼Œæ´›ç«¹å¼€å‘äº†ä¸€æ¬¾ vscode æ’ä»¶ï¼Œç¬¬ä¸€ç‰ˆæˆ‘ä½¿ç”¨çš„æ˜¯ vscode å†…ç½® UIï¼Œè™½è¯´ä¹Ÿèƒ½ç”¨ï¼Œä½†æ˜¯ç”¨æˆ·ä½“éªŒæ¬ ä½³ã€‚ç”±äº vscode å†…ç½® UI ä¸å¤Ÿçµæ´»ï¼Œä¸€ç•ªè°ƒç ”åæˆ‘å†³å®šä½¿ç”¨ webview é‡æ„ã€‚</p><p>å¼€å‘è¿‡ vscode æ’ä»¶çš„åŒå­¦å¯èƒ½å¯¹æ’ä»¶å¼€å‘çŸ¥è¯†ç‚¹å¤šã€æ–‡æ¡£é˜…è¯»å›°éš¾ã€å‚è€ƒèµ„æ–™å°‘æœ‰æ‰€ä½“ä¼šã€‚åŸºäº webview å¼€å‘æ’ä»¶æ›´æ˜¯å¦‚æ­¤ï¼Œå¯»éç½‘ç»œï¼Œè™½ç„¶æœ‰ä¼˜ç§€çš„é¡¹ç›®ï¼Œä½†å´æ²¡æœ‰å®Œæ•´ä¸”ä¼˜ç§€çš„æ•™ç¨‹ã€‚ä¸ºäº†ä¿®ç‚¼ vscode å¼€å‘çµåŠ›ï¼Œä¸å¦¨å’Œæ´›ç«¹ä¸€èµ·æŒ‘æˆ˜ä»é›¶åˆ°ä¸€å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ’ä»¶ã€‚</p><h2 id="Hello-vscode"><a href="#Hello-vscode" class="headerlink" title="Hello vscode"></a>Hello vscode</h2><p>è‹±é›„å¤šèµ·äºå¸‚äº•ï¼Œé«˜æ¥¼çš†èµ·äºå¹³åœ°ã€‚å†ä¼Ÿå¤§çš„è½¯ä»¶ä¹Ÿéƒ½æ˜¯ä» Hello World å¼€å§‹çš„ï¼Œæœ¬ç« å°½é‡ç”¨æœ€ç®€æ´çš„è¯­è¨€æè¿°ä¸€ä¸ª vscode æ’ä»¶ Hello World çš„è¯ç”Ÿã€‚</p><h3 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®"></a>åˆå§‹åŒ–é¡¹ç›®</h3><p>å®‰è£… <a href="http://yeoman.io/">Yeoman</a> å’Œ <a href="https://www.npmjs.com/package/generator-code">VS Code Extension Generator</a>ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g yo generator-code</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè„šæ‰‹æ¶ä¼šç”Ÿæˆä¸€ä¸ªå¯ä»¥ç«‹é©¬å¼€å‘çš„é¡¹ç›®ã€‚è¿è¡Œç”Ÿæˆå™¨ï¼Œç„¶åå¡«å¥½ä¸‹åˆ—å­—æ®µï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ yo code</span><br><span class="line"><span class="comment">#     _-----_     â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span></span><br><span class="line"><span class="comment">#    |       |    â”‚   Welcome to the Visual  â”‚</span></span><br><span class="line"><span class="comment">#    |--(o)--|    â”‚   Studio Code Extension  â”‚</span></span><br><span class="line"><span class="comment">#   `---------Â´   â”‚        generator!        â”‚</span></span><br><span class="line"><span class="comment">#    ( _Â´U`_ )    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span></span><br><span class="line"><span class="comment">#    /___A___\   /</span></span><br><span class="line"><span class="comment">#     |  ~  |</span></span><br><span class="line"><span class="comment">#   __&#x27;.___.&#x27;__</span></span><br><span class="line"><span class="comment"># Â´   `  |Â° Â´ Y `</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ? What type of extension do you want to create? New Extension (TypeScript)</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the name of your extension? Juejin Posts</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the identifier of your extension? juejin-posts</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the description of your extension? æ˜é‡‘æ–‡ç« ç®¡ç†</span></span><br><span class="line"><span class="comment"># ? Initialize a git repository? Yes</span></span><br><span class="line"><span class="comment"># ? Bundle the source code with webpack? No</span></span><br><span class="line"><span class="comment"># ? Which package manager to use? yarn</span></span><br><span class="line"></span><br><span class="line">$ code ./juejin-posts</span><br></pre></td></tr></table></figure><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/IaJdlW">hello world</a></p></blockquote><h3 id="ä»£ç è§„èŒƒ"><a href="#ä»£ç è§„èŒƒ" class="headerlink" title="ä»£ç è§„èŒƒ"></a>ä»£ç è§„èŒƒ</h3><p>é»˜è®¤çš„è„šæ‰‹æ¶ç”Ÿæˆçš„ä¹Ÿæœ‰ ESLint é…ç½®ï¼Œä½†æ˜¯ Editorã€Prettier çš„é…ç½®éƒ½æ²¡æœ‰ï¼Œå¹¶ä¸” ESLint é…ç½®ä¹Ÿä¸ç¬¦åˆæˆ‘çš„ä¹ æƒ¯ã€‚æ´›ç«¹å…³äºå‰ç«¯å·¥ç¨‹åŒ–çš„åŒ…éƒ½åœ¨ <a href="https://github.com/youngjuning/luozhu">youngjuning&#x2F;luozhu</a>ï¼Œ ESlint é…ç½®çš„åŒ…æ˜¯ <code>@luozhu/eslint-config-*</code>ã€‚ç”±äºæˆ‘ä»¬å¼€å‘æ’ä»¶ä½¿ç”¨çš„æ˜¯ Typescriptï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹© <code>@luozhu/eslint-config-typescript</code>ã€‚</p><p><strong>å®‰è£…ä¾èµ–ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add @luozhu/eslint-config-typescript @luozhu/prettier-config prettier -D</span><br></pre></td></tr></table></figure><p><strong>å…·ä½“é…ç½®ï¼š</strong></p><p>é…ç½®æ¶‰åŠæ–‡ä»¶è¾ƒå¤šï¼Œè¯·å‚è€ƒ <a href="https://github.com/youngjuning/luozhu#coding-style">coding-style</a>ï¼Œä¸å…³å¿ƒçš„åŒå­¦ä¹Ÿå¯ä»¥ç›´æ¥ç•¥è¿‡ã€‚</p><p><strong>æäº¤æ£€æµ‹ï¼š</strong></p><p>å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add lint-staged yorkie -D</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;gitHooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;pre-commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;js,jsx,ts,tsx&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;eslint --fix&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;md,json&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;prettier --write&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>eslint â€“fixï¼š</strong></p><p>ä¿®æ”¹å®Œé…ç½®ä¹‹åéœ€è¦æ‰§è¡Œ fix å¯¹æ‰€æœ‰æ–‡ä»¶æ ¼å¼åŒ–ä¸€æ¬¡ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn lint --fix</span><br></pre></td></tr></table></figure><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/xzFAVE">chore: code style config</a></p></blockquote><h3 id="çº¦å®šå¼æäº¤"><a href="#çº¦å®šå¼æäº¤" class="headerlink" title="çº¦å®šå¼æäº¤"></a>çº¦å®šå¼æäº¤</h3><p>çº¦å®šå¼æäº¤æˆ‘ä½¿ç”¨çš„æ˜¯æ¸è¿›å¼è„šæ‰‹æ¶ <code>@luozhu/create-commitlint</code>ï¼Œåœ¨é¡¹ç›®ä¸­æ‰§è¡Œ <code>npx @luozhu/create-commitlint</code> å³å¯ä½¿é¡¹ç›®ç¬¦åˆè§„èŒƒåŒ–æäº¤çš„é…ç½®ã€‚å¯¹è§„èŒƒåŒ–æäº¤ä¸äº†è§£çš„åŒå­¦ï¼Œå¼ºçƒˆå»ºè®®è¯»ä¸€ä¸‹ <a href="https://juejin.cn/post/6877462747631026190/">ä¸€æ–‡æå®š Conventional Commits </a>ã€‚</p><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/Ld142y">chore: npx @luozhu&#x2F;create-commitlint</a></p></blockquote><h3 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>æŒ‰ä¸‹ <code>F5</code> å¼€å¯è°ƒè¯•ä¼šå‡ºç°[æ‰©å±•å¼€å‘å®¿ä¸»]çª—å£ï¼Œç„¶åæŒ‰ <code>Command+Shift+P</code> ç»„ä»¶é”®è¾“å…¥ <code>Hello World</code> å‘½ä»¤ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º vscode å¼¹å‡ºäº† <code>Hello World from Juejin Posts!</code> çš„æç¤ºã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc26d7d429f84564b88b55e9df60fcd7~tplv-k3u1fbpfcp-zoom-1.image"></p><p>åŒæ—¶æˆ‘ä»¬çš„å¼€å‘çª—å£ä¸­ï¼Œä¼šå‡ºç°ä¸€ä¸ª watch ä»»åŠ¡çš„ç»ˆç«¯ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75a15d0bd2cc4096af1a3f76173cbbe1~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å¼€å‘çª—å£çš„è°ƒè¯•æ§åˆ¶å°ä¼šè¾“å‡ºæ’ä»¶è¿è¡Œæ—¥å¿—ï¼ˆå¿½ç•¥çº¢è‰²çš„è­¦å‘Šï¼‰ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c31068ea0bca4d4793e35bdb16d70c0a~tplv-k3u1fbpfcp-zoom-1.image"></p><p>è°ƒè¯•æ‰§è¡Œçš„ä»»åŠ¡æ˜¯åœ¨ <code>.vscode/tasks.json</code> ä¸­é…ç½®çš„ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// See https://go.microsoft.com/fwlink/?LinkId=733558</span></span><br><span class="line"><span class="comment">// for the documentation about the tasks.json format</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span><span class="punctuation">,</span> <span class="comment">// é…ç½®çš„ç‰ˆæœ¬å·ã€‚</span></span><br><span class="line"><span class="attr">&quot;tasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// ä»»åŠ¡é…ç½®ã€‚é€šå¸¸æ˜¯å¤–éƒ¨ä»»åŠ¡è¿è¡Œç¨‹åºä¸­å·²å®šä¹‰ä»»åŠ¡çš„æ‰©å……ã€‚</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm&quot;</span><span class="punctuation">,</span> <span class="comment">// è¦è‡ªå®šä¹‰çš„ä»»åŠ¡ç±»å‹ã€‚</span></span><br><span class="line"><span class="attr">&quot;script&quot;</span><span class="punctuation">:</span> <span class="string">&quot;watch&quot;</span><span class="punctuation">,</span> <span class="comment">// è¦è‡ªå®šä¹‰çš„ npm è„šæœ¬ã€‚</span></span><br><span class="line"><span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$tsc-watch&quot;</span><span class="punctuation">,</span> <span class="comment">// è¦ä½¿ç”¨çš„é—®é¢˜åŒ¹é…ç¨‹åºã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ªé—®é¢˜åŒ¹é…ç¨‹åºå®šä¹‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„å’Œå¤šä¸ªé—®é¢˜åŒ¹é…ç¨‹åºã€‚</span></span><br><span class="line"><span class="attr">&quot;isBackground&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// æ‰§è¡Œçš„ä»»åŠ¡æ˜¯å¦ä¿æŒæ´»åŠ¨çŠ¶æ€å¹¶åœ¨åå°è¿è¡Œã€‚</span></span><br><span class="line"><span class="attr">&quot;presentation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// é…ç½®ç”¨äºæ˜¾ç¤ºä»»åŠ¡è¾“å‡ºå¹¶è¯»å–å…¶è¾“å…¥çš„é¢æ¿ã€‚</span></span><br><span class="line"><span class="attr">&quot;reveal&quot;</span><span class="punctuation">:</span> <span class="string">&quot;never&quot;</span> <span class="comment">// æ§åˆ¶è¿è¡Œä»»åŠ¡çš„ç»ˆç«¯æ˜¯å¦æ˜¾ç¤ºã€‚å¯æŒ‰é€‰é¡¹ &quot;revealProblems&quot; è¿›è¡Œæ›¿ä»£ã€‚é»˜è®¤è®¾ç½®ä¸ºâ€œå§‹ç»ˆâ€ã€‚</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// å®šä¹‰æ­¤ä»»åŠ¡å±äºçš„æ‰§è¡Œç»„ã€‚å®ƒæ”¯æŒ &quot;build&quot; ä»¥å°†å…¶æ·»åŠ åˆ°ç”Ÿæˆç»„ï¼Œä¹Ÿæ”¯æŒ &quot;test&quot; ä»¥å°†å…¶æ·»åŠ åˆ°æµ‹è¯•ç»„ã€‚</span></span><br><span class="line"><span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span> <span class="comment">// ä»»åŠ¡çš„æ‰§è¡Œç»„ã€‚</span></span><br><span class="line"><span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// å®šä¹‰æ­¤ä»»åŠ¡æ˜¯å¦ä¸ºç»„ä¸­çš„é»˜è®¤ä»»åŠ¡ã€‚</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h2><p>æˆ‘ä»¬çš„æ’ä»¶å¼€å‘å®Œæˆå‰ï¼Œæƒ³è¦åˆ†äº«ç»™å°ä¼™ä¼´ä½“éªŒå¯ä»¥å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œvscode ä¸ºæˆ‘ä»¬æä¾›äº† <a href="https://github.com/microsoft/vscode-vsce">vsce</a> å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬å°† vsce æ¨¡å—å®‰è£…åˆ°å…¨å±€ï¼Œç„¶åä½¿ç”¨ <code>vsce package</code> å‘½ä»¤å°è¯•æ‰“åŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vsce package</span><br><span class="line"> ERROR  Missing publisher name. Learn more: https://code.visualstudio.com/api/working-with-extensions/publishing-extension<span class="comment">#publishing-extensions</span></span><br></pre></td></tr></table></figure><p>å•Šï¼Œå’‹è¿˜æŠ¥é”™äº†ï¼Ÿ<code>publisher</code> æ˜¯å•¥ï¼Ÿï¼Ÿä¸€è„¸æ‡µé€¼ã€‚ä¸æ…Œï¼ŒæŒ‰<a href="https://code.visualstudio.com/api/working-with-extensions/publishing-extension#create-a-publisher">é“¾æ¥</a> æˆ‘çŸ¥é“äº† publisher æ˜¯ä¸€ä¸ªå¯ä»¥å°†æ‰©å±•å‘å¸ƒåˆ°Visual Studio Code Marketplace çš„èº«ä»½ã€‚æ¯ä¸ªæ‰©å±•éƒ½éœ€è¦åœ¨å…¶ <code>package.json</code> æ–‡ä»¶ä¸­åŒ…å«ä¸€ä¸ªå‘å¸ƒè€…åç§°ã€‚å¦‚æœæ³¨å†Œå‘å¸ƒè€…æˆ‘ä»¬åé¢è¯¦è¯´ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠ <code>publisher</code> è®¾ç½®ä¸º <code>luozhu</code>ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ vsce package</span><br><span class="line"> INFO  Detected presence of yarn.lock. Using <span class="string">&#x27;yarn&#x27;</span> instead of <span class="string">&#x27;npm&#x27;</span> (to override this pass <span class="string">&#x27;--no-yarn&#x27;</span> on the <span class="built_in">command</span> line).</span><br><span class="line"> ERROR  Make sure to edit the README.md file before you package or publish your extension.</span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf561381232b4690a5d7cd0378c267d7~tplv-k3u1fbpfcp-zoom-1.image"></p><p>é¢ï¼Œè£‚å¼€ï¼Œè¿™å’‹è¿˜æŠ¥é”™ï¼Œå‡è£…æ·¡å®šï¼Œè¯»ä¸€ä¸‹æç¤ºåŸæ¥æ˜¯è¦æˆ‘ä»¬ç¼–è¾‘ä¸€ä¸‹ README.mdï¼Œæ²¡é”™ï¼Œvscode æ¨¡æ¿é‡Œæœ‰åˆå§‹çš„ READMEï¼Œæˆ‘ä»¬éœ€è¦ç¼–è¾‘ä¸€ä¸‹æ‰å¯ä»¥æ‰“åŒ…ã€‚ä¿®æ”¹åå†æ¬¡å°è¯• <code>vsce package</code>ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/acfe2e957c9545578c7b6990371a3f0b~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç»ˆäºï¼Œæ‰“åŒ…æˆåŠŸï¼ä¸ºäº†è¿½æ±‚å®Œç¾ï¼Œæœ€åæˆ‘ä»¬å†æ¥åšä¸€äº›ä¼˜åŒ–å·¥ä½œï¼š</p><ol><li>æ‰§è¡Œ <code>vsce package</code> çš„æ—¶å€™åŠ ä¸Š <code>--no-yarn</code></li><li>åœ¨ <em>package.json</em> ä¸­åŠ ä¸Š <code>repository</code> å­—æ®µå³å¯çœ‹ä¸åˆ°ä»»ä½•è­¦å‘Šã€‚</li><li>ä¸ºäº†ä¾¿æ·ï¼Œæˆ‘ä»¬å°† vsce å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åæŠŠ <code>vsce package --no-yarn</code> æ·»åŠ åˆ° npm scripts ä¸­ã€‚</li><li><em>package.json</em> åŠ ä¸Š <code>license</code> å­—æ®µã€‚</li></ol><p>ç„¶åå†æ¬¡å°è¯• <code>yarn package</code> å°±å®Œç¾äº†ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a9a251834b945c8a882039020f56e4f~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>æç¤ºï¼švsce package ä¼šå…ˆæ‰§è¡Œ <code>vscode:prepublish</code> è¿™ä¸ªé¢„å‘å¸ƒè„šæœ¬å»ç¼–è¯‘é¡¹ç›®ã€‚</p></blockquote><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/ZCp4qU">chore: config vsce package</a></p></blockquote><h3 id="æ‰“åŒ…åŸç†"><a href="#æ‰“åŒ…åŸç†" class="headerlink" title="æ‰“åŒ…åŸç†"></a>æ‰“åŒ…åŸç†</h3><p>å¦‚è¿‡ä½ ä¹Ÿè·Ÿç€ä¸€è·¯æ•²åˆ°äº†è¿™é‡Œï¼Œæ­¤æ—¶ä½ ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•å‘ç° <code>vsix</code> ç»“å°¾çš„æ–‡ä»¶ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2c0846bd66747ceab0c09524a209b28~tplv-k3u1fbpfcp-zoom-1.image"></p><p>è¿™å°±æ˜¯ vscode æ’ä»¶çš„å®‰è£…åŒ…ï¼Œæˆ‘ä»¬å…ˆä¸æ€¥ç€å®‰è£…ï¼Œå…ˆä¸€èµ·æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚å°è¯•ç”¨å½’æ¡£å·¥å…·è§£å‹åå¾—åˆ°å¦‚ä¸‹ç›®å½•æ–‡ä»¶å¤¹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/182c365a0690467cb0bd8b0d1490c175~tplv-k3u1fbpfcp-zoom-1.image"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¼–è¯‘åçš„æ–‡ä»¶å¤¹ <code>out</code> å’Œå…¶ä»–ä¸€äº›æ–‡ä»¶æ˜¯è¢«ç›´æ¥å‹ç¼©è¿›å®‰è£…åŒ…çš„ï¼Œèªæ˜çš„ä½ è‚¯å®šå‘ç°äº† <code>.cz-config.js</code>ã€<code>.prettierrc.js</code> å’Œ <code>commitlint.config.js</code> è¿™ç§å¼€å‘æ—¶æ–‡ä»¶ä¹Ÿè¢«å‹ç¼©äº†ï¼Œè¿è¡Œæ’ä»¶å®Œå…¨ç”¨ä¸åˆ°ï¼Œè¿™æ˜æ˜¾ä¸åˆç†ã€‚å…¶å®å’Œå…¶ä»–æ’ä»¶ä½“ç³»ä¸€æ ·ï¼Œvscode ä¹Ÿæä¾›äº† <code>.vscodeignore</code> æ¥å®ç°æ‰“åŒ…å¿½ç•¥é…ç½®ï¼Œæˆ‘ä»¬å°†ä»¥ä¸Šæ— å…³æ–‡ä»¶å¿½ç•¥é‡æ–°æ‰“åŒ…å³å¯ã€‚</p><p>åŸç†å°±è¿™ï¼Ÿä¸å­˜åœ¨çš„ï¼Œæˆ‘ä»¬æ‰“å¼€ <code>extension.js</code> ä¼šå‘ç°å¼•ç”¨äº† <code>vscode</code> è¿™ä¸ªåŒ…ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bb42881e49a94456aeac417f6b5cba71~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ä½†æ˜¯æˆ‘ä»¬çš„å®‰è£…åŒ…ä¸­å¹¶æ²¡æœ‰ _node_modules_ï¼Œé‚£ä¹ˆ vscode è¿™ä¸ªåŒ…å­˜åœ¨åœ¨å“ªé‡Œå‘¢ï¼Ÿæˆ‘çŒœçš„æ˜¯æŒ‚åœ¨ node ç¯å¢ƒä¸Šäº†ï¼Œè¯»äº†<a href="https://is.gd/33GTcH">æºç </a>åæˆ‘å‘ç°æˆ‘ç«Ÿç„¶æ˜¯å¯¹çš„ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e796fcf81b64fd7a18d9c3e36fbefdf~tplv-k3u1fbpfcp-zoom-1.image"></p><p>vscode å®ç°äº†æ‹¦æˆªå™¨åœ¨åŠ è½½ Node ç¯å¢ƒçš„æ—¶å€™å°† vscode ç»™æ·»åŠ åˆ°äº†å†…ç½®åŒ…ä¸­ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å‡å°æ’ä»¶çš„ä½“ç§¯ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚æœä½¿ç”¨ä¸‰æ–¹æ’ä»¶å‘¢ï¼Ÿä»¥å¸¸ç”¨çš„ lodash ä¸ºä¾‹ï¼Œå®‰è£… lodash ä¹‹åé‡æ–°æ‰“åŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ yarn package</span><br><span class="line">yarn run v1.22.10</span><br><span class="line">$ vsce package --no-yarn</span><br><span class="line">Executing prepublish script <span class="string">&#x27;npm run vscode:prepublish&#x27;</span>...</span><br><span class="line"></span><br><span class="line">&gt; juejin-posts@0.0.1 vscode:prepublish</span><br><span class="line">&gt; yarn run compile</span><br><span class="line"></span><br><span class="line">$ tsc -p ./</span><br><span class="line">This extension consists of 1060 files, out of <span class="built_in">which</span> 1049 are JavaScript files. For performance reasons, you should bundle your extension: https://aka.ms/vscode-bundle-extension . You should also exclude unnecessary files by adding them to your .vscodeignore: https://aka.ms/vscode-vscodeignore</span><br><span class="line"> DONE  Packaged: /Users/luozhu/Desktop/playground/juejin-posts/juejin-posts-0.0.1.vsix (1060 files, 644.72KB)</span><br><span class="line">âœ¨  Done <span class="keyword">in</span> 5.54s.</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™æç¤ºæˆ‘ä»¬æœ‰ 1000 å¤šä¸ªæ–‡ä»¶ï¼Œå¤§æ¦‚ç‡ <em>node_modules</em> æ–‡ä»¶å¤¹è¢«æ‰“åŒ…äº†ï¼Œæˆ‘ä»¬æ¥è§£å‹ä¸‹è§è¯ä¸€ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/917b7742991640c9a0b03314cef24ce6~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ä¸å‡ºæ‰€æ–™ï¼Œvscode é»˜è®¤çš„æ‰“åŒ…æ–¹å¼å°±æ˜¯ç®€å•çš„ç¼–è¯‘æ‹·è´ï¼Œé€šè¿‡å¿½ç•¥æ–‡ä»¶å‡å°ä½“ç§¯ä¹Ÿæ˜¯æ¯æ°´è½¦è–ªã€‚è€Œä¸” vscode æ‰©å±•çš„è§„æ¨¡å¾€å¾€å¢é•¿å¾ˆå¿«ã€‚å®ƒä»¬æ˜¯åœ¨å¤šä¸ªæºæ–‡ä»¶ä¸­ç¼–å†™çš„ï¼Œå¹¶ä¾èµ–äº npm çš„æ¨¡å—ã€‚åˆ†è§£å’Œé‡ç”¨æ˜¯å¼€å‘çš„æœ€ä½³å®è·µï¼Œä½†åœ¨å®‰è£…å’Œè¿è¡Œæ‰©å±•æ—¶ï¼Œå®ƒä»¬æ˜¯æœ‰ä»£ä»·çš„ã€‚åŠ è½½ 100 ä¸ªå°æ–‡ä»¶è¦æ¯”åŠ è½½ä¸€ä¸ªå¤§æ–‡ä»¶æ…¢å¾—å¤šã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ¨èæ†ç»‘çš„åŸå› ã€‚æ†ç»‘æ˜¯å°†å¤šä¸ªå°çš„æºæ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶çš„è¿‡ç¨‹ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œæœ‰ä¸åŒçš„æ‰“åŒ…å·¥å…·å¯ä»¥ç”¨ï¼Œæµè¡Œçš„æœ‰ rollup.jsã€Parcelã€esbuild å’Œ webpackï¼Œå®˜æ–¹è„šæ‰‹æ¶é»˜è®¤åªèƒ½é€‰ webpackï¼Œæˆ‘ä»¬è¿™é‡Œæ¨èç›´æ¥ä½¿ç”¨æ›´å¿«æ›´å¼ºçš„ esbuildã€‚</p><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/ZCp4qU">chore: ignore config file when package</a>ã€<a href="https://is.gd/ggpQmv">chore: add esModuleInterop to tsconfig</a></p></blockquote><h3 id="ä½¿ç”¨-esbuild-ä¼˜åŒ–æ‰“åŒ…"><a href="#ä½¿ç”¨-esbuild-ä¼˜åŒ–æ‰“åŒ…" class="headerlink" title="ä½¿ç”¨ esbuild ä¼˜åŒ–æ‰“åŒ…"></a>ä½¿ç”¨ esbuild ä¼˜åŒ–æ‰“åŒ…</h3><p><strong>å®‰è£…ä¾èµ–ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add -D esbuild</span><br></pre></td></tr></table></figure><p><strong>npm scriptsï¼š</strong></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line"><span class="deletion">-    &quot;vscode:prepublish&quot;: &quot;yarn run compile&quot;,</span></span><br><span class="line"><span class="deletion">-    &quot;compile&quot;: &quot;tsc -p ./&quot;,</span></span><br><span class="line"><span class="deletion">-    &quot;watch&quot;: &quot;tsc -watch -p ./&quot;,</span></span><br><span class="line"><span class="deletion">-    &quot;pretest&quot;: &quot;yarn run compile &amp;&amp; yarn run lint&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;vscode:prepublish&quot;: &quot;yarn esbuild-base --minify&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;esbuild-base&quot;: &quot;esbuild ./src/extension.ts --bundle --outfile=out/extension.js --external:vscode --format=cjs --platform=node&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;esbuild&quot;: &quot;yarn esbuild-base --sourcemap&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;esbuild-watch&quot;: &quot;yarn esbuild-base --sourcemap --watch&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;test-compile&quot;: &quot;tsc -p ./&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;pretest&quot;: &quot;yarn test-compile &amp;&amp; yarn lint&quot;,</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šç”±äº watch æ”¹æˆäº† esbuild-watchï¼Œæ‰€ä»¥ <em>.vscode&#x2F;tasks.json</em> ä¸­çš„ scripts å­æ®µä¹Ÿéœ€è¦åšç›¸åº”ä¿®æ”¹ã€‚</p></blockquote><p><strong>vscode tasksï¼š</strong></p><p>ç†è®ºä¸Šæˆ‘ä»¬æŠŠæ‰“åŒ…å‘½ä»¤æ”¹æˆ esbuild ä¹‹åï¼Œåº”è¯¥å°† vscode ä»»åŠ¡ä¸­çš„é—®é¢˜åŒ¹é…ç¨‹åºè®¾ç½®ä¸º <code>$esbuild-watch</code>ï¼Œä½†æ˜¯ vscode ä¼šæç¤ºæˆ‘ä»¬æ— æ³•è¯†åˆ«çš„é—®é¢˜åŒ¹é…ç¨‹åºï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4b51c79ee1344b6f92a3f2efaf9ef7aa~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å°è¯•æœç´¢æ‰©å±•ï¼Œæœç„¶æœ‰ä¸€ä¸ª esbuild Problem Matchers æ’ä»¶ï¼Œæˆ‘ä»¬å°†å…¶å®‰è£…å¹¶æ·»åŠ  <code>&quot;connor4312.esbuild-problem-matchers&quot;</code> åˆ° <em>.vscode&#x2F;extensions.json</em> æ–‡ä»¶çš„ <code>recommendations</code> ä¸­ã€‚</p><p><strong>å¿½ç•¥æ–‡ä»¶ï¼š</strong></p><p>æˆ‘ä»¬ä½¿ç”¨ esbuild æ‰“åŒ…åä¼šå°†ä½¿ç”¨åˆ°çš„ä»£ç éƒ½æ‰“åŒ…è¿› <code>out/extension.js</code>ï¼Œä½†æ˜¯ vsce çš„æ‰“åŒ…æœºåˆ¶æ˜¯ä¸ç®¡ä½ æœ‰æ²¡æœ‰ç”¨åˆ°éƒ½ä¼šæŠŠ <code>dependencies</code> ä¸­çš„åŒ…æ‰“è¿›å®‰è£…åŒ…ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°† <em><em>node_modules</em></em> å¿½ç•¥æ‰ã€‚</p><p><strong>æˆæœå±•ç¤ºï¼š</strong></p><p>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®‰è£…åŒ…çš„ä½“ç§¯å¤§å¤§å‡å°äº†ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba86286be7fc41f4b8325a3e0be0d2d2~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/F12xNk">chore: config esbuild</a></p></blockquote><h2 id="é›†æˆ-umijs"><a href="#é›†æˆ-umijs" class="headerlink" title="é›†æˆ umijs"></a>é›†æˆ umijs</h2><h3 id="åˆå§‹åŒ–-umi-é¡¹ç›®"><a href="#åˆå§‹åŒ–-umi-é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ– umi é¡¹ç›®"></a>åˆå§‹åŒ– umi é¡¹ç›®</h3><p>ä½¿ç”¨ umi è„šæ‰‹æ¶åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª <em>web</em> ç›®å½•ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> web &amp;&amp; <span class="built_in">cd</span> web</span><br></pre></td></tr></table></figure><p>é€šè¿‡å®˜æ–¹å·¥å…·åˆ›å»ºé¡¹ç›®ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn create @umijs/umi-app</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <em>.umirc.ts</em> é…ç½®ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig, <span class="title class_">IConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">nodeModulesTransform</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">routes</span>: [&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;@/pages/index&#x27;</span> &#125;],</span><br><span class="line">  <span class="attr">fastRefresh</span>: &#123;&#125;, <span class="comment">// å¼€å‘æ—¶å¯ä»¥ä¿æŒç»„ä»¶çŠ¶æ€ï¼ŒåŒæ—¶ç¼–è¾‘æä¾›å³æ—¶åé¦ˆã€‚</span></span><br><span class="line">  <span class="attr">history</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;memory&#x27;</span>, <span class="comment">// é»˜è®¤çš„ç±»å‹æ˜¯ `browser`ï¼Œä½†æ˜¯ç”±äº vscode webview ç¯å¢ƒä¸å­˜åœ¨æµè§ˆå™¨è·¯ç”±ï¼Œæ”¹æˆ `memory` å’Œ `hash` éƒ½å¯ä»¥</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">// éœ€è¦åœ¨ dev æ—¶å†™æ–‡ä»¶åˆ°è¾“å‡ºç›®å½•ï¼Œè¿™æ ·ä¿è¯å¼€å‘é˜¶æ®µæœ‰ js/css æ–‡ä»¶</span></span><br><span class="line">    <span class="attr">writeToDisk</span>: <span class="function"><span class="params">filePath</span> =&gt;</span></span><br><span class="line">      [<span class="string">&#x27;umi.js&#x27;</span>, <span class="string">&#x27;umi.css&#x27;</span>].<span class="title function_">some</span>(<span class="function"><span class="params">name</span> =&gt;</span> filePath.<span class="title function_">endsWith</span>(name)),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">IConfig</span>);</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>package.json</code> åŠ å…¥ <code>name</code>ã€<code>version</code>ã€<code>description</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;web&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;web for juejin-posts&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="å¿½ç•¥æ–‡ä»¶"><a href="#å¿½ç•¥æ–‡ä»¶" class="headerlink" title="å¿½ç•¥æ–‡ä»¶"></a>å¿½ç•¥æ–‡ä»¶</h3><p><strong>.gitignoreï¼š</strong></p><p>å°† vscode æ‰©å±•å’Œ umijs è„šæ‰‹æ¶ç”Ÿæˆçš„ gitignore åˆå¹¶ä¸ºä¸€ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># See https://help.github.com/articles/ignoring-files/ for more about ignoring files.</span><br><span class="line"></span><br><span class="line"># vscode</span><br><span class="line">.vscode-test/</span><br><span class="line">*.vsix</span><br><span class="line"></span><br><span class="line"># dependencies</span><br><span class="line">node_modules</span><br><span class="line">npm-debug.log</span><br><span class="line">yarn-error.log</span><br><span class="line">package-lock.json</span><br><span class="line"></span><br><span class="line"># production</span><br><span class="line">out</span><br><span class="line">dist</span><br><span class="line"></span><br><span class="line"># misc</span><br><span class="line">.DS_Store</span><br><span class="line"></span><br><span class="line"># umi</span><br><span class="line">**/src/.umi</span><br><span class="line">**/src/.umi-production</span><br><span class="line">**/src/.umi-test</span><br><span class="line">**/.env.local</span><br><span class="line">web/yarn.lock</span><br></pre></td></tr></table></figure><p><strong>.vscodeignoreï¼š</strong></p><p>ç”±äº vscode æ‰“åŒ…çš„æ—¶å€™åªéœ€è¦è·å– umijs æ‰“åŒ…åçš„äº§ç‰©ï¼Œæ‰€æœ‰åŠ å…¥ <code>web/**</code> å’Œ <code>!web/dist/**</code> å°†æ— ç”¨çš„æ–‡ä»¶å¿½ç•¥æ‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.vscode/**</span><br><span class="line">.vscode-test/**</span><br><span class="line">out/test/**</span><br><span class="line"></span><br><span class="line">src/**</span><br><span class="line">.gitignore</span><br><span class="line">.yarnrc</span><br><span class="line">vsc-extension-quickstart.md</span><br><span class="line">**/tsconfig.json</span><br><span class="line">**/*.map</span><br><span class="line">**/*.ts</span><br><span class="line"></span><br><span class="line">.cz-config.js</span><br><span class="line">.prettierrc.js</span><br><span class="line">.commitlintrc.js</span><br><span class="line">**/node_modules/**</span><br><span class="line">yarn-error.log</span><br><span class="line">web/**</span><br><span class="line">!web/dist/**</span><br></pre></td></tr></table></figure><h3 id="yarn-workspace"><a href="#yarn-workspace" class="headerlink" title="yarn workspace"></a>yarn workspace</h3><p>ç”±äºæˆ‘ä»¬çš„é¡¹ç›®æ˜¯ vscode æ‰©å±•å’Œ web é¡¹ç›®æ··åˆçš„é¡¹ç›®ã€‚ä¸ºäº†æ–¹ä¾¿ç®¡ç†è„šæœ¬å’Œä¾èµ–ï¼Œæˆ‘ä»¬å¼•å…¥äº† <code>yarn workspace</code> æ¥ç®¡ç†é¡¹ç›®ã€‚åœ¨æ ¹ç›®å½•çš„ <em>package.json</em> ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®å³å¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="string">&quot;true&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;workspaces&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;web&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="è°ƒè¯•-1"><a href="#è°ƒè¯•-1" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>ç”±äºæˆ‘ä»¬çš„ web é¡¹ç›®ä¹Ÿéœ€è¦ç¼–è¯‘ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹ vscode <code>launch.json</code> åŠ å…¥ web é¡¹ç›®çš„ç¼–è¯‘ä»»åŠ¡ã€‚é…ç½®å‚è€ƒäº† <a href="http://tny.im/bOqQT">appworks</a>ã€‚</p><p>é¦–å…ˆåœ¨æ ¹ç›®å½•çš„ <code>package.json</code> çš„ scripts ä¸­æ·»åŠ :</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;web-build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn workspace web run build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;web-watch&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn workspace web run start&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹ <em>.vscode&#x2F;launch.json</em> é…ç½®ä¸ºï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A launch configuration that compiles the extension and then opens it inside a new window</span></span><br><span class="line"><span class="comment">// Use IntelliSense to learn about possible attributes.</span></span><br><span class="line"><span class="comment">// Hover to view descriptions of existing attributes.</span></span><br><span class="line"><span class="comment">// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;compounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">// å¤åˆåˆ—è¡¨ã€‚æ¯ä¸ªå¤åˆå¯å¼•ç”¨å¤šä¸ªé…ç½®ï¼Œè¿™äº›é…ç½®å°†ä¸€èµ·å¯åŠ¨ã€‚</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Debug Extension&quot;</span><span class="punctuation">,</span> <span class="comment">// å¤åˆçš„åç§°ã€‚åœ¨å¯åŠ¨é…ç½®ä¸‹æ‹‰èœå•ä¸­æ˜¾ç¤ºã€‚</span></span><br><span class="line">      <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="comment">// å°†ä½œä¸ºæ­¤å¤åˆçš„ä¸€éƒ¨åˆ†å¯åŠ¨çš„é…ç½®åç§°ã€‚</span></span><br><span class="line">        <span class="string">&quot;Run Extension&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;Watch Webview&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;presentation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;order&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Watch Webview&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;attach&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm: web-watch&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Run Extension&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;extensionHost&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;--extensionDevelopmentPath=$&#123;workspaceFolder&#125;&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;outFiles&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;$&#123;workspaceFolder&#125;/out/**/*.js&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;defaultBuildTask&#125;&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å®Œæˆåè¿›å…¥ VS Codeï¼ŒæŒ‰ä¸‹<code>F5</code>ï¼Œä½ ä¼šç«‹å³çœ‹åˆ°ä¸€ä¸ª<strong>æ’ä»¶å‘å¼€ä¸»æœº</strong>çª—å£ï¼Œå…¶ä¸­å°±è¿è¡Œç€æ’ä»¶ã€‚è¿™æ—¶å€™è¿è¡Œä½ ä¼šå‘ç°æ§åˆ¶å°æŠ¥ä¸€ä¸‹é”™è¯¯ âŒï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">error TS6059: File &#x27;/Users/luozhu/Desktop/github/juejin-posts/web/src/pages/index.tsx&#x27; is not under &#x27;rootDir&#x27; &#x27;/Users/luozhu/Desktop/github/juejin-posts/src&#x27;. &#x27;rootDir&#x27; is expected to contain all source files.</span><br><span class="line">  The file is in the program because:</span><br><span class="line">    Matched by include pattern &#x27;**/*&#x27; in &#x27;/Users/luozhu/Desktop/github/juejin-posts/tsconfig.json&#x27;</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯å› ä¸º umi çš„çº¦å®šçš„é¡¹ç›®ç»“æ„å’Œ vscode extension éƒ½åŒ…å« <em>src</em> ç›®å½•ã€‚ç”±äº vscode æ’ä»¶å’Œ umi çš„ç¼–è¯‘æ˜¯åˆ†å¼€çš„ï¼Œæˆ‘ä»¬åœ¨æ ¹ç›®å½•çš„ <em>tsconfig.json</em> ä¸­å°† <em>web</em> ç›®å½•å¿½ç•¥å³å¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;web&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œä½ å¯ä»¥æŒ‰ä¸‹ <code>F5</code> çœ‹åˆ°<strong>æ’ä»¶å‘å¼€ä¸»æœº</strong>çª—å£çš„åŒæ—¶è¿˜ä¼šçœ‹åˆ°ä¸¤ä¸ªè°ƒè¯•ä»»åŠ¡ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d4b3b6f2522643fb9bc574e2f9982775~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>æ³¨æ„ğŸ“¢ï¼šè¯·é€‰æ‹© Debug Extension è°ƒè¯•ä»»åŠ¡è€Œä¸æ˜¯ Run Extension</p></blockquote><h3 id="å…¶ä»–ä¼˜åŒ–å·¥ä½œ"><a href="#å…¶ä»–ä¼˜åŒ–å·¥ä½œ" class="headerlink" title="å…¶ä»–ä¼˜åŒ–å·¥ä½œ"></a>å…¶ä»–ä¼˜åŒ–å·¥ä½œ</h3><ol><li>ç”±äºåŸºäº yarn workspaceï¼Œæˆ‘ä»¬æŠŠå…¬ç”¨çš„ä¾èµ–åˆå¹¶</li><li>åˆå¹¶ Eslint é…ç½®å¹¶ä½¿ç”¨ <code>@luozhu/eslint-config-react-typescrip</code></li><li>åˆå¹¶ Editorconfig å’Œ Prettier é…ç½®</li><li>æ·»åŠ  <code>prestart</code> å’Œ <code>prebuild</code> script</li><li>è®¾ç½® <code>HTML=none umi build</code></li></ol><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/bt3WHr">chore: config umijs</a></p></blockquote><h2 id="vscode-æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ"><a href="#vscode-æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="vscode æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ"></a>vscode æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ</h2><p>åœ¨å¼€å§‹ webview èƒ½åŠ›å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ vscode æ’ä»¶å¼€å‘çš„æ ¸å¿ƒæ¦‚å¿µã€‚ä¸ºäº†æœ‰ä¸ªå…¨å±€çš„ç†è§£ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æˆ‘ä»¬ç°åœ¨é¡¹ç›®çš„ä¸»è¦ç›®å½•ç»“æ„ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ CHANGELOG.md <span class="comment"># åŸºäº standard-version ç”Ÿæˆçš„æ›´æ–°æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ package.json <span class="comment"># vscode åŒ…é…ç½®æ–‡ä»¶ï¼Œè¯¸å¦‚æ’ä»¶ LOGOã€åå­—ã€æè¿°ã€æ³¨å†Œæ¿€æ´»äº‹ä»¶</span></span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â””â”€â”€ extension.ts <span class="comment"># æ’ä»¶å…¥å£æ–‡ä»¶ï¼Œæš´éœ² activate æ–¹æ³•ç”¨äºæ³¨å†Œå‘½ä»¤å’Œåˆå§‹åŒ–ä¸€äº›é…ç½®ï¼Œæš´éœ² deactivate æ–¹æ³•ç”¨äºæ’ä»¶å…³é—­å‰æ‰§è¡Œæ¸…ç†å·¥ä½œ</span></span><br><span class="line">â”œâ”€â”€ tsconfig.json <span class="comment"># vscode çš„ç¼–è¯‘é…ç½®</span></span><br><span class="line">â”œâ”€â”€ web <span class="comment"># åŸºäº umi çš„ webï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åè¾¹ webview è¦æ‰¿è½½çš„å†…å®¹</span></span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure><p>ä»ç›®å½•ç»“æ„å¯ä»¥çœ‹å‡ºï¼Œå…³é”®çš„æ–‡ä»¶æ˜¯ <code>package.json</code> å’Œ <code>extension.ts</code>ï¼Œæˆ‘ä»¬ä»¥ helloWorld å‘½ä»¤ä¸ºä¾‹ä»‹ç»ä¸‹ vscode æ’ä»¶çš„ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚</p><h3 id="1-æ¿€æ´»äº‹ä»¶"><a href="#1-æ¿€æ´»äº‹ä»¶" class="headerlink" title="1. æ¿€æ´»äº‹ä»¶"></a>1. æ¿€æ´»äº‹ä»¶</h3><p><strong>æ¿€æ´»äº‹ä»¶</strong>æ˜¯åœ¨ <code>package.json</code> ä¸­çš„ <code>activationEvents</code> å­—æ®µå£°æ˜çš„ä¸€ä¸ª JSON æ•°ç»„å¯¹è±¡ã€‚ä¸ºäº†æ³¨å†Œ helloWorld è¿™ä¸ªå‘½ä»¤ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯æ³¨å†Œæ¿€æ´»äº‹ä»¶ï¼Œæ¿€æ´»äº‹ä»¶ç±»å‹æœ‰å¾ˆå¤šï¼Œæ³¨å†Œå‘½ä»¤çš„æ¿€æ´»äº‹ä»¶æ˜¯ <code>onCommand</code>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;activationEvents&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;onCommand:juejin-posts.helloWorld&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2-å‘å¸ƒå†…å®¹é…ç½®"><a href="#2-å‘å¸ƒå†…å®¹é…ç½®" class="headerlink" title="2. å‘å¸ƒå†…å®¹é…ç½®"></a>2. å‘å¸ƒå†…å®¹é…ç½®</h3><p>å‘å¸ƒå†…å®¹é…ç½®ï¼ˆ å³ VS Code ä¸ºæ’ä»¶æ‰©å±•æä¾›çš„é…ç½®é¡¹ï¼‰æ˜¯ <code>package.json</code> çš„ <code>contributes</code> å­—æ®µï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­æ³¨å†Œå„ç§é…ç½®é¡¹æ‰©å±• VS Code çš„èƒ½åŠ›ã€‚ä¸Šä¸€æ­¥æˆ‘ä»¬æ³¨å†Œçš„ helloWorld æ¿€æ´»äº‹ä»¶åªæ˜¯å‘Šè¯‰äº† vscode å¯ä»¥é€šè¿‡ <code>juejin-posts.helloWorld</code> å‘½ä»¤è§¦å‘ã€‚æˆ‘ä»¬è¿˜éœ€è¦å† <code>contributes.commands</code> ä¸­æ³¨å†Œæˆ‘ä»¬çš„ <code>juejin-posts.helloWorld</code> å‘½ä»¤ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;commands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;juejin-posts.helloWorld&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="3-VS-Code-API"><a href="#3-VS-Code-API" class="headerlink" title="3. VS Code API"></a>3. VS Code API</h3><p><strong>VS Code API</strong> æ˜¯ VS Code æä¾›ç»™æ’ä»¶ä½¿ç”¨çš„ä¸€ç³»åˆ— Javascript APIã€‚é€šè¿‡å‰ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µçš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å·²ç»æ³¨å†Œå¥½äº†å‘½ä»¤å’Œäº‹ä»¶ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å¿…ç„¶å°±æ˜¯æ³¨å†Œäº‹ä»¶å›è°ƒã€‚äº‹ä»¶å›è°ƒåœ¨ vscode ä¸­æ˜¯é€šè¿‡ <code>vscode.commands.registerCommand</code> å‡½æ•°æ¥æ³¨å†Œçš„ï¼Œä¸‹é¢ ğŸ‘‡ğŸ» æ˜¯æˆ‘ä»¬åœ¨å…¥å£æ–‡ä»¶ <code>src/extension.ts</code> ä¸­æ³¨å†Œ <code>juejin-posts.helloWorld</code> å‘½ä»¤ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vscode è¿™ä¸ªæ¨¡å—åŒ…å«äº† VS Code æ‰©å±•çš„ API</span></span><br><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•å½“ä½ çš„æ‰©å±•æ¿€æ´»æ—¶è°ƒç”¨ï¼Œæ‰©å±•ä¼šåœ¨å‘½ä»¤é¦–æ¬¡æ‰§è¡Œæ—¶æ¿€æ´»</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="comment">// å½“ä½ çš„æ‰©å±•è¢«æ¿€æ´»æ—¶ï¼Œè¿™è¡Œä»£ç å°†åªè¢«æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">// ä½¿ç”¨ console.log è¾“å‡ºæ—¥å¿—ä¿¡æ¯æˆ–ä½¿ç”¨ console.error è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Congratulations, your extension &quot;juejin-posts&quot; is now active!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¥å£å‘½ä»¤å·²ç»åœ¨ package.json æ–‡ä»¶ä¸­å®šä¹‰å¥½äº†ï¼Œç°åœ¨è°ƒç”¨ registerCommand æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// registerCommand ä¸­çš„å‚æ•°å¿…é¡»ä¸ package.json ä¸­çš„ command ä¿æŒä¸€è‡´</span></span><br><span class="line">  <span class="keyword">const</span> disposable = vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-posts.helloWorld&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æŠŠä½ çš„ä»£ç å†™åœ¨è¿™é‡Œï¼Œæ¯æ¬¡å‘½ä»¤æ‰§è¡Œæ—¶éƒ½ä¼šè°ƒç”¨è¿™é‡Œçš„ä»£ç </span></span><br><span class="line">    <span class="comment">// ç»™ç”¨æˆ·æ˜¾ç¤ºä¸€ä¸ªæ¶ˆæ¯æç¤º</span></span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">showInformationMessage</span>(<span class="string">&#x27;Hello World from Juejin Posts!&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(disposable);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“ä½ çš„æ‰©å±•è¢«åœç”¨æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deactivate</span>(<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="é›†æˆ-webview"><a href="#é›†æˆ-webview" class="headerlink" title="é›†æˆ webview"></a>é›†æˆ webview</h2><h3 id="æ³¨å†Œå‘½ä»¤"><a href="#æ³¨å†Œå‘½ä»¤" class="headerlink" title="æ³¨å†Œå‘½ä»¤"></a>æ³¨å†Œå‘½ä»¤</h3><p>1ã€<em>package.json</em> æ¿€æ´»äº‹ä»¶ï¼ˆ<code>activationEvents</code>ï¼‰ä¸­æ·»åŠ  <code>&quot;onCommand:juejin-posts.start&quot;</code></p><p>2ã€<em>package.json</em> å‘½ä»¤ï¼ˆ<code>commands</code>ï¼‰ä¸­æ·»åŠ ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;juejin-posts.start&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;start&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Juejin Posts&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>3ã€<em>src&#x2F;extension.ts</em> ä¸­æ³¨å†Œå‘½ä»¤</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-posts.start&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Truth is endless. Keep coding...</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-webview-é¢æ¿"><a href="#åˆ›å»º-webview-é¢æ¿" class="headerlink" title="åˆ›å»º webview é¢æ¿"></a>åˆ›å»º webview é¢æ¿</h3><h4 id="åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿"><a href="#åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿" class="headerlink" title="åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿"></a>åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¹¶æ˜¾ç¤ºæ–°çš„webview</span></span><br><span class="line"><span class="keyword">const</span> panel = vscode.<span class="property">window</span>.<span class="title function_">createWebviewPanel</span>(</span><br><span class="line">  <span class="string">&#x27;juejin-posts&#x27;</span>, <span class="comment">// åªä¾›å†…éƒ¨ä½¿ç”¨ï¼Œè¿™ä¸ª webview çš„æ ‡è¯†</span></span><br><span class="line">  <span class="string">&#x27;Juejin Posts&#x27;</span>, <span class="comment">// ç»™ç”¨æˆ·æ˜¾ç¤ºçš„é¢æ¿æ ‡é¢˜</span></span><br><span class="line">  vscode.<span class="property">vscode</span>.<span class="property">ViewColumn</span>.<span class="property">One</span>, <span class="comment">// ç»™æ–°çš„ webview é¢æ¿ä¸€ä¸ªç¼–è¾‘å™¨è§†å›¾</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">enableScripts</span>: <span class="literal">true</span>, <span class="comment">// å¯ç”¨ javascript è„šæœ¬</span></span><br><span class="line">    <span class="attr">retainContextWhenHidden</span>: <span class="literal">true</span>, <span class="comment">// éšè—æ—¶ä¿ç•™ä¸Šä¸‹æ–‡</span></span><br><span class="line">  &#125; <span class="comment">// webview é¢æ¿çš„å†…å®¹é…ç½®</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨äº† <a href="https://vscode-api.js.org/modules/window.html#createWebviewPanel">window.createWebviewPanel</a> API åˆ›å»ºäº†ä¸€ä¸ª webview é¢æ¿ï¼Œç°åœ¨æˆ‘ä»¬å°è¯•è¿è¡Œ <code>juejin-posts.start</code> å°±å¯ä»¥æ‰“å¼€ä¸€ä¸ª webview é¢æ¿ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d85ad985232542f587376e5073feb1a1~tplv-k3u1fbpfcp-zoom-1.image"></p><h4 id="ç»™é¢æ¿è®¾ç½®å†…å®¹"><a href="#ç»™é¢æ¿è®¾ç½®å†…å®¹" class="headerlink" title="ç»™é¢æ¿è®¾ç½®å†…å®¹"></a>ç»™é¢æ¿è®¾ç½®å†…å®¹</h4><p>ä¸Šé¢æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç©ºç™½çš„é¢æ¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç»™é¢æ¿æ·»åŠ å†…å®¹å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>panel.webview.html</code> æ¥è®¾ç½® HTML å†…å®¹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getWebviewContent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">    &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;title&gt;Juejin Posts&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;style&gt;</span></span><br><span class="line"><span class="string">          html, body &#123;</span></span><br><span class="line"><span class="string">            padding: 0px;</span></span><br><span class="line"><span class="string">            height: 100vh;</span></span><br><span class="line"><span class="string">            position: relative;</span></span><br><span class="line"><span class="string">            margin: 0;</span></span><br><span class="line"><span class="string">            padding: 0;</span></span><br><span class="line"><span class="string">            overflow: hidden;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">          #yoyo &#123;</span></span><br><span class="line"><span class="string">            position: absolute;</span></span><br><span class="line"><span class="string">            bottom: 50px;</span></span><br><span class="line"><span class="string">            right: -90px;</span></span><br><span class="line"><span class="string">            opacity: 0;</span></span><br><span class="line"><span class="string">            transition: .25s ease-in-out</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">          #yoyo:hover &#123;</span></span><br><span class="line"><span class="string">            opacity: 1;</span></span><br><span class="line"><span class="string">            right: 0;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &lt;/style&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">      &lt;a href=&quot;https://juejin.cn&quot;&gt;&lt;img id=&quot;yoyo&quot; src=&quot;https://cdn.jsdelivr.net/gh/youngjuning/images/20210817163229.png&quot; width=&quot;100&quot; /&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="comment">// ç»™ webview panel è®¾ç½® HTML å†…å®¹</span></span><br><span class="line">panel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getWebviewContent</span>();</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>é‡æ–°ä½¿ç”¨ <code>juejin-posts.start</code> å‘½ä»¤å°±å¯ä»¥è°ƒæˆæ‚ æ‚ èˆ¹é•¿äº†ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5160d0c76536441b8d1ac3cfcedc0d0e~tplv-k3u1fbpfcp-zoom-1.image"></p><h4 id="é™åˆ¶-webview-è§†å›¾ä¸ºä¸€ä¸ª"><a href="#é™åˆ¶-webview-è§†å›¾ä¸ºä¸€ä¸ª" class="headerlink" title="é™åˆ¶ webview è§†å›¾ä¸ºä¸€ä¸ª"></a>é™åˆ¶ webview è§†å›¾ä¸ºä¸€ä¸ª</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="comment">// è¿½è¸ªå½“å‰ webview é¢æ¿</span></span><br><span class="line">  <span class="keyword">let</span> <span class="attr">currentPanel</span>: vscode.<span class="property">WebviewPanel</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">    vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-posts.start&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è·å–å½“å‰æ´»åŠ¨çš„ç¼–è¾‘å™¨</span></span><br><span class="line">      <span class="keyword">const</span> columnToShowIn = vscode.<span class="property">window</span>.<span class="property">activeTextEditor</span></span><br><span class="line">        ? vscode.<span class="property">window</span>.<span class="property">activeTextEditor</span>.<span class="property">viewColumn</span></span><br><span class="line">        : <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (currentPanel) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªé¢æ¿ï¼Œé‚£å°±æŠŠå®ƒæ˜¾ç¤ºåˆ°ç›®æ ‡åˆ—å¸ƒå±€ä¸­</span></span><br><span class="line">        currentPanel.<span class="title function_">reveal</span>(columnToShowIn);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ä¸ç„¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¢æ¿</span></span><br><span class="line">        currentPanel = vscode.<span class="property">window</span>.<span class="title function_">createWebviewPanel</span>();</span><br><span class="line">        <span class="comment">// å½“å‰é¢æ¿è¢«å…³é—­åé‡ç½®</span></span><br><span class="line">        currentPanel.<span class="title function_">onDidDispose</span>(</span><br><span class="line">          <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            currentPanel = <span class="literal">undefined</span>;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="literal">null</span>,</span><br><span class="line">          context.<span class="property">subscriptions</span></span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://vscode-api-cn.js.org/modules/window.html#activeTextEditor">vscode.window.activeTextEditor</a>ï¼šè·å–å½“å‰æ´»åŠ¨çš„æ–‡æœ¬ç¼–è¾‘å™¨</li><li><a href="https://vscode-api-cn.js.org/interfaces/WebviewPanel.html#reveal">currentPanel.reveal()</a>ï¼šè°ƒç”¨ <code>reveal()</code> æˆ–è€…æ‹–åŠ¨ webview é¢æ¿åˆ°æ–°çš„ç¼–è¾‘å¸ƒå±€ä¸­å»ã€‚</li></ul><h4 id="è®¾ç½®-Icon"><a href="#è®¾ç½®-Icon" class="headerlink" title="è®¾ç½® Icon"></a>è®¾ç½® Icon</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½® Logo</span></span><br><span class="line">panel.<span class="property">iconPath</span> = vscode.<span class="property">Uri</span>.<span class="title function_">file</span>(</span><br><span class="line">  path.<span class="title function_">join</span>(context.<span class="property">extensionPath</span>, <span class="string">&#x27;assets&#x27;</span>, <span class="string">&#x27;icon-juejin.png&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>åœ¨ vscode æ‰©å±•ä¸­æˆ‘ä»¬éœ€è¦é€šè¿‡ <code>vscode.Uri.file</code> æ–¹æ³•è·å–ç£ç›˜ä¸Šçš„èµ„æºè·¯å¾„ã€‚</p><h4 id="webview-è·å–å†…å®¹çš„-Uri"><a href="#webview-è·å–å†…å®¹çš„-Uri" class="headerlink" title="webview è·å–å†…å®¹çš„ Uri"></a>webview è·å–å†…å®¹çš„ Uri</h4><p>ä½ åº”è¯¥ä½¿ç”¨ <code>asWebviewUri</code> ç®¡ç†æ’ä»¶èµ„æºã€‚ä¸è¦ç¡¬ç¼–ç  <code>vscode-resource://</code>ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>asWebviewUri</code> ç¡®ä¿ä½ çš„æ’ä»¶åœ¨äº‘ç«¯ç¯å¢ƒä¹Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚</p><p>åœ¨ <a href="http://tny.im/jb4go">@luozhu&#x2F;vscode-utils</a> ä¸­æˆ‘ä»¬å¯¹è·å–æœ¬åœ°èµ„æºè·¯å¾„åšäº†å°è£…ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å†…å®¹çš„ Uri</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getDiskPath</span> = (<span class="params">fileName: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> webviewPanel.<span class="property">webview</span>.<span class="title function_">asWebviewUri</span>(</span><br><span class="line">    vscode.<span class="property">Uri</span>.<span class="title function_">file</span>(path.<span class="title function_">join</span>(context.<span class="property">extensionPath</span>, rootPath, <span class="string">&#x27;dist&#x27;</span>, fileName))</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-umi-å¼€å‘-webview"><a href="#ä½¿ç”¨-umi-å¼€å‘-webview" class="headerlink" title="ä½¿ç”¨ umi å¼€å‘ webview"></a>ä½¿ç”¨ umi å¼€å‘ webview</h3><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬é€šè¿‡è°ƒæˆæ‚ æ‚ èˆ¹é•¿ç†Ÿæ‚‰äº† webview é¢æ¿çš„åˆ›å»ºï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨ umijs æ¥ä»£æ›¿ HTML çš„å†…å®¹ã€‚</p><p><code>panel.webview.html</code> ä¸­çš„å†…å®¹å…¶å®å°±æ˜¯æ­£å¸¸çš„ HTML+JavaScript+CSS ä»£ç ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å‰ç«¯æŠ€æœ¯å»ç¼–å†™å®ƒçš„å†…å®¹ï¼Œæ¯”å¦‚ jqueryã€bootstrapã€Vue ä»¥åŠ Reactã€‚è™½ç„¶æœ¬æ–‡çš„ä¾‹å­æ˜¯åŸºäº umijs å¼€å‘ webview çš„å†…å®¹ï¼Œä½†æ˜¯å…¶ä»–æŠ€æœ¯åŸç†æ˜¯ä¸€æ ·çš„ï¼Œæ´›ç«¹åœ¨åç»­ä¹Ÿä¼šæä¾›å¤šä¸ªæŠ€æœ¯çš„ vscode webview å¼€å‘è„šæ‰‹æ¶ã€‚</p><h4 id="å°è£…è·å–-umijs-æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•"><a href="#å°è£…è·å–-umijs-æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•" class="headerlink" title="å°è£…è·å– umijs æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•"></a>å°è£…è·å– umijs æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•</h4><p>æˆ‘ä»¬çŸ¥é“ <code>umi build</code> å‘½ä»¤ä¼šåœ¨ <em>web&#x2F;dist</em> äº§ç”Ÿ index.htmlã€umi.jsã€umi.css ä¸‰ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ ¹æ® index.html æ”¹é€ å‰é¢çš„ getWebviewContent æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–åŸºäº umijs çš„ webview å†…å®¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context æ‰©å±•ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> webviewPanel webview é¢æ¿å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rootPath webview æ‰€åœ¨è·¯å¾„ï¼Œé»˜è®¤ web</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> umiVersion umi ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> <span class="variable">string</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getUmiContent</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  context: vscode.ExtensionContext,</span></span><br><span class="line"><span class="params">  webviewPanel: vscode.WebviewPanel,</span></span><br><span class="line"><span class="params">  umiVersion?: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  rootPath = <span class="string">&#x27;web&#x27;</span></span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// è·å–ç£ç›˜ä¸Šçš„èµ„æºè·¯å¾„</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getDiskPath</span> = (<span class="params">fileName: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> webviewPanel.<span class="property">webview</span>.<span class="title function_">asWebviewUri</span>(</span><br><span class="line">      vscode.<span class="property">Uri</span>.<span class="title function_">file</span>(path.<span class="title function_">join</span>(context.<span class="property">extensionPath</span>, rootPath, <span class="string">&#x27;dist&#x27;</span>, fileName))</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;html&gt;</span></span><br><span class="line"><span class="string">      &lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;meta charset=&quot;utf-8&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;meta</span></span><br><span class="line"><span class="string">          name=&quot;viewport&quot;</span></span><br><span class="line"><span class="string">          content=&quot;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot;</span></span><br><span class="line"><span class="string">        /&gt;</span></span><br><span class="line"><span class="string">        &lt;link rel=&quot;stylesheet&quot; href=&quot;<span class="subst">$&#123;getDiskPath(<span class="string">&#x27;umi.css&#x27;</span>)&#125;</span>&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;style&gt;</span></span><br><span class="line"><span class="string">          html, body, #root &#123;</span></span><br><span class="line"><span class="string">            width: 100%;</span></span><br><span class="line"><span class="string">            height: 100%;</span></span><br><span class="line"><span class="string">            margin: 0;</span></span><br><span class="line"><span class="string">            padding: 0;</span></span><br><span class="line"><span class="string">            overflow: hidden;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &lt;/style&gt;</span></span><br><span class="line"><span class="string">        &lt;script&gt;</span></span><br><span class="line"><span class="string">          //! umi version: <span class="subst">$&#123;umiVersion&#125;</span></span></span><br><span class="line"><span class="string">        &lt;/script&gt;</span></span><br><span class="line"><span class="string">      &lt;/head&gt;</span></span><br><span class="line"><span class="string">      &lt;body&gt;</span></span><br><span class="line"><span class="string">        &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;script src=&quot;<span class="subst">$&#123;getDiskPath(<span class="string">&#x27;umi.js&#x27;</span>)&#125;</span>&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">      &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æç¤ºï¼šä¸Šé¢çš„æ–¹æ³•æˆ‘å·²ç»å°è£…åœ¨ <a href="https://github.com/youngjuning/luozhu/tree/main/packages/vscode-utils">@luozhu&#x2F;vscode-utils</a> çš„ä¸­ã€‚</p></blockquote><p>æˆ‘ä»¬ä½¿ç”¨ getUmiContent é‡æ–°å‰é¢çš„ä»£ç ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getUmiContent &#125; <span class="keyword">from</span> <span class="string">&#x27;@luozhu/vscode-utils&#x27;</span>;</span><br><span class="line">...</span><br><span class="line">panel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getUmiContent</span>(context, panel, <span class="string">&#x27;3.5.17&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="ä¼˜åŒ–æ‰“åŒ…"><a href="#ä¼˜åŒ–æ‰“åŒ…" class="headerlink" title="ä¼˜åŒ–æ‰“åŒ…"></a>ä¼˜åŒ–æ‰“åŒ…</h4><p>ç”±äºæˆ‘ä»¬å°è£…äº† <code>getUmiContent</code> æ–¹æ³•ï¼Œ<code>umi build</code> ç”Ÿæˆçš„ index.html å°±æ²¡æœ‰ç”¨äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>HTML=none umi build</code> å‘½ä»¤åœ¨æ‰“åŒ…çš„æ—¶å€™ä¸ç”Ÿæˆ index.html æ–‡ä»¶ã€‚</p><p>å¦å¤–ç›®å‰ <a href="https://github.com/umijs/umi/issues/7132">umijs çš„ mfsu ä¸æ”¯æŒ writeToDisk æ–¹æ³•</a>ï¼Œå¦‚æœåç»­æ”¯æŒäº†å¯ä»¥ä½¿ç”¨ mfsu ä¼˜åŒ–è°ƒè¯•é€Ÿåº¦ã€‚</p><blockquote><p>åˆ›å»º webview é¢æ¿çš„ä»»åŠ¡å¤§éƒ¨åˆ†éƒ½æ¯”è¾ƒé‡å¤ï¼Œä¸ºäº†æ²‰æ·€æœ€ä½³å®è·µï¼Œæˆ‘åœ¨ <a href="https://github.com/youngjuning/luozhu/tree/main/packages/vscode-utils">@luozhu&#x2F;vscode-utils</a> å°è£…äº† <a href="http://tny.im/bHLQx">createUmiWebviewPanel</a> æ–¹æ³•ã€‚</p></blockquote><h3 id="ç»™-webview-å†…å®¹åŠ ä¸Šä¸»é¢˜"><a href="#ç»™-webview-å†…å®¹åŠ ä¸Šä¸»é¢˜" class="headerlink" title="ç»™ webview å†…å®¹åŠ ä¸Šä¸»é¢˜"></a>ç»™ webview å†…å®¹åŠ ä¸Šä¸»é¢˜</h3><p>webview å¯ä»¥åŸºäºå½“å‰çš„ VS Code ä¸»é¢˜å’Œ CSS æ”¹å˜è‡ªèº«çš„æ ·å¼ã€‚VS Code å°†ä¸»é¢˜åˆ†æˆ 3 ç§ç±»åˆ«ï¼Œè€Œä¸”åœ¨ body å…ƒç´ ä¸ŠåŠ ä¸Šäº†ç‰¹æ®Šç±»åä»¥è¡¨æ˜å½“å‰ä¸»é¢˜ï¼Œæˆ‘ä»¬åœ¨ umi ä¸­å…¨å±€åŠ å…¥ä¸‹é¢çš„æ ·å¼ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">body.<span class="property">vscode</span>-light &#123;</span><br><span class="line">  h1, h2, h3, h4, h5, h6 &#123;</span><br><span class="line">    <span class="attr">color</span>: black;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">color</span>: black;</span><br><span class="line">  background-<span class="attr">color</span>: <span class="title function_">var</span>(--vscode-editor-background);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body.<span class="property">vscode</span>-dark &#123;</span><br><span class="line">  h1, h2, h3, h4, h5, h6 &#123;</span><br><span class="line">    <span class="attr">color</span>: white;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">color</span>: white;</span><br><span class="line">  background-<span class="attr">color</span>: <span class="title function_">var</span>(--vscode-editor-background);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body.<span class="property">vscode</span>-high-contrast &#123;</span><br><span class="line">  h1, h2, h3, h4, h5, h6 &#123;</span><br><span class="line">    <span class="attr">color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">color</span>: red;</span><br><span class="line">  background-<span class="attr">color</span>: <span class="title function_">var</span>(--vscode-editor-background);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºè¿™éƒ¨åˆ†é€‚é…å¤§éƒ¨åˆ†æ˜¯é€šç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°†å®ƒå°è£…è¿›äº† <code>@luozhu/vscode-utils</code> çš„ <code>getUmiContent</code> ä¸­äº†ã€‚</p><h2 id="webview-ä¸-vscode-äº¤äº’"><a href="#webview-ä¸-vscode-äº¤äº’" class="headerlink" title="webview ä¸ vscode äº¤äº’"></a>webview ä¸ vscode äº¤äº’</h2><h3 id="webview-ä¸­æ‰§è¡Œè„šæœ¬"><a href="#webview-ä¸­æ‰§è¡Œè„šæœ¬" class="headerlink" title="webview ä¸­æ‰§è¡Œè„šæœ¬"></a>webview ä¸­æ‰§è¡Œè„šæœ¬</h3><p>vscode ä¸­çš„ webview æœ¬è´¨å°±æ˜¯ä¸€ä¸ª iframeï¼Œå› æ­¤æˆ‘ä»¬æ˜¯å¯ä»¥å† webview ä¸­æ‰§è¡Œè„šæœ¬çš„ï¼Œåªä¸è¿‡åœ¨ vscode ä¸­ webview é»˜è®¤ç¦ç”¨äº† JavaScriptï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨ <code>createWebviewPanel</code> API æ—¶ä¼ å…¥ <code>enableScripts: true</code> å³å¯ã€‚</p><h3 id="æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™-webview"><a href="#æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™-webview" class="headerlink" title="æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™ webview"></a>æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™ webview</h3><p>webview çš„è„šæœ¬èƒ½åšåˆ°ä»»ä½•æ™®é€šç½‘é¡µè„šæœ¬èƒ½åšåˆ°çš„äº‹æƒ…ï¼Œä½†æ˜¯ webview è¿è¡Œåœ¨è‡ªå·±çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè„šæœ¬æ˜¯ä¸èƒ½è®¿é—® VS Code API çš„ã€‚æˆ‘ä»¬éœ€è¦å€ŸåŠ© postMessage è¿™ç§äº‹ä»¶çš„æ–¹å¼ä¼ é€’ä¿¡æ¯ã€‚åœ¨ vscode ä¸­ï¼Œæˆ‘ä»¬åœ¨ vscode ä¾§å¯ä»¥ä½¿ç”¨ <a href="https://vscode-api-cn.js.org/interfaces/Webview.html#postMessage">Webview.postMessage</a> å‘å¸ƒäº‹ä»¶å¹¶å‘é€ä»»ä½•åºåˆ—åŒ–çš„ JSON æ•°æ®ï¼Œåœ¨ webview ä¾§åˆ™ä½¿ç”¨ <code>window.addEventListener(&#39;message&#39; event =&gt; &#123; ... &#125;)</code> æ¥å¤„ç†è¿™äº›ä¿¡æ¯ï¼š</p><p><strong>vscode ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œä¸€ä¸ªæ–°çš„å‘½ä»¤</span></span><br><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-me.author&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!currentPanel) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠä¿¡æ¯å‘é€åˆ° webview</span></span><br><span class="line">    <span class="comment">// ä½ å¯ä»¥å‘é€ä»»ä½•åºåˆ—åŒ–çš„ JSON æ•°æ®</span></span><br><span class="line">    currentPanel.<span class="property">webview</span>.<span class="title function_">postMessage</span>(&#123; <span class="attr">method</span>: <span class="string">&#x27;showAuthor&#x27;</span> &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Modal</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line">...</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> message = event.<span class="property">data</span>;</span><br><span class="line">  <span class="keyword">switch</span> (message.<span class="property">method</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;showAuthor&#x27;</span>: &#123;</span><br><span class="line">      <span class="title class_">Modal</span>.<span class="title function_">info</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;æ´›ç«¹&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ´›ç«¹ğŸ‹ä¸€åªä½åœ¨æ­åŸçš„æœ¨ç³»å‰ç«¯ğŸ§šğŸ»â€â™€ï¸ï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ğŸ“šï¼Œå¯ä»¥é€šè¿‡</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://juejin.cn/user/325111174662855/posts&quot;</span>&gt;</span>ç‚¹èµ<span class="tag">&lt;/<span class="name">a</span>&gt;</span>å¸®æˆ‘èšé›†çµåŠ›â­ï¸ã€‚</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        ),</span><br><span class="line">        <span class="attr">okText</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://juejin.cn/user/325111174662855/posts&quot;</span>&gt;</span>ç‚¹èµ o(ï¿£â–½ï¿£)ï½„<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœ</strong>ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0dd7dd37db954d84925ac1c0f60cb965~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="webview-ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶"><a href="#webview-ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶" class="headerlink" title="webview ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶"></a>webview ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶</h3><p>webview åå‘ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶çš„åŸç†ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ç”±äº webview çš„ä¸Šä¸‹æ–‡é™åˆ¶ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡ <code>acquireVsCodeApi</code> å‡½æ•°è·å–é˜‰å‰²ç‰ˆçš„ VS Code API å¯¹è±¡ï¼Œè¿™ä¸ªé˜‰å‰²çš„å¯¹è±¡ä¸Šæœ‰ä¸€ä¸ª <code>postMessage</code> å‡½æ•°å¯ä»¥ä¾›æˆ‘ä»¬å‘é€äº‹ä»¶ç”¨ã€‚æ³¨æ„ <code>acquireVsCodeApi</code> ä¸ªä¼šè¯ä¸­åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œé‡å¤è°ƒç”¨ä¼šæŠ¥é”™ã€‚è€Œåœ¨æ’ä»¶ä¾§åˆ™å¯ä»¥é€šè¿‡ <a href="https://vscode-api-cn.js.org/interfaces/Webview.html#onDidReceiveMessage">Webview.onDidReceiveMessage</a> å¤„ç† webview ä¼ é€’çš„ä¿¡æ¯ã€‚æˆ‘ä»¬æ¥å†™ä¸€ä¸ªåœ¨ webview ä¸­è°ƒç”¨ <code>vscode.window.showInformationMessage</code> çš„ä¾‹å­ï¼š</p><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vscode = <span class="title function_">acquireVsCodeApi</span>();</span><br><span class="line">vscode.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;showMessage&#x27;</span>,</span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">text</span>: <span class="string">`ä¸ºäººæ°‘æœåŠ¡`</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>æ’ä»¶ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤„ç† webview ä¸­çš„ä¿¡æ¯</span></span><br><span class="line">currentPanel.<span class="property">webview</span>.<span class="title function_">onDidReceiveMessage</span>(</span><br><span class="line">  <span class="function"><span class="params">message</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (message.<span class="property">method</span> === <span class="string">&#x27;showMessage&#x27;</span>) &#123;</span><br><span class="line">      vscode.<span class="property">window</span>.<span class="title function_">showInformationMessage</span>(message.<span class="property">params</span>.<span class="property">content</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">undefined</span>,</span><br><span class="line">  context.<span class="property">subscriptions</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœ</strong>ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c32c8b374b534d6fac1cb552287de6ca~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="åœ¨-webview-ä¸­è¯·æ±‚æ¥å£"><a href="#åœ¨-webview-ä¸­è¯·æ±‚æ¥å£" class="headerlink" title="åœ¨ webview ä¸­è¯·æ±‚æ¥å£"></a>åœ¨ webview ä¸­è¯·æ±‚æ¥å£</h3><p>ä¸€å¼€å§‹ï¼Œæˆ‘ä»¥ä¸ºè¿™æ˜¯ä¸ªè½»æ¾çš„å·¥ä½œï¼Œç›´åˆ°é‡åˆ°è·¨åŸŸåŠå¤©è§£å†³ä¸äº†åæˆ‘ç»æœ›äº†ï¼Œåœ¨ <a href="https://juejin.cn/post/6844903966799577101#heading-3">VSCode WebViewæ’ä»¶ï¼ˆæ‰©å±•ï¼‰å¼€å‘å®æˆ˜</a> ä¸€æ–‡ä¸­æˆ‘ç»ˆäºçŸ¥é“äº† vscode webview å†…éƒ¨æ˜¯ä¸å…è®¸å‘é€ ajax è¯·æ±‚ï¼Œæ‰€æœ‰ ajax è¯·æ±‚éƒ½æ˜¯è·¨åŸŸçš„ï¼Œå› ä¸º webview æœ¬èº«æ˜¯æ²¡æœ‰ host çš„ã€‚</p><p>äººè£‚å¼€äº†ï¼Œè¿™ä»€ä¹ˆé¬¼å‘€ï¼Œæˆ‘ä»¬æ ¸å¿ƒçš„éœ€æ±‚å°±æ˜¯è¯·æ±‚æ˜é‡‘çš„æ¥å£è·å–æˆ‘ä»¬çš„æ–‡ç« åˆ—è¡¨å‘€ï¼Œé‚£æˆ‘ä»¬è¿˜æœ‰åŠæ³•å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå…¶å®è¿˜æ˜¯å€ŸåŠ©ä¸Šé¢æˆ‘ä»¬æåˆ°çš„é€šä¿¡æœºåˆ¶æŠŠè¯·æ±‚æ¥å£çš„ä»»åŠ¡äº¤ç»™ vscode å»å¤„ç†ï¼Œå®Œäº‹å†è®© vscode æŠŠæ•°æ®é€šè¿‡ <code>postMessage</code> è¿”å›ç»™æˆ‘ä»¬ï¼Œå¤šè¯´æ— ç›Šï¼Œæˆ‘ä»¬æ¥çœ‹ä»£ç ï¼š</p><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// @ts-ignore</span></span><br><span class="line">  <span class="keyword">const</span> vscode = <span class="keyword">typeof</span> acquireVsCodeApi === <span class="string">&#x27;function&#x27;</span> ? <span class="title function_">acquireVsCodeApi</span>() : <span class="literal">null</span>;</span><br><span class="line">  vscode.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;queryPosts&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (method === <span class="string">&#x27;queryPosts&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> message = event.<span class="property">data</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><p><strong>vscode ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤„ç† webview ä¸­çš„ä¿¡æ¯ï¼Œå¹¶è¿”å›æ¥å£è¯·æ±‚çš„æ•°æ®</span></span><br><span class="line">currentPanel.<span class="property">webview</span>.<span class="title function_">onDidReceiveMessage</span>(</span><br><span class="line">  <span class="keyword">async</span> message =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">events</span>(message);</span><br><span class="line">    currentPanel?.<span class="property">webview</span>.<span class="title function_">postMessage</span>(&#123; data &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">undefined</span>,</span><br><span class="line">  context.<span class="property">subscriptions</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="luozhu-x2F-vscode-channel"><a href="#luozhu-x2F-vscode-channel" class="headerlink" title="@luozhu&#x2F;vscode-channel"></a>@luozhu&#x2F;vscode-channel</h3><p>å‰é¢æˆ‘ä»¬çŸ¥é“äº†ä½¿ç”¨ <a href="https://vscode-api-cn.js.org/interfaces/Webview.html#postMessage">Webview.postMessage</a>ã€<a href="https://vscode-api-cn.js.org/interfaces/Webview.html#onDidReceiveMessage">Webview.onDidReceiveMessage</a>ã€<code>acquireVsCodeApi().postMessage</code> å’Œ <code>window.addEventListener</code> å°±å¯ä»¥æ»¡è¶³å„ç§é€šä¿¡éœ€æ±‚äº†ï¼Œé‚£ <code>@luozhu/vscode-channel</code> åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å— <a href="https://www.npmjs.com/package/js-channel">js-channel</a> å¯å‘ï¼Œ<code>@luozhu/vscode-channel</code> ä¸»è¦æ˜¯å°è£…äº† webview ä¸ vscode äº¤äº’æµç¨‹ï¼Œæ ¸å¿ƒåŸç†æ˜¯é€šè¿‡æš´éœ² <code>call</code>ã€<code>bind</code> æ–¹æ³•æŠ¹å¹³ API çš„å·®å¼‚ï¼Œå‡å°‘é‡å¤ä»£ç é‡ã€‚å…¶ä¸­å‚è€ƒ appworks å’Œ cs-channel ä½¿ç”¨ uuid ä¿è¯äº¤äº’çš„å¯é æ€§ã€‚Talk is cheap, show you the codeï¼š</p><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»º channel å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> channel = <span class="keyword">new</span> <span class="title class_">Channel</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶ç­‰å¾…å…¶è¿”å›æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> &#123; payload &#125; = <span class="keyword">await</span> channel.<span class="title function_">call</span>(&#123; <span class="attr">method</span>: <span class="string">&#x27;queryPosts&#x27;</span> &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(payload);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>webview ä¸­ç”±äº acquireVsCodeApi åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œä¹‹ååˆéœ€è¦åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ <code>wev/src/layouts/index.ts</code> ä¸­åˆ›å»ºä¸€æ¬¡å¹¶æŒ‚è½½åˆ° <code>window</code> å¯¹è±¡ä¸Šæ¯”è¾ƒåˆé€‚ã€‚</p></blockquote><p><strong>vscode ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vscode ä¾§çš„ channel éœ€è¦ä¾èµ–ä¸Šä¸‹æ–‡å’Œ WebviewPanel å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> channel = <span class="keyword">new</span> <span class="title class_">Channel</span>(context, currentPanel);</span><br><span class="line"><span class="comment">// ç»‘å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä¸€èˆ¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªï¼Œç„¶åæ ¹æ®çº¦å®šåšåˆ†å‘å³å¯</span></span><br><span class="line">channel.<span class="title function_">bind</span>(<span class="keyword">async</span> message =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; eventType, method, params &#125; = message;</span><br><span class="line">  <span class="comment">// å®é™…å‘èµ·è¯·æ±‚è·å–æ•°æ®çš„åœ°æ–¹</span></span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> events[eventType][method](params);</span><br><span class="line">  <span class="comment">// è¿™é‡Œå°†è·å–çš„æ•°æ®ç›´æ¥è¿”å›å³å¯ï¼Œchannel å†…éƒ¨ä¼šè¿›è¡Œæ¶ˆæ¯åˆå¹¶å’Œå›ä¼ ã€‚</span></span><br><span class="line">  <span class="comment">// å¦‚æœåªæ˜¯æ‰§è¡Œä¸€ä¸ªåŠŸèƒ½ï¼Œä¸å†™ return è¯­å¥å³å¯ï¼Œå†…éƒ¨ä¼šè¿›è¡Œåˆ¤æ–­é™çº§æˆå•å·¥é€šä¿¡ã€‚</span></span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="vscode-å›½é™…åŒ–"><a href="#vscode-å›½é™…åŒ–" class="headerlink" title="vscode å›½é™…åŒ–"></a>vscode å›½é™…åŒ–</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ vscode ä¸­æ˜¯å¯ä»¥åˆ‡æ¢è¯­è¨€ç¯å¢ƒçš„ï¼Œä¸€æ¬¾ä¼˜ç§€çš„ vscode æ‰©å±•è‡³å°‘è¦æ”¯æŒä¸­è‹±ä¸¤ç§è¯­è¨€ã€‚è€Œä¸”æ”¯æŒå›½é™…åŒ–å¯ä»¥è®©ä½ çš„æ’ä»¶å—ä¼—ç›´æ¥çªç ´å›½ç•Œé™åˆ¶ã€‚vscode å›½é™…åŒ–åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯é…ç½®çš„å›½é™…åŒ–ï¼Œä¸€éƒ¨åˆ†æ˜¯ä»£ç ä¸­çš„å›½é™…åŒ–ï¼Œå¦ä¸€éƒ¨åˆ†åˆ™æ˜¯ webview ä¸­ umijs çš„å›½é™…åŒ–ã€‚æœ¬ç« æˆ‘ä»¬å°±æ¥å…·ä½“çœ‹ä¸€ä¸‹å¦‚ä½•åœ¨ vscode ä¸­å®ç°å›½é™…åŒ–ã€‚</p><h3 id="é…ç½®å›½é™…åŒ–"><a href="#é…ç½®å›½é™…åŒ–" class="headerlink" title="é…ç½®å›½é™…åŒ–"></a>é…ç½®å›½é™…åŒ–</h3><p>æˆ‘ä»¬å·²ç»çŸ¥é“ vscode ä¸­çš„é…ç½®éƒ½æ˜¯åœ¨ <em>package.json</em> ä¸­ï¼Œè€Œé…ç½®çš„å›½é™…åŒ–æ˜¯çº¦å®šåœ¨ <code>package.nls.json</code> å’Œ <code>package.nls.zh-cn.json</code> è¿™ç§æ–‡ä»¶ä¸­ç¼–å†™ã€‚æ¯”å¦‚æˆ‘ä»¬è¦åœ¨ä¸­è‹±æ–‡ç¯å¢ƒä¸‹å‘½ä»¤é…ç½®ä¸­è‹±æ–‡ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>package.nls.json</code> ä¸­å†™ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes.category.juejin-me&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Juejin Me&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>package.nls.zh-cn.json</code> å†™ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes.category.juejin-me&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ˜é‡‘ä¸€ä¸‹&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç„¶å <code>package.json</code> ä¸­å†™ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;commands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;%contributes.category.juejin-me%&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="ä»£ç ä¸­å›½é™…åŒ–"><a href="#ä»£ç ä¸­å›½é™…åŒ–" class="headerlink" title="ä»£ç ä¸­å›½é™…åŒ–"></a>ä»£ç ä¸­å›½é™…åŒ–</h3><p>æ¨èä½¿ç”¨æ´›ç«¹è´¡çŒ®è¿‡ä»£ç çš„ <a href="https://github.com/axetroy/vscode-nls-i18n">vscode-nls-i18n</a>ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œé…ç½®çš„è¯å’Œä¸Šä¸€èŠ‚ä¸€æ ·ï¼Œåœ¨ <code>src/extension.ts</code> ä¸­ä½¿ç”¨ <code>init</code> æ–¹æ³•åˆå§‹åŒ–ï¼Œç„¶åä½¿ç”¨ <code>localize</code> æ–¹æ³•å®ç°å›½é™…åŒ–ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; init, localize &#125; <span class="keyword">from</span> <span class="string">&#x27;vscode-nls-i18n&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="title function_">init</span>(context.<span class="property">extensionPath</span>); <span class="comment">// åˆå§‹åŒ–å›½é™…åŒ–é…ç½®ã€‚åªç”¨åœ¨æ‰©å±•æ¿€æ´»æ—¶åˆå§‹åŒ–ä¸€æ¬¡</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">localize</span>(<span class="string">&#x27;extension.activeLog&#x27;</span>)); <span class="comment">// ä¹‹åå°±å¯ä»¥åœ¨å„ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="umijs-å›½é™…åŒ–"><a href="#umijs-å›½é™…åŒ–" class="headerlink" title="umijs å›½é™…åŒ–"></a>umijs å›½é™…åŒ–</h3><p>umijs çš„å›½é™…åŒ–éœ€è¦ä½¿ç”¨ <code>@umijs/plugin-locale</code> æ’ä»¶æ”¯æŒï¼Œè¿™ä¸ªæ’ä»¶å°è£…äº† <code>react-intl</code>ï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹ï¼š</p><p>1ã€.umirc.ts ä¸­é…ç½® <code>local</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">locale</span>: &#123;&#125;</span><br></pre></td></tr></table></figure><p>2ã€åœ¨ <em>src</em> ç›®å½•ä¸‹åˆ›å»º <code>locales</code> å¹¶åˆ›å»º <code>en.ts</code> æˆ– <code>zh-CN.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/locales/en.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">WELCOME_TO_UMI_WORLD</span>: <span class="string">&quot;welcome to umi&#x27;s world&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/locales/zh-CN.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">WELCOME_TO_UMI_WORLD</span>: <span class="string">&#x27;æ¬¢è¿å…‰ä¸´  umi  çš„ä¸–ç•Œ&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>3ã€ä½¿ç”¨å›½é™…åŒ–</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useIntl &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="attr">default</span>: <span class="title class_">React</span>.<span class="property">FunctionComponent</span> = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> intl = <span class="title function_">useIntl</span>()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">     &lt;div&gt;</span><br><span class="line">     &#123;intl.<span class="title function_">formatMessage</span>(</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="string">&#x27;WELCOME_TO_UMI_WORLD&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      )&#125;&lt;div&gt;</span><br><span class="line">   )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4ã€åˆ‡æ¢è¯­è¨€</p><p>åˆ‡æ¢è¯­è¨€ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>setLocale</code> æ–¹æ³•ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬ç»™è¿™ä¸ªæ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ <code>false</code> æ¥å®ç°æ— åˆ·æ–°åŠ¨æ€åˆ‡æ¢ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; setLocale &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="comment">// ä¸åˆ·æ–°é¡µé¢</span></span><br><span class="line"><span class="title function_">setLocale</span>(<span class="string">&#x27;zh-CN&#x27;</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>ä¸è¿‡ï¼Œåˆ‡æ¢è¯­è¨€çš„æ—¶æœºåœ¨ä»€ä¹ˆæ—¶å€™å‘¢ï¼Ÿåˆ‡æ¢æ—¶æœºå°±æ˜¯æˆ‘ä»¬è¯­è¨€ç¯å¢ƒæ”¹å˜çš„æ—¶æœºã€‚åœ¨ vscode webview ç¯å¢ƒä¸­ï¼Œå…¶å®å½“ä½¿ç”¨ <code>Config display language</code> æ–¹æ³•åˆ‡æ¢è¯­è¨€ç¯å¢ƒåï¼Œä¼šè¦æ±‚ vscode é‡å¯ã€‚ä¹Ÿå°±è¯´æˆ‘ä»¬åªéœ€è¦åœ¨ webview åˆ›å»ºæ—¶è®¾ç½®ä¸€æ¬¡è¯­è¨€ç¯å¢ƒå³å¯ã€‚ç”±äº vscode å’Œ webview ä¼ å€¼å¤ªå›°éš¾ï¼Œæˆ‘ä»¬é€‰æ‹©åœ¨ <code>getUmiHTMLContent</code> æ—¶ä¼ å¦‚ <code>vscode.env</code>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">vscodeEnv</span> = $&#123;<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(vscode.<span class="property">env</span>)&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬åœ¨ <code>web/src/layouts/index.ts</code> ä¸­è®¾ç½®ä¸€ä¸‹å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setLocale</span>(<span class="variable language_">window</span>.<span class="property">vscodeEnv</span>.<span class="property">language</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><h2 id="â€œæ˜é‡‘ä¸€ä¸‹â€-æ‰©å±•æ ¸å¿ƒå®ç°"><a href="#â€œæ˜é‡‘ä¸€ä¸‹â€-æ‰©å±•æ ¸å¿ƒå®ç°" class="headerlink" title="â€œæ˜é‡‘ä¸€ä¸‹â€ æ‰©å±•æ ¸å¿ƒå®ç°"></a>â€œæ˜é‡‘ä¸€ä¸‹â€ æ‰©å±•æ ¸å¿ƒå®ç°</h2><p>çµæ„Ÿæ¥æºäºç°å®ï¼Œä½œä¸ºæ˜é‡‘çš„é‡åº¦ä½¿ç”¨è€…ï¼Œå‡ ä¹æ¯ç¯‡æ–‡ç« å’Œç¬”è®°éƒ½åŒæ­¥åœ¨è¿™é‡Œã€‚å½“æœ‰äº›çŸ¥è¯†å¿˜è®°éœ€è¦æŸ¥é˜…æˆ–æ‹·è´ä»£ç æ—¶ï¼Œæˆ‘å°±æœ‰åœ¨æ˜é‡‘æœç´¢æˆ‘çš„æ–‡ç« çš„éœ€æ±‚ã€‚ä½†æ˜¯æ˜é‡‘çš„æœç´¢æ˜¯å…¨ç«™çš„ï¼Œå°±ç®—åŠ ä¸Šè‡ªå·±çš„åå­—æœç´¢ä¹Ÿä¼šå‡ºç°å¤§é‡æ— å…³è®°å½•ã€‚â€œæ˜é‡‘ä¸€ä¸‹â€ è¿™ä¸ªåå­—å°±åƒæ’ä»¶åŠŸèƒ½ä¸€æ ·ï¼Œåœ¨ä½ æƒ³æœç´¢è‡ªå·±æ˜é‡‘æ–‡ç« çš„æ—¶å€™å°±å¯ä»¥æ‰“å¼€æ’ä»¶â€œæ˜é‡‘ä¸€ä¸‹â€ è¿›è¡Œæœç´¢ã€‚</p><p>å…¶å®ä¸ºäº†åªæœç´¢åˆ°è‡ªå·±çš„æ–‡ç« ï¼Œæˆ‘æƒ³åˆ°çš„è¿˜æœ‰å¼€å‘ chrome æ’ä»¶æ¥å®ç°ã€‚ä½†æ˜¯è€ƒè™‘åˆ°å¸‚åœºå’Œä¾¿æ·æ€§ï¼Œæˆ‘æœ€ç»ˆè¿˜æ˜¯å†³å®šå¼€å‘ vscode æ’ä»¶æ¥è½åœ°è¿™ä¸ªçµæ„Ÿã€‚æœ¬ç« å°±æ˜¯ç»¼åˆå‰é¢çš„ç»éªŒå®ç° â€œæ˜é‡‘ä¸€ä¸‹â€ çš„æ ¸å¿ƒé€»è¾‘ã€‚</p><h3 id="juejin-me-start-å‘½ä»¤"><a href="#juejin-me-start-å‘½ä»¤" class="headerlink" title="juejin-me.start å‘½ä»¤"></a><code>juejin-me.start</code> å‘½ä»¤</h3><h4 id="vscode-ä¾§å¼€å¯-channel-é€šä¿¡"><a href="#vscode-ä¾§å¼€å¯-channel-é€šä¿¡" class="headerlink" title="vscode ä¾§å¼€å¯ channel é€šä¿¡"></a>vscode ä¾§å¼€å¯ channel é€šä¿¡</h4><p>vscode ä¾§é€šè¿‡ <code>channel.bind</code> ç»‘å®šä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> events <span class="keyword">from</span> <span class="string">&#x27;./events&#x27;</span>;</span><br><span class="line">...</span><br><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-me.start&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    currentPanel = <span class="title function_">createUmiWebviewPanel</span>(</span><br><span class="line">      context,</span><br><span class="line">      <span class="string">&#x27;juejin-me&#x27;</span>,</span><br><span class="line">      <span class="title function_">localize</span>(<span class="string">&#x27;extension.webview-panel.title&#x27;</span>),</span><br><span class="line">      <span class="string">&#x27;assets/icon-luozhu.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;3.5.17&#x27;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// å¤„ç† webview ä¸­çš„ä¿¡æ¯</span></span><br><span class="line">    channel = <span class="keyword">new</span> <span class="title class_">Channel</span>(context, currentPanel);</span><br><span class="line">    channel.<span class="title function_">bind</span>(<span class="keyword">async</span> message =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; eventType, method, params &#125; = message;</span><br><span class="line">      <span class="comment">// æ ¹æ®äº‹ä»¶ç±»å‹ã€æ–¹æ³•ã€å‚æ•°æ¥å®Œæˆä¸€æ¬¡ api è°ƒç”¨ï¼Œå†…ç½®çš„ eventType æœ‰ requestã€command å’Œ variableã€‚</span></span><br><span class="line">      <span class="keyword">const</span> data = <span class="keyword">await</span> events[eventType][method](params);</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125;, vscode);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šæˆ‘ä»¬ä¸éœ€è¦ç»™å®šç›‘å¬äº‹ä»¶åï¼Œå†…éƒ¨ä¼šæ ¹æ® eventId ä¿è¯å¯é æ€§å’Œå…¨å±€å”¯ä¸€æ€§</p></blockquote><h4 id="æ³¨å†Œ-events"><a href="#æ³¨å†Œ-events" class="headerlink" title="æ³¨å†Œ events"></a>æ³¨å†Œ events</h4><p><strong>events&#x2F;index.ts</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">from</span> <span class="string">&#x27;./requests&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">request</span>: requests,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>events&#x2F;requests</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> queryPosts = <span class="keyword">async</span> (<span class="attr">params</span>: &#123; <span class="attr">cursor</span>: <span class="built_in">string</span> &#125;): <span class="title class_">Promise</span>&lt;<span class="built_in">any</span>&gt; =&gt; &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæˆ‘ä»¬æ ¹æ® vscode é…ç½®åŠ¨æ€å–çš„ç”¨æˆ· id</span></span><br><span class="line">  <span class="keyword">const</span> &#123; userId &#125; = vscode.<span class="property">workspace</span>.<span class="title function_">getConfiguration</span>(<span class="string">&#x27;juejin-me&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; cursor &#125; = params;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> request.<span class="title function_">post</span>(<span class="string">&#x27;/article/query_list&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">cursor</span>: <span class="string">`<span class="subst">$&#123;cursor&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">sort_type</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">user_id</span>: userId,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  queryPosts,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>utils&#x2F;request</strong>ï¼š</p><p>è¿™é‡Œç®€å•å°è£…äº†åŸºäº axios çš„è¯·æ±‚å¯¹è±¡ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable no-param-reassign */</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­æ–‡æ–‡æ¡£: http://t.cn/ROfXFuj</span></span><br><span class="line"><span class="comment">// åˆ›å»ºå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://api.juejin.cn/content_api/v1/&#x27;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">10000</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">method</span> === <span class="string">&#x27;get&#x27;</span>) &#123;</span><br><span class="line">      config.<span class="property">paramsSerializer</span> = <span class="function"><span class="params">params</span> =&gt;</span> qs.<span class="title function_">stringify</span>(params, &#123; <span class="attr">arrayFormat</span>: <span class="string">&#x27;repeat&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">showErrorMessage</span>(error.<span class="property">message</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; data &#125; = response;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">showErrorMessage</span>(error.<span class="property">message</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request;</span><br></pre></td></tr></table></figure><h3 id="webview-ä¸­è°ƒç”¨æ¥å£"><a href="#webview-ä¸­è°ƒç”¨æ¥å£" class="headerlink" title="webview ä¸­è°ƒç”¨æ¥å£"></a>webview ä¸­è°ƒç”¨æ¥å£</h3><p>channel æ˜¯åœ¨ <code>web/src/layouts/index.tsx</code> ä¸­åˆå§‹åŒ–å¹¶æŒ‚è½½åˆ° window ä¸Šçš„ï¼Œæˆ‘ä»¬åœ¨ <code>web/src/pages/index.tsx</code> ä¸­è°ƒç”¨ <code>window.channel.call</code> å³å¯è°ƒç”¨æŒ‡å®šæ¥å£ã€‚ç”±äºæˆ‘ä»¬éœ€è¦æ¨¡ç³Šæœç´¢æ‰€æœ‰çš„æ–‡ç« ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨åˆå§‹åŒ–é¡µé¢æ—¶ä¸€æ¬¡è¯·æ±‚å®Œæ‰€æœ‰æ•°æ®ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Homepage</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; payload &#125; = (<span class="keyword">await</span> <span class="variable language_">window</span>.<span class="property">channel</span>.<span class="title function_">call</span>(&#123;</span><br><span class="line">      <span class="attr">eventType</span>: <span class="string">&#x27;request&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;queryPosts&#x27;</span>,</span><br><span class="line">      <span class="attr">params</span>: &#123; cursor &#125;,</span><br><span class="line">    &#125;)) <span class="keyword">as</span> <span class="built_in">any</span>;</span><br><span class="line">    tempData = tempData.<span class="title function_">concat</span>(payload.<span class="property">data</span>);</span><br><span class="line">    <span class="title function_">setData</span>(tempData);</span><br><span class="line">    <span class="keyword">if</span> (!payload.<span class="property">has_more</span>) &#123;</span><br><span class="line">      <span class="title function_">setInitLoading</span>(<span class="literal">false</span>);</span><br><span class="line">      <span class="title function_">setCategories</span>(<span class="title function_">_union</span>([<span class="string">&#x27;å…¨éƒ¨&#x27;</span>, ...tempData.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">category</span>.<span class="property">category_name</span>)]));</span><br><span class="line">      tempData = [];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      cursor += <span class="number">10</span>;</span><br><span class="line">      <span class="title function_">getData</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ›´å¤šå…·ä½“å®ç°ç»†èŠ‚å°±æ˜¯ä¸€äº›é¡µé¢ç¼–å†™é€»è¾‘ï¼Œä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç›´æ¥è¿›æŸ¥çœ‹<a href="https://github.com/youngjuning/juejin-me/tree/main/web">æºç </a>ã€‚</p><h3 id="é…ç½®æ˜é‡‘-ID"><a href="#é…ç½®æ˜é‡‘-ID" class="headerlink" title="é…ç½®æ˜é‡‘ ID"></a>é…ç½®æ˜é‡‘ ID</h3><p><strong>å£°æ˜é…ç½®</strong>ï¼š</p><p>vscode çš„é…ç½®æˆ‘ä»¬éœ€è¦å€ŸåŠ© package.json çš„ <code>contributes.configuration</code> å±æ€§ï¼Œæˆ‘ä»¬çš„æ˜é‡‘ ID æ˜¯ stringï¼Œæ‰€ä»¥å£°æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;configuration&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;%configuration.title%&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;object&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;juejin-me.userId&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;default&quot;</span><span class="punctuation">:</span> <span class="string">&quot;325111174662855&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;%configuration.properties.juejin-me.userId%&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹é…ç½®çš„å‘½ä»¤</strong>ï¼š</p><p>è®©ç”¨æˆ·æ‰“å¼€è®¾ç½®å»ä¿®æ”¹é…ç½®ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ä¸ºäº†ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬æä¾›äº† <code>juejin-me.configUserId</code> å‘½ä»¤ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å‘½ä»¤çš„å®ç°ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-me.configUserId&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> userId = <span class="keyword">await</span> vscode.<span class="property">window</span>.<span class="title function_">showInputBox</span>(&#123;</span><br><span class="line">      <span class="attr">placeHolder</span>: <span class="title function_">localize</span>(<span class="string">&#x27;extension.juejin-me.configUserId.placeHolder&#x27;</span>),</span><br><span class="line">      <span class="attr">validateInput</span>: <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (value) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">localize</span>(<span class="string">&#x27;extension.juejin-me.configUserId.validateInput&#x27;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> config = vscode.<span class="property">workspace</span>.<span class="title function_">getConfiguration</span>(<span class="string">&#x27;juejin-me&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    config.<span class="title function_">update</span>(<span class="string">&#x27;userId&#x27;</span>, userId, <span class="literal">true</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li><a href="https://vscode-api-cn.js.org/modules/window.html#showInputBox">vscode.window.showInputBox</a>ï¼šæ‰“å¼€ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œæç¤ºç”¨æˆ·è¾“å…¥æ˜é‡‘ç”¨æˆ· ID</li><li><a href="https://vscode-api-cn.js.org/modules/workspace.html#getConfiguration">vscode.workspace.getConfiguration</a>ï¼šè·å–å·¥ä½œç©ºé—´çš„é…ç½®å¯¹è±¡</li><li><a href="https://vscode-api-cn.js.org/interfaces/WorkspaceConfiguration.html#update">WorkspaceConfiguration.update</a>ï¼šæ›´æ–°ä¸€ä¸ªé…ç½®å€¼ã€‚</li><li><a href="https://vscode-api-cn.js.org/interfaces/InputBoxOptions.html#validateInput">InputBoxOptions.validateInput</a>ï¼šä¸€ä¸ªå¯é€‰çš„å‡½æ•°ï¼Œè¢«è°ƒç”¨æ¥éªŒè¯è¾“å…¥ä¿¡æ¯å¹¶æç¤ºç”¨æˆ·</li></ul><h3 id="æ’ä»¶æ•ˆæœå±•ç¤º"><a href="#æ’ä»¶æ•ˆæœå±•ç¤º" class="headerlink" title="æ’ä»¶æ•ˆæœå±•ç¤º"></a>æ’ä»¶æ•ˆæœå±•ç¤º</h3><p>æ„Ÿå…´è¶£çš„è¯ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æ‰©å±•ä¸­æœç´¢â€œæ˜é‡‘ä¸€ä¸‹â€è‡ªè¡Œä½“éªŒã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac7d2ab498b2469486e8f237fc3b7997~tplv-k3u1fbpfcp-zoom-1.image"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91ae0fdbff7043db9513e539640fcc2e~tplv-k3u1fbpfcp-zoom-1.image"></p><h2 id="å½©è›‹"><a href="#å½©è›‹" class="headerlink" title="å½©è›‹"></a>å½©è›‹</h2><h3 id="luozhu-x2F-create-vscode-webview"><a href="#luozhu-x2F-create-vscode-webview" class="headerlink" title="@luozhu&#x2F;create-vscode-webview"></a>@luozhu&#x2F;create-vscode-webview</h3><p>æœ¬æ–‡ä¸­æœ‰å¾ˆå¤šæœ€ä½³å®è·µï¼Œä¸ºäº†æ–¹ä¾¿ä¹‹ååˆ›å»ºæ–°çš„é¡¹ç›®æ—¶å‡å°‘é‡å¤å·¥ä½œï¼Œæ´›ç«¹æŠ½ç¦»å‡ºäº†ä¸€ä¸ªç®€å•çš„æ¨¡æ¿ã€‚æ˜å‹ç›´æ¥ä½¿ç”¨ <code>yarn create @luozhu/vscode-webview  myvscode</code> å³å¯åˆ›å»ºå‡ºä¸€ä¸ªå±äºè‡ªå·±çš„ vscode æ‰©å±•ã€‚å‚è€ƒæœ¬æ–‡çš„ä¸€äº›å®è·µå†åŠ ä¸€äº›ä½ çš„åˆ›æ„å³å¯å®Œæˆä¸€ä¸ªå‡ºè‰²çš„åŸºäº webview çš„ vscode æ‰©å±•ã€‚</p><h3 id="Word-Count-Juejin"><a href="#Word-Count-Juejin" class="headerlink" title="Word Count Juejin"></a>Word Count Juejin</h3><p>ä¸ºäº†ç­”è°¢æ˜é‡‘å¹³å°å’Œæ˜å‹ä¸€ç›´ä»¥æ¥çš„æ”¯æŒï¼Œæˆ‘ç¼–å†™äº†ä¸€æ¬¾ä¸“ä¸ºæ˜é‡‘é€‚é…çš„ Markdown æ–‡ä»¶å­—æ•°ç»Ÿè®¡ VS Code æ‰©å±•ï¼Œå­—æ•°ç»Ÿè®¡ä¼šå®æ—¶æ˜¾ç¤ºåœ¨çŠ¶æ€æ ã€‚æ¯”èµ·æ¥ vscode å®˜æ–¹çš„ Word Countï¼Œæˆ‘ä»¬æ”¯æŒä¸­æ–‡å­—æ•°ç»Ÿè®¡ï¼Œæ¯”èµ·æ¥ Word Count CJKï¼Œæˆ‘ä»¬æ”¯æŒä¸­è‹±æ–‡æ··æ’ã€‚å¦‚æœä½ ä¹Ÿå–œæ¬¢ä½¿ç”¨ VS Code çš„ Markdown ç¼–è¾‘èƒ½åŠ›ï¼Œé‚£ä¹ˆä¸€å®šä¸è¦é”™è¿‡æ´›ç«¹çš„è¿™æ¬¾æ’ä»¶ï¼Œä¸‹è½½è¯·è®¤å‡†ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/08c060326c954849b3eb2d34f2e6b0e5~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å¦‚æœä½ è¿˜åœ¨çŠ¹è±«è¦ä¸è¦ä¸‹è½½ï¼Œé‚£ä¸å¦¨çœ‹ä¸‹ä¸‰ä¸ªæ’ä»¶çš„ç»Ÿè®¡å¯¹æ¯”ï¼Œæˆ‘ä»¬æ‹¿ <code>i love juejin. æˆ‘çˆ±æ˜é‡‘</code> è¿™ä¸ªå­—ç¬¦ä¸²æµ‹è¯•ä¸€ä¸‹ä¸‰æ¬¾æ’ä»¶çš„åŠŸèƒ½ï¼š</p><table><thead><tr><th>Word Count</th><th>Word Count CJK</th><th>Word Count Juejin</th></tr></thead><tbody><tr><td>4 ä¸ªå­—</td><td>4 ä¸ªå­—</td><td>7 ä¸ªå­—</td></tr><tr><td>ä¸­æ–‡ç®—æˆäº†ä¸€ä¸ªå­—</td><td>ç›´æ¥å¿½ç•¥äº†è‹±æ–‡</td><td>ä¸­æ–‡4 ä¸ªå­—åŠ è‹±æ–‡ä¸‰ä¸ªå­—ï¼Œæ ¼å±€æ­£å¥½</td></tr></tbody></table><h3 id="vscode-api-cn"><a href="#vscode-api-cn" class="headerlink" title="vscode api cn"></a>vscode api cn</h3><p>åœ¨å­¦ä¹ å’Œå¼€å‘ vscode æ’ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å¤§çš„ç—›ç‚¹æ— è¿‡äº API æ–‡æ¡£ç¿»è¯‘çš„ç¼ºå¤±ã€‚å“ªæ€•æ˜¯ç¡¬ç€å¤´çš®çœ‹è‹±æ–‡åŸç‰ˆ API æ–‡æ¡£ï¼Œé˜…è¯»ä½“éªŒä¹Ÿå¾ˆå·®ã€‚ä¸ºäº†æ–¹ä¾¿è‡ªå·±ã€å›é¦ˆç¤¾åŒºï¼Œæˆ‘å’Œ <a href="https://juejin.cn/user/703340610597064">å¯’è‰</a> ç­‰å°ä¼™ä¼´å†³å®šç¿»è¯‘ vscode api ç±»å‹å£°æ˜å¹¶ä½¿ç”¨ Typedoc æ‰¿è½½ï¼Œå¦å¤–åœ¨å®Œå·¥åæˆ‘ä»¬ä¹Ÿä¼šè¾“å‡º <code>@types/vscode-cn</code> ç±»å‹åŒ…ä»£æ›¿ <code>@types/vscode</code> è¿›ä¸€æ­¥æ–¹ä¾¿ vscode æ’ä»¶å¼€å‘è€…ã€‚å›¢é˜Ÿæˆå‘˜ç°çŠ¶ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aa80c1603b2e4482883fe39e1b44f62e~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç¿»è¯‘æ˜¯ä¸€ä»¶å¸¦æœ‰ä¾ ä¹‰ç²¾ç¥çš„äº‹ä¸šï¼Œæ¬¢è¿æ›´å¤šçš„å°ä¼™ä¼´åŠ å…¥æˆ‘ä»¬ã€‚ä½ å¯ä»¥æµè§ˆ<a href="https://github.com/vscode-cn/vscode-api-cn">ä»“åº“</a>å’Œ<a href="https://vscode-api-cn.js.org/">å®˜ç½‘</a>äº†è§£å…·ä½“æƒ…å†µã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>è¿™æ˜¯ç¬¬ä¸€æ¬¡å°è¯•å†™è¿™ä¹ˆé•¿çš„æ–‡ç« ï¼Œæ–­æ–­ç»­ç»­ç»å†äº†æœ‰åŠä¸ªæœˆï¼Œæœ¬ç€å¯¹è¯»è€…è´Ÿè´£ä»»çš„æ€åº¦ï¼Œæ–‡ä¸­çš„å®è·µéƒ½æ˜¯ç»è¿‡åå¤æµ‹è¯•ä»¥åŠå’ŒåŒäº‹æœ‹å‹çš„è®¨è®ºã€‚å½“ç„¶ vscode æ’ä»¶å¼€å‘çš„æ¦‚å¿µå’Œ API æ¯”è¾ƒå¤šï¼Œä¸€ç¯‡æ–‡ç« ä¹Ÿå¾ˆéš¾è®²å…¨ï¼Œè®²é€å½»ã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºå‘Šè¯‰æ´›ç«¹ï¼Œæˆ‘å¯ä»¥ç»§ç»­æ›´æ–°è¿™æ–¹é¢çš„æ•™ç¨‹ã€‚</p><blockquote><p>æœ¬æ–‡é¦–å‘äºã€Œæ˜é‡‘ä¸“æ ã€ï¼ŒåŒæ­¥äºå…¬ä¼—å·ã€Œç¨‹åºäººç”Ÿã€ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;âš ï¸æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¸©é¦¨æç¤ºï¼šç»“åˆæœ¬æ–‡é…å¥—&lt;a href=&quot;https://github.com/youngjuning/juejin-me&quot;&gt;æºç &lt;</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="VS Code" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/VS-Code/"/>
    
    
    <category term="æ˜é‡‘" scheme="https://youngjuning.js.org/tags/%E6%8E%98%E9%87%91/"/>
    
    <category term="VS Code" scheme="https://youngjuning.js.org/tags/VS-Code/"/>
    
    <category term="Webview" scheme="https://youngjuning.js.org/tags/Webview/"/>
    
    <category term="æ‰©å±•" scheme="https://youngjuning.js.org/tags/%E6%89%A9%E5%B1%95/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•å¼€å‘ä¸€æ¬¾ VS Code yarn.lock é¢„è§ˆæ’ä»¶</title>
    <link href="https://youngjuning.js.org/1bbed3d2a249/"/>
    <id>https://youngjuning.js.org/1bbed3d2a249/</id>
    <published>2023-02-26T05:56:50.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://marketplace.visualstudio.com/items?itemName=youngjuning.yarn-lock-preview">Yarn Lock Preview</a> æ’ä»¶å·²å‘å¸ƒï¼Œäº²æµ‹å·²æ¯”è¾ƒç¨³å®šï¼Œæºç åœ¨ <a href="https://github.com/youngjuning/vscode-yarn-lock-preview">vscode-yarn-lock-preview</a> ï¼Œå¦‚æœå¯¹ä½ äº›è®¸å¸®åŠ©å’Œå¯å‘ï¼Œä¸å¦¨èµä¸€ä¸ª Starã€‚</p></blockquote><blockquote><p><a href="https://vscode-api-cn.js.org/">VS Code API ä¸­æ–‡æ–‡æ¡£</a> åœ¨å¤§å®¶çš„çƒ­æƒ…ä¸‹å·²ç»æœ‰åºå¼€å±•äº†ç¿»è¯‘å·¥ä½œï¼Œä¹Ÿæ¬¢è¿å¤§å®¶ä¸€èµ·å‚ä¸ç¿»è¯‘ï¼</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ <a href="https://juejin.cn/post/7000589186898231333">ã€Šä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•ã€‹</a> ä¸€æ–‡ä¸­ï¼Œæ´›ç«¹é€šè¿‡å®æˆ˜é˜è¿°äº†å¦‚ä½•åŸºäº webview å®ç°åœ¨ vscode ä¸­å±•ç¤ºè‡ªå®šä¹‰ UI çš„åŠŸèƒ½ï¼Œå¦å¤–æ–‡ç« é…å¥—äº§ç‰© <a href="vscode:extension/youngjuning.juejin-me">æ˜é‡‘ä¸€ä¸‹</a> æ’ä»¶ä¹Ÿå·²ç»å‘å¸ƒï¼Œæ¬¢è¿è¯•ç”¨ã€‚</p><p>äººä»¬ğŸ‘¨ğŸ»â€ğŸ’»æ€»æ˜¯å–œæ¬¢ç‚«è€€è‡ªå·±çš„æ–°æŠ€èƒ½ï¼Œæ´›ç«¹ä¹Ÿä¸ä¾‹å¤–ï¼Œæ¯•ç«Ÿæ–°æŠ€èƒ½éœ€è¦å¤§é‡çš„å®æˆ˜ç»ƒä¹ ã€‚åœ¨å…¥é—¨äº† VS Code æ‰©å±•å¼€å‘åï¼Œé‡åˆ°å¼€å‘ç—›ç‚¹æˆ‘å°±ä¹ æƒ¯åœ°ç”¨ VS Code æ’ä»¶çš„æ€è·¯å»è§£å†³ã€‚ä¸è¿‡å¤§å¤šæ‰©å±• idea éƒ½å·²ç»åèŠ±æœ‰ä¸»ï¼Œç›´åˆ°æˆ‘æƒ³åˆ°å¯ä»¥å°† <code>yarn.lock</code> æ–‡ä»¶å¯è§†åŒ–å¹¶æœç´¢ç›¸å…³æ’ä»¶æ— æœåï¼Œæˆ‘çŸ¥é“æœºä¼šæ¥äº†ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“"><a href="#ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“" class="headerlink" title="ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“"></a>ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“</h2><p>åœ¨å¼€å§‹å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆç¼–è¾‘å™¨ï¼Ÿä»€ä¹ˆåˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨ï¼Ÿ</p><p>VS Code ä¸­ç¼–è¾‘å™¨ï¼ˆEditorï¼‰å…¶å®å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ç¼–ç çš„åœ°æ–¹ã€‚å¦‚ä¸‹å›¾ï¼ŒVS Code çš„ç”¨æˆ·ç•Œé¢åˆ†ä¸º 5 ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ Activity Barï¼ˆæ´»åŠ¨æ ï¼‰ã€Side Barï¼ˆä¾§è¾¹æ ï¼‰ã€Editor Groupsï¼ˆç¼–è¾‘å™¨ç»„ï¼‰ã€Panelï¼ˆé¢æ¿ï¼‰ å’Œ Status Barï¼ˆçŠ¶æ€æ ï¼‰ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/301eab5bbab04c65aec4a927b7d306a9~tplv-k3u1fbpfcp-zoom-1.image"></p><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨æŒ‡çš„æ˜¯ VS Code ä¸­ç›¸å¯¹äºé»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨çš„ç¼–è¾‘å™¨ç±»å‹ã€‚æ ¹æ®ç”¨é€”ä¸åŒï¼Œè‡ªå®šä¹‰ç¼–è¾‘å™¨åˆåˆ†ä¸º <a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomTextEditorProvider.html">è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨</a>ã€<a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomEditorProvider.html">è‡ªå®šä¹‰ç¼–è¾‘å™¨</a> å’Œ <a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomReadonlyEditorProvider.html">è‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨</a>ã€‚</p><p>è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨å¸¸è¢«ç”¨æ¥ä¸º JSONã€XMLã€CSVã€JSON æˆ–è€…ä»»æ„ <a href="https://vscode-api-cn.js.org/interfaces/vscode.TextDocument.html">æ–‡æœ¬æ–‡æ¡£</a> æä¾›è‡ªå®šä¹‰çš„è§†è§‰æ¸²æŸ“ã€‚æ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=SimonSiefke.svg-preview">Svg Preview</a>ã€<a href="https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced">Markdown Preview Enhanced</a>ã€<a href="https://marketplace.visualstudio.com/items?itemName=vstirbu.vscode-mermaid-preview">Mermaid Preview</a> å’Œ <a href="https://marketplace.visualstudio.com/items?itemName=saber2pr.todolist">Todo List</a>ã€‚</p><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨å¸¸è¢«ç”¨æ¥é¢„è§ˆèµ„äº§(assets)æ–‡ä»¶ï¼Œæ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=slevesque.vscode-3dviewer">3D Viewer for VSCode</a>ã€<a href="https://marketplace.visualstudio.com/items?itemName=hediet.vscode-drawio">Draw.io Integration</a> å’Œ <a href="https://marketplace.visualstudio.com/items?itemName=elypia.magick-image-reader">Magick Image Reader</a></p><p>ä½†ä»–ä»¬çš„å…±åŒç‚¹éƒ½æ˜¯ä½¿ç”¨äº† VS Code è‡ªå®šä¹‰ç¼–è¾‘å™¨è¿™ä¸ªåŠŸèƒ½ã€‚æœ¬æ–‡çš„ç›®æ ‡å…¶å®å°±æ˜¯å®ç°ä¸€ä¸ªå’Œä¸Šè¿°æ’ä»¶ä¸€æ ·çš„ Preview ç±»å‹çš„æ‰©å±•ã€‚</p><h2 id="ä¸ºä»€ä¹ˆå¼€å‘-Yarn-Lock-Previewï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå¼€å‘-Yarn-Lock-Previewï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå¼€å‘ Yarn Lock Previewï¼Ÿ"></a>ä¸ºä»€ä¹ˆå¼€å‘ Yarn Lock Previewï¼Ÿ</h2><p>æœ¬æ¥æ–‡ç« æ˜¯æ²¡æœ‰è¿™ä¸€ç« çš„ã€‚åœ¨æ’ä»¶åˆšå‘å¸ƒçš„æ—¶å€™ï¼Œæ²¡ç­‰æ–‡ç« å†™å®Œï¼Œæˆ‘å°±è¿«ä¸åŠå¾…åœ°å‘åŒäº‹å’Œæœ‹å‹ä»¥åŠå¸¸æ··è¿¹çš„å‡ ä¸ªç¾¤æ¨èäº†æˆ‘çš„æ’ä»¶ï¼Œç„¶åå°±è¢«ä¸€ä¸ªç¾¤å‹çµé­‚æ‹·é—®äº†â€œä½ è¿™æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿâ€ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c054b9bca3b44b61b7b9ecc7206240a4~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/643f9dd16c734e8487866f6a3306f0f3~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>å¼€å‘ä¸€æ¬¾è‡ªå®šä¹‰ç¼–è¾‘å™¨æ’ä»¶è¦æ¯”å•çº¯çš„å¼€å‘æ’ä»¶å’Œ webview æ’ä»¶éƒ½è¦éº»çƒ¦ï¼Œæ²¡æœ‰äººä¼šé—²çš„æ— èŠç‰ºç‰²ä¸šä½™æ—¶é—´ï¼Œåšä¸€ä¸ªæ²¡æœ‰æ„æ€çš„äº‹æƒ…ã€‚ä»å­¦ä¹ è§’åº¦æ¥è®²ï¼Œå¯ä»¥æŒæ¡äº†å¤§é‡ VSCode APIï¼Œä»ä½œç”¨æ¥è®²ï¼Œæ›´ç›´è§‚åœ°æŸ¥çœ‹ <code>yarn.lock</code> å¹¶æ”¯æŒæœç´¢æŸä¸ªåŒ…ä»¥åŠä¾èµ–è¯¥åŒ…çš„åŒ…ã€‚è¿™åœ¨ä½ æƒ³ç¡®å®šåº”ç”¨çš„é—´æ¥å¼•ç”¨äº†å“ªäº›åŒ…æ—¶å¾ˆæœ‰å¸®åŠ©ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2faa24d3cee4c9088e83c4d0ee06c63~tplv-k3u1fbpfcp-watermark.image" alt="screenshot.gif"></p><p>è¿™å…¶å®æ˜¯ä¸€ä¸ªæ¥è‡ªäºå®é™…å·¥ä½œä¸­çš„ä¸€ä¸ªç—›ç‚¹ï¼ŒReact Native ä¸­å¦‚æœåŒæ—¶ä¾èµ–ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„åŸç”ŸåŒ…ï¼Œè¿è¡Œé¡¹ç›®çš„æ—¶å€™å°±ä¼šå› ä¸ºé‡å¤æ³¨å†ŒæŸä¸ª <code>View</code> é€ æˆåº”ç”¨å´©æºƒã€‚å…¥èŒæ¶‚é¸¦ä¸€å¹´æ¥ï¼Œå¸®åŠ©ä¸šåŠ¡åŒå­¦æ’æŸ¥äº† N æ¬¡è¿™ä¸ªé—®é¢˜ã€‚ç”±äºæŸäº›ç‰ˆæœ¬çš„ä¾èµ–å¹¶ä¸æ˜¯ç›´æ¥åœ¨ <code>dependencies</code> ä¸­å†™çš„ï¼Œè€Œæ˜¯æŸä¸ªåŒ…é—´æ¥ä¾èµ–çš„ï¼Œæˆ‘çš„åŠæ³•æ˜¯å°±æ˜¯åœ¨ <code>yarn.lock</code> ä¸­ <code>cmd+f</code> æœç´¢é€ æˆå´©æºƒçš„åŒ…è¢«å“ªäº›åŒ…ä¾èµ–äº†ï¼Œç„¶åå†äººè‚‰åˆ†æè¿™ä¸ªæœ‰ç»“æ„çš„çº¯æ–‡æœ¬æ–‡ä»¶ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ee531d6d54d4d269984174b5bae97b8~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>è™½ç„¶æˆ‘å·²ç»æ˜¯å¤„ç†è¿™ä¸ªé—®é¢˜çš„è€å¸æœºäº†ï¼Œä½†æ€»å½’æ˜¯ä¼šè€½è¯¯ä¸å°‘æˆ‘å’ŒåŒäº‹çš„æ—¶é—´ã€‚ä¸Šé¢çš„è¿™ä¸ªé—®é¢˜å¯èƒ½æ¯”è¾ƒæç«¯ï¼Œè¿˜æœ‰ä¸€ä¸ªæˆ‘ä»¬ç»å¸¸é‡åˆ°çš„å¼€å‘çš„åé¦ˆæ˜¯å¼•å…¥äº†æŸä¸ªåŸç”ŸåŒ…ä¹‹åå¯¼è‡´åº”ç”¨å´©æºƒã€‚è¿™å…¶å®æ˜¯å› ä¸ºæˆ‘ä»¬çš„ React Native åº”ç”¨æ˜¯ä»¥åµŒå¥—çš„å½¢å¼é›†æˆåˆ°å·²æœ‰åŸç”Ÿæ¶‚é¸¦ App å†…çš„ï¼Œæ‰€ä»¥åŸç”Ÿåº“çš„æ”¯æŒä¹Ÿæ˜¯ä¾èµ– App æä¾›çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬åœ¨æ‰“åŒ…çš„æ—¶å€™ä¹Ÿæœ‰ç›¸åº”çš„æ£€éªŒå·¥å…·ï¼Œä½†æ˜¯ç”¨æˆ·æœ‰å¯èƒ½æ²¡æœ‰ç›´æ¥ä¾èµ–è¿™ä¸ªåº“ï¼Œè€Œæ˜¯è¿™ä¸ªåº“é—´æ¥æˆ–è€…é—´æ¥åœ°é—´æ¥åº“å¼•ç”¨äº†è¿™ä¸ªåº“ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¾—åœ¨ä¸Šä¸‡è¡Œçº¯æ–‡æœ¬ yarn.lock ä¸­å¼€å¯äººè‚‰åˆ†æã€‚</p><p>æ¯”å¦‚ï¼ŒApp ç›®å‰æ”¯æŒçš„ react-native-svg ç‰ˆæœ¬æ˜¯ 5.5.1ã€‚ç”¨æˆ·ä½¿ç”¨çš„ <code>react-native-svg-charts</code> æœ€æ–°ç‰ˆä¾èµ–çš„æ˜¯ react-native-svg <code>^6.2.1</code> æˆ–è€… <code>^7.0.3</code>ã€‚ç”¨æˆ·æŒ‰ç…§æŒ‡å¼•ç›´æ¥å®‰è£…ä½¿ç”¨è¿è¡Œå´©æºƒï¼Œç„¶åæ‰¾åˆ°æˆ‘ä»¬è´¨ç–‘ã€‚é‚£å¦‚æœç”¨äº†è¿™æ¬¾æ’ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­æœç´¢ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95d979f9b7c549e68f8321dac0aaa481~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>æœ€åä¸€ä¸ªå°±æ˜¯ä½ ä¸€å®šå¯èƒ½ä¼šé‡åˆ°çš„åœºæ™¯ï¼Œæ¯”å¦‚å¼€å‘å£°æ˜çš„ä¾èµ–æ˜¯ <code>tuya-panel-kit@^4.6.0</code>ï¼Œç„¶åé‡åˆ°é—®é¢˜ï¼Œç›´æ¥æˆªå›¾å‘Šè¯‰ä½ æˆ‘æ²¡æœ‰å‡çº§è¿‡ç‰ˆæœ¬å‘€ï¼Œä¸ºå•¥æŠ¥é”™äº†æˆ–è€…ä¸ºå•¥è¡¨ç°ä¸ä¸€æ ·äº†çš„é—®é¢˜ã€‚ç„¶åæˆ‘ä»¬å°±å¾—è®©ç”¨æˆ·çœ‹ä¸€ä¸‹å®é™…ä¾èµ–çš„ç‰ˆæœ¬æ˜¯ä»€ä¹ˆã€‚æœ‰çš„å¼€å‘ä¼šå» <code>node_modules</code> ä¸‹é¢æ‰¾ï¼Œè¿™å…¶å®ä¸é è°±ï¼Œå±‚çº§é‚£ä¹ˆå¤æ‚ï¼Œæƒ³å¿«é€Ÿå®šä½æ˜¯å¾ˆéš¾çš„ï¼›æœ‰çš„å¼€å‘ä¼šåœ¨ <code>yarn.lock</code> ä¸­äººè‚‰æœç´¢ï¼›æˆ–è€…æœ‰çš„å¼€å‘ç›´æ¥è®©æˆ‘ä»¬å¸®å¿™æ’æŸ¥ã€‚é‚£ä¹ˆæœ‰äº†è¿™æ¬¾æ’ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®©å¼€å‘è‡ªå·±æœï¼Œç„¶åæˆªå›¾æ issues ç»™æˆ‘ä»¬ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7bc01f9c7df543db90d6f6b31444eeca~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><blockquote><p>æ¸©é¦¨æç¤ºï¼š<code>yarn list --pattern tuya-panel-kit</code> å‘½ä»¤ä¹Ÿå¯ä»¥åˆ—å‡ºç®€è¦çš„ä¾èµ–ä¿¡æ¯ã€‚</p></blockquote><p>å¨é€¼å¨è¿™ä¹ˆå¤šï¼Œç›¸ä¿¡è¯»è€…å·²ç»å’Œæˆ‘è¾¾æˆå…±è¯†äº†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ¬¢è¿è¯„è®ºåŒº Battleã€‚åºŸè¯ä¸å¤šè¯´ï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬æ¥å¼€å§‹å±•ç¤ºçœŸæ­£çš„æŠ€æœ¯å§ã€‚</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c9f81662bba4518b8d075d132d870e1~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®"></a>åˆå§‹åŒ–é¡¹ç›®</h2><h3 id="ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶"><a href="#ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶" class="headerlink" title="ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶"></a>ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶</h3><ol><li>å®‰è£… <a href="http://yeoman.io/">Yeoman</a> å’Œ <a href="https://www.npmjs.com/package/generator-code">VS Code Extension Generator</a>ï¼š<code>npm install -g yo generator-code</code></li><li>ç”Ÿæˆé¡¹ç›®ï¼š<code>yo code</code></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ yo code</span><br><span class="line"><span class="comment">#     _-----_     â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span></span><br><span class="line"><span class="comment">#    |       |    â”‚   Welcome to the Visual  â”‚</span></span><br><span class="line"><span class="comment">#    |--(o)--|    â”‚   Studio Code Extension  â”‚</span></span><br><span class="line"><span class="comment">#   `---------Â´   â”‚        generator!        â”‚</span></span><br><span class="line"><span class="comment">#    ( _Â´U`_ )    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span></span><br><span class="line"><span class="comment">#    /___A___\   /</span></span><br><span class="line"><span class="comment">#     |  ~  |</span></span><br><span class="line"><span class="comment">#   __&#x27;.___.&#x27;__</span></span><br><span class="line"><span class="comment"># Â´   `  |Â° Â´ Y `</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ? What type of extension do you want to create? New Extension (TypeScript)</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the name of your extension? Yarn Lock Preview</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the identifier of your extension? yarn-lock-preview</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the description of your extension? Previews yarn.lock file</span></span><br><span class="line"><span class="comment"># ? Initialize a git repository? Yes</span></span><br><span class="line"><span class="comment"># ? Bundle the source code with webpack? No</span></span><br><span class="line"><span class="comment"># ? Which package manager to use? yarn</span></span><br><span class="line"></span><br><span class="line">$ code ./vscode-yarn-lock-preview</span><br></pre></td></tr></table></figure><h3 id="è§„èŒƒåŒ–é¡¹ç›®"><a href="#è§„èŒƒåŒ–é¡¹ç›®" class="headerlink" title="è§„èŒƒåŒ–é¡¹ç›®"></a>è§„èŒƒåŒ–é¡¹ç›®</h3><ol><li>ä»£ç è§„èŒƒé…ç½® - <code>npx @luozhu/create-coding-style</code></li><li>æŒ‰ç…§æ–°çš„ä»£ç è§„èŒƒæ ¼å¼åŒ–ä»£ç  - <code>yarn lint --fix</code></li><li>Git Commit è§„èŒƒé…ç½® - <code>npx @luozhu/create-commitlint</code></li></ol><h3 id="æ‰©å±•ä¿¡æ¯é…ç½®"><a href="#æ‰©å±•ä¿¡æ¯é…ç½®" class="headerlink" title="æ‰©å±•ä¿¡æ¯é…ç½®"></a>æ‰©å±•ä¿¡æ¯é…ç½®</h3><ol><li>æ‰©å±•ä¿¡æ¯é…ç½®ï¼ˆpackage.jsonï¼‰<ol><li>é…ç½® <a href="https://code.visualstudio.com/api/working-with-extensions/publishing-extension#create-a-publisher">publisher</a></li><li>æ·»åŠ ä¸Š <code>license</code> å­—æ®µã€‚</li><li>æ·»åŠ  <code>repository</code> å­—æ®µã€‚</li><li>é…ç½® <code>icon</code>ï¼š128 x 128 åƒç´ å›¾æ ‡çš„è·¯å¾„ã€‚</li></ol></li><li>ä¿®æ”¹ readmeï¼šå› ä¸ºåˆå§‹çš„æ²¡æ³•é€šè¿‡ <code>vsce package</code> æ ¡éªŒ</li><li>ä½¿ç”¨ <code>npx vsce package</code> å°è¯•æ‰“åŒ…ï¼Œç¡®ä¿æ²¡æœ‰é”™è¯¯å’Œè­¦å‘Š</li></ol><h3 id="ä½¿ç”¨-esbuild-æ‰“åŒ…"><a href="#ä½¿ç”¨-esbuild-æ‰“åŒ…" class="headerlink" title="ä½¿ç”¨ esbuild æ‰“åŒ…"></a>ä½¿ç”¨ esbuild æ‰“åŒ…</h3><p>åœ¨ <a href="https://juejin.cn/post/7000589186898231333/#heading-8">ä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•</a> ä¸­æˆ‘ä»¬è®²è¿°äº†ä½¿ç”¨ esbuild æ‰“åŒ…å¯ä»¥å‡å°æ‰“åŒ…äº§ç‰©çš„ä½“ç§¯ä»¥åŠåŠ å¿«è°ƒè¯•é€Ÿåº¦ã€‚å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç« å³å¯å®Œæˆé…ç½®ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p><h3 id="Donâ€™t-repeat-yourself"><a href="#Donâ€™t-repeat-yourself" class="headerlink" title="Donâ€™t repeat yourself"></a>Donâ€™t repeat yourself</h3><p>æœ¬ç€é‡å¤çš„å·¥ä½œéƒ½å¯ä»¥ç”¨è„šæœ¬ä»£æ›¿çš„åŸåˆ™ï¼Œæˆ‘ vscode æ’ä»¶å¼€å‘çš„æœ€ä½³å®è·µæ²‰æ·€ä¸ºäº†ä¸€ä¸ªè„šæ‰‹æ¶ï¼Œæ‰§è¡Œ <code>yarn create @luozhu/vscode-extension</code> å³å¯å¿«é€Ÿå¼€å§‹å¼€å‘ vscode æ‰©å±•ã€‚</p><h2 id="è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†"><a href="#è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†" class="headerlink" title="è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†"></a>è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†</h2><h3 id="å·¥ä½œæœºåˆ¶"><a href="#å·¥ä½œæœºåˆ¶" class="headerlink" title="å·¥ä½œæœºåˆ¶"></a>å·¥ä½œæœºåˆ¶</h3><p>å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“äº†åœ¨ VS Code ä¸­è‡ªå®šä¹‰ç¼–è¾‘å™¨æœ‰ä¸‰ç§ï¼šè‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨ã€è‡ªå®šä¹‰ç¼–è¾‘å™¨å’Œè‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨ã€‚ä¸‰ç§ç±»å‹çš„ç¼–è¾‘å™¨éƒ½ä¼šæ›¿æ¢ VS Code ä¸­çš„æ ‡å‡†æ–‡æœ¬ç¼–è¾‘å™¨å±•ç¤ºçš„ä½ç½®ã€‚ä¸åŒçš„æ˜¯è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨ç”±äºæ˜¯åŸºäº VS Code çš„æ ‡å‡†æ–‡æœ¬æ–‡æ¡£æ¨¡å‹ï¼Œä¸éœ€è¦å¼€å‘è€…æä¾›ï¼Œæ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=SimonSiefke.svg-preview">Svg Preview</a> æ’ä»¶ã€‚è€Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶çš„é¢„è§ˆï¼Œå› æ­¤éœ€è¦å¼€å‘è€…è‡ªå·±æä¾›æ–‡æ¡£æ¨¡å‹å¹¶è‡ªè¡Œå®ç°è¯¸å¦‚ä¿å­˜å’Œå¤‡ä»½è¿™äº›åŠŸèƒ½æ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=hediet.vscode-drawio">Draw.io Integration</a> æ’ä»¶ã€‚è‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨åˆ™ç”¨äºé¢„è§ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=elypia.magick-image-reader">Magick Image Reader</a>ã€‚</p><p>äº†è§£äº†ä¸‰ç§è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„åŒºåˆ«ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æˆ‘ä»¬çš„æ’ä»¶å±äºå“ªç§è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚å…¶å®ç­”æ¡ˆæ˜¾è€Œæ˜“è§ï¼Œ<code>yarn.lock</code> æ–‡ä»¶å±äº VS Code æ ‡å‡†æ–‡æ¡£æ¨¡å‹ï¼Œæˆ‘ä»¬é€‰ç”¨æœ€ç®€å•çš„è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨å³å¯ã€‚</p><p>ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ä¼šæ¶‰åŠè§†å›¾ã€æ’ä»¶ã€æ–‡æ¡£æ¨¡å‹ã€åº•å±‚èµ„æºæ–‡ä»¶ä»¥åŠå®ƒä»¬ä¹‹é—´çš„äº¤äº’ï¼Œå…¶å¤§æ¦‚åŸç†å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/116948b627f4406ba51faa0353f147a7~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç”±äºé¢„è§ˆ <code>yarn.lock</code> ä¸éœ€è¦æˆ‘ä»¬æä¾›æ–‡æ¡£æ¨¡å‹ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦åŸºäº <a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomTextEditorProvider.html">CustomTextEditorProvider</a> ç¼–å†™ä¸€ä¸ª CustomEditorProvider ç»™æ’ä»¶æ³¨å†Œä½¿ç”¨ï¼Œç„¶åç¼–å†™æˆ‘ä»¬çš„è§†å›¾ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰ï¼Œæœ€åå®ç°è§†å›¾å’Œæ’ä»¶çš„äº¤äº’å³å¯ã€‚</p><p>å…¶ä¸­æˆ‘ä»¬éœ€è¦å…³æ³¨çš„ç‚¹æœ‰å¦‚ä½•å¼€å‘è§†å›¾ã€è§†å›¾å’Œæ’ä»¶å¦‚ä½•é€šä¿¡ã€å¦‚ä½•å®ç° CustomEditorProvider ä»¥åŠå¦‚ä½•æ³¨å†Œ CustomEditorProviderã€‚</p><h3 id="å¦‚ä½•å¼€å‘è§†å›¾"><a href="#å¦‚ä½•å¼€å‘è§†å›¾" class="headerlink" title="å¦‚ä½•å¼€å‘è§†å›¾"></a>å¦‚ä½•å¼€å‘è§†å›¾</h3><p>è§†å›¾æ˜¯é€šè¿‡Â webview å®ç°çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥é€šè¿‡æ ‡å‡†çš„ HTMLã€CSS å’Œ JavaScript æ„å»ºç”¨æˆ·ä½“éªŒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä½ ç†Ÿæ‚‰çš„å‰ç«¯æ¡†æ¶å®ç°ã€‚</p><h3 id="è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡"><a href="#è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡" class="headerlink" title="è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡"></a>è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡</h3><p>ç”±äº VS Code çš„é™åˆ¶ï¼ŒWebview æ˜¯ä¸èƒ½ç›´æ¥è®¿é—® VS Code API ä»¥åŠå‘é€ç½‘ç»œè¯·æ±‚çš„ï¼Œä½†æ˜¯å®ƒå¯ä»¥é€šè¿‡ postMessage ä¸æ’ä»¶è¿›è¡ŒåŒå‘é€šä¿¡ã€‚ä½†æ˜¯æ‰‹å†™åŒå‘é€šä¿¡æ¯”è¾ƒéº»çƒ¦ï¼Œå°¤å…¶æ˜¯è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œwebview éœ€è¦å…ˆå‘é€å‘èµ·ç½‘ç»œè¯·æ±‚çš„æ¶ˆæ¯ï¼Œæ’ä»¶ä¾§æ³¨å†Œçš„ç›‘å¬äº‹ä»¶å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œæ’ä»¶ç­‰å¾…ç½‘ç»œè¯·æ±‚è¿”å›åå†å‘é€æ¶ˆæ¯å°†æ•°æ®å‘ç»™ webviewï¼Œæœ€å webview é€šè¿‡æ³¨å†Œçš„ç›‘å¬äº‹ä»¶è·å–ä¿¡æ¯ã€‚ç®€è¦çš„æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20f34a967c234945afbaf9aaf2901163~tplv-k3u1fbpfcp-watermark.image" alt="webview é€šä¿¡åŸç†.png"></p><p>æŠ›å¼€å…·ä½“å®ç°æ¥çœ‹è¿™ä¸ªäº¤äº’å°±å·²ç»å¾ˆåäººç±»äº†ï¼Œè€Œä¸”å…·ä½“ä½¿ç”¨æ—¶è¿˜ä¼šé¢å¯¹ webview å’Œæ’ä»¶ç”¨åˆ°çš„ API ä¹Ÿä¸ä¸€æ ·å¯¼è‡´çš„è½¬æ¢æˆæœ¬å’Œå¿ƒæ™ºè´Ÿæ‹…ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œæˆ‘å°è£…äº† <a href="https://www.npmjs.com/package/@luozhu/vscode-channel">@luozhu&#x2F;vscode-channel</a> æ¥å®ç°å¥½ç”¨çš„åŒå‘é€šä¿¡ã€‚ä½ å¯ä»¥ç®€å•åœ°åœ¨ webview ä¾§é€šè¿‡ <code>call</code> æ–¹æ³•è°ƒç”¨æ–¹æ³•å¹¶ç­‰å¾…å¤„ç†ç»“æœï¼Œæ’ä»¶ä¾§é€šè¿‡ <code>bind</code> æ–¹æ³•ç»‘å®šäº‹ä»¶å¤„ç†ã€‚</p><h3 id="å¦‚ä½•å®ç°-CustomEditorProvider"><a href="#å¦‚ä½•å®ç°-CustomEditorProvider" class="headerlink" title="å¦‚ä½•å®ç° CustomEditorProvider"></a>å¦‚ä½•å®ç° CustomEditorProvider</h3><p>å‚è€ƒå®˜æ–¹ Demo <a href="https://github.com/microsoft/vscode-extension-samples/blob/main/custom-editor-sample/src/catScratchEditor.ts#L16">catScratchEditor</a> æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>CatScratchEditorProvider</code> æ˜¯é€šè¿‡å®ç°äº† <code>vscode.CustomTextEditorProvider</code> æ¥å£åˆ›å»ºçš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚è€Œ <code>vscode.CustomTextEditorProvider</code> è¿™ä¸ªæ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•  <code>resolveCustomTexEditor</code>ã€‚æ‰€ä»¥åŸç†ä¸Šæˆ‘ä»¬åªéœ€è¦å®ç° <code>resolveCustomTexEditor</code> è¿™ä¸ªæ–¹æ³•å³å¯ã€‚</p><h3 id="å¦‚ä½•æ³¨å†Œ-CustomEditorProvider"><a href="#å¦‚ä½•æ³¨å†Œ-CustomEditorProvider" class="headerlink" title="å¦‚ä½•æ³¨å†Œ CustomEditorProvider"></a>å¦‚ä½•æ³¨å†Œ CustomEditorProvider</h3><p>å®ç°äº†è‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ³¨å†Œåˆ°æ’ä»¶ä¸­ï¼ŒVS Code æä¾›äº† <code>vscode.window.registerCustomEditorProvider</code> æ–¹æ³•ç”¨æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚</p><h2 id="è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°"><a href="#è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°" class="headerlink" title="è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°"></a>è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°</h2><p>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚å¦‚æœå¯¹å‰é¢çš„æ¦‚å¿µæ„Ÿåˆ°å›°æƒ‘ï¼Œé‚£æ¥ä¸‹æ¥çš„å®æˆ˜å¯èƒ½ä¼šè®©ä½ è±ç„¶å¼€æœ—ã€‚</p><h3 id="å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨"><a href="#å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨" class="headerlink" title="å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨"></a>å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨</h3><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨æ˜¯é€šè¿‡ <code>package.json</code> çš„è´¡çŒ®å†…å®¹ï¼ˆ<code>contributes</code>ï¼‰çš„ <code>customEditors</code> å±æ€§å£°æ˜çš„ï¼Œ<code>customEditors</code> æä¾›è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæ‰©å±•ä¸­æä¾›å¤šä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚æˆ‘ä»¬å£°æ˜çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;activationEvents&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;onCustomEditor:yarn-lock-preview.yarnLock&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;customEditors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;viewType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn-lock-preview.yarnLock&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;displayName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Preview yarn.lock&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;selector&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;filenamePattern&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn.lock&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;priority&quot;</span><span class="punctuation">:</span> <span class="string">&quot;option&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><ul><li><code>activationEvents</code> - æ³¨å†Œæ¿€æ´»äº‹ä»¶<ul><li><code>onCustomEditor:*</code> - æ¿€æ´»è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„äº‹ä»¶</li></ul></li><li><code>customEditors</code> - æä¾›çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚<ul><li><code>viewType</code> - è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„æ ‡è¯†ç¬¦ã€‚å®ƒåœ¨æ‰€æœ‰è‡ªå®šä¹‰ç¼–è¾‘å™¨ä¸­éƒ½å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤å»ºè®®å°†æ‰©å±• ID ä½œä¸º <code>viewType</code> çš„ä¸€éƒ¨åˆ†åŒ…æ‹¬åœ¨å†…ã€‚åœ¨ä½¿ç”¨ <code>vscode.registerCustomEditorProvider</code> å’Œåœ¨ <code>onCustomEditor:$&#123;id&#125;</code>Â æ¿€æ´»äº‹ä»¶ä¸­æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨æ—¶ï¼Œä½¿ç”¨ <code>viewType</code>ã€‚</li><li><code>displayName</code> - è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ç”¨æˆ·å¯è¯»åç§°ã€‚å½“é€‰æ‹©è¦ä½¿ç”¨çš„ç¼–è¾‘å™¨æ—¶ï¼Œå‘ç”¨æˆ·æ˜¾ç¤ºæ­¤åç§°ã€‚</li><li><code>selector</code> - ä¸ºå…¶å¯ç”¨äº†è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ä¸€ç»„ globã€‚</li><li><code>priority</code> - ï¼ˆå¯é€‰ï¼‰ç¡®å®šè‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ä½¿ç”¨æ—¶æœºã€‚è¿™ä¸ªå­—æ®µæ§åˆ¶åˆé€‚ä½¿ç”¨ç‰¹å®šçš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚<ul><li><code>option</code> - åœ¨ç”¨æˆ·æ‰“å¼€èµ„æºæ—¶ä¸ä¼šè‡ªåŠ¨ä½¿ç”¨æ­¤ç¼–è¾‘å™¨ï¼Œä½†ç”¨æˆ·å¯ä½¿ç”¨Â <code>Reopen With</code>Â å‘½ä»¤åˆ‡æ¢åˆ°æ­¤ç¼–è¾‘å™¨ã€‚</li><li><code>default</code> - åœ¨ç”¨æˆ·æ‰“å¼€èµ„æºæ—¶è‡ªåŠ¨ä½¿ç”¨æ­¤ç¼–è¾‘å™¨ï¼Œå‰ææ˜¯æ²¡æœ‰ä¸ºè¯¥èµ„æºæ³¨å†Œå…¶ä»–é»˜è®¤çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚</li></ul></li></ul></li></ul><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥æ‰“å¼€ä¸€ä¸ª <code>yarn.lock</code> æ–‡ä»¶ï¼Œå¹¶åœ¨å‘½ä»¤é¢æ¿ä¸­è¾“å…¥ <code>Reopen with</code> é€‰æ‹©æˆ‘å‰é¢æ³¨å†Œçš„ <code>Preview yarn.lock</code>ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/376a6b66b7c24de589fb48a54d29efb6~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 11.28.37.gif"></p><p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç©ºç™½çš„ç¼–è¾‘å™¨ä»¥åŠé¡¶éƒ¨çš„ä¸ä¼šåœæ­¢çš„åŠ è½½è¿›åº¦æ¡ã€‚</p><p>æ‰“å¼€å‘½ä»¤é¢æ¿è¾“å‡ºå‘½ä»¤çš„æ–¹å¼å¯¹ç”¨æˆ·æ¥è¯´ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¼–è¾‘å™¨èœå•ä¸­æ·»åŠ ä¸€ä¸ªåˆ‡æ¢æŒ‰é’®å®ç°å¿«é€Ÿåˆ‡æ¢ç¼–è¾‘å™¨æ¨¡å¼ã€‚é¦–å…ˆæˆ‘ä»¬åœ¨ <code>package.json</code> ä¸­é…ç½®å‘½ä»¤å’Œèœå•ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;commands&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn-lock-preview.switchEditorMode&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;switch editor mode&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$(rocket)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;menus&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;editor/title&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn-lock-preview.switchEditorMode&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;navigation&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li><code>commands</code> - å¯¹å‘½ä»¤é¢æ¿æä¾›å‘½ä»¤ã€‚</li><li><code>menus</code> - å‘ç¼–è¾‘å™¨æä¾›èœå•é¡¹ã€‚</li></ul><p>ç„¶ååœ¨ <code>src/extension</code> ä¸­çš„ active å‡½æ•°ä¸­æ³¨å†Œå‘½ä»¤åŠå®ç°å‘½ä»¤å›è°ƒï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; commands, <span class="title class_">ExtensionContext</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Congratulations, your extension &quot;yarn-lock-preview&quot; is now active!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">    commands.<span class="title function_">registerCommand</span>(<span class="string">&#x27;yarn-lock-preview.switchEditorMode&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      commands.<span class="title function_">executeCommand</span>(<span class="string">&#x27;workbench.action.reopenWithEditor&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘åªæ‰¾åˆ°äº† <code>workbench.action.reopenWithEditor</code> è¿™ä¸ªå¯ä»¥è§¦å‘çš„å‘½ä»¤ï¼Œæˆ‘æœ¬æ„æ˜¯å®ç°ç±»ä¼¼ git çš„<strong>æ‰“å¼€æ–‡ä»¶</strong>å’Œ<strong>æ‰“å¼€æ›´æ”¹</strong>çš„åŠŸèƒ½ã€‚ç”±äºå­¦è‰ºä¸ç²¾ï¼Œ<a href="https://github.dev/microsoft/vscode/blob/f66a3e06bcb9f000e5dc0ad0040ff9b32fc75c78/extensions/git/src/commands.ts#L655-L656">git.openFile</a> çš„å®ç°æˆ‘è¿˜éœ€è¦å†ç ”ç©¶ä¸€ä¸‹ï¼Œå¦‚æœæœ‰å¤§ä½¬çœ‹åˆ°è¿™æ¥å¯ä»¥æŒ‡ç‚¹ä¸€ä¸‹ã€‚ç›®å‰æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb03abea51634bd3a0a8c1a27b155ec0~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 12.46.00.gif"></p><h3 id="æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider"><a href="#æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider" class="headerlink" title="æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider"></a>æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider</h3><p>ç°åœ¨æˆ‘ä»¬å·²ç»æ³¨å†Œäº†è‡ªå®šä¹‰æ–‡æ¡£ç±»å‹ <code>yarn-lock-preview.yarnLock</code> å’Œ <code>onCustomEditor:yarn-lock-preview.yarnLock</code> æ¿€æ´»äº‹ä»¶ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å€ŸåŠ© <a href="https://vscode-api-cn.js.org/modules/window.html#registerCustomEditorProvider">window.registerCustomEditorProvider</a> æ–¹æ³•æ³¨å†Œå¯¹åº”çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚</p><p>å¦‚æœè¿™æ—¶å€™å°è¯•è°ƒç”¨ <code>registerCustomEditorProvider</code> æ–¹æ³•ï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬å¹¶æ²¡æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ provider å¯ä»¥ä½¿ç”¨ï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬ä¼šå®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Congratulations, your extension &quot;yarn-lock-preview&quot; is now active!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">registerCustomEditorProvider</span>(</span><br><span class="line">      <span class="string">&#x27;yarn-lock-preview.yarnLock&#x27;</span>,</span><br><span class="line">      provider <span class="comment">// è‡ªå®šä¹‰ç¼–è¾‘å™¨ provider å®ä¾‹</span></span><br><span class="line">    );</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider"><a href="#å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider" class="headerlink" title="å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider"></a>å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider</h3><p>ç”±äºæˆ‘ä»¬è¦é¢„è§ˆçš„æ–‡ä»¶æ˜¯ VS Code çš„æ ‡å‡†æ–‡æ¡£æ¨¡å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åŸºäº <code>CustomTextEditorProvider</code> è¿™ä¸ªæ¥å£å°è£…ä¸€ä¸ªç±»æ¥å®ç°å®ƒã€‚ä¸ºæ­¤æˆ‘ä»¬æ–°å»ºä¸€ä¸ª <code>YarnLockEditorProvider.ts</code> æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶çš„æœ€å°å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">implements</span> vscode.<span class="property">CustomTextEditorProvider</span> &#123;</span><br><span class="line">  <span class="comment">// å°† context æ³¨å…¥ this å¯¹è±¡</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> <span class="keyword">readonly</span> context: vscode.ExtensionContext</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å½“è‡ªå®šä¹‰ç¼–è¾‘å™¨æ‰“å¼€æ—¶è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">resolveCustomTextEditor</span>(</span><br><span class="line">    <span class="attr">_document</span>: vscode.<span class="property">TextDocument</span>,</span><br><span class="line">    <span class="attr">webviewPanel</span>: vscode.<span class="property">WebviewPanel</span>,</span><br><span class="line">    <span class="attr">_token</span>: vscode.<span class="property">CancellationToken</span></span><br><span class="line">  ): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// ç»™ webview è®¾ç½®åˆå§‹å†…å®¹</span></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">options</span> = &#123;</span><br><span class="line">      <span class="attr">enableScripts</span>: <span class="literal">true</span>, <span class="comment">// å…è®¸åœ¨ webview ä¸­è¿è¡Œè„šæœ¬</span></span><br><span class="line">    &#125;;</span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="variable language_">this</span>.<span class="title function_">getHtmlForWebview</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">getHtmlForWebview</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">        &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;head&gt;</span></span><br><span class="line"><span class="string">            &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;title&gt;Cat Coding&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;/head&gt;</span></span><br><span class="line"><span class="string">        &lt;body&gt;</span></span><br><span class="line"><span class="string">            &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;/body&gt;</span></span><br><span class="line"><span class="string">        &lt;/html&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">YarnLockEditorProvider</span>;</span><br></pre></td></tr></table></figure><ul><li><code>class YarnLockEditorProvider implements vscode.CustomTextEditorProvider</code> - å£°æ˜ä¸€ä¸ªç±»å®ç°è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨ providerã€‚</li><li><a href="https://vscode-api-cn.js.org/interfaces/CustomTextEditorProvider.html#resolveCustomTextEditor">resolveCustomTextEditor</a>ï¼šæ ¹æ®ç»™å®šçš„æ–‡æœ¬èµ„æºè§£æè‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡æ‰“å¼€ä¸€ä¸ª <code>CustomTextEditorProvider</code> çš„èµ„æºæ—¶ï¼Œæˆ–è€…å½“ä»–ä»¬ä½¿ç”¨è¿™ä¸ª <code>CustomTextEditorProvider</code> é‡æ–°æ‰“å¼€ä¸€ä¸ªç°æœ‰çš„ç¼–è¾‘å™¨æ—¶ï¼Œè¯¥æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚</li><li><code>webviewPanel.webview.options</code> - é…ç½® webview é€‰é¡¹ï¼Œè¿™é‡Œæˆ‘ä»¬é…ç½®äº†å…è®¸ä½¿ç”¨è„šæœ¬ã€‚</li><li><code>webviewPanel.webview.html = this.getHtmlForWebview()</code> - ä¸º HTML è®¾ç½®åˆå§‹å†…å®¹ã€‚</li></ul><p>ä¸ºäº†ç®€åŒ–åˆå§‹åŒ–æ“ä½œï¼Œæˆ‘ä»¬ä¸º <code>YarnLockEditorProvider</code> ç±»å°è£…ä¸€ä¸ª <code>register</code> é™æ€æ–¹æ³•ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="title function_">register</span>(<span class="attr">context</span>: vscode.<span class="property">ExtensionContext</span>): vscode.<span class="property">Disposable</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> provider = <span class="keyword">new</span> <span class="title class_">YarnLockEditorProvider</span>(context);</span><br><span class="line">  <span class="keyword">const</span> providerRegistration = vscode.<span class="property">window</span>.<span class="title function_">registerCustomEditorProvider</span>(</span><br><span class="line">    <span class="title class_">YarnLockEditorProvider</span>.<span class="property">viewType</span>,</span><br><span class="line">    provider,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">webviewOptions</span>: &#123;</span><br><span class="line">        <span class="attr">retainContextWhenHidden</span>: <span class="literal">true</span>, <span class="comment">// éšè—æ—¶ä¿ç•™ä¸Šä¸‹æ–‡</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> providerRegistration;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> viewType = <span class="string">&#x27;yarn-lock-preview.yarnLock&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æ³¨å†Œæˆ‘ä»¬çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ provider äº†ï¼Œåœ¨ <code>src/extension.ts</code> çš„ <code>activate</code> æ–¹æ³•ä¸­è°ƒç”¨ <code>YarnLockEditorProvider.register(context)</code> å¾—åˆ°æ³¨å†Œçš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ï¼Œç„¶å <code>push</code> åˆ°ä»£ç†ç›‘å¬æ•°ç»„ä¸­å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">from</span> <span class="string">&#x27;./YarnLockEditorProvider&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(<span class="title class_">YarnLockEditorProvider</span>.<span class="title function_">register</span>(context));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€ä¸ªç®€å•ä½†å®Œæ•´çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨å°±å®Œæˆäº†ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e6addd1cb739448db52db1767154fe65~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 17.00.55.gif"></p><h2 id="yarn-lock-å¯è§†åŒ–é¢„è§ˆå®ç°"><a href="#yarn-lock-å¯è§†åŒ–é¢„è§ˆå®ç°" class="headerlink" title="yarn.lock å¯è§†åŒ–é¢„è§ˆå®ç°"></a>yarn.lock å¯è§†åŒ–é¢„è§ˆå®ç°</h2><p>å‰é¢æˆ‘ä»¬å·²ç»é¡ºåˆ©å¸¦å¤§å®¶å®ç°äº†åœ¨è‡ªå®šä¹‰ç¼–è¾‘å™¨ä¸­çœ‹çŒ«çš„åŠŸèƒ½ã€‚å½“ç„¶äº†ï¼Œæˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡å¯ä¸æ˜¯çœ‹é»‘çŒ«æ•²ä»£ç ã€‚è¿™ä¸€ç« æˆ‘ä»¬å°†æŒ‘æˆ˜æœ€åçš„ Bossï¼šå®ç°ä¸€ä¸ªå¯ä»¥æœç´¢çš„ yarn.lock ä¾èµ– Json æ ‘ã€‚</p><h3 id="è§£æ-yarn-lock-æ–‡ä»¶"><a href="#è§£æ-yarn-lock-æ–‡ä»¶" class="headerlink" title="è§£æ yarn.lock æ–‡ä»¶"></a>è§£æ yarn.lock æ–‡ä»¶</h3><p>è§£å†³äº†æŠ€æœ¯é—®é¢˜ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸šåŠ¡é—®é¢˜ã€‚æˆ‘ä»¬çš„ç—›ç‚¹æ˜¯ yarn.lock æ–‡ä»¶æ˜¯çº¯æ–‡æœ¬çš„ï¼Œé˜…è¯»èµ·æ¥æ¯”è¾ƒå›°éš¾ï¼Œéœ€è¦ä¸€ä¸ªæ›´å¥½çš„å±•ç¤ºå½¢å¼ã€‚é‚£æˆ‘ä»¬å¯ä»¥ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯å°†æ–‡æœ¬æ–‡ä»¶è½¬æˆæ›´æ˜“å¤„ç†çš„èµ„æºï¼Œä½œä¸ºå‰ç«¯ï¼Œå½“ç„¶é¦–é€‰ JSONã€‚å€ŸåŠ© Yarn å®˜æ–¹çš„ <a href="https://www.npmjs.com/package/@yarnpkg/lockfile">@yarnpkg&#x2F;lockfile</a> å·¥å…·æˆ‘ä»¬å°±å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚æˆ‘ä»¬æ¥ç¼–å†™ demo è¯•ä¸€ä¸‹ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> lockfile <span class="keyword">from</span> <span class="string">&#x27;@yarnpkg/lockfile&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">implements</span> vscode.<span class="property">CustomTextEditorProvider</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å½“è‡ªå®šä¹‰ç¼–è¾‘å™¨æ‰“å¼€æ—¶è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">resolveCustomTextEditor</span>(</span><br><span class="line">    <span class="attr">document</span>: vscode.<span class="property">TextDocument</span>,</span><br><span class="line">    <span class="attr">webviewPanel</span>: vscode.<span class="property">WebviewPanel</span>,</span><br><span class="line">    <span class="attr">_token</span>: vscode.<span class="property">CancellationToken</span></span><br><span class="line">  ): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// è·å–çº¯æ–‡æœ¬å¹¶è§£ææˆ json æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> json = lockfile.<span class="title function_">parse</span>(<span class="variable language_">document</span>.<span class="title function_">getText</span>()).<span class="property">object</span>;</span><br><span class="line">    <span class="comment">// å°† JSON å­—ç¬¦ä¸²ä¼ é€’ç»™ HTML æ‹¼è£…æ–¹æ³•å±•ç¤º</span></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="variable language_">this</span>.<span class="title function_">getHtmlForWebview</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(json));</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">getHtmlForWebview</span>(<span class="attr">json</span>: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">        &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;head&gt;</span></span><br><span class="line"><span class="string">            &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;title&gt;Cat Coding&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;/head&gt;</span></span><br><span class="line"><span class="string">        &lt;body&gt;</span></span><br><span class="line"><span class="string">          &lt;h1&gt;JSON æ•°æ®&lt;/h1&gt;</span></span><br><span class="line"><span class="string">          &lt;p&gt;<span class="subst">$&#123;json&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;/body&gt;</span></span><br><span class="line"><span class="string">        &lt;/html&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/979363c7be8c42d59e2aa564cf687c26~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 18.59.12.gif"></p><h3 id="webview-é›†æˆ-umijs"><a href="#webview-é›†æˆ-umijs" class="headerlink" title="webview é›†æˆ umijs"></a>webview é›†æˆ umijs</h3><p>å‚è€ƒ <a href="https://juejin.cn/post/7000589186898231333/#heading-9">ã€Š# ä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•ã€‹</a> å’Œ <a href="https://github.com/youngjuning/vscode-juejin-me">vscode-juejin-me</a> åˆå§‹åŒ– umijs é¡¹ç›®å¹¶åšä¸€äº›ä¿®å‰ªé€‚é…å·¥ä½œã€‚ç„¶åä½¿ç”¨ <code>@luozhu/vscode-utils</code> çš„ <code>getUmiHTMLContent</code> æ–¹æ³•è·å– HTML å†…å®¹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getUmiHTMLContent</span>(<span class="variable language_">this</span>.<span class="property">context</span>, webviewPanel, &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;Yarn Lock Preview&#x27;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="webview-å†…å®¹æ›´æ–°"><a href="#webview-å†…å®¹æ›´æ–°" class="headerlink" title="webview å†…å®¹æ›´æ–°"></a>webview å†…å®¹æ›´æ–°</h3><p>é›†æˆ umijs åæˆ‘ä»¬é€šè¿‡ <code>webviewPanel.webview.html</code> è®¾ç½®çš„åˆå§‹å†…å®¹æ˜¯ç©ºçš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦å°†æ–‡æœ¬ä¼ é€’ä»æ’ä»¶ä¼ é€’åˆ° webviewï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€æ¬¡é€šä¿¡ã€‚VS Code ä¸­ç”±äºç§ç§é™åˆ¶é€ æˆäº†ç¼–å†™é€šä¿¡çš„ä»£ç å¾ˆç¹çã€‚åŸºæœ¬ä¾èµ– webview çš„æ’ä»¶éƒ½ä¼šå°†é€šä¿¡æœºåˆ¶ç»™å°è£…äº†ã€‚æˆ‘è¿™é‡Œçš„å°è£…æ€è·¯æ˜¯å€Ÿé‰´äº† <a href="https://www.npmjs.com/package/js-channel">js-channel</a> å®ç°äº†ä¸€ä¸ªä½¿ç”¨èµ·æ¥å¿ƒæ™ºè´Ÿæ‹…æœ€å°çš„ <a href="https://github.com/youngjuning/luozhu/tree/main/packages/vscode-channel#readme">@luozhu&#x2F;vscode-channel</a>ã€‚å€ŸåŠ©è¿™ä¸ªå·¥å…·æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®ç°æ›´æ–° webview çš„æ“ä½œï¼š</p><p><strong>æ’ä»¶ä¾§å‘é€æ›´æ–°æ¶ˆæ¯ï¼š</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Channel</span> <span class="keyword">from</span> <span class="string">&#x27;@luozhu/vscode-channel&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">implements</span> vscode.<span class="property">CustomTextEditorProvider</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">resolveCustomTextEditor</span>(</span><br><span class="line">    <span class="attr">document</span>: vscode.<span class="property">TextDocument</span>,</span><br><span class="line">    <span class="attr">webviewPanel</span>: vscode.<span class="property">WebviewPanel</span>,</span><br><span class="line">    <span class="attr">_token</span>: vscode.<span class="property">CancellationToken</span></span><br><span class="line">  ): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// ç»™ webview è®¾ç½®åˆå§‹å†…å®¹</span></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">options</span> = &#123;</span><br><span class="line">      <span class="attr">enableScripts</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getUmiHTMLContent</span>(<span class="variable language_">this</span>.<span class="property">context</span>, webviewPanel, &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Yarn Lock Preview&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–ä¸€ä¸ª channel å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> channel = <span class="keyword">new</span> <span class="title class_">Channel</span>(<span class="variable language_">this</span>.<span class="property">context</span>, webviewPanel);</span><br><span class="line">    <span class="keyword">const</span> json = lockfile.<span class="title function_">parse</span>(<span class="variable language_">document</span>.<span class="title function_">getText</span>()).<span class="property">object</span>;</span><br><span class="line">    <span class="comment">// è§¦å‘ updateWebview äº‹ä»¶ï¼Œå¹¶å°†æ–‡æœ¬ä½œä¸ºå‚æ•°ä¼ å…¥</span></span><br><span class="line">    channel.<span class="title function_">call</span>(<span class="string">&#x27;updateWebview&#x27;</span>, json);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>webview ä¾§ç›‘å¬æ¶ˆæ¯ï¼š</strong></p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Channel</span> <span class="keyword">from</span> <span class="string">&#x27;@luozhu/vscode-channel&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">HomePage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = <span class="title class_">React</span>.<span class="title function_">useState</span>(&#123;&#125;);</span><br><span class="line">  <span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    channel.<span class="title function_">bind</span>(<span class="string">&#x27;updateWebview&#x27;</span>, <span class="function"><span class="params">message</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setData</span>(message.<span class="property">params</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,[])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–‡æœ¬å†…å®¹åŒæ­¥"><a href="#æ–‡æœ¬å†…å®¹åŒæ­¥" class="headerlink" title="æ–‡æœ¬å†…å®¹åŒæ­¥"></a>æ–‡æœ¬å†…å®¹åŒæ­¥</h3><p>å‰é¢ä¸€ç« æˆ‘ä»¬å®ç°äº†åˆå§‹å†…å®¹çš„åŒæ­¥ï¼Œä½†æ˜¯å†…å®¹ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œ<code>yarn.lock</code> å¾ˆå¯èƒ½ä¼šå˜åŒ–ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦ç›¸åº”åœ°æ›´æ–°æˆ‘ä»¬å†…å®¹ï¼Œè¿™ä¸ªéœ€æ±‚æˆ‘ä»¬éœ€è¦å€ŸåŠ© <code>vscode.workspace.onDidChangeTextDocument</code> äº‹ä»¶ç›‘å¬æ¥å®ç°ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»ç„¶æ˜¯åœ¨ resolveCustomTextEditor æ–¹æ³•ä¸­å®ç°</span></span><br><span class="line"><span class="comment">// ç”±äºéœ€è¦å¯¹ json æ•°æ®å¤„ç†å’Œé‡å¤è°ƒç”¨æ›´æ–°æ–¹æ³•ï¼Œå°è£…äº†æ­¤æ–¹æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateWebview</span>(<span class="params">textDocument: vscode.TextDocument</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> json = lockfile.<span class="title function_">parse</span>(textDocument.<span class="title function_">getText</span>());</span><br><span class="line">  <span class="keyword">switch</span> (json.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;merge&#x27;</span>:</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> å¤„ç† merge type</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;conflict&#x27;</span>:</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> å¤„ç† conflict type</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      json = json.<span class="property">object</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  channel.<span class="title function_">call</span>(<span class="string">&#x27;updateWebview&#x27;</span>, json);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ³¨å†Œé’©å­äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ webview ä¸æ–‡æœ¬æ–‡æ¡£åŒæ­¥ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// æ–‡æœ¬æ–‡ä»¶ä½œä¸ºæˆ‘ä»¬çš„æ¨¡å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å°†æ–‡ä»¶ä¸­çš„å˜åŒ–åŒæ­¥åˆ°æˆ‘ä»¬çš„ç¼–è¾‘å™¨ã€‚</span></span><br><span class="line"><span class="comment">// è¯·è®°ä½ï¼Œä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¹Ÿå¯ä»¥åœ¨å¤šä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ä¹‹é—´å…±äº«ï¼ˆä¾‹å¦‚ï¼Œå½“ä½ åˆ†å‰²ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨æ—¶å°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼‰ã€‚</span></span><br><span class="line"><span class="keyword">const</span> changeDocumentSubscription = vscode.<span class="property">workspace</span>.<span class="title function_">onDidChangeTextDocument</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (e.<span class="property">document</span>.<span class="property">uri</span>.<span class="title function_">toString</span>() === <span class="variable language_">document</span>.<span class="property">uri</span>.<span class="title function_">toString</span>()) &#123;</span><br><span class="line">    <span class="title function_">updateWebview</span>(e.<span class="property">document</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ç¡®ä¿å½“æˆ‘ä»¬çš„ç¼–è¾‘å™¨å…³é—­æ—¶ï¼Œç§»é™¤äº†ç›‘å¬å™¨ã€‚</span></span><br><span class="line">webviewPanel.<span class="title function_">onDidDispose</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  changeDocumentSubscription.<span class="title function_">dispose</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="å®ç°å¯æœç´¢çš„-JSON-View"><a href="#å®ç°å¯æœç´¢çš„-JSON-View" class="headerlink" title="å®ç°å¯æœç´¢çš„ JSON View"></a>å®ç°å¯æœç´¢çš„ JSON View</h3><p>æœç´¢å®ç°ä¸å¤æ‚ï¼Œå¤§å®¶æ„Ÿå…´è¶£å¯ä»¥ç›´æ¥é˜…è¯»æºç ï¼ŒUI ç”¨çš„æ˜¯ umi è‡ªå¸¦çš„ antdã€‚JSON View æˆ‘é€‰ç”¨äº† <code>react-json-view</code>ï¼Œè¿™ä¸ªæœ‰å‡ ç‚¹æ¯”è¾ƒæœ‰æ„æ€å¯ä»¥è®²ä¸€ä¸‹ã€‚</p><ol><li>æ•°æ®é‡è¿‡å¤§æ—¶æ¸²æŸ“æ€§èƒ½å·®éœ€è¦åˆ¤æ–­æ˜¯å¦æŠ˜å </li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ReactJson</span> <span class="keyword">from</span> <span class="string">&#x27;react-json-view&#x27;</span>;</span><br><span class="line">...</span><br><span class="line">&lt;<span class="title class_">ReactJson</span></span><br><span class="line">  shouldCollapse=&#123;<span class="function"><span class="params">filed</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// é™¤äº†æ ¹ç›®å½•éƒ½æŠ˜å </span></span><br><span class="line">    <span class="keyword">if</span> (filed.<span class="property">name</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ ·å¼ç¬¦åˆå½“å‰ä¸»é¢˜</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ReactJson</span> <span class="keyword">from</span> <span class="string">&#x27;react-json-view&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getCssVar</span> = (<span class="params">cssVar: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> htmlStyle = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">style</span>;</span><br><span class="line">  <span class="keyword">return</span> htmlStyle.<span class="title function_">getPropertyValue</span>(cssVar).<span class="title function_">trim</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">&lt;<span class="title class_">ReactJson</span></span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">backgroundColor</span>: <span class="title function_">getCssVar</span>(<span class="string">&#x27;--vscode-editor-background&#x27;</span>),</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="title function_">getCssVar</span>(<span class="string">&#x27;--vscode-editor-font-size&#x27;</span>),</span><br><span class="line">  &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><ol start="3"><li>äº®æš—ä¸»é¢˜é€‚é…</li></ol><p>å®Œç¾çš„é€‚é…è‚¯å®šæ˜¯è¦éšç€ä¸»é¢˜çš„æ›´æ”¹åˆ‡æ¢ ReactJson çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ’ä»¶ä¾§å‘èµ·é€šçŸ¥ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹ä¸»é¢˜</span></span><br><span class="line">channel.<span class="title function_">call</span>(<span class="string">&#x27;updateColorTheme&#x27;</span>, vscode.<span class="property">window</span>.<span class="property">activeColorTheme</span>);</span><br><span class="line"><span class="comment">// ç›‘å¬ä¸»é¢˜æ”¹å˜äº‹ä»¶</span></span><br><span class="line">vscode.<span class="property">window</span>.<span class="title function_">onDidChangeActiveColorTheme</span>(<span class="function"><span class="params">colorTheme</span> =&gt;</span> &#123;</span><br><span class="line">  channel.<span class="title function_">call</span>(<span class="string">&#x27;updateColorTheme&#x27;</span>, colorTheme);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ webview ä¾§ç›‘å¬ <code>updateColorTheme</code> äº‹ä»¶ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [theme, setTheme] = <span class="title class_">React</span>.<span class="property">useState</span>&lt;<span class="title class_">ThemeKeys</span>&gt;();</span><br><span class="line">...</span><br><span class="line"><span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">channel.<span class="title function_">bind</span>(<span class="string">&#x27;updateColorTheme&#x27;</span>, <span class="function"><span class="params">message</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; kind &#125; = message.<span class="property">params</span>;</span><br><span class="line">  <span class="title function_">setTheme</span>(kind === <span class="number">1</span> ? <span class="string">&#x27;rjv-default&#x27;</span> : <span class="string">&#x27;monokai&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;, []);</span><br><span class="line">...</span><br><span class="line">&lt;<span class="title class_">ReactJson</span></span><br><span class="line">  theme=&#123;theme&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><p>æ–‡ç« å¼€å¤´å·²ç»æ¼”ç¤ºäº†ç”¨æˆ·ç•Œé¢ï¼Œè¿™é‡Œæ”¾ä¸€å¼ é»‘è‰²ä¸»é¢˜æ•ˆæœå§ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8449b0b270aa423da2ede94f4ad10805~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 id="æ¶‰åŠ-API-é™„å½•"><a href="#æ¶‰åŠ-API-é™„å½•" class="headerlink" title="æ¶‰åŠ API é™„å½•"></a>æ¶‰åŠ API é™„å½•</h2><p>VS Code æ’ä»¶å¼€å‘æ¶‰åŠçŸ¥è¯†ç‚¹æ¯”è¾ƒå¤šï¼Œæ¯ç§æ’ä»¶ç±»å‹éƒ½æœ‰è‡ªå·±çš„å¥—è·¯å’Œ APIã€‚åŸºäºå…³æ³¨åˆ†ç¦»åŸåˆ™ï¼Œè¿™é‡Œåˆ—å‡ºäº†å’Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ç›¸å…³çš„ä¸€äº› APIï¼Œæ–¹ä¾¿å¤§å®¶ä»¥åŠæœªæ¥çš„æˆ‘æŸ¥é˜…ã€‚</p><h3 id="vscode-commands-registerCommand"><a href="#vscode-commands-registerCommand" class="headerlink" title="vscode.commands.registerCommand"></a>vscode.commands.registerCommand</h3><p>æ³¨å†Œä¸€ä¸ªå¯ä»¥è¢«é”®æ˜ å°„ã€èœå•é¡¹ã€åŠ¨ä½œæˆ–ç›´æ¥è°ƒç”¨çš„å‘½ä»¤ã€‚ç”¨ä¸€ä¸ªç°æœ‰çš„å‘½ä»¤æ ‡è¯†ç¬¦æ³¨å†Œä¸¤æ¬¡ä¸€ä¸ªå‘½ä»¤å°†å¯¼è‡´é”™è¯¯ã€‚</p><h3 id="vscode-TextDocument"><a href="#vscode-TextDocument" class="headerlink" title="vscode.TextDocument"></a>vscode.TextDocument</h3><h3 id="vscode-window-registerCustomEditorProvider"><a href="#vscode-window-registerCustomEditorProvider" class="headerlink" title="vscode.window.registerCustomEditorProvider"></a>vscode.window.registerCustomEditorProvider</h3><p>ä¸º <code>customEditors</code> æ‰©å±•åŠŸèƒ½ç‚¹è´¡çŒ®çš„ <code>viewType</code> æ³¨å†Œä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ Providerã€‚</p><p>å½“æ‰“å¼€ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨è¢«æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ª <code>onCustomEditor:viewType</code> æ´»åŠ¨äº‹ä»¶ã€‚ä½ çš„æ‰©å±•å¿…é¡»ä¸º <code>viewType</code> æ³¨å†Œä¸€ä¸ª <code>CustomTextEditorProvider</code>ã€<code>CustomReadonlyEditor</code>  æˆ– <code>CustomEditorProvider</code> ä½œä¸ºæ¿€æ´»çš„ä¸€éƒ¨åˆ†ã€‚</p><h3 id="vscode-CustomTextEditorProvider"><a href="#vscode-CustomTextEditorProvider" class="headerlink" title="vscode.CustomTextEditorProvider"></a>vscode.CustomTextEditorProvider</h3><p>åŸºäºæ–‡æœ¬çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ providerã€‚</p><p>åŸºäºæ–‡æœ¬çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ä½¿ç”¨ TextDocument ä½œä¸ºå…¶æ•°æ®æ¨¡å‹ã€‚å› ä¸ºå®ƒå…è®¸ç¼–è¾‘å™¨å¤„ç†è®¸å¤šå¸¸è§çš„æ“ä½œï¼Œå¦‚æ’¤é”€å’Œå¤‡ä»½ã€‚provider è´Ÿè´£åœ¨ webview å’Œ TextDocument ä¹‹é—´åŒæ­¥æ–‡æœ¬å˜åŒ–ã€‚</p><h4 id="CustomTextEditorProvider-resolveCustomTextEditor"><a href="#CustomTextEditorProvider-resolveCustomTextEditor" class="headerlink" title="CustomTextEditorProvider.resolveCustomTextEditor"></a>CustomTextEditorProvider.resolveCustomTextEditor</h4><p>æ ¹æ®ç»™å®šæ–‡æœ¬èµ„æºè§£æä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚è¯¥æ–¹æ³•å°†åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡ä¸º <code>CustomTextEditorProvider</code> æ‰“å¼€ä¸€ä¸ªèµ„æºæ—¶ï¼Œæˆ–è€…ä»–ä»¬ä½¿ç”¨è¿™ä¸ª <code>CustomTextEditorProvider</code> é‡æ–°æ‰“å¼€å·²ç»å­˜åœ¨çš„ç¼–è¾‘å™¨æ—¶è¢«è°ƒç”¨ã€‚</p><h3 id="vscode-CustomReadonlyEditorProvider"><a href="#vscode-CustomReadonlyEditorProvider" class="headerlink" title="vscode.CustomReadonlyEditorProvider"></a>vscode.CustomReadonlyEditorProvider</h3><p>ä½¿ç”¨è‡ªå®šä¹‰æ–‡æ¡£æ¨¡å‹çš„åªè¯»è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚</p><p>è‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨ä½¿ç”¨ <code>CustomDocument</code>ï¼Œè€Œä¸æ˜¯ <code>TextDocument</code>ã€‚</p><p>å½“å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…æ›´å¤æ‚çš„åœºæ™¯æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨è¿™ä¸ªç±»å‹çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚ç®€å•çš„åŸºäºæ–‡æœ¬çš„æ–‡æ¡£è¯·ä½¿ç”¨ <code>CustomTextEditorProvider</code>ã€‚</p><h3 id="vscode-CustomEditorProvider"><a href="#vscode-CustomEditorProvider" class="headerlink" title="vscode.CustomEditorProvider"></a>vscode.CustomEditorProvider</h3><p>ä½¿ç”¨è‡ªå®šä¹‰æ–‡æ¡£æ¨¡å‹çš„å¯ç¼–è¾‘è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ providerã€‚</p><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨ä½¿ç”¨ <code>CustomDocument</code>ï¼Œè€Œä¸æ˜¯ <code>TextDocument</code>ã€‚è¿™ä½¿å¾—æ‰©å±•ç¨‹åºå¯ä»¥å®Œå…¨æ§åˆ¶ç¼–è¾‘ã€ä¿å­˜å’Œå¤‡ä»½ç­‰æ“ä½œã€‚</p><p>å½“å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…æ›´å¤æ‚çš„åœºæ™¯æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨è¿™ä¸ªç±»å‹çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚ç®€å•çš„åŸºäºæ–‡æœ¬çš„æ–‡æ¡£è¯·ä½¿ç”¨ <code>CustomTextEditorProvider</code>ã€‚</p><h3 id="vscode-WebviewPanel"><a href="#vscode-WebviewPanel" class="headerlink" title="vscode.WebviewPanel"></a>vscode.WebviewPanel</h3><p>ä¸€ä¸ªåŒ…å« webview çš„é¢æ¿ã€‚</p><blockquote><p>æœ¬æ–‡é¦–å‘äº <a href="https://juejin.cn/user/325111174662855/posts">æ˜é‡‘ä¸“æ </a>ï¼ŒåŒæ­¥äº <a href="https://youngjuning.js.org/">æ´›ç«¹çš„åšå®¢</a> å’Œå…¬ä¼—å· <a href="https://cdn.jsdelivr.net/gh/youngjuning/images/20210418112129.jpeg">æ´›ç«¹æ—©èŒ¶é¦†</a>ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=youngjuning.yarn-lock-preview&quot;&gt;Yarn Lock Preview&lt;/a&gt; æ’ä»¶å·²å‘å¸ƒï¼Œäº²æµ‹å·²æ¯”</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="VS Code" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/VS-Code/"/>
    
    
    <category term="VS Code" scheme="https://youngjuning.js.org/tags/VS-Code/"/>
    
    <category term="yarn.lock" scheme="https://youngjuning.js.org/tags/yarn-lock/"/>
    
  </entry>
  
  <entry>
    <title>hexo-theme-butterfly é­”æ”¹ä¸ç¾åŒ–</title>
    <link href="https://youngjuning.js.org/3f81e8c6ddd1/"/>
    <id>https://youngjuning.js.org/3f81e8c6ddd1/</id>
    <published>2023-02-22T06:18:09.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<!-- DRAFT hexo-theme-butterfly é­”æ”¹ä¸ç¾åŒ– --><blockquote><p>å½“å‰é­”æ”¹åŸºäº hexo 6.3.0 å’Œ hexo-theme-butterfly 4.7.0</p></blockquote><h1 id="patch-package-é…ç½®"><a href="#patch-package-é…ç½®" class="headerlink" title="patch-package é…ç½®"></a>patch-package é…ç½®</h1><p>patch-package å¯ä»¥å°†ä½ çš„é­”æ”¹è®°å½•ä¿å­˜åˆ° <code>patches</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–¹ä¾¿ä¸‹æ¬¡æ›´æ–°ä¸»é¢˜ååº”ç”¨é­”æ”¹ã€‚æŒ‰ç…§ä¸‹é¢çš„ä»£ç ä¿®æ”¹ package.json å³å¯ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line"><span class="addition">+    &quot;postinstall&quot;: &quot;npx patch-package&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³ç›´æ¥åº”ç”¨æˆ‘çš„é­”æ”¹ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶æœ¬æ–‡çš„ä»£ç åˆ° <code>patches/hexo-theme-butterfly+4.7.0.patch</code></p><h1 id="ä¸¤ä¸ªå°äºº"><a href="#ä¸¤ä¸ªå°äºº" class="headerlink" title="ä¸¤ä¸ªå°äºº"></a>ä¸¤ä¸ªå°äºº</h1><div class="tabs" id="ä¸¤ä¸ªå°äºº"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ä¸¤ä¸ªå°äºº-1">æ”¹åŠ¨ç‚¹</button></li><li class="tab"><button type="button" data-href="#ä¸¤ä¸ªå°äºº-2">æ•ˆæœé¢„è§ˆ</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ä¸¤ä¸ªå°äºº-1"><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">diff --git a/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug b/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug</span></span><br><span class="line"><span class="comment">index 9e63627..905342a 100644</span></span><br><span class="line"><span class="comment">--- a/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug</span></span><br><span class="line"><span class="comment">+++ b/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug</span></span><br><span class="line"><span class="meta">@@ -4,3 +4,4 @@</span> if theme.aside.card_announcement.enable</span><br><span class="line">       i.fas.fa-bullhorn.fa-shake</span><br><span class="line">       span= _p(&#x27;aside.card_announcement&#x27;)</span><br><span class="line">     .announcement_content!= theme.aside.card_announcement.content</span><br><span class="line"><span class="addition">+      .twopeople!= &#x27;&lt;div class=&quot;twopeople&quot;&gt;&lt;div class=&quot;container&quot; style=&quot;height:200px;&quot;&gt;&lt;canvas class=&quot;illo&quot; width=&quot;800&quot; height=&quot;800&quot; style=&quot;max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;&quot;&gt;&lt;/canvas&gt;&lt;/div&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js&quot;&gt;&lt;/script&gt;&lt;script id=&quot;rendered-js&quot; src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js&quot;&gt;&lt;/script&gt;&lt;style&gt;.twopeople&#123;margin: 0;align-items: center;justify-content: center;text-align: center;&#125;canvas &#123;display: block;margin: 0 auto;cursor: move;&#125;&lt;/style&gt;&lt;/div&gt;&#x27;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¸¤ä¸ªå°äºº-2"><p><img src="https://picbed.qunarzz.com/f3d661e2088ea4fd706709ee1024adce.png" alt="æ•ˆæœé¢„è§ˆ"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p>é¸£è°¢ <a href="https://guole.fun/posts/butterfly-custom/">https://guole.fun/posts/butterfly-custom/</a></p></blockquote><h1 id="ç«™ç‚¹-Logo-åœ†è§’"><a href="#ç«™ç‚¹-Logo-åœ†è§’" class="headerlink" title="ç«™ç‚¹ Logo åœ†è§’"></a>ç«™ç‚¹ Logo åœ†è§’</h1><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">diff --git a/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl b/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl</span></span><br><span class="line"><span class="comment">index ade0db3..956a69e 100644</span></span><br><span class="line"><span class="comment">--- a/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl</span></span><br><span class="line"><span class="comment">+++ b/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl</span></span><br><span class="line"><span class="meta">@@ -289,6 +289,7 @@</span></span><br><span class="line">       margin-right: 6px</span><br><span class="line">       height: 36px</span><br><span class="line">       vertical-align: middle</span><br><span class="line"><span class="addition">+      border-radius: 50%</span></span><br><span class="line"></span><br><span class="line">   #toggle-menu</span><br><span class="line">     display: none</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æœ¬æ–‡å°†ä»‹ç»æœ¬ç«™å¯¹ hexo-theme-butterfly è¿›è¡Œçš„ä¸€äº›ç¾åŒ–å’Œé­”æ”¹ã€‚</summary>
    
    
    
    <category term="ç«™ç‚¹è¿è¥" scheme="https://youngjuning.js.org/categories/%E7%AB%99%E7%82%B9%E8%BF%90%E8%90%A5/"/>
    
    
    <category term="hexo" scheme="https://youngjuning.js.org/tags/hexo/"/>
    
    <category term="hexo-theme-butterfly" scheme="https://youngjuning.js.org/tags/hexo-theme-butterfly/"/>
    
    <category term="é­”æ”¹" scheme="https://youngjuning.js.org/tags/%E9%AD%94%E6%94%B9/"/>
    
    <category term="ç¾åŒ–" scheme="https://youngjuning.js.org/tags/%E7%BE%8E%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆå¤‡è€ƒç¬”è®°</title>
    <link href="https://youngjuning.js.org/e896d9d3a8e1/"/>
    <id>https://youngjuning.js.org/e896d9d3a8e1/</id>
    <published>2023-02-19T15:40:41.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<!-- DRAFT ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆå¤‡è€ƒç¬”è®° --><h1 id="ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ"><a href="#ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ" class="headerlink" title="ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ"></a>ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ</h1><h2 id="ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–"><a href="#ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–"></a>ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–</h2><h3 id="ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ"><a href="#ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ"></a>ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ä¿¡æ¯çš„å®šä¹‰</summary><div class="toggle-content"><p>ä¿¡æ¯å°±æ˜¯ç”¨æ¥æ¶ˆé™¤ä¸ç¡®å®šæ€§çš„ä¸œè¥¿ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¿¡æ¯çš„ç‰¹å¾</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯çš„ç‰¹å¾</summary><div class="toggle-content"><ol><li><strong>å®¢è§‚æ€§</strong>ï¼šä¿¡æ¯æ˜¯å®¢è§‚äº‹ç‰©åœ¨äººè„‘ä¸­çš„åæ˜ ï¼Œè€Œåæ˜ çš„å¯¹è±¡åˆ™æœ‰ä¸»è§‚å’Œå®¢è§‚çš„åŒºåˆ«ï¼Œå› æ­¤ï¼Œä¿¡æ¯å¯åˆ†ä¸ºä¸»è§‚ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå†³ç­–ã€æŒ‡ä»¤å’Œè®¡åˆ’ç­‰ï¼‰å’Œå®¢è§‚ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå›½é™…å½¢å¼ã€ç»æµå‘å±•å’Œä¸€å¹´å››å­£ç­‰ï¼‰ã€‚ä¸»è§‚ä¿¡æ¯å¿…ç„¶è¦è½¬åŒ–æˆå®¢è§‚ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œå†³ç­–å’Œè®¡åˆ’ç­‰ä¸»è§‚ä¿¡æ¯è¦è½¬åŒ–æˆå®é™…è¡ŒåŠ¨ã€‚</li><li><strong>æ™®éæ€§</strong>ï¼šç‰©è´¨å…·æœ‰æ™®éæ€§ï¼Œä¿¡æ¯å±äºç‰©è´¨ï¼Œç‰©è´¨çš„æ™®éæ€§å†³å®šäº†ä¿¡æ¯çš„æ™®éå­˜åœ¨ã€‚</li><li><strong>æ— é™æ€§</strong>ï¼šå®¢è§‚ä¸–ç•Œæ˜¯æ— é™çš„ï¼Œä¿¡æ¯æ˜¯å®¢è§‚äº‹ç‰©&#x2F;ä¸–ç•Œåœ¨äººè„‘ä¸­çš„åæ˜ ï¼Œåæ˜ å®¢è§‚ä¸–ç•Œçš„ä¿¡æ¯è‡ªç„¶ä¹Ÿæ˜¯æ— é™çš„ã€‚æ— é™æ€§å¯åˆ†ä¸ºä¸¤ä¸ªå±‚æ¬¡ï¼Œä¸€æ˜¯æ— é™çš„äº‹ç‰©äº§ç”Ÿæ— é™çš„ä¿¡æ¯ï¼Œå³ä¿¡æ¯çš„æ€»é‡æ˜¯æ— é™çš„ï¼›äºŒæ˜¯æ¯ä¸ªå…·ä½“äº‹ç‰©æˆ–æœ‰é™ä¸ªé£Ÿç‰©çš„é›†åˆæ‰€èƒ½äº§ç”Ÿçš„ä¿¡æ¯ä¹Ÿå¯ä»¥æ˜¯æ— é™çš„ã€‚</li><li><strong>åŠ¨æ€æ€§</strong>ï¼šä¿¡æ¯æ˜¯éšç€æ—¶é—´çš„å˜åŒ–è€Œå˜åŒ–çš„ã€‚</li><li><strong>ç›¸å¯¹æ€§</strong>ï¼šä¸åŒçš„è®¤è¯†ä¸»ä½“ä»åŒä¸€äº‹ç‰©ä¸­è·å–çš„ä¿¡æ¯åŠä¿¡æ¯é‡å¯èƒ½æ˜¯ä¸åŒçš„ã€‚è¿™ä¼šå–å†³äºè®¤è¯†ä¸»ä½“çš„ç”Ÿé•¿ç¯å¢ƒã€æ•™è‚²ã€å·¥ä½œç¯å¢ƒã€å·¥ä½œæ€§è´¨ç­‰å¤–ç•Œå› ç´ ã€‚</li><li><strong>ä¾é™„æ€§</strong>ï¼šä¿¡æ¯çš„ä¾é™„æ€§å¯ä»¥ä»ä¸¤ä¸ªæ–¹é¢æ¥è§£é‡Šï¼Œä¸€æ–¹é¢ï¼Œä¿¡æ¯æ˜¯å®¢è§‚ä¸–ç•Œçš„åæ˜ ï¼Œä»»ä½•ä¿¡æ¯å¿…ç„¶ç”±å®¢è§‚äº‹ç‰©æ‰€äº§ç”Ÿï¼Œä¸å­˜åœ¨æ— æºçš„ä¿¡æ¯ï¼›å¦ä¸€æ–¹é¢ï¼Œä»»ä½•ä¿¡æ¯éƒ½è¦ä¾é™„äºä¸€å®šçš„è½½ä½“è€Œå­˜åœ¨ï¼Œéœ€è¦æœ‰ç‰©è´¨çš„æ‰¿æ‹…è€…ï¼Œä¿¡æ¯ä¸èƒ½å®Œå…¨è„±ç¦»ç‰©è´¨è€Œç‹¬ç«‹å­˜åœ¨ã€‚</li><li><strong>å˜æ¢æ€§</strong>ï¼šä¿¡æ¯é€šè¿‡å¤„ç†å¯ä»¥å®ç°å˜åŒ–æˆ–è½¬æ¢ï¼Œä½¿å…¶å½¢å¼å’Œå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œä»¥é€‚åº”ç‰¹å®šçš„éœ€è¦ã€‚æ¯”è¾ƒæ˜æ˜¾çš„æ˜¯æ•°æ®å¯è§†åŒ–åˆ†è¿‡ç¨‹ï¼Œå®ç°ä¿¡æ¯ä»æ–‡å­—åˆ°è¡¨æ ¼ï¼Œæœ€ç»ˆåˆ°å›¾è¡¨çš„å±•ç¤ºï¼Œé€šè¿‡å˜åŒ–ï¼Œä¿¡æ¯çš„å¯è¯»æ€§è¶Šæ¥è¶Šå¼ºã€‚</li><li><strong>ä¼ é€’æ€§</strong>ï¼šä¿¡æ¯åœ¨æ—¶é—´ä¸Šçš„ä¼ é€’å°±æ˜¯å­˜å‚¨ï¼Œåœ¨ç©ºé—´ä¸Šçš„ä¼ é€’å°±æ˜¯è½¬ç§»æˆ–æ‰©æ•£ã€‚</li><li><strong>å±‚æ¬¡æ€§</strong>ï¼šå®¢è§‚ä¸–ç•Œæ˜¯åˆ†å±‚æ¬¡çš„ï¼Œåæ˜ å®ƒçš„ä¿¡æ¯ä¹Ÿæ˜¯åˆ†å±‚æ¬¡çš„ã€‚</li><li><strong>ç³»ç»Ÿæ€§</strong>ï¼šä¿¡æ¯å¯ä»¥è¡¨ç¤ºä¸ºä¸€ç§åˆé›†ï¼Œä¸åŒç±»åˆ«çš„ä¿¡æ¯å¯ä»¥å½¢æˆä¸åŒçš„æ•´ä½“ã€‚å› æ­¤ï¼Œå¯ä»¥å½¢æˆä¸ç°å®ä¸–ç•Œç›¸å¯¹åº”çš„ä¿¡æ¯ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼šç»æµé¢†åŸŸä¸­çš„å•†ä¸šç³»ç»Ÿå’Œé‡‘èç³»ç»Ÿï¼Œè‡ªç„¶ç•Œä¸­çš„æ°´åˆ©ç³»ç»Ÿå’Œç”Ÿæ€ç³»ç»Ÿç­‰ã€‚</li><li><strong>è½¬åŒ–æ€§</strong>ï¼šä¿¡æ¯çš„äº§ç”Ÿä¸èƒ½æ²¡æœ‰ç‰©è´¨ï¼Œä¿¡æ¯çš„ä¼ é€’ä¸èƒ½æ²¡æœ‰èƒ½é‡ï¼Œä½†æœ‰æ•ˆåœ°ä½¿ç”¨ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ä¿¡æ¯è½¬åŒ–ä¸ºç‰©è´¨æˆ–èƒ½é‡ã€‚</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯è´¨é‡å±æ€§â­</summary><div class="toggle-content"><ol><li><strong>ç²¾ç¡®æ€§</strong>ï¼šå¯¹äº‹ç‰©çŠ¶æ€æè¿°çš„ç²¾å‡†ç¨‹åº¦ã€‚</li><li><strong>å®Œæ•´æ€§</strong>ï¼šå¯¹äº‹ç‰©çŠ¶æ€æè¿°çš„å…¨é¢ç¨‹åº¦ï¼Œå®Œæ•´ä¿¡æ¯åº”åŒ…æ‹¬æ‰€æœ‰é‡è¦äº‹å®ã€‚</li><li><strong>å¯é æ€§</strong>ï¼šæŒ‡ä¿¡æ¯çš„æ¥æºã€é‡‡é›†æ–¹æ³•ã€ä¼ è¾“è¿‡ç¨‹æ˜¯å¯ä»¥ä¿¡ä»»çš„ï¼Œç¬¦åˆé¢„æœŸã€‚</li><li><strong>åŠæ—¶æ€§</strong>ï¼ŒæŒ‡è·å¾—ä¿¡æ¯çš„æ—¶åˆ»ä¸äº‹ä»¶å‘ç”Ÿæ—¶åˆ»çš„é—´éš”é•¿çŸ­ã€‚</li><li><strong>ç»æµæ€§</strong>ï¼ŒæŒ‡ä¿¡æ¯è·å–ã€ä¼ è¾“å¸¦æ¥çš„æˆæœ¬åœ¨å¯ä»¥æ¥å—çš„èŒƒå›´ä¹‹å†…ã€‚</li><li><strong>å¯éªŒè¯æ€§</strong>ï¼šæŒ‡ä¿¡æ¯çš„ä¸»è¦è´¨é‡å±æ€§å¯ä»¥è¢«è¯å®æˆ–è€…è¯ä¼ªçš„ç¨‹åº¦ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šæŒ‡åœ¨ä¿¡æ¯çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä¿¡æ¯å¯ä»¥è¢«éæˆæƒè®¿é—®çš„å¯èƒ½æ€§ï¼Œå¯èƒ½æ€§è¶Šä½ï¼Œå®‰å…¨æ€§è¶Šé«˜ã€‚</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ä¿¡æ¯çš„åŠŸèƒ½</summary><div class="toggle-content"><p>æ— é‡è¦è€ƒç‚¹</p></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ä¿¡æ¯çš„ä¼ è¾“æ¨¡å‹â­</summary><div class="toggle-content"><ul><li><strong>ä¿¡æº</strong>ï¼šäº§ç”Ÿä¿¡æ¯çš„å®ä½“ï¼Œä¿¡æ¯äº§ç”Ÿåï¼Œç”±è¿™ä¸ªå®ä½“å‘å¤–ä¼ æ’­ã€‚</li><li><strong>ä¿¡å®¿</strong>ï¼šä¿¡æ¯çš„å½’å®¿æˆ–è€…æ¥å—è€…ã€‚</li><li><strong>ä¿¡é“</strong>ï¼šä¼ é€ä¿¡æ¯çš„é€šé“ã€‚</li><li><strong>ç¼–ç å™¨</strong>ï¼šåœ¨ä¿¡æ¯è®ºä¸­æ˜¯æ³›æŒ‡æ‰€æœ‰å˜æ¢ä¿¡å·çš„è®¾å¤‡ï¼Œå®é™…ä¸Šå°±æ˜¯ç»ˆç«¯æœºçš„å‘é€éƒ¨åˆ†ã€‚å®ƒåŒ…æ‹¬ä»ä¿¡æºåˆ°ä¿¡é“çš„æ‰€æœ‰è®¾å¤‡ï¼Œå¦‚é‡åŒ–å™¨ã€å‹ç¼©ç¼–ç å™¨ã€è°ƒåˆ¶å™¨ç­‰ï¼Œä½¿ä¿¡æºè¾“å‡ºçš„ä¿¡å·è½¬æ¢æˆé€‚ç”¨äºä¿¡é“ä¼ é€çš„ä¿¡å·ã€‚</li><li><strong>è¯‘ç å™¨</strong>ï¼šè¯‘ç å™¨æ˜¯ç¼–ç å™¨çš„é€†å˜æ¢è®¾å¤‡ï¼ŒæŠŠä¿¡é“ä¸Šä¼ æ¥çš„ä¿¡å·ï¼ˆåŸå§‹ä¿¡å·ä¸å™ªå£°çš„å åŠ ï¼‰è½¬æ¢æˆä¿¡å®¿èƒ½æ¥å—çš„ä¿¡å·ã€‚</li><li><strong>å™ªå£°</strong>ï¼šå™ªå£°å¯ä»¥ç†è§£ä¸ºå¹²æ‰°ã€‚</li></ul><p><img src="https://picbed.qunarzz.com/771ed4f1600bfe927bc97c5f5e6e2512.png" alt="ä¿¡æ¯ä¼ è¾“æ¨¡å‹"></p></div></details><h3 id="ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ"><a href="#ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ"></a>ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ç³»ç»Ÿçš„ç‰¹æ€§</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">æ€»ä½“ç‰¹æ€§</summary><div class="toggle-content"><ol><li><strong>ç›®çš„æ€§</strong>ï¼šå®šä¹‰ä¸€ä¸ªç³»ç»Ÿã€ç»„æˆä¸€ä¸ªç³»ç»Ÿæˆ–è€…æŠ½è±¡å‡ºä¸€ä¸ªç³»ç»Ÿï¼Œéƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡æˆ–è€…ç›®çš„ï¼Œç›®æ ‡æ€§å†³å®šäº†ç³»ç»Ÿçš„åŠŸèƒ½ã€‚</li><li><strong>æ•´ä½“æ€§</strong>ï¼šç³»ç»Ÿæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œå…ƒç´ æ˜¯ä¸ºäº†è¾¾åˆ°ä¸€å®šçš„ç›®çš„ï¼ŒæŒ‰ç…§ä¸€å®šçš„åŸåˆ™ï¼Œæœ‰åºåœ°æ’åˆ—èµ·æ¥ç»„æˆç³»ç»Ÿï¼Œä»è€Œäº§ç”Ÿå‡ºç³»ç»Ÿçš„ç‰¹å®šåŠŸèƒ½ã€‚</li><li><strong>å±‚æ¬¡æ€§</strong>ï¼šç³»ç»ŸåŒ–æ˜¯ç”±å¤šä¸ªå…ƒç´ ç»„æˆçš„ï¼Œç³»ç»Ÿå’Œå…ƒç´ æ˜¯ç›¸å¯¹çš„æ¦‚å¿µã€‚å…ƒç´ æ˜¯ç›¸å¯¹äºå®ƒæ‰€å¤„çš„ç³»ç»Ÿè€Œè¨€çš„ã€‚ç³»ç»Ÿæ˜¯ä»å®ƒåŒ…å«å…ƒç´ çš„è§’åº¦æ¥çœ‹çš„ï¼Œå¦‚æœç ”ç©¶é—®é¢˜çš„è§’åº¦å˜ä¸€å˜ï¼Œç³»ç»Ÿå°±æˆä¸ºæ›´é«˜ä¸€çº§çš„å…ƒç´ ï¼Œä¹Ÿæˆä¸ºå­ç³»ç»Ÿã€‚</li><li><strong>ç¨³å®šæ€§</strong>ï¼šæ˜¯è§„åˆ™çš„çº¦æŸï¼Œç³»ç»Ÿçš„å†…éƒ¨ç»“æ„å’Œç§©åºåº”è¯¥æ˜¯å¯ä»¥é¢„è§çš„ï¼›ç³»ç»Ÿçš„çŠ¶æ€ä»¥åŠæ¼”åŒ–è·¯å¾„æœ‰é™å¹¶èƒ½è¢«é¢„æµ‹ï¼›ç³»ç»Ÿçš„åŠŸèƒ½å‘ç”Ÿä½œç”¨å¯¼è‡´çš„åæœä¹Ÿæ˜¯å¯ä»¥é¢„ä¼°çš„ã€‚ç¨³å®šæ€§å¼ºçš„ç³»ç»Ÿä½¿å¾—ç³»ç»Ÿåœ¨å—åˆ°å¤–éƒ¨ä½œç”¨çš„åŒæ—¶ï¼Œå†…éƒ¨ç»“æ„å’Œç§©åºä»ç„¶èƒ½å¤Ÿä¿æŒã€‚</li><li><strong>çªå˜æ€§</strong>ï¼šçªå˜æ€§æ˜¯æŒ‡ç³»ç»Ÿé€šè¿‡å¤±ç¨³ï¼Œä»ä¸€ç§çŠ¶æ€è¿›å…¥å¦ä¸€ç§çŠ¶æ€çš„ä¸€ç§å‰§çƒˆå˜åŒ–è¿‡ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿè´¨å˜çš„ä¸€ç§åŸºæœ¬å½¢å¼ã€‚</li><li><strong>è‡ªç»„ç»‡æ€§</strong>ï¼šå¼€æ”¾ç³»ç»Ÿåœ¨ç³»ç»Ÿå†…å¤–å› ç´ çš„ä½œç”¨ä¸‹ï¼Œè‡ªå‘ç»„ç»‡èµ·æ¥ï¼Œä½¿ç³»ç»Ÿä»æ— åºåˆ°æœ‰åºï¼Œä»ä½çº§æœ‰åºåˆ°é«˜çº§æœ‰åºã€‚</li><li><strong>ç›¸ä¼¼æ€§</strong>ï¼šç³»ç»Ÿå…·æœ‰åŒæ„å’ŒåŒæ€çš„æ€§è´¨ï¼Œä½“ç°åœ¨ç³»ç»Ÿç»“æ„ã€å­˜åœ¨æ–¹å¼å’Œæ¼”åŒ–è¿‡ç¨‹å…·æœ‰å…±åŒæ€§ã€‚ç³»ç»Ÿå…·æœ‰ç›¸ä¼¼æ€§ï¼Œæ ¹æœ¬åŸå› åœ¨äºä¸–ç•Œçš„ç‰©è´¨ç»Ÿä¸€æ€§ã€‚</li><li><strong>ç›¸å…³æ€§</strong>ï¼šå…ƒç´ æ˜¯å¯åˆ†çš„å’Œç›¸äº’è”ç³»çš„ï¼Œç»„æˆç³»ç»Ÿçš„å…ƒç´ å¿…é¡»æœ‰æ˜ç¡®çš„è¾¹ç•Œï¼Œå¯ä»¥ä¸åˆ«çš„å…ƒç´ åŒºåˆ†å¼€æ¥ã€‚å¦å¤–ï¼Œå…ƒç´ ä¹‹é—´æ˜¯ç›¸äº’è”ç³»çš„ï¼Œä¸æ˜¯å“²å­¦ä¸Šæ‰€è¯´çš„é‚£ç§æ™®éè”ç³»ï¼Œè€Œæ˜¯å®å®åœ¨åœ¨çš„ã€å…·ä½“çš„è”ç³»ã€‚</li><li><strong>é€‚åº”ç¯å¢ƒæ€§</strong>ï¼šç³»ç»Ÿæ€»å¤„åœ¨ä¸€å®šçš„ç¯å¢ƒä¸­ï¼Œä¸ç¯å¢ƒå‘ç”Ÿç›¸äº’ä½œç”¨ã€‚ç³»ç»Ÿå’Œç¯å¢ƒä¹‹é—´æ€»æ˜¯åœ¨å‘ç”Ÿç€ä¸€å®šçš„ç‰©è´¨å’Œèƒ½é‡äº¤æ¢ã€‚</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">çªå‡ºç‰¹å¾</summary><div class="toggle-content"><ol><li>å¼€æ”¾æ€§ï¼šç³»ç»Ÿçš„å¼€æ”¾æ€§æ˜¯æŒ‡ç³»ç»Ÿçš„å¯è®¿é—®æ€§ã€‚</li><li>è„†å¼±æ€§ğŸ”¥ï¼šè¿™ä¸ªç‰¹æ€§ä¸ç³»ç»Ÿçš„ç¨³å®šæ€§ç›¸åº”ï¼Œå³ç³»ç»Ÿå¯èƒ½å­˜åœ¨ç€ä¸§å¤±ç»“æ„ã€åŠŸèƒ½ã€ç§©åºçš„ç‰¹æ€§ï¼Œè¿™ä¸ªç‰¹æ€§å¾€å¾€æ˜¯éšè—ä¸æ˜“è¢«å¤–ç•Œæ„ŸçŸ¥çš„ã€‚</li><li>å¥å£®æ€§ï¼šç³»ç»Ÿå…·æœ‰èƒ½å¤ŸæŠµå¾¡å‡ºç°éé¢„æœŸçŠ¶æ€çš„ç‰¹æ€§ç§°ä¸ºå¥å£®æ€§ï¼Œä¹Ÿç§°é²æ£’æ€§ï¼ˆrobustnessï¼‰ã€‚è¦æ±‚å…·æœ‰é«˜å¯ç”¨æ€§çš„ä¿¡æ¯ç³»ç»Ÿï¼Œä¼šé‡‡ç”¨å†—ä½™æŠ€æœ¯ã€å®¹é”™æŠ€æœ¯ã€èº«ä»½è¯†åˆ«æŠ€æœ¯ã€å¯é æ€§æŠ€æœ¯ç­‰æ¥æŠµå¾¡ç³»ç»Ÿå‡ºç°çš„éé¢„æœŸçš„çŠ¶æ€ï¼Œä¿æŒç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¿¡æ¯ç³»ç»Ÿ</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>ç®€å•åœ°è¯´ï¼Œä¿¡æ¯ç³»ç»Ÿå°±æ˜¯è¾“å…¥æ•°æ®ï¼Œé€šè¿‡åŠ å·¥å¤„ç†ï¼Œäº§ç”Ÿä¿¡æ¯çš„ç³»ç»Ÿã€‚</p></div></details><p>ä¿¡æ¯ç³»ç»Ÿå¯ä»¥æ˜¯æ‰‹å·¥çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯è®¡ç®—æœºåŒ–çš„ã€‚</p><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯ç³»ç»Ÿé›†æˆ</summary><div class="toggle-content"><p>é‡‡ç”¨ç°ä»£ç®¡ç†ç†è®ºï¼ˆä¾‹å¦‚ï¼Œè½¯ä»¶å·¥ç¨‹ã€é¡¹ç›®ç®¡ç†ç­‰ï¼‰ä½œä¸ºè®¡åˆ’ã€è®¾è®¡ã€æ§åˆ¶çš„æ–¹æ³•è®ºï¼Œå°†ç¡¬ä»¶ã€è½¯ä»¶ã€æ•°æ®åº“ã€ç½‘ç»œç­‰éƒ¨ä»¶æŒ‰ç…§è§„åˆ’çš„ç»“æ„å’Œç§©åºï¼Œæœ‰æœºåœ°æ•´åˆä¸€ä¸ªæœ‰æ¸…æ™°è¾¹ç•Œçš„ä¿¡æ¯ç³»ç»Ÿä¸­ï¼Œä»¥è¾¾åˆ°æ—¢å®šç³»ç»Ÿçš„ç›®æ ‡ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºä¿¡æ¯ç³»ç»Ÿé›†æˆã€‚</p></div></details></div></details><h3 id="ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ"><a href="#ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ"></a>ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ä¿¡æ¯åŒ–ä»â€œå°â€åˆ°â€œå¤§â€çš„äº”ä¸ªå±‚æ¬¡â­ï¸</summary><div class="toggle-content"><ol><li><strong>äº§å“ä¿¡æ¯åŒ–</strong></li><li><strong>ä¼ä¸šä¿¡æ¯åŒ–</strong></li><li><strong>äº§ä¸šä¿¡æ¯åŒ–</strong></li><li><strong>å›½æ°‘ç»æµä¿¡æ¯åŒ–</strong></li><li><strong>ç¤¾ä¼šç”Ÿæ´»ä¿¡æ¯åŒ–</strong></li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¿¡æ¯åŒ–çš„å†…æ¶µğŸ”¥</summary><div class="toggle-content"><ol><li><strong>ä¿¡æ¯åŒ–çš„ä¸»ä½“</strong>ï¼š<strong>å…¨ä½“ç¤¾ä¼šæˆå‘˜</strong>ï¼ŒåŒ…æ‹¬æ”¿åºœã€ä¼ä¸šã€äº‹ä¸šã€å›¢ä½“å’Œä¸ªäººã€‚</li><li><strong>æ—¶åŸŸ</strong>ï¼šä¸€ä¸ªé•¿æœŸçš„è¿‡ç¨‹</li><li><strong>ç©ºåŸŸ</strong>ï¼šæ”¿æ²»ã€ç»æµã€æ–‡åŒ–ã€å†›äº‹å’Œç¤¾ä¼šçš„ä¸€åˆ‡é¢†åŸŸ</li><li><strong>æ‰‹æ®µ</strong>ï¼šåŸºäºç°ä»£ä¿¡æ¯æŠ€æœ¯çš„å…ˆè¿›ç¤¾ä¼šç”Ÿäº§å·¥å…·</li><li><strong>é€”å¾„</strong>ï¼šæ˜¯åˆ›å»ºä¿¡æ¯æ—¶ä»£çš„ç¤¾ä¼šç”Ÿäº§åŠ›ï¼Œæ¨åŠ¨ç¤¾ä¼šç”Ÿäº§å…³ç³»åŠç¤¾ä¼šä¸Šå±‚å»ºç­‘çš„æ”¹é©</li><li><strong>ç›®æ ‡</strong>ï¼šä½¿å›½å®¶çš„ç»¼åˆå®åŠ›ã€ç¤¾ä¼šçš„æ–‡æ˜ç´ è´¨å’Œäººæ°‘çš„ç”Ÿæ´»è´¨é‡å…¨é¢æå‡</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€å›½å®¶çº§ä¿¡æ¯ç³»ç»Ÿ</summary><div class="toggle-content"><ul><li>ä¸¤ç½‘ï¼šæ˜¯æŒ‡æ”¿åŠ¡å†…ç½‘å’Œæ”¿åŠ¡å¤–ç½‘</li><li>ä¸€ç«™ï¼šæ˜¯æŒ‡æ”¿åºœé—¨æˆ·ç½‘ç«™</li><li>å››åº“ï¼šå³å»ºç«‹äººå£ã€æ³•äººå•ä½ã€ç©ºé—´åœ°ç†å’Œè‡ªç„¶èµ„æºã€å®è§‚ç»æµç­‰å››å¤§åŸºç¡€æ•°æ®åº“ã€‚</li><li>åäºŒé‡‘</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ä¿¡æ¯åŒ–çš„å…­è¦ç´ ğŸ”¥</summary><div class="toggle-content"><ol><li><strong>ä¿¡æ¯èµ„æº</strong>ï¼šä¿¡æ¯èµ„æºçš„å¼€å‘å’Œåˆ©ç”¨æ˜¯å›½å®¶ä¿¡æ¯åŒ–çš„æ ¸å¿ƒäººä»»åŠ¡ï¼Œæ˜¯å›½å®¶ä¿¡æ¯åŒ–å»ºè®¾å–å¾—å®æ•ˆçš„å…³é”®ï¼Œä¹Ÿæ˜¯æˆ‘å›½ä¿¡æ¯åŒ–çš„è–„å¼±ç¯èŠ‚ã€‚ï¼ˆä¿¡æ¯æŠ€æœ¯ã€è®¾å¤‡ã€è®¾æ–½ã€ä¿¡æ¯ç”Ÿäº§è€…ç­‰ï¼‰</li><li><strong>ä¿¡æ¯ç½‘ç»œ</strong>ï¼šä¿¡æ¯ç½‘ç»œæ˜¯ä¿¡æ¯èµ„æºå¼€å‘å’Œåˆ©ç”¨çš„åŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬ç”µä¿¡ç½‘ï¼Œå¹¿æ’­ç”µè§†å’Œè®¡ç®—æœºç½‘ç»œã€‚</li><li><strong>ä¿¡æ¯æŠ€æœ¯åº”ç”¨</strong>ï¼šæ˜¯æŒ‡æŠŠä¿¡æ¯æŠ€æœ¯å¹¿æ³›åº”ç”¨äºç»æµå’Œç¤¾ä¼šå„ä¸ªé¢†åŸŸï¼Œä»–ç›´æ¥åæ˜ äº†æ•ˆç‡ã€æ•ˆæœã€æ•ˆç›Šã€‚ä¿¡æ¯æŠ€æœ¯åº”ç”¨æ˜¯ä¿¡æ¯åŒ–ä½“ç³»å…­è¦ç´ ä¸­çš„é¾™å¤´ï¼Œæ˜¯å›½å®¶ä¿¡æ¯åŒ–å»ºè®¾çš„ä¸»é˜µåœ°ï¼Œé›†ä¸­ä½“ç°äº†å›½å®¶ä¿¡æ¯åŒ–å»ºè®¾çš„éœ€æ±‚ä¸æ•ˆç›Šã€‚</li><li><strong>ä¿¡æ¯æŠ€æœ¯ä¸äº§ä¸š</strong>ï¼šæ˜¯ä¿¡æ¯åŒ–çš„ç‰©è´¨åŸºç¡€</li><li><strong>ä¿¡æ¯åŒ–äººæ‰</strong>ï¼šäººæ‰æ˜¯ä¿¡æ¯åŒ–çš„æˆåŠŸä¹‹æœ¬</li><li><strong>ä¿¡æ¯åŒ–æ”¿ç­–æ³•è§„å’Œæ ‡å‡†è§„èŒƒ</strong>ï¼šä¿¡æ¯åŒ–æ”¿ç­–å’Œæ³•è§„ã€æ ‡å‡†ã€è§„èŒƒç”¨äºè§„èŒƒå’Œåè°ƒä¿¡æ¯åŒ–ä½“ç³»è¦ç´ ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯å›½å®¶ä¿¡æ¯åŒ–å¿«é€Ÿï¼Œæœ‰åºï¼Œå¥åº·å’ŒæŒç»­å‘å±•çš„ä¿éšœã€‚</li></ol><p><img src="https://picbed.qunarzz.com/81eb01b74890743fd48386c1e2d6c876.png" alt="ä¿¡æ¯åŒ–çš„å…­è¦ç´ "></p></div></details><h3 id="ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ"><a href="#ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ"></a>ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ</h3><details class="toggle" ><summary class="toggle-button" style="">4 å¤§æ–¹é¢</summary><div class="toggle-content"><ol><li>ç«‹é¡¹ï¼ˆç³»ç»Ÿè§„åˆ’ï¼‰</li><li>å¼€å‘ï¼ˆç³»ç»Ÿåˆ†æã€ç³»ç»Ÿè®¾è®¡ã€ç³»ç»Ÿå®æ–½ï¼‰</li><li>è¿ç»´ï¼ˆè¿è¡Œç»´æŠ¤ï¼‰</li><li>æ¶ˆäº¡</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">5 å°æ–¹é¢</summary><div class="toggle-content"><ol><li>ç³»ç»Ÿè§„åˆ’</li><li>ç³»ç»Ÿåˆ†æ</li><li>ç³»ç»Ÿè®¾è®¡</li><li>ç³»ç»Ÿå®æ–½</li><li>è¿è¡Œç»´æŠ¤</li></ol></div></details><h2 id="ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•"><a href="#ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•"></a>ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•</h2><h3 id="ç»“æ„åŒ–æ–¹æ³•"><a href="#ç»“æ„åŒ–æ–¹æ³•" class="headerlink" title="ç»“æ„åŒ–æ–¹æ³•"></a>ç»“æ„åŒ–æ–¹æ³•</h3><p><img src="https://picbed.qunarzz.com/b5330d132e19a9931bfb32134f234fdf.png" alt="å­µå°é¸¡"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"><p>ä¹Ÿç§°ä¸ºç”Ÿå‘½å‘¨æœŸæ³•ï¼Œæ˜¯ä¸€ç§ä¼ ç»Ÿçš„ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ç»„æˆ</summary><div class="toggle-content"><ul><li>ç»“æ„åˆ†æï¼ˆStructured Analysisï¼ŒSAï¼‰</li><li>ç»“æ„åŒ–è®¾è®¡ï¼ˆStructured Designï¼ŒSDï¼‰</li><li>ç»“æ„åŒ–ç¨‹åºè®¾è®¡ï¼ˆStructured Programmingï¼ŒSPï¼‰</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ç²¾é«“ğŸ”¥</summary><div class="toggle-content"><p>è‡ªé¡¶å‘ä¸‹ã€é€æ­¥æ±‚ç²¾å’Œæ¨¡å—åŒ–è®¾è®¡</p></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ä¸»è¦ç‰¹ç‚¹</summary><div class="toggle-content"><ol><li>å¼€å‘ç›®æ ‡æ¸…æ™°åŒ–</li><li>å¼€å‘å·¥ä½œé˜¶æ®µåŒ–</li><li>å¼€å‘æ–‡æ¡£è§„èŒƒåŒ–</li><li>è®¾è®¡æ–¹æ³•ç»“æ„åŒ–</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">5ã€é€‚ç”¨åœºæ™¯</summary><div class="toggle-content"><p>ç‰¹åˆ«é€‚åˆäºæ•°æ®å¤„ç†é¢†åŸŸçš„é—®é¢˜</p></div></details><details class="toggle" ><summary class="toggle-button" style="">6ã€ä¸é€‚ç”¨åœºæ™¯</summary><div class="toggle-content"><p>ä¸é€‚ç”¨äºè§„æ¨¡è¾ƒå¤§ã€æ¯”è¾ƒå¤æ‚çš„ç³»ç»Ÿå¼€å‘</p></div></details><details class="toggle" ><summary class="toggle-button" style="">7ã€ç¼ºç‚¹</summary><div class="toggle-content"><ol><li>å¼€å‘å‘¨æœŸè¾ƒé•¿</li><li>éš¾ä»¥é€‚åº”éœ€æ±‚å˜åŒ–</li><li>å¾ˆå°‘è€ƒè™‘æ•°æ®ç»“æ„</li></ol></div></details><h3 id="é¢å‘å¯¹è±¡æ–¹æ³•"><a href="#é¢å‘å¯¹è±¡æ–¹æ³•" class="headerlink" title="é¢å‘å¯¹è±¡æ–¹æ³•"></a>é¢å‘å¯¹è±¡æ–¹æ³•</h3><p><img src="https://picbed.qunarzz.com/e66b60d74e7b7591ca378194405f3841.png" alt="é¢å‘å¯¹è±¡-é¢å‘å°é¸¡"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"><p>é¢å‘å¯¹è±¡ï¼ˆOOï¼‰æ–¹æ³•è®¤ä¸ºï¼Œå®¢è§‚ä¸–ç•Œæ˜¯ç”±å„ç§å¯¹è±¡ç»„æˆçš„ï¼ˆä¸€åˆ‡çš†å¯¹è±¡ï¼‰ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¸ç»“æ„åŒ–æ–¹æ³•çš„è”ç³»</summary><div class="toggle-content"><p>ä¸ç»“æ„åŒ–æ–¹æ³•ç±»ä¼¼ï¼ŒOO æ–¹æ³•ä¹Ÿåˆ’åˆ†é˜¶æ®µï¼Œä½†å…¶ä¸­çš„ç³»ç»Ÿåˆ†æã€ç³»ç»Ÿè®¾è®¡å’Œç³»ç»Ÿå®ç°ä¸‰ä¸ªé˜¶æ®µä¹‹é—´å·²ç»æ²¡æœ‰â€œç¼éš™â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸‰ä¸ªé˜¶æ®µçš„ç•Œé™å˜å¾—ä¸æ˜ç¡®ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€OO ä¼˜ç‚¹ğŸ”¥</summary><div class="toggle-content"><ol><li>ç¬¦åˆäººä»¬çš„æ€ç»´ä¹ æƒ¯</li><li>æœ‰åˆ©äºç³»ç»Ÿå¼€å‘è¿‡ç¨‹ä¸­ç”¨æˆ·ä¸å¼€å‘äººå‘˜çš„æ²Ÿé€šä¸äº¤æµï¼Œç¼©çŸ­å¼€å‘å‘¨æœŸ</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€OO ç¼ºç‚¹ğŸ”¥</summary><div class="toggle-content"><p>å¿…é¡»ä¾é ä¸€å®šçš„ OO æŠ€æœ¯æ”¯æŒï¼Œåœ¨å¤§å‹é¡¹ç›®å¼€å‘ä¸Šå…·æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œä¸èƒ½æ¶‰è¶³ç³»ç»Ÿåˆ†æä»¥å‰çš„å¼€å‘ç¯èŠ‚ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">5ã€åº”ç”¨åœºæ™¯</summary><div class="toggle-content"><p>å½“å‰ï¼Œä¸€äº›å¤§å‹ä¿¡æ¯ç³»ç»Ÿçš„å¼€å‘ï¼Œé€šå¸¸æ˜¯å°†ç»“æ„åŒ–æ–¹æ³•å’Œ OO æ–¹æ³•ç»“åˆèµ·æ¥ï¼Œé¦–å…ˆï¼Œä½¿ç”¨ç»“æ„åŒ–æ–¹æ³•è¿›è¡Œè‡ªé¡¶å‘ä¸‹çš„æ•´ä½“åˆ’åˆ†ï¼›ç„¶åï¼Œè‡ªåº•å‘ä¸Šåœ°é‡‡ç”¨ OO æ–¹æ³•è¿›è¡Œå¼€å‘ã€‚</p></div></details><h3 id="åŸå‹åŒ–æ–¹æ³•"><a href="#åŸå‹åŒ–æ–¹æ³•" class="headerlink" title="åŸå‹åŒ–æ–¹æ³•"></a>åŸå‹åŒ–æ–¹æ³•</h3><p><img src="https://picbed.qunarzz.com/1c7a2ea4d0e571de005d72cf898a1352.png" alt="åŸå‹åŒ–æ–¹æ³•"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"><p>åŸå‹åŒ–æ–¹æ³•ä¹Ÿç§°ä¸ºå¿«é€ŸåŸå‹æ³•ï¼Œæˆ–è€…ç®€ç§°åŸå‹æ³•ã€‚å®ƒæ˜¯ä¸€ç§æ ¹æ®ç”¨æˆ·åˆæ­¥éœ€æ±‚ï¼Œåˆ©ç”¨ç³»ç»Ÿå¼€å‘å·¥å…·ï¼Œå¿«é€Ÿå»ºç«‹ä¸€ä¸ªç³»ç»Ÿæ¨¡å‹ç»™ç”¨æˆ·ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šä¸ç”¨æˆ·äº¤æµï¼Œæœ€ç»ˆå®ç°ç”¨æˆ·éœ€æ±‚çš„ä¿¡æ¯ç³»ç»Ÿå¿«é€Ÿçš„å¼€å‘æ–¹æ³•ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€åˆ†ç±»</summary><div class="toggle-content"><p>æŒ‰æ˜¯å¦å®ç°åŠŸèƒ½åˆ’åˆ†ï¼šæ°´å¹³åŸå‹ã€å‚ç›´åŸå‹<br>æŒ‰æœ€ç»ˆç»“æœåˆ’åˆ†ï¼šæŠ›å¼ƒå¼åŸå‹ã€æ¼”åŒ–å¼åŸå‹</p></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€å¼€å‘è¿‡ç¨‹ğŸ”¥</summary><div class="toggle-content"><ol><li>ç¡®å®šç”¨æˆ·çš„åŸºæœ¬éœ€æ±‚</li><li>è®¾è®¡ç³»ç»ŸåŸå‹</li><li>è¯•ç”¨å’Œè¯„ä»·åŸå‹</li><li>ä¿®æ”¹å’Œå®Œå–„åŸå‹</li><li>æ•´ç†åŸå‹ã€æä¾›æ–‡æ¡£</li></ol><p><img src="https://picbed.qunarzz.com/8a4081f6975446bb19470ea120cd78b1.png" alt="åŸå‹æ³•çš„å¼€å‘è¿‡ç¨‹"></p></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ç‰¹ç‚¹ğŸ”¥</summary><div class="toggle-content"><ol><li>åŸå‹æ³•å¯ä»¥ä½¿ç³»ç»Ÿå¼€å‘çš„å‘¨æœŸç¼©çŸ­ï¼Œæˆæœ¬å’Œé£é™©é™ä½ï¼Œé€Ÿåº¦åŠ å¿«ï¼Œè·å¾—è¾ƒé«˜çš„ç»¼åˆå¼€å‘æ•ˆç›Šã€‚</li><li>åŸå‹æ³•æ˜¯ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒæ¥å¼€å‘ç³»ç»Ÿï¼Œç”¨æˆ·å‚ä¸çš„ç¨‹åº¦å¤§å¤§æé«˜ï¼Œå¼€å‘çš„ç³»ç»Ÿç¬¦åˆç”¨æˆ·çš„éœ€æ±‚ï¼Œå› è€Œå¢åŠ å®¢æˆ·çš„æ»¡æ„åº¦ï¼Œæé«˜äº†ç³»ç»Ÿå¼€å‘çš„æˆåŠŸç‡ã€‚</li><li>ç”±äºç”¨æˆ·å‚ä¸äº†ç³»ç»Ÿå¼€å‘çš„å…¨è¿‡ç¨‹ï¼Œå¯¹ç³»ç»Ÿçš„åŠŸèƒ½å’Œç»“æ„å®¹æ˜“ç†è§£å’Œæ¥å—ï¼Œæœ‰åˆ©äºç³»ç»Ÿçš„ç§»äº¤ï¼Œæœ‰åˆ©äºç³»ç»Ÿçš„è¿è¡Œå’Œç»´æŠ¤ã€‚</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">5ã€ä¸è¶³ğŸ”¥</summary><div class="toggle-content"><ol><li>å¼€å‘ç¯å¢ƒè¦æ±‚é«˜</li><li>ç®¡ç†æ°´å¹³è¦æ±‚é«˜</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">6ã€é€‚ç”¨åœºæ™¯ğŸ”¥</summary><div class="toggle-content"><ol><li>åŸå‹æ³•é€‚ç”¨äºé‚£äº›éœ€æ±‚ä¸æ˜ç¡®çš„ç³»ç»Ÿå¼€å‘</li><li>äº‹å®ä¸Šï¼Œå¯¹äºåˆ†æå±‚é¢éš¾åº¦å¤§ï¼ŒæŠ€æœ¯å±‚é¢éš¾åº¦ä¸å¤§çš„ç³»ç»Ÿï¼Œé€‚ç”¨äºåŸå‹æ³•å¼€å‘</li><li>è€Œå¯¹äºæŠ€æœ¯å±‚é¢çš„å›°éš¾è¿œå¤§äºå…¶åˆ†æå±‚é¢çš„ç³»ç»Ÿï¼Œåˆ™ä¸å®œç”¨åŸå‹æ³•ã€‚</li></ol></div></details><h3 id="é¢å‘æœåŠ¡"><a href="#é¢å‘æœåŠ¡" class="headerlink" title="é¢å‘æœåŠ¡"></a>é¢å‘æœåŠ¡</h3><p><img src="https://picbed.qunarzz.com/145bb50bf142fc865414fc290012e273.png" alt="é¢å‘æœåŠ¡"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€äº§ç”Ÿçš„èƒŒæ™¯</summary><div class="toggle-content"><p>OO çš„åº”ç”¨æ„å»ºåœ¨ç±»å’Œå¯¹è±¡ä¸Šï¼Œéšåå‘å±•èµ·æ¥çš„å»ºæ¨¡æŠ€æœ¯å°†ç›¸å…³å¯¹è±¡æŒ‰ä¸šåŠ¡åŠŸèƒ½è¿›è¡Œåˆ†ç»„ï¼Œå°±å½¢æˆäº†æ„ä»¶ï¼ˆComponentï¼‰çš„æ¦‚å¿µã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€äº¤äº’çš„æ–¹å¼</summary><div class="toggle-content"><p>å¯¹äºè·¨æ„ä»¶çš„åŠŸèƒ½è°ƒç”¨ï¼Œåˆ™é‡‡ç”¨<strong>æ¥å£</strong>çš„å½¢å¼æš´éœ²å‡ºæ¥ã€‚è¿›ä¸€æ­¥å°†æ¥å£çš„å®šä¹‰ä¸å®ç°è¿›é¡¹è§£è€¦ï¼Œåˆ™å‚¬ç”Ÿäº†æœåŠ¡å’Œé¢å‘æœåŠ¡ï¼ˆService-Orientedï¼ŒSOï¼‰çš„å¼€å‘æ–¹æ³•ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ä¼˜ç‚¹</summary><div class="toggle-content"><ol><li>æé«˜ç³»ç»Ÿå¯å¤ç”¨æ€§</li><li>ä¿¡æ¯èµ„æºå…±äº«</li><li>ç³»ç»Ÿä¹‹é—´çš„äº’æ“ä½œæ€§</li></ol></div></details><h2 id="å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯"><a href="#å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯" class="headerlink" title="å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯"></a>å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯</h2><h3 id="ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®"><a href="#ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®" class="headerlink" title="ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®"></a>ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€OSI åè®®</summary><div class="toggle-content"><ol><li>ç‰©ç†å±‚</li></ol><ul><li>å®šä¹‰ï¼šç›–å±‚åŒ…æ‹¬ç‰©ç†è”ç½‘åª’ä»‹ï¼Œæ¯”å¦‚ç”µç¼†è¿çº¿è¿æ¥å™¨ã€‚</li><li>åè®®ï¼šRS232ã€V.35ã€<strong>RJ-45</strong>ï¼ˆæ°´æ™¶å¤´ï¼‰ã€FDDI<br>2.æ•°æ®é“¾è·¯å±‚</li><li>å®šä¹‰ï¼šå®ƒæ§åˆ¶ç½‘ç»œå±‚ä¸ç‰©ç†å±‚ä¹‹é—´çš„é€šä¿¡ã€‚</li><li>åè®®ï¼š<strong>IEEE 802.3&#x2F;.2</strong>ã€AHDLCã€PPPã€TM</li></ul><ol start="3"><li>ç½‘ç»œå±‚</li></ol><ul><li>å®šä¹‰ï¼šå…¶ä¸»è¦åŠŸèƒ½æ˜¯å°†ç½‘ç»œåœ°å€ï¼ˆä¾‹å¦‚ï¼šIP åœ°å€ï¼‰ç¿»è¯‘æˆå¯¹åº”çš„ç‰©ç†åœ°å€ï¼ˆä¾‹å¦‚ï¼šMAC åœ°å€ï¼‰ï¼Œå¹¶å†³å®šå¦‚ä½•å°†æ•°æ®ä»å‘é€æ–¹è·¯ç”±åˆ°æ¥æ”¶æ–¹ã€‚</li><li>åè®®ï¼š<strong>IP</strong>ã€<strong>ICMP</strong>ã€<strong>IGMP</strong>ã€IPXã€<strong>ARP</strong>ã€<strong>RARP</strong></li></ul><ol start="4"><li>ä¼ è¾“å±‚</li></ol><ul><li>å®šä¹‰ï¼šä¸»è¦è´Ÿè´£ç¡®ä¿æ•°æ®å¯é ã€é¡ºåºã€æ— é”™åœ°ä» A ä¼ è¾“åˆ° B ç‚¹ã€‚</li><li>åè®®ï¼š<strong>TCP</strong>ã€<strong>UDP</strong>ã€SPX</li></ul><ol start="5"><li>ä¼šè¯å±‚</li></ol><ul><li>å®šä¹‰ï¼šè´Ÿè´£åœ¨ç½‘ç»œä¸­çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å»ºç«‹å’Œç»´æŒé€šä¿¡ï¼Œä»¥åŠæä¾›äº¤äº’ä¼šè¯çš„ç®¡ç†åŠŸèƒ½ã€‚å¦‚ä¸‰ç§æ•°æ®æµæ–¹å‘æ§åˆ¶ï¼Œå³ä¸€è·¯äº¤äº’ã€ä¸¤è·¯äº¤äº’å’Œä¸¤è·¯åŒæ—¶ä¼šè¯æ¨¡å¼ã€‚</li><li>åè®®ï¼šRPCã€SQLã€NFS</li></ul><ol start="6"><li>è¡¨ç¤ºå±‚</li></ol><ul><li>å®šä¹‰ï¼šå¦‚åŒåº”ç”¨ç¨‹åºå’Œç½‘ç»œä¹‹é—´çš„ç¿»è¯‘å®˜ï¼Œåœ¨è¡¨ç¤ºå±‚ï¼Œæ•°æ®å°†æŒ‰ç…§ç½‘ç»œèƒ½ç†è§£çš„æ–¹æ¡ˆè¿›è¡Œæ ¼å¼åŒ–ï¼›è¿™ç§æ ¼å¼åŒ–ä¹Ÿå› æ‰€ä½¿ç”¨çš„ç½‘ç»œçš„ç±»å‹ä¸åŒè€Œä¸åŒã€‚è¡¨ç¤ºå±‚ç®¡ç†æ•°æ®çš„è§£å¯†åŠ å¯†ã€æ•°æ®è½¬æ¢ã€æ ¼å¼åŒ–å’Œæ–‡æœ¬å‹ç¼©ã€‚</li><li>åè®®ï¼š<strong>JPEG</strong>ã€<strong>ASCLL</strong>ã€<strong>GIF</strong>ã€<strong>DES</strong>ã€<strong>MPEG</strong></li></ul><ol start="7"><li>åº”ç”¨å±‚</li></ol><ul><li>å®šä¹‰ï¼šè´Ÿè´£å¯¹è½¯ä»¶æä¾›æ¥å£ä»¥ä½¿ç¨‹åºèƒ½ä½¿ç”¨ç½‘è·¯æœåŠ¡ï¼Œå¦‚äº‹åŠ¡å¤„ç†ç¨‹åºã€æ–‡ä»¶ä¼ é€åè®®å’Œç½‘ç»œç®¡ç†ç­‰ã€‚</li><li>åè®®ï¼š<strong>FTP</strong>ã€<strong>TFTP</strong>ã€<strong>HTTP</strong>ã€<strong>SMTP</strong>ã€<strong>DHCP</strong>ã€<strong>Telnet</strong>ã€<strong>DNS</strong>ã€<strong>SNMP</strong></li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ç½‘ç»œåè®®ä¸æ ‡å‡†</summary><div class="toggle-content"><ul><li>IEEE 802.3ï¼ˆå±€åŸŸç½‘åè®®ï¼‰</li><li>IEEE 802.11ï¼ˆæ— çº¿å±€åŸŸç½‘åè®®ï¼‰</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€TCP/IP</summary><div class="toggle-content"><p>TCP&#x2F;IP åè®®æ˜¯ Internet çš„æ ¸å¿ƒ</p><ol><li>åº”ç”¨å±‚åè®®</li></ol><ul><li><strong>FTP</strong>ï¼ˆFile Transport Protocolï¼Œæ–‡ä»¶ä¼ è¾“åè®®ï¼‰ï¼šè¿è¡Œåœ¨<em>TCP</em>ä¹‹ä¸Šï¼ŒFTP åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´éœ€è¦å»ºç«‹ä¸¤æ¡ TCP è¿æ¥ï¼Œä¸€æ¡ç”¨äºä¼ è¾“æ§åˆ¶ä¿¡æ¯ï¼ˆä½¿ç”¨ 21 å·ç«¯å£ï¼‰ï¼šå¦å¤–ä¸€æ¡ç”¨äºä¼ é€æ–‡ä»¶å†…å®¹ï¼ˆä½¿ç”¨ 20 ç«¯å£ï¼‰ã€‚</li><li><strong>TFTP</strong>ï¼ˆTrivial File Transfer Protocolï¼‰ï¼Œç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰ï¼Œå»ºç«‹åœ¨<em>UDP</em>ä¹‹ä¸Šï¼Œæä¾›ä¸å¯é çš„æ•°æ®æµä¼ è¾“æœåŠ¡ã€‚</li><li><strong>HTTP</strong>ï¼ˆHyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ï¼šæ˜¯ç”¨äºä» WWW æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ è¾“åè®®ï¼Œå»ºç«‹åœ¨<em>TCP</em>ä¹‹ä¸Šã€‚</li><li><strong>SMTP</strong>ï¼ˆSimple Mail Transfer Protocolï¼Œç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼‰ï¼šå»ºç«‹åœ¨<em>TCP</em>ä¹‹ä¸Šï¼Œæ˜¯ä¸€ç§æä¾›å¯é ä¸”æœ‰æ•ˆçš„ç”µå­é‚®ä»¶ä¼ è¾“åè®®ã€‚</li><li><strong>DHCP</strong>ï¼ˆDynamic Host Configuration Protocolï¼ŒåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰ï¼šå»ºç«‹åœ¨<em>UDP</em>ä¹‹ä¸Šï¼ŒåŸºäºå®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨æ¨¡å‹è®¾è®¡çš„ã€‚æ‰€æœ‰çš„ IP ç½‘ç»œè®¾å®šæ•°æ®éƒ½ç”± DHCP æœåŠ¡å™¨é›†ä¸­ç®¡ç†ï¼Œå¹¶è´Ÿè´£å®¢æˆ·ç«¯çš„ DHCP è¯·æ±‚ã€‚</li><li><strong>Telnet</strong>ï¼ˆè¿œç¨‹ç™»å½•åè®®ï¼‰ï¼šæ˜¯ç™»å½•å’Œä»¿çœŸç¨‹åºï¼Œå»ºç«‹åœ¨<em>TCP</em>ä¹‹ä¸Šï¼Œä»–çš„åŸºç¡€åŠŸèƒ½æ˜¯å…è®¸ç”¨æˆ·ç™»å½•è¿›å…¥è¿œç¨‹è®¡ç®—æœºã€‚</li><li><strong>DNS</strong>ï¼ˆDomain Name Systemï¼ŒåŸŸåç³»ç»Ÿï¼‰ï¼šå®ç°åŸŸåè§£æï¼Œå»ºç«‹åœ¨<em>UDP</em>ä¹‹ä¸Šã€‚</li><li><strong>SNMP</strong>ï¼ˆSimple Network Management Protocolï¼Œç®€å•ç½‘ç»œç®¡ç†åè®®ï¼‰ï¼šç”±ä¸€ç»„ç½‘ç»œç®¡ç†çš„æ ‡å‡†ç»„æˆï¼ŒåŒ…å«ä¸€ä¸ªåº”ç”¨å±‚åè®®ã€æ•°æ®åº“æ¨¡å‹å’Œä¸€ç»„èµ„æºå¯¹è±¡ã€‚è¯¥åè®®èƒ½å¤Ÿæ”¯æŒç½‘ç»œç®¡ç†ç³»ç»Ÿï¼Œç”¨ä»¥ç›‘æµ‹è¿æ¥åˆ°ç½‘ç»œä¸Šçš„è®¾å¤‡æ˜¯å¦æœ‰ä»»ä½•å¼•èµ·ç®¡ç†ä¸Šæ³¨æ„çš„æƒ…å†µã€‚</li></ul><ol start="2"><li>ä¼ è¾“å±‚åè®®</li></ol><ul><li><strong>TCP</strong>ï¼ˆTransmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰ï¼šTCP æä¾›äº†ä¸€ä¸ªå¯é çš„ï¼Œé¢å‘è¿æ¥çš„ï¼Œå…¨åŒå·¥çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚TCP ä¸€èˆ¬ç”¨äºä¼ è¾“æ•°æ®é‡æ¯”è¾ƒå°‘ï¼Œä¸”å¯¹å¯é æ€§è¦æ±‚é«˜çš„åœºåˆã€‚</li><li><strong>UDP</strong>ï¼ˆUser Datagram Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼šUDP æ˜¯ä¸€ç§ä¸å¯é çš„ï¼Œæ— è¿æ¥çš„åè®®ï¼Œå¯ä»¥ä¿è¯åº”ç”¨ç¨‹åºé—´çš„é€šä¿¡ï¼Œä¸ TCP ç›¸æ¯”ï¼ŒUDP æ˜¯ä¸€ç§æ— è¿æ¥çš„åè®®ï¼Œå®ƒçš„é”™è¯¯æ£€æµ‹åŠŸèƒ½è¦å¼±çš„å¤šï¼ŒUDP åè®®ä¸€èˆ¬ç”¨äºä¼ è¾“æ•°æ®é‡å¤§ï¼Œå¯¹äºå¯é æ€§è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œä½†è¦æ±‚é€Ÿåº¦å¿«çš„åœºåˆã€‚</li></ul><ol start="3"><li>ç½‘ç»œå±‚åè®®</li></ol><ul><li><strong>IP</strong>ï¼ˆInternet Protocolï¼Œäº’è”ç½‘åè®®ï¼‰ï¼šæ‰€æä¾›çš„æœåŠ¡æ˜¯æ— è¿æ¥å’Œå¯é çš„ã€‚</li><li><strong>ICMP</strong>ï¼ˆInternet Control Message Protocolï¼Œäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰ï¼šä¸€ç§ä¸“é—¨ç”¨äºå‘é€é”™è¯¯æŠ¥æ–‡çš„åè®®ï¼Œå³ä¼ é€çš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€é‡å¤ã€å»¶è¿Ÿæˆ–ä¹±åºä¼ é€’ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§å°½é‡é¿å…å·®é”™å¹¶èƒ½åœ¨å‘ç”Ÿå·®é”™æ—¶æŠ¥å‘Šçš„æœºåˆ¶ï¼Œè¿™å°±æ˜¯ ICMP çš„åŠŸèƒ½ã€‚</li><li><strong>IGMP</strong>ï¼ˆInternet Group Management Protocolï¼Œäº’è”ç½‘ç»„ç®¡ç†åè®®ï¼‰ï¼šå…è®¸åœ¨ Internet ä¸­çš„è®¡ç®—æœºå‚åŠ å¤šæ’­ï¼Œæ˜¯è®¡ç®—æœºç”¨åšå‘ç›¸é‚»å¤šè·¯ç”±å™¨æŠ¥å‘Šå¤šç›®ç»„æˆå‘˜çš„åè®®ã€‚</li><li><strong>ARP</strong>ï¼ˆAddress Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼‰ï¼šç”¨äºåŠ¨æ€åœ°å®Œæˆ IP åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ã€‚</li><li><strong>RARP</strong> ï¼ˆReverse Address Resolution Protocolï¼Œåå‘åœ°å€è§£æåè®®ï¼‰ï¼šç”¨äºåŠ¨æ€åœ°å®Œæˆç‰©ç†åœ°å€åˆ° IP åœ°å€çš„è½¬æ¢ã€‚</li></ul></div></details><h3 id="ç½‘ç»œè®¾å¤‡"><a href="#ç½‘ç»œè®¾å¤‡" class="headerlink" title="ç½‘ç»œè®¾å¤‡"></a>ç½‘ç»œè®¾å¤‡</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ç½‘ç»œäº¤æ¢</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>é€šè¿‡ä¸€å®šçš„è®¾å¤‡ï¼Œå¦‚äº¤æ¢æœºç­‰ï¼Œå°†ä¸åŒçš„ä¿¡å·æˆ–è€…ä¿¡å·è½¬æ¢ä¸ºå¯¹æ–¹å¯è¯†åˆ«çš„ä¿¡å·ç±»å‹ä»è€Œè¾¾åˆ°é€šä¿¡ç›®çš„çš„ä¸€ç§äº¤æ¢å½¢å¼ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">åˆ†ç±»</summary><div class="toggle-content"><ol><li>ç‰©ç†äº¤æ¢ï¼ˆå¦‚ç”µè¯ç½‘ï¼‰</li><li>é“¾è·¯å±‚äº¤æ¢ï¼ˆäºŒå±‚äº¤æ¢ï¼Œå¯¹ MAC åœ°å€è¿›è¡Œå˜æ›´ğŸ”¥ï¼‰</li><li>ç½‘ç»œå±‚äº¤æ¢ï¼ˆä¸‰å±‚äº¤æ¢ï¼Œå¯¹ IP åœ°å€è¿›è¡Œå˜æ›´ï¼‰</li><li>ä¼ è¾“å±‚äº¤æ¢ï¼ˆå››å±‚äº¤æ¢ï¼Œå¯¹ç«¯å£è¿›è¡Œå˜æ›´ï¼Œæ¯”è¾ƒå°‘è§ï¼‰</li><li>åº”ç”¨å±‚äº¤æ¢</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€äº’è”è®¾å¤‡</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>åœ¨ç½‘ç»œäº’è¿æ—¶ï¼Œå„èŠ‚ç‚¹ä¸€èˆ¬ä¸èƒ½ç®€å•åœ°ç›´æ¥ç›¸è¿ï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡ä¸€ä¸ªä¸­é—´è®¾å¤‡æ¥å®ç°ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">åˆ†ç±»</summary><div class="toggle-content"><ol><li>ä¸­ç»§å™¨ï¼ˆå®ç°ç‰©ç†å±‚åè®®è½¬æ¢ï¼Œåœ¨ç”µç¼†é—´è¿›è¡ŒäºŒè¿›åˆ¶ä¿¡å·ï¼‰</li><li>ç½‘æ¡¥ï¼ˆå®ç°ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚åè®®è½¬æ¢ï¼‰</li><li>è·¯ç”±å™¨ï¼ˆå®ç°ç½‘ç»œå±‚åè®®å’Œä»¥ä¸‹å„å±‚åè®®çš„è½¬æ¢ï¼‰ï¼ˆğŸ”¥åœ¨ç½‘ç»œå±‚ï¼‰</li><li>ç½‘å…³ï¼ˆæä¾›ä»æœ€åº•å±‚åˆ°ä¼ è¾“å±‚æˆ–ä»¥ä¸Šå„å±‚çš„åè®®è½¬æ¢ï¼‰</li><li>äº¤æ¢æœº</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€æ— çº¿ç½‘ç»œè®¾å¤‡</summary><div class="toggle-content"><ol><li>æ— çº¿ç½‘å¡</li><li>æ— çº¿ AP</li><li>æ— çº¿ç½‘æ¡¥</li><li>æ— çº¿è·¯ç”±å™¨</li></ol></div></details><h3 id="ç½‘ç»œæœåŠ¡å™¨"><a href="#ç½‘ç»œæœåŠ¡å™¨" class="headerlink" title="ç½‘ç»œæœåŠ¡å™¨"></a>ç½‘ç»œæœåŠ¡å™¨</h3><blockquote><p>æ— é‡è¦è€ƒç‚¹</p></blockquote><h3 id="ç½‘ç»œå­˜å‚¨æŠ€æœ¯"><a href="#ç½‘ç»œå­˜å‚¨æŠ€æœ¯" class="headerlink" title="ç½‘ç»œå­˜å‚¨æŠ€æœ¯"></a>ç½‘ç»œå­˜å‚¨æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">DASğŸ”¥</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>ç›´æ¥é™„åŠ å­˜å‚¨ï¼ˆDirect Attached Storageï¼‰ï¼ŒDAS å°†å­˜å‚¨è®¾å¤‡é€šè¿‡ SCSI ç”µç¼†ç›´æ¥è¿åˆ°æœåŠ¡å™¨ï¼Œå…¶æœ¬èº«æ˜¯ç¡¬ä»¶çš„å †å ï¼Œå­˜å‚¨ä¾èµ–äºæœåŠ¡å™¨ï¼Œä¸å¸¦æœ‰ä»»ä½•å­˜å‚¨æ“ä½œç³»ç»Ÿã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">ç¼ºç‚¹ğŸ”¥</summary><div class="toggle-content"><p>å½“å­˜å‚¨å®¹é‡å¢åŠ æ—¶ï¼ŒDAS æ–¹å¼å¾ˆéš¾æ‰©å±•ï¼Œè¿™å¯¹å­˜å‚¨å®¹é‡çš„å‡çº§æ˜¯ä¸€ä¸ªå·¨å¤§çš„ç“¶é¢ˆã€‚</p></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">NASğŸ”¥</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>ç½‘ç»œé™„åŠ å­˜å‚¨ï¼ˆNetwork Attached Storageï¼‰ï¼Œé€šè¿‡ç½‘ç»œæ¥å£ä¸ç½‘ç»œç›¸è¿ï¼Œç”±ç”¨æˆ·é€šè¿‡ç½‘ç»œè®¿é—®ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">å·¥ä½œåŸç†ğŸ”¥</summary><div class="toggle-content"><p>NAS æŠ€æœ¯æ”¯æŒå¤šç§ TCP&#x2F;IP ç½‘ç»œåè®®ï¼Œä¸»è¦æ˜¯ NFSï¼ˆç½‘ç»œæ–‡ä»¶å­˜å‚¨ç³»ç»Ÿï¼‰å’Œ CIFSï¼ˆé€šç”¨ Internet æ–‡ä»¶ï¼‰æ¥è¿›è¡Œæ–‡ä»¶è®¿é—®ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">ç‰¹ç‚¹ğŸ”¥</summary><div class="toggle-content"><ul><li>å³æ’å³ç”¨</li><li>å°æ–‡ä»¶çº§çš„å…±äº«å­˜å–</li></ul></div></details><p><img src="https://picbed.qunarzz.com/7bb699e595dcd42ffa6d6a6b9ad5e982.png" alt="NAS å­˜å‚¨ç³»ç»Ÿçš„ç»“æ„"></p></div></details><details class="toggle" ><summary class="toggle-button" style="">SANğŸ”¥</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>å­˜å‚¨åŒºåŸŸç½‘ç»œï¼ˆStorage Area Networkï¼‰ï¼Œé€šè¿‡ä¸“ç”¨äº¤æ¢æœºå°†ç£ç›˜é˜µåˆ—ä¸æœåŠ¡å™¨è¿æ¥èµ·æ¥çš„é«˜é€Ÿä¸“ç”¨å­ç½‘ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">æŠ€æœ¯åˆ†ç±»</summary><div class="toggle-content"><ol><li><strong>FC SAN</strong>ï¼šå…‰çº¤é€šé“çš„ä¸»è¦ç‰¹æ€§æœ‰ï¼šçƒ­æ’æ‹”æ€§ã€é«˜é€Ÿå¸¦å®½ã€è¿œç¨‹è¿æ¥æ•°é‡å¤§ã€‚</li><li><strong>IP SAN</strong>ï¼šåŸºäº IP ç½‘ç»œå®ç°æ•°æ®å—çº§åˆ«å­˜å‚¨æ–¹å¼çš„å­˜å‚¨ç½‘ç»œã€‚</li><li><strong>IB SAN</strong>ï¼šæ˜¯ä¸€ç§äº¤æ¢ç»“æ„ I&#x2F;O æŠ€æœ¯ï¼Œå…¶è®¾è®¡æ€è·¯æ˜¯é€šè¿‡ä¸€å¥—ä¸­å¿ƒæœºæ„åœ¨è¿œç¨‹å­˜å‚¨å™¨ã€ç½‘ç»œä»¥åŠæœåŠ¡å™¨ç­‰è®¾å¤‡ä¹‹é—´å»ºç«‹ä¸€ä¸ªå•ä¸€çš„è¿æ¥é“¾è·¯ï¼Œå¹¶ç”± IB äº¤æ¢æœºæ¥æŒ‡æŒ¥æµé‡ã€‚</li></ol></div></details><p><img src="https://picbed.qunarzz.com/61c61873ce628e907c850fe99eb9fe3a.png"></p></div></details><h3 id="ç½‘ç»œæ¥å…¥æŠ€æœ¯"><a href="#ç½‘ç»œæ¥å…¥æŠ€æœ¯" class="headerlink" title="ç½‘ç»œæ¥å…¥æŠ€æœ¯"></a>ç½‘ç»œæ¥å…¥æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€æœ‰çº¿æ¥å…¥</summary><div class="toggle-content"><ol><li>PSTN</li><li>ISDN</li><li>ADSL</li><li>FTTX+LAN</li><li>HFC<br>1.3.5ç½‘ç»œæ¥å…¥æŠ€æœ¯</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€æ— çº¿æ¥å…¥</summary><div class="toggle-content"><p>æ— çº¿ç½‘ç»œæ˜¯æŒ‡ä»¥æ— çº¿ç”µæ³¢ä½œä¸ºä¿¡æ¯ä¼ è¾“åª’ä»‹ğŸ”¥</p><p><strong>æŠ€æœ¯åˆ†ç±»ï¼š</strong></p><ol><li>GPRS</li><li>æ— çº¿æ¥å…¥</li><li>3G</li><li>4G</li><li>WIFI</li></ol></div></details><h3 id="ç½‘ç»œè§„åˆ’ä¸è®¾è®¡"><a href="#ç½‘ç»œè§„åˆ’ä¸è®¾è®¡" class="headerlink" title="ç½‘ç»œè§„åˆ’ä¸è®¾è®¡"></a>ç½‘ç»œè§„åˆ’ä¸è®¾è®¡</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ç½‘è·¯åˆ†å±‚è®¾è®¡ğŸ”¥</summary><div class="toggle-content"><ul><li><strong>æ ¸å¿ƒå±‚ğŸ”¥</strong>ï¼šä¸»è¦ç›®çš„é€šè¿‡<strong>é«˜é€Ÿçš„è½¬å‘é€šä¿¡</strong>ï¼Œæä¾›ä¼˜åŒ–ï¼Œå¯é çš„éª¨å¹²ä¼ è¾“ç»“æ„ï¼Œå› æ­¤ï¼Œæ ¸å¿ƒå±‚äº¤æ¢æœºåº”æ‹¥æœ‰æ›´é«˜çš„å¯é æ€§ï¼Œæ€§èƒ½å’Œååé‡ã€‚</li><li><strong>æ±‡èšå±‚ğŸ”¥</strong>ï¼šæ˜¯æ ¸å¿ƒå±‚ä¸æ¥å…¥å±‚çš„åˆ†ç•Œé¢ï¼Œå®Œæˆ<strong>ç½‘ç»œè®¿é—®ç­–ç•¥æ§åˆ¶ï¼Œæ•°æ®åŒ…å¤„ç†ã€è¿‡æ»¤ã€å¯»å€</strong>ã€ä»¥åŠå…¶ä»–çš„æ•°æ®å¤„ç†ä»»åŠ¡ã€‚</li><li><strong>æ¥å…¥å±‚ğŸ”¥</strong>ï¼šç›®çš„æ˜¯å…è®¸ç»ˆç«¯ç”¨æˆ·è¿æ¥åˆ°ç½‘ç»œï¼Œå› æ­¤ï¼Œæ¥å…¥å±‚äº¤æ¢æœºï¼ˆæˆ–è·¯ç”±å™¨ï¼‰æ¥å…¥å±‚å…·æœ‰<strong>ä½æˆ</strong>æœ¬å’Œ<strong>é«˜å¯†åº¦</strong>ç‰¹æ€§ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677082670910.png" alt="ç½‘ç»œè§„åˆ’åˆ†å±‚"></p></div></details><details class="toggle" ><summary class="toggle-button" style="">1ã€ç½‘ç»œè®¾è®¡å·¥ä½œ</summary><div class="toggle-content"><ol><li>ç½‘ç»œæ‹“æ‰‘ç»“æ„è®¾è®¡</li><li>ä¸»å¹²ç½‘ç»œè®¾è®¡ï¼ˆæ ¸å¿ƒå±‚ï¼‰è®¾è®¡</li><li>æ±‡èšå±‚å’Œæ¥å…¥å±‚è®¾è®¡</li><li>å¹¿åŸŸç½‘è¿æ¥ä¸è¿œç¨‹è®¿é—®è®¾è®¡</li><li>æ— çº¿ç½‘ç»œè®¾è®¡</li><li>ç½‘ç»œå®‰å…¨è®¾è®¡</li></ol><ul><li>ä¿¡æ¯å®‰å…¨çš„åŸºæœ¬è¦ç´ ğŸ”¥</li></ul><ol start="7"><li>è®¾å¤‡é€‰å‹</li></ol><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯å®‰å…¨çš„åŸºæœ¬è¦ç´ ğŸ”¥</summary><div class="toggle-content"><ol><li><strong>æœºå¯†æ€§ğŸ”¥</strong>ï¼šç¡®ä¿ä¿¡æ¯ä¸æš´éœ²ç»™æœªæˆæƒçš„å®ä½“æˆ–è¿›ç¨‹</li><li><strong>å®Œæ•´æ€§ğŸ”¥</strong>ï¼šåªæœ‰å¾—åˆ°å…è®¸çš„äººæ‰èƒ½ä¿®æ”¹æ•°æ®ï¼Œå¹¶ä¸”èƒ½å¤Ÿåˆ¤åˆ«å‡ºæ¥æ•°æ®æ˜¯å¦å·²è¢«ç¯¡æ”¹ã€‚</li><li><strong>å¯ç”¨æ€§ğŸ”¥</strong>ï¼šå¾—åˆ°æˆæƒçš„å®ä½“åœ¨éœ€è¦çš„æ—¶å€™å¯è®¿é—®æ•°æ®ï¼Œå³æ”»å‡»è€…ä¸èƒ½å ç”¨æ‰€æœ‰çš„èµ„æºè€Œé˜»ç¢æˆæƒè€…çš„å·¥ä½œ</li><li><strong>å¯æ§æ€§ğŸ”¥</strong>ï¼šå¯ä»¥æ§åˆ¶æˆæƒèŒƒå›´å†…çš„ä¿¡æ¯æµå‘åŠè¡Œä¸ºæ–¹å¼</li><li><strong>å¯å®¡æŸ¥æ€§ğŸ”¥</strong>ï¼šå¯¹å‡ºç°çš„ç½‘ç»œå®‰å…¨é—®é¢˜æä¾›è°ƒæŸ¥çš„ä¾æ®å’Œæ‰‹æ®µ</li></ol></div></details></div></details><h3 id="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"><a href="#æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"></a>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</h3><details class="toggle" ><summary class="toggle-button" style="">å…³ç³»å‹æ•°æ®åº“</summary><div class="toggle-content"><ul><li><strong>Oracle</strong></li><li><strong>MySQL</strong></li><li><strong>SqlServer</strong></li><li>DB2</li><li>PostgreSQL</li><li>SQLite</li><li>Access</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">éå…³ç³»å‹æ•°æ®åº“</summary><div class="toggle-content"><ul><li><strong>MongoDB</strong></li><li>Redis</li><li>HBase</li><li>Neo4j</li><li>Elasticsearch</li></ul></div></details><h3 id="æ•°æ®ä»“åº“æŠ€æœ¯"><a href="#æ•°æ®ä»“åº“æŠ€æœ¯" class="headerlink" title="æ•°æ®ä»“åº“æŠ€æœ¯"></a>æ•°æ®ä»“åº“æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">ç‰¹ç‚¹ğŸ”¥</summary><div class="toggle-content"><p>æ•°æ®ä»“åº“æ˜¯ä¸€ä¸ªé¢å‘ä¸»é¢˜çš„ï¼Œé›†æˆçš„ï¼Œéæ˜“å¤±çš„ï¼Œä¸”éšæ—¶é—´å˜åŒ–çš„æ•°æ®é›†åˆï¼Œç”¨äºæ”¯æŒç®¡ç†å†³ç­–ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">ä½“ç³»ç»“æ„</summary><div class="toggle-content"><ol><li><strong>æ•°æ®æº</strong>ï¼šæ˜¯æ•°æ®ä»“åº“ç³»ç»Ÿçš„åŸºç¡€ï¼Œæ˜¯æ•´ä¸ªç³»ç»Ÿæ•°æ®æºæ³‰ã€‚</li><li><strong>æ•°æ®çš„å­˜å‚¨ä¸ç®¡ç†</strong>ï¼šæ˜¯æ•´ä¸ªç³»ç»Ÿæ•°æ®ä»“åº“ç³»ç»Ÿçš„æ ¸å¿ƒã€‚</li><li><strong>OLAPï¼ˆOnline Analysis Processorï¼Œè”æœºåˆ†æå¤„ç†ï¼‰æœåŠ¡å™¨</strong>ï¼šå¯¹åˆ†æéœ€è¦çš„æ•°æ®è¿›è¡Œæœ‰æ•ˆé›†æˆï¼ŒæŒ‰å¤šç»´æ¨¡å‹äºˆä»¥ç»„ç»‡ï¼Œä»¥ä¾¿è¿›è¡Œå¤šè§’åº¦ã€å¤šå±‚æ¬¡çš„åˆ†æï¼Œå¹¶å‘ç°è¶‹åŠ¿ã€‚</li><li><strong>å‰ç«¯å·¥å…·</strong>ï¼šä¸»è¦åŒ…æ‹¬å„ç§æŸ¥è¯¢å·¥å…·ï¼ŒæŠ¥è¡¨å·¥å…·ï¼Œåˆ†æå·¥å…·ï¼Œæ•°æ®æŒ–æ˜å·¥å…·ä»¥åŠå„ç§åŸºäºæ•°æ®ä»“åº“æˆ–æ•°æ®é›†çš„åº”ç”¨å¼€å‘å·¥å…·ã€‚å…¶ä¸­æ•°æ®åˆ†æå·¥å…·ä¸»è¦é’ˆå¯¹OLAPï¼ŒæŠ¥è¡¨å·¥å…·ï¼Œæ•°æ®æŒ–æ˜å·¥å…·ä¸»è¦é’ˆå¯¹æ•°æ®ä»“åº“ã€‚</li></ol></div></details><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677083599886.png" alt="æ•°æ®ä»“åº“ä½“ç³»ç»“æ„"></p><h3 id="ä¸­é—´ä»¶æŠ€æœ¯"><a href="#ä¸­é—´ä»¶æŠ€æœ¯" class="headerlink" title="ä¸­é—´ä»¶æŠ€æœ¯"></a>ä¸­é—´ä»¶æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€åˆ†ç±»</summary><div class="toggle-content"></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ä¸­é—´ä»¶çš„é€‰æ‹©</summary><div class="toggle-content"></div></details><h3 id="é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡"><a href="#é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡" class="headerlink" title="é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡"></a>é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡</h3><h2 id="è½¯ä»¶å·¥ç¨‹"><a href="#è½¯ä»¶å·¥ç¨‹" class="headerlink" title="è½¯ä»¶å·¥ç¨‹"></a>è½¯ä»¶å·¥ç¨‹</h2><h2 id="ç»ƒä¸€ç»ƒ"><a href="#ç»ƒä¸€ç»ƒ" class="headerlink" title="ç»ƒä¸€ç»ƒ"></a>ç»ƒä¸€ç»ƒ</h2><p>1ã€å¯¹è±¡å’Œç±»æ˜¯é¢å‘å¯¹è±¡ä¸­ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå…³äºå¯¹è±¡å’Œç±»ï¼Œä¸æ­£ç¡®çš„æ˜¯ï¼ˆï¼‰ã€‚ <em>19å¹´11æœˆç¬¬1é¢˜</em></p><p>Aã€å¯¹è±¡æ˜¯ç±»çš„å®ä¾‹<br>Bã€ç±»æ˜¯å¯¹è±¡çš„æŠ½è±¡<br>Cã€ä¸€ä¸ªç±»åªèƒ½äº§ç”Ÿä¸€ä¸ªå¯¹è±¡<br>Dã€ç±»ä¸­åŒ…å«æ–¹æ³•å’Œå±æ€§</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘ä¸€ä¸ªç±»å¯ä»¥äº§ç”Ÿå¤šä¸ªå¯¹è±¡</p></div></div><hr><p>2ã€TCP&#x2F;IP æ¨¡å‹ä¸­ï¼ŒTelnet å±äºï¼ˆï¼‰åè®®ã€‚ <em>19å¹´5æœˆ19é¢˜</em></p><p>Aã€æ¥å£å±‚<br>Bã€ç½‘ç»œå±‚<br>Cã€ä¼ è¾“å±‚<br>Dã€åº”ç”¨å±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘Telnet æ˜¯åº”ç”¨å±‚åè®®ã€‚</p></div></div><hr><p>3ã€åœ¨ä¿¡æ¯ç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¼€å‘é˜¶æ®µä¸åŒ…æ‹¬ï¼ˆï¼‰ã€‚ <em>19å¹´5æœˆ3é¢˜</em></p><p>Aã€ç³»ç»Ÿè§„åˆ’<br>Bã€ç³»ç»Ÿè®¾è®¡<br>Cã€ç³»ç»Ÿåˆ†æ<br>Dã€ç³»ç»Ÿå®æ–½</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘ç³»ç»Ÿè§„åˆ’æ˜¯ç«‹é¡¹é˜¶æ®µçš„ï¼Œé«˜çº§æ•™æç¬¬ä¸‰ç‰ˆ P10ã€‚</p></div></div><hr><p>4ã€ï¼ˆï¼‰çš„è®¾è®¡æ–¹æ³•æ»¡è¶³äº†ä¿¡æ¯ç³»ç»Ÿå¿«é€Ÿå“åº”éœ€æ±‚ä¸ç¯å¢ƒçš„å˜åŒ–ï¼Œç»„ç»‡å†…éƒ¨ã€ç»„ç»‡ä¹‹é—´å„ç§åº”ç”¨ç³»ç»Ÿçš„äº’ç›¸é€šä¿¡è¦æ±‚ï¼Œæé«˜äº†ç³»ç»Ÿå¯å¤ç”¨æ€§ã€ä¿¡æ¯èµ„æºå…±äº«å’Œç³»ç»Ÿä¹‹é—´çš„äº’æ“ä½œæ€§ã€‚ <em>18å¹´11æœˆ28é¢˜</em></p><p>Aã€é¢å‘å¯¹è±¡<br>Bã€é¢å‘è¿‡ç¨‹<br>Cã€åŸºäºæ„ä»¶<br>Dã€é¢å‘æœåŠ¡</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘ä»åº”ç”¨çš„è§’åº¦æ¥çœ‹ï¼Œç»„ç»‡å†…éƒ¨ã€ç»„ç»‡ä¹‹é—´å„ç§åº”ç”¨ç³»ç»Ÿçš„äº’ç›¸é€šä¿¡å’Œäº’æ“ä½œæ€§ç›´æ¥å½±å“ç€ç»„ç»‡<br>å¯¹ä¿¡æ¯çš„æŒæ¡ç¨‹åº¦å’Œå¤„ç†é€Ÿåº¦ã€‚å¦‚ä½•ä½¿ä¿¡æ¯ç³»ç»Ÿå¿«é€Ÿå“åº”éœ€æ±‚ä¸ç¯å¢ƒå˜åŒ–ï¼Œæé«˜ç³»ç»Ÿå¯å¤ç”¨æ€§ã€ä¿¡æ¯èµ„<br>æºå…±äº«å’Œç³»ç»Ÿä¹‹é—´çš„äº’æ“ä½œæ€§ï¼Œæˆä¸ºå½±å“ä¿¡æ¯åŒ–å»ºè®¾æ•ˆç‡çš„å…³é”®é—®é¢˜ï¼Œè€ŒSOçš„æ€ç»´æ–¹å¼æ°å¥½æ»¡è¶³äº†è¿™<br>ç§éœ€æ±‚ã€‚</p></div></div><hr><p>5ã€åœ¨OSIä¸ƒå±‚åè®®ä¸­ï¼ŒUDPæ˜¯ï¼ˆï¼‰çš„åè®®ã€‚ <em>18å¹´11æœˆç¬¬19é¢˜</em></p><p>Aã€ç½‘ç»œå±‚<br>Bã€ä¼ è¾“å±‚<br>Cã€ä¼šè¯å±‚<br>Dã€åº”ç”¨å±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘(4)ä¼ è¾“å±‚ï¼šä¸»è¦è´Ÿè´£ç¡®ä¿æ•°æ®å¯é ã€é¡ºåºã€æ— é”™åœ°ä»Aç‚¹ä¼ è¾“åˆ°Bç‚¹ã€‚å¦‚æä¾›å»ºç«‹ã€ç»´æŠ¤ç›¸æ‹†<br>é™¤ä¼ é€è¿æ¥çš„åŠŸèƒ½ï¼›é€‰æ‹©ç½‘ç»œå±‚æä¾›æœ€åˆé€‚çš„æœåŠ¡ï¼›åœ¨ç³»ç»Ÿä¹‹é—´æä¾›å¯é çš„é€æ˜çš„æ•°æ®ä¼ é€ï¼Œæä¾›ç«¯åˆ°<br>ç«¯çš„é”™è¯¯æ¢å¤å’Œæµé‡æ§åˆ¶ã€‚åœ¨TCP&#x2F;IPåè®®ä¸­ï¼Œå…·ä½“åè®®æœ‰TCPã€UDPã€SPXã€‚</p></div></div><hr><p>6ã€ï¼ˆï¼‰çš„ä»»åŠ¡æ˜¯ï¼šæ ¹æ®ç³»ç»Ÿè¯´æ˜ä¹¦è§„å®šçš„åŠŸèƒ½è¦æ±‚ï¼Œè€ƒè™‘å®é™…æ¡ä»¶ï¼Œå…·ä½“è®¾è®¡å®ç°é€»è¾‘æ¨¡å‹çš„æŠ€æœ¯æ–¹<br>æ¡ˆã€‚ <em>18å¹´11æœˆç¬¬3é¢˜</em></p><p>Aã€ç³»ç»Ÿè§„åˆ’é˜¶æ®µ<br>Bã€ç³»ç»Ÿåˆ†æé˜¶æ®µ<br>Cã€ç³»ç»Ÿè®¾è®¡é˜¶æ®µ<br>Dã€ç³»ç»Ÿå®æ–½é˜¶æ®µ</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘ç®€å•åœ°è¯´ï¼Œç³»ç»Ÿåˆ†æé˜¶æ®µçš„ä»»åŠ¡æ˜¯å›ç­”ç³»ç»Ÿâ€œåšä»€ä¹ˆâ€çš„é—®é¢˜ï¼Œè€Œç³»ç»Ÿè®¾è®¡é˜¶æ®µè¦å›ç­”çš„é—®é¢˜<br>æ˜¯â€œæ€ä¹ˆåšâ€ã€‚è¯¥é˜¶æ®µçš„ä»»åŠ¡æ˜¯æ ¹æ®ç³»ç»Ÿè¯´æ˜ä¹¦ä¸­è§„å®šçš„åŠŸèƒ½è¦æ±‚ï¼Œè€ƒè™‘å®é™…æ¡ä»¶ï¼Œå…·ä½“è®¾è®¡å®ç°é€»è¾‘<br>æ¨¡å‹çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯è®¾è®¡æ–°ç³»ç»Ÿçš„ç‰©ç†æ¨¡å‹ã€‚è¿™ä¸ªé˜¶æ®µåˆç§°ä¸ºç‰©ç†è®¾è®¡é˜¶æ®µï¼Œå¯åˆ†ä¸ºæ€»ä½“è®¾è®¡ï¼ˆæ¦‚<br>è¦è®¾è®¡ï¼‰å’Œè¯¦ç»†è®¾è®¡ä¸¤ä¸ªå­é˜¶æ®µã€‚è¿™ä¸ªé˜¶æ®µçš„æŠ€æœ¯æ–‡æ¡£æ˜¯ç³»ç»Ÿè®¾è®¡è¯´æ˜ä¹¦ã€‚</p></div></div><hr><p>7ã€IEEE 802 è§„èŒƒå®šä¹‰äº†ç½‘å¡å¦‚ä½•è®¿é—®ä¼ è¾“ä»‹è´¨ï¼Œä»¥åŠå¦‚ä½•åœ¨ä¼ è¾“ä»‹è´¨ä¸Šä¼ è¾“æ•°æ®çš„æ–¹æ³•ã€‚å…¶ä¸­ï¼Œï¼ˆï¼‰<br>æ˜¯é‡è¦çš„å±€åŸŸç½‘åè®®ã€‚ <em>18å¹´5æœˆç¬¬11é¢˜</em></p><p>Aã€IEEE 802.1<br>Bã€IEEE 802.3<br>Cã€IEEE 802.6<br>Dã€IEEE 802.11</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘ IEEE 802.3 ï¼šä»¥å¤ªç½‘ä»‹è´¨è®¿é—®æ§åˆ¶åè®® ï¼ˆCSMA&#x2F;CDï¼‰åŠç‰©ç†å±‚æŠ€æœ¯è§„èŒƒ [2]ã€‚<br>IEEE 802.11ï¼šæ— çº¿å±€åŸŸç½‘ï¼ˆWLANï¼‰çš„ä»‹è´¨è®¿é—®æ§åˆ¶åè®®åŠç‰©ç†å±‚æŠ€æœ¯è§„èŒƒã€‚</p></div></div><hr><p>8ã€åœ¨å¼€æ”¾ç³»ç»Ÿäº’è¿å‚è€ƒæ¨¡å‹(OSI)ä¸­ï¼Œï¼ˆ ï¼‰çš„ä¸»è¦åŠŸèƒ½æ˜¯å°†ç½‘ç»œåœ°å€ç¿»è¯‘æˆå¯¹åº”çš„ç‰©ç†åœ°å€ï¼Œå¹¶å†³å®šå¦‚<br>ä½•å°†æ•°æ®ä»å‘é€æ–¹ç»è·¯ç”±é€è¾¾åˆ°æ¥æ”¶æ–¹ã€‚ <em>18å¹´5æœˆç¬¬20é¢˜</em></p><p>Aã€æ•°æ®é“¾è·¯å±‚<br>Bã€ç‰©ç†å±‚<br>Cã€ç½‘ç»œå±‚<br>Dã€ä¼ è¾“å±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘ç½‘ç»œå±‚ä¸­çš„åè®®ä¸»è¦æœ‰IPã€ICMPã€IGMPã€ARPã€å’ŒRARPç­‰ã€‚ ï¼ˆ1ï¼‰IPï¼Œæ‰€æä¾›çš„æœåŠ¡æ˜¯æ— è¿æ¥å’Œä¸å¯é çš„ã€‚<br>ï¼ˆ2ï¼‰ICMP(Internet Control Message Protocolï¼Œç½‘ç»œæ§åˆ¶æŠ¥æ–‡åè®®)ï¼Œä¸€ç§ä¸“é—¨ç”¨äºå‘é€é”™æŠ¥æ–‡çš„<br>åè®®ï¼Œå³ä¼ é€çš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€é‡å¤ã€å»¶è¿Ÿã€æˆ–ä¹±åºä¼ é€’ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§å°½é‡é¿å…å·®é”™å¹¶èƒ½å‘ç”Ÿå·®é”™æ—¶<br>æŠ¥å‘Šçš„æœºåˆ¶ï¼Œè¿™å°±æ˜¯ICMPçš„åŠŸèƒ½ã€‚<br>ï¼ˆ3ï¼‰IGMP(Internet Group Management Protocolï¼Œç½‘é™…ç»„ç®¡ç†åè®®)å…è®¸åœ¨Internetä¸­çš„è®¡ç®—æœºå‚<br>åŠ å¤šæ’­ï¼Œæ˜¯è®¡ç®—æœºç”¨åšå‘ç›¸é‚»å¤šè·¯ç”±å™¨æŠ¥å‘Šå¤šç›®ç»„æˆå‘˜çš„åè®®ã€‚<br>ï¼ˆ4ï¼‰ARP(Address Resolution Protocolï¼Œåœ°å€è§£æåè®®) ç”¨äºåŠ¨æ€åœ°å®ŒæˆIPåˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ã€‚<br>ï¼ˆ5ï¼‰RARP(Reverse Address Resolution Protocolï¼Œåå‘åœ°å€è§£æåè®®)ç”¨äºåŠ¨æ€å®Œæˆç‰©ç†åœ°å€å‘IP<br>åœ°å€çš„è½¬æ¢ã€‚</p></div></div><hr><p>9ã€ TCP&#x2F;IPæ˜¯internetçš„æ ¸å¿ƒåè®®ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡ç”¨åº”ç”¨å±‚åè®®åˆ©ç”¨ç½‘ç»œå®Œæˆæ•°æ®äº¤äº’çš„ä»»åŠ¡ï¼Œå…¶ä¸­ï¼Œ<br>ï¼ˆï¼‰æ˜¯ç”¨æ¥åœ¨å®¢æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç®€å•æ–‡ä»¶çš„ä¼ è¾“çš„åè®®ï¼Œæä¾›ä¸å¤æ‚ï¼Œå¼€é”€ä¸å¤§çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚ <em>18å¹´5æœˆç¬¬19é¢˜</em></p><p>Aã€FTP<br>Bã€TFTP<br>Cã€HTTP<br>Dã€SMTP</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘TFTPï¼ˆTrivial File Transfer Protocol,ç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰æ˜¯TCP&#x2F;IPåè®®æ—ä¸­çš„ä¸€ä¸ªç”¨æ¥åœ¨å®¢<br>æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç®€å•æ–‡ä»¶ä¼ è¾“çš„åè®®ï¼Œæä¾›ä¸å¤æ‚ã€å¼€é”€ä¸å¤§çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚ç«¯å£å·ä¸º69ã€‚</p></div></div><hr><p>10ã€æŸå¿«æ¶ˆå“è¿é”ä¼ä¸šå§”æ‰˜ç§‘æŠ€å…¬å¸Aå¼€å‘éƒ¨ç½²ç”µå­å•†åŠ¡å¹³å°ï¼ŒAå…¬å¸æ ¹æ®ç³»ç»Ÿè®¾è®¡ä»»åŠ¡ä¹¦æ‰€ç¡®å®šçš„èŒƒ<br>å›´ï¼Œç¡®å®šç³»ç»Ÿçš„åŸºæœ¬ç›®æ ‡å’Œé€»è¾‘åŠŸèƒ½è¦æ±‚ï¼Œæå‡ºæ–°ç³»ç»Ÿçš„é€»è¾‘æ¨¡å‹ï¼Œè¿™å±äºä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸä¸­ï¼ˆï¼‰é˜¶<br>æ®µçš„å·¥ä½œã€‚ <em>18å¹´5æœˆç¬¬3é¢˜</em></p><p>Aã€ç³»ç»Ÿè§„åˆ’<br>Bã€ç³»ç»Ÿåˆ†æ<br>Cã€ç³»ç»Ÿè®¾è®¡<br>Dã€ç³»ç»Ÿå®æ–½</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘ç³»ç»Ÿåˆ†æé˜¶æ®µçš„ä»»åŠ¡æ˜¯æ ¹æ®ç³»ç»Ÿè®¾è®¡ä»»åŠ¡ä¹¦æ‰€ç¡®å®šçš„èŒƒå›´ï¼Œå¯¹ç°è¡Œç³»ç»Ÿè¿›è¡Œè¯¦ç»†è°ƒæŸ¥ï¼Œæè¿°ç°<br>è¡Œç³»ç»Ÿçš„ä¸šåŠ¡æµç¨‹ï¼ŒæŒ‡å‡ºç°è¡Œç³»ç»Ÿçš„å±€é™æ€§å’Œä¸è¶³ä¹‹å¤„ï¼Œç¡®å®šæ–°ç³»ç»Ÿçš„åŸºæœ¬ç›®æ ‡å’Œé€»è¾‘åŠŸèƒ½è¦æ±‚ï¼Œå³æ<br>å‡ºæ–°ç³»ç»Ÿçš„é€»è¾‘æ¨¡å‹ã€‚</p></div></div><hr><p>11ã€åœ¨è½¯ä»¶éœ€æ±‚åˆ†æä¸­ï¼Œï¼ˆï¼‰åˆ†åˆ«ç”¨æ¥è¡¨ç¤ºåŠŸèƒ½æ¨¡å‹å’Œè¡Œä¸ºæ¨¡å‹ã€‚ <em>19å¹´11æœˆç¬¬7é¢˜</em></p><p>Aã€æ•°æ®æµå›¾ã€çŠ¶æ€è½¬æ¢å›¾<br>Bã€çŠ¶æ€è½¬æ¢å›¾ã€E-Rå›¾<br>Cã€çŠ¶æ€è½¬æ¢å›¾ã€æ•°æ®æµå›¾<br>Dã€E-Rå›¾ã€çŠ¶æ€è½¬æ¢å›¾</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘E-Rå›¾æ˜¯ç”¨æ¥è¡¨ç¤ºæ•°æ®æ¨¡å‹çš„ï¼Œè¡Œä¸ºä¸€èˆ¬ä¸çŠ¶æ€æœ‰å…³ã€‚</p></div></div><hr><p>12ã€ä¸­é—´ä»¶æ˜¯ä¸€ç§ç‹¬ç«‹çš„ç³»ç»Ÿè½¯ä»¶æˆ–æœåŠ¡ç¨‹åºï¼Œï¼ˆï¼‰ä¸å±äºä¸­é—´ä»¶ã€‚ <em>19å¹´11æœˆç¬¬2é¢˜</em><br>Aã€Tomcat<br>Bã€Websphere<br>Cã€ODBC<br>Dã€Python</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘Python å±äºå¼€å‘è¯­è¨€</p></div></div><hr><p>13ã€é¡¹ç›®æˆå‘˜å¼ å·¥ç»˜åˆ¶äº†å››å¼ ç±»å›¾ï¼Œå…¶ä¸­ä¸æ­£ç¡®çš„æ˜¯ï¼ˆï¼‰ã€‚ <em>19å¹´5æœˆç¬¬27é¢˜</em></p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677084628615.png"></p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€ç­”æ¡ˆã€‘<strong>B</strong></p></div></div><hr><p>14ã€åœ¨ UML çš„é¡ºåºå›¾ä¸­ï¼Œé€šå¸¸ç”±å·¦å‘å³åˆ†å±‚æ’åˆ—å„ä¸ªå¯¹è±¡ï¼Œæ­£ç¡®çš„æ’åˆ—æ–¹æ³•æ˜¯ï¼ˆï¼‰ã€‚<em>19å¹´5æœˆç¬¬26é¢˜</em></p><p>Aã€æ‰§è¡Œè€…è§’è‰²ã€æ§åˆ¶ç±»ã€ç”¨æˆ·æ¥å£ã€ä¸šåŠ¡å±‚ã€åå°æ•°æ®åº“<br>Bã€æ‰§è¡Œè€…è§’è‰²ã€ç”¨æˆ·æ¥å£ã€æ§åˆ¶ç±»ã€ä¸šåŠ¡å±‚ã€åå°æ•°æ®åº“<br>Cã€æ‰§è¡Œè€…è§’è‰²ã€æ§åˆ¶ç±»ã€ç”¨æˆ·æ¥å£ã€åå°æ•°æ®åº“ã€ä¸šåŠ¡å±‚<br>Dã€æ‰§è¡Œè€…è§’è‰²ã€ç”¨æˆ·æ¥å£ã€ä¸šåŠ¡å±‚ã€æ§åˆ¶ç±»ã€åå°æ•°æ®åº“</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong></p></div></div><hr><p>15ã€æ‰§è¡Œè€…ä¸ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»æ˜¯ï¼ˆï¼‰ã€‚ <em>19å¹´5æœˆç¬¬25é¢˜</em></p><p>Aã€åŒ…å«å…³ç³»<br>Bã€æ³›åŒ–å…³ç³»<br>Cã€å…³è”å…³ç³»<br>Dã€æ‰©å±•å…³ç³»</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘C<br>ã€è§£æã€‘åœ¨ç”¨ä¾‹å›¾ä¸­æ‰§è¡Œè€…ä¸ç”¨ä¾‹ä¹‹é—´æ˜¯å…³è”å…³ç³»ã€‚</p></div></div><hr><p>16ã€UMLçš„ï¼ˆï¼‰æè¿°äº†ä¸€ä¸ªç‰¹å®šå¯¹è±¡çš„æ‰€æœ‰å¯èƒ½çŠ¶æ€ä»¥åŠç”±äºå„ç§äº‹ä»¶çš„å‘ç”Ÿè€Œå¼•èµ·çš„çŠ¶æ€ä¹‹é—´çš„è½¬ç§»ã€‚ <em>18å¹´11æœˆç¬¬27é¢˜</em></p><p>Aã€æ§åˆ¶å›¾<br>Bã€çŠ¶æ€å›¾<br>Cã€åä½œå›¾<br>Dã€åºåˆ—å›¾</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘çŠ¶æ€å›¾ï¼ˆstate diagramï¼‰ï¼šçŠ¶æ€å›¾æè¿°ä¸€ä¸ªçŠ¶æ€æœºï¼Œå®ƒç”±çŠ¶æ€ã€è½¬ç§»ã€äº‹ä»¶å’Œæ´»åŠ¨ç»„æˆã€‚çŠ¶æ€å›¾ç»™å‡ºäº†å¯¹è±¡çš„åŠ¨æ€è§†å›¾ã€‚å®ƒå¯¹äºæ¥å£ã€ç±»æˆ–åä½œçš„è¡Œä¸ºå»ºæ¨¡å°¤ä¸ºé‡è¦ï¼Œè€Œä¸”å®ƒå¼ºè°ƒäº‹ä»¶å¯¼è‡´çš„å¯¹è±¡è¡Œä¸ºï¼Œè¿™éå¸¸æœ‰åŠ©äºå¯¹ååº”å¼ç³»ç»Ÿå»ºæ¨¡ã€‚</p></div></div><hr><p>17ã€æŸä¼ä¸šè¦å»ºè®¾ä¿¡æ¯ç³»ç»Ÿå¹³å°ï¼Œè¦æ±‚ç³»ç»Ÿå¯ç”¨æ€§è¾¾åˆ°99.99%ã€‚ç³»ç»ŸAå¹³å‡æ— æ•…éšœæ—¶é—´10000å°æ—¶ï¼Œæ•…<br>éšœå¹³å‡ç»´ä¿®æ—¶é—´1å°æ—¶ï¼šç³»ç»ŸBå¹³å‡æ— æ•…éšœæ—¶é—´14000å°æ—¶ï¼Œæ•…éšœå¹³å‡ç»´ä¿®æ—¶é—´1.5å°æ—¶ã€‚ä»¥ä¸‹è¯´æ³•ä¸­ï¼Œ<br>æ­£ç¡®çš„æ˜¯ï¼ˆï¼‰ã€‚ <em>18å¹´11æœˆç¬¬22é¢˜</em></p><p>Aã€åªæœ‰ç³»ç»ŸAç¬¦åˆå¯ç”¨æ€§è¦æ±‚<br>Bã€ç³»ç»ŸAå’Œç³»ç»ŸBå‡ç¬¦åˆå¯ç”¨æ€§è¦æ±‚<br>Cã€åªæœ‰ç³»ç»ŸBç¬¦åˆå¯ç”¨æ€§è¦æ±‚<br>Dã€ç³»ç»ŸAå’Œç³»ç»ŸBéƒ½ä¸ç¬¦åˆå¯ç”¨æ€§è¦æ±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘è®¡ç®—æœºç³»ç»Ÿçš„å¯ç”¨æ€§ç”¨å¹³å‡æ— æ•…éšœæ—¶é—´(MTTF)æ¥åº¦é‡ï¼Œå³è®¡ç®—æœºç³»ç»Ÿå¹³å‡èƒ½å¤Ÿæ­£å¸¸è¿è¡Œå¤šé•¿<br>æ—¶é—´ï¼Œæ‰å‘ç”Ÿä¸€æ¬¡æ•…éšœã€‚ç³»ç»Ÿçš„å¯ç”¨æ€§è¶Šé«˜ï¼Œå¹³å‡æ— æ•…éšœæ—¶é—´è¶Šé•¿ã€‚å¯ç»´æŠ¤æ€§ç”¨å¹³å‡ç»´ä¿®æ—¶é—´(MTTR)<br>æ¥åº¦é‡ï¼Œå³ç³»ç»Ÿå‘ç”Ÿæ•…éšœåç»´ä¿®å’Œé‡æ–°æ¢å¤æ­£å¸¸è¿è¡Œå¹³å‡èŠ±è´¹çš„æ—¶é—´ã€‚ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§è¶Šå¥½ï¼Œå¹³å‡ç»´ä¿®<br>æ—¶é—´è¶ŠçŸ­ã€‚è®¡ç®—æœºç³»ç»Ÿçš„å¯ç”¨æ€§å®šä¹‰ä¸ºï¼šMTTF&#x2F; (MTTF+MTTR) ,kl00%ã€‚ç”±æ­¤å¯è§ï¼Œè®¡ç®—æœºç³»ç»Ÿçš„å¯<br>ç”¨æ€§å®šä¹‰ä¸ºç³»ç»Ÿä¿æŒæ­£å¸¸è¿è¡Œæ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚æ‰€ä»¥ï¼Œæƒ³è¦æé«˜ä¸€ä¸ªç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œè¦ä¹ˆæå‡ç³»ç»Ÿçš„å•æ¬¡<br>æ­£å¸¸å·¥ä½œçš„æ—¶é•¿ï¼Œè¦ä¹ˆå‡å°‘æ•…éšœä¿®å¤æ—¶é—´ã€‚<br>Açš„å¯ç”¨æ€§&#x3D;10000&#x2F;10001&#x3D;99.99%<br>Bçš„å¯ç”¨æ€§&#x3D;14000&#x2F;14001.5 &#x3D; 99.98%<br>åªæœ‰ç³»ç»ŸAè´Ÿè·å¯ç”¨æ€§è¦æ±‚</p></div></div><hr><p>18ã€å…³äºç½‘ç»œå­˜å‚¨æŠ€æœ¯çš„æè¿°ï¼Œæ­£ç¡®çš„æ˜¯ï¼šï¼ˆï¼‰ã€‚<br>Aã€DAS æ˜¯ä¸€ç§æ˜“äºæ‰©å±•çš„å­˜å‚¨æŠ€æœ¯<br>Bã€NAS ç³»ç»Ÿä¸ DAS ç³»ç»Ÿç›¸åŒï¼Œéƒ½æ²¡æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿ<br>Cã€NAS å¯ä»¥ä½¿ç”¨ TCP&#x2F;IP ä½œä¸ºå…¶ç½‘ç»œä¼ è¾“åè®®<br>Dã€SAN é‡‡ç”¨äº†æ–‡ä»¶å…±äº«å­˜å–æ–¹å¼</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘NAS æŠ€æœ¯æ”¯æŒå¤šç§ TCP&#x2F;IP ç½‘ç»œåè®®ï¼Œä¸»è¦æ˜¯NFS (Net File Systemï¼Œç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ)å’Œ CIFS<br>ï¼ˆCommon Internet File Systemï¼Œé€šç”¨ Internet æ–‡ä»¶ç³»ç»Ÿï¼‰æ¥è¿›è¡Œæ–‡ä»¶è®¿é—®ï¼Œæ‰€ä»¥ NAS çš„æ€§èƒ½ç‰¹ç‚¹æ˜¯<br>è¿›è¡Œå°æ–‡ä»¶çº§çš„å…±äº«å­˜å–ã€‚åœ¨å…·ä½“ä½¿ç”¨æ—¶ï¼ŒNASè®¾å¤‡é€šå¸¸é…ç½®ä¸ºæ–‡ä»¶æœåŠ¡å™¨ï¼Œé€šè¿‡ä½¿ç”¨åŸºäº Web çš„ç®¡<br>ç†ç•Œé¢æ¥å®ç°ç³»ç»Ÿèµ„æºçš„é…ç½®ã€ç”¨æˆ·é…ç½®ç®¡ç†å’Œç”¨æˆ·è®¿é—®ç™»å½•ç­‰ã€‚</p></div></div><hr><p>19ã€è½¯ä»¶éœ€æ±‚æ˜¯å¤šå±‚æ¬¡çš„ï¼ŒåŒ…æ‹¬ä¸šåŠ¡éœ€æ±‚ã€ç”¨æˆ·éœ€æ±‚ã€ç³»ç»Ÿéœ€æ±‚ï¼Œå…¶ä¸­ä¸šåŠ¡éœ€æ±‚ï¼ˆï¼‰ã€‚ <em>18å¹´11æœˆç¬¬7é¢˜</em></p><p>Aã€ååº”äº†ä¼ä¸šæˆ–å®¢æˆ·å¯¹ç³»ç»Ÿé«˜å±‚æ¬¡çš„ç›®æ ‡éœ€æ±‚<br>Bã€æè¿°äº†ç”¨æˆ·å…·ä½“ç›®æ ‡æˆ–è€…ç”¨æˆ·è¦æ±‚ç³»ç»Ÿå¿…é¡»å®Œæˆçš„ä»»åŠ¡<br>Cã€ä»ç³»ç»Ÿè§’åº¦æ¥è¯´æ˜è½¯ä»¶çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬åŠŸèƒ½éœ€æ±‚ã€éåŠŸèƒ½éœ€æ±‚å’Œè®¾è®¡çº¦æŸ<br>Dã€æè¿°äº†ç”¨æˆ·ä»»åŠ¡ç³»ç»Ÿåº”è¯¥å…·å¤‡çš„åŠŸèƒ½å’Œæ€§èƒ½</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘ä¸šåŠ¡éœ€æ±‚ã€‚ä¸šåŠ¡éœ€æ±‚æ˜¯æŒ‡åæ˜ ä¼ä¸šæˆ–å®¢æˆ·å¯¹ç³»ç»Ÿé«˜å±‚æ¬¡çš„ç›®æ ‡è¦æ±‚ï¼Œé€šå¸¸æ¥è‡ªé¡¹ç›®æŠ•èµ„äººã€è´­ä¹°äº§å“çš„å®¢æˆ·ã€å®¢æˆ·å•ä½çš„ç®¡ç†äººå‘˜ã€å¸‚åœºè¥é”€éƒ¨é—¨æˆ–äº§å“ç­–åˆ’éƒ¨é—¨ç­‰ã€‚é€šè¿‡ä¸šåŠ¡éœ€æ±‚å¯ä»¥ç¡®å®šé¡¹ç›®è§†å›¾å’ŒèŒƒå›´ï¼Œé¡¹ç›®è§†å›¾å’ŒèŒƒå›´æ–‡æ¡£æŠŠä¸šåŠ¡éœ€æ±‚é›†ä¸­åœ¨ä¸€ä¸ªç®€å•ã€ç´§å‡‘çš„æ–‡æ¡£ä¸­ï¼Œè¯¥æ–‡æ¡£ä¸ºä»¥åçš„å¼€å‘å·¥ä½œå¥ å®šäº†åŸºç¡€ã€‚</p></div></div><hr><p>20ã€UMLå›¾ä¸åŒ…æ‹¬ï¼ˆï¼‰ã€‚ <em>18å¹´5æœˆç¬¬27é¢˜</em></p><p>Aã€ç”¨ä¾‹å›¾<br>Bã€åºåˆ—å›¾<br>Cã€ç»„ä»¶å›¾<br>Dã€ç»§æ‰¿å›¾</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘ç±»å›¾è¡¨ç¤ºç±»ã€æ¥å£å’Œå®ƒä»¬ä¹‹é—´çš„åä½œå…³ç³»ï¼Œæ²¡æœ‰ç»§æ‰¿å›¾</p></div></div>]]></content>
    
    
    <summary type="html">ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè€ƒè¯•å±äºå…¨å›½è®¡ç®—æœºæŠ€æœ¯ä¸è½¯ä»¶ä¸“ä¸šæŠ€æœ¯èµ„æ ¼è€ƒè¯•ä¸­çš„ä¸€ä¸ªé«˜çº§è€ƒè¯•ã€‚</summary>
    
    
    
    <category term="è½¯è€ƒ" scheme="https://youngjuning.js.org/categories/%E8%BD%AF%E8%80%83/"/>
    
    
    <category term="ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88/"/>
    
    <category term="ä¿¡æ¯åŒ–" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E5%8C%96/"/>
    
    <category term="ä¿¡æ¯ç³»ç»Ÿ" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="é«˜é¡¹" scheme="https://youngjuning.js.org/tags/%E9%AB%98%E9%A1%B9/"/>
    
  </entry>
  
  <entry>
    <title>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆå¤‡è€ƒæŒ‡å—</title>
    <link href="https://youngjuning.js.org/9698ac1384d7/"/>
    <id>https://youngjuning.js.org/9698ac1384d7/</id>
    <published>2023-02-15T16:04:55.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è€ƒè¯•ä»‹ç»"><a href="#è€ƒè¯•ä»‹ç»" class="headerlink" title="è€ƒè¯•ä»‹ç»"></a>è€ƒè¯•ä»‹ç»</h2><p>å…¨å›½è®¡ç®—æœºæŠ€æœ¯ä¸è½¯ä»¶ä¸“ä¸šæŠ€æœ¯èµ„æ ¼è€ƒè¯•è®¾ä¸‰ä¸ªçº§åˆ«å±‚æ¬¡ï¼Œäº”ä¸ªä¸“ä¸šï¼Œå…±æœ‰ 27 ç§å²—ä½èµ„æ ¼è€ƒè¯•ã€‚è€Œ<strong>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ</strong>è€ƒè¯•å±äºå…¨å›½è®¡ç®—æœºæŠ€æœ¯ä¸è½¯ä»¶ä¸“ä¸šæŠ€æœ¯èµ„æ ¼è€ƒè¯•ä¸­çš„ä¸€ä¸ª<strong>é«˜çº§è€ƒè¯•</strong>ã€‚</p><h2 id="æŠ¥è€ƒæ¡ä»¶"><a href="#æŠ¥è€ƒæ¡ä»¶" class="headerlink" title="æŠ¥è€ƒæ¡ä»¶"></a>æŠ¥è€ƒæ¡ä»¶</h2><p>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè€ƒè¯•æŠ¥è€ƒæ¡ä»¶ä¸è®¾å­¦å†ä¸èµ„å†æ¡ä»¶ã€å¹´é¾„ä»¥åŠä¸“ä¸šç­‰é™åˆ¶ï¼Œè€ƒç”Ÿå¯æ ¹æ®è‡ªå·±çš„æŠ€æœ¯æ°´å¹³é€‰æ‹©åˆé€‚çš„çº§åˆ«ä»¥åŠåˆé€‚çš„èµ„æ ¼è¿›è¡ŒæŠ¥è€ƒã€‚</p><blockquote><p>æ³¨æ„ï¼šæ¯æ¬¡è€ƒè¯•æ¯ä¸ªäººåªå…è®¸æŠ¥è€ƒä¸€ç§èµ„æ ¼ã€‚</p></blockquote><h2 id="è€ƒè¯•æµç¨‹"><a href="#è€ƒè¯•æµç¨‹" class="headerlink" title="è€ƒè¯•æµç¨‹"></a>è€ƒè¯•æµç¨‹</h2><ol><li><a href="https://bm.ruankao.org.cn/sign/welcome">æŠ¥å</a>ï¼ˆ2æœˆ - 3æœˆï¼‰</li><li>æ‰“å°å‡†è€ƒè¯ï¼ˆè€ƒå‰ä¸€å‘¨ï¼‰</li><li>è€ƒè¯•ï¼ˆ5 æœˆ 27 æ—¥ï¼‰</li><li>å…¬å¸ƒæˆç»©ï¼ˆè€ƒåä¸€ä¸ªæœˆå·¦å³ï¼‰</li><li>é¢†å–è¯ä¹¦ï¼ˆ9 æœˆä»½å·¦å³ï¼‰</li></ol><h2 id="è€ƒé¢˜åˆ†æ"><a href="#è€ƒé¢˜åˆ†æ" class="headerlink" title="è€ƒé¢˜åˆ†æ"></a>è€ƒé¢˜åˆ†æ</h2><table><thead><tr><th align="center">ç§‘ç›®</th><th align="center">å†…å®¹</th><th align="center">æ—¶é•¿</th><th align="center">è€ƒè¯•æ—¶é—´</th></tr></thead><tbody><tr><td align="center">ç»¼åˆçŸ¥è¯†</td><td align="center">75é“é€‰æ‹©é¢˜ï¼ŒçŸ¥è¯†èŒƒå›´å¾ˆå¹¿ï¼ŒåŒ…å«ï¼šIT çŸ¥è¯†ã€æ—¶äº‹æ”¿æ²»ã€é¡¹ç›®ç®¡ç†ã€5 åˆ†çš„è¿ç­¹å­¦ã€5 åˆ†è‹±è¯­é¢˜</td><td align="center">150 åˆ†é’Ÿ</td><td align="center">ä¸Šåˆ<br />9:00 - 11:00</td></tr><tr><td align="center">æ¡ˆä¾‹åˆ†æ</td><td align="center">3 é“å¤§é¢˜ï¼š1 é“è®¡ç®—é¢˜ï¼Œ2 é“åˆ†æé¢˜</td><td align="center">90 åˆ†é’Ÿ</td><td align="center">ä¸‹åˆ<br />1:30 - 3:00</td></tr><tr><td align="center">è®ºæ–‡å†™ä½œ</td><td align="center">1 é“è®ºæ–‡é¢˜ï¼Œè€ƒè¯•èŒƒå›´ï¼š<strong>åå¤§ç®¡ç†</strong>ã€å®‰å…¨ç®¡ç†ã€åˆåŒç®¡ç†ã€æ‹›æŠ•æ ‡</td><td align="center">120 åˆ†é’Ÿ</td><td align="center">ä¸‹åˆ<br />3:20 - 5:20</td></tr></tbody></table><h2 id="å­¦ä¹ è®¡åˆ’"><a href="#å­¦ä¹ è®¡åˆ’" class="headerlink" title="å­¦ä¹ è®¡åˆ’"></a>å­¦ä¹ è®¡åˆ’</h2><p>è®¡åˆ’å…±å†æ—¶ 100 å¤©ï¼Œæ¯å¤©æŠ•å…¥ 2 - 3 å°æ—¶ï¼Œæ€»æŠ•å…¥é¢„è®¡ 200 - 300 å°æ—¶ã€‚</p><ul><li>ç¬¬ä¸€é˜¶æ®µï¼ˆ35 å¤©ï¼‰(2023&#x2F;2&#x2F;15 - 2023&#x2F;3&#x2F;21)<ul><li>åŸºç¡€çŸ¥è¯†</li><li>è®¡ç®—ä¸“é¢˜</li></ul></li><li>ç¬¬äºŒé˜¶æ®µï¼ˆ50 å¤©ï¼‰(2023&#x2F;3&#x2F;22 - 2023&#x2F;5&#x2F;10)<ul><li>å†å¹´çœŸé¢˜</li><li>æ¡ˆä¾‹åˆ†æ</li><li>å†™ä½œä¸“é¢˜</li></ul></li><li>ç¬¬ä¸‰é˜¶æ®µ (15 å¤©)ï¼ˆ2023&#x2F;5&#x2F;11 - 2023&#x2F;5&#x2F;26ï¼‰<ul><li>è€ƒå‰å†²åˆº</li></ul></li></ul><h2 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h2><ul><li><a href="https://www.ruankao.org.cn/">ä¸­å›½è®¡ç®—æœºæŠ€æœ¯èµ„æ ¼ç½‘</a></li><li>è½¯è€ƒçœŸé¢˜ App<ul><li><a href="https://apps.apple.com/hk/app/%E8%BD%AF%E8%80%83%E7%9C%9F%E9%A2%98-2022%E4%BF%A1%E6%81%AF%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86-%E7%B3%BB%E7%BB%9F%E9%9B%86%E6%88%90/id1468131830">iOS</a></li><li><a href="https://www.wandoujia.com/apps/7873801">Android</a></li></ul></li><li>è½¯è€ƒé€š App<ul><li><a href="https://apps.apple.com/cn/app/%E8%BD%AF%E8%80%83%E9%80%9A-2022%E5%B9%B4%E8%BD%AF%E4%BB%B6%E6%B0%B4%E5%B9%B3%E8%80%83%E8%AF%95%E6%8F%90%E5%88%86%E7%A5%9E%E5%99%A8/id1498444438">iOS</a></li><li><a href="https://www.wandoujia.com/apps/8095598">Android</a></li></ul></li><li>è½¯è€ƒåˆ·é¢˜ç‹<ul><li>#å°ç¨‹åº:&#x2F;&#x2F;è½¯è€ƒåˆ·é¢˜ç‹&#x2F;I4Jk3d4HRskRbaw</li></ul></li><li><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677062492249.png" alt="æ­å· E ç±»äººæ‰ç¦åˆ©"></li></ul>]]></content>
    
    
    <summary type="html">ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè€ƒè¯•å±äºå…¨å›½è®¡ç®—æœºæŠ€æœ¯ä¸è½¯ä»¶ä¸“ä¸šæŠ€æœ¯èµ„æ ¼è€ƒè¯•ä¸­çš„ä¸€ä¸ªé«˜çº§è€ƒè¯•ã€‚</summary>
    
    
    
    <category term="è½¯è€ƒ" scheme="https://youngjuning.js.org/categories/%E8%BD%AF%E8%80%83/"/>
    
    
    <category term="ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88/"/>
    
    <category term="ä¿¡æ¯åŒ–" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E5%8C%96/"/>
    
    <category term="ä¿¡æ¯ç³»ç»Ÿ" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="é«˜é¡¹" scheme="https://youngjuning.js.org/tags/%E9%AB%98%E9%A1%B9/"/>
    
    <category term="è®¡ç®—æœº" scheme="https://youngjuning.js.org/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>word-wrap å’Œ word-break</title>
    <link href="https://youngjuning.js.org/c607ec2b5110/"/>
    <id>https://youngjuning.js.org/c607ec2b5110/</id>
    <published>2023-02-13T05:47:56.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<p>word-wrap å’Œ word-break æ˜¯ä¸€å¯¹ç”¨äºå•è¯æ–­å¥çš„åŒç”Ÿå±æ€§ï¼Œä½†æ˜¯åˆæœ‰å¾®å¦™çš„åŒºåˆ«ï¼Œæ¯æ¬¡è¦ç”¨çš„æ—¶å€™è¿˜è¦é‡æ–°ç¿»ä¸€ä¸‹ MDN æ–‡æ¡£ï¼Œæœ¬æ–‡åŠ›æ±‚é€šè¿‡ä¸€å¼ æµç¨‹å›¾å¿«é€Ÿè®°å¿†ä¸¤è€…å¦‚ä½•ä½¿ç”¨ã€‚</p><h2 id="word-wrap"><a href="#word-wrap" class="headerlink" title="word-wrap"></a>word-wrap</h2><p>css çš„ word-wrap å±æ€§ç”¨æ¥æ ‡æ˜æ˜¯å¦å…è®¸æµè§ˆå™¨åœ¨å•è¯å†…è¿›è¡Œæ–­å¥ï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢å½“ä¸€ä¸ªå­—ç¬¦ä¸²å¤ªé•¿è€Œæ‰¾ä¸åˆ°å®ƒçš„è‡ªç„¶æ–­å¥ç‚¹æ—¶äº§ç”Ÿæº¢å‡ºç°è±¡ã€‚</p><ul><li>normalï¼šå°±æ˜¯å¤§å®¶å¹³å¸¸è§å¾—æœ€å¤šçš„æ­£å¸¸çš„æ¢è¡Œè§„åˆ™ã€‚</li><li>break-wordï¼šä¸€è¡Œå•è¯ä¸­å®åœ¨æ²¡æœ‰å…¶ä»–é è°±çš„æ¢è¡Œç‚¹çš„æ—¶å€™åœ¨å•è¯å†…æ¢è¡Œã€‚</li></ul><h2 id="word-break"><a href="#word-break" class="headerlink" title="word-break"></a>word-break</h2><p>css çš„ word-break å±æ€§ç”¨æ¥æ ‡æ˜æ€ä¹ˆæ ·è¿›è¡Œå•è¯å†…çš„æ–­å¥ã€‚</p><ul><li>normalï¼šä½¿ç”¨é»˜è®¤çš„æ¢è¡Œè§„åˆ™ï¼Œå³å¦‚æœä¸€ä¸ªå•è¯å¾ˆé•¿ï¼Œå¯¼è‡´ä¸€è¡Œä¸­å‰©ä¸‹çš„ç©ºé—´å·²ç»æ”¾ä¸ä¸‹å®ƒæ—¶ï¼Œåˆ™æµè§ˆå™¨ä¼šæŠŠè¿™ä¸ªå•è¯æŒªåˆ°ä¸‹ä¸€è¡Œå»ã€‚</li><li>break-allï¼šå…è®¸å•è¯æ–­è¡Œï¼Œå³å¦‚æœä¸€ä¸ªå•è¯å¾ˆé•¿ï¼Œå¯¼è‡´ä¸€è¡Œä¸­å‰©ä¸‹çš„ç©ºé—´å·²ç»æ”¾ä¸ä¸‹å®ƒæ—¶ï¼Œåˆ™æµè§ˆå™¨ä¸ä¼šæŠŠè¿™ä¸ªå•è¯æŒªåˆ°ä¸‹ä¸€è¡Œå»ï¼Œè€Œæ˜¯åœ¨å•è¯å†…æ¢è¡Œã€‚</li></ul><h2 id="æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯"><a href="#æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯" class="headerlink" title="æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯"></a>æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯</h2><p><img src="https://picbed.qunarzz.com/3d7e329ab089d28c7bde5be75573f1d3.png"></p><blockquote><p>å‚è€ƒèµ„æ–™æ¥è‡ª <a href="https://www.cnblogs.com/2050/archive/2012/08/10/2632256.html">ä½ çœŸçš„äº†è§£word-wrapå’Œword-breakçš„åŒºåˆ«å—ï¼Ÿ</a> å’Œ <a href="https://www.zhangxinxu.com/wordpress/2015/11/diff-word-break-break-all-word-wrap-break-word/">word-break:break-allå’Œword-wrap:break-wordçš„åŒºåˆ«</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;word-wrap å’Œ word-break æ˜¯ä¸€å¯¹ç”¨äºå•è¯æ–­å¥çš„åŒç”Ÿå±æ€§ï¼Œä½†æ˜¯åˆæœ‰å¾®å¦™çš„åŒºåˆ«ï¼Œæ¯æ¬¡è¦ç”¨çš„æ—¶å€™è¿˜è¦é‡æ–°ç¿»ä¸€ä¸‹ MDN æ–‡æ¡£ï¼Œæœ¬æ–‡åŠ›æ±‚é€šè¿‡ä¸€å¼ æµç¨‹å›¾å¿«é€Ÿè®°å¿†ä¸¤è€…å¦‚ä½•ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&quot;word-wrap&quot;&gt;&lt;a href=&quot;#word-wrap&quot; </summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="CSS" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/CSS/"/>
    
    
    <category term="CSS" scheme="https://youngjuning.js.org/tags/CSS/"/>
    
    <category term="word-wrap" scheme="https://youngjuning.js.org/tags/word-wrap/"/>
    
    <category term="word-break" scheme="https://youngjuning.js.org/tags/word-break/"/>
    
  </entry>
  
  <entry>
    <title>OpenAI æ¨å‡ºè¶…ç¥ ChatGPT æ³¨å†Œæ”»ç•¥æ¥äº†</title>
    <link href="https://youngjuning.js.org/d744d1d3d1e8/"/>
    <id>https://youngjuning.js.org/d744d1d3d1e8/</id>
    <published>2023-02-06T07:58:31.000Z</published>
    <updated>2023-03-05T10:40:29.050Z</updated>
    
    <content type="html"><![CDATA[<p>OpenAI æ¨å‡ºè¶…ç¥ ChatGPTï¼Œéå¸¸ç«çˆ†ã€‚ä½†æ˜¯å‘¢ï¼Œå› ä¸ºä¸å¯æŠ—åŠ›åŸå› ï¼Œå¤§éƒ¨åˆ†äººæ— æ³•ä½“éªŒåˆ°ã€‚è¿™é‡Œæˆ‘åˆ†äº«ä¸€ä¸‹æ³¨å†Œçš„æ”»ç•¥ã€‚</p><h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><ul><li>é¦–å…ˆèƒ½èƒ½è®¿é—® Googleï¼ˆå‰ç½®æ¡ä»¶ï¼Œä¸èƒ½æ˜ç¡®è¯´ï¼Œæ‡‚å¾—éƒ½æ‡‚ï¼‰</li><li>ä½ å¾—æœ‰ä¸€ä¸ªå›½å¤–æ‰‹æœºå·ï¼ŒGV å·è‚¯å®šä¸è¡Œã€‚<ul><li>å¦‚æœä½ æ²¡æœ‰å›½å¤–æ‰‹æœºå·ï¼Œæ¨èsms-activate.org</li></ul></li></ul><h3 id="æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼"><a href="#æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼" class="headerlink" title="æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼"></a>æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼</h3><ul><li>å…ˆè¡Œæ³¨å†Œsms-activate.org</li><li>æ³¨å†Œå¥½ä¹‹åè¿›è¡Œå¯¹åº”çš„å……å€¼</li></ul><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8acaf6d767714b1d82122cd3206f4ba7~tplv-k3u1fbpfcp-watermark.image"></p><p>æ¥ç è´¹ç”¨ä¸€æ¬¡ä¸º 10.5 å¢å¸ƒï¼Œå¤§çº¦1.2 äººæ°‘å¸ã€‚å› ä¸ºå……å€¼é»˜è®¤ä¸ºç¾å…ƒï¼Œå¯ä»¥é€‰æ‹©å……å€¼ 1 ç¾å…ƒè¿›å»ï¼Œ</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c507b1564d1442d8dfab0ebc8d481e1~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æ³¨å†ŒOpenAIè´¦å·"><a href="#æ³¨å†ŒOpenAIè´¦å·" class="headerlink" title="æ³¨å†ŒOpenAIè´¦å·"></a>æ³¨å†ŒOpenAIè´¦å·</h3><ul><li>æ‰“å¼€<a href="https://beta.openai.com/signup">https://beta.openai.com/signup</a> é¡µé¢è¿›è¡Œç›¸åº”çš„æ³¨å†Œã€‚<ul><li>è¿™é‡ŒåŒæ ·éœ€è¦ä½ èƒ½è®¿é—®Googleä¸” ip ä¸æ˜¯é¦™æ¸¯ï¼Œæœ€å¥½æ˜¯ç¾å›½ã€æ–°åŠ å¡ç­‰ç­‰ï¼Œä¸ç„¶ä¼šæç¤ºä¸èƒ½åœ¨å½“å‰å›½å®¶æœåŠ¡ã€‚</li></ul></li><li>æ³¨å†ŒæˆåŠŸè¿›å…¥ä¸‹é¢å¡«å†™æ‰‹æœºå·çš„é¡µé¢<ul><li>ä¸‹é¢è®°å¾—åˆ‡æ¢ä¸‹å›½å®¶åŒºå·ï¼Œè¿™é‡Œçš„åŒºå·é»˜è®¤æ˜¯ä½ ä»£ç†çš„ã€‚</li></ul></li></ul><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d50d22c04df0430aa0b2afca70a55beb~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="å‡†å¤‡æ¥ç "><a href="#å‡†å¤‡æ¥ç " class="headerlink" title="å‡†å¤‡æ¥ç "></a>å‡†å¤‡æ¥ç </h3><blockquote><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸‹çš„å°±æ˜¯ï¼Œç›®å‰å¥½åƒå°±åªæœ‰å·´è¥¿æ”¯æŒäº†ï¼Œä¹‹å‰æˆ‘é€‰çš„å°å°¼ï¼Œæ˜¯å¯ä»¥æ”¶åˆ°ç çš„ã€‚</p></blockquote><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79235be8d7104175a6dda1cc63f46937~tplv-k3u1fbpfcp-watermark.image"></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2e4434858ab4cbaaa9e1d8249305547~tplv-k3u1fbpfcp-watermark.image"></p><ul><li>ç„¶åå†åˆšåˆšå¡«å†™æ‰‹æœºå·ç çš„é¡µé¢å¡«å…¥ç”³è¯·çš„æ‰‹æœºå·</li></ul><h3 id="å¼€å§‹ä½¿ç”¨ChatGPT"><a href="#å¼€å§‹ä½¿ç”¨ChatGPT" class="headerlink" title="å¼€å§‹ä½¿ç”¨ChatGPT"></a>å¼€å§‹ä½¿ç”¨ChatGPT</h3><p>æ³¨å†Œå®Œåï¼Œæˆ‘ä»¬å»ChatGPTç½‘ç«™å»ç™»é™†ã€‚<a href="https://chat.openai.com/auth/login">https://chat.openai.com/auth/login</a></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e474b55d15d4b8ea3c56e7deb5ce8f9~tplv-k3u1fbpfcp-watermark.image"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf36cc1afc9b45539f543211739c9f83~tplv-k3u1fbpfcp-watermark.image"></p><h4 id="12-æœˆ-6-æ—¥æ›´æ–°"><a href="#12-æœˆ-6-æ—¥æ›´æ–°" class="headerlink" title="12 æœˆ 6 æ—¥æ›´æ–°"></a>12 æœˆ 6 æ—¥æ›´æ–°</h4><ul><li>å¦‚æœä½ çš„é¡µé¢å‡ºç°ä¸‹é¢æç¤ºï¼Œè¯´æ˜ä½ ä»£ç†ä¸è¡Œ~~</li></ul><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc290c2a7abf4c9faee9a392819d16e4~tplv-k3u1fbpfcp-watermark.image"></p><ul><li>æ¥ä¸åˆ°ç ï¼Œå¯ä»¥åœ¨é‚£ä¸ªæœ‰æ•ˆæœŸå†…é€€å›æ¢ä¸ªå·è¯•è¯•ã€‚<ul><li>æœ‰äººç›´æ¥æŠŠå‘çš„ç”µè¯è¾“å…¥æ¡†é‡Œï¼Œæ²¡å»æ‰åŒºå·ä¹Ÿå¯ä»¥æ”¶åˆ°</li></ul></li><li>è¿™ä¸ªæ¥ç ç½‘ç«™å¾ˆå…¨é¢ï¼Œæˆ‘æ¼”ç¤ºå……å€¼æ˜¯ 1 ç¾å…ƒï¼Œä½ ä¹Ÿå¯ä»¥å†²ä¸€ä¸ª 0.18ç¾å…ƒ</li><li>ç›®å‰å®Œå…¨æ”¯æŒçš„æ˜¯å°åº¦+å·´è¥¿ã€‚ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–å›½å®¶çš„ any+other é€‰æ‹©åˆé€‚çš„è´¹ç”¨å³å¯ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;OpenAI æ¨å‡ºè¶…ç¥ ChatGPTï¼Œéå¸¸ç«çˆ†ã€‚ä½†æ˜¯å‘¢ï¼Œå› ä¸ºä¸å¯æŠ—åŠ›åŸå› ï¼Œå¤§éƒ¨åˆ†äººæ— æ³•ä½“éªŒåˆ°ã€‚è¿™é‡Œæˆ‘åˆ†äº«ä¸€ä¸‹æ³¨å†Œçš„æ”»ç•¥ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‡†å¤‡&quot;&gt;&lt;a href=&quot;#å‡†å¤‡&quot; class=&quot;headerlink&quot; title=&quot;å‡†å¤‡&quot;&gt;&lt;/a&gt;å‡†å¤‡&lt;/h3&gt;&lt;ul&gt;</summary>
      
    
    
    
    <category term="äººå·¥æ™ºèƒ½" scheme="https://youngjuning.js.org/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
    
    <category term="OPenAI" scheme="https://youngjuning.js.org/tags/OPenAI/"/>
    
    <category term="Chatgpt" scheme="https://youngjuning.js.org/tags/Chatgpt/"/>
    
    <category term="Chatgpt æ³¨å†Œ" scheme="https://youngjuning.js.org/tags/Chatgpt-%E6%B3%A8%E5%86%8C/"/>
    
    <category term="äººå·¥æ™ºèƒ½" scheme="https://youngjuning.js.org/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>2023 å¹´åº¦è®¡åˆ’</title>
    <link href="https://youngjuning.js.org/cb03d5cd6dce/"/>
    <id>https://youngjuning.js.org/cb03d5cd6dce/</id>
    <published>2023-01-31T03:50:26.000Z</published>
    <updated>2023-03-05T10:40:29.050Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸ŠåŠå¹´"><a href="#ä¸ŠåŠå¹´" class="headerlink" title="ä¸ŠåŠå¹´"></a>ä¸ŠåŠå¹´</h1><h2 id="ç»§ç»­æ•™è‚²-40"><a href="#ç»§ç»­æ•™è‚²-40" class="headerlink" title="ç»§ç»­æ•™è‚² 40%"></a>ç»§ç»­æ•™è‚² 40%</h2><blockquote><p>æ¯å¤©è‡³å°‘æŠ½å‡ºä¸¤ä¸ªå°æ—¶å¤‡è€ƒ</p></blockquote><ul><li>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ</li></ul><h2 id="ç”Ÿæ´»å¨±ä¹-30"><a href="#ç”Ÿæ´»å¨±ä¹-30" class="headerlink" title="ç”Ÿæ´»å¨±ä¹ 30%"></a>ç”Ÿæ´»å¨±ä¹ 30%</h2><blockquote><p>æ¯å¤©è‡³å°‘ 15 åˆ†é’Ÿçš„è¿åŠ¨</p></blockquote><ul><li>å¤‡å­•</li><li>è½æˆ·æ­å·ï¼šä¸ºäº†ä»¥åå­©å­ä¸Šå­¦</li><li>å‡é‡åˆ° 145</li><li>å¸¦åª³å¦‡å»ä¸€ä¸ªæµ·æ»¨åŸå¸‚æ—…æ¸¸</li></ul><h2 id="æŒç»­å­¦ä¹ -30"><a href="#æŒç»­å­¦ä¹ -30" class="headerlink" title="æŒç»­å­¦ä¹  30%"></a>æŒç»­å­¦ä¹  30%</h2><p>æ¯å¤©è‡³å°‘æŠ½å‡ºä¸€ä¸ªå°æ—¶å­¦ä¹ </p><ul><li>ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹å¤ä¹ ä¸€éå¹¶äº§å‡ºä¸€ç¯‡å­¦ä¹ ç¬”è®°</li><li>ã€ŠReact è®¾è®¡ã€‹è¯»ä¸€éå¹¶äº§å‡ºä¸€ç¯‡å­¦ä¹ ç¬”è®°</li><li>ã€ŠJavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¸€éå¹¶äº§å‡ºä¸€ç¯‡å­¦ä¹ ç¬”è®°</li><li>åŠ›æ‰£ 200 ä¸¤æ—¥åˆ·ä¸€é¢˜</li></ul><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ul><li>ç¿»è¯‘å®Œæˆ <a href="https://github.com/vscode-cn/vscode-api-cn">Vs Code API ä¸­æ–‡æ–‡æ¡£</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä¸ŠåŠå¹´&quot;&gt;&lt;a href=&quot;#ä¸ŠåŠå¹´&quot; class=&quot;headerlink&quot; title=&quot;ä¸ŠåŠå¹´&quot;&gt;&lt;/a&gt;ä¸ŠåŠå¹´&lt;/h1&gt;&lt;h2 id=&quot;ç»§ç»­æ•™è‚²-40&quot;&gt;&lt;a href=&quot;#ç»§ç»­æ•™è‚²-40&quot; class=&quot;headerlink&quot; title=&quot;ç»§ç»­æ•™è‚² 40</summary>
      
    
    
    
    <category term="æ¼«è°ˆ" scheme="https://youngjuning.js.org/categories/%E6%BC%AB%E8%B0%88/"/>
    
    
    <category term="å¹´åº¦è®¡åˆ’" scheme="https://youngjuning.js.org/tags/%E5%B9%B4%E5%BA%A6%E8%AE%A1%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>NPM å¸¸ç”¨å‘½ä»¤</title>
    <link href="https://youngjuning.js.org/8e944d3670b0/"/>
    <id>https://youngjuning.js.org/8e944d3670b0/</id>
    <published>2022-11-17T04:02:58.000Z</published>
    <updated>2023-03-05T10:40:29.050Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å…¨å±€"><a href="#å…¨å±€" class="headerlink" title="å…¨å±€"></a>å…¨å±€</h2><ul><li><code>npm root --location=global</code>ï¼šæŸ¥çœ‹å…¨å±€åŒ…å®‰è£…è·¯å¾„<blockquote><p>Mac ä¸‹é»˜è®¤çš„å…¨å±€è·¯å¾„æ˜¯ï¼š<code>/usr/local/lib/node_modules</code><br>Ubuntu ä¸‹é»˜è®¤çš„å…¨å±€è·¯å¾„æ˜¯: <code>/usr/lib/node_modules</code></p></blockquote></li><li><code>npm ls --location=global</code>ï¼šæŸ¥çœ‹å…¨å±€åŒ…åˆ—è¡¨<ul><li><code>npm ls --location=global --depth 0</code>ï¼šä»…æŸ¥çœ‹ä¸€çº§åŒ…</li><li><code>npm ls --location=global --depth 0 | grep packageName</code>ï¼šæŸ¥çœ‹ä¸€çº§åŒ…å¹¶æœç´¢ç›¸å…³åŒ…</li></ul></li></ul><h2 id="owner"><a href="#owner" class="headerlink" title="owner"></a>owner</h2><p>ç®¡ç†å·²ç»å‘å¸ƒçš„åŒ…çš„æ‰€æœ‰æƒ</p><ul><li><code>npm owner add &lt;user&gt; [&lt;@scope&gt;/]&lt;pkg&gt;</code>ï¼šç»™æŸä¸ªåŒ…æ·»åŠ ç”¨æˆ·</li><li><code>npm owner rm &lt;user&gt; [&lt;@scope&gt;/]&lt;pkg&gt;</code>ï¼šåˆ é™¤æŸä¸ªåŒ…çš„æŸä¸ªç”¨æˆ·</li><li><code>npm owner ls [&lt;@scope&gt;/]&lt;pkg&gt;</code>ï¼šåˆ—å‡ºæŸä¸ªåŒ…çš„æ‰€æœ‰ç”¨æˆ·</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å…¨å±€&quot;&gt;&lt;a href=&quot;#å…¨å±€&quot; class=&quot;headerlink&quot; title=&quot;å…¨å±€&quot;&gt;&lt;/a&gt;å…¨å±€&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;npm root --location=global&lt;/code&gt;ï¼šæŸ¥çœ‹å…¨å±€åŒ…å®‰è£…è·¯å¾„&lt;blockquote&gt;
&lt;p</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="npm" scheme="https://youngjuning.js.org/tags/npm/"/>
    
    <category term="å‘½ä»¤" scheme="https://youngjuning.js.org/tags/%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>2023 å¸¸ç”¨ NPM åŒ…æ¨è</title>
    <link href="https://youngjuning.js.org/db7a22999938/"/>
    <id>https://youngjuning.js.org/db7a22999938/</id>
    <published>2022-11-02T07:58:31.000Z</published>
    <updated>2023-03-05T10:40:29.050Z</updated>
    
    <content type="html"><![CDATA[<p>å¸®åŠ©å¼€å‘è€…ä» NPM åŒ…é€‰å‹çš„è§’åº¦æ„ŸçŸ¥å’Œå»ºç«‹å‰ç«¯å·¥ç¨‹åŒ–ä½“ç³»ã€‚</p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><h3 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h3><p><a href="https://www.npmjs.com/package/tape">tape</a></p><h2 id="ç¼–è¯‘å·¥å…·"><a href="#ç¼–è¯‘å·¥å…·" class="headerlink" title="ç¼–è¯‘å·¥å…·"></a>ç¼–è¯‘å·¥å…·</h2><ul><li><a href="https://www.npmjs.com/package/babel">babel</a></li></ul><h2 id="æ„å»ºå·¥å…·"><a href="#æ„å»ºå·¥å…·" class="headerlink" title="æ„å»ºå·¥å…·"></a>æ„å»ºå·¥å…·</h2><ul><li><a href="https://www.npmjs.com/package/webpack">webpack</a></li><li><a href="https://www.npmjs.com/package/rollup">rollup</a></li><li><a href="https://www.npmjs.com/package/esbuild">esbuild</a></li></ul><h2 id="dotenv"><a href="#dotenv" class="headerlink" title="dotenv"></a>dotenv</h2><ul><li><a href="https://www.npmjs.com/package/dotenv">dotenv</a></li></ul><h2 id="Node-js-CLI"><a href="#Node-js-CLI" class="headerlink" title="Node.js CLI"></a>Node.js CLI</h2><h3 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h3><ul><li><a href="https://www.npmjs.com/package/commander">commander</a>: Node.jså‘½ä»¤è¡Œç•Œé¢çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ,å—Ruby Commanderå¯å‘ã€‚ å‰ç«¯å¼€å‘node cli å¿…å¤‡æŠ€èƒ½ã€‚</li><li><a href="https://www.npmjs.com/package/yargs">yargs</a>: åŠŸèƒ½æ¯”è¾ƒå…¨ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥æ¯”è¾ƒå¤æ‚ã€‚</li></ul><h3 id="å‘½ä»¤è¡Œå‚æ•°è§£æ"><a href="#å‘½ä»¤è¡Œå‚æ•°è§£æ" class="headerlink" title="å‘½ä»¤è¡Œå‚æ•°è§£æ"></a>å‘½ä»¤è¡Œå‚æ•°è§£æ</h3><ul><li><a href="https://www.npmjs.com/package/yargs-parser">yargs-parser</a>ï¼šyargs å‘½ä»¤è¡Œæ¡†æ¶å†…ç½®çš„å‘½ä»¤è¡Œå‚æ•°è§£æåº“ï¼ŒåŠŸèƒ½æ¯”è¾ƒå…¨ï¼Œæ¯”è¾ƒé€‚åˆå·¥ç¨‹åŒ–å®ç”¨ã€‚</li><li><a href="https://www.npmjs.com/package/minimist">minimist</a>ï¼šå¦‚æœä½ å–œæ¬¢è½»é‡çº§çš„æŠ€æœ¯ï¼Œé‚£ä¹ˆ minimist è¶³å¤Ÿç®€å•å¥½ç”¨ï¼Œä»£ç é‡ä¹Ÿå¾ˆå°‘ï¼ˆåªæœ‰å‡ ç™¾è¡Œï¼‰ï¼Œéå¸¸é€‚åˆç ”è¯»ã€‚</li><li>inquire.js</li><li>chalk: ç¾åŒ–å‘½ä»¤è¡Œçš„æ¨¡å—</li><li>ora: ä¼˜é›…çš„ spinner</li><li>ncp: å¼‚æ­¥çš„æ‹·è´æ–‡ä»¶ï¼ŒåŒ…å«ç©ºæ–‡ä»¶å¤¹</li><li>recursive-readdir: é€’å½’åœ°åˆ—å‡ºç›®å½•å’Œå­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¸åŒ…å«ç›®å½•æœ¬èº«ã€‚</li><li>shelljs: åœ¨ Node.js ä¸­æ‰§è¡Œ Unix shell å‘½ä»¤</li><li>log-symbols: æ‰“å°æ—¥å¿—çš„ç‰¹æ®Šæ ‡å¿—</li><li><a href="https://www.npmjs.com/package/download-git-repo">download-git-repo</a>: Download and extract a git repository (GitHub, GitLab, Bitbucket) from node</li><li><a href="https://www.npmjs.com/package/global-prefix">global-prefix</a>: è·å– npm å…¨å±€å®‰è£…çš„å‰ç¼€</li><li><a href="https://www.npmjs.com/package/exec-sh">exec-sh</a>: æ‰§è¡Œ shell å‘½ä»¤è½¬å‘æ‰€æœ‰ stdio æµï¼Œæ¯” shelljs exec å‘½ä»¤å¥½ç”¨</li><li><a href="https://www.npmjs.com/package/wml">wml</a>: wml ä¾¦å¬æŸä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ›´æ”¹ï¼ˆä½¿ç”¨ watchmanï¼‰ï¼Œç„¶åå°†æ›´æ”¹çš„æ–‡ä»¶å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚</li><li><a href="https://blog.ihaiu.com/cmd-open/">cmd-open</a>: æ‰©å±• Windows å‘½ä»¤ open</li><li><a href="https://github.com/shelljs/shx">shx</a>: shx is a wrapper around ShellJS Unix commands, providing an easy solution for simple Unix-like, cross-platform commands in npm package scripts.</li></ul><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="css-modules"><a href="#css-modules" class="headerlink" title="css modules"></a>css modules</h3><ul><li><a href="https://www.npmjs.com/package/clsx">clsx</a></li><li><a href="https://www.npmjs.com/package/classnames">classnames</a></li></ul><h3 id="css-in-js"><a href="#css-in-js" class="headerlink" title="css-in-js"></a>css-in-js</h3><ul><li><a href="https://www.npmjs.com/package/styled-components">styled-components</a></li></ul><h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h3 id="çŠ¶æ€ç®¡ç†"><a href="#çŠ¶æ€ç®¡ç†" class="headerlink" title="çŠ¶æ€ç®¡ç†"></a>çŠ¶æ€ç®¡ç†</h3><ul><li><a href="https://www.npmjs.com/package/redux">redux</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¸®åŠ©å¼€å‘è€…ä» NPM åŒ…é€‰å‹çš„è§’åº¦æ„ŸçŸ¥å’Œå»ºç«‹å‰ç«¯å·¥ç¨‹åŒ–ä½“ç³»ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æµ‹è¯•&quot;&gt;&lt;a href=&quot;#æµ‹è¯•&quot; class=&quot;headerlink&quot; title=&quot;æµ‹è¯•&quot;&gt;&lt;/a&gt;æµ‹è¯•&lt;/h2&gt;&lt;h3 id=&quot;å•å…ƒæµ‹è¯•&quot;&gt;&lt;a href=&quot;#å•å…ƒæµ‹è¯•&quot; class</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="NPM" scheme="https://youngjuning.js.org/tags/NPM/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯æ— æ„ŸçŸ¥åˆ·æ–° Token</title>
    <link href="https://youngjuning.js.org/ac2c22966f31/"/>
    <id>https://youngjuning.js.org/ac2c22966f31/</id>
    <published>2022-10-31T05:43:33.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬åç«¯éƒ½è¦æ±‚åœ¨è¯·æ±‚æ¥å£æ—¶ä¼ é€’ç™»å½•çš„ Tokenã€‚ä¸ºäº†é˜²æ­¢ Token æ³„æ¼çš„é£é™©ï¼ŒæœåŠ¡å™¨çš„ Token ä¸€èˆ¬ä¸ä¼šè®¾ç½®å¤ªé•¿æ—¶é—´ï¼Œæ¯”å¦‚æˆ‘æœ€è¿‘è”è°ƒçš„ï¼Œä¸¤ä¸ªå°æ—¶å°±ä¼šè¿‡æœŸï¼Œtoken è¿‡æœŸå°±éœ€è¦é‡æ–°ç™»é™†ã€‚é¢‘ç¹è¦æ±‚ç™»é™†ä¼šé€ æˆç”¨æˆ·ä½“éªŒå·®ï¼Œæ‰€ä»¥åç«¯åŒæ—¶ä¼šæä¾›åˆ·æ–° Token çš„æ¥å£ï¼Œæœ¬æ–‡å°±æ˜¯è®°å½•ä¸€ä¸‹å‡ ç§æ— æ„ŸçŸ¥åˆ·æ–°çš„æ–¹æ³•ã€‚</p><h2 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h2><p>åœ¨ç™»å½•æ—¶ï¼Œåç«¯è¿”å›è¿‡æœŸæ—¶é—´ï¼Œå‰ç«¯æ¯æ¬¡è¯·æ±‚å°±åˆ¤æ–­ token çš„è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœå¿«åˆ°è¿‡æœŸæ—¶é—´ï¼Œå°±å»è°ƒç”¨åˆ·æ–° token æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å°è£…ä¸€ä¸ª refreshToken æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">refreshToken</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">dayjs</span>().<span class="title function_">diff</span>(<span class="params">LOCAL_REFRESH_TIME &gt; LOCAL_EXPIRE</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">global</span>.<span class="property">workPromise</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">global</span>.<span class="property">workPromise</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">async</span> (resolve) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;data&#125; = <span class="keyword">await</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`https://api.com/login`</span>,</span><br><span class="line">        <span class="comment">// other config</span></span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// æ›´æ–° LOCAL_REFRESH_TIME</span></span><br><span class="line">      <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="literal">null</span>;</span><br><span class="line">      <span class="title function_">resolve</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">global</span>.<span class="property">workPromise</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Access</span>_Token</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•ä¸»è¦åŸç†æ˜¯é€šè¿‡å°† refresh æ¥å£è¯·æ±‚å­˜åœ¨å…¨å±€çš„ workPromise ä¸­æ¥ä¿è¯åœ¨å¹¶å‘è¯·æ±‚æ¥å£æ—¶åªå­˜åœ¨ä¸€ä¸ªè¯·æ±‚ã€‚</p><h2 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h2><p>ç™»å½•æ—¶è®¾ç½®å®šæ—¶å™¨åˆ·æ–° token æ¥å£ï¼Œè¯·æ±‚çš„æ—¶å€™åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰ workPromise å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±ç­‰åˆ·æ–°å®Œæˆã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç™»å½•åè®¾ç½®å®šæ—¶å™¨</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">async</span> (resolve) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;data&#125; = <span class="keyword">await</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`https://api.com/login`</span>,</span><br><span class="line">      <span class="comment">// other config</span></span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    cookies.<span class="title function_">set</span>(<span class="string">&#x27;refresh_time&#x27;</span>)</span><br><span class="line">    <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="variable constant_">EXPIRE</span> / <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">request</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">global</span>.<span class="property">workPromise</span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">global</span>.<span class="title function_">workPromise</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ¡ˆç”±äºæœ‰å®šæ—¶å™¨ä¸€ç›´å­˜åœ¨ï¼Œä¼šé¢å¤–æ¶ˆè€—èµ„æºï¼Œä¸æ¨èä½¿ç”¨ã€‚</p><h2 id="æ–¹æ¡ˆä¸‰"><a href="#æ–¹æ¡ˆä¸‰" class="headerlink" title="æ–¹æ¡ˆä¸‰"></a>æ–¹æ¡ˆä¸‰</h2><p>å¦‚æœä½¿ç”¨äº† axiosï¼Œå¯ä»¥åœ¨è¯·æ±‚å“åº”æ‹¦æˆªå™¨ä¸­æ‹¦æˆªï¼Œåˆ¤æ–­ token è¿”å›è¿‡æœŸåï¼Œè°ƒç”¨åˆ·æ–° token æ¥å£ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¯å¦æ­£åœ¨åˆ·æ–°çš„æ ‡è®°</span></span><br><span class="line"><span class="keyword">let</span> isRefreshing = <span class="literal">false</span></span><br><span class="line"><span class="comment">//é‡è¯•é˜Ÿåˆ—</span></span><br><span class="line"><span class="keyword">let</span> requests = []</span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//çº¦å®šcode 409 token è¿‡æœŸ</span></span><br><span class="line">    <span class="keyword">if</span> (response.<span class="property">data</span>.<span class="property">code</span> === <span class="number">409</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!isRefreshing) &#123;</span><br><span class="line">        isRefreshing = <span class="literal">true</span></span><br><span class="line">        <span class="comment">//è°ƒç”¨åˆ·æ–°tokençš„æ¥å£</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">refreshToken</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; token &#125; = res.<span class="property">data</span></span><br><span class="line">          <span class="comment">// æ›¿æ¢token</span></span><br><span class="line">          <span class="title function_">setToken</span>(token)</span><br><span class="line">          response.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`<span class="subst">$&#123;token&#125;</span>`</span></span><br><span class="line">           <span class="comment">// token åˆ·æ–°åå°†æ•°ç»„çš„æ–¹æ³•é‡æ–°æ‰§è¡Œ</span></span><br><span class="line">          requests.<span class="title function_">forEach</span>(<span class="function">(<span class="params">cb</span>) =&gt;</span> <span class="title function_">cb</span>(token))</span><br><span class="line">          requests = [] <span class="comment">// é‡æ–°è¯·æ±‚å®Œæ¸…ç©º</span></span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">service</span>(response.<span class="property">config</span>)</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">//è·³åˆ°ç™»å½•é¡µ</span></span><br><span class="line">          <span class="title function_">removeToken</span>()</span><br><span class="line">          router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">        &#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          isRefreshing = <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// è¿”å›æœªæ‰§è¡Œ resolve çš„ Promise</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// ç”¨å‡½æ•°å½¢å¼å°† resolve å­˜å…¥ï¼Œç­‰å¾…åˆ·æ–°åå†æ‰§è¡Œ</span></span><br><span class="line">          requests.<span class="title function_">push</span>(<span class="function"><span class="params">token</span> =&gt;</span> &#123;</span><br><span class="line">            response.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`<span class="subst">$&#123;token&#125;</span>`</span></span><br><span class="line">            <span class="title function_">resolve</span>(<span class="title function_">service</span>(response.<span class="property">config</span>))</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response &amp;&amp; response.<span class="property">data</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬åç«¯éƒ½è¦æ±‚åœ¨è¯·æ±‚æ¥å£æ—¶ä¼ é€’ç™»å½•çš„ Tokenã€‚ä¸ºäº†é˜²æ­¢ Token æ³„æ¼çš„é£é™©ï¼ŒæœåŠ¡å™¨çš„ Token ä¸€èˆ¬ä¸ä¼šè®¾ç½®å¤ªé•¿æ—¶é—´ï¼Œæ¯”å¦‚æˆ‘æœ€è¿‘è”è°ƒçš„ï¼Œä¸¤ä¸ªå°æ—¶å°±ä¼šè¿‡æœŸï¼Œtoken è¿‡æœŸå°±éœ€è¦é‡æ–°ç™»é™†ã€‚é¢‘ç¹è¦æ±‚ç™»é™†ä¼šé€ æˆç”¨æˆ·ä½“éªŒå·®ï¼Œæ‰€ä»¥åç«¯åŒæ—¶ä¼šæä¾›åˆ·æ–° Token</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="ç½‘ç»œç¼–ç¨‹" scheme="https://youngjuning.js.org/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript éšå¼ç±»å‹è½¬æ¢ä¹‹ç›¸ç­‰æ“ä½œç¬¦</title>
    <link href="https://youngjuning.js.org/f1f7395da421/"/>
    <id>https://youngjuning.js.org/f1f7395da421/</id>
    <published>2022-04-16T09:32:32.000Z</published>
    <updated>2023-03-05T10:40:29.050Z</updated>
    
    <content type="html"><![CDATA[<p>éšå¼ç±»å‹è½¬æ¢å¤šå­˜åœ¨äºä½¿ç”¨ <code>==</code> è¿›è¡Œæ¯”è¾ƒçš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a == b&#x27;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¸åŒç±»å‹çš„å€¼ç”¨ç›¸ç­‰è¿ç®—ç¬¦æ¯”è¾ƒåçš„ç»“æœï¼Œå¯ä»¥ç”¨ä¸‹è¡¨æ€»ç»“ã€‚</p><p><img src="https://s2.loli.net/2022/04/16/WZboPTdBRmXQkja.png"></p><p><code>toNumber</code> æ–¹æ³•å¯¹ä¸åŒç±»å‹è¿”å›çš„ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="https://s2.loli.net/2022/04/17/VQ7BxmTqcOFUh34.png"></p><p><code>toPrimitive()</code>ï¼šå¦‚æœå¯¹è±¡çš„ <code>valueOf</code> æ–¹æ³•çš„ç»“æœæ˜¯åŸå§‹å€¼ï¼Œè¿”å›åŸå§‹å€¼ï¼›å¦‚æœå¯¹è±¡çš„ <code>toString</code> æ–¹æ³•è¿”å›åŸå§‹å€¼ï¼Œå°±è¿”å›è¿™ä¸ªå€¼ï¼›å…¶ä»–æƒ…å†µéƒ½è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p>ç”¨ä¾‹å­æ¥éªŒè¯ä¸€ä¸‹è¡¨æ ¼ä¸­çš„ç»“æœã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> == <span class="string">&#x27;true&#x27;</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><ul><li>é¦–å…ˆï¼Œå¸ƒå°”å€¼ä¼šè¢« <code>toNumber</code> æ–¹æ³•è½¬æ¢ä¸ºæ•°å­—ï¼Œå› æ­¤å¾—åˆ° <code>true == 1</code></li><li>å…¶æ¬¡ï¼Œç”¨ <code>toNumber</code> è½¬æ¢å­—ç¬¦ä¸²å€¼ã€‚å› ä¸ºå­—ç¬¦ä¸²åŒ…å«å­—æ¯ï¼Œæ‰€ä»¥ä¼šè¢«è½¬æˆ <code>NaN</code>ï¼Œå› æ­¤è¡¨è¾¾å¼å°±å˜æˆäº† <code>1 == NaN</code>ï¼Œç»“æœå°±æ˜¯ falseã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;éšå¼ç±»å‹è½¬æ¢å¤šå­˜åœ¨äºä½¿ç”¨ &lt;code&gt;==&lt;/code&gt; è¿›è¡Œæ¯”è¾ƒçš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JavaScript" scheme="https://youngjuning.js.org/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>for-in å’Œ for-of çš„åŒºåˆ«</title>
    <link href="https://youngjuning.js.org/124e984dfd7e/"/>
    <id>https://youngjuning.js.org/124e984dfd7e/</id>
    <published>2022-04-12T09:13:30.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¿­ä»£çš„è¾“å…¥ä¸åŒ"><a href="#è¿­ä»£çš„è¾“å…¥ä¸åŒ" class="headerlink" title="è¿­ä»£çš„è¾“å…¥ä¸åŒ"></a>è¿­ä»£çš„è¾“å…¥ä¸åŒ</h1><ul><li><code>for...in</code> å¯ä»¥å¯¹ä»»ä½•å¯¹è±¡è¿›è¡Œæ“ä½œï¼›å®ƒé€šå¸¸è¢«ç”¨ä½œæ£€æŸ¥å¯¹è±¡çš„å±æ€§ã€‚</li><li><code>for...of</code> åªèƒ½å¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ“ä½œï¼›å®ƒé€šå¸¸è¢«ç”¨ä½œè¿­ä»£æ•°ç»„çš„å…ƒç´ ã€‚</li></ul><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">c</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key); <span class="comment">// &quot;a&quot;, &quot;b&quot;, &quot;c&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> value <span class="keyword">of</span> obj) &#123; <span class="comment">// Uncaught TypeError: obj is not iterable</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è¿­ä»£çš„è¾“å‡ºä¸åŒ"><a href="#è¿­ä»£çš„è¾“å‡ºä¸åŒ" class="headerlink" title="è¿­ä»£çš„è¾“å‡ºä¸åŒ"></a>è¿­ä»£çš„è¾“å‡ºä¸åŒ</h1><ul><li><code>for...in</code> è¿”å›è¢«è¿­ä»£å¯¹è±¡çš„é”®åˆ—è¡¨</li><li><code>for...of</code> è¿”å›è¢«è¿­ä»£å¯¹è±¡çš„æ•°å­—å±æ€§çš„å€¼åˆ—è¡¨</li></ul><h2 id="ä»£ç ç¤ºä¾‹-1"><a href="#ä»£ç ç¤ºä¾‹-1" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">list.<span class="property">foo</span> = <span class="string">&quot;bar&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> list) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">// &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;foo&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> list) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">// &quot;&quot;4&quot;, &quot;5&quot;, &quot;6&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p><img src="https://s2.loli.net/2022/04/12/RycBMqHSUPr8uXg.png"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pets = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;bat&#x27;</span>]);</span><br><span class="line">pets[<span class="string">&quot;species&quot;</span>] = <span class="string">&quot;mammal&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pet <span class="keyword">in</span> pets) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(pet); <span class="comment">// &quot;species&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pet <span class="keyword">of</span> pets) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(pet); <span class="comment">// &quot;cat&quot;, &quot;dog&quot;, &quot;bat&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p><img src="https://s2.loli.net/2022/04/12/x3WkK54cEUq2pDn.png"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pets = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="string">&quot;1&quot;</span>, <span class="string">&quot;cat&quot;</span>],[<span class="string">&quot;2&quot;</span>, <span class="string">&quot;dog&quot;</span>],[<span class="string">&quot;3&quot;</span>, <span class="string">&quot;bat&quot;</span>]]);</span><br><span class="line">pets[<span class="string">&quot;species&quot;</span>] = <span class="string">&quot;mammal&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pet <span class="keyword">in</span> pets) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(pet); <span class="comment">// &quot;species&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pet <span class="keyword">of</span> pets) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(pet); <span class="comment">// [&quot;1&quot;, &quot;cat&quot;], [&quot;2&quot;, &quot;dog&quot;], [&quot;3&quot;, &quot;bat&quot;]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://stackoverflow.com/questions/29285897/what-is-the-difference-between-for-in-and-for-of-statements">What is the difference between ( forâ€¦ in ) and ( forâ€¦ of ) statements?</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è¿­ä»£çš„è¾“å…¥ä¸åŒ&quot;&gt;&lt;a href=&quot;#è¿­ä»£çš„è¾“å…¥ä¸åŒ&quot; class=&quot;headerlink&quot; title=&quot;è¿­ä»£çš„è¾“å…¥ä¸åŒ&quot;&gt;&lt;/a&gt;è¿­ä»£çš„è¾“å…¥ä¸åŒ&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;for...in&lt;/code&gt; å¯ä»¥å¯¹ä»»ä½•å¯¹è±¡è¿›è¡Œæ“ä½œï¼›å®ƒé€šå¸¸è¢«ç”¨ä½œæ£€æŸ¥å¯¹è±¡</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="JavaScript" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/JavaScript/"/>
    
    
    <category term="é¢è¯•é¢˜" scheme="https://youngjuning.js.org/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>MongoDB å­¦ä¹ ç¬”è®°</title>
    <link href="https://youngjuning.js.org/69a1dcb04fe1/"/>
    <id>https://youngjuning.js.org/69a1dcb04fe1/</id>
    <published>2022-04-12T08:55:53.000Z</published>
    <updated>2023-03-05T10:40:29.050Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MongoDB-ä»‹ç»"><a href="#MongoDB-ä»‹ç»" class="headerlink" title="MongoDB ä»‹ç»"></a>MongoDB ä»‹ç»</h1><blockquote><p>ä¸€ä¸ªé¢å‘æ–‡æ¡£å¯¹è±¡çš„æ•°æ®åº“ã€‚</p></blockquote><p>MongoDB æ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚ç”± C++ è¯­è¨€ç¼–å†™ã€‚æ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</p><p>MongoDB æ˜¯ä¸€ä¸ªä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚</p><h1 id="ç®¡ç†-MongoDB"><a href="#ç®¡ç†-MongoDB" class="headerlink" title="ç®¡ç† MongoDB"></a>ç®¡ç† MongoDB</h1><h2 id="å®‰è£…-MongoDB"><a href="#å®‰è£…-MongoDB" class="headerlink" title="å®‰è£… MongoDB"></a>å®‰è£… MongoDB</h2><p>é¦–å…ˆç¡®ä¿ä½ çš„åŒ…æ˜¯æœ€æ–°çš„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt upgrade -y</span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£… MongoDBï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mongodb</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥ mongodb æœåŠ¡çš„çŠ¶æ€ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status mongodb</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/13/YX7SqhNajgwHuZv.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡æ­£å¸¸å¯åŠ¨äº†ã€‚</p><h2 id="ç®¡ç†-MongoDB-1"><a href="#ç®¡ç†-MongoDB-1" class="headerlink" title="ç®¡ç† MongoDB"></a>ç®¡ç† MongoDB</h2><h3 id="æœåŠ¡çŠ¶æ€ç®¡ç†"><a href="#æœåŠ¡çŠ¶æ€ç®¡ç†" class="headerlink" title="æœåŠ¡çŠ¶æ€ç®¡ç†"></a>æœåŠ¡çŠ¶æ€ç®¡ç†</h3><p>MongoDB ç›®å‰æ˜¯ä¸€ä¸ª <code>systemd</code> æœåŠ¡ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ <code>systemctl</code> æ¥æ£€æŸ¥å’Œä¿®æ”¹å®ƒçš„çŠ¶æ€ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><ul><li>æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼š<code>sudo systemctl status mongodb</code></li><li>åœæ­¢æœåŠ¡çŠ¶æ€ï¼š<code>sudo systemctl stop mongodb</code></li><li>å¯åŠ¨æœåŠ¡çŠ¶æ€ï¼š<code>sudo systemctl start mongodb</code></li><li>é‡å¯æœåŠ¡çŠ¶æ€ï¼š<code>sudo systemctl restart mongodb</code></li><li>å¯ç”¨å¼€æœºè‡ªå¯åŠ¨ï¼š<code>sudo systemctl enable mongodb</code></li><li>ç¦ç”¨å¼€æœºè‡ªå¯åŠ¨ï¼š<code>sudo systemctl disable mongodb</code></li></ul><h3 id="é…ç½®ç®¡ç†"><a href="#é…ç½®ç®¡ç†" class="headerlink" title="é…ç½®ç®¡ç†"></a>é…ç½®ç®¡ç†</h3><ul><li>æŸ¥çœ‹é…ç½®æ–‡ä»¶ï¼š<code>sudo nano /etc/mongodb.conf</code></li></ul><h3 id="æ—¥å¿—ç®¡ç†"><a href="#æ—¥å¿—ç®¡ç†" class="headerlink" title="æ—¥å¿—ç®¡ç†"></a>æ—¥å¿—ç®¡ç†</h3><ul><li>æŸ¥çœ‹æ—¥å¿—ï¼š<code>sudo journalctl -u mongodb</code></li><li>æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š<code>sudo journalctl -u mongodb --no-pager -n 100 -f | grep -i error</code></li><li>æŸ¥çœ‹è­¦å‘Šæ—¥å¿—ï¼š<code>sudo journalctl -u mongodb --no-pager -n 100 -f | grep -i warning</code></li><li>æŸ¥çœ‹æç¤ºæ—¥å¿—ï¼š<code>sudo journalctl -u mongodb --no-pager -n 100 -f | grep -i notice</code></li></ul><h3 id="å¸è½½-MongoDB"><a href="#å¸è½½-MongoDB" class="headerlink" title="å¸è½½ MongoDB"></a>å¸è½½ MongoDB</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo systemctl stop mongodb</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo apt purge mongodb</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo apt autoremove</span></span><br></pre></td></tr></table></figure><h2 id="è¿œç¨‹ç®¡ç†-MongoDB"><a href="#è¿œç¨‹ç®¡ç†-MongoDB" class="headerlink" title="è¿œç¨‹ç®¡ç† MongoDB"></a>è¿œç¨‹ç®¡ç† MongoDB</h2><p>é»˜è®¤æ— æ³•è¿œç¨‹è®¿é—® MongoDBï¼Œæˆ‘ä»¬éœ€è¦å…ˆåœ¨æœåŠ¡å™¨å®‰å…¨ç»„ä¸­å¼€æ”¾ <code>27017</code> ç«¯å£ï¼Œç„¶åå†è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo /etc/mongodb.conf</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹  <code>bind_ip = 0.0.0.0</code> ä¸º <code>bind_ip = 0.0.0.0</code>ï¼Œç„¶åé‡å¯æœåŠ¡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo systemctl restart mongodb</span></span><br></pre></td></tr></table></figure><p>å®‰è£… <a href="https://studio3t.com/free">Studio 3T for Free</a>ï¼Œç„¶åè¿æ¥ï¼š</p><p><img src="https://s2.loli.net/2022/04/13/tUBEgnVpSAc715F.png"></p><h2 id="å®‰å…¨ç®¡ç†"><a href="#å®‰å…¨ç®¡ç†" class="headerlink" title="å®‰å…¨ç®¡ç†"></a>å®‰å…¨ç®¡ç†</h2><p>é»˜è®¤æˆ‘ä»¬ä¸éœ€è¦è®¤è¯å³å¯è¿æ¥ MongoDBï¼Œè¿™æ˜¯å¾ˆå±é™©çš„ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·æ¥è®¤è¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mongo</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">use admin</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">db.createUser(&#123;user:<span class="string">&quot;admin&quot;</span>, <span class="built_in">pwd</span>:<span class="string">&quot;123456&quot;</span>, roles:[&#123;role:<span class="string">&quot;userAdminAnyDatabase&quot;</span>, db:<span class="string">&quot;admin&quot;</span>&#125;]&#125;)</span></span><br></pre></td></tr></table></figure><p>ç„¶åé…ç½® MongoDB çš„å®‰å…¨ç­–ç•¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo nano /etc/mongodb.conf</span></span><br></pre></td></tr></table></figure><p>å°† <code>security.authorization = enabled</code> å†™å…¥æ–‡ä»¶ï¼Œç„¶åé‡å¯æœåŠ¡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart mongodb</span><br></pre></td></tr></table></figure><p>åœ¨ Studio 3T ä¸­é…ç½®ç”¨æˆ·åå¯†ç å³å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ Authentication DB éœ€è¦å¡«å†™å¯¹åº”çš„ã€‚</p><p><img src="https://s2.loli.net/2022/04/13/fLhd9t1sZ8KTaRA.png"></p><p>æ›´å¤šå®‰å…¨çŸ¥è¯†å‚è€ƒ <a href="https://help.aliyun.com/document_detail/112035.html">MongoDBæ•°æ®åº“æœªæˆæƒè®¿é—®æ¼æ´é˜²å¾¡æœ€ä½³å®è·µ</a></p><h1 id="MongoDB-æ¦‚å¿µ"><a href="#MongoDB-æ¦‚å¿µ" class="headerlink" title="MongoDB æ¦‚å¿µ"></a>MongoDB æ¦‚å¿µ</h1><ul><li>databaseï¼šæ•°æ®åº“ï¼Œæ˜¯ MongoDB çš„æ ¸å¿ƒï¼Œç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œæ¯ä¸ªæ•°æ®åº“éƒ½æœ‰è‡ªå·±çš„é›†åˆï¼Œé›†åˆä¸­å­˜å‚¨çš„æ˜¯æ•°æ®ã€‚</li><li>collectionï¼šé›†åˆï¼Œç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ï¼ˆtableï¼‰</li><li>documentï¼šæ–‡æ¡£ï¼Œç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡Œï¼ˆrowï¼‰</li><li>fieldï¼šå­—æ®µï¼Œç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„åˆ—ï¼ˆcolumnï¼‰</li><li>indexï¼šç´¢å¼•ï¼Œç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„ç´¢å¼•</li><li>primary keyï¼šä¸»é”®ï¼Œç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„ä¸»é”®ï¼ŒMongoDB ä¸­ä¸»é”®çš„åç§°é»˜è®¤ä¸º <code>_id</code></li></ul><h2 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h2><p>ä¸€ä¸ª mongodb ä¸­å¯ä»¥å»ºç«‹å¤šä¸ªæ•°æ®åº“ã€‚ MongoDB çš„é»˜è®¤æ•°æ®åº“ä¸º <code>db</code>ï¼Œè¯¥æ•°æ®åº“å­˜å‚¨åœ¨ data ç›®å½•ä¸­ã€‚</p><p>MongoDB çš„å•ä¸ªå®ä¾‹å¯ä»¥å®¹çº³å¤šä¸ªç‹¬ç«‹çš„æ•°æ®åº“ï¼Œæ¯ä¸€ä¸ªéƒ½æœ‰è‡ªå·±çš„é›†åˆå’Œæƒé™ï¼Œä¸åŒçš„æ•°æ®åº“ä¹Ÿé˜²æ­¢åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚</p><p><code>show dbs</code> å‘½ä»¤å¯ä»¥æ˜¾ç¤ºæ‰€æœ‰æ•°æ®çš„åˆ—è¡¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mongo</span></span><br><span class="line">MongoDB shell version v3.6.3</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017</span><br><span class="line">MongoDB server version: 3.6.3</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">show dbs</span></span><br><span class="line">admin   0.000GB</span><br><span class="line">config  0.000GB</span><br><span class="line">local   0.000GB</span><br></pre></td></tr></table></figure><p>è¿è¡Œ <code>use</code> å‘½ä»¤å¯ä»¥åˆ‡æ¢æ•°æ®åº“ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">use <span class="built_in">test</span></span></span><br><span class="line">switched to db test</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>db</code> å‘½ä»¤å¯ä»¥æ˜¾ç¤ºå½“å‰æ•°æ®åº“å¯¹è±¡æˆ–é›†åˆã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">db</span></span><br><span class="line">test</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“å‘½åè§„èŒƒ"><a href="#æ•°æ®åº“å‘½åè§„èŒƒ" class="headerlink" title="æ•°æ®åº“å‘½åè§„èŒƒ"></a>æ•°æ®åº“å‘½åè§„èŒƒ</h3><ul><li>ä¸èƒ½æ˜¯ç©ºå­—ç¬¦</li><li>ä¸èƒ½å«æœ‰ <code>&#39; &#39;</code>ï¼ˆç©ºæ ¼ï¼‰ã€<code>.</code>ã€<code>/</code>ã€<code>\</code> å’Œ <code>\0</code>ï¼ˆç©ºå­—ç¬¦ï¼‰</li><li>åº”å…¨éƒ¨å°å†™</li><li>æœ€å¤š 64 å­—èŠ‚</li></ul><h3 id="é»˜è®¤æ•°æ®åº“"><a href="#é»˜è®¤æ•°æ®åº“" class="headerlink" title="é»˜è®¤æ•°æ®åº“"></a>é»˜è®¤æ•°æ®åº“</h3><ul><li>adminï¼šä»æƒé™çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯ root æ•°æ®åº“ã€‚è¦æ˜¯å°†ä¸€ä¸ªç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªæ•°æ®åº“ï¼Œè¿™ä¸ªç”¨æˆ·è‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰æ•°æ®åº“çš„æƒé™ã€‚ä¸€äº›ç‰¹å®šçš„æœåŠ¡å™¨ç«¯å‘½ä»¤ä¹Ÿåªèƒ½ä»è¿™ä¸ªæ•°æ®åº“è¿è¡Œï¼Œæ¯”å¦‚åˆ—å‡ºæ‰€æœ‰çš„æ•°æ®åº“æˆ–è€…å…³é—­æœåŠ¡å™¨ã€‚</li><li>localï¼šè¿™ä¸ªæ•°æ®æ°¸è¿œä¸ä¼šè¢«å¤åˆ¶ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨é™äºæœ¬åœ°å•å°æœåŠ¡å™¨çš„ä»»æ„é›†åˆã€‚</li><li>configï¼šå½“ Mongo ç”¨äºåˆ†ç‰‡è®¾ç½®æ—¶ï¼Œconfig æ•°æ®åº“åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œç”¨äºä¿å­˜åˆ†ç‰‡çš„ç›¸å…³ä¿¡æ¯ã€‚</li></ul><h1 id="è¿æ¥-MongoDB"><a href="#è¿æ¥-MongoDB" class="headerlink" title="è¿æ¥ MongoDB"></a>è¿æ¥ MongoDB</h1><p>æ ‡å‡† URI è¿æ¥è¯­æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]</span><br></pre></td></tr></table></figure><ul><li><code>mongodb://</code>ï¼šè¿™æ˜¯å›ºå®šçš„æ ¼å¼ï¼Œå¿…é¡»æŒ‡å®š</li><li><code>username:password@</code>ï¼šå¯é€‰é¡¹ï¼Œå¦‚æœè®¾ç½®ï¼Œåœ¨è¿æ¥æ•°æ®åº“æœåŠ¡å™¨ä¹‹åï¼Œé©±åŠ¨éƒ½ä¼šå°è¯•ç™»å½•è¿™ä¸ªæ•°æ®åº“</li><li><code>host1</code>ï¼šå¿…é¡»çš„ï¼ŒæŒ‡å®šè‡³å°‘ä¸€ä¸ª hostï¼Œhost1 æ˜¯è¿™ä¸ª URI å”¯ä¸€è¦å¡«å†™çš„ã€‚å®ƒæŒ‡å®šäº†è¦è¿æ¥æœåŠ¡å™¨çš„åœ°å€ã€‚å¦‚æœè¦è¿æ¥å¤åˆ¶é›†ï¼Œè¯·æŒ‡å®šå¤šä¸ªä¸»æœºåœ°å€ã€‚</li><li><code>portX</code>ï¼šå¯é€‰çš„æŒ‡å®šç«¯å£ï¼Œå¦‚æœä¸å¡«ï¼Œé»˜è®¤ä¸º 27017</li><li><code>/database</code>ï¼šå¦‚æœæŒ‡å®š <code>username:password@</code>ï¼Œè¿æ¥å¹¶éªŒè¯ç™»å½•æŒ‡å®šæ•°æ®åº“ã€‚è‹¥ä¸æŒ‡å®šï¼Œé»˜è®¤æ‰“å¼€ test æ•°æ®åº“ã€‚</li><li><code>?options</code>ï¼šæ˜¯è¿æ¥é€‰é¡¹ã€‚å¦‚æœä¸ä½¿ç”¨ <code>/database</code>ï¼Œåˆ™å‰é¢éœ€è¦åŠ ä¸Š <code>/</code>ã€‚æ‰€æœ‰è¿æ¥é€‰é¡¹éƒ½æ˜¯é”®å€¼å¯¹ <code>name=value</code>ï¼Œé”®å€¼å¯¹ä¹‹é—´é€šè¿‡ <code>&amp;</code> æˆ– <code>;</code> éš”å¼€</li></ul><h2 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h2><h3 id="å®‰è£…é©±åŠ¨"><a href="#å®‰è£…é©±åŠ¨" class="headerlink" title="å®‰è£…é©±åŠ¨"></a>å®‰è£…é©±åŠ¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">yarn add mongodb</span></span><br></pre></td></tr></table></figure><h3 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h3><p>è¦åœ¨ MongoDB ä¸­åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª MongoClient å¯¹è±¡ï¼Œç„¶åé…ç½®å¥½æŒ‡å®šçš„ URL å’Œç«¯å£å·ã€‚</p><p>å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼ŒMongoDB å°†åˆ›å»ºæ•°æ®åº“å¹¶å»ºç«‹è¿æ¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/luozhu&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ•°æ®åº“å·²åˆ›å»ºï¼&quot;</span>);</span><br><span class="line">  db.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºé›†åˆ"><a href="#åˆ›å»ºé›†åˆ" class="headerlink" title="åˆ›å»ºé›†åˆ"></a>åˆ›å»ºé›†åˆ</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>createCollection()</code> æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œè¿™ä¸ªé›†åˆå¯ä»¥æ˜¯ç©ºçš„ï¼Œä¹Ÿå¯ä»¥åŒ…å«æ•°æ®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/luozhu&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  dbo.<span class="title function_">createCollection</span>(<span class="string">&quot;site&quot;</span>, <span class="keyword">function</span>(<span class="params">err, res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;é›†åˆå·²åˆ›å»ºï¼&quot;</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h3><p>ä»¥ä¸‹å®ä¾‹æˆ‘ä»¬è¿æ¥æ•°æ®åº“ luozhu çš„ site è¡¨ï¼Œå¹¶æ’å…¥ä¸€æ¡æ•°æ®ã€‚ä½¿ç”¨ <code>insertOne()</code> ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/luozhu&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> myobj = &#123; <span class="attr">name</span>: <span class="string">&quot;Google&quot;</span>, <span class="attr">address</span>: <span class="string">&quot;https://google.com&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">insertOne</span>(myobj, <span class="keyword">function</span>(<span class="params">err, res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–‡æ¡£æ’å…¥æˆåŠŸ&quot;</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦æ’å…¥å¤šæ¡æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>insertMany()</code> ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&quot;mongodb&quot;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> myobj = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;Facebook&#x27;</span>, <span class="attr">website</span>: <span class="string">&#x27;https://www.facebook.com/&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;Github&#x27;</span>, <span class="attr">website</span>: <span class="string">&#x27;https://github.com&#x27;</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">insertMany</span>(myobj, <span class="keyword">function</span>(<span class="params">err, res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–‡æ¡£æ’å…¥æˆåŠŸ&quot;</span>, res.<span class="property">insertedCount</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h3><h4 id="æŸ¥è¯¢æ‰€æœ‰æ•°æ®"><a href="#æŸ¥è¯¢æ‰€æœ‰æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰æ•°æ®"></a>æŸ¥è¯¢æ‰€æœ‰æ•°æ®</h4><p>å¯ä»¥ä½¿ç”¨ <code>find()</code> æ¥æŸ¥æ‰¾æ•°æ®ã€‚<code>find()</code> å¯ä»¥è¿”å›ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰æ•°æ®ã€‚å¦‚æœæœªæŒ‡å®šæ¡ä»¶ï¼Œ<code>find()</code> è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æ•°æ®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&quot;mongodb&quot;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line"></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">find</span>(&#123;&#125;).<span class="title function_">toArray</span>(<span class="keyword">function</span>(<span class="params">err, result</span>) &#123; <span class="comment">// è¿”å›é›†åˆä¸­æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢æŒ‡å®šæ¡ä»¶çš„æ•°æ®"><a href="#æŸ¥è¯¢æŒ‡å®šæ¡ä»¶çš„æ•°æ®" class="headerlink" title="æŸ¥è¯¢æŒ‡å®šæ¡ä»¶çš„æ•°æ®"></a>æŸ¥è¯¢æŒ‡å®šæ¡ä»¶çš„æ•°æ®</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&quot;mongodb&quot;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> whereStr = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&#x27;Github&#x27;</span>&#125;;  <span class="comment">// æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">find</span>(whereStr).<span class="title function_">toArray</span>(<span class="keyword">function</span>(<span class="params">err, result</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°æ–‡æ¡£"><a href="#æ›´æ–°æ–‡æ¡£" class="headerlink" title="æ›´æ–°æ–‡æ¡£"></a>æ›´æ–°æ–‡æ¡£</h3><h4 id="æ›´æ–°ä¸€æ¡æ–‡æ¡£"><a href="#æ›´æ–°ä¸€æ¡æ–‡æ¡£" class="headerlink" title="æ›´æ–°ä¸€æ¡æ–‡æ¡£"></a>æ›´æ–°ä¸€æ¡æ–‡æ¡£</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&quot;mongodb&quot;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27017/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> whereStr = &#123; <span class="string">&quot;name&quot;</span>: <span class="string">&#x27;Github&#x27;</span> &#125;;  <span class="comment">// æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">  <span class="keyword">var</span> updateStr = &#123; <span class="attr">$set</span>:&#123; <span class="string">&quot;website&quot;</span>: <span class="string">&quot;https://github.com/youngjuning&quot;</span> &#125;&#125;;  <span class="comment">// æ›´æ–°å†…å®¹</span></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">updateOne</span>(whereStr, updateStr, <span class="keyword">function</span> (<span class="params">err, res</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–‡æ¡£æ›´æ–°æˆåŠŸ&quot;</span>, res.<span class="property">matchedCount</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒæˆåŠŸåï¼Œè¿›å…¥ mongo ç®¡ç†å·¥å…·æŸ¥çœ‹æ•°æ®å·²ä¿®æ”¹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.site.find(&#123; name: <span class="string">&quot;GitHub&quot;</span> &#125;).<span class="function"><span class="title">pretty</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;_id&quot;</span> : ObjectId(<span class="string">&quot;5a794e36763eb821b24db854&quot;</span>),</span><br><span class="line">    <span class="string">&quot;name&quot;</span> : <span class="string">&quot;Github&quot;</span>,</span><br><span class="line">    <span class="string">&quot;url&quot;</span> : <span class="string">&quot;https://www.github.com&quot;</span>     <span class="comment"># å·²ä¿®æ”¹ä¸º https</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ›´æ–°å¤šæ¡æ–‡æ¡£"><a href="#æ›´æ–°å¤šæ¡æ–‡æ¡£" class="headerlink" title="æ›´æ–°å¤šæ¡æ–‡æ¡£"></a>æ›´æ–°å¤šæ¡æ–‡æ¡£</h4><p>å¦‚æœè¦è·Ÿæ–°æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>updateMany()</code> ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27018/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="function">(<span class="params">err, db</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> whereStr = &#123;<span class="string">&quot;country&quot;</span>: <span class="string">&#x27;us&#x27;</span>&#125;;  <span class="comment">// æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">  <span class="keyword">var</span> updateStr = &#123;<span class="attr">$set</span>: &#123; <span class="string">&quot;country&quot;</span> : <span class="string">&quot;American&quot;</span> &#125;&#125;;</span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">updateMany</span>(whereStr, updateStr, <span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">modifiedCount</span> + <span class="string">&quot; æ¡æ–‡æ¡£è¢«æ›´æ–°&quot;</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>res.modifiedCount</code> å±æ€§è¿”å›ä¿®æ”¹çš„æ–‡æ¡£æ•°é‡ã€‚</p><h3 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h3><h4 id="åˆ é™¤ä¸€æ¡æ•°æ®"><a href="#åˆ é™¤ä¸€æ¡æ•°æ®" class="headerlink" title="åˆ é™¤ä¸€æ¡æ•°æ®"></a>åˆ é™¤ä¸€æ¡æ•°æ®</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27018/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="function">(<span class="params">err, db</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> whereStr = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&#x27;Github&#x27;</span>&#125;;  <span class="comment">// æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">deleteOne</span>(whereStr, <span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">deletedCount</span> + <span class="string">&quot; æ¡æ–‡æ¡£è¢«åˆ é™¤&quot;</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤å¤šæ¡æ•°æ®"><a href="#åˆ é™¤å¤šæ¡æ•°æ®" class="headerlink" title="åˆ é™¤å¤šæ¡æ•°æ®"></a>åˆ é™¤å¤šæ¡æ•°æ®</h4><p>å¦‚æœè¦åˆ é™¤å¤šæ¡è¯­å¥å¯ä»¥ä½¿ç”¨ <code>deleteMany()</code> æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MongoClient</span> = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>).<span class="property">MongoClient</span>;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;mongodb://localhost:27018/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MongoClient</span>.<span class="title function_">connect</span>(url, <span class="keyword">function</span>(<span class="params">err, db</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  <span class="keyword">var</span> dbo = db.<span class="title function_">db</span>(<span class="string">&quot;luozhu&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> whereStr = &#123;<span class="attr">country</span>: <span class="string">&quot;American&quot;</span>&#125;;  <span class="comment">// æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">  dbo.<span class="title function_">collection</span>(<span class="string">&quot;site&quot;</span>).<span class="title function_">deleteMany</span>(whereStr, <span class="function">(<span class="params">err, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">deletedCount</span>, <span class="string">&quot;æ¡æ–‡æ¡£è¢«åˆ é™¤&quot;</span>);</span><br><span class="line">    db.<span class="title function_">close</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>res.deletedCount</code> å±æ€§è¿”å›åˆ é™¤çš„æ–‡æ¡£æ•°é‡ã€‚</p><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><ul><li><a href="https://zhuanlan.zhihu.com/p/76349679">å¦‚ä½•åœ¨ Ubuntu ä¸Šå®‰è£… MongoDB</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;MongoDB-ä»‹ç»&quot;&gt;&lt;a href=&quot;#MongoDB-ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;MongoDB ä»‹ç»&quot;&gt;&lt;/a&gt;MongoDB ä»‹ç»&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;ä¸€ä¸ªé¢å‘æ–‡æ¡£å¯¹è±¡çš„æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;/block</summary>
      
    
    
    
    <category term="å…¨æ ˆ" scheme="https://youngjuning.js.org/categories/%E5%85%A8%E6%A0%88/"/>
    
    
    <category term="MongoDB" scheme="https://youngjuning.js.org/tags/MongoDB/"/>
    
  </entry>
  
  <entry>
    <title>code-server å°é²œ</title>
    <link href="https://youngjuning.js.org/dfd0faf39738/"/>
    <id>https://youngjuning.js.org/dfd0faf39738/</id>
    <published>2022-03-19T10:00:00.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<h1 id="WebIDE-æ¦‚è¿°"><a href="#WebIDE-æ¦‚è¿°" class="headerlink" title="WebIDE æ¦‚è¿°"></a>WebIDE æ¦‚è¿°</h1><h2 id="WebIDE-ä»‹ç»"><a href="#WebIDE-ä»‹ç»" class="headerlink" title="WebIDE ä»‹ç»"></a>WebIDE ä»‹ç»</h2><p>WebIDE æ˜¯åŸºäº H5 æ”¯æŒå¤šè¯­è¨€çš„åœ¨çº¿é›†æˆå¼€å‘ç¯å¢ƒã€‚ç›¸è¾ƒäºä¼ ç»Ÿçš„æœ¬åœ° IDEï¼ŒWebIDE æ˜¯å¼€ç®±å³ç”¨çš„ï¼Œä½ ä¸ç”¨é…ç½® git ç¯å¢ƒã€node ç¯å¢ƒã€react ç¯å¢ƒç”šè‡³ React Native ç¯å¢ƒã€‚</p><h2 id="WebIDE-å‘å±•ä¸ç°çŠ¶"><a href="#WebIDE-å‘å±•ä¸ç°çŠ¶" class="headerlink" title="WebIDE å‘å±•ä¸ç°çŠ¶"></a>WebIDE å‘å±•ä¸ç°çŠ¶</h2><ul><li>åŸºäº <a href="https://codemirror.net/">CodeMirror</a> å’Œ <a href="https://ace.c9.io/">Ace</a> å®ç°ç¼–è¾‘å™¨éƒ¨åˆ†ï¼Œå…¶ä½™éƒ¨åˆ†è‡ªå·±å®ç°</li><li>ä»¥ <a href="https://codesandbox.io/">CodeSandbox</a> ä¸ºä»£è¡¨çš„çš„åœ¨çº¿ä»£ç ç¼–è¾‘å™¨æœåŠ¡ï¼Œç§æœ‰éƒ¨ç½²è¾ƒéº»çƒ¦</li><li><a href="https://gitlab.com/youngjuning/react">Gitlab ide</a>ï¼šé›†æˆåœ¨ Gitlab ä¸­çš„ IDE</li><li><a href="https://github.com/facebook/react/">Github ide</a>ï¼šåŸºäº vscode å®ç°çš„ä¸ github ç»“åˆçš„ IDEï¼Œé™åˆ¶æ˜¯å‘½ä»¤è¡Œä½¿ç”¨æœ‰é™åˆ¶ï¼Œ</li><li><a href="https://codingcorp.cloudstudio.net/ws/qmbngm">Cloud Studio</a>ï¼šå¯ä»¥ç†è§£ä¸ºå›½äº§ CodeSandboxï¼Œä»¥å‰æ˜¯åŸºäº Ace åšçš„ï¼Œç°åœ¨ä¹Ÿæ”¹æˆäº†åŸºäº vscodeï¼Œè‡ªå®šä¹‰åŠŸèƒ½é€šè¿‡ vscode çš„æ’ä»¶ä½“ç³»æ¥åš</li></ul><p>é€šè¿‡æ¯”å¯¹å¸‚åœºä¸Šå¸¸è§çš„ WebIDE äº§å“ï¼Œæˆ‘ä»¬èƒ½å‘ç°è¶‹åŠ¿éƒ½è¶‹äºç»Ÿä¸€äº†ï¼Œå°±æ˜¯ä¾æ‰˜ vscode å¼ºå¤§çš„èƒ½åŠ›æ¥å®ç°çš„ï¼Œæ‰©å±•èƒ½åŠ›ä¹Ÿæ˜¯åŸºäº vscode æ¥å®ç°ã€‚</p><h2 id="WebIDE-é€šç”¨æ¶æ„"><a href="#WebIDE-é€šç”¨æ¶æ„" class="headerlink" title="WebIDE é€šç”¨æ¶æ„"></a>WebIDE é€šç”¨æ¶æ„</h2><p><img src="https://s2.loli.net/2022/03/23/UfjaX4QpTmg5MKu.png"></p><h2 id="WebIDE-çš„ä¼˜åŠ¿"><a href="#WebIDE-çš„ä¼˜åŠ¿" class="headerlink" title="WebIDE çš„ä¼˜åŠ¿"></a>WebIDE çš„ä¼˜åŠ¿</h2><ul><li>åœ¨å…·æœ‰ä¸€è‡´å¼€å‘ç¯å¢ƒçš„ä»»ä½•è®¾å¤‡ä¸Šç¼–å†™ä»£ç </li><li>ä½¿ç”¨äº‘æœåŠ¡å™¨åŠ é€Ÿæµ‹è¯•ã€ç¼–è¯‘ã€ä¸‹è½½ç­‰æ¥èŠ‚çœæ—…é€”ä¸­çš„ç¬”è®°æœ¬ç”µé‡</li><li>æ‰€æœ‰å¯†é›†å‹ä»»åŠ¡éƒ½åœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šè¿è¡Œï¼ŒèŠ‚çœç¬”è®°æœ¬å†…å­˜</li></ul><h2 id="å·¥ç¨‹åŒ–æ„ä¹‰"><a href="#å·¥ç¨‹åŒ–æ„ä¹‰" class="headerlink" title="å·¥ç¨‹åŒ–æ„ä¹‰"></a>å·¥ç¨‹åŒ–æ„ä¹‰</h2><ul><li>å®‰å…¨æ€§ï¼šæœåŠ¡éƒ¨ç½²åœ¨å†…ç½‘ï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒå®‰å…¨é—®é¢˜ï¼Œä¸”æ’ä»¶æœåŠ¡ä¹Ÿå¯ä»¥å†…ç½‘éƒ¨ç½²ã€‚</li><li>è§„èŒƒæ€§ï¼šé€šè¿‡å®šåˆ¶ç¼–è¾‘å™¨ï¼Œæˆ‘ä»¬å¯ä»¥è§„èŒƒå¼€å‘é˜¶æ®µçš„æµç¨‹ä¸ç¯å¢ƒ</li><li>ææ•ˆæ€§ï¼šé€šè¿‡å®æ—¶é¢„è§ˆæŠ€æœ¯ï¼Œå¯ä»¥å®ç°å¼€å‘é˜¶æ®µé€šè¿‡ mock æ•°æ®å³å¯é¢„è§ˆé¢æ¿ã€‚å¦å¤–ç”±äºæ˜¯é’ˆå¯¹ OS ä¸šåŠ¡å®šåˆ¶ï¼Œæ‰€ä»¥å¼€å‘å¥—ä»¶éƒ½æ˜¯å®šåˆ¶å¥½çš„ï¼Œå¼€å‘åªéœ€è¦å…³å¿ƒä»£ç </li><li>å¹³å°åŒ–ï¼šå¯ä»¥å’Œå†…éƒ¨ä»»ä½•å¹³å°æ‰“é€šäº¤äº’ï¼Œæ¯”å¦‚ä¸€é”®æ‰“åŒ…ã€ä¸€é”®å‘å¸ƒ</li></ul><h1 id="åŸºäº-code-server-æ­å»º-WebIDE-å¹³å°"><a href="#åŸºäº-code-server-æ­å»º-WebIDE-å¹³å°" class="headerlink" title="åŸºäº code-server æ­å»º WebIDE å¹³å°"></a>åŸºäº code-server æ­å»º WebIDE å¹³å°</h1><p>code-server æ˜¯ä¸€ä¸ªå…è´¹çš„åŸºäºæµè§ˆå™¨çš„ IDEï¼Œå®ƒæ˜¯åŸºäº vscode å°è£…çš„è·¨å¹³å° IDEã€‚</p><h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><h3 id="å®‰è£…-nodejs"><a href="#å®‰è£…-nodejs" class="headerlink" title="å®‰è£… nodejs"></a>å®‰è£… nodejs</h3><p><strong>å®‰è£…æº</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -</span><br></pre></td></tr></table></figure><p><strong>å®‰è£… nodejs</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y nodejs</span><br></pre></td></tr></table></figure><p><strong>æ›´æ–° npm</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g npm</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-code-server"><a href="#å®‰è£…-code-server" class="headerlink" title="å®‰è£… code-server"></a>å®‰è£… code-server</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://code-server.dev/install.sh | sh</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ä»¥æ”¯æŒ systemd æ–¹å¼å¯åŠ¨å¹¶å¼€å§‹å¼€æœºè‡ªå¯åŠ¨ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> --now code-server@<span class="variable">$USER</span></span><br></pre></td></tr></table></figure><p>ä¹‹åå¦‚æœä¿®æ”¹äº†é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>sudo systemctl restart code-server@$USER</code> é‡å¯æœåŠ¡ã€‚</p><p>æˆ–è€…ä½ ä¸éœ€è¦åå°æœåŠ¡ï¼Œä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code-server</span><br></pre></td></tr></table></figure><h3 id="nginx-åå‘ä»£ç†"><a href="#nginx-åå‘ä»£ç†" class="headerlink" title="nginx åå‘ä»£ç†"></a>nginx åå‘ä»£ç†</h3><p>å®‰è£… nginxï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install -y nginx</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;</span><br><span class="line">    server_name mydomain.com;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">      proxy_pass http://localhost:8080/;</span><br><span class="line">      proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">      proxy_set_header Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">      proxy_set_header Connection upgrade;</span><br><span class="line">      proxy_set_header Accept-Encoding gzip;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•é˜…è¯»"><a href="#æ‰©å±•é˜…è¯»" class="headerlink" title="æ‰©å±•é˜…è¯»"></a>æ‰©å±•é˜…è¯»</h2><ul><li><a href="https://www.zhihu.com/question/41050429">è¦å®ç°ä¸€ä¸ªWeb IDE éœ€è¦å“ªäº›å‰ç«¯æŠ€æœ¯ï¼Ÿ</a></li><li><a href="https://developer.aliyun.com/article/646273">WebIDE ä½¿ç”¨æŒ‡å— - é˜¿é‡Œäº‘</a></li><li><a href="https://docs.gitlab.com/ee/user/project/web_ide/">ç½‘ç»œIDE - GitLab</a></li><li><a href="https://www.youtube.com/watch?v=lfYo4mfOyM8">What is CodeSandbox</a></li><li><a href="https://juejin.cn/post/7008428269317914661">å¦‚ä½•åœ¨å›¢é˜Ÿå¿«é€Ÿè½åœ° WebIDE</a></li><li><a href="https://learnku.com/articles/42581">Ubuntu å®‰è£…æœ€æ–°ç‰ˆæœ¬ Node.js</a></li><li><a href="https://www.jianshu.com/p/648c48f146c6">è…¾è®¯äº‘ç™»å½•Rootç”¨æˆ·</a></li><li><a href="https://youngjuning.js.org/21bdf0b4bd15/">å†™ç»™å‰ç«¯çš„Linuxå®æˆ˜æ•™ç¨‹</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;WebIDE-æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#WebIDE-æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;WebIDE æ¦‚è¿°&quot;&gt;&lt;/a&gt;WebIDE æ¦‚è¿°&lt;/h1&gt;&lt;h2 id=&quot;WebIDE-ä»‹ç»&quot;&gt;&lt;a href=&quot;#WebIDE-ä»‹ç»&quot; class</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="vscode" scheme="https://youngjuning.js.org/tags/vscode/"/>
    
    <category term="ide" scheme="https://youngjuning.js.org/tags/ide/"/>
    
    <category term="code-sever" scheme="https://youngjuning.js.org/tags/code-sever/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ MetaMask è¿æ¥åˆ°å¸å®‰æ™ºèƒ½é“¾(BSC)</title>
    <link href="https://youngjuning.js.org/5cb0c0ce25b8/"/>
    <id>https://youngjuning.js.org/5cb0c0ce25b8/</id>
    <published>2021-12-30T02:36:17.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<p>å¸å®‰æ™ºèƒ½é“¾æ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å¤§çš„ä»¥å¤ªåŠäº¤æ˜“æ‰€ï¼ŒMetaMask åˆ™æ˜¯ä¸“æ³¨æœåŠ¡äºä»¥å¤ªåŠçš„é’±åŒ…åº”ç”¨ã€‚</p><h2 id="å…¥å£"><a href="#å…¥å£" class="headerlink" title="å…¥å£"></a>å…¥å£</h2><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images/202112301451827.png"></p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><ul><li>ç½‘ç»œåç§°: <code>å¸å®‰æ™ºèƒ½é“¾</code></li><li>RPC URL: <code>https://bsc-dataseed1.binance.org/</code></li><li>é“¾ ID: <code>56</code></li><li>Currency Symbol: <code>WBNB</code></li><li>åŒºå—æµè§ˆå™¨: <code>https://bscscan.com/</code></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://academy.binance.com/zh/articles/connecting-metamask-to-binance-smart-chain">åœ¨å¸å®‰æ™ºèƒ½é“¾ä¸­å…³è”MetaMaské’±åŒ…</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¸å®‰æ™ºèƒ½é“¾æ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å¤§çš„ä»¥å¤ªåŠäº¤æ˜“æ‰€ï¼ŒMetaMask åˆ™æ˜¯ä¸“æ³¨æœåŠ¡äºä»¥å¤ªåŠçš„é’±åŒ…åº”ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å…¥å£&quot;&gt;&lt;a href=&quot;#å…¥å£&quot; class=&quot;headerlink&quot; title=&quot;å…¥å£&quot;&gt;&lt;/a&gt;å…¥å£&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https:</summary>
      
    
    
    
    <category term="åŒºå—é“¾" scheme="https://youngjuning.js.org/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    
    <category term="MetaMask" scheme="https://youngjuning.js.org/tags/MetaMask/"/>
    
  </entry>
  
  <entry>
    <title>React Hooks é—®é¢˜è®°å½•</title>
    <link href="https://youngjuning.js.org/c22a00ea88bc/"/>
    <id>https://youngjuning.js.org/c22a00ea88bc/</id>
    <published>2021-12-10T02:44:31.000Z</published>
    <updated>2023-03-05T10:40:29.050Z</updated>
    
    <content type="html"><![CDATA[<p>React Hooks åœ¨</p><h2 id="Warning-Canâ€™t-perform-a-React-state-update-on-an-unmounted-component"><a href="#Warning-Canâ€™t-perform-a-React-state-update-on-an-unmounted-component" class="headerlink" title="Warning: Canâ€™t perform a React state update on an unmounted component"></a>Warning: Canâ€™t perform a React state update on an unmounted component</h2><p>ç”±äº <code>useEffect</code> ä¸­æœ‰å¼‚æ­¥æ“ä½œï¼Œå½“ç»„ä»¶å¸è½½åå¼‚æ­¥æ“ä½œç»“æŸå¹¶æ‰§è¡Œ state æ“ä½œï¼ŒReact å°±ä¼šæé†’å­˜åœ¨å†…å­˜æ³„æ¼çš„é£é™©ã€‚åœ¨ React Hooks ä¸­ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨å¼‚æ­¥æ“ä½œä¸­åˆ¤æ–­æ˜¯å¦ç»„ä»¶è¢«å¸è½½äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useAsync</span>(<span class="params">asyncFn, onSuccess</span>) &#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> isActive = <span class="literal">true</span>;</span><br><span class="line">    <span class="title function_">asyncFn</span>().<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (isActive) <span class="title function_">onSuccess</span>(data);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123; isActive = <span class="literal">false</span> &#125;;</span><br><span class="line">  &#125;, [asyncFn, onSuccess]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ahooks æä¾›çš„åŠŸèƒ½æ›´å¼ºå¤§çš„ <code>useAsyncEffect</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useAsyncEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;ahooks&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mockCheck</span>(<span class="params"></span>): <span class="title class_">Promise</span>&lt;boolean&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>(<span class="literal">true</span>), <span class="number">3000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [pass, setPass] = useState&lt;boolean&gt;(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useAsyncEffect</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="title function_">setPass</span>(<span class="keyword">await</span> <span class="title function_">mockCheck</span>());</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;pass === null &amp;&amp; &#x27;Checking...&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;pass === true &amp;&amp; &#x27;Check passed.&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;React Hooks åœ¨&lt;/p&gt;
&lt;h2 id=&quot;Warning-Canâ€™t-perform-a-React-state-update-on-an-unmounted-component&quot;&gt;&lt;a href=&quot;#Warning-Canâ€™t-perform-a-React-s</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="react" scheme="https://youngjuning.js.org/tags/react/"/>
    
    <category term="hooks" scheme="https://youngjuning.js.org/tags/hooks/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäº Next.js å¼€å‘ BSC DApp</title>
    <link href="https://youngjuning.js.org/cba1320bcd71/"/>
    <id>https://youngjuning.js.org/cba1320bcd71/</id>
    <published>2021-12-05T14:58:44.000Z</published>
    <updated>2023-03-05T10:40:29.054Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é¡¹ç›®åˆå§‹åŒ–"><a href="#é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="é¡¹ç›®åˆå§‹åŒ–"></a>é¡¹ç›®åˆå§‹åŒ–</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-next-app@latest --typescript</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œæ ¹æ®æŒ‡ç¤ºå¼€å¯å¼€å‘æ¨¡å¼çš„ serverã€‚ç„¶åå°è¯•ç¼–è¾‘ <code>pages/index.tsx</code> å¹¶åœ¨æµè§ˆå™¨æŸ¥çœ‹ç»“æœã€‚</p><h2 id="å¼€å‘è§„èŒƒ"><a href="#å¼€å‘è§„èŒƒ" class="headerlink" title="å¼€å‘è§„èŒƒ"></a>å¼€å‘è§„èŒƒ</h2><h3 id="commitlint"><a href="#commitlint" class="headerlink" title="commitlint"></a>commitlint</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx @luozhu/create-commitlint</span><br></pre></td></tr></table></figure><h3 id="prettier"><a href="#prettier" class="headerlink" title="prettier"></a>prettier</h3><h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add prettier eslint-config-prettier eslint-plugin-prettier @luozhu/prettier-config -D</span><br></pre></td></tr></table></figure><h4 id="é…ç½®-eslintrc-json"><a href="#é…ç½®-eslintrc-json" class="headerlink" title="é…ç½® .eslintrc.json"></a>é…ç½® .eslintrc.json</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;next/core-web-vitals&quot;</span><span class="punctuation">,</span> <span class="string">&quot;plugin:prettier/recommended&quot;</span><span class="punctuation">,</span> <span class="string">&quot;prettier&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;no-unused-vars&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;react-hooks/exhaustive-deps&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@next/next/no-img-element&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®-prettierrc-js"><a href="#é…ç½®-prettierrc-js" class="headerlink" title="é…ç½® .prettierrc.js"></a>é…ç½® .prettierrc.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="built_in">require</span>(<span class="string">&#x27;@luozhu/prettier-config&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="editorconfig"><a href="#editorconfig" class="headerlink" title=".editorconfig"></a>.editorconfig</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># EditorConfig is awesome: http://EditorConfig.org</span><br><span class="line"></span><br><span class="line"># top-most EditorConfig file</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line"># Unix-style newlines with a newline ending every file</span><br><span class="line">[*]</span><br><span class="line">quote_type = single # Fix Prettier &quot;prettier.singleQuote&quot; not working in 1.40 vs code</span><br><span class="line">indent_style = space</span><br><span class="line">indent_size = 2</span><br><span class="line">end_of_line = lf</span><br><span class="line">charset = utf-8</span><br><span class="line">trim_trailing_whitespace = true</span><br><span class="line">insert_final_newline = true</span><br><span class="line"></span><br><span class="line">[*.md]</span><br><span class="line">trim_trailing_whitespace = false</span><br><span class="line"></span><br><span class="line">[Makefile]</span><br><span class="line">indent_style = tab</span><br></pre></td></tr></table></figure><h3 id="lint-staged"><a href="#lint-staged" class="headerlink" title="lint-staged"></a>lint-staged</h3><p>å®‰è£… lint-stagedï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add lint-staged -D</span><br></pre></td></tr></table></figure><p>åœ¨ <code>package.json</code> æ–‡ä»¶ä¸­å¦‚ä¸‹é…ç½®å³å¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;gitHooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;pre-commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;commit-msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commitlint -e -V&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;js,jsx,ts,tsx&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;eslint --fix&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;md,json&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;prettier --write&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="antd-å¼€å‘"><a href="#antd-å¼€å‘" class="headerlink" title="antd å¼€å‘"></a>antd å¼€å‘</h2><h3 id="å®‰è£…ä¾èµ–-1"><a href="#å®‰è£…ä¾èµ–-1" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add antd</span><br></pre></td></tr></table></figure><h3 id="NextJS-ä½¿ç”¨-Less-ç¼–è¯‘-Antd"><a href="#NextJS-ä½¿ç”¨-Less-ç¼–è¯‘-Antd" class="headerlink" title="NextJS ä½¿ç”¨ Less ç¼–è¯‘ Antd"></a>NextJS ä½¿ç”¨ Less ç¼–è¯‘ Antd</h3><p>ä½¿ç”¨ yarn å®‰è£… next-with-less åŒ…ï¼Œå¹¶é¡ºå¸¦æœ€æ–°ç‰ˆæœ¬çš„ less å’Œ less-loaderï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add next-with-less less less-loader -D</span><br></pre></td></tr></table></figure><p>å¹¶ä¿®æ”¹ <code>next.config.js</code> é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// next.config.js</span></span><br><span class="line"><span class="keyword">const</span> withLess = <span class="built_in">require</span>(<span class="string">&quot;next-with-less&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;next&#x27;).NextConfig</span>&#125; */</span></span><br><span class="line"><span class="keyword">let</span> config = &#123;</span><br><span class="line">  <span class="attr">reactStrictMode</span>: <span class="literal">true</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">config = <span class="title function_">withLess</span>(&#123;</span><br><span class="line">  ...config,</span><br><span class="line">  <span class="attr">lessLoaderOptions</span>: &#123;</span><br><span class="line">    <span class="attr">lessOptions</span>: &#123;</span><br><span class="line">      <span class="attr">modifyVars</span>: &#123;</span><br><span class="line">        <span class="string">&quot;@primary-color&quot;</span>: <span class="string">&quot;#f74a49&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@border-radius-base&quot;</span>: <span class="string">&quot;.5em&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = config</span><br></pre></td></tr></table></figure><h3 id="å¼•å…¥-antd-less"><a href="#å¼•å…¥-antd-less" class="headerlink" title="å¼•å…¥ antd less"></a>å¼•å…¥ antd less</h3><p>åœ¨ <code>pages/_app.tsx</code> ä¸­å¼•å…¥ less</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;antd/lib/style/themes/default.less&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;antd/dist/antd.less&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-dayjs-æ›¿æ¢-moment-js"><a href="#ä½¿ç”¨-dayjs-æ›¿æ¢-moment-js" class="headerlink" title="ä½¿ç”¨ dayjs æ›¿æ¢ moment.js"></a>ä½¿ç”¨ dayjs æ›¿æ¢ moment.js</h3><p>æŒ‰ç…§ <a href="https://ant.design/docs/react/replace-moment-cn#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6">è‡ªå®šä¹‰ç»„ä»¶</a> çš„æ–¹å¼è‡ªå®šä¹‰ç»„ä»¶åœ¨ Next.js ä¸­æ˜¯ä¸å¤Ÿçš„ï¼Œéœ€è¦ä½¿ç”¨ next-transpile-modules åšè¿›ä¸€æ­¥çš„å¤„ç†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// next.config.js</span></span><br><span class="line"><span class="keyword">const</span> withTM = <span class="built_in">require</span>(<span class="string">&#x27;next-transpile-modules&#x27;</span>)([</span><br><span class="line">  <span class="string">&#x27;rc-picker&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;rc-util&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;antd&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;rc-pagination&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;rc-notification&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;@ant-design/icons&#x27;</span>,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;next&#x27;).NextConfig</span>&#125; */</span></span><br><span class="line"><span class="keyword">let</span> config = &#123;</span><br><span class="line">  <span class="attr">reactStrictMode</span>: <span class="literal">true</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">config = <span class="title function_">withTM</span>(config);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = config</span><br></pre></td></tr></table></figure><p>åœ¨ <code>_app.tsx</code> ä¸­åˆå§‹åŒ– dayjsï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ– dayjs</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dayjs/locale/zh-cn&#x27;</span>;</span><br><span class="line">dayjs.<span class="title function_">locale</span>(<span class="string">&#x27;zh-cn&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h3><p>å¸ƒå±€ä½¿ç”¨çš„æ˜¯ antd çš„ Layoutï¼Œæˆ‘é€‰ç”¨çš„æ˜¯ä¾§è¾¹æ å¸ƒå±€ã€‚</p><h4 id="Layout-tsx"><a href="#Layout-tsx" class="headerlink" title="Layout.tsx"></a>Layout.tsx</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Layout</span>, <span class="title class_">Menu</span>, <span class="title class_">Breadcrumb</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Sider</span> <span class="keyword">from</span> <span class="string">&#x27;./Sider&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Header</span>, <span class="title class_">Content</span>, <span class="title class_">Footer</span> &#125; = <span class="title class_">Layout</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">AppLayout</span> = (<span class="params">&#123;children&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">minHeight:</span> &#x27;<span class="attr">100vh</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Sider</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Layout</span> <span class="attr">className</span>=<span class="string">&quot;site-layout&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Header</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">padding:</span> <span class="attr">0</span>, <span class="attr">backgroundColor:</span> &#x27;#<span class="attr">ffffff</span>&#x27; &#125;&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Content</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">margin:</span> &#x27;<span class="attr">0</span> <span class="attr">16px</span>&#x27; &#125;&#125;&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Footer</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            Crypto Meta Â©2021 Powered by&#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">className</span>=<span class="string">&quot;default&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://nextjs.org/&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noreferrer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              Next.js</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Sider-tsx"><a href="#Sider-tsx" class="headerlink" title="Sider.tsx"></a>Sider.tsx</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Layout</span>, <span class="title class_">Menu</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;next/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Link</span> <span class="keyword">from</span> <span class="string">&#x27;next/link&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> menus <span class="keyword">from</span> <span class="string">&#x27;config/menus&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Sider</span> &#125; = <span class="title class_">Layout</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">AppSider</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line">  <span class="keyword">const</span> [collapsed, setCollapsed] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onCollapse</span> = (<span class="params">collapsed: <span class="built_in">boolean</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCollapsed</span>(collapsed);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Sider</span> <span class="attr">breakpoint</span>=<span class="string">&quot;lg&quot;</span> <span class="attr">collapsible</span> <span class="attr">collapsed</span>=<span class="string">&#123;collapsed&#125;</span> <span class="attr">onCollapse</span>=<span class="string">&#123;onCollapse&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Menu</span> <span class="attr">theme</span>=<span class="string">&quot;dark&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;inline&quot;</span> <span class="attr">selectedKeys</span>=<span class="string">&#123;[router.pathname]&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;menus.map(menu =&gt; (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&#123;menu.route&#125;</span> <span class="attr">icon</span>=<span class="string">&#123;menu.icon&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">Link</span> <span class="attr">href</span>=<span class="string">&#123;menu.route&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">a</span>&gt;</span>&#123;menu.name&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          ))&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Menu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Sider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">AppSider</span>;</span><br></pre></td></tr></table></figure><h4 id="config-x2F-menus-tsx"><a href="#config-x2F-menus-tsx" class="headerlink" title="config&#x2F;menus.tsx"></a>config&#x2F;menus.tsx</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">route</span>: <span class="string">&#x27;/cryptoyou&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Crypto You&#x27;</span>,</span><br><span class="line">    <span class="attr">icon</span>: (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/youngjuning/images/202112081051602.png&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">width</span>=<span class="string">&quot;30&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&quot;thecryptoyou&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line">    ),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">route</span>: <span class="string">&#x27;/squid&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Squid NFT&#x27;</span>,</span><br><span class="line">    <span class="attr">icon</span>: (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/youngjuning/images/202112082111091.png&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">width</span>=<span class="string">&quot;30&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&quot;thecryptoyou&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line">    ),</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="å›½é™…åŒ–"><a href="#å›½é™…åŒ–" class="headerlink" title="å›½é™…åŒ–"></a>å›½é™…åŒ–</h3><p>antd æä¾›äº†ä¸€ä¸ª React ç»„ä»¶ ConfigProvider ç”¨äºå…¨å±€é…ç½®å›½é™…åŒ–æ–‡æ¡ˆã€‚æ–°å»º <code>components/Layout/Provider.tsx</code>ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ConfigProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> zhCN <span class="keyword">from</span> <span class="string">&#x27;antd/lib/locale/zh_CN&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Provider</span> = (<span class="params">&#123; children &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ConfigProvider</span> <span class="attr">locale</span>=<span class="string">&#123;zhCN&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">ConfigProvider</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Provider</span>;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>components/Layout/index.tsx</code> ä¸­å¼•å…¥ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Provider</span> <span class="keyword">from</span> <span class="string">&#x27;./Provider&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">AppLayout</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      // ...</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¢åŒ…å±‘å¯¼èˆª"><a href="#é¢åŒ…å±‘å¯¼èˆª" class="headerlink" title="é¢åŒ…å±‘å¯¼èˆª"></a>é¢åŒ…å±‘å¯¼èˆª</h3><p>å‚è€ƒ <a href="https://stackoverflow.com/questions/64541235/breadcrumbs-and-nextjs">Breadcrumbs and NextJS</a> å°è£…äº†ä¸€ä¸ª Breadcrumb ç»„ä»¶ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Breadcrumbs</span> <span class="keyword">from</span> <span class="string">&#x27;nextjs-antd-breadcrumbs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Example</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Breadcrumbs</span> <span class="attr">rootLabel</span>=<span class="string">&quot;Home&quot;</span> <span class="attr">omitRootLabel</span>=<span class="string">&#123;false&#125;/</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Next-js-å¼€å‘"><a href="#Next-js-å¼€å‘" class="headerlink" title="Next.js å¼€å‘"></a>Next.js å¼€å‘</h2><h3 id="åŸºäºæ ¹ç›®å½•å¯¼å…¥æ¨¡å—"><a href="#åŸºäºæ ¹ç›®å½•å¯¼å…¥æ¨¡å—" class="headerlink" title="åŸºäºæ ¹ç›®å½•å¯¼å…¥æ¨¡å—"></a>åŸºäºæ ¹ç›®å½•å¯¼å…¥æ¨¡å—</h3><p><code>baseUrl</code> é…ç½®é€‰é¡¹å…è®¸æ‚¨ç›´æ¥ä»é¡¹ç›®çš„æ ¹ç›®å½•å¯¼å…¥ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.json or jsconfig.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="æ¨¡å—è·¯å¾„åˆ«å"><a href="#æ¨¡å—è·¯å¾„åˆ«å" class="headerlink" title="æ¨¡å—è·¯å¾„åˆ«å"></a>æ¨¡å—è·¯å¾„åˆ«å</h3><p>åœ¨ tsconfig.json ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;@/components/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;./components/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å…¶ä»–çš„åœ°å€ä¾è‘«èŠ¦ç”»ç“¢åŠ åˆ° paths å¯¹è±¡ä¸­å³å¯ã€‚</p><h3 id="redirects-æ°¸ä¹…é‡å®šå‘"><a href="#redirects-æ°¸ä¹…é‡å®šå‘" class="headerlink" title="redirects æ°¸ä¹…é‡å®šå‘"></a>redirects æ°¸ä¹…é‡å®šå‘</h3><p>æ°¸ä¹…é‡å®šå‘ä¸åŒäºé‡å†™è·¯ç”±ï¼Œå®ƒä¼šåœ¨ url ä¸­è¡¨ç°å‡ºæ¥ï¼Œåœ¨ Next.js ä¸­é‡å®šå‘æ˜¯åœ¨ <code>next.config.js</code> ä¸­é…ç½®çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> config = &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">redirects</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">source</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">destination</span>: <span class="string">&#x27;/cryptoyou&#x27;</span>,</span><br><span class="line">        <span class="attr">permanent</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ];</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = config;</span><br></pre></td></tr></table></figure><h3 id="åœ¨-pages-ç›®å½•åŒ…å«éé¡µé¢æ–‡ä»¶"><a href="#åœ¨-pages-ç›®å½•åŒ…å«éé¡µé¢æ–‡ä»¶" class="headerlink" title="åœ¨ pages ç›®å½•åŒ…å«éé¡µé¢æ–‡ä»¶"></a>åœ¨ pages ç›®å½•åŒ…å«éé¡µé¢æ–‡ä»¶</h3><p>è¦æŠŠæµ‹è¯•æ–‡ä»¶ã€ç”Ÿæˆçš„æ–‡ä»¶æˆ–å…¶ä»–ç»„ä»¶ä½¿ç”¨çš„æ–‡ä»¶æ”¾åœ¨ <code>pages</code> ç›®å½•ä¸­ï¼Œä½ å¯ä»¥åœ¨æ‰©å±•åå‰åŠ ä¸Šç±»ä¼¼ <code>page</code> çš„å­—æ ·ã€‚</p><p>æ‰“å¼€ <code>next.config.js</code> å¹¶æ·»åŠ  <code>pageExtensions</code> é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">pageExtensions</span>: [<span class="string">&#x27;page.tsx&#x27;</span>, <span class="string">&#x27;page.ts&#x27;</span>, <span class="string">&#x27;page.jsx&#x27;</span>, <span class="string">&#x27;page.js&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åé‡å‘½åä½ çš„é¡µé¢ï¼Œä½¿å…¶æœ‰ä¸€ä¸ªåŒ…æ‹¬ <code>.page</code> çš„æ–‡ä»¶æ‰©å±•åï¼ˆä¾‹å¦‚ï¼Œé‡å‘½å <code>MyPage.tsx</code> ä¸º<code>MyPage.page.tsx</code>ï¼‰ã€‚</p><blockquote><p>æ³¨æ„ï¼šç¡®ä¿ä½ ä¹Ÿé‡å‘½å <code>_document.js</code>ã€<code>_app.js</code>ã€<code>_middleware.js</code>ï¼Œä»¥åŠ <code>pages/api/</code> ä¸‹çš„æ–‡ä»¶ã€‚</p></blockquote><h3 id="styled-jsx"><a href="#styled-jsx" class="headerlink" title="styled-jsx"></a>styled-jsx</h3><p>next.js å†…ç½®æ”¯æŒ styled-jsxï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯é…ç½®æ”¯æŒ sassï¼Œé¦–å…ˆå®‰è£… <code>@styled-jsx/plugin-sass</code>ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @styled-jsx/plugin-sass sass node-sass -D</span><br></pre></td></tr></table></figure><p>ç„¶åé…ç½® <code>.babelrc</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;next/babel&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;styled-jsx&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@styled-jsx/plugin-sass&quot;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¼€å¯ babel åï¼Œä¼šè‡ªåŠ¨ç¦ç”¨ swcï¼Œç›®å‰è¿˜æ²¡æœ‰ swc çš„æ”¯æŒæ–¹æ¡ˆï¼Œè¿›åº¦è¯·å…³æ³¨ <a href="https://github.com/Thream/styled-jsx-plugin-sass/issues/100">[Improvement] Next.JS 12 support + SWC</a></p></blockquote><h3 id="è‡ªå®šä¹‰é”™è¯¯é¡µé¢"><a href="#è‡ªå®šä¹‰é”™è¯¯é¡µé¢" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯é¡µé¢"></a>è‡ªå®šä¹‰é”™è¯¯é¡µé¢</h3><h4 id="404-tsx"><a href="#404-tsx" class="headerlink" title="404.tsx"></a>404.tsx</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Result</span>, <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Link</span> <span class="keyword">from</span> <span class="string">&#x27;next/link&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Custom404</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Result</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">status</span>=<span class="string">&quot;404&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&quot;404&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">subTitle</span>=<span class="string">&quot;Sorry, the page you visited does not exist.&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">extra</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &lt;<span class="attr">Button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span>&gt;</span>è¿”å›é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#125;</span></span><br><span class="line"><span class="language-xml">    /&gt;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="500-tsx"><a href="#500-tsx" class="headerlink" title="500.tsx"></a>500.tsx</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Result</span>, <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Link</span> <span class="keyword">from</span> <span class="string">&#x27;next/link&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Custom500</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Result</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">status</span>=<span class="string">&quot;500&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">title</span>=<span class="string">&quot;500&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">subTitle</span>=<span class="string">&quot;Sorry, something went wrong.&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">extra</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &lt;<span class="attr">Button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span>&gt;</span>è¿”å›é¦–é¡µ<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#125;</span></span><br><span class="line"><span class="language-xml">    /&gt;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Dapp"><a href="#Dapp" class="headerlink" title="Dapp"></a>Dapp</h2><h3 id="å°ç‹ç‹¸é’±åŒ…"><a href="#å°ç‹ç‹¸é’±åŒ…" class="headerlink" title="å°ç‹ç‹¸é’±åŒ…"></a>å°ç‹ç‹¸é’±åŒ…</h3><ol><li><a href="https://zhuanlan.zhihu.com/p/368736357">å°ç‹ç‹¸é’±åŒ…MetaMaskæ–°æ‰‹ä½¿ç”¨æ•™ç¨‹</a></li><li><a href="https://blog.csdn.net/qq_33583069/article/details/115727642?ivk_sa=1024320u">ä½¿ç”¨MetaMaskè¿æ¥åˆ°å¸å®‰æ™ºèƒ½é“¾(BSC)</a></li></ol><h3 id="usedapp-x2F-core"><a href="#usedapp-x2F-core" class="headerlink" title="@usedapp&#x2F;core"></a>@usedapp&#x2F;core</h3><h4 id="å®‰è£…ä¾èµ–-2"><a href="#å®‰è£…ä¾èµ–-2" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add @usedapp/core</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®-Provider"><a href="#è®¾ç½®-Provider" class="headerlink" title="è®¾ç½® Provider"></a>è®¾ç½® Provider</h4><p>ä½ éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ç”¨å¯é€‰çš„é…ç½®è®¾ç½® DAppProviderï¼Œå¹¶å°†ä½ çš„æ•´ä¸ªåº”ç”¨ç¨‹åºåŒ…è£¹åœ¨å…¶ä¸­ã€‚æœ¬æ–‡ä¸­æˆ‘ä»¬ç¼–è¾‘ <code>components/Layout/Provider.tsx</code>ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DAppProvider</span>, <span class="title class_">Config</span>, <span class="title class_">ChainId</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@usedapp/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">config</span>: <span class="title class_">Config</span> = &#123;</span><br><span class="line">  <span class="attr">readOnlyChainId</span>: <span class="title class_">ChainId</span>.<span class="property">BSC</span>,</span><br><span class="line">  <span class="attr">readOnlyUrls</span>: &#123;</span><br><span class="line">    [<span class="title class_">ChainId</span>.<span class="property">BSC</span>]: <span class="string">&#x27;https://bsc-dataseed1.binance.org/&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Provider</span> = (<span class="params">&#123; children &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">DAppProvider</span> <span class="attr">config</span>=<span class="string">&#123;config&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">DAppProvider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Provider</span>;</span><br></pre></td></tr></table></figure><h4 id="è¿æ¥é’±åŒ…"><a href="#è¿æ¥é’±åŒ…" class="headerlink" title="è¿æ¥é’±åŒ…"></a>è¿æ¥é’±åŒ…</h4><p>ç„¶åä½ éœ€è¦ä½¿ç”¨ activateBrowserWallet æ¥æ¿€æ´» providerã€‚æœ€å¥½æ˜¯åœ¨ç”¨æˆ·ç‚¹å‡» â€œConnectâ€ æŒ‰é’®æ—¶è¿›è¡Œã€‚æœ¬æ–‡ä¸­æˆ‘ä»¬æ–°å»ºç»„ä»¶ <code>components/ConnectButton.tsx</code>ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEthers &#125; <span class="keyword">from</span> <span class="string">&#x27;@usedapp/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LoginOutlined</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ConnectButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; activateBrowserWallet &#125; = <span class="title function_">useEthers</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleConnectWallet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">activateBrowserWallet</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">icon</span>=<span class="string">&#123;</span>&lt;<span class="attr">LoginOutlined</span> /&gt;</span>&#125; onClick=&#123;handleConnectWallet&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      Connect MetaMask</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">ConnectButton</span>;</span><br></pre></td></tr></table></figure><h4 id="é’±åŒ…ä½™é¢"><a href="#é’±åŒ…ä½™é¢" class="headerlink" title="é’±åŒ…ä½™é¢"></a>é’±åŒ…ä½™é¢</h4><p><code>useEtherBalance(address: string)</code></p><p>æä¾›ä¸€ç§è·å–è´¦æˆ·ä½™é¢çš„æ–¹æ³•ã€‚ä»¥è´¦æˆ·åœ°å€ä¸ºå‚æ•°ï¼Œå½“æ•°æ®ä¸å¯ç”¨æ—¶ï¼ˆå³æœªè¿æ¥ï¼‰ï¼Œè¿”å› Â·<code>BigNumber</code> æˆ– <code>undefined</code>ã€‚è¦è·å¾—å½“å‰è¿æ¥çš„è´¦æˆ·ï¼Œè¯·ä½¿ç”¨ <code>useEthers()</code>ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; formatEther &#125; <span class="keyword">from</span> <span class="string">&#x27;@ethersproject/units&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">EtherBalance</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; account &#125; = <span class="title function_">useEthers</span>()</span><br><span class="line">  <span class="keyword">const</span> etherBalance = <span class="title function_">useEtherBalance</span>(account)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;etherBalance &amp;&amp; <span class="tag">&lt;<span class="name">p</span>&gt;</span>Balance: &#123;formatEther(etherBalance)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä»£å¸ä½™é¢"><a href="#ä»£å¸ä½™é¢" class="headerlink" title="ä»£å¸ä½™é¢"></a>ä»£å¸ä½™é¢</h4><p><code>useTokenBalance(address: string, tokenAddress: string)</code></p><p>æä¾›ä¸€ç§æ–¹æ³•æ¥è·å–ç”± <code>tokenAddress</code> æŒ‡å®šçš„ ERC20 ä»£å¸åœ¨æ‰€æä¾›åœ°å€çš„ä½™é¢ã€‚å½“æ•°æ®ä¸å¯ç”¨æ—¶ï¼Œè¿”å› <code>BigNumber</code> æˆ– <code>undefined</code>ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; formatUnits &#125; <span class="keyword">from</span> <span class="string">&#x27;@ethersproject/units&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">BABY</span> = <span class="string">&#x27;0x53e562b9b7e5e94b81f10e96ee70ad06df3d2657&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">TokenBalance</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; account &#125; = <span class="title function_">useEthers</span>()</span><br><span class="line">  <span class="keyword">const</span> tokenBalance = <span class="title function_">useTokenBalance</span>(<span class="variable constant_">BABY</span>, account)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;tokenBalance &amp;&amp; <span class="tag">&lt;<span class="name">p</span>&gt;</span>BABY: &#123;formatUnits(tokenBalance, 18)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul><li><a href="https://dev.to/jacobedawson/build-a-web3-dapp-in-react-login-with-metamask-4chp">Build a Web3 Dapp in React &amp; Login with MetaMask</a></li></ul><h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><h3 id="GitHub-Pages"><a href="#GitHub-Pages" class="headerlink" title="GitHub Pages"></a>GitHub Pages</h3><p>å¦‚æœæ˜¯ vercel ä»˜è´¹ç”¨æˆ·ï¼Œæ¨èä½¿ç”¨ vercelã€‚GitHub Pages åªèƒ½éƒ¨ç½²é™æ€å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ <code>next export</code> å°†é™æ€å†…å®¹å¯¼å‡ºéƒ¨ç½²ã€‚</p><p>é¦–å…ˆé…ç½® npm scriptsï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;preexport&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn build&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;export&quot;</span><span class="punctuation">:</span> <span class="string">&quot;next export&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>ç„¶åæ·»åŠ  <code>.github/workflows/gh-pages.yml</code>ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">github</span> <span class="string">pages</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span> <span class="comment"># default branch</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-18.04</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">c-hive/gha-yarn-cache@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">--non-interactive</span> <span class="string">--silent</span> <span class="string">--ignore-scripts</span> <span class="string">--production=false</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Website</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">export</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Website</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">personal_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PERSONAL_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">external_repository:</span> <span class="string">crypto-meta/crypto-meta.github.io</span></span><br><span class="line">          <span class="attr">publish_dir:</span> <span class="string">./out</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é¡¹ç›®åˆå§‹åŒ–&quot;&gt;&lt;a href=&quot;#é¡¹ç›®åˆå§‹åŒ–&quot; class=&quot;headerlink&quot; title=&quot;é¡¹ç›®åˆå§‹åŒ–&quot;&gt;&lt;/a&gt;é¡¹ç›®åˆå§‹åŒ–&lt;/h2&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p</summary>
      
    
    
    
    <category term="åŒºå—é“¾" scheme="https://youngjuning.js.org/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    
    <category term="Next.js" scheme="https://youngjuning.js.org/tags/Next-js/"/>
    
    <category term="BSC" scheme="https://youngjuning.js.org/tags/BSC/"/>
    
    <category term="DApp" scheme="https://youngjuning.js.org/tags/DApp/"/>
    
  </entry>
  
</feed>
