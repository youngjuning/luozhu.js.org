<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ´›ç«¹çš„åšå®¢</title>
  
  <subtitle>çœŸç†æ— ç©·ï¼Œä¸€å¯¸æ¬¢å–œã€‚</subtitle>
  <link href="https://youngjuning.js.org/atom.xml" rel="self"/>
  
  <link href="https://youngjuning.js.org/"/>
  <updated>2023-03-13T01:05:01.402Z</updated>
  <id>https://youngjuning.js.org/</id>
  
  <author>
    <name>æ´›ç«¹</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å¦‚ä½•åœ¨çœ‹åˆ° &quot;EADDRINUSE: address already in use&quot; æ—¶æ€æ­»è¿›ç¨‹</title>
    <link href="https://youngjuning.js.org/4475c84c4024/"/>
    <id>https://youngjuning.js.org/4475c84c4024/</id>
    <published>2023-03-09T18:25:43.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>å½“ä½ å°è¯•é‡å¯ä¸€ä¸ª Node åº”ç”¨æ—¶ï¼Œä¸Šä¸€ä¸ªåº”ç”¨æ²¡æœ‰æ­£ç¡®å…³é—­ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°ä¸€ä¸ªâ€œlisten EADDRINUSE: address already in useâ€é”™è¯¯ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">â‡’  npm start</span><br><span class="line">&gt; react-app-es6-jest@0.0.1 start /Users/admin/Code/WorkSpace/react-app-es6-jest</span><br><span class="line">&gt; concurrently <span class="string">&quot;npm run start:server&quot;</span> <span class="string">&quot;npm run start:client&quot;</span></span><br><span class="line"></span><br><span class="line">[0]</span><br><span class="line">[0] &gt; react-app-es6-jest@0.0.1 start:server /Users/admin/Code/WorkSpace/react-app-es6-jest</span><br><span class="line">[0] &gt; nodemon src/server/index.js --watch src/server -e js --<span class="built_in">exec</span> babel-node</span><br><span class="line">[0]</span><br><span class="line">[0] [nodemon] 2.0.1</span><br><span class="line">[0] [nodemon] to restart at any time, enter `rs`</span><br><span class="line">[0] [nodemon] watching <span class="built_in">dir</span>(s): src/server/**/*</span><br><span class="line">[0] [nodemon] watching extensions: js</span><br><span class="line">[0] [nodemon] starting `babel-node src/server/index.js`</span><br><span class="line">[0] events.js:174</span><br><span class="line">[0]       throw er; // Unhandled <span class="string">&#x27;error&#x27;</span> event</span><br><span class="line">[0]       ^</span><br><span class="line">[0]</span><br><span class="line">[0] Error: listen EADDRINUSE: address already <span class="keyword">in</span> use :::3000</span><br><span class="line">[0]     at Server.setupListenHandle [as _listen2] (net.js:1279:14)</span><br><span class="line">[0]     at listenInCluster (net.js:1327:12)</span><br><span class="line">[0]     at Server.listen (net.js:1414:7)</span><br><span class="line">[0]     at Function.listen (/Users/admin/Code/WorkSpace/react-app-es6-jest/node_modules/express/lib/application.js:618:24)</span><br><span class="line">[0] [nodemon] app crashed - waiting <span class="keyword">for</span> file changes before starting...</span><br></pre></td></tr></table></figure><h1 id="é—®é¢˜èƒŒåçš„åŸå› "><a href="#é—®é¢˜èƒŒåçš„åŸå› " class="headerlink" title="é—®é¢˜èƒŒåçš„åŸå› "></a>é—®é¢˜èƒŒåçš„åŸå› </h1><p><code>process.on(&#39;exit&#39;, ...)</code> ä¸ä¼šåœ¨è¿›ç¨‹å´©æºƒæˆ–è¢«æ€æ­»æ—¶è°ƒç”¨ã€‚å®ƒåªåœ¨äº‹ä»¶å¾ªç¯ç»“æŸæ—¶è°ƒç”¨ï¼Œå› ä¸º <code>server.close()</code> ä¼šç»“æŸäº‹ä»¶å¾ªç¯ï¼ˆå®ƒä»ç„¶å¿…é¡»ç­‰å¾…å½“å‰è¿è¡Œçš„å †æ ˆï¼‰ï¼Œæ‰€ä»¥å°†å…¶æ”¾åœ¨ exit äº‹ä»¶ä¸­æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p><blockquote><p>è¯‘è€…æ³¨ï¼šæœ‰æ—¶å€™ç›´æ¥å…³é—­ vscode ä¼šå¯¼è‡´è¿›ç¨‹æ²¡æœ‰æ­£ç¡®å…³é—­ï¼Œè¿™æ—¶å€™ä¹Ÿå¯èƒ½ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚</p></blockquote><h1 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h1><p>è¯¥åº”ç”¨ç¨‹åºçš„æ­£ç¡®ä¿®å¤æ˜¯</p><ul><li>åœ¨ <code>server.listen()</code> ä¹‹å‰æ£€æŸ¥ç«¯å£æ˜¯å¦å·²ç»è¢«å ç”¨</li><li>åœ¨å´©æºƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>process.on(&#39;uncaughtException&#39;, ..)</code> è¿›è¡Œå¤„ç†ã€‚</li><li>åœ¨ kill æ“ä½œä¸Šï¼Œå¯ä»¥ä½¿ç”¨ <code>process.on(&#39;SIGTERM&#39;, ..)</code> è¿›è¡Œå¤„ç†ã€‚</li></ul><p>å½“å‡ºç° EADDRINUSE é—®é¢˜æ—¶ï¼Œä¸ºäº†è§£å†³å®ƒï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨ç»ˆæ­¢è¯¥è¿›ç¨‹ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦æ‰¾åˆ°è¿›ç¨‹çš„è¿›ç¨‹ IDï¼ˆPIDï¼‰ã€‚æ‚¨çŸ¥é“è¯¥è¿›ç¨‹å ç”¨äº†æœºå™¨æˆ–æœåŠ¡å™¨ä¸Šçš„ç‰¹å®šç«¯å£ã€‚</p><h2 id="æ‰‹åŠ¨æ€æ­»è¿›ç¨‹"><a href="#æ‰‹åŠ¨æ€æ­»è¿›ç¨‹" class="headerlink" title="æ‰‹åŠ¨æ€æ­»è¿›ç¨‹"></a>æ‰‹åŠ¨æ€æ­»è¿›ç¨‹</h2><h3 id="Mac-x2F-Linux"><a href="#Mac-x2F-Linux" class="headerlink" title="Mac&#x2F;Linux"></a>Mac&#x2F;Linux</h3><p>æ‰¾åˆ°ä¸è¯¥ç«¯å£å…³è”çš„è¿›ç¨‹IDï¼ˆPIDï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ lsof -i tcp:3000</span><br><span class="line">COMMAND PID   USER  FD  TYPE DEVICE             SIZE/OFF NODE NAME</span><br><span class="line">node    44475 chen5 31u IPv4 0x8b1721168764e4bf 0t0 TCP *:strexec-s (LISTEN)</span><br></pre></td></tr></table></figure><p>è¿™å°†è¿”å›ä½¿ç”¨è¯¥ç«¯å£çš„ä»»ä½•è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬PIDã€‚ç„¶åå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ€æ­»è¯¥è¿›ç¨‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">kill</span> -9 44475</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œ<code>-9</code> é€‰é¡¹å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹è€Œä¸è€ƒè™‘å…¶å½“å‰çŠ¶æ€ï¼Œå¹¶ç«‹å³ä½¿å…¶é€€å‡ºã€‚å½“éœ€è¦å¼ºåˆ¶å…³é—­ä¸€ä¸ªå·²ç»æŒ‚èµ·æˆ–å æ®ç«¯å£çš„è¿›ç¨‹æ—¶ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨æ­¤é€‰é¡¹ã€‚</p><p>å¦‚æœä½ é‡åˆ°æƒé™é—®é¢˜ï¼Œè¯·å°è¯•åœ¨å‘½ä»¤å‰åŠ ä¸Šsudoã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">kill</span> -9 44475</span><br></pre></td></tr></table></figure><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><h4 id="è§£å†³æ–¹æ¡ˆ-1ï¼šä»»åŠ¡ç®¡ç†å™¨"><a href="#è§£å†³æ–¹æ¡ˆ-1ï¼šä»»åŠ¡ç®¡ç†å™¨" class="headerlink" title="è§£å†³æ–¹æ¡ˆ 1ï¼šä»»åŠ¡ç®¡ç†å™¨"></a>è§£å†³æ–¹æ¡ˆ 1ï¼šä»»åŠ¡ç®¡ç†å™¨</h4><p>æ‰“å¼€â€œä»»åŠ¡ç®¡ç†å™¨â€åº”ç”¨ç¨‹åº (taskman.exe)ï¼Œä»è¿›ç¨‹æˆ–æœåŠ¡é€‰é¡¹å¡æ ¹æ® PID åˆ—è¿›è¡Œæ’åºã€‚è¦æ˜¾ç¤º PID åˆ—ï¼Œè¯·å³é”®å•å‡»æ ‡å¤´è¡Œå¹¶ä»åˆ—è¡¨ä¸­é€‰æ‹© PIDã€‚å³é”®å•å‡»è¦åœæ­¢çš„è¿›ç¨‹ï¼Œç„¶åé€‰æ‹©â€œç»“æŸä»»åŠ¡â€</p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1678416348850.png" alt="example in Windows, source from Internet"></p><h4 id="è§£å†³æ–¹æ¡ˆ-2ï¼šå‘½ä»¤è¡Œ"><a href="#è§£å†³æ–¹æ¡ˆ-2ï¼šå‘½ä»¤è¡Œ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ 2ï¼šå‘½ä»¤è¡Œ"></a>è§£å†³æ–¹æ¡ˆ 2ï¼šå‘½ä»¤è¡Œ</h4><p>ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€CMDï¼ˆå‘½ä»¤æç¤ºç¬¦ï¼‰çª—å£ï¼Œé€šè¿‡å¯¼èˆªåˆ° <code>å¼€å§‹ &gt; è¿è¡Œ &gt; è¾“å…¥cmd &gt; å³é”®å•å‡»â€œå‘½ä»¤æç¤ºç¬¦â€</code>ï¼Œç„¶åé€‰æ‹©â€œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€æ‰“å¼€ ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1678416450947.png" alt="source from Google Search"></p><p>å¯ä»¥ä½¿ç”¨å‘½ä»¤æç¤ºç¬¦æ¥æŸ¥æ‰¾ä¸ç‰¹å®šç«¯å£ç›¸å…³çš„è¿›ç¨‹IDã€‚åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹æ‰“å¼€CMDçª—å£ï¼Œç„¶åä½¿ç”¨â€ netstat â€œå‘½ä»¤æ¥è·å–æ‰€æœ‰å¤„äºæ´»åŠ¨çŠ¶æ€çš„ç«¯å£ä»¥åŠå ç”¨è€…çš„è¿›ç¨‹IDã€‚ä»¥ä¸‹æ˜¯è¦ä½¿ç”¨çš„å®Œæ•´å‘½ä»¤:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -ano|findstr <span class="string">&quot;PID :3000&quot;</span></span><br><span class="line">Proto Local Address Foreign Address State PID</span><br><span class="line">TCP 0.0.0.0:3000 0.0.0.0:0 LISTENING 18264</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>-a</code> é€‰é¡¹æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨ä½¿ç”¨çš„ç«¯å£ï¼ˆè€Œä¸ä»…ä»…æ˜¯ä¸å½“å‰ç”¨æˆ·ç›¸å…³çš„ç«¯å£ï¼‰ã€‚<code>-n</code> é€‰é¡¹åœæ­¢ä¸»æœºåæŸ¥è¯¢ï¼ˆè¿™éœ€è¦å¾ˆé•¿æ—¶é—´ï¼‰ã€‚<code>-o</code> é€‰é¡¹åˆ—å‡ºè´Ÿè´£ç«¯å£æ´»åŠ¨çš„è¿›ç¨‹ IDã€‚æœ€åï¼Œ<code>findstr</code> å‘½ä»¤åŒ¹é…åŒ…å« PID å­—ç¬¦ä¸²çš„æ ‡é¢˜è¡Œï¼Œå¹¶æŸ¥æ‰¾æŒ‡å®šçš„ç«¯å£ã€‚ä¾‹å¦‚ï¼Œ <code>PID :3000</code>ã€‚</p><p>ç„¶åç»ˆæ­¢æ­¤è¿›ç¨‹ï¼ˆ<code>/f</code> æ˜¯å¼ºåˆ¶ï¼‰ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ taskkill /pid 18264 /f</span><br></pre></td></tr></table></figure><blockquote><p>åŸæ–‡åœ°å€ï¼š<a href="https://114.li/jscdep">How to kill server when seeing â€œEADDRINUSE: address already in useâ€</a><br>åŸæ–‡ä½œè€…ï¼š<a href="https://bindichen.medium.com/">BChen</a><br>è¯‘æ–‡å‡ºè‡ªï¼š<a href="https://youngjuning.js.org/categories/%E6%B4%9B%E7%AB%B9%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/">æ´›ç«¹ç¿»è¯‘è®¡åˆ’</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜&quot;&gt;&lt;a href=&quot;#é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜&quot;&gt;&lt;/a&gt;é—®é¢˜&lt;/h1&gt;&lt;p&gt;å½“ä½ å°è¯•é‡å¯ä¸€ä¸ª Node åº”ç”¨æ—¶ï¼Œä¸Šä¸€ä¸ªåº”ç”¨æ²¡æœ‰æ­£ç¡®å…³é—­ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°ä¸€ä¸ªâ€œlisten EADDRINUSE: address alre</summary>
      
    
    
    
    <category term="æ´›ç«¹ç¿»è¯‘è®¡åˆ’" scheme="https://youngjuning.js.org/categories/%E6%B4%9B%E7%AB%B9%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/"/>
    
    <category term="ç¨‹åºå‘˜" scheme="https://youngjuning.js.org/categories/%E6%B4%9B%E7%AB%B9%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/%E7%A8%8B%E5%BA%8F%E5%91%98/"/>
    
    
    <category term="Node,EADDRINUSE,address already in use" scheme="https://youngjuning.js.org/tags/Node-EADDRINUSE-address-already-in-use/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäº lerna çš„å¤šåŒ… JavaScript é¡¹ç›®æ­å»ºç»´æŠ¤</title>
    <link href="https://youngjuning.js.org/4e0dc52b8e3c/"/>
    <id>https://youngjuning.js.org/4e0dc52b8e3c/</id>
    <published>2023-03-08T10:26:27.000Z</published>
    <updated>2023-03-13T01:05:01.406Z</updated>
    
    <content type="html"><![CDATA[<p>å°†å¤§å‹ä»£ç ä»“åº“åˆ†å‰²æˆå¤šä¸ªç‹¬ç«‹ç‰ˆæœ¬åŒ–çš„ è½¯ä»¶åŒ…ï¼ˆpackageï¼‰å¯¹äºä»£ç å…±äº«æ¥è¯´éå¸¸æœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæŸäº›æ›´æ”¹ è·¨è¶Šäº†å¤šä¸ªä»£ç ä»“åº“çš„è¯å°†å˜å¾—å¾ˆéº»çƒ¦å¹¶ä¸”éš¾ä»¥è·Ÿè¸ªï¼Œå¹¶ä¸”ï¼Œè·¨è¶Šå¤šä¸ªä»£ç ä»“åº“çš„æµ‹è¯•å°†è¿…é€Ÿå˜å¾—éå¸¸å¤æ‚ã€‚</p><p>ä¸ºäº†è§£å†³è¿™äº›ï¼ˆä»¥åŠè®¸å¤šå…¶å®ƒï¼‰é—®é¢˜ï¼ŒæŸäº›é¡¹ç›®ä¼šå°† ä»£ç ä»“åº“åˆ†å‰²æˆå¤šä¸ªè½¯ä»¶åŒ…ï¼ˆpackageï¼‰ï¼Œå¹¶å°†æ¯ä¸ªè½¯ä»¶åŒ…å­˜æ”¾åˆ°ç‹¬ç«‹çš„ä»£ç ä»“åº“ä¸­ã€‚ä½†æ˜¯ï¼Œä¾‹å¦‚ Babelã€ Reactã€Angularã€Emberã€Meteorã€Jest ç­‰é¡¹ç›®ä»¥åŠè®¸å¤šå…¶ä»–é¡¹ç›®åˆ™æ˜¯åœ¨ ä¸€ä¸ªä»£ç ä»“åº“ä¸­åŒ…å«äº†å¤šä¸ªè½¯ä»¶åŒ…ï¼ˆpackageï¼‰å¹¶è¿›è¡Œå¼€å‘ã€‚</p><p>Lerna æ˜¯ä¸€ç§å·¥å…·ï¼Œé’ˆå¯¹ ä½¿ç”¨ git å’Œ npm ç®¡ç†å¤šè½¯ä»¶åŒ…ä»£ç ä»“åº“çš„å·¥ä½œæµç¨‹è¿›è¡Œä¼˜åŒ–ã€‚</p><h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><h3 id="å…¨å±€å®‰è£…-lerna"><a href="#å…¨å±€å®‰è£…-lerna" class="headerlink" title="å…¨å±€å®‰è£… lerna"></a>å…¨å±€å®‰è£… lerna</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install lerna -g</span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–-lerna-é¡¹ç›®"><a href="#åˆå§‹åŒ–-lerna-é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ– lerna é¡¹ç›®"></a>åˆå§‹åŒ– lerna é¡¹ç›®</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ lerna init --independent</span><br></pre></td></tr></table></figure><p>ä½ çš„ä»£ç ä»“åº“ç›®å‰åº”è¯¥æ˜¯å¦‚ä¸‹ç»“æ„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lerna-repo/</span><br><span class="line">  packages/</span><br><span class="line">  package.json</span><br><span class="line">  lerna.json</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»º-package"><a href="#åˆ›å»º-package" class="headerlink" title="åˆ›å»º package"></a>åˆ›å»º package</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ lerna create module-1</span><br><span class="line">$ lerna create module-2</span><br></pre></td></tr></table></figure><h2 id="yarn-workspaces-amp-Lerna-Hoisting"><a href="#yarn-workspaces-amp-Lerna-Hoisting" class="headerlink" title="yarn workspaces &amp; Lerna Hoisting"></a>yarn workspaces &amp; Lerna Hoisting</h2><p>ä½¿ç”¨ <a href="https://yarnpkg.com/lang/zh-Hans/docs/workspaces/">yarn workspaces</a> ç»“åˆ Lerna <code>useWorkspaces</code> å¯ä»¥å®ç° <a href="https://github.com/lerna/lerna/blob/main/doc/hoist.md">Lerna Hoisting</a>ã€‚è¿™å¹¶ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾ï¼Œè¿™å¯ä»¥è®©ä½ åœ¨ç»Ÿä¸€çš„åœ°æ–¹ï¼ˆæ ¹ç›®å½•ï¼‰ç®¡ç†ä¾èµ–ï¼Œè¿™å³èŠ‚çœæ—¶é—´åˆèŠ‚çœç©ºé—´ã€‚</p><p>é…ç½® lerna.json:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;npmClient&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;useWorkspaces&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>é¡¶çº§ package.json å¿…é¡»åŒ…å«ä¸€ä¸ª workspaces æ•°ç»„:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;workspaces&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;packages/*&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="npm-registry"><a href="#npm-registry" class="headerlink" title="npm registry"></a>npm registry</h2><h3 id="æ­å»º-verdaccio"><a href="#æ­å»º-verdaccio" class="headerlink" title="æ­å»º verdaccio"></a>æ­å»º verdaccio</h3><blockquote><p>verdaccio æ˜¯ä¸€ä¸ªå¼€æºè½»é‡çš„ npm ç§æœ</p></blockquote><p>å…¨å±€å®‰è£…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install verdaccio -g</span><br></pre></td></tr></table></figure><p>é…ç½® <code>~/.config/verdaccio/config.yaml</code> uplinks:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># a list of other known repositories we can talk to</span></span><br><span class="line"><span class="attr">uplinks:</span></span><br><span class="line">  <span class="attr">npmjs:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://registry.npmjs.org/</span></span><br><span class="line">  <span class="attr">taobao:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://registry.npm.taobao.org/</span></span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®å¼€æœºè‡ªå¯åŠ¨"><a href="#è®¾ç½®å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="è®¾ç½®å¼€æœºè‡ªå¯åŠ¨"></a>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</h3><p>0ã€run <code>sudo npm i -g pm2</code></p><p>1ã€run <code>pm2 start verdaccio</code> &amp; <code>pm2 startup</code></p><p>outputs:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[PM2] Init System found: launchd</span><br><span class="line">[PM2] To setup the Startup Script, copy/paste the following <span class="built_in">command</span>:</span><br><span class="line">sudo <span class="built_in">env</span> PATH=<span class="variable">$PATH</span>:/usr/local/bin /usr/local/lib/node_modules/pm2/bin/pm2 startup launchd -u luozhu --hp /Users/luozhu</span><br></pre></td></tr></table></figure><p>2ã€run <code>sudo env PATH=$PATH:/usr/local/bin /usr/local/lib/node_modules/pm2/bin/pm2 startup launchd -u luozhu --hp /Users/luozhu</code></p><p>outputs:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[PM2] Freeze a process list on reboot via:</span><br><span class="line">$ pm2 save</span><br><span class="line"></span><br><span class="line">[PM2] Remove init script via:</span><br><span class="line">$ pm2 unstartup launchd</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹-lerna-publishConfig"><a href="#ä¿®æ”¹-lerna-publishConfig" class="headerlink" title="ä¿®æ”¹ lerna publishConfig"></a>ä¿®æ”¹ lerna publishConfig</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lerna.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;ignoreChanges&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;ignored-file&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;**/__tests__/**&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;**/*.md&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;publish&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;registry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:4873&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;conventionalCommits&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chore(release): publish&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¦‚æœå­åŒ…æ˜¯å¸¦ <code>scope</code> çš„ï¼Œéœ€è¦ä¸ºå­åŒ…è®¾ç½® <code>publishConfig.access</code></p></blockquote><h2 id="commitlint-amp-commitizen"><a href="#commitlint-amp-commitizen" class="headerlink" title="commitlint &amp; commitizen"></a>commitlint &amp; commitizen</h2><blockquote><p>è¯·å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç«  <a href="https://juejin.im/post/6877462747631026190">ä¸€æ–‡æå®šè§„èŒƒåŒ– Git Commit</a></p></blockquote><h2 id="å¼€å‘æµç¨‹"><a href="#å¼€å‘æµç¨‹" class="headerlink" title="å¼€å‘æµç¨‹"></a>å¼€å‘æµç¨‹</h2><h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn install</span><br></pre></td></tr></table></figure><h3 id="package-ä¾èµ–"><a href="#package-ä¾èµ–" class="headerlink" title="package ä¾èµ–"></a>package ä¾èµ–</h3><p>ç»™æŒ‡å®š package å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æˆ–è€…ï¼ˆæ¨èï¼‰</span></span><br><span class="line">$ lerna add lodash packages/module-1</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">$ lerna add lodash --scope=module-1</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">$ lerna add lodash **/module-1</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">$ yarn workspace module-1 add lodash</span><br></pre></td></tr></table></figure><p>ç»™æ‰€æœ‰ package å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ lerna add lodash</span><br></pre></td></tr></table></figure><h3 id="workspace-ä¹‹é—´çš„ä¾èµ–"><a href="#workspace-ä¹‹é—´çš„ä¾èµ–" class="headerlink" title="workspace ä¹‹é—´çš„ä¾èµ–"></a>workspace ä¹‹é—´çš„ä¾èµ–</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ lerna add module-2 --scope module-1</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">$ lerna add module-2 packages/module-1</span><br></pre></td></tr></table></figure><h3 id="å…±ç”¨çš„å·¥å…·ä¾èµ–"><a href="#å…±ç”¨çš„å·¥å…·ä¾èµ–" class="headerlink" title="å…±ç”¨çš„å·¥å…·ä¾èµ–"></a>å…±ç”¨çš„å·¥å…·ä¾èµ–</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add -WD typescript</span><br></pre></td></tr></table></figure><h2 id="lerna-json"><a href="#lerna-json" class="headerlink" title="lerna.json"></a>lerna.json</h2><ul><li>version: å½“å‰ä»“åº“çš„ç‰ˆæœ¬ï¼ŒIndependent mode è¯·è®¾ç½®ä¸º <code>independent</code></li><li>npmClient: æŒ‡å®šè¿è¡Œå‘½ä»¤çš„å®¢æˆ·ç«¯ç¨‹åºï¼ˆé»˜è®¤æ˜¯ npmï¼‰</li><li>ignoreChanges: ä¸€ä¸ªä¸åŒ…å«åœ¨ <code>lerna changed/publish</code> çš„ glob æ•°ç»„ã€‚ä½¿ç”¨è¿™ä¸ªå»é˜»æ­¢å‘å¸ƒä¸å¿…è¦çš„æ›´æ–°ï¼Œæ¯”å¦‚ä¿®å¤ <code>README.md</code></li><li>command<ul><li>publish<ul><li>registryï¼šè®¾ç½®è‡ªå®šä¹‰çš„ npm ä»£ç†ï¼ˆæ¯”å¦‚ä½¿ç”¨ verdaccio æ­å»ºçš„ç§æœï¼‰</li><li>conventionalCommitsï¼š<code>lerna version</code> ä¼šè‡ªåŠ¨å†³å®š version bump å’Œç”Ÿæˆ CHANGELOG æ–‡ä»¶</li><li>messageï¼šä¸€ä¸ª publish æ—¶çš„è‡ªå®šä¹‰ commit ä¿¡æ¯ã€‚è¯¦æƒ…è¯·æŸ¥çœ‹<a href="https://github.com/lerna/lerna/blob/main/commands/version#--message-msg">@lerna&#x2F;version</a></li></ul></li></ul></li></ul><h2 id="npm-scripts"><a href="#npm-scripts" class="headerlink" title="npm scripts"></a>npm scripts</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;release:beta&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lerna publish --canary --pre-dist-tag=beta --preid=beta --yes&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release:rc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lerna publish prerelease --pre-dist-tag=rc --preid=rc&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release:next&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lerna publish prerelease --pre-dist-tag=next --preid=next&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release:preminor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lerna publish preminor --pre-dist-tag=next --preid=next&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release:premajor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lerna publish premajor --pre-dist-tag=next --preid=next&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lerna publish&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release:minor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lerna publish minor&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;release:major&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lerna publish major&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;git cz&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>æœ¬æ–‡é¦–å‘äºã€Œ<a href="https://youngjuning.js.org/">æ´›ç«¹çš„å®˜æ–¹ç½‘ç«™</a>ã€ï¼ŒåŒæ­¥äºå…¬ä¼—å·ã€Œ<a href="https://cdn.jsdelivr.net/gh/youngjuning/images/20210418112129.jpeg">æ´›ç«¹æ—©èŒ¶é¦†</a>ã€å’Œã€Œ<a href="https://juejin.cn/user/325111174662855">æ˜é‡‘ä¸“æ </a>ã€ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å°†å¤§å‹ä»£ç ä»“åº“åˆ†å‰²æˆå¤šä¸ªç‹¬ç«‹ç‰ˆæœ¬åŒ–çš„ è½¯ä»¶åŒ…ï¼ˆpackageï¼‰å¯¹äºä»£ç å…±äº«æ¥è¯´éå¸¸æœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæŸäº›æ›´æ”¹ è·¨è¶Šäº†å¤šä¸ªä»£ç ä»“åº“çš„è¯å°†å˜å¾—å¾ˆéº»çƒ¦å¹¶ä¸”éš¾ä»¥è·Ÿè¸ªï¼Œå¹¶ä¸”ï¼Œè·¨è¶Šå¤šä¸ªä»£ç ä»“åº“çš„æµ‹è¯•å°†è¿…é€Ÿå˜å¾—éå¸¸å¤æ‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³è¿™äº›ï¼ˆä»¥åŠè®¸å¤šå…¶å®ƒï¼‰é—®é¢˜ï¼ŒæŸäº›é¡¹ç›®ä¼šå°† ä»£ç ä»“</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JavaScript" scheme="https://youngjuning.js.org/tags/JavaScript/"/>
    
    <category term="npm" scheme="https://youngjuning.js.org/tags/npm/"/>
    
    <category term="lerna" scheme="https://youngjuning.js.org/tags/lerna/"/>
    
    <category term="yarn" scheme="https://youngjuning.js.org/tags/yarn/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäº Probot å®ç° GitHub NPM å‘å¸ƒæœºå™¨äººğŸ¤–</title>
    <link href="https://youngjuning.js.org/aa64469afff6/"/>
    <id>https://youngjuning.js.org/aa64469afff6/</id>
    <published>2023-03-08T09:21:07.000Z</published>
    <updated>2023-03-13T01:05:01.406Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å…³äº-Github-Apps"><a href="#å…³äº-Github-Apps" class="headerlink" title="å…³äº Github Apps"></a>å…³äº Github Apps</h2><p>GitHub Apps æ˜¯ GitHub ä¸­ä¼˜ç§€çš„äº§å“ã€‚ä¸€ä¸ª GitHub App é€šè¿‡ API ç›´æ¥ä½¿ç”¨è‡ªå·±çš„èº«ä»½è¿›è¡Œæ“ä½œï¼Œè¿™æ„å‘³ç€ä½ ä¸éœ€è¦ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ç”¨æˆ·ç»´æŠ¤ä¸€ä¸ªæœºå™¨äººæˆ–æœåŠ¡è´¦æˆ·ã€‚</p><p>GitHub Apps å¯ä»¥è¢«ç›´æ¥å®‰è£…åˆ°ç»„ç»‡æˆ–è€…ç”¨æˆ·è´¦å·ä¸Šï¼Œå¹¶ä¸”å¯ä»¥èµ‹äºˆå®ƒä»¬è®¿é—®æŒ‡å®šä»“åº“çš„æƒé™ã€‚å®ƒä»¬å¸¦æœ‰å†…ç½®çš„ webhook å’Œç‹­çª„çš„ç‰¹å®šæƒé™ã€‚è®¾ç½® GitHub åº”ç”¨ç¨‹åºæ—¶ï¼Œå¯ä»¥é€‰æ‹©å¸Œæœ›å®ƒè®¿é—®çš„ä»“åº“ã€‚æ¯”å¦‚ä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªå« <code>MyGitHub</code> çš„åº”ç”¨ç¨‹åºï¼Œè¯¥åº”ç”¨ç¨‹åºæœ‰ä¸”ä»…æœ‰ <code>octocat</code> ä»“åº“çš„å†™å…¥ <code>issues</code> çš„æƒé™ã€‚å®‰è£… GitHub App éœ€è¦ä½ æ˜¯ç»„ç»‡çš„æ‰€æœ‰è€…æˆ–å¯¹ä»“åº“æ‹¥æœ‰ admin æƒé™ã€‚</p><h2 id="å…³äº-Probot"><a href="#å…³äº-Probot" class="headerlink" title="å…³äº Probot"></a>å…³äº Probot</h2><p>Probot æ˜¯ä¸€ä¸ªåŸºäº Node.js æ„å»º GitHub Apps çš„æ¡†æ¶ã€‚å®ƒæ—¨åœ¨æ¶ˆé™¤æ‰€æœ‰ç¹ççš„äº‹æƒ…ï¼Œå¦‚æ¥æ”¶å’ŒéªŒè¯ webhooks ä»¥åŠåšè®¤è¯åŠ¨ä½œï¼Œè¿™æ ·ä½ å°±å¯ä»¥ä¸“æ³¨äºä½ æƒ³è¦å®ç°çš„åŠŸèƒ½ã€‚Probot åº”ç”¨ç¨‹åºéå¸¸å®¹æ˜“ç¼–å†™ã€éƒ¨ç½²å’Œåˆ†äº«ã€‚å¤§å¤šæ•°æµè¡Œçš„ Probot åº”ç”¨è¢«æ‰˜ç®¡ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦åšä»»ä½•éƒ¨ç½²å’Œç®¡ç†å·¥ä½œã€‚è¿™é‡Œæœ‰å‡ ä¸ªåŸºäº Probot æ„å»ºçš„åº”ç”¨ï¼š</p><ul><li><a href="https://probot.github.io/apps/eslint-disable/">ESLint Disable Watcher</a> - å½“ pr ä¸­å°è¯•ç¦ç”¨ eslint è§„åˆ™æ—¶è¿›è¡Œè¯„è®ºã€‚</li><li><a href="https://probot.github.io/apps/dco/">Developer Certificate of Origin</a> - å¼ºåˆ¶ Pull Requests ç¬¦åˆ DCO è§„èŒƒ</li><li><a href="https://probot.github.io/apps/issue-check/">Issue Check</a> - æ ¹æ®å…³é”®å­—å’Œä»»åŠ¡åˆ—è¡¨æ£€æŸ¥ issues ä»¥ç¡®ä¿åŒ…å«å¿…è¦çš„ä¿¡æ¯</li><li><a href="https://probot.github.io/apps/pull/">Pull</a> - Keep your forks up-to-date.</li></ul><p>ä½ å¯ä»¥åœ¨<a href="https://probot.github.io/apps/">ç‰¹è‰²åº”ç”¨</a>æˆ–<a href="https://github.com/search?q=topic:probot-app&type=Repositories">GitHub probot-app è¯é¢˜</a>æµè§ˆæ›´å¤šåº”ç”¨ã€‚</p><h2 id="Hello-Probot"><a href="#Hello-Probot" class="headerlink" title="Hello Probot"></a>Hello Probot</h2><p>ä¸€ä¸ª Probot åº”ç”¨æœ¬è´¨ä¸Šæ˜¯å¯¼å‡ºä¸€ä¸ªå‡½æ•°çš„ <a href="https://nodejs.org/api/modules.html">Node.js æ¨¡å—</a>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">app</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// your code here</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>app</code> å‚æ•°æ˜¯ <a href="https://probot.github.io/api/latest/classes/probot.html">Probot</a> ç±»çš„å®ä¾‹ï¼Œè¯¥å®ä¾‹å¯ä»¥è®©ä½ è®¿é—®æ‰€æœ‰çš„ GitHub ç²¾åã€‚</p><p><code>aap.on</code> è´Ÿè´£ç›‘å¬æ‰€æœ‰ <a href="https://probot.github.io/docs/webhooks/">GitHub è§¦å‘çš„ webhook äº‹ä»¶</a>ï¼Œå½“ GitHub ä¸Šå‘ç”Ÿä»»ä½•æœ‰è¶£çš„äº‹æƒ…ï¼Œä½ çš„åº”ç”¨ç¨‹åºæƒ³çŸ¥é“çš„æ—¶å€™ï¼Œå®ƒä¼šé€šçŸ¥ä½ ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">app</span> =&gt;</span> &#123;</span><br><span class="line">  app.<span class="title function_">on</span>(<span class="string">&#x27;issues.opened&#x27;</span>, <span class="keyword">async</span> context =&gt; &#123;</span><br><span class="line">    <span class="comment">// ä¸€ä¸ªæ–°çš„ issue è¢«æ‰“å¼€ï¼Œæˆ‘ä»¬åº”è¯¥åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ</span></span><br><span class="line">    context.<span class="property">log</span>.<span class="title function_">info</span>(context.<span class="property">payload</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¼ é€’ç»™äº‹ä»¶å¤„ç†ç¨‹åºçš„ä¸Šä¸‹æ–‡åŒ…æ‹¬å…³äºè¢«è§¦å‘çš„äº‹ä»¶çš„ä¸€åˆ‡ï¼Œä»¥åŠä¸€äº›æœ‰ç”¨çš„å±æ€§ï¼Œä»¥ä¾¿å¯¹äº‹ä»¶åšå‡ºæœ‰ç”¨çš„å›åº”ã€‚<code>context.octokit</code> æ˜¯ä¸€ä¸ªç»è¿‡è®¤è¯çš„ GitHub å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç”¨æ¥<a href="https://probot.github.io/docs/github-api/">è¿›è¡Œ REST API å’Œ GraphQL è°ƒç”¨</a>ï¼Œå¹¶å…è®¸ä½ ä»¥ç¼–ç¨‹æ–¹å¼åšå‡ ä¹ä»»ä½•ä½ å¯ä»¥åœ¨ GitHub ä¸Šé€šè¿‡æµè§ˆå™¨åšçš„äº‹æƒ…ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå½“æ–°æ‰“å¼€ issues æ—¶è‡ªåŠ¨è¯„è®ºçš„ Appã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">app</span> =&gt;</span> &#123;</span><br><span class="line">  app.<span class="title function_">on</span>(<span class="string">&#x27;issues.opened&#x27;</span>, <span class="keyword">async</span> context =&gt; &#123;</span><br><span class="line">    <span class="comment">// context` ä»äº‹ä»¶ä¸­æå–ä¿¡æ¯ï¼Œå¯ä»¥ä¼ é€’ç»™ GitHub API è°ƒç”¨ã€‚è¿™å°†è¿”å›ï¼š</span></span><br><span class="line">    <span class="comment">// &#123; owner: &#x27;yourname&#x27;, repo: &#x27;yourrepo&#x27;, number: 123, body: &#x27;Hello World !&#125;</span></span><br><span class="line">    <span class="keyword">const</span> params = context.<span class="title function_">issue</span>(&#123; <span class="attr">body</span>: <span class="string">&#x27;Hello World!&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨ issue ä¸Šå‘ä¸€æ¡è¯„è®º</span></span><br><span class="line">    <span class="keyword">return</span> context.<span class="property">octokit</span>.<span class="property">issues</span>.<span class="title function_">createComment</span>(params);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å¼€å‘ä¸€ä¸ª-Probot-app"><a href="#å¼€å‘ä¸€ä¸ª-Probot-app" class="headerlink" title="å¼€å‘ä¸€ä¸ª Probot app"></a>å¼€å‘ä¸€ä¸ª Probot app</h2><p>ä¸ºäº†å¼€å‘ä¸€ä¸ª Probot appï¼Œä½ é¦–å…ˆéœ€è¦å®‰è£… Node.js 10.0.0 æˆ–æ›´æ–°çš„ç‰ˆæœ¬ã€‚</p><h3 id="ç”Ÿæˆä¸€ä¸ªæ–°çš„-app"><a href="#ç”Ÿæˆä¸€ä¸ªæ–°çš„-app" class="headerlink" title="ç”Ÿæˆä¸€ä¸ªæ–°çš„ app"></a>ç”Ÿæˆä¸€ä¸ªæ–°çš„ app</h3><p><a href="https://github.com/probot/create-probot-app">create-probot-app</a> æ˜¯å¼€å§‹æ„å»ºä¸€ä¸ªæ–°çš„ app çš„æœ€ä½³æ–¹å¼ã€‚å®ƒå°†ç”Ÿæˆä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºï¼Œå…¶ä¸­åŒ…å«ä½ æ‰€éœ€è¦çš„ä¸€åˆ‡ï¼Œä»¥å¼€å§‹å¹¶åœ¨ç”Ÿäº§ä¸­è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºã€‚</p><p>è¿è¡Œä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆä¸€ä¸ªé¡¹ç›®ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx create-probot-app my-first-app</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤ä¼šé—®ä¸€ç³»åˆ—å…³äºä½ çš„ app çš„é—®é¢˜ï¼Œçœ‹èµ·æ¥å°±åƒï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Let<span class="string">&#x27;s create a Probot app!</span></span><br><span class="line"><span class="string">? App name: my-first-app</span></span><br><span class="line"><span class="string">? Description of app: A &#x27;</span>Hello World<span class="string">&#x27; GitHub App built with Probot.</span></span><br><span class="line"><span class="string">? Author&#x27;</span>s full name: Katie Horne</span><br><span class="line">? Author<span class="string">&#x27;s email address: katie@auth0.com</span></span><br><span class="line"><span class="string">? GitHub user or org name: khorne3</span></span><br><span class="line"><span class="string">? Repository name: my-first-app</span></span><br><span class="line"><span class="string">? Which template would you like to use? (Use arrow keys)</span></span><br><span class="line"><span class="string">â¯ basic-js</span></span><br><span class="line"><span class="string">  basic-ts (use this one for TypeScript support)</span></span><br><span class="line"><span class="string">  checks-js</span></span><br><span class="line"><span class="string">  git-data-js</span></span><br><span class="line"><span class="string">  deploy-js</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Finished scaffolding files!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Installing dependencies. This may take a few minutes...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Successfully created my-first-app.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Begin using your app with:</span></span><br><span class="line"><span class="string">  cd my-first-app</span></span><br><span class="line"><span class="string">  npm start</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">View your app&#x27;</span>s README <span class="keyword">for</span> more usage instructions.</span><br><span class="line"></span><br><span class="line">Visit the Probot docs:</span><br><span class="line">  https://probot.github.io/docs/</span><br><span class="line"></span><br><span class="line">Get <span class="built_in">help</span> from the community:</span><br><span class="line">  https://probot.github.io/community/</span><br><span class="line"></span><br><span class="line">Enjoy building your Probot app!</span><br></pre></td></tr></table></figure><p>åˆ›å»ºçš„æœ€é‡è¦çš„æ–‡ä»¶æ˜¯ <code>index.js</code>ï¼ˆä½ çš„ app ä»£ç æ‰€åœ¨çš„ä½ç½®ï¼‰å’Œ <code>package.json</code>ï¼ˆä½¿ä½ çš„ app æˆä¸ºæ ‡å‡† <a href="https://docs.npmjs.com/files/package.json">npm module</a>ï¼‰ã€‚</p><h3 id="æœ¬åœ°è¿è¡Œ-app"><a href="#æœ¬åœ°è¿è¡Œ-app" class="headerlink" title="æœ¬åœ°è¿è¡Œ app"></a>æœ¬åœ°è¿è¡Œ app</h3><p>ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½åœ¨æœ¬åœ°è¿è¡Œ app äº†ã€‚è¿è¡Œ <code>npm start</code> æ¥å¼€å¯ä¸€ä¸ª server å§ï¼š</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœä½ é€‰æ‹©äº† TypeScript æ¨¡æ¿ï¼Œè¯·ç¡®ä¿æ‰§è¡Œäº† <code>npm run build</code>ï¼</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ yarn start</span><br><span class="line">yarn run v1.22.10</span><br><span class="line">$ probot run ./lib/index.js</span><br><span class="line">INFO (server): Running Probot v11.3.0 (Node.js: v14.15.5)</span><br><span class="line">INFO (server): Forwarding https://smee.io/dz7D1zur24cGNj7 to http://localhost:3000/</span><br><span class="line">INFO (server): Listening on http://localhost:3000</span><br><span class="line">INFO (server): Connected</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-GitHub-App"><a href="#é…ç½®-GitHub-App" class="headerlink" title="é…ç½® GitHub App"></a>é…ç½® GitHub App</h3><p>ä¸‹åˆ—æ˜¯è‡ªåŠ¨é…ç½® GitHub App çš„æ­¥éª¤ï¼š</p><ol><li>åœ¨æœ¬åœ°å‘½ä»¤è¡Œä¸­æ‰§è¡Œ <code>npm start</code>ã€‚</li><li>è®¿é—® <a href="http://localhost:3000/">http://localhost:3000</a> æŸ¥çœ‹ä¸‹ä¸€æ­¥ã€‚</li><li>ä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„é¡µé¢ã€‚</li></ol><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0e1601ae833f47a1815d79cb1dea2e6f~tplv-k3u1fbpfcp-zoom-1.image"></p><ol start="4"><li>ç‚¹å‡» <strong>Register a GitHub App</strong> æŒ‰é’®ç»§ç»­ã€‚</li><li>æ¥ç€ï¼Œä½ éœ€è¦ç»™ä½ çš„ App å–ä¸€ä¸ªæ²¡æœ‰è¢«å ç”¨çš„åå­—ï¼Œæ³¨æ„ï¼šå¦‚æœä½ çœ‹åˆ°ç±»ä¼¼ <code>Name is reserved for the account @tuya</code> çš„æç¤ºï¼Œè¿™æ„å‘³ç€ä½ ä¸èƒ½ä½¿ç”¨å·²å­˜åœ¨çš„ GitHub organization çš„åå­—ä½œä¸º app çš„åå­—ï¼ˆé™¤éä½ æ˜¯è¯¥ç»„ç»‡çš„ ownerï¼‰</li></ol><h2 id="GitHub-Release-æ—¶-npm-publish"><a href="#GitHub-Release-æ—¶-npm-publish" class="headerlink" title="GitHub Release æ—¶ npm publish"></a>GitHub Release æ—¶ <code>npm publish</code></h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a5e7c791feb140cbb537a79c89450842~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å®ç° GitHub CI è‡ªåŠ¨å‘å¸ƒ NPM åŒ…ï¼Œä¸»è¦æ˜¯ä¸ºäº†åˆç†ç®¡ç†å¯¹å¤– npm å‘å¸ƒæƒé™ã€‚è€Œæ¯”è¾ƒé€šç”¨çš„å‘å¸ƒæ—¶æœºæ˜¯åœ¨ GitHub release æ—¶ã€‚åŸºäºä¸Šé¢æµç¨‹å›¾çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡º released çŠ¶æ€æ—¶æ‰§è¡Œ <code>npm publish</code> æœ€åˆé€‚ã€‚</p><p>æˆ‘ä»¬å®ç°çš„å…·ä½“é€»è¾‘æ˜¯ï¼Œå½“ Probot app ç›‘å¬åˆ° <code>release.released</code> äº‹ä»¶æ—¶ï¼Œå¤„ç†å‘å¸ƒå‰çš„æ“ä½œã€‚é‡è¦çš„æ˜¯æˆ‘ä»¬éœ€è¦æ ¹æ® <code>package.json</code> ä¸­çš„ <code>version</code> å­—æ®µåŒ¹é…å‡º tagï¼Œæ¯”å¦‚ï¼š</p><ul><li>1.0.0ï¼štag ä¸º latest çš„ 1.0.0</li><li>1.0.0-beta.0ï¼štag ä¸º beta çš„ 1.0.0-beta.0</li><li>1.0.0-alpha.0ï¼štag ä¸º alpha çš„ 1.0.0-alpha</li></ul><h2 id="NPM-è‡ªåŠ¨å‘å¸ƒå®ç°åŸç†"><a href="#NPM-è‡ªåŠ¨å‘å¸ƒå®ç°åŸç†" class="headerlink" title="NPM è‡ªåŠ¨å‘å¸ƒå®ç°åŸç†"></a>NPM è‡ªåŠ¨å‘å¸ƒå®ç°åŸç†</h2><p>å‘å¸ƒä¹‹å‰æˆ‘ä»¬éœ€è¦æ‹‰å–ä»“åº“ä»£ç ã€å–å‡ºç‰ˆæœ¬å’Œ tagã€è®¾ç½® NPM publish Token ç­‰å·¥ä½œã€‚å…ˆä¸Šæ ¸å¿ƒä»£ç ï¼Œåé¢æˆ‘ä»¬è¯¦ç»†è§£æã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;release.released&#x27;</span>, <span class="keyword">async</span> context =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">isTuya</span>(context)) <span class="keyword">return</span>;</span><br><span class="line">  app.<span class="title function_">log</span>(<span class="string">&#x27;npm publishing&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">repository</span>: repo &#125; = context.<span class="property">payload</span>;</span><br><span class="line">  <span class="keyword">const</span> downloadDefaultBranch = <span class="string">`<span class="subst">$&#123;repo.full_name&#125;</span>#<span class="subst">$&#123;context.payload.release.tag_name&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">const</span> downLoadTempDir = <span class="string">`<span class="subst">$&#123;os.tmpdir()&#125;</span>/<span class="subst">$&#123;repo.full_name&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">download</span>(downloadDefaultBranch, downLoadTempDir);</span><br><span class="line">  <span class="keyword">const</span> &#123; version, scripts &#125; = <span class="built_in">require</span>(<span class="string">`<span class="subst">$&#123;downLoadTempDir&#125;</span>/package.json`</span>);</span><br><span class="line">  <span class="keyword">const</span> tag = <span class="regexp">/^\d\.\d\.\d-(.*)\.\d$/</span>.<span class="title function_">exec</span>(version)</span><br><span class="line">    ? <span class="regexp">/^\d\.\d\.\d-(.*)\.\d$/</span>.<span class="title function_">exec</span>(version)[<span class="number">1</span>]</span><br><span class="line">    : <span class="string">&#x27;latest&#x27;</span>;</span><br><span class="line">  <span class="comment">// å¦‚æœæœ‰ build è„šæœ¬åˆ™å…ˆæ‰§è¡Œ build è„šæœ¬</span></span><br><span class="line">  <span class="keyword">if</span> (scripts.<span class="property">build</span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">execSh</span>(<span class="string">`cd <span class="subst">$&#123;downLoadTempDir&#125;</span> &amp;&amp; npm install &amp;&amp; npm run build`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">npmPublish</span>(&#123;</span><br><span class="line">      <span class="attr">package</span>: <span class="string">`<span class="subst">$&#123;downLoadTempDir&#125;</span>/package.json`</span>,</span><br><span class="line">      <span class="attr">token</span>: process.<span class="property">env</span>.<span class="property">NPM_AUTH_TOKEN</span>,</span><br><span class="line">      <span class="attr">registry</span>: <span class="string">&#x27;https://registry.npmjs.org/&#x27;</span>,</span><br><span class="line">      tag,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">if</span> (result.<span class="property">type</span> === <span class="string">&#x27;none&#x27;</span>) &#123;</span><br><span class="line">      app.<span class="property">log</span>.<span class="title function_">error</span>(</span><br><span class="line">        <span class="string">`You can&#x27;t publish duplicate version <span class="subst">$&#123;result.package&#125;</span>@<span class="subst">$&#123;result.version&#125;</span>`</span>,</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    app.<span class="property">log</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="NPM-Publish-Token"><a href="#NPM-Publish-Token" class="headerlink" title="NPM Publish Token"></a>NPM Publish Token</h3><h4 id="ç”³è¯·-NPM-Publish-Token"><a href="#ç”³è¯·-NPM-Publish-Token" class="headerlink" title="ç”³è¯· NPM Publish Token"></a>ç”³è¯· NPM Publish Token</h4><p><strong>1. è®¿é—® npmjs.com è¿›å…¥ Access Tokens é¡µé¢</strong></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e077e9f9d0a4dc8bde0a24e121461c3~tplv-k3u1fbpfcp-zoom-1.image"></p><p><strong>2. ç‚¹å‡» Generate New Token æŒ‰é’®</strong></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/82e09021f85c413d80ac77ed3df6746e~tplv-k3u1fbpfcp-zoom-1.image"></p><p><strong>3. Token ç±»å‹é€‰æ‹© Publish</strong></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/256574d0e063410aa50c85d469346809~tplv-k3u1fbpfcp-zoom-1.image"></p><h4 id="ä¿è¯-NPM-Publish-Token-å®‰å…¨æ€§"><a href="#ä¿è¯-NPM-Publish-Token-å®‰å…¨æ€§" class="headerlink" title="ä¿è¯ NPM Publish Token å®‰å…¨æ€§"></a>ä¿è¯ NPM Publish Token å®‰å…¨æ€§</h4><p>NPM Token æ˜¯ä¸èƒ½è¢«åˆ«äººçœ‹åˆ°çš„ï¼Œä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œé¦–å…ˆé¡¹ç›®éœ€è¦è®¾ç½®ä¸ºç§æœ‰çš„ï¼Œç„¶åå°† Token æ”¾åˆ° <code>.env</code> ä¸­ï¼Œé€šè¿‡ <code>process.env.NPM_AUTH_TOKEN</code> è·å–ã€‚å¦å¤–è°¨è®°ä¸è¦åœ¨æ—¥å¿—ä¸­æ‰“å°ç¯å¢ƒå˜é‡ã€‚</p><h4 id="ä¿è¯-GitHub-App-å®‰å…¨æ€§"><a href="#ä¿è¯-GitHub-App-å®‰å…¨æ€§" class="headerlink" title="ä¿è¯ GitHub App å®‰å…¨æ€§"></a>ä¿è¯ GitHub App å®‰å…¨æ€§</h4><p>å¦‚æœæŠŠ GitHub App å‘å¸ƒä¸º public çš„ï¼Œé‚£ä¹ˆä»»ä½•ä»“åº“éƒ½å¯ä»¥å®‰è£…è¯¥åº”ç”¨ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚è§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼Œä¸€æ˜¯å°†åº”ç”¨æ³¨å†Œä¸º private ç±»å‹çš„ï¼ŒäºŒæ˜¯åœ¨ç›‘å¬å›è°ƒä¸­åˆ¤æ–­æ˜¯å¦æ˜¯å…è®¸çš„ç»„ç»‡æˆ–è€…ç”¨æˆ·ã€‚æˆ‘é€‰æ‹©çš„æ˜¯ç¬¬äºŒç§æ–¹æ¡ˆï¼Œæ ¡éªŒå‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">isTuya</span> = context =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; full_name &#125; = context.<span class="property">payload</span>.<span class="property">repository</span>;</span><br><span class="line">  <span class="keyword">return</span> full_name.<span class="title function_">startsWith</span>(<span class="string">&#x27;youngjuning&#x27;</span>) || full_name.<span class="title function_">startsWith</span>(<span class="string">&#x27;tuya&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½æºç "><a href="#ä¸‹è½½æºç " class="headerlink" title="ä¸‹è½½æºç "></a>ä¸‹è½½æºç </h3><p>æˆ‘ä»¬é€‰æ‹©äº† download-git-repo ä¸‹è½½ git ä»“åº“ï¼Œä½†æ˜¯è¯¥ä»“åº“ä¸æ”¯æŒ Promiseï¼Œæˆ‘ä»¬åšä¸€ä¸‹ç®€å•çš„æ”¹é€ ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> download = <span class="built_in">require</span>(<span class="string">&#x27;download-git-repo&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">repo, tempDir</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">download</span>(repo, tempDir, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="title function_">reject</span>(err);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="literal">null</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="npmPublish"><a href="#npmPublish" class="headerlink" title="npmPublish"></a>npmPublish</h3><p>æˆ‘ä»¬é€‰æ‹©äº† @jsdevtools&#x2F;npm-publish æ‰§è¡Œå‘å¸ƒåŠ¨ä½œï¼Œè¯¥ä»“åº“é™¤äº†ç¼–ç¨‹è°ƒç”¨å¤–ï¼Œè¿˜å¯ä»¥ä½œä¸º GitHub Action å’Œå‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ­£åˆ™å–å‡ºæˆ‘ä»¬è¦å‘å¸ƒçš„ tagï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tag = <span class="regexp">/^\d\.\d\.\d-(.*)\.\d$/</span>.<span class="title function_">exec</span>(version)</span><br><span class="line">  ? <span class="regexp">/^\d\.\d\.\d-(.*)\.\d$/</span>.<span class="title function_">exec</span>(version)[<span class="number">1</span>]</span><br><span class="line">  : <span class="string">&#x27;latest&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="lerna-publish"><a href="#lerna-publish" class="headerlink" title="lerna publish"></a>lerna publish</h3><p>lerna ç®¡ç†ç‰ˆæœ¬ç”±äºæ˜¯ä¸€æ¬¡å¯èƒ½å‘å¸ƒå¤šä¸ªä»“åº“ï¼Œæ‰€ä»¥æ— æ³•ä½¿ç”¨ä¸Šé¢æåˆ°çš„å‘å¸ƒæµç¨‹ã€‚é’ˆå¯¹ lernaï¼Œæˆ‘è®¾è®¡çš„å‘å¸ƒæµç¨‹æ˜¯ç›‘å¬åˆ° push åŠ¨ä½œåå–æœ€æ–°çš„ä¸€æ¡ commitï¼ŒåŒ¹é…æ˜¯å¦åŒ…å« <code>chore(release): publish</code>ã€‚å…·ä½“åŸç†å¦‚ä¸‹ï¼š</p><ol><li>åˆ¤æ–­ push åˆ†æ”¯æ˜¯å¦æ˜¯ä¸»åˆ†æ”¯ä¸”æäº¤ä¿¡æ¯åŒ…å« <code>chore(release): publish</code></li><li>å› ä¸ºæ˜¯ lerna publishï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ simple-git è¿™ä¸ªåº“ clone é¡¹ç›®ã€‚</li><li>ç”±äº lerna publish <a href="https://github.com/lerna/lerna/issues/2404">ä¸æ”¯æŒ token</a>ï¼Œæˆ‘ä»¬é‡‡ç”¨å°† <code>//registry.npmjs.org/:_authToken=$&#123;process.env.NPM_AUTH_TOKEN&#125;</code> å†™å…¥ <code>.npmrc</code> çš„æ–¹å¼å®Œæˆå¸¦ token çš„å‘å¸ƒã€‚</li><li>æœ€åï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>from-git</code> çš„æ–¹å¼æ‰§è¡Œ <code>lerna publish</code>ï¼Œ<code>from-git</code> çš„åœºæ™¯ä¾¿æ˜¯æœ¬åœ°æ‰§è¡Œ <code>lerna version</code>ï¼Œåœ¨ CI ä¸­æ‰§è¡Œ <code>lerna publish</code>ã€‚</li></ol><p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;push&#x27;</span>, <span class="keyword">async</span> context =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">isTuya</span>(context)) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    context.<span class="property">payload</span>.<span class="property">ref</span>.<span class="title function_">indexOf</span>(context.<span class="property">payload</span>.<span class="property">repository</span>.<span class="property">default_branch</span>) !==</span><br><span class="line">      -<span class="number">1</span> &amp;&amp;</span><br><span class="line">    context.<span class="property">payload</span>.<span class="property">head_commit</span>.<span class="property">message</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;chore(release): publish&#x27;</span>) === <span class="number">0</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    app.<span class="title function_">log</span>(<span class="string">&#x27;push event&#x27;</span>);</span><br><span class="line">    <span class="title function_">execSh</span>(<span class="string">`git --version`</span>);</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">repository</span>: repo &#125; = context.<span class="property">payload</span>;</span><br><span class="line">    <span class="keyword">const</span> cloneTempDir = <span class="string">`<span class="subst">$&#123;os.tmpdir()&#125;</span>/<span class="subst">$&#123;repo.full_name&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> git.<span class="title function_">clone</span>(repo.<span class="property">clone_url</span>, cloneTempDir);</span><br><span class="line">      <span class="keyword">const</span> &#123; devDependencies &#125; = <span class="built_in">require</span>(<span class="string">`<span class="subst">$&#123;cloneTempDir&#125;</span>/package.json`</span>);</span><br><span class="line">      <span class="keyword">if</span> (devDependencies[<span class="string">&#x27;lerna&#x27;</span>]) &#123;</span><br><span class="line">        app.<span class="title function_">log</span>(<span class="string">&#x27;lerna publishing&#x27;</span>);</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">execSh</span>(</span><br><span class="line">          <span class="string">`cd <span class="subst">$&#123;cloneTempDir&#125;</span> &amp;&amp; echo //registry.npmjs.org/:_authToken=<span class="subst">$&#123;process.env.NPM_AUTH_TOKEN&#125;</span> &gt; .npmrc`</span>,</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">execSh</span>(</span><br><span class="line">          <span class="string">`cd <span class="subst">$&#123;cloneTempDir&#125;</span> &amp;&amp; npm install &amp;&amp; npm run build &amp;&amp; ./node_modules/.bin/lerna publish from-git --yes --no-verify-access`</span>,</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">execSh</span>(<span class="string">`rm -rf <span class="subst">$&#123;cloneTempDir&#125;</span>`</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">execSh</span>(<span class="string">`rm -rf <span class="subst">$&#123;cloneTempDir&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="Glitch-éƒ¨ç½²"><a href="#Glitch-éƒ¨ç½²" class="headerlink" title="Glitch éƒ¨ç½²"></a>Glitch éƒ¨ç½²</h2><p>å¦‚æœä½ æœ‰è‡ªå·±çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ç›´æ¥å°†æœºå™¨äººç¨‹åºéƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ã€‚æˆ‘è¿™é‡Œä½¿ç”¨å®˜æ–¹æ¨èçš„ Glitch æœåŠ¡éƒ¨ç½²ã€‚Glitch å¯ä»¥å…è´¹æ‰˜ç®¡ node åº”ç”¨å¹¶ä¸”ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ç¼–è¾‘ä»–ä»¬ã€‚å¯¹äºç®€å•çš„åº”ç”¨å®Œå…¨å¤Ÿäº†ã€‚</p><ol><li>æ³¨å†Œå¹¶åœ¨ <a href="https://glitch.com/">Glitch</a> æ–°å»ºé¡¹ç›®ï¼Œé€‰æ‹© <strong>Import from GitHub</strong>ï¼Œå¼¹çª—å†™ä¸Šåº”ç”¨ github åœ°å€ï¼Œæˆ–è€…ä½¿ç”¨ <a href="https://github.com/behaviorbot/new-issue-welcome">https://github.com/behaviorbot/new-issue-welcome</a> ä½œä¸ºæ¨¡æ¿å¯¼å…¥åå†å°†è‡ªå·±çš„ä»£ç å¤åˆ¶è¿‡æ¥ã€‚</li><li>æ‰“å¼€ <code>.env</code> æ–‡ä»¶ä½¿ç”¨ä»¥ä¸‹å†…å®¹æ›¿ä»£ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">APP_ID=&lt;your app id&gt;</span><br><span class="line">WEBHOOK_SECRET=&lt;your app secret&gt;</span><br><span class="line">PRIVATE_KEY_PATH=&lt;your private_key&gt;</span><br><span class="line">NODE_ENV=production</span><br><span class="line">NPM_AUTH_TOKEN=3c2c104e-9f1f-4fc5-903e-726610b75ce1</span><br><span class="line">INPUT_TOKEN=</span><br></pre></td></tr></table></figure><ol start="4"><li>å°† glitch é“¾æ¥è®¾ç½®ä¸º GitHub App çš„ webhook åœ°å€å³å¯ï¼Œä¹‹åæ›´æ–°ä»£ç ï¼Œglitch ä¼šè‡ªåŠ¨æ›´æ–°éƒ¨ç½²ã€‚</li></ol><h2 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h2><p>Probot App çš„åˆå§‹æƒé™åœ¨ <code>app.yml</code> æ–‡ä»¶ä¸­ï¼Œå¦‚æœ App å·²ç»åˆ›å»ºäº†ï¼Œåˆæƒ³è¦æ›´æ–°æƒé™ï¼Œå¯ä»¥åœ¨ <a href="https://github.com/settings/apps">https://github.com/settings/apps</a> ä¸­æ›´æ–°ã€‚æˆ‘æ‰€ç”¨çš„æƒé™é…ç½®è¯·ç‚¹å‡» <a href="https://glitch.com/edit/#!/tuya-robot?path=app.yml%3A119%3A0">app.yml</a> æŸ¥çœ‹ã€‚</p><blockquote><p>æœ¬æ–‡é¦–å‘äºã€Œ<a href="https://youngjuning.js.org/">æ´›ç«¹çš„å®˜æ–¹ç½‘ç«™</a>ã€ï¼ŒåŒæ­¥äºå…¬ä¼—å·ã€Œ<a href="https://cdn.jsdelivr.net/gh/youngjuning/images/20210418112129.jpeg">æ´›ç«¹æ—©èŒ¶é¦†</a>ã€å’Œã€Œ<a href="https://juejin.cn/user/325111174662855">æ˜é‡‘ä¸“æ </a>ã€ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å…³äº-Github-Apps&quot;&gt;&lt;a href=&quot;#å…³äº-Github-Apps&quot; class=&quot;headerlink&quot; title=&quot;å…³äº Github Apps&quot;&gt;&lt;/a&gt;å…³äº Github Apps&lt;/h2&gt;&lt;p&gt;GitHub Apps æ˜¯ GitHub ä¸­</summary>
      
    
    
    
    <category term="è¿ç»´" scheme="https://youngjuning.js.org/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="NPM" scheme="https://youngjuning.js.org/tags/NPM/"/>
    
    <category term="GitHub" scheme="https://youngjuning.js.org/tags/GitHub/"/>
    
    <category term="Probot" scheme="https://youngjuning.js.org/tags/Probot/"/>
    
    <category term="æœºå™¨äºº" scheme="https://youngjuning.js.org/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript Array å®Œå…¨æŒ‡å—</title>
    <link href="https://youngjuning.js.org/bb5ef5a07d1c/"/>
    <id>https://youngjuning.js.org/bb5ef5a07d1c/</id>
    <published>2023-03-08T09:17:16.000Z</published>
    <updated>2023-03-13T01:05:01.398Z</updated>
    
    <content type="html"><![CDATA[<p>ECMAScript æ•°ç»„çš„æ¯ä¸€é¡¹å¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ï¼›è€Œä¸”å¤§å°æ˜¯å¯ä»¥åŠ¨æ€è°ƒæ•´çš„ï¼Œå³å¯ä»¥éšç€æ•°æ®çš„æ·»åŠ è‡ªåŠ¨å¢é•¿ä»¥å®¹çº³æ–°å¢æ•°æ®ã€‚</p><h1 id="åˆ›å»ºæ•°ç»„"><a href="#åˆ›å»ºæ•°ç»„" class="headerlink" title="åˆ›å»ºæ•°ç»„"></a>åˆ›å»ºæ•°ç»„</h1><h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> <span class="title class_">Array</span>() <span class="comment">// []</span></span><br><span class="line">colors = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>) <span class="comment">// [empty Ã— 10]</span></span><br><span class="line">colors = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>) <span class="comment">// [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;]</span></span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„å­—é¢é‡è¡¨ç¤ºæ³•"><a href="#æ•°ç»„å­—é¢é‡è¡¨ç¤ºæ³•" class="headerlink" title="æ•°ç»„å­—é¢é‡è¡¨ç¤ºæ³•"></a>æ•°ç»„å­—é¢é‡è¡¨ç¤ºæ³•</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = [] <span class="comment">// åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>] <span class="comment">// åˆ›å»ºä¸€ä¸ªåŒ…å« 3 ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> values = [<span class="number">1</span>, <span class="number">2</span>] <span class="comment">// ä¸è¦è¿™æ ·ï¼è¿™æ ·ä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«2æˆ–3é¡¹çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> options = [, , , , ,] <span class="comment">// ä¸è¦è¿™æ ·ï¼è¿™æ ·ä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«5æˆ–6é¡¹çš„æ•°ç»„</span></span><br></pre></td></tr></table></figure><h1 id="è¯»å–å’Œè®¾ç½®æ•°ç»„çš„å€¼"><a href="#è¯»å–å’Œè®¾ç½®æ•°ç»„çš„å€¼" class="headerlink" title="è¯»å–å’Œè®¾ç½®æ•°ç»„çš„å€¼"></a>è¯»å–å’Œè®¾ç½®æ•°ç»„çš„å€¼</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>] <span class="comment">// åˆ›å»ºä¸€ä¸ªåŒ…å«3ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„</span></span><br><span class="line"><span class="title function_">alert</span>(colors[<span class="number">0</span>]) <span class="comment">// æ˜¾ç¤ºç¬¬1é¡¹</span></span><br><span class="line">colors[<span class="number">2</span>] = <span class="string">&#x27;black&#x27;</span> <span class="comment">// ä¿®æ”¹ç¬¬3é¡¹</span></span><br><span class="line">colors[<span class="number">3</span>] = <span class="string">&#x27;brown&#x27;</span> <span class="comment">// æ–°å¢ç¬¬4é¡¹</span></span><br></pre></td></tr></table></figure><h1 id="length-å±æ€§"><a href="#length-å±æ€§" class="headerlink" title="length å±æ€§"></a>length å±æ€§</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>] <span class="comment">// åˆ›å»ºä¸€ä¸ªåŒ…å«3ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„</span></span><br><span class="line"><span class="title function_">alert</span>(colors.<span class="property">length</span>) <span class="comment">// æ˜¾ç¤ºæ•°ç»„é•¿åº¦</span></span><br><span class="line">colors[colors.<span class="property">length</span>] = <span class="string">&#x27;black&#x27;</span> <span class="comment">// åœ¨ä½ç½®3æ·»åŠ ä¸€ç§é¢œè‰²</span></span><br><span class="line">colors[colors.<span class="property">length</span>] = <span class="string">&#x27;brown&#x27;</span> <span class="comment">// åœ¨ä½ç½®4å†æ·»åŠ ä¸€ç§é¢œè‰²</span></span><br></pre></td></tr></table></figure><h1 id="æ£€æµ‹æ•°ç»„"><a href="#æ£€æµ‹æ•°ç»„" class="headerlink" title="æ£€æµ‹æ•°ç»„"></a>æ£€æµ‹æ•°ç»„</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = []</span><br><span class="line"><span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(array)) &#123;</span><br><span class="line">  <span class="comment">// å¯¹æ•°ç»„æ‰§è¡ŒæŸäº›æ“ä½œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Array-isArray-Polyfill"><a href="#Array-isArray-Polyfill" class="headerlink" title="Array.isArray Polyfill"></a>Array.isArray Polyfill</h2><p>å¦‚æœæ˜¯å®é™…é¡¹ç›®å¯ä»¥é…ç½® <code>@babel/polyfill</code> æˆ–è€… <code>transform-runtime</code>ï¼Œè¿™ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="property">isArray</span>) &#123;</span><br><span class="line">  <span class="title class_">Array</span>.<span class="property">isArray</span> = <span class="keyword">function</span>(<span class="params">arg</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(arg) === <span class="string">&#x27;[object Array]&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ES1-æ–¹æ³•"><a href="#ES1-æ–¹æ³•" class="headerlink" title="ES1 æ–¹æ³•"></a>ES1 æ–¹æ³•</h1><ul><li><code>Array.prototype.join</code>: <code>join()</code> æ–¹æ³•å°†ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼‰çš„æ‰€æœ‰å…ƒç´ è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœæ•°ç»„åªæœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œé‚£ä¹ˆå°†è¿”å›è¯¥é¡¹ç›®è€Œä¸ä½¿ç”¨åˆ†éš”ç¬¦ã€‚<strong>åŸå§‹æ•°ç»„ä¸ä¼šè¢«æ”¹å˜</strong>ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// join</span></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors.<span class="title function_">join</span>()) <span class="comment">// &quot;red,blue,green&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors.<span class="title function_">join</span>(<span class="string">&#x27;|&#x27;</span>)) <span class="comment">// &quot;red|blue|green&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors.<span class="title function_">join</span>(<span class="string">&#x27;|&#x27;</span>)) <span class="comment">// &quot;red|blue|green&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;red|blue|green&#x27;</span>.<span class="title function_">split</span>(<span class="string">&#x27;|&#x27;</span>)) <span class="comment">// [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;]</span></span><br></pre></td></tr></table></figure><ul><li><code>Array.prototype.reverse()</code>: <code>reverse()</code> æ–¹æ³•å°†æ•°ç»„ä¸­å…ƒç´ çš„ä½ç½®é¢ å€’ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„ã€‚<strong>è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„</strong>ã€‚</li><li><code>Array.prototype.sort()</code>: <code>sort()</code> æ–¹æ³•ç”¨åŸåœ°ç®—æ³•å¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶è¿”å›æ•°ç»„ã€‚é»˜è®¤æ’åºé¡ºåºæ˜¯åœ¨å°†å…ƒç´ è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæ¯”è¾ƒå®ƒä»¬çš„ UTF-16 ä»£ç å•å…ƒå€¼åºåˆ—æ—¶æ„å»ºçš„; sort æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¦‚æœç¬¬ä¸€å‚æ•°åº”è¯¥ä½äºç¬¬äºŒä¸ªå‚æ•°ä¹‹å‰åˆ™è¿”å›è´Ÿæ•°ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥ä½äºç¬¬äºŒä¸ªä¹‹ååˆ™è¿”å›ä¸€ä¸ªæ­£æ•°ã€‚<strong>è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„</strong>ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reverse</span></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors.<span class="title function_">reverse</span>()) <span class="comment">//Â [5, 4, 3, 2, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// sort</span></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="number">1</span>, <span class="number">10</span>, <span class="number">3</span>, <span class="number">20</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sort</span>(<span class="params">arr, asc = <span class="literal">true</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (asc) &#123;</span><br><span class="line">      <span class="keyword">return</span> a - b</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b - a</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sort</span>(colors)) <span class="comment">// [1, 3, 5, 10, 20]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sort</span>(colors, <span class="literal">false</span>)) <span class="comment">// [20, 10, 5, 3, 1]</span></span><br></pre></td></tr></table></figure><h1 id="ES3-æ–¹æ³•"><a href="#ES3-æ–¹æ³•" class="headerlink" title="ES3 æ–¹æ³•"></a>ES3 æ–¹æ³•</h1><ul><li><code>Array.prototype.push</code>: <code>push()</code> æ–¹æ³•å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ï¼ŒæŠŠå®ƒä»¬é€ä¸ªæ·»åŠ åˆ°æ•°ç»„æœ«å°¾ï¼Œå¹¶è¿”å›ä¿®æ”¹åæ•°ç»„çš„é•¿åº¦ã€‚<strong>è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„</strong>ã€‚</li><li><code>Array.prototype.pop</code>: <code>pop()</code> æ–¹æ³•ä»æ•°ç»„æœ«å°¾ç§»é™¤æœ€åä¸€é¡¹ï¼Œå‡å°‘æ•°ç»„çš„ <code>length</code> å€¼ï¼Œå¹¶è¿”å›è¯¥é¡¹ã€‚<strong>è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„</strong>ã€‚</li><li><code>Array.prototype.shift</code>: <code>shift()</code> æ–¹æ³•èƒ½å¤Ÿç§»é™¤æ•°ç»„ä¸­çš„ç¬¬ä¸€é¡¹å¹¶è¿”å›è¯¥é¡¹, åŒæ—¶å°†æ•°ç»„é•¿åº¦å‡ 1ã€‚<strong>è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„</strong>ã€‚</li><li><code>Array.prototype.unshift</code>: <code>unshift()</code> æ–¹æ³•èƒ½å¤Ÿåœ¨æ•°ç»„å‰ç«¯æ·»åŠ ä»»æ„ä¸ªé¡¹ï¼Œå¹¶è¿”å›æ–°æ•°ç»„çš„é•¿åº¦ã€‚<strong>è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„</strong>ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pushã€pop</span></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>]</span><br><span class="line"><span class="keyword">var</span> count = colors.<span class="title function_">push</span>(<span class="string">&#x27;black&#x27;</span>, <span class="string">&#x27;brown&#x27;</span>) <span class="comment">// å‘æœ«å°¾æ¨å…¥ä¸¤é¡¹</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(count) <span class="comment">// 5</span></span><br><span class="line"><span class="keyword">var</span> item = colors.<span class="title function_">pop</span>() <span class="comment">// å–å¾—æœ€åä¸€é¡¹</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(item) <span class="comment">// &quot;brown&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// shiftã€unshift</span></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>]</span><br><span class="line"><span class="keyword">var</span> count = colors.<span class="title function_">unshift</span>(<span class="string">&#x27;black&#x27;</span>, <span class="string">&#x27;brown&#x27;</span>) <span class="comment">// å‘å¼€å¤´æ¨å…¥ä¸¤é¡¹</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(count) <span class="comment">// 5</span></span><br><span class="line"><span class="keyword">var</span> item = colors.<span class="title function_">shift</span>() <span class="comment">// å–å¾—ç¬¬ä¸€é¡¹</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(item) <span class="comment">// &quot;red&quot;</span></span><br></pre></td></tr></table></figure><ul><li><code>Array.prototype.concat()</code>: <code>concat()</code> æ–¹æ³•ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚<strong>åŸå§‹æ•°ç»„ä¸ä¼šè¢«æ”¹å˜</strong>ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚</li><li><code>Array.prototype.slice()</code>: <code>slice()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„å¯¹è±¡ï¼Œè¿™ä¸€å¯¹è±¡æ˜¯ä¸€ä¸ªç”± <code>begin</code> å’Œ <code>end</code> å†³å®šçš„åŸæ•°ç»„çš„æµ…æ‹·è´ï¼ˆåŒ…æ‹¬ <code>begin</code>ï¼Œä¸åŒ…æ‹¬ <code>end</code>ï¼‰ã€‚<strong>åŸå§‹æ•°ç»„ä¸ä¼šè¢«æ”¹å˜</strong>ã€‚</li><li><code>Array.prototype.splice()</code>: <code>splice()</code> æ–¹æ³•é€šè¿‡åˆ é™¤æˆ–æ›¿æ¢ç°æœ‰å…ƒç´ æˆ–è€…åŸåœ°æ·»åŠ æ–°çš„å…ƒç´ æ¥ä¿®æ”¹æ•°ç»„,å¹¶ä»¥æ•°ç»„å½¢å¼è¿”å›è¢«ä¿®æ”¹çš„å†…å®¹ã€‚<strong>æ­¤æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„</strong>ã€‚<ul><li><strong>åˆ é™¤</strong>: å¯ä»¥åˆ é™¤ä»»æ„æ•°é‡çš„é¡¹ï¼Œåªéœ€æŒ‡å®š 2 ä¸ªå‚æ•°: è¦åˆ é™¤çš„ç¬¬ä¸€é¡¹çš„ä½ç½®å’Œè¦åˆ é™¤çš„é¡¹æ•°ã€‚ä¾‹å¦‚ï¼Œ<code>splice(0, 2)</code> ä¼šåˆ é™¤æ•°ç»„ä¸­çš„å‰ä¸¤é¡¹ã€‚</li><li><strong>æ’å…¥</strong>: å¯ä»¥å‘æŒ‡å®šä½ç½®æ’å…¥ä»»æ„æ•°é‡çš„é¡¹ï¼Œåªéœ€è¦æä¾› 3 ä¸ªå‚æ•°ï¼šèµ·å§‹ä½ç½®ã€0ï¼ˆè¦åˆ é™¤çš„é¡¹æ•°ï¼‰å’Œè¦æ’å…¥çš„é¡¹ã€‚å¦‚æœè¦æ’å…¥å¤šä¸ªé¡¹ï¼Œå¯ä»¥å†ä¼ å…¥ä»»æ„å¤šä¸ªé¡¹ã€‚ä¾‹å¦‚ï¼Œ<code>splice(2, 0, &quot;red&quot;, &quot;green&quot;)</code> ä¼šä»å½“å‰æ•°ç»„çš„ä½ç½® 2 å¼€å§‹æ’å…¥å­—ç¬¦ä¸² <code>&quot;red&quot;</code> å’Œ <code>green</code>ã€‚</li><li><strong>æ›¿æ¢</strong>: å¯ä»¥å‘æŒ‡å®šä½ç½®æ’å…¥ä»»æ„æ•°é‡çš„é¡¹ï¼Œä¸”åŒæ—¶åˆ é™¤ä»»æ„æ•°é‡çš„é¡¹ï¼Œåªéœ€è¦æŒ‡å®š 3 ä¸ªå‚æ•°ï¼šèµ·å§‹ä½ç½®ã€è¦åˆ é™¤çš„é¡¹æ•°å’Œè¦æ’å…¥çš„ä»»æ„æ•°é‡çš„é¡¹ã€‚æ’å…¥çš„é¡¹ä¸å¿…ä¸åˆ é™¤çš„é¡¹æ•°ç›¸ç­‰ã€‚ä¾‹å¦‚ï¼Œ<code>splice(2, 1, &quot;red&quot;, &quot;green&quot;)</code> ä¼šåˆ é™¤å½“å‰æ•°ç»„ä½ç½® 2 çš„é¡¹ï¼Œç„¶åå†ä»ä½ç½® 2 å¼€å§‹æ’å…¥å­—ç¬¦ä¸² <code>&quot;red&quot;</code> å’Œ <code>green</code>ã€‚</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// concat</span></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>]</span><br><span class="line"><span class="keyword">var</span> colors1 = [<span class="string">&#x27;black&#x27;</span>, <span class="string">&#x27;brown&#x27;</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors.<span class="title function_">concat</span>(colors1)) <span class="comment">// [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;black&quot;, &quot;brown&quot;]</span></span><br><span class="line"><span class="comment">// slice</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¦‚æœ `slice()` æ–¹æ³•çš„å‚æ•°ä¸­æœ‰ä¸€ä¸ªè´Ÿæ•°ï¼Œåˆ™ç”¨æ•°ç»„é•¿åº¦åŠ ä¸Šè¯¥æ•°æ¥ç¡®å®šç›¸åº”åœ°ä½ç½®ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªåŒ…å«5é¡¹çš„æ•°ç»„ä¸Šè°ƒç”¨ `slice(-2, -1)` ä¸è°ƒç”¨ `slice(3, 4)` å¾—åˆ°çš„ç»“æœç›¸åŒã€‚å¦‚æœç»“æŸä½ç½®å°äºèµ·å§‹ä½ç½®ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;black&#x27;</span>, <span class="string">&#x27;brown&#x27;</span>]</span><br><span class="line"><span class="keyword">var</span> colors2 = colors.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">var</span> colors3 = colors.<span class="title function_">slice</span>(<span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors2) <span class="comment">// [&quot;blue&quot;, &quot;green&quot;, &quot;black&quot;, &quot;brown&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors3) <span class="comment">// [&quot;blue&quot;, &quot;green&quot;, &quot;black&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * splice() æ–¹æ³•å§‹ç»ˆéƒ½ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„ä¸­åŒ…å«ä»åŸå§‹æ•°ç»„ä¸­åˆ é™¤çš„é¡¹ï¼ˆå¦‚æœæ²¡æœ‰åˆ é™¤ä»»ä½•é¡¹ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>]</span><br><span class="line"><span class="keyword">var</span> removed = colors.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">1</span>) <span class="comment">// åˆ é™¤ç¬¬ä¸€é¡¹</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors) <span class="comment">// [&quot;green&quot;, &quot;blue&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(removed) <span class="comment">// [&quot;red&quot;] è¿”å›çš„æ•°ç»„ä¸­åªåŒ…å«ä¸€é¡¹</span></span><br><span class="line"></span><br><span class="line">removed = colors.<span class="title function_">splice</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="string">&#x27;yellow&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>) <span class="comment">// ä»ä½ç½® 1 å¼€å§‹æ’å…¥ä¸¤é¡¹</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors) <span class="comment">// [&quot;green&quot;, &quot;red&quot;, &quot;orange&quot;, &quot;blue&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(removed) <span class="comment">// è¿”å›çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„</span></span><br><span class="line"></span><br><span class="line">removed = colors.<span class="title function_">splice</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;purple&#x27;</span>) <span class="comment">// åˆ é™¤ä¸€é¡¹ï¼Œå¢åŠ ä¸¤é¡¹</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors) <span class="comment">// [&quot;green&quot;, &quot;red&quot;, &quot;purple&quot;, &quot;orange&quot;, &quot;blue&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(removed) <span class="comment">// yellowï¼Œè¿”å›çš„æ•°ç»„ä¸­åªåŒ…å«ä¸€é¡¹</span></span><br></pre></td></tr></table></figure><h1 id="ES5-æ–¹æ³•"><a href="#ES5-æ–¹æ³•" class="headerlink" title="ES5 æ–¹æ³•"></a>ES5 æ–¹æ³•</h1><ul><li><code>Array.prototype.indexOf()</code>: <code>indexOf()</code> æ–¹æ³•è¿”å›åœ¨æ•°ç»„ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç»™å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›-1ã€‚ä»æ•°ç»„çš„å‰é¢å‘åæŸ¥æ‰¾ï¼Œä» <code>fromIndex</code> å¤„å¼€å§‹ã€‚</li><li><code>Arrayã€‚prototype.lastIndexOf)()</code>: <code>lastIndexOf()</code> æ–¹æ³•è¿”å›æŒ‡å®šå…ƒç´ åœ¨æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›-1ã€‚ä»æ•°ç»„çš„åé¢å‘å‰æŸ¥æ‰¾ï¼Œä» <code>fromIndex</code> å¤„å¼€å§‹ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers.<span class="title function_">indexOf</span>(<span class="number">4</span>)) <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers.<span class="title function_">lastIndexOf</span>(<span class="number">4</span>)) <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers.<span class="title function_">indexOf</span>(<span class="number">4</span>, <span class="number">4</span>)) <span class="comment">// 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers.<span class="title function_">lastIndexOf</span>(<span class="number">4</span>, <span class="number">4</span>)) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;Nicholas&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">var</span> people = [&#123; <span class="attr">name</span>: <span class="string">&#x27;Nicholas&#x27;</span> &#125;]</span><br><span class="line"><span class="keyword">var</span> morePeople</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * indexOfã€lastIndexOf åœ¨æ¯”è¾ƒç¬¬ä¸€ä¸ªå‚æ•°ä¸æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹æ—¶ï¼Œä¼šä½¿ç”¨å…¨ç­‰æ“ä½œç¬¦</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(people.<span class="title function_">indexOf</span>(person)) <span class="comment">// -1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(morePeople.<span class="title function_">indexOf</span>(person)) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><ul><li><code>Array.prototype.every()</code>: å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æœè¯¥å‡½æ•°å¯¹æ¯ä¸€é¡¹éƒ½è¿”å› <code>true</code>ï¼Œåˆ™è¿”å› <code>true</code>ã€‚</li><li><code>Array.prototype.some()</code>: å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æœè¯¥å‡½æ•°å¯¹ä»»ä¸€é¡¹è¿”å› <code>true</code>ï¼Œåˆ™è¿”å› <code>true</code>ã€‚</li><li><code>Array.prototype.filter()</code>: å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›è¯¥å‡½æ•°ä¼šè¿”å› <code>true</code> çš„é¡¹ç»„æˆçš„æ•°ç»„ã€‚</li><li><code>Array.prototype.map()</code>: å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æœç»„æˆçš„æ•°ç»„ã€‚</li><li><code>Array.prototype.forEach()</code>: å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿™ä¸ªæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// every</span></span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line"><span class="keyword">var</span> everyResult = numbers.<span class="title function_">every</span>(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> item &gt; <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(everyResult) <span class="comment">// false</span></span><br><span class="line"><span class="comment">// some</span></span><br><span class="line"><span class="keyword">var</span> someResult = numbers.<span class="title function_">some</span>(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> item &gt; <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(someResult) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// filter</span></span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line"><span class="keyword">var</span> filterResult = numbers.<span class="title function_">filter</span>(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> item &gt; <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(filterResult) <span class="comment">// [3, 4, 5, 4, 3]</span></span><br><span class="line"><span class="comment">// map</span></span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line"><span class="keyword">var</span> mapResult = numbers.<span class="title function_">map</span>(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> item * <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapResult) <span class="comment">// [2, 4, 6, 8, 10, 8, 6, 4, 2]</span></span><br><span class="line"><span class="comment">// forEach</span></span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line">numbers.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡ŒæŸäº›æ“ä½œ</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><code>Array.prototype.reduce()</code></li><li><code>Array.prototype.reduceRight()</code></li></ul><p><code>reduce()</code> å’Œ <code>reduceRight()</code> æ–¹æ³•éƒ½ä¼šè¿­ä»£æ•°ç»„çš„æ‰€æœ‰é¡¹ï¼Œç„¶åæ„å»ºä¸€ä¸ªæœ€ç»ˆè¿”å›çš„å€¼ã€‚å…¶ä¸­ï¼Œ<code>reduce()</code> æ–¹æ³•ä»æ•°ç»„çš„ç¬¬ä¸€é¡¹å¼€å§‹ï¼Œé€ä¸ªéå†åˆ°æœ€åã€‚è€Œ <code>reduceRight()</code> åˆ™ä»æ•°ç»„çš„æœ€åä¸€é¡¹å¼€å§‹ï¼Œå‘å‰éå†åˆ°ç¬¬ä¸€é¡¹ã€‚</p><p>è¿™ä¸¤ä¸ªå‚æ•°éƒ½æ¥å—ä¸¤ä¸ªå‚æ•°: ä¸€ä¸ªåœ¨æ¯ä¸€é¡¹ä¸Šè°ƒç”¨çš„å‡½æ•°å’Œï¼ˆå¯é€‰çš„ï¼‰ä½œä¸ºå½’å¹¶åŸºç¡€çš„åˆå§‹å€¼ã€‚ä¼ ç»™ <code>reduce</code> å’Œ <code>reduceRight</code> çš„å‡½æ•°æ¥å— 4 ä¸ªå‚æ•°ï¼šå‰ä¸€ä¸ªå€¼ã€å½“å‰å€¼ã€é¡¹çš„ç´¢å¼•å’Œæ•°ç»„å¯¹è±¡ã€‚è¿™ä¸ªå‡½æ•°è¿”å›çš„ä»»ä½•å€¼éƒ½ä¼šä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°è‡ªåŠ¨ä¼ ç»™ä¸‹ä¸€é¡¹ã€‚ç¬¬ä¸€æ¬¡è¿­ä»£å‘ç”Ÿåœ¨æ•°ç»„çš„ç¬¬äºŒé¡¹ä¸Šï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç¬¬ä¸€é¡¹ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æ•°ç»„çš„ç¬¬äºŒé¡¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„æ±‚å’Œ</span></span><br><span class="line"><span class="keyword">var</span> values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">var</span> sum = values.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> prev + cur</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sum)</span><br><span class="line"><span class="comment">// æ•°ç»„æ±‚ä¹˜ç§¯</span></span><br><span class="line"><span class="keyword">var</span> values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">var</span> pro = values.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> prev * cur</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(pro) <span class="comment">// 120</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ã€ç´¯åŠ å¯¹è±¡æ•°ç»„é‡Œçš„å€¼ã€‘</span></span><br><span class="line"><span class="comment"> * è¦ç´¯åŠ å¯¹è±¡æ•°ç»„ä¸­åŒ…å«çš„å€¼ï¼Œå¿…é¡»æä¾›åˆå§‹å€¼ï¼Œä»¥ä¾¿å„ä¸ªitemæ­£ç¡®é€šè¿‡ä½ çš„å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> values = [&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">3</span> &#125;]</span><br><span class="line"><span class="keyword">var</span> sum = values.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> prev + cur.<span class="property">x</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sum) <span class="comment">// 6</span></span><br><span class="line"><span class="comment">// æ±‚æœ€å¤§å€¼</span></span><br><span class="line"><span class="keyword">var</span> values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">var</span> max = values.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> prev &gt; cur ? prev : cur</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max) <span class="comment">// 5</span></span><br><span class="line"><span class="comment">// è®¡ç®—æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line"><span class="keyword">var</span> names = [<span class="string">&#x27;Alice&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Tiff&#x27;</span>, <span class="string">&#x27;Bruce&#x27;</span>, <span class="string">&#x27;Alice&#x27;</span>]</span><br><span class="line"><span class="keyword">var</span> countedNames = names.<span class="title function_">reduce</span>(<span class="function">(<span class="params">allNames, name</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (allNames.<span class="title function_">indexOf</span>(name) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    allNames[name]++</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    allNames[name] = <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> allNames</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æŒ‰å±æ€§å¯¹object arrayåˆ†ç±»</span></span><br><span class="line"><span class="keyword">var</span> people = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;ææ‰¬&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;æ¨å…­&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;ç‹äº”&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span> &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">groupBy</span> = (<span class="params">objectArray, property</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> objectArray.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> key = cur[property]</span><br><span class="line">    <span class="keyword">if</span> (!acc[key]) &#123;</span><br><span class="line">      acc[key] = [cur]</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      acc[key].<span class="title function_">push</span>(cur)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> acc</span><br><span class="line">  &#125;, &#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> groupedPeople = <span class="title function_">groupBy</span>(people, <span class="string">&#x27;age&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>reduce é«˜çº§ç”¨æ³•:</strong></p><blockquote><p>æ¬ç –å·¥å°ç‹æ‹¿åˆ°äº†è¿™æ ·çš„æ ¼å¼ï¼š<code>var arr = [ &#123;n ame: &#39;brick1&#39;&#125;, &#123;name: &#39;brick2&#39;&#125;, &#123;name: &#39;brick3&#39;&#125; ]</code><br>å¸Œæœ›å¾—åˆ°è¿™æ ·çš„æ•°æ®æ ¼å¼ï¼š<code>brick1, brick2 &amp; brick3</code><br>å½“ç„¶æ•°ç»„å¼‚å¸¸æµ: <code>[&#123;name:&#39;brick1&#39;&#125;]</code> å’Œç©ºæ•°ç»„ä¼ å…¥å¾—åˆ° <code>&quot;brick1&quot;</code> å’Œç©º</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [&#123; <span class="attr">name</span>: <span class="string">&#x27;brick11&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;brick12&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;brick13&#x27;</span> &#125;]</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">carryBricks</span> = arr =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> cur.<span class="property">name</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index === array.<span class="property">length</span> - <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> prev + <span class="string">&#x27; &amp; &#x27;</span> + cur.<span class="property">name</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> prev + <span class="string">&#x27;,&#x27;</span> + cur.<span class="property">name</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">carryBricks</span>(array)) <span class="comment">// &quot;brick11,brick12 &amp; brick13&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">carryBricks</span>([&#123; <span class="attr">name</span>: <span class="string">&#x27;brick1&#x27;</span> &#125;])) <span class="comment">// &quot;brick1&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">carryBricks</span>([])) <span class="comment">// &quot;&quot;</span></span><br></pre></td></tr></table></figure><h1 id="ES2015-x2F-ES6"><a href="#ES2015-x2F-ES6" class="headerlink" title="ES2015&#x2F;ES6"></a>ES2015&#x2F;ES6</h1><ul><li><p><code>Array.from</code>ï¼šç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰å’Œå¯éå†ï¼ˆiterableï¼‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ ES6 æ–°å¢çš„æ•°æ®ç»“æ„ Set å’Œ Mapï¼‰</p></li><li><p><code>Array.of</code>ï¼šç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„</p></li><li><p><code>arr.fill(value[, start[, end]])</code>ï¼šç”¨ä¸€ä¸ªå›ºå®šå€¼å¡«å……ä¸€ä¸ªæ•°ç»„ä¸­ä»èµ·å§‹ç´¢å¼•åˆ°ç»ˆæ­¢ç´¢å¼•å†…çš„å…¨éƒ¨å…ƒç´ ã€‚ä¸åŒ…æ‹¬ç»ˆæ­¢ç´¢å¼•</p></li><li><p><code>find()</code>ï¼šç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜</p></li><li><p><code>findIndex()</code>ï¼šè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœæ‰€æœ‰æˆå‘˜éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›<code>-1</code></p></li><li><p><code>entries()</code>ï¼Œ<code>keys()</code> å’Œ values()ï¼š<code>keys()</code>æ˜¯å¯¹é”®åçš„éå†ã€<code>values()</code>æ˜¯å¯¹é”®å€¼çš„éå†ï¼Œ<code>entries()</code>æ˜¯å¯¹é”®å€¼å¯¹çš„éå†</p></li></ul><h1 id="ES2016-x2F-ES7"><a href="#ES2016-x2F-ES7" class="headerlink" title="ES2016&#x2F;ES7"></a>ES2016&#x2F;ES7</h1><ul><li><code>copyWithin()</code>ï¼š æ–¹æ³•æµ…å¤åˆ¶æ•°ç»„çš„ä¸€éƒ¨åˆ†åˆ°åŒä¸€æ•°ç»„ä¸­çš„å¦ä¸€ä¸ªä½ç½®ï¼Œå¹¶è¿”å›å®ƒï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„çš„é•¿åº¦ã€‚</li><li><code>includes()</code>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼</li></ul><h1 id="ES2019-x2F-ES10"><a href="#ES2019-x2F-ES10" class="headerlink" title="ES2019&#x2F;ES10"></a>ES2019&#x2F;ES10</h1><ul><li><code>flat()</code>ï¼šä¼šæŒ‰ç…§ä¸€ä¸ªå¯æŒ‡å®šçš„æ·±åº¦é€’å½’éå†æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰å…ƒç´ ä¸éå†åˆ°çš„å­æ•°ç»„ä¸­çš„å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚</li><li><code>flatMap()</code>ï¼š æ–¹æ³•é¦–å…ˆä½¿ç”¨æ˜ å°„å‡½æ•°æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åå°†ç»“æœå‹ç¼©æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚å®ƒä¸ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">map</a> è¿ç€æ·±åº¦å€¼ä¸º1çš„ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat">flat</a> å‡ ä¹ç›¸åŒï¼Œä½† <code>flatMap</code> é€šå¸¸åœ¨åˆå¹¶æˆä¸€ç§æ–¹æ³•çš„æ•ˆç‡ç¨å¾®é«˜ä¸€äº›</li></ul><h1 id="lodash"><a href="#lodash" class="headerlink" title="lodash"></a>lodash</h1><h2 id="æ•°ç»„å¹¶é›†"><a href="#æ•°ç»„å¹¶é›†" class="headerlink" title="æ•°ç»„å¹¶é›†"></a>æ•°ç»„å¹¶é›†</h2><ul><li><code>_.union([arrays])</code>: åˆ›å»ºä¸€ä¸ªæŒ‰é¡ºåºæ’åˆ—çš„å”¯ä¸€å€¼çš„æ•°ç»„ã€‚æ‰€æœ‰ç»™å®šæ•°ç»„çš„å…ƒç´ å€¼ä½¿ç”¨ SameValueZero åšç­‰å€¼æ¯”è¾ƒã€‚ï¼ˆ <code>arrays</code>ï¼ˆæ•°ç»„ï¼‰çš„å¹¶é›†ï¼ŒæŒ‰é¡ºåºè¿”å›ï¼Œè¿”å›æ•°ç»„çš„å…ƒç´ æ˜¯å”¯ä¸€çš„ï¼‰</li><li><code>_.unionBy([arrays], [iteratee=_.identity])</code>: è¿™ä¸ªæ–¹æ³•ç±»ä¼¼ <code>_.union</code> ï¼Œé™¤äº†å®ƒæ¥å—ä¸€ä¸ª <code>iteratee</code> ï¼ˆè¿­ä»£å‡½æ•°ï¼‰ï¼Œè°ƒç”¨æ¯ä¸€ä¸ªæ•°ç»„ï¼ˆ<code>array</code>ï¼‰çš„æ¯ä¸ªå…ƒç´ ä»¥äº§ç”Ÿå”¯ä¸€æ€§è®¡ç®—çš„æ ‡å‡†ã€‚<code>iteratee</code> ä¼šä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼š(<code>value</code>)ã€‚</li><li><code>_.unionWith([arrays], [comparator])</code>: è¿™ä¸ªæ–¹æ³•ç±»ä¼¼ <code>_.union</code>ï¼Œ é™¤äº†å®ƒæ¥å—ä¸€ä¸ª <code>comparator</code> è°ƒç”¨æ¯”è¾ƒ <code>arrays</code> æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚ <code>comparator</code> è°ƒç”¨æ—¶ä¼šä¼ å…¥ 2 ä¸ªå‚æ•°ï¼š (<code>arrVal</code>, <code>othVal</code>)ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"><span class="comment">// union</span></span><br><span class="line">_.<span class="title function_">union</span>([<span class="number">2</span>], [<span class="number">1</span>, <span class="number">2</span>]) <span class="comment">// [2, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// unionBy</span></span><br><span class="line">_.<span class="title function_">unionBy</span>([<span class="number">2.1</span>], [<span class="number">1.2</span>, <span class="number">2.3</span>], <span class="title class_">Math</span>.<span class="property">floor</span>) <span class="comment">// [2.1, 1.2]</span></span><br><span class="line"><span class="comment">// The `_.property` iteratee shorthand.</span></span><br><span class="line">_.<span class="title function_">unionBy</span>([&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], [&#123; <span class="attr">x</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], <span class="string">&#x27;x&#x27;</span>) <span class="comment">// [&#123; &#x27;x&#x27;: 1 &#125;, &#123; &#x27;x&#x27;: 2 &#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// unionWith</span></span><br><span class="line"><span class="keyword">var</span> objects = [</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">2</span>, <span class="attr">y</span>: <span class="number">1</span> &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">var</span> others = [</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;,</span><br><span class="line">]</span><br><span class="line">_.<span class="title function_">unionWith</span>(objects, others, _.<span class="property">isEqual</span>) <span class="comment">// [&#123; &#x27;x&#x27;: 1, &#x27;y&#x27;: 2 &#125;, &#123; &#x27;x&#x27;: 2, &#x27;y&#x27;: 1 &#125;, &#123; &#x27;x&#x27;: 1, &#x27;y&#x27;: 1 &#125;]</span></span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„äº¤é›†"><a href="#æ•°ç»„äº¤é›†" class="headerlink" title="æ•°ç»„äº¤é›†"></a>æ•°ç»„äº¤é›†</h2><ul><li><code>_.intersection([arrays])</code>: åˆ›å»ºå”¯ä¸€å€¼çš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„åŒ…å«æ‰€æœ‰ç»™å®šæ•°ç»„éƒ½åŒ…å«çš„å…ƒç´ ï¼Œä½¿ç”¨ SameValueZero è¿›è¡Œç›¸ç­‰æ€§æ¯”è¾ƒã€‚ï¼ˆå¯ä»¥ç†è§£ä¸ºç»™å®šæ•°ç»„çš„äº¤é›†ï¼‰</li><li><code>_.intersectionBy([arrays], [iteratee=_.identity])</code>: è¿™ä¸ªæ–¹æ³•ç±»ä¼¼ <code>_.intersection</code>ï¼ŒåŒºåˆ«æ˜¯å®ƒæ¥å—ä¸€ä¸ª <code>iteratee</code> è°ƒç”¨æ¯ä¸€ä¸ª arrays çš„æ¯ä¸ªå€¼ä»¥äº§ç”Ÿä¸€ä¸ªå€¼ï¼Œé€šè¿‡äº§ç”Ÿçš„å€¼è¿›è¡Œäº†æ¯”è¾ƒã€‚ç»“æœå€¼æ˜¯ä»ç¬¬ä¸€æ•°ç»„ä¸­é€‰æ‹©ã€‚iteratee ä¼šä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼š<code>(value)</code>ã€‚</li><li><code>_.intersectionWith([arrays], [comparator])</code>: è¿™ä¸ªæ–¹æ³•ç±»ä¼¼ <code>_.intersection</code>ï¼ŒåŒºåˆ«æ˜¯å®ƒæ¥å—ä¸€ä¸ª <code>comparator</code> è°ƒç”¨æ¯”è¾ƒ arrays ä¸­çš„å…ƒç´ ã€‚ç»“æœå€¼æ˜¯ä»ç¬¬ä¸€æ•°ç»„ä¸­é€‰æ‹©ã€‚<code>comparator</code> ä¼šä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼š<code>(arrVal, othVal)</code>ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"><span class="comment">// intersection</span></span><br><span class="line">_.<span class="title function_">intersection</span>([<span class="number">2</span>, <span class="number">1</span>], [<span class="number">4</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">2</span>])) <span class="comment">// [2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// intersectionBy</span></span><br><span class="line">_.<span class="title function_">intersectionBy</span>([<span class="number">2.1</span>, <span class="number">1.2</span>], [<span class="number">4.3</span>, <span class="number">2.4</span>], <span class="title class_">Math</span>.<span class="property">floor</span>) <span class="comment">// [2.1]</span></span><br><span class="line"><span class="comment">// The `_.property` iteratee shorthand.</span></span><br><span class="line">_.<span class="title function_">intersectionBy</span>([&#123; <span class="string">&#x27;x&#x27;</span>: <span class="number">1</span> &#125;], [&#123; <span class="string">&#x27;x&#x27;</span>: <span class="number">2</span> &#125;, &#123; <span class="string">&#x27;x&#x27;</span>: <span class="number">1</span> &#125;], <span class="string">&#x27;x&#x27;</span>) <span class="comment">// =&gt; [&#123; &#x27;x&#x27;: 1 &#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// intersectionWith</span></span><br><span class="line"><span class="keyword">var</span> objects = [&#123; <span class="string">&#x27;x&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">2</span> &#125;, &#123; <span class="string">&#x27;x&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">1</span> &#125;];</span><br><span class="line"><span class="keyword">var</span> others = [&#123; <span class="string">&#x27;x&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">1</span> &#125;, &#123; <span class="string">&#x27;x&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">2</span> &#125;];</span><br><span class="line">_.<span class="title function_">intersectionWith</span>(objects, others, _.<span class="property">isEqual</span>) <span class="comment">// [&#123; &#x27;x&#x27;: 1, &#x27;y&#x27;: 2 &#125;]</span></span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„å·®é›†"><a href="#æ•°ç»„å·®é›†" class="headerlink" title="æ•°ç»„å·®é›†"></a>æ•°ç»„å·®é›†</h2><ul><li><code>_.difference(array, [values])</code>: åˆ›å»ºä¸€ä¸ªå…·æœ‰å”¯ä¸€ array å€¼çš„æ•°ç»„ï¼Œæ¯ä¸ªå€¼ä¸åŒ…å«åœ¨å…¶ä»–ç»™å®šçš„æ•°ç»„ä¸­ã€‚ï¼ˆå³åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„ä¸­çš„å€¼ï¼Œä¸ºç¬¬ä¸€ä¸ªæ•°å­—ï¼ˆarray å‚æ•°ï¼‰æ’é™¤äº†ç»™å®šæ•°ç»„ä¸­çš„å€¼ã€‚ï¼‰è¯¥æ–¹æ³•ä½¿ç”¨ SameValueZero åšç›¸ç­‰æ¯”è¾ƒã€‚ç»“æœå€¼çš„é¡ºåºæ˜¯ç”±ç¬¬ä¸€ä¸ªæ•°ç»„ä¸­çš„é¡ºåºç¡®å®šã€‚</li><li><code>_.differenceBy(array, [values], [iteratee=_.identity])</code>: è¿™ä¸ªæ–¹æ³•ç±»ä¼¼ _.difference ï¼Œé™¤äº†å®ƒæ¥å—ä¸€ä¸ª iteratee ï¼ˆè¿­ä»£å™¨ï¼‰ï¼Œ è°ƒç”¨ array å’Œ values ä¸­çš„æ¯ä¸ªå…ƒç´ ä»¥äº§ç”Ÿæ¯”è¾ƒçš„æ ‡å‡†ã€‚ ç»“æœå€¼æ˜¯ä»ç¬¬ä¸€æ•°ç»„ä¸­é€‰æ‹©ã€‚iteratee ä¼šè°ƒç”¨ä¸€ä¸ªå‚æ•°ï¼š(value)ã€‚ï¼ˆé¦–å…ˆä½¿ç”¨è¿­ä»£å™¨åˆ†åˆ«è¿­ä»£ array å’Œ values ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œè¿”å›çš„å€¼ä½œä¸ºæ¯”è¾ƒå€¼ï¼‰ã€‚</li><li><code>_.differenceWith(array, [values], [comparator])</code>: è¿™ä¸ªæ–¹æ³•ç±»ä¼¼ <code>_.difference</code> ï¼Œé™¤äº†å®ƒæ¥å—ä¸€ä¸ª <code>comparator</code> ï¼ˆæ¯”è¾ƒå™¨ï¼‰ï¼Œå®ƒè°ƒç”¨æ¯”è¾ƒ <code>array</code>ï¼Œ<code>values</code> ä¸­çš„å…ƒç´ ã€‚ ç»“æœå€¼æ˜¯ä»ç¬¬ä¸€æ•°ç»„ä¸­é€‰æ‹©ã€‚<code>comparator</code> è°ƒç”¨å‚æ•°æœ‰ä¸¤ä¸ªï¼š<code>(arrVal, othVal)</code>ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// difference</span></span><br><span class="line">_.<span class="title function_">difference</span>([<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>], [<span class="number">4</span>, <span class="number">2</span>]) <span class="comment">// [3, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// differenceBy</span></span><br><span class="line">_.<span class="title function_">differenceBy</span>([<span class="number">3.1</span>, <span class="number">2.2</span>, <span class="number">1.3</span>], [<span class="number">4.4</span>, <span class="number">2.5</span>], <span class="title class_">Math</span>.<span class="property">floor</span>) <span class="comment">// [3.1, 1.3]</span></span><br><span class="line"><span class="comment">// The `_.property` iteratee shorthand.</span></span><br><span class="line">_.<span class="title function_">differenceBy</span>([&#123; <span class="attr">x</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], [&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], <span class="string">&#x27;x&#x27;</span>) <span class="comment">// [&#123; &#x27;x&#x27;: 2 &#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// differenceWith</span></span><br><span class="line"><span class="keyword">var</span> objects = [</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">2</span>, <span class="attr">y</span>: <span class="number">1</span> &#125;,</span><br><span class="line">]</span><br><span class="line">_.<span class="title function_">differenceWith</span>(objects, [&#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;], _.<span class="property">isEqual</span>) <span class="comment">// [&#123; &#x27;x&#x27;: 2, &#x27;y&#x27;: 1 &#125;]</span></span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„åˆ†ç»„"><a href="#æ•°ç»„åˆ†ç»„" class="headerlink" title="æ•°ç»„åˆ†ç»„"></a>æ•°ç»„åˆ†ç»„</h2><ul><li><code>_.groupBy(collection, [iteratee=_.identity])</code>: åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œ<code>key</code> æ˜¯ <code>iteratee</code> éå† <code>collection</code>(é›†åˆ) ä¸­çš„æ¯ä¸ªå…ƒç´ è¿”å›çš„ç»“æœã€‚ åˆ†ç»„å€¼çš„é¡ºåºæ˜¯ç”±ä»–ä»¬å‡ºç°åœ¨ <code>collection</code>(é›†åˆ) ä¸­çš„é¡ºåºç¡®å®šçš„ã€‚æ¯ä¸ªé”®å¯¹åº”çš„å€¼è´Ÿè´£ç”Ÿæˆ <code>key</code> çš„å…ƒç´ ç»„æˆçš„æ•°ç»„ã€‚<code>iteratee</code> è°ƒç”¨ 1 ä¸ªå‚æ•°ï¼š (<code>value</code>)ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"></span><br><span class="line">_.<span class="title function_">groupBy</span>([<span class="number">6.1</span>, <span class="number">4.2</span>, <span class="number">6.3</span>], <span class="title class_">Math</span>.<span class="property">floor</span>) <span class="comment">// &#123; &#x27;4&#x27;: [4.2], &#x27;6&#x27;: [6.1, 6.3] &#125;</span></span><br><span class="line"><span class="comment">// The `_.property` iteratee shorthand.</span></span><br><span class="line">_.<span class="title function_">groupBy</span>([<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>], <span class="string">&#x27;length&#x27;</span>) <span class="comment">// &#123; &#x27;3&#x27;: [&#x27;one&#x27;, &#x27;two&#x27;], &#x27;5&#x27;: [&#x27;three&#x27;] &#125;</span></span><br><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;æ¨ä¿Šå®&#x27;</span>, <span class="attr">province</span>: <span class="string">&#x27;æ²³å—&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;å®‹å…‰åˆš&#x27;</span>, <span class="attr">province</span>: <span class="string">&#x27;æ²³å—&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;è°¢æ™§æ›œ&#x27;</span>, <span class="attr">province</span>: <span class="string">&#x27;æ±Ÿè‹&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;æç‚å¨&#x27;</span>, <span class="attr">province</span>: <span class="string">&#x27;æ²³å—&#x27;</span> &#125;,</span><br><span class="line">]</span><br><span class="line">_.<span class="title function_">groupBy</span>(students, <span class="string">&#x27;province&#x27;</span>)</span><br><span class="line"><span class="comment">// &#123; &#x27;æ±Ÿè‹&#x27;: [&#123; name: &#x27;è°¢æ™§æ›œ&#x27;, province: &#x27;æ±Ÿè‹&#x27; &#125;], &#x27;æ²³å—&#x27;: [&#123; name: &#x27;æ¨ä¿Šå®&#x27;, province: &#x27;æ²³å—&#x27; &#125;, &#123; name: &#x27;å®‹å…‰åˆš&#x27;, province: &#x27;æ²³å—&#x27; &#125;,&#123; name: &#x27;æç‚å¨&#x27;, province: &#x27;æ²³å—&#x27; &#125;] &#125;</span></span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æ•°ç»„é¡¹"><a href="#åˆ é™¤æ•°ç»„é¡¹" class="headerlink" title="åˆ é™¤æ•°ç»„é¡¹"></a>åˆ é™¤æ•°ç»„é¡¹</h2><h3 id="æ ¹æ®æ–­è¨€åˆ é™¤æ•°ç»„é¡¹"><a href="#æ ¹æ®æ–­è¨€åˆ é™¤æ•°ç»„é¡¹" class="headerlink" title="æ ¹æ®æ–­è¨€åˆ é™¤æ•°ç»„é¡¹"></a>æ ¹æ®æ–­è¨€åˆ é™¤æ•°ç»„é¡¹</h3><ul><li><code>remove</code>: ç§»é™¤æ•°ç»„ä¸­ predicateï¼ˆæ–­è¨€ï¼‰è¿”å›ä¸ºçœŸå€¼çš„æ‰€æœ‰å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤å…ƒç´ ç»„æˆçš„æ•°ç»„ã€‚predicateï¼ˆæ–­è¨€ï¼‰ ä¼šä¼ å…¥ 3 ä¸ªå‚æ•°ï¼š (<code>value</code>, <code>index</code>, <code>array</code>)ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">const</span> evens = _.<span class="title function_">remove</span>(array, <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array) <span class="comment">// =&gt; [1, 3]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(evens) <span class="comment">// =&gt; [2, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;æ¨ä¿Šå®&#x27;</span>, <span class="attr">province</span>: <span class="string">&#x27;æ²³å—&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;å®‹å…‰åˆš&#x27;</span>, <span class="attr">province</span>: <span class="string">&#x27;æ²³å—&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;è°¢æ™§æ›œ&#x27;</span>, <span class="attr">province</span>: <span class="string">&#x27;æ±Ÿè‹&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;æç‚å¨&#x27;</span>, <span class="attr">province</span>: <span class="string">&#x27;æ²³å—&#x27;</span> &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> removedStudent = _.<span class="title function_">remove</span>(students, <span class="function"><span class="params">student</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> student.<span class="property">province</span> === <span class="string">&#x27;æ±Ÿè‹&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(students)</span><br><span class="line"><span class="comment">// [&#123;name: &quot;æ¨ä¿Šå®&quot;, province: &quot;æ²³å—&quot;&#125;, &#123;name: &quot;å®‹å…‰åˆš&quot;, province: &quot;æ²³å—&quot;&#125;, &#123;name: &quot;æç‚å¨&quot;, province: &quot;æ²³å—&quot;&#125;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(removedStudent)</span><br><span class="line"><span class="comment">// [&#123;name: &quot;è°¢æ™§æ›œ&quot;, province: &quot;æ±Ÿè‹&quot;&#125;]</span></span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®ç»™å®šå€¼åˆ é™¤æ•°ç»„é¡¹"><a href="#æ ¹æ®ç»™å®šå€¼åˆ é™¤æ•°ç»„é¡¹" class="headerlink" title="æ ¹æ®ç»™å®šå€¼åˆ é™¤æ•°ç»„é¡¹"></a>æ ¹æ®ç»™å®šå€¼åˆ é™¤æ•°ç»„é¡¹</h3><ul><li><code>_.pull(array, [values])</code>: ç§»é™¤æ•°ç»„ array ä¸­æ‰€æœ‰å’Œç»™å®šå€¼ç›¸ç­‰çš„å…ƒç´ ï¼Œä½¿ç”¨ SameValueZero è¿›è¡Œå…¨ç­‰æ¯”è¾ƒã€‚</li><li><code>_.pullAll(array, values)</code>: è¿™ä¸ªæ–¹æ³•ç±»ä¼¼ _.pullï¼ŒåŒºåˆ«æ˜¯è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªè¦ç§»é™¤å€¼çš„æ•°ç»„ã€‚</li><li><code>_.pullAllBy(array, values, [iteratee=_.identity])</code>: è¿™ä¸ªæ–¹æ³•ç±»ä¼¼äº <code>_.pullAll</code> ï¼ŒåŒºåˆ«æ˜¯è¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ª <code>iteratee</code>ï¼ˆè¿­ä»£å‡½æ•°ï¼‰ è°ƒç”¨ <code>array</code> å’Œ <code>values</code>çš„æ¯ä¸ªå€¼ä»¥äº§ç”Ÿä¸€ä¸ªå€¼ï¼Œé€šè¿‡äº§ç”Ÿçš„å€¼è¿›è¡Œäº†æ¯”è¾ƒã€‚<code>iteratee</code> ä¼šä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼š (<code>value</code>)ã€‚</li><li><code>_.pullAllWith(array, values, [comparator])</code>: è¿™ä¸ªæ–¹æ³•ç±»ä¼¼äº <code>_.pullAll</code>ï¼ŒåŒºåˆ«æ˜¯è¿™ä¸ªæ–¹æ³•æ¥å— <code>comparator</code> è°ƒç”¨ <code>array</code> ä¸­çš„å…ƒç´ å’Œ <code>values</code> æ¯”è¾ƒã€‚<code>comparator</code> ä¼šä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼š(<code>arrVal</code>, <code>othVal</code>)ã€‚</li></ul><blockquote><p>pull ç³»åˆ—å’Œ difference ç³»åˆ—ä¸åŒä¹‹å¤„åœ¨äº pull ç³»åˆ—æ–¹æ³•ä¼šæ”¹å˜æ•°ç»„ array</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// pull</span></span><br><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">_.<span class="title function_">pull</span>(array, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array) <span class="comment">// [1, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// pullAll</span></span><br><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">_.<span class="title function_">pullAll</span>(array, [<span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array) <span class="comment">// [1, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// pullAllBy</span></span><br><span class="line"><span class="keyword">var</span> array = [&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">3</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;]</span><br><span class="line">_.<span class="title function_">pullAllBy</span>(array, [&#123; <span class="attr">x</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">3</span> &#125;], <span class="string">&#x27;x&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array) <span class="comment">// [&#123; &#x27;x&#x27;: 1 &#125;, &#123; &#x27;x&#x27;: 1 &#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// pullAllWith</span></span><br><span class="line"><span class="keyword">var</span> array = [</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">4</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">5</span>, <span class="attr">y</span>: <span class="number">6</span> &#125;,</span><br><span class="line">]</span><br><span class="line">_.<span class="title function_">pullAllWith</span>(array, [&#123; <span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">4</span> &#125;], _.<span class="property">isEqual</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array) <span class="comment">// [&#123; &#x27;x&#x27;: 1, &#x27;y&#x27;: 2 &#125;, &#123; &#x27;x&#x27;: 5, &#x27;y&#x27;: 6 &#125;]</span></span><br></pre></td></tr></table></figure><ul><li><code>_.pullAt(array, [indexes])</code>: æ ¹æ®ç´¢å¼• <code>indexes</code>ï¼Œç§»é™¤ <code>array</code> ä¸­å¯¹åº”çš„å…ƒç´ ï¼Œå¹¶è¿”å›è¢«ç§»é™¤å…ƒç´ çš„æ•°ç»„ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> array = [<span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>]</span><br><span class="line"><span class="keyword">var</span> evens = _.<span class="title function_">pullAt</span>(array, <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array) <span class="comment">// [5, 15]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(evens) <span class="comment">// [10, 20]</span></span><br></pre></td></tr></table></figure><ul><li><code>_.without(array, [values])</code>: åˆ›å»ºä¸€ä¸ªå‰”é™¤æ‰€æœ‰ç»™å®šå€¼çš„æ–°æ•°ç»„ï¼Œå‰”é™¤å€¼çš„æ—¶å€™ï¼Œä½¿ç”¨ SameValueZero åšç›¸ç­‰æ¯”è¾ƒã€‚ä¸åƒ <code>_.pull</code>, è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"></span><br><span class="line">_.<span class="title function_">without</span>([<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">1</span>, <span class="number">2</span>) <span class="comment">// [3]</span></span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„å»é‡"><a href="#æ•°ç»„å»é‡" class="headerlink" title="æ•°ç»„å»é‡"></a>æ•°ç»„å»é‡</h2><ul><li><code>_.uniq(array)</code>: åˆ›å»ºä¸€ä¸ªå»é‡åçš„ array æ•°ç»„å‰¯æœ¬ã€‚ä½¿ç”¨äº† SameValueZero åšç­‰å€¼æ¯”è¾ƒã€‚åªæœ‰ç¬¬ä¸€æ¬¡å‡ºç°çš„å…ƒç´ æ‰ä¼šè¢«ä¿ç•™ã€‚</li><li><code>_.uniqBy(array, [iteratee=_.identity])</code>: è¿™ä¸ªæ–¹æ³•ç±»ä¼¼ <code>_.uniq</code> ï¼Œé™¤äº†å®ƒæ¥å—ä¸€ä¸ª <code>iteratee</code>ï¼ˆè¿­ä»£å‡½æ•°ï¼‰ï¼Œè°ƒç”¨æ¯ä¸€ä¸ªæ•°ç»„ï¼ˆ<code>array</code>ï¼‰çš„æ¯ä¸ªå…ƒç´ ä»¥äº§ç”Ÿå”¯ä¸€æ€§è®¡ç®—çš„æ ‡å‡†ã€‚<code>iteratee</code> è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼š(<code>value</code>)ã€‚</li><li><code>_.uniqWith(array, [comparator])</code>: è¿™ä¸ªæ–¹æ³•ç±»ä¼¼ <code>_.uniq</code>ï¼Œ é™¤äº†å®ƒæ¥å—ä¸€ä¸ª <code>comparator</code> è°ƒç”¨æ¯”è¾ƒ <code>array</code> æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚ <code>comparator</code> è°ƒç”¨æ—¶ä¼šä¼ å…¥ 2 ä¸ªå‚æ•°ï¼š(<code>arrVal</code>, <code>othVal</code>)ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// uniq</span></span><br><span class="line">_.<span class="title function_">uniq</span>([<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>]) <span class="comment">// [2, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// uniqBy</span></span><br><span class="line">_.<span class="title function_">uniqBy</span>([<span class="number">2.1</span>, <span class="number">1.2</span>, <span class="number">2.3</span>], <span class="title class_">Math</span>.<span class="property">floor</span>) <span class="comment">// [2.1, 1.2]</span></span><br><span class="line"><span class="comment">// The `_.property` iteratee shorthand.</span></span><br><span class="line">_.<span class="title function_">uniqBy</span>([&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], <span class="string">&#x27;x&#x27;</span>) <span class="comment">// [&#123; &#x27;x&#x27;: 1 &#125;, &#123; &#x27;x&#x27;: 2 &#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// uniqWith</span></span><br><span class="line"><span class="keyword">var</span> objects = [</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">2</span>, <span class="attr">y</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;,</span><br><span class="line">]</span><br><span class="line">_.<span class="title function_">uniqWith</span>(objects, _.<span class="property">isEqual</span>) <span class="comment">// [&#123; &#x27;x&#x27;: 1, &#x27;y&#x27;: 2 &#125;, &#123; &#x27;x&#x27;: 2, &#x27;y&#x27;: 1 &#125;]</span></span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„æ’åº"><a href="#æ•°ç»„æ’åº" class="headerlink" title="æ•°ç»„æ’åº"></a>æ•°ç»„æ’åº</h2><ul><li><code>_.sortBy(collection, [iteratees=[_.identity]])</code>: åˆ›å»ºä¸€ä¸ªå…ƒç´ æ•°ç»„ã€‚ ä»¥ <code>iteratee</code> å¤„ç†çš„ç»“æœå‡åºæ’åºã€‚ è¿™ä¸ªæ–¹æ³•æ‰§è¡Œç¨³å®šæ’åºï¼Œä¹Ÿå°±æ˜¯è¯´ç›¸åŒå…ƒç´ ä¼šä¿æŒåŸå§‹æ’åºã€‚ <code>iteratees</code> è°ƒç”¨1ä¸ªå‚æ•°ï¼š(<code>value</code>)ã€‚å¯ä»¥ä½¿ç”¨ <code>Array.prototype.reverse</code> æ–¹æ³•å€’åº</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> users = [</span><br><span class="line">  &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;fred&#x27;</span> &#125;, <span class="attr">age</span>: <span class="number">48</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;barney&#x27;</span> &#125;, <span class="attr">age</span>: <span class="number">36</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;fred&#x27;</span> &#125;, <span class="attr">age</span>: <span class="number">40</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;barney&#x27;</span> &#125;, <span class="attr">age</span>: <span class="number">34</span> &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// The `_.property` iteratee shorthand.</span></span><br><span class="line">_.<span class="title function_">sortBy</span>(users, <span class="string">&#x27;user.name&#x27;</span>)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * [</span></span><br><span class="line"><span class="comment"> *  &#123;age: 34, user: &quot;barney&quot;&#125;,</span></span><br><span class="line"><span class="comment"> *  &#123;age: 36, user: &quot;barney&quot;&#125;,</span></span><br><span class="line"><span class="comment"> *  &#123;age: 40, user: &quot;fred&quot;&#125;,</span></span><br><span class="line"><span class="comment"> *  &#123;age: 48, user: &quot;fred&quot;&#125;</span></span><br><span class="line"><span class="comment"> * ]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„é™ç»´"><a href="#æ•°ç»„é™ç»´" class="headerlink" title="æ•°ç»„é™ç»´"></a>æ•°ç»„é™ç»´</h2><ul><li><code>_.flatten(array)</code>: å‡å°‘ä¸€çº§ <code>array</code> åµŒå¥—æ·±åº¦ã€‚</li><li><code>_.flattenDeep(array)</code>: å°† <code>array</code> é€’å½’ä¸ºä¸€ç»´æ•°ç»„ã€‚</li><li><code>_.flattenDepth(array, [depth=1])</code>: æ ¹æ® <code>depth</code> é€’å½’å‡å°‘ <code>array</code> çš„åµŒå¥—å±‚çº§</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// flatten</span></span><br><span class="line">_.<span class="title function_">flatten</span>([<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>]], <span class="number">5</span>]]) <span class="comment">// [1, 2, [3, [4]], 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// flattenDeep</span></span><br><span class="line">_.<span class="title function_">flattenDeep</span>([<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>]], <span class="number">5</span>]]) <span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// flattenDepth</span></span><br><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>]], <span class="number">5</span>]]</span><br><span class="line">_.<span class="title function_">flattenDepth</span>(array, <span class="number">1</span>) <span class="comment">// [1, 2, [3, [4]], 5]</span></span><br><span class="line">_.<span class="title function_">flattenDepth</span>(array, <span class="number">2</span>) <span class="comment">// [1, 2, 3, [4], 5]</span></span><br><span class="line">_.<span class="title function_">flattenDepth</span>(array, <span class="number">3</span>) <span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><h2 id="è·å–éƒ¨åˆ†å…ƒç´ "><a href="#è·å–éƒ¨åˆ†å…ƒç´ " class="headerlink" title="è·å–éƒ¨åˆ†å…ƒç´ "></a>è·å–éƒ¨åˆ†å…ƒç´ </h2><ul><li><code>_.initial(array)</code>: è·å–æ•°ç»„ <code>array</code> ä¸­é™¤äº†æœ€åä¸€ä¸ªå…ƒç´ ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ ï¼ˆå»é™¤æ•°ç»„arrayä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ã€‚</li><li><code>_.tail(array)</code>: è·å–é™¤äº† <code>array</code> æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ä»¥å¤–çš„å…¨éƒ¨å…ƒç´ ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ECMAScript æ•°ç»„çš„æ¯ä¸€é¡¹å¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ï¼›è€Œä¸”å¤§å°æ˜¯å¯ä»¥åŠ¨æ€è°ƒæ•´çš„ï¼Œå³å¯ä»¥éšç€æ•°æ®çš„æ·»åŠ è‡ªåŠ¨å¢é•¿ä»¥å®¹çº³æ–°å¢æ•°æ®ã€‚&lt;/p&gt;
&lt;h1 id=&quot;åˆ›å»ºæ•°ç»„&quot;&gt;&lt;a href=&quot;#åˆ›å»ºæ•°ç»„&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºæ•°ç»„&quot;&gt;&lt;/a&gt;åˆ›å»º</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="JavaScript" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="https://youngjuning.js.org/tags/JavaScript/"/>
    
    <category term="Array" scheme="https://youngjuning.js.org/tags/Array/"/>
    
    <category term="ECMAScript" scheme="https://youngjuning.js.org/tags/ECMAScript/"/>
    
  </entry>
  
  <entry>
    <title>react-native-create-library ä¸­æ–‡æ–‡æ¡£</title>
    <link href="https://youngjuning.js.org/201099a9ba42/"/>
    <id>https://youngjuning.js.org/201099a9ba42/</id>
    <published>2023-03-08T08:53:10.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<p>react-native-create-library ä½¿ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤åˆ›å»º React Native åŸç”Ÿåº“çš„å·¥å…·</p><h3 id="ä¸€ã€ä½ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªï¼Ÿ"><a href="#ä¸€ã€ä½ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªï¼Ÿ" class="headerlink" title="ä¸€ã€ä½ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªï¼Ÿ"></a>ä¸€ã€ä½ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªï¼Ÿ</h3><p>å¦‚æœæ‚¨è¦ä¸º React Native åˆ›å»ºåŸç”Ÿæ¨¡å—ï¼Œåˆ™éœ€è¦ä¸ºè¦æ”¯æŒçš„æ¯ä¸ªå¹³å°æä¾›ä¸€äº›åŸç”Ÿä»£ç ï¼Œç„¶åå’Œä¸€äº› JavaScript ä»£ç ç»‘å®šåœ¨ä¸€èµ·ã€‚è‡ªå·±è®¾ç½®å¯èƒ½éå¸¸è€—æ—¶ã€‚</p><p>è¿™å°±æ˜¯è¿™ä¸ªå·¥å…·çš„ç”¨æ­¦ä¹‹åœ°ã€‚å®ƒåˆ›å»ºäº†ä¸€ä¸ªåŒ…å«æ‰€æœ‰å½“å‰æœ€ä½³å®è·µçš„æ ·æ¿ã€‚ä¸ºä»€ä¹ˆä¸ç”¨ <code>react-native new-library</code>ï¼Ÿä¸å¹¸çš„æ˜¯ï¼Œè¯¥å‘½ä»¤ä¸ä¼šåˆ›å»ºä¸€ä¸ªæœ€æ–°çš„åº“ï¼Œéœ€è¦ä¸€ä¸ªå·²ç»åˆå§‹åŒ–çš„ React Native é¡¹ç›®ï¼Œå¹¶ä¸”åªè®¾ç½® iOS æ–¹é¢çš„ä¸œè¥¿ã€‚</p><blockquote><p>è­¦å‘Šï¼šè¿™ä»…åˆ›å»ºæ²¡æœ‰è§†å›¾ç»„ä»¶çš„åŸç”Ÿæ¨¡å—ã€‚</p></blockquote><h3 id="äºŒã€å®‰è£…"><a href="#äºŒã€å®‰è£…" class="headerlink" title="äºŒã€å®‰è£…"></a>äºŒã€å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g react-native-create-library</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å°†ä¼šåˆ›å»ºä¸€ä¸ª <code>MyFancyLibrary</code> æ–‡ä»¶å¤¹ï¼Œç°åœ¨å¯ä»¥æ‰§è¡Œ <code>yarn install</code> æ¥ä¸ºä½ æ–°åˆ›å»ºçš„ <code>Library</code> å®‰è£…ä¾èµ–ã€‚</p><h3 id="ä¸‰ã€å‘½ä»¤"><a href="#ä¸‰ã€å‘½ä»¤" class="headerlink" title="ä¸‰ã€å‘½ä»¤"></a>ä¸‰ã€å‘½ä»¤</h3><blockquote><p><code>react-native-create-library [options] &lt;name&gt;</code></p></blockquote><p><strong>é€‰é¡¹ï¼š</strong></p><ul><li><code>-h</code>ã€<code>--help</code>: è¾“å…¥æœ‰ç”¨çš„ä¿¡æ¯</li><li><code>-V</code>ã€<code>--version</code>: è¾“å‡ºç‰ˆæœ¬å·</li><li><code>-p</code>ã€<code>--prefix &lt;prefix&gt;</code>: åº“çš„å‰ç¼€ï¼ˆé»˜è®¤ï¼š<code>RN</code>ï¼‰</li><li><code>--module-prefix &lt;modulePrefix&gt;</code>: åº“çš„æ¨¡å—å‰ç¼€ï¼ˆnpmï¼‰ï¼ˆé»˜è®¤<code>react-native</code>ï¼‰</li><li><code>--package-identifier &lt;packageIdentifier&gt;</code>: (Android only!) The package name for the Android module (Default: <code>com.reactlibrary</code>)</li><li><code>--namespace &lt;namespace&gt;</code>: (Windows only!) The namespace for the Windows module(Default: The name as PascalCase)</li><li><code>--platforms &lt;platforms&gt;</code>: æ”¯æŒçš„å¹³å°ï¼ˆç”¨é€—å·éš”å¼€ï¼Œé»˜è®¤ï¼š<code>ios,android,windows</code>ï¼‰</li><li><code>--github-account &lt;github_account&gt;</code>: æ‰˜ç®¡åº“çš„ github è´¦å·ï¼ˆé»˜è®¤ï¼š<code>github_account</code>ï¼‰</li><li><code>--author-name &lt;name&gt;</code>: ä½œè€…çš„åå­—ï¼ˆé»˜è®¤ï¼š<code>Your Name</code>ï¼‰</li><li><code>--author-name &lt;email&gt;</code>: ä½œè€…çš„é‚®ç®±ï¼ˆé»˜è®¤ï¼š<code>yourname@email.com</code>ï¼‰</li><li><code>--license &lt;license&gt;</code>: The license type of this library (Default: <code>Apache-2.0</code>)</li><li><code>--generate-example &lt;shouldGenerate&gt;</code>: ä¼šç”Ÿæˆä¸€ä¸ª RN ä¾‹å­å¹¶ä¸” <code>link</code> åˆšç”Ÿæˆçš„åº“ï¼ˆé»˜è®¤ï¼š<code>false</code>ï¼‰</li></ul><h3 id="å››ã€ç¨‹åºåŒ–ä½¿ç”¨"><a href="#å››ã€ç¨‹åºåŒ–ä½¿ç”¨" class="headerlink" title="å››ã€ç¨‹åºåŒ–ä½¿ç”¨"></a>å››ã€ç¨‹åºåŒ–ä½¿ç”¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createLibrary = <span class="built_in">require</span>(<span class="string">&#x27;react-native-create-library&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">createLibrary</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;MyFancyLibrary&#x27;</span>,</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Oh yay! My library has been created!&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="title class_">String</span>, <span class="comment">/* The name of the library (Default: Library) */</span></span><br><span class="line">  <span class="attr">prefix</span>: <span class="title class_">String</span>, <span class="comment">/* The prefix for the library (Default: RN) */</span></span><br><span class="line">  <span class="attr">modulePrefix</span>: <span class="title class_">String</span>, <span class="comment">/* The module prefix for the library (Default: react-native) */</span></span><br><span class="line">  <span class="attr">platforms</span>: <span class="title class_">Array</span>, <span class="comment">/* Platforms the library will be created for. (Default: [&#x27;ios&#x27;, &#x27;android&#x27;, &#x27;windows&#x27;]) */</span></span><br><span class="line">  <span class="attr">packageIdentifier</span>: <span class="title class_">String</span>, <span class="comment">/* (Android only!) The package name for the Android module (Default: com.reactlibrary) */</span></span><br><span class="line">  <span class="attr">namespace</span>: <span class="title class_">String</span>, <span class="comment">/* (Windows only!) The namespace for the Windows module (Default: The package identifier as PascalCase, which is `Com.Reactlibrary`) */</span></span><br><span class="line">  <span class="attr">githubAccount</span>: <span class="title class_">String</span>, <span class="comment">/* The github account where the library is hosted (Default: `github_account`) */</span></span><br><span class="line">  <span class="attr">authorName</span>: <span class="title class_">String</span>, <span class="comment">/* The author&#x27;s name (Default: `Your Name`) */</span></span><br><span class="line">  <span class="attr">authorEmail</span>: <span class="title class_">String</span>, <span class="comment">/* The author&#x27;s email (Default: `yourname@email.com`) */</span></span><br><span class="line">  <span class="attr">license</span>: <span class="title class_">String</span>, <span class="comment">/* The license type of this library (Default: `Apache-2.0`) */</span></span><br><span class="line">  <span class="attr">generateExample</span>: <span class="title class_">Boolean</span>, <span class="comment">/* Will generate a RN example project and link the new library to it (Default: `false`) */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;react-native-create-library ä½¿ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤åˆ›å»º React Native åŸç”Ÿåº“çš„å·¥å…·&lt;/p&gt;
&lt;h3 id=&quot;ä¸€ã€ä½ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä¸€ã€ä½ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€</summary>
      
    
    
    
    <category term="æ´›ç«¹ç¿»è¯‘è®¡åˆ’" scheme="https://youngjuning.js.org/categories/%E6%B4%9B%E7%AB%B9%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/"/>
    
    <category term="React Native" scheme="https://youngjuning.js.org/categories/%E6%B4%9B%E7%AB%B9%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/React-Native/"/>
    
    
    <category term="React Native" scheme="https://youngjuning.js.org/tags/React-Native/"/>
    
    <category term="React Native åŸç”Ÿåº“" scheme="https://youngjuning.js.org/tags/React-Native-%E5%8E%9F%E7%94%9F%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>React é¢è¯•å¿…çŸ¥å¿…ä¼š</title>
    <link href="https://youngjuning.js.org/react-interview/"/>
    <id>https://youngjuning.js.org/react-interview/</id>
    <published>2023-03-06T11:30:00.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<h1 id="React-æ ¸å¿ƒ"><a href="#React-æ ¸å¿ƒ" class="headerlink" title="React æ ¸å¿ƒ"></a>React æ ¸å¿ƒ</h1><h2 id="1-ä»€ä¹ˆæ˜¯-Reactï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯-Reactï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ Reactï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯ Reactï¼Ÿ</h2><p>React æ˜¯ä¸€ä¸ª<strong>å¼€æºå‰ç«¯ JavaScript åº“</strong>ï¼Œç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢ï¼Œå°¤å…¶æ˜¯å•é¡µåº”ç”¨ç¨‹åºã€‚å®ƒç”¨äºå¤„ç† Web å’Œç§»åŠ¨åº”ç”¨ç¨‹åºçš„è§†å›¾å±‚ã€‚React æ˜¯ç”± Facebook çš„è½¯ä»¶å·¥ç¨‹å¸ˆ <a href="https://github.com/jordwalke">ä¹”ä¸¹Â·æ²ƒå…‹</a> åˆ›å»ºçš„ã€‚React äº 2011 å¹´åœ¨ Facebook çš„ News Feed ä¸Šé¦–æ¬¡å‘å¸ƒï¼Œ2012 å¹´é¦–æ¬¡åœ¨ Instagram å‘å¸ƒã€‚</p><h2 id="2-React-çš„ä¸»è¦ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-React-çš„ä¸»è¦ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. React çš„ä¸»è¦ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2. React çš„ä¸»è¦ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>React çš„ä¸»è¦ç‰¹æ€§æ˜¯:</p><ul><li>è€ƒè™‘åˆ° DOM æ“ä½œå†…å­˜å¼€é”€å¤§ï¼ŒReact ä½¿ç”¨<strong>è™šæ‹Ÿ DOMï¼ˆVirtualDOMï¼‰</strong> æ›¿ä»£äº†çœŸå® DOMï¼ˆRealDOMï¼‰</li><li>æ”¯æŒ<strong>æœåŠ¡ç«¯æ¸²æŸ“</strong></li><li>éµå¾ª<strong>å•å‘</strong>æ•°æ®æµæˆ–æ•°æ®ç»‘å®š</li><li>ä½¿ç”¨<strong>å¯å¤ç”¨&#x2F;å¯ç»„åˆ</strong>çš„ UI ç»„ä»¶æ¥è¿›è¡Œè§†å›¾å¼€å‘</li></ul><h2 id="3-ä»€ä¹ˆæ˜¯-JSXï¼Ÿ"><a href="#3-ä»€ä¹ˆæ˜¯-JSXï¼Ÿ" class="headerlink" title="3. ä»€ä¹ˆæ˜¯ JSXï¼Ÿ"></a>3. ä»€ä¹ˆæ˜¯ JSXï¼Ÿ</h2><p>JSX æ˜¯ ECMAScript çš„ç±»ä¼¼ XML çš„è¯­æ³•æ‰©å±•ï¼ˆç¼©å†™æ˜¯ JavaScript XMLï¼‰ã€‚å®é™…ä¸Šï¼Œå®ƒåªæ˜¯ä¸º <code>React.createElement()</code> å‡½æ•°æä¾›è¯­æ³•ç³–ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†åœ¨ JavaScript ä¸­ä½¿ç”¨ç±» HTML æ¨¡æ¿è¯­æ³•çš„èƒ½åŠ›ã€‚</p><p>ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>&lt;h1&gt;</code> æ ‡ç­¾å†…çš„æ–‡æœ¬ä¼šä½œä¸º JavaScript å‡½æ•°ï¼ˆ<code>React.createElement()</code>ï¼‰çš„è¿”å›å€¼è¿”å›ç»™ render å‡½æ•°ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#x27;Welcome to React world!&#x27;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-å…ƒç´ ï¼ˆElementï¼‰å’Œç»„ä»¶ï¼ˆComponentï¼‰çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#4-å…ƒç´ ï¼ˆElementï¼‰å’Œç»„ä»¶ï¼ˆComponentï¼‰çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="4. å…ƒç´ ï¼ˆElementï¼‰å’Œç»„ä»¶ï¼ˆComponentï¼‰çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>4. å…ƒç´ ï¼ˆElementï¼‰å’Œç»„ä»¶ï¼ˆComponentï¼‰çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å…ƒç´ æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œå®ƒæè¿°äº†ä½ å¸Œæœ›ä»¥ DOM èŠ‚ç‚¹æˆ–å…¶ä»–ç»„ä»¶çš„å½¢å¼å‡ºç°åœ¨å±å¹•ä¸Šçš„å†…å®¹ã€‚å…ƒç´ å¯ä»¥åœ¨å…¶ props ä¸­åŒ…å«å…¶ä»– å…ƒç´ ã€‚åˆ›å»ºä¸€ä¸ª React å…ƒç´ å¼€é”€å¾ˆå°ã€‚ä¸€æ—¦åˆ›å»ºäº†å…ƒç´ ï¼Œå°±æ°¸è¿œä¸ä¼šå¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</p><p>React Element çš„å¯¹è±¡è¡¨ç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">id</span>: <span class="string">&#x27;login-btn&#x27;</span> &#125;, <span class="string">&#x27;Login&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ <code>React.createElement()</code> å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¦‚ä¸‹çš„å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;div&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">children</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;login-btn&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆï¼Œå®ƒä¼šä½¿ç”¨ <code>ReactDOM.render()</code> å°†å…ƒç´ æ¸²æŸ“åˆ° DOMï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;login-btn&quot;</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è€Œ<strong>ç»„ä»¶</strong>å¯ä»¥ç”¨å‡ ç§ä¸åŒçš„æ–¹å¼å£°æ˜ã€‚å®ƒå¯ä»¥æ˜¯å¸¦æœ‰ <code>render()</code> æ–¹æ³•çš„ç±»ã€‚æˆ–è€…ï¼Œä½ å¯ä»¥ç®€å•åœ°å°†å…¶å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°ã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œå®ƒéƒ½å°† props ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å› JSX æ ‘ä½œä¸ºè¾“å‡ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Button</span> = (<span class="params">&#123; onLogin &#125;</span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#123;</span>&#x27;<span class="attr">login-btn</span>&#x27;&#125; <span class="attr">onClick</span>=<span class="string">&#123;onLogin&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    Login</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ç„¶åå°† JSX ç¼–è¯‘æˆ <code>React.createElement()</code> å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Button</span> = (<span class="params">&#123; onLogin &#125;</span>) =&gt;</span><br><span class="line">  <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">id</span>: <span class="string">&#x27;login-btn&#x27;</span>, <span class="attr">onClick</span>: onLogin &#125;, <span class="string">&#x27;Login&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="5-å¦‚ä½•åœ¨-React-ä¸­åˆ›å»ºç»„ä»¶ï¼Ÿ"><a href="#5-å¦‚ä½•åœ¨-React-ä¸­åˆ›å»ºç»„ä»¶ï¼Ÿ" class="headerlink" title="5. å¦‚ä½•åœ¨ React ä¸­åˆ›å»ºç»„ä»¶ï¼Ÿ"></a>5. å¦‚ä½•åœ¨ React ä¸­åˆ›å»ºç»„ä»¶ï¼Ÿ</h2><p>è¿™é‡Œæœ‰ä¸¤ç§å¯ä»¥ç”¨æ–¹å¼æ¥åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼š</p><ol><li><strong>å‡½æ•°ç»„ä»¶ï¼š</strong> è¿™æ˜¯åˆ›å»ºç»„ä»¶æœ€ç®€å•çš„æ–¹å¼ã€‚å®ƒä»¬æ˜¯çº¯ JavaScript å‡½æ•°ï¼Œæ¥å— props å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°å¹¶è¿”å› React å…ƒç´ ï¼š</li></ol><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Greeting</span>(<span class="params">&#123; message &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;`Hello, $&#123;message&#125;`&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>ç±»ç»„ä»¶ï¼š</strong> ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ ES6 çš„ class è¯­æ³•æ¥å®šä¹‰ä¸€ä¸ªç»„ä»¶ã€‚ä¸Šé¢çš„å‡½æ•°ç»„ä»¶å¯ä»¥è¢«æ”¹å†™ä¸ºï¼š</li></ol><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeting</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;`Hello, $&#123;this.props.message&#125;`&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-ä½•æ—¶é€‰æ‹©ç±»ç»„ä»¶æˆ–å‡½æ•°ç»„ä»¶"><a href="#6-ä½•æ—¶é€‰æ‹©ç±»ç»„ä»¶æˆ–å‡½æ•°ç»„ä»¶" class="headerlink" title="6. ä½•æ—¶é€‰æ‹©ç±»ç»„ä»¶æˆ–å‡½æ•°ç»„ä»¶"></a>6. ä½•æ—¶é€‰æ‹©ç±»ç»„ä»¶æˆ–å‡½æ•°ç»„ä»¶</h2><p>å¦‚æœä¸€ä¸ªç»„ä»¶éœ€è¦çŠ¶æ€æˆ–è€…ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåˆ™ä½¿ç”¨ç±»ç»„ä»¶ï¼Œå¦åˆ™ä½¿ç”¨å‡½æ•°ç»„ä»¶ã€‚</p><p>ç„¶è€Œï¼Œä» React 16.8 å¼•å…¥ Hooks åï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ä¹‹å‰åªåœ¨ç±»ç»„ä»¶ä¸­æœ‰çš„ç‰¹æ€§ï¼Œæ¯”å¦‚çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚</p><h2 id="7-Pure-Components-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#7-Pure-Components-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="7. Pure Components æ˜¯ä»€ä¹ˆï¼Ÿ"></a>7. Pure Components æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><code>React.PureComponent</code> ä¸ <code>React.Component</code> å‡ ä¹å®Œå…¨ç›¸åŒï¼Œä¸åŒä¹‹å¤„åœ¨äºå®ƒä¸ºä½ å¤„ç†äº† <code>shouldComponentUpdate()</code> æ–¹æ³•ã€‚å½“ props å’Œ state æ”¹å˜æ—¶ï¼ŒPureComponent å°†å¯¹ props å’Œ state è¿›è¡Œæµ…è¡¨æ¯”è¾ƒã€‚å¦ä¸€æ–¹é¢ï¼ŒComponent åˆå§‹ä¸ä¼šå°†å½“å‰ props å’Œ state ä¸ nextPorps å’Œ nextState è¿›è¡Œæ¯”è¾ƒã€‚å› æ­¤ï¼Œæ¯å½“è°ƒç”¨ <code>shouldComponentUpdate</code> æ—¶ï¼Œç»„ä»¶å°†é»˜è®¤é‡æ–°æ¸²æŸ“ã€‚</p><h2 id="8-React-ä¸­çš„-state-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#8-React-ä¸­çš„-state-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="8. React ä¸­çš„ state æ˜¯ä»€ä¹ˆï¼Ÿ"></a>8. React ä¸­çš„ state æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ç»„ä»¶çš„çŠ¶æ€æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›åœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–çš„ä¿¡æ¯ã€‚æˆ‘ä»¬åº”è¯¥å§‹ç»ˆå°è¯•ä½¿çŠ¶æ€å°½å¯èƒ½ç®€å•ï¼Œå¹¶æœ€å¤§ç¨‹åº¦å‡å°‘æœ‰çŠ¶æ€ç»„ä»¶çš„æ•°é‡ã€‚</p><p>è®©æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ message çŠ¶æ€çš„ user ç»„ä»¶ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;Welcome to React world&#x27;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;this.state.message&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8472c6438dfe48068002c5fdf1fbf098~tplv-k3u1fbpfcp-zoom-1.image" alt="state"></p><p>çŠ¶æ€ç±»ä¼¼äº Propsï¼Œä½†å®ƒæ˜¯ç§æœ‰çš„ï¼Œå¹¶ç”±ç»„ä»¶å®Œå…¨æ§åˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´é™¤äº†æ‹¥æœ‰å’Œè®¾ç½®å®ƒçš„ç»„ä»¶ä¹‹å¤–ï¼Œå…¶ä»–ä»»ä½•ç»„ä»¶éƒ½æ— æ³•è®¿é—®å®ƒã€‚</p><h2 id="9-React-ä¸­çš„-props-æ˜¯ä»€ä¹ˆ"><a href="#9-React-ä¸­çš„-props-æ˜¯ä»€ä¹ˆ" class="headerlink" title="9. React ä¸­çš„ props æ˜¯ä»€ä¹ˆ"></a>9. React ä¸­çš„ props æ˜¯ä»€ä¹ˆ</h2><p>Props æ˜¯ç»„ä»¶çš„è¾“å…¥ã€‚å®ƒä»¬æ˜¯å•ä¸ªå€¼æˆ–åŒ…å«ä¸€ç»„å€¼çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡åœ¨åˆ›å»ºæ—¶ä¼šä½¿ç”¨ç±»ä¼¼äº HTML æ ‡ç­¾å±æ€§çš„å‘½åçº¦å®šä¼ é€’ç»™ç»„ä»¶ã€‚å®ƒä»¬æ˜¯ä»çˆ¶ç»„ä»¶ä¼ é€’åˆ°å­ç»„ä»¶çš„æ•°æ®ã€‚</p><p>React ä¸­ props çš„ä¸»è¦ç›®çš„æ˜¯æä¾›ä»¥ä¸‹ç»„ä»¶åŠŸèƒ½ï¼š</p><ol><li>å°†è‡ªå®šä¹‰æ•°æ®ä¼ é€’åˆ°ä½ çš„ç»„ä»¶ã€‚</li><li>è§¦å‘çŠ¶æ€æ›´æ”¹ã€‚</li><li>é€šè¿‡ç»„ä»¶çš„ <code>render()</code> æ–¹æ³•ä¸­çš„ <code>this.props.reactProp</code> ä½¿ç”¨ã€‚</li></ol><p>ä¸¾ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ <code>reactProp</code> å±æ€§çš„å…ƒç´ ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Element</span> reactProp=&#123;<span class="string">&#x27;1&#x27;</span>&#125; /&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œè¿™ä¸ª <code>reactProp</code>ï¼ˆæˆ–ä½ æƒ³å‡ºçš„ä»»ä½•åç§°ï¼‰æˆä¸ºé™„åŠ åˆ° React çš„æœ¬åœ° props å¯¹è±¡çš„å±æ€§ï¼Œè¯¥å¯¹è±¡æœ€åˆå·²ç»å­˜åœ¨äºä½¿ç”¨ React åº“åˆ›å»ºçš„æ‰€æœ‰ç»„ä»¶ä¸Šã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">props.<span class="property">reactProp</span>;</span><br></pre></td></tr></table></figure><h2 id="10-state-å’Œ-props-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#10-state-å’Œ-props-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="10. state å’Œ props çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>10. state å’Œ props çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>props å’Œ state éƒ½æ˜¯æ™®é€šçš„ JavaScript å¯¹è±¡ã€‚å°½ç®¡å®ƒä»¬ä¸¤è€…éƒ½æ‹¥æœ‰å½±å“æ¸²æŸ“è¾“å‡ºçš„ä¿¡æ¯ï¼Œä½†å®ƒä»¬åœ¨ç»„ä»¶å±‚é¢çš„åŠŸèƒ½å´æœ‰æ‰€ä¸åŒã€‚å°† props ä¼ é€’ç»™ç»„ä»¶ç±»ä¼¼äºä¼ é€’å‚æ•°ç»™å‡½æ•°ï¼Œè€Œ state åˆ™ç±»ä¼¼äºå‡½æ•°ä¸­å£°æ˜çš„å˜é‡ä¸€æ ·åœ¨ç»„ä»¶å†…è¿›è¡Œç®¡ç†ã€‚</p><h2 id="11-ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥æ›´æ–°çŠ¶æ€ï¼Ÿ"><a href="#11-ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥æ›´æ–°çŠ¶æ€ï¼Ÿ" class="headerlink" title="11. ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥æ›´æ–°çŠ¶æ€ï¼Ÿ"></a>11. ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥æ›´æ–°çŠ¶æ€ï¼Ÿ</h2><p>å¦‚æœä½ å°è¯•ç›´æ¥æ›´æ–°çŠ¶æ€ï¼ŒReact ç»„ä»¶å¹¶ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯âŒ</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">message</span> = <span class="string">&#x27;Hello world&#x27;</span>;</span><br></pre></td></tr></table></figure><p>æ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨ <code>setState()</code> æ–¹æ³•ã€‚å®ƒä¼šè®¡åˆ’ä¸€ä¸ªå¯¹ç»„ä»¶çŠ¶æ€å¯¹è±¡çš„æ›´æ–°ã€‚å½“çŠ¶æ€æ›´æ”¹æ—¶ï¼Œç»„ä»¶é€šè¿‡é‡æ–°æ¸²æŸ“è¿›è¡Œå“åº”ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®âœ…</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">message</span>: <span class="string">&#x27;Hello World&#x27;</span> &#125;);</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„ï¼š</strong>ä½ å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°æˆ–è€…æœ€æ–°çš„ javascript class å­—æ®µå£°æ˜è¯­æ³•ç›´æ¥å°†å…¶åˆ†é…ç»™çŠ¶æ€å¯¹è±¡ã€‚</p></blockquote><h2 id="12-å›è°ƒå‡½æ•°ä½œä¸º-setState-çš„å‚æ•°çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#12-å›è°ƒå‡½æ•°ä½œä¸º-setState-çš„å‚æ•°çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="12. å›è°ƒå‡½æ•°ä½œä¸º setState() çš„å‚æ•°çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>12. å›è°ƒå‡½æ•°ä½œä¸º <code>setState()</code> çš„å‚æ•°çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>setState å®Œæˆå¹¶é‡æ–°æ¸²æŸ“ç»„ä»¶åï¼Œå°†è°ƒç”¨å›è°ƒå‡½æ•°ã€‚ç”±äº setState() æ˜¯å¼‚æ­¥çš„ï¼Œå› æ­¤å›è°ƒå‡½æ•°å¯ç”¨äºä»»ä½•åç»­æ“ä½œã€‚</p><blockquote><p><strong>æ³¨æ„ï¼š</strong>æˆ‘ä»¬å»ºè®®ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è€Œä¸æ˜¯è¿™ä¸ªå›è°ƒå‡½æ•°</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setState</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span> &#125;, <span class="function">() =&gt;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;The name has updated and component re-rendered&#x27;</span>),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="13-HTML-å’Œ-React-çš„äº‹ä»¶å¤„ç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#13-HTML-å’Œ-React-çš„äº‹ä»¶å¤„ç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="13. HTML å’Œ React çš„äº‹ä»¶å¤„ç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>13. HTML å’Œ React çš„äº‹ä»¶å¤„ç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h2><p>ä¸‹é¢æ˜¯ä¸€äº› HTML å’Œ React çš„äº‹ä»¶å¤„ç†çš„ä¸»è¦ä¸åŒï¼š</p><ol><li>åœ¨ HTML ä¸­ï¼Œäº‹ä»¶ååº”è¯¥æ˜¯å…¨å°å†™çš„ï¼š</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;activateLasers()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶è€Œåœ¨ React ä¸­äº‹ä»¶åéµå¾ªå°é©¼å³° æ ¼å¼ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;activateLasers&#125;&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ HTML ä¸­ï¼Œä½ åº”è¯¥è¿”å› <code>false</code> æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼š</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">onclick</span>=<span class="string">&#x27;console.log(&quot;The link was clicked.&quot;); return false;&#x27;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ React ä¸­ä½ å¿…é¡»æ˜ç¡®åœ°è°ƒç”¨ <code>preventDefault()</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  event.<span class="title function_">preventDefault</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;The link was clicked.&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨ HTML ä¸­ï¼Œä½ è°ƒç”¨å‡½æ•°æ—¶éœ€è¦åŠ ä¸Š <code>()</code>ï¼š</li></ol><p>ç„¶ååœ¨ React ä¸­ä½ ä¸åº”è¯¥åœ¨å‡½æ•°ååå¸¦ä¸Š <code>()</code>ã€‚ï¼ˆæ¯”å¦‚å‰é¢ç¤ºä¾‹ä¸­çš„ <code>activateLasers</code> å‡½æ•°ï¼‰</p><h2 id="14-å¦‚ä½•åœ¨-JSX-å›è°ƒå‡½æ•°ä¸­ç»‘å®šæ–¹æ³•æˆ–äº‹ä»¶å¤„ç†å™¨"><a href="#14-å¦‚ä½•åœ¨-JSX-å›è°ƒå‡½æ•°ä¸­ç»‘å®šæ–¹æ³•æˆ–äº‹ä»¶å¤„ç†å™¨" class="headerlink" title="14. å¦‚ä½•åœ¨ JSX å›è°ƒå‡½æ•°ä¸­ç»‘å®šæ–¹æ³•æˆ–äº‹ä»¶å¤„ç†å™¨"></a>14. å¦‚ä½•åœ¨ JSX å›è°ƒå‡½æ•°ä¸­ç»‘å®šæ–¹æ³•æˆ–äº‹ä»¶å¤„ç†å™¨</h2><p>è¿™é‡Œæœ‰ 3 ä¸ªæ–¹æ³•åšåˆ°è¿™ä¸€ç‚¹ï¼š</p><ol><li><strong>åœ¨æ„é€ å™¨ä¸­ç»‘å®šï¼š</strong> åœ¨ JavaScript ç±»ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸ç»‘å®šæ–¹æ³•ã€‚åŒæ ·çš„äº‹æƒ…ä¹Ÿé€‚ç”¨äºå®šä¹‰ä¸ºç±»æ–¹æ³•çš„ React äº‹ä»¶å¤„ç†å™¨ã€‚é€šå¸¸æˆ‘ä»¬å°†å®ƒä»¬ç»‘å®šåœ¨æ„é€ å‡½æ•°ä¸­ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Component</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handleClick</span> = <span class="variable language_">this</span>.<span class="property">handleClick</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>ç±»çš„å…¬å…±å­—æ®µè¯­æ³•ï¼š</strong> å¦‚æœä½ ä¸å–œæ¬¢ä½¿ç”¨ç»‘å®šçš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç±»çš„å…¬å…±å­—æ®µè¯­æ³•æ¥æ­£ç¡®ç»‘å®šå›è°ƒï¼š</li></ol><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;this is:&#x27;</span>, <span class="variable language_">this</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="variable language_">this</span>.<span class="property">handleClick</span>&#125;&gt;&#123;<span class="string">&#x27;Click me&#x27;</span>&#125;&lt;/button&gt;</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>ç®­å¤´å‡½æ•°ä½œä¸ºå›è°ƒï¼š</strong> ä½ å¯ä»¥ç›´æ¥åœ¨å›è°ƒä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°</li></ol><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="function"><span class="params">event</span> =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">handleClick</span>(event)&#125;&gt;&#123;<span class="string">&#x27;Click me&#x27;</span>&#125;&lt;/button&gt;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„ï¼š</strong> å¦‚æœå›è°ƒä½œä¸º prop ä¼ é€’ç»™å­ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯èƒ½ä¼šè§¦å‘é¢å¤–çš„é‡æ¸²æŸ“ã€‚åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œè€ƒè™‘åˆ°æ€§èƒ½å› ç´ ï¼Œæœ€ä½³çš„é€‰æ‹©æ˜¯ä½¿ç”¨ <code>.bind()</code> æˆ–ç±»çš„å…¬å…±å­—æ®µè¯­æ³•ã€‚</p></blockquote><h2 id="15-å¦‚ä½•ä¼ é€’å‚æ•°ç»™äº‹ä»¶å¤„ç†å™¨æˆ–å›è°ƒï¼Ÿ"><a href="#15-å¦‚ä½•ä¼ é€’å‚æ•°ç»™äº‹ä»¶å¤„ç†å™¨æˆ–å›è°ƒï¼Ÿ" class="headerlink" title="15. å¦‚ä½•ä¼ é€’å‚æ•°ç»™äº‹ä»¶å¤„ç†å™¨æˆ–å›è°ƒï¼Ÿ"></a>15. å¦‚ä½•ä¼ é€’å‚æ•°ç»™äº‹ä»¶å¤„ç†å™¨æˆ–å›è°ƒï¼Ÿ</h2><p>ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç®­å¤´å‡½æ•°æ¥åŒ…è£¹ä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨å¹¶ä¼ é€’å‚æ•°ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">handleClick</span>(id)&#125; /&gt;</span><br></pre></td></tr></table></figure><p>è¿™ç­‰ä»·äºè°ƒç”¨ <code>.bind</code> å‡½æ•°ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="variable language_">this</span>.<span class="property">handleClick</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>, id)&#125; /&gt;</span><br></pre></td></tr></table></figure><p>é™¤äº†è¿™ä¸¤ç§åŠæ³•ï¼Œä½ ä¹Ÿå¯ä»¥ä¼ é€’å‚æ•°ç»™ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="variable language_">this</span>.<span class="title function_">handleClick</span>(id)&#125; /&gt;;</span><br><span class="line">handleClick = <span class="function"><span class="params">id</span> =&gt;</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello, your ticket number is&#x27;</span>, id);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="16-React-ä¸­çš„åˆæˆäº‹ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#16-React-ä¸­çš„åˆæˆäº‹ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="16. React ä¸­çš„åˆæˆäº‹ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>16. React ä¸­çš„åˆæˆäº‹ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><code>SyntheticEvent</code> æ˜¯åŸºäºæµè§ˆå™¨æœ¬åœ°äº‹ä»¶çš„è·¨æµè§ˆå™¨åŒ…è£…ã€‚å®ƒçš„ API ä¸æµè§ˆå™¨çš„æœ¬åœ°äº‹ä»¶ç›¸åŒï¼ŒåŒ…æ‹¬ <code>stopPropagation()</code> å’Œ <code>preventDefault()</code>ï¼Œä½†äº‹ä»¶åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­çš„è¡¨ç°å‡ä¸€è‡´ã€‚</p><h2 id="17-ä»€ä¹ˆæ˜¯å†…è”æ¡ä»¶è¡¨è¾¾å¼ï¼Ÿ"><a href="#17-ä»€ä¹ˆæ˜¯å†…è”æ¡ä»¶è¡¨è¾¾å¼ï¼Ÿ" class="headerlink" title="17. ä»€ä¹ˆæ˜¯å†…è”æ¡ä»¶è¡¨è¾¾å¼ï¼Ÿ"></a>17. ä»€ä¹ˆæ˜¯å†…è”æ¡ä»¶è¡¨è¾¾å¼ï¼Ÿ</h2><p>ä½ å¯ä»¥ä½¿ç”¨ JS å¯ç”¨çš„ <code>if</code> è¯­å¥æˆ–ä¸‰å…ƒè¡¨è¾¾å¼æ¥æœ‰æ¡ä»¶åœ°æ¸²æŸ“è¡¨è¾¾å¼ã€‚ é™¤äº†è¿™äº›æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å°†æ‰€æœ‰è¡¨è¾¾å¼æ‹¬åœ¨èŠ±æ‹¬å·ä¸­ç„¶ååœ¨å…¶åè·Ÿ JS é€»è¾‘è¿ç®—ç¬¦ <code>&amp;&amp;</code> æ¥å°†ä»»ä½•è¡¨è¾¾å¼åµŒå…¥ JSXã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;<span class="title class_">Hello</span>!&lt;/h1&gt;;</span><br><span class="line">&#123;</span><br><span class="line">  messages.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; !isLogin ? (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>You have &#123;messages.length&#125; unread messages.<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  ) : (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>You don&#x27;t have unread messages.<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="18-ä»€ä¹ˆæ˜¯-key-propï¼Ÿåœ¨å…ƒç´ æ•°ç»„ä¸­ä½¿ç”¨å®ƒçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#18-ä»€ä¹ˆæ˜¯-key-propï¼Ÿåœ¨å…ƒç´ æ•°ç»„ä¸­ä½¿ç”¨å®ƒçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="18. ä»€ä¹ˆæ˜¯ key propï¼Ÿåœ¨å…ƒç´ æ•°ç»„ä¸­ä½¿ç”¨å®ƒçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>18. ä»€ä¹ˆæ˜¯ <code>key</code> propï¼Ÿåœ¨å…ƒç´ æ•°ç»„ä¸­ä½¿ç”¨å®ƒçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><code>key</code> æ˜¯å½“ä½ åˆ›å»ºä¸€ä¸ªå…ƒç´ æ•°ç»„æ—¶åº”è¯¥åŒ…å«çš„ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ä¸²å±æ€§ã€‚<code>key</code> prop ä¼šå¸®åŠ© React è¯†åˆ«å…·ä½“å“ªä¸€é¡¹è¢«ä¿®æ”¹ã€æ·»åŠ æˆ–è¢«ç§»é™¤ã€‚</p><p>é€šå¸¸ï¼Œæˆ‘ä»¬å°†æ•°æ®ä¸­çš„ ID ç”¨ä½œ <code>key</code>ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> todoItems = todos.<span class="title function_">map</span>(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span>&gt;</span>&#123;todo.text&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>);</span><br></pre></td></tr></table></figure><p>å¦‚æœå‘ˆç°çš„é¡¹ç›®æ²¡æœ‰ç¨³å®šçš„ IDï¼Œé€€è€Œæ±‚å…¶æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥å°† <code>index</code> ä½œä¸º <code>key</code>ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> todoItems = todos.<span class="title function_">map</span>(<span class="function">(<span class="params">todo, index</span>) =&gt;</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index.toString()&#125;</span>&gt;</span>&#123;todo.text&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">));</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><ol><li>å¦‚æœåˆ—è¡¨é¡¹å¯èƒ½æ”¹å˜ï¼Œä¸å»ºè®®ä½¿ç”¨ <code>indexes</code> ä½œä¸º <code>keys</code>ã€‚è¿™å¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ï¼Œå¹¶å¯èƒ½å¯¼è‡´ç»„ä»¶çŠ¶æ€å‡ºç°é—®é¢˜ã€‚</li><li>å¦‚æœä½ å°†åˆ—è¡¨é¡¹æå–ä¸ºå•ç‹¬çš„ç»„ä»¶ï¼Œåˆ™åœ¨åˆ—è¡¨ç»„ä»¶ä¸Šåº”ç”¨ <code>keys</code> è€Œä¸æ˜¯ <code>li</code> æ ‡ç­¾ã€‚</li><li>å¦‚æœåˆ—è¡¨é¡¹ä¸­ä¸å­˜åœ¨ <code>key</code> propï¼Œåˆ™æ§åˆ¶å°ä¸­å°†å‡ºç°è­¦å‘Šæ¶ˆæ¯ã€‚</li></ol><h2 id="19-refs-æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#19-refs-æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="19. refs æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>19. refs æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h2><p>refs ç”¨äºè¿”å›å¯¹è¯¥å…ƒç´ çš„å¼•ç”¨ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”é¿å…ä½¿ç”¨å®ƒä»¬ï¼Œä½†æ˜¯ï¼Œå½“ä½ éœ€è¦ç›´æ¥è®¿é—® DOM å…ƒç´ æˆ–ç»„ä»¶çš„å®ä¾‹æ—¶ï¼Œå®ƒä»¬ä¼šå¾ˆæœ‰ç”¨ã€‚</p><h2 id="20-å¦‚ä½•åˆ›å»º-refsï¼Ÿ"><a href="#20-å¦‚ä½•åˆ›å»º-refsï¼Ÿ" class="headerlink" title="20. å¦‚ä½•åˆ›å»º refsï¼Ÿ"></a>20. å¦‚ä½•åˆ›å»º refsï¼Ÿ</h2><p>è¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼</p><p>1.è¿™æ˜¯æœ€è¿‘æ·»åŠ çš„æ–¹æ³•ã€‚ä½¿ç”¨ <code>React.createRef()</code> æ–¹æ³•åˆ›å»º refsï¼Œå¹¶é€šè¿‡ ref å±æ€§é™„åŠ åˆ° React å…ƒç´ ã€‚ä¸ºäº†åœ¨æ•´ä¸ªç»„ä»¶ä¸­ä½¿ç”¨ refsï¼Œåªéœ€å°† ref åˆ†é…ç»™æ„é€ å‡½æ•°ä¸­çš„ instance å±æ€§ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">myRef</span> = <span class="title class_">React</span>.<span class="title function_">createRef</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ— è®º React ç‰ˆæœ¬å¦‚ä½•ï¼Œä½ éƒ½å¯ä»¥ä½¿ç”¨ ref å›è°ƒæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œæœç´¢æ ç»„ä»¶çš„è¾“å…¥å…ƒç´ çš„è®¿é—®æ–¹å¼å¦‚ä¸‹ã€‚</li></ol><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SearchBar</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">txtSearch</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123; <span class="attr">term</span>: <span class="string">&#x27;&#x27;</span> &#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setInputSearchRef</span> = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">txtSearch</span> = e;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">onInputChange</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">term</span>: <span class="variable language_">this</span>.<span class="property">txtSearch</span>.<span class="property">value</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;this.state.term&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;this.onInputChange.bind(this)&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;this.setInputSearchRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨é—­åŒ…åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ refsã€‚</p><blockquote><p><strong>æ³¨æ„ï¼š</strong> ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å†…è” ref å›è°ƒï¼Œå³ä½¿è¿™ä¸æ˜¯æ¨èçš„æ–¹æ³•</p></blockquote><h2 id="21-refs-è½¬å‘æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#21-refs-è½¬å‘æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="21. refs è½¬å‘æ˜¯ä»€ä¹ˆï¼Ÿ"></a>21. refs è½¬å‘æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><em>Ref è½¬å‘</em> æ˜¯è®©æŸäº›ç»„ä»¶å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥æ”¶çš„ <code>ref</code> çš„ç‰¹æ€§ï¼Œè¿™äº›ç»„ä»¶è¿˜å¯ä»¥è¿›ä¸€æ­¥å°†å…¶ä¼ é€’ç»™å­ç»„ä»¶ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ButtonElement</span> = <span class="title class_">React</span>.<span class="title function_">forwardRef</span>(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> <span class="attr">className</span>=<span class="string">&quot;CustomButton&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;props.children&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create ref to the DOM button:</span></span><br><span class="line"><span class="keyword">const</span> ref = <span class="title class_">React</span>.<span class="title function_">createRef</span>();</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ButtonElement</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span>&gt;</span>&#123;&#x27;Forward Ref&#x27;&#125;<span class="tag">&lt;/<span class="name">ButtonElement</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure><h2 id="22-refs-å›è°ƒå’Œ-findDOMNode-å“ªä¸ªæ˜¯é¦–é€‰é¡¹ï¼Ÿ"><a href="#22-refs-å›è°ƒå’Œ-findDOMNode-å“ªä¸ªæ˜¯é¦–é€‰é¡¹ï¼Ÿ" class="headerlink" title="22. refs å›è°ƒå’Œ findDOMNode() å“ªä¸ªæ˜¯é¦–é€‰é¡¹ï¼Ÿ"></a>22. refs å›è°ƒå’Œ <code>findDOMNode()</code> å“ªä¸ªæ˜¯é¦–é€‰é¡¹ï¼Ÿ</h2><p>æœ€å¥½ä½¿ç”¨ refs å›è°ƒ è€Œä¸æ˜¯ <code>findDOMNode()</code> APIã€‚å› ä¸º <code>findDOMNode()</code> å°†æ¥ä¼šé˜»æ­¢å¯¹ React çš„æŸäº›æ”¹è¿›ã€‚</p><p>ä½¿ç”¨ <code>findDOMNode</code> çš„â€œä¼ ç»Ÿâ€æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">findDOMNode</span>(<span class="variable language_">this</span>).<span class="title function_">scrollIntoView</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨èçš„æ–¹å¼æ˜¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span> = <span class="title function_">createRef</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">current</span>.<span class="title function_">scrollIntoView</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;this.node&#125;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="23-ä¸ºä»€ä¹ˆ-Strings-Refs-è¢«é—å¼ƒäº†ï¼Ÿ"><a href="#23-ä¸ºä»€ä¹ˆ-Strings-Refs-è¢«é—å¼ƒäº†ï¼Ÿ" class="headerlink" title="23. ä¸ºä»€ä¹ˆ Strings Refs è¢«é—å¼ƒäº†ï¼Ÿ"></a>23. ä¸ºä»€ä¹ˆ Strings Refs è¢«é—å¼ƒäº†ï¼Ÿ</h2><p>å¦‚æœä½ ä»¥å‰ä½¿ç”¨è¿‡ Reactï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šç†Ÿæ‚‰ä¸€ä¸ªè¾ƒæ—§çš„ APIï¼Œå…¶ä¸­çš„<code>ref</code> å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ <code>ref = &#123;textInput&#39;&#125;</code>ï¼Œå¹¶ä¸” DOM èŠ‚ç‚¹ä½œä¸º<code>this.refs.textInput</code> è®¿é—®ã€‚æˆ‘ä»¬å»ºè®®ä½ ä¸è¦è¿™æ ·åšï¼Œå› ä¸º String å¼•ç”¨æœ‰ä»¥ä¸‹é—®é¢˜ï¼Œå¹¶ä¸”è¢«è®¤ä¸ºæ˜¯æ—§ç‰ˆçš„ã€‚å­—ç¬¦ä¸²å¼•ç”¨å·²ç»åœ¨ <strong>React v16 ä¸­è¢«åˆ é™¤</strong>ã€‚</p><ol><li><p>ä»–ä»¬è¿«ä½¿ React è·Ÿè¸ªå½“å‰æ­£åœ¨æ‰§è¡Œçš„ç»„ä»¶ã€‚è¿™æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå®ƒä½¿ React æ¨¡å—æˆä¸ºæœ‰çŠ¶æ€çš„ï¼Œå¹¶å› æ­¤åœ¨æ‰“åŒ… React æ¨¡å—æ—¶å†²çªè€Œå¼•èµ·å¥‡æ€ªçš„é”™è¯¯ã€‚</p></li><li><p>å®ƒä»¬æ˜¯â€œä¸å¯ç»„åˆçš„â€ â€” å¦‚æœåº“åœ¨ä¼ é€’çš„å­é¡¹ä¸Šæ”¾ç½®äº†å¼•ç”¨ï¼Œåˆ™ç”¨æˆ·ä¸èƒ½åœ¨å…¶ä¸Šæ”¾ç½®å…¶ä»–å¼•ç”¨ã€‚å›è°ƒå¼•ç”¨å®Œå…¨å¯ä»¥ç»„åˆã€‚</p></li><li><p>ä»–ä»¬ä¸èƒ½å’Œé™æ€åˆ†æå·¥å…·é…åˆï¼ˆæ¯”å¦‚ Flowï¼‰ã€‚Flow æ— æ³•çŒœæµ‹å‡ºæ¡†æ¶ <code>this.refs</code> ä¸Šå‡ºç°çš„å­—ç¬¦ä¸²å¼•ç”¨åŠå…¶ç±»å‹ï¼ˆå¯èƒ½ä¸åŒï¼‰ã€‚ å›è°ƒå¼•ç”¨å¯¹é™æ€åˆ†ææ›´å‹å¥½ã€‚</p></li><li><p>å®ƒæ— æ³•åƒå¤§å¤šæ•°äººæœŸæœ›çš„é‚£æ ·ä½¿ç”¨â€œæ¸²æŸ“å›è°ƒâ€æ¨¡å¼ï¼ˆä¾‹å¦‚ï¼‰</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  renderRow = <span class="function"><span class="params">index</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// This won&#x27;t work. Ref will get attached to DataTable rather than MyComponent:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;</span>&#x27;<span class="attr">input-</span>&#x27; + <span class="attr">index</span>&#125; /&gt;</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This would work though! Callback refs are awesome.</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;input</span> =&gt;</span> (this[&#x27;input-&#x27; + index] = input)&#125; /&gt;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">DataTable</span> <span class="attr">data</span>=<span class="string">&#123;this.props.data&#125;</span> <span class="attr">renderRow</span>=<span class="string">&#123;this.renderRow&#125;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="24-è™šæ‹Ÿ-DOM-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#24-è™šæ‹Ÿ-DOM-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="24. è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿ"></a>24. è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>_Virtual DOM_ï¼ˆVDOMï¼‰æ˜¯<em>Real DOM</em>çš„å†…å­˜è¡¨ç¤ºå½¢å¼ã€‚ UI çš„è¡¨ç¤ºå½¢å¼ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸â€œçœŸå®â€ DOM åŒæ­¥ã€‚ è¿™æ˜¯åœ¨è°ƒç”¨æ¸²æŸ“å‡½æ•°å’Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºå…ƒç´ ä¹‹é—´å‘ç”Ÿçš„ä¸€æ­¥ã€‚ è¿™æ•´ä¸ªè¿‡ç¨‹ç§°ä¸º <a href="https://zh-hans.reactjs.org/docs/reconciliation.html">åè°ƒ</a>ã€‚</p><h2 id="25-è™šæ‹Ÿ-DOM-åŸç†"><a href="#25-è™šæ‹Ÿ-DOM-åŸç†" class="headerlink" title="25. è™šæ‹Ÿ DOM åŸç†"></a>25. è™šæ‹Ÿ DOM åŸç†</h2><p>è™šæ‹Ÿ DOM å·¥ä½œåŸç†åªæœ‰ä¸‰ä¸ªç®€å•çš„æ­¥éª¤ã€‚</p><ol><li>æ— è®ºä½•æ—¶ä»»ä½•åŸºç¡€æ•°æ®å‘ç”Ÿæ›´æ”¹ï¼Œæ•´ä¸ª UI éƒ½å°†ä»¥è™šæ‹Ÿ DOM è¡¨ç°å½¢å¼é‡æ–°å‘ˆç°ã€‚</li></ol><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9f8a99a43f7049feb7806a1bd54e5929~tplv-k3u1fbpfcp-zoom-1.image" alt="vdom"></p><ol start="2"><li>ç„¶åï¼Œè®¡ç®—å…ˆå‰çš„ DOM è¡¨ç°å½¢å¼ä¸æ–°çš„ DOM è¡¨ç°å½¢å¼ä¹‹é—´çš„å·®å¼‚ã€‚</li></ol><p><img src="https://github.com/sudheerj/reactjs-interview-questions/raw/master/images/vdom2.png" alt="vdom2"></p><ol start="3"><li>ä¸€æ—¦å®Œæˆè®¡ç®—ï¼Œå°†åªä¼šæ›´æ–°å†…å®¹çœŸæ­£æ”¹å˜çš„é‚£éƒ¨åˆ†çœŸæ˜¯ DOMã€‚</li></ol><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/461ba77627524f96b2bf270c1935b969~tplv-k3u1fbpfcp-zoom-1.image" alt="vdom3"></p><h2 id="26-Shadow-DOM-å’Œ-Virtual-DOM-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#26-Shadow-DOM-å’Œ-Virtual-DOM-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="26. Shadow DOM å’Œ Virtual DOM æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>26. Shadow DOM å’Œ Virtual DOM æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>Shadow DOM æ˜¯ä¸€ç§æµè§ˆå™¨æŠ€æœ¯ï¼Œä¸»è¦ç”¨äºç¡®å®š web components ä¸­çš„å˜é‡å’Œ CSSã€‚Virtual DOM æ˜¯ç”±æµè§ˆå™¨ API ä¹‹ä¸Šçš„ JavaScript åº“å®ç°çš„æ¦‚å¿µã€‚</p><h2 id="27-React-Fiber-æ˜¯ä»€ä¹ˆ"><a href="#27-React-Fiber-æ˜¯ä»€ä¹ˆ" class="headerlink" title="27. React Fiber æ˜¯ä»€ä¹ˆ?"></a>27. React Fiber æ˜¯ä»€ä¹ˆ?</h2><p>Fiber æ˜¯ React v16 ä¸­æ–°çš„ <a href="https://zh-hans.reactjs.org/docs/reconciliation.html">åè°ƒ</a> å¼•æ“æˆ–æ ¸å¿ƒç®—æ³•çš„é‡æ–°å®ç°ã€‚React Fiber çš„ç›®æ ‡æ˜¯æé«˜å…¶åœ¨åŠ¨ç”»ã€å¸ƒå±€ã€æ‰‹åŠ¿ã€æš‚åœã€ä¸­æ­¢æˆ–é‡ç”¨å·¥ä½œçš„èƒ½åŠ›ï¼Œä»¥åŠä¸ºä¸åŒç±»å‹çš„æ›´æ–°åˆ†é…ä¼˜å…ˆçº§ç­‰æ–¹é¢çš„é€‚ç”¨æ€§å’Œæ–°çš„å¹¶å‘åŸè¯­ã€‚</p><h2 id="28-React-Fiber-çš„ä¸»è¦è®¾è®¡ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#28-React-Fiber-çš„ä¸»è¦è®¾è®¡ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="28. React Fiber çš„ä¸»è¦è®¾è®¡ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>28. React Fiber çš„ä¸»è¦è®¾è®¡ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>React Fiber çš„ç›®æ ‡æ˜¯æé«˜å…¶å¯¹åŠ¨ç”»ã€å¸ƒå±€å’Œæ‰‹åŠ¿ç­‰é¢†åŸŸçš„é€‚ç”¨æ€§ã€‚å®ƒçš„ headline åŠŸèƒ½æ˜¯<strong>å¢é‡æ¸²æŸ“</strong>ï¼šèƒ½å¤Ÿå°†æ¸²æŸ“å·¥ä½œæ‹†åˆ†ä¸ºå¤šä¸ªå—å¹¶å°†å…¶åˆ†å¸ƒåˆ°å¤šä¸ªå¸§ä¸­ã€‚</p><h2 id="29-å—æ§ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#29-å—æ§ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="29. å—æ§ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>29. å—æ§ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>åœ¨ç”¨æˆ·è¾“å…¥åèƒ½å¤Ÿæ§åˆ¶è¡¨å•ä¸­è¾“å…¥å…ƒç´ çš„ç»„ä»¶è¢«ç§°ä¸ºâ€œå—æ§ç»„ä»¶â€ï¼Œæ¯”å¦‚æ¯ä¸€ä¸ªçŠ¶æ€æ¦‚å¿µéƒ½å°†æœ‰ä¸€ä¸ªç›¸å…³çš„å¤„ç†å‡½æ•°</p><p>ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä¸ºäº†å°†åå­—è½¬æ¢ä¸ºå…¨å¤§å†™ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>handleChange</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleChange</span>(<span class="params">event</span>) &#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">value</span>: event.<span class="property">target</span>.<span class="property">value</span>.<span class="title function_">toUpperCase</span>()&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="30-éå—æ§ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#30-éå—æ§ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="30. éå—æ§ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>30. éå—æ§ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>éå—æ§ç»„ä»¶æ˜¯é‚£äº›æŠŠçŠ¶æ€ç»´æŠ¤åœ¨å…¶å†…éƒ¨çš„ç»„ä»¶ï¼Œå½“ä½ æƒ³è¦è·å¾—å½“å‰å€¼æ—¶éœ€è¦ä½¿ç”¨ ref æŸ¥è¯¢ DOMã€‚è¿™æœ‰ä¸€ç‚¹åƒä¼ ç»Ÿçš„ HTMLã€‚</p><p>åœ¨ä¸‹é¢çš„ <code>UserProfile</code> ç»„ä»¶ä¸­ï¼Œ<code>name</code> è¾“å…¥è¢«ä½¿ç”¨ <code>ref</code> è·å–ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserProfile</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handleSubmit</span> = <span class="variable language_">this</span>.<span class="property">handleSubmit</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">input</span> = <span class="title class_">React</span>.<span class="title function_">createRef</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleSubmit</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;A name was submitted: &#x27;</span> + <span class="variable language_">this</span>.<span class="property">input</span>.<span class="property">current</span>.<span class="property">value</span>);</span><br><span class="line">    event.<span class="title function_">preventDefault</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;&#x27;Name:&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;this.input&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="31-createElement-å’Œ-cloneElement-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#31-createElement-å’Œ-cloneElement-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="31. createElement å’Œ cloneElement çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>31. createElement å’Œ cloneElement çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>JSX å…ƒç´ å°†è¢«è½¬æ¢ä¸º <code>React.createElement()</code> å‡½æ•°ä»¥åˆ›å»º React å…ƒç´ ï¼Œè¿™äº›å…ƒç´ å°†ç”¨äº UI çš„å¯¹è±¡è¡¨ç¤ºã€‚è€Œ <code>cloneElement</code> ç”¨äºå…‹éš†å…ƒç´ å¹¶å°†æ–°çš„ <code>props</code> ä¼ é€’ç»™å®ƒã€‚</p><p><strong>è¯¾åæ‰©å±•ï¼š</strong></p><ul><li><a href="https://zh-hans.reactjs.org/docs/react-api.html">React é¡¶å±‚ API</a></li></ul><h2 id="32-React-ä¸­çš„çŠ¶æ€æå‡æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#32-React-ä¸­çš„çŠ¶æ€æå‡æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="32. React ä¸­çš„çŠ¶æ€æå‡æ˜¯ä»€ä¹ˆï¼Ÿ"></a>32. React ä¸­çš„çŠ¶æ€æå‡æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å½“å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«ç›¸åŒçš„å˜åŒ–æ•°æ®æ—¶ï¼Œå»ºè®®å°†å…±äº«çŠ¶æ€æå‡åˆ°å®ƒä»¬æœ€æ¥è¿‘çš„å…±åŒç¥–å…ˆã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸¤ä¸ªå­ç»„ä»¶å…±äº«æ¥è‡ªå…¶çˆ¶ç»„ä»¶çš„ç›¸åŒæ•°æ®ï¼Œåˆ™å°†çŠ¶æ€ç§»åˆ°çˆ¶ç»„ä»¶ï¼Œè€Œä¸æ˜¯åœ¨ä¸¤ä¸ªå­ç»„ä»¶ä¸­éƒ½ä¿æŒå†…éƒ¨çŠ¶æ€ã€‚</p><h2 id="33-ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ä¸åŒé˜¶æ®µï¼Ÿ"><a href="#33-ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ä¸åŒé˜¶æ®µï¼Ÿ" class="headerlink" title="33. ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ä¸åŒé˜¶æ®µï¼Ÿ"></a>33. ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ä¸åŒé˜¶æ®µï¼Ÿ</h2><p>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå…·æœ‰ä¸‰ä¸ªä¸åŒçš„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µã€‚</p><ol><li><strong>Mountingï¼š</strong> ç»„ä»¶å·²å‡†å¤‡å¥½å®‰è£…åœ¨æµè§ˆå™¨ DOM ä¸­ã€‚è¿™ä¸ªé˜¶æ®µæ¶µç›–äº†ç”Ÿå‘½å‘¨æœŸæ–¹æ³• <code>constructor()</code>ã€<code>getDerivedStateFromProps()</code>ã€ <code>render()</code> å’Œ <code>componentDidMount()</code> çš„åˆå§‹åŒ–ã€‚</li><li><strong>Updatingï¼š</strong> åœ¨æ­¤é˜¶æ®µï¼Œç»„ä»¶ä»¥ä¸¤ç§æ–¹å¼è¿›è¡Œæ›´æ–°ï¼Œå³å‘é€æ–° <code>props</code> å’Œä» <code>setState()</code> æˆ– <code>forceUpdate()</code> æ›´æ–°çŠ¶æ€ã€‚æ­¤é˜¶æ®µæ¶µç›–äº†<code>getDerivedStateFromProps()</code>ï¼Œ<code>shouldComponentUpdate()</code>ï¼Œ<code>render()</code> ã€<code>getSnapshotBeforeUpdate()</code> å’Œ <code>componentDidUpdate()</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚</li><li><strong>Unmountingï¼š</strong> åœ¨æœ€åä¸€ä¸ªé˜¶æ®µï¼Œä¸å†éœ€è¦è¯¥ç»„ä»¶å¹¶ä»æµè§ˆå™¨ DOM ä¸Šå¸è½½è¯¥ç»„ä»¶ã€‚ è¿™ä¸ªé˜¶æ®µåŒ…æ‹¬ <code>componentWillUnmount()</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚</li></ol><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨å°†æ›´æ”¹åº”ç”¨äº DOM æ—¶ï¼ŒReact å†…éƒ¨å…·æœ‰é˜¶æ®µæ€§æ¦‚å¿µã€‚ å®ƒä»¬åˆ†å¼€å¦‚ä¸‹</p><ol><li><strong>Renderï¼š</strong> è¯¥ç»„ä»¶å°†æ¸²æŸ“è€Œæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚è¿™é€‚ç”¨äº Pure ç»„ä»¶ï¼Œåœ¨æ­¤é˜¶æ®µï¼ŒReact å¯ä»¥æš‚åœã€ä¸­æ­¢æˆ–é‡æ–°å¯åŠ¨æ¸²æŸ“ã€‚</li><li><strong>Pre-commitï¼š</strong> åœ¨ç»„ä»¶å°†æ›´æ”¹å®é™…åº”ç”¨äº DOM ä¹‹å‰ï¼Œæœ‰ä¸€æ®µæ—¶é—´å¯ä»¥è®© React é€šè¿‡ <code>getSnapshotBeforeUpdate()</code> ä» DOM ä¸­è¯»å–å†…å®¹ã€‚</li><li><strong>Commitï¼š</strong> React ä¸ DOM ä¸€èµ·å·¥ä½œå¹¶åˆ†åˆ«æ‰§è¡Œæœ€ç»ˆçš„ç”Ÿå‘½å‘¨æœŸï¼š<code>componentDidMount()</code> ç”¨äºå®‰è£…ï¼Œ<code>componentDidUpdate()</code> ç”¨äºæ›´æ–°ï¼Œä»¥åŠ <code>componentWillUnmount()</code> ç”¨äºå¸è½½ã€‚</li></ol><p>React 16.3+ (æˆ–è€… <a href="http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/">åœ¨çº¿äº¤äº’ç‰ˆæœ¬</a>)</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fac807b8490c4c11a9630a9f29e467d3~tplv-k3u1fbpfcp-zoom-1.image"></p><p>React 16.3 ä¹‹å‰çš„ç‰ˆæœ¬ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33a918a89bdd49c08e80732f5f6af367~tplv-k3u1fbpfcp-zoom-1.image" alt="phases 16.2"></p><h2 id="34-React-ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿ"><a href="#34-React-ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="34. React ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿ"></a>34. React ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿ</h2><p>React 16.3 ä»¥å‰çš„ç‰ˆæœ¬ï¼š</p><ul><li><strong>componentWillMountï¼š</strong> åœ¨æ¸²æŸ“ä¹‹å‰æ‰§è¡Œï¼Œç”¨äºæ ¹ç»„ä»¶ä¸­çš„åº”ç”¨ç¨‹åºçº§åˆ«é…ç½®ã€‚</li><li><strong>componentDidMountï¼š</strong> åœ¨é¦–æ¬¡æ¸²æŸ“ä¹‹åæ‰§è¡Œï¼Œæ‰€æœ‰ AJAX è¯·æ±‚ï¼ŒDOM æˆ–çŠ¶æ€æ›´æ–°ä»¥åŠè®¾ç½®äº‹ä»¶ä¾¦å¬å™¨éƒ½åº”åœ¨æ­¤æ‰§è¡Œã€‚</li><li><strong>componentWillReceivePropsï¼š</strong> åœ¨ç‰¹å®šå±æ€§æ›´æ–°ä»¥è§¦å‘çŠ¶æ€è½¬æ¢æ—¶æ‰§è¡Œã€‚</li><li><strong>shouldComponentUpdateï¼š</strong> ç¡®å®šæ˜¯å¦è¦æ›´æ–°ç»„ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè¿”å› <code>true</code>ã€‚å¦‚æœä½ ç¡®å®šåœ¨çŠ¶æ€æˆ–å±æ€§æ›´æ–°åä¸éœ€è¦æ¸²æŸ“ç»„ä»¶ï¼Œåˆ™å¯ä»¥è¿”å› <code>false</code> å€¼ã€‚è¿™æ˜¯æé«˜æ€§èƒ½çš„å¥½åœ°æ–¹ï¼Œå› ä¸ºå¦‚æœç»„ä»¶æ”¶åˆ°æ–°çš„ <code>props</code>ï¼Œå®ƒå¯ä»¥é˜²æ­¢é‡æ–°æ¸²æŸ“ã€‚</li><li><strong>componentWillUpdateï¼š</strong> å½“æœ‰å±æ€§æˆ–çŠ¶æ€æ”¹å˜è¢«<code>shouldComponentUpdate()</code> ç¡®è®¤å¹¶è¿”å› <code>true</code> æ—¶ï¼Œåœ¨é‡æ–°æ¸²æŸ“ç»„ä»¶ä¹‹å‰æ‰§è¡Œã€‚</li><li><strong>componentDidUpdateï¼š</strong> é€šå¸¸ï¼Œå®ƒç”¨äºå“åº”å±æ€§æˆ–çŠ¶æ€æ›´æ”¹æ¥æ›´æ–° DOMã€‚</li><li><strong>componentWillUnmountï¼š</strong> å®ƒå°†ç”¨äºå–æ¶ˆä»»ä½•ä¼ å‡ºçš„ç½‘ç»œè¯·æ±‚ï¼Œæˆ–åˆ é™¤ä¸è¯¥ç»„ä»¶å…³è”çš„æ‰€æœ‰äº‹ä»¶ä¾¦å¬å™¨ã€‚</li></ul><p>React 16.3+ ç‰ˆæœ¬</p><ul><li><strong>getDerivedStateFromPropsï¼š</strong> åœ¨è°ƒç”¨ <code>render()</code> ä¹‹å‰è¢«è°ƒç”¨ï¼Œå¹¶ä¸”åœ¨æ¯æ¬¡æ¸²æŸ“ä¸­éƒ½ä¼šè¢«è°ƒç”¨ã€‚å¯¹äºéœ€è¦æ´¾ç”ŸçŠ¶æ€çš„ç½•è§ç”¨ä¾‹ï¼Œè¿™æ˜¯å­˜åœ¨çš„ã€‚<a href="https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html">å¦‚æœæ‚¨éœ€è¦æ´¾ç”ŸçŠ¶æ€</a> å€¼å¾—ä¸€è¯»ã€‚</li><li><strong>componentDidMountï¼š</strong> åœ¨é¦–æ¬¡æ¸²æŸ“ä¹‹åæ‰§è¡Œï¼Œå¹¶ä¸”æ‰€æœ‰ AJAX è¯·æ±‚ã€DOM æˆ–çŠ¶æ€æ›´æ–°ä»¥åŠè®¾ç½®äº‹ä»¶ä¾¦å¬å™¨éƒ½åº”åœ¨æ­¤å‘ç”Ÿã€‚</li><li><strong>shouldComponentUpdateï¼š</strong> ç¡®å®šæ˜¯å¦å°†æ›´æ–°ç»„ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè¿”å› <code>true</code>ã€‚å¦‚æœä½ ç¡®å®šåœ¨çŠ¶æ€æˆ–å±æ€§æ›´æ–°åä¸éœ€è¦æ¸²æŸ“ç»„ä»¶ï¼Œåˆ™å¯ä»¥è¿”å› <code>false</code>å€¼ã€‚è¿™æ˜¯æé«˜æ€§èƒ½çš„å¥½åœ°æ–¹ï¼Œå› ä¸ºå¦‚æœç»„ä»¶æ¥æ”¶åˆ°æ–°çš„å±æ€§ï¼Œå®ƒå¯ä»¥é˜²æ­¢é‡æ–°æ¸²æŸ“ã€‚</li><li><strong>getSnapshotBeforeUpdateï¼š</strong> åœ¨å°†å‘ˆç°çš„è¾“å‡ºæäº¤ç»™ DOM ä¹‹å‰ç«‹å³æ‰§è¡Œã€‚æ­¤æ–¹æ³•è¿”å›çš„ä»»ä½•å€¼éƒ½å°†ä¼ é€’åˆ° <code>componentDidUpdate()</code> ä¸­ã€‚ è¿™å¯¹äºä» DOMï¼ˆå³æ»šåŠ¨ä½ç½®ï¼‰æ•è·ä¿¡æ¯å¾ˆæœ‰ç”¨ã€‚</li><li><strong>componentDidUpdateï¼š</strong> é€šå¸¸ï¼Œå®ƒç”¨äºå“åº”å±æ€§æˆ–çŠ¶æ€æ›´æ”¹æ¥æ›´æ–° DOMã€‚å¦‚æœ <code>shouldComponentUpdate()</code> è¿”å› <code>false</code>ï¼Œåˆ™ä¸ä¼šè§¦å‘ã€‚</li><li><strong>componentWillUnmountï¼š</strong> å®ƒå°†ç”¨äºå–æ¶ˆä»»ä½•ä¼ å‡ºçš„ç½‘ç»œè¯·æ±‚ï¼Œæˆ–åˆ é™¤ä¸è¯¥ç»„ä»¶å…³è”çš„æ‰€æœ‰äº‹ä»¶ä¾¦å¬å™¨ã€‚</li></ul><h2 id="35-é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆ"><a href="#35-é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆ" class="headerlink" title="35. é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆ"></a>35. é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆ</h2><p>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ˜¯æ¥æ”¶ç»„ä»¶å¹¶è¿”å›æ–°ç»„ä»¶çš„å‡½æ•°ã€‚åŸºæœ¬ä¸Šï¼Œè¿™æ˜¯ä» React çš„ç»„æˆæ€§è´¨è¡ç”Ÿå‡ºæ¥çš„ä¸€ç§æ¨¡å¼ã€‚</p><p>æˆ‘ä»¬ç§°å®ƒä»¬ä¸ºçº¯ç»„ä»¶ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥æ¥å—ä»»ä½•åŠ¨æ€æä¾›çš„å­ç»„ä»¶ï¼Œä½†æ˜¯å®ƒä»¬ä¸ä¼šä¿®æ”¹æˆ–å¤åˆ¶å…¶è¾“å…¥ç»„ä»¶ä¸­çš„ä»»ä½•è¡Œä¸ºã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">EnhancedComponent</span> = <span class="title function_">higherOrderComponent</span>(<span class="title class_">WrappedComponent</span>);</span><br></pre></td></tr></table></figure><p>HOC å¯ä»¥ç”¨åˆ°å¾ˆå¤šåœºæ™¯ä¸­ï¼š</p><ol><li>ä»£ç é‡ç”¨ï¼Œé€»è¾‘å’Œå¼•å¯¼ç¨‹åºæŠ½è±¡ã€‚</li><li>æ¸²æŸ“åŠ«æŒã€‚</li><li>çŠ¶æ€æŠ½è±¡å’Œæ“çºµã€‚</li><li>props æ“ä½œã€‚</li></ol><h2 id="36-å¦‚ä½•ä¸º-HOC-ç»„ä»¶-åˆ›å»º-props-ä»£ç†ï¼Ÿ"><a href="#36-å¦‚ä½•ä¸º-HOC-ç»„ä»¶-åˆ›å»º-props-ä»£ç†ï¼Ÿ" class="headerlink" title="36. å¦‚ä½•ä¸º HOC ç»„ä»¶ åˆ›å»º props ä»£ç†ï¼Ÿ"></a>36. å¦‚ä½•ä¸º HOC ç»„ä»¶ åˆ›å»º props ä»£ç†ï¼Ÿ</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨å±æ€§ä»£ç†æ¨¡å¼æ·»åŠ æˆ–ç¼–è¾‘ä¼ é€’ç»™ç»„ä»¶çš„å±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">HOC</span>(<span class="params">WrappedComponent</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">Test</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> newProps = &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;New Header&#x27;</span>,</span><br><span class="line">        <span class="attr">footer</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">showFeatureX</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">showFeatureY</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125; &#123;<span class="attr">...newProps</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯¾åæ‰©å±•ï¼š</strong></p><ul><li><a href="https://juejin.cn/post/6844903641074106381">react é«˜é˜¶ç»„ä»¶çš„ä»£ç†æ¨¡å¼</a></li></ul><h2 id="37-context-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#37-context-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="37. context æ˜¯ä»€ä¹ˆï¼Ÿ"></a>37. context æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><code>Context</code> æä¾›äº†ä¸€ç§é€šè¿‡ç»„ä»¶æ ‘ä¼ é€’æ•°æ®çš„æ–¹æ³•ï¼Œè€Œä¸éœ€è¦ä¸€å±‚ä¸€å±‚æ‰‹åŠ¨ä¼ é€’å±æ€§ã€‚</p><p>ä¾‹å¦‚ï¼Œéœ€è¦ç”±è®¸å¤šç»„ä»¶åœ¨åº”ç”¨ç¨‹åºä¸­è®¿é—®ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·ï¼Œæœ¬åœ°è®¾ç½®é¦–é€‰é¡¹ï¼ŒUI ä¸»é¢˜ç­‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Provider</span>, <span class="title class_">Consumer</span> &#125; = <span class="title class_">React</span>.<span class="title function_">createContext</span>(defaultValue);</span><br></pre></td></tr></table></figure><h2 id="38-ä»€ä¹ˆæ˜¯-children-å±æ€§ï¼Ÿ"><a href="#38-ä»€ä¹ˆæ˜¯-children-å±æ€§ï¼Ÿ" class="headerlink" title="38. ä»€ä¹ˆæ˜¯ children å±æ€§ï¼Ÿ"></a>38. ä»€ä¹ˆæ˜¯ children å±æ€§ï¼Ÿ</h2><p><code>Children</code> æ˜¯ä¸€ä¸ª propï¼ˆ<code>this.props.children</code>ï¼‰ï¼Œå…è®¸ä½ å°†ç»„ä»¶ä½œä¸ºæ•°æ®ä¼ é€’ç»™å…¶ä»–ç»„ä»¶ï¼Œå°±åƒä½ ä½¿ç”¨çš„ä»»ä½•å…¶ä»– prop ä¸€æ ·ã€‚æ”¾ç½®åœ¨ç»„ä»¶çš„å¼€å§‹æ ‡è®°å’Œç»“æŸæ ‡è®°ä¹‹é—´çš„ç»„ä»¶æ ‘å°†ä½œä¸º <code>children</code> é“å…·ä¼ é€’ç»™è¯¥ç»„ä»¶ã€‚</p><p>React API ä¸­æœ‰è®¸å¤šæ–¹æ³•å¯ä½œä¸ºè¯¥å±æ€§ã€‚å…¶ä¸­åŒ…æ‹¬ <code>React.Children.map</code>ã€<code>React.Children.forEach</code>ï¼Œ<code>React.Children.count</code>ã€<code>React.Children.only</code> å’Œ <code>React.Children.toArray</code>ã€‚</p><p>children çš„ç®€å•ç”¨æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MyDiv</span> = <span class="title class_">React</span>.<span class="title function_">createClass</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">MyDiv</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#x27;Hello&#x27;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#x27;World&#x27;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">MyDiv</span>&gt;</span></span>,</span><br><span class="line">  node,</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="39-React-ä¸­å¦‚ä½•å†™æ³¨é‡Šï¼Ÿ"><a href="#39-React-ä¸­å¦‚ä½•å†™æ³¨é‡Šï¼Ÿ" class="headerlink" title="39. React ä¸­å¦‚ä½•å†™æ³¨é‡Šï¼Ÿ"></a>39. React ä¸­å¦‚ä½•å†™æ³¨é‡Šï¼Ÿ</h2><p>React JSX ä¸­çš„æ³¨é‡Šå’Œ JavaScript çš„å¤šè¡Œæ³¨é‡Šå¾ˆåƒï¼Œä½†æ˜¯ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ã€‚</p><p><strong>å•è¡Œæ³¨é‡Šï¼š</strong></p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;<span class="comment">/* è¿™é‡Œæ˜¯å•è¡Œæ³¨é‡Š */</span>&#125;</span><br><span class="line">  &#123;<span class="string">`Welcome <span class="subst">$&#123;user&#125;</span>, let&#x27;s play React`</span>&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><strong>å¤šè¡Œæ³¨é‡Šï¼š</strong></p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;<span class="comment">/* Multi-line comments for more than</span></span><br><span class="line"><span class="comment">   one line */</span>&#125;</span><br><span class="line">  &#123;<span class="string">`Welcome <span class="subst">$&#123;user&#125;</span>, let&#x27;s play React`</span>&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="40-åœ¨-constructor-ä¸­ç»™-super-å‡½æ•°ä¼ é€’-props-çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#40-åœ¨-constructor-ä¸­ç»™-super-å‡½æ•°ä¼ é€’-props-çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="40. åœ¨ constructor ä¸­ç»™ super å‡½æ•°ä¼ é€’ props çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>40. åœ¨ constructor ä¸­ç»™ <code>super</code> å‡½æ•°ä¼ é€’ props çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ä¸€ä¸ªå­ç±»æ„é€ å™¨åœ¨ <code>super()</code> æ–¹æ³•è°ƒç”¨ä¹‹å‰æ˜¯æ— æ³•æ‹¿åˆ° <code>this</code> å¼•ç”¨çš„ã€‚è¿™åŒæ ·ä¹Ÿé€‚ç”¨äº ES6 ä¸­çš„ sub-classesã€‚è°ƒç”¨ <code>super()</code> æ—¶ä¼ é€’ props çš„ä¸»è¦æ˜¯ä¸ºäº†åœ¨å­ç±»çš„æ„é€ å™¨ä¸­è®¿é—® <code>this.props</code>ã€‚</p><p><strong>ä¼ é€’ propsï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">props</span>); <span class="comment">// æ‰“å° &#123; name: &#x27;John&#x27;, age: 42 &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸ä¼ é€’ propsï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">props</span>); <span class="comment">// æ‰“å° undefined</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½†æ˜¯ props å‚æ•°ä¾ç„¶å¯ä»¥è®¿é—®</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(props); <span class="comment">// æ‰“å° &#123; name: &#x27;John&#x27;, age: 42 &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// åœ¨ constructor ä¹‹å¤–æ²¡æœ‰å½±å“</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">props</span>); <span class="comment">// æ‰“å° &#123; name: &#x27;John&#x27;, age: 42 &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ç‰‡æ®µæ­ç¤ºäº† <code>this.props</code> ä»…åœ¨æ„é€ å‡½æ•°ä¸­æœ‰æ‰€ä¸åŒã€‚åœ¨æ„é€ å‡½æ•°å¤–éƒ¨è¡¨ç°å°†æ˜¯ç›¸åŒçš„ã€‚</p><p>æ›´å¤šä¿¡æ¯å¯ä»¥å‚è€ƒ <a href="https://overreacted.io/zh-hans/why-do-we-write-super-props/">ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å†™ super(props) ï¼Ÿ</a></p><p>å¤§å¤šæ•°åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨å—æ§ç»„ä»¶æ¥ä»£æ›¿è¡¨å•ç»„ä»¶ã€‚</p><h2 id="41-åè°ƒï¼ˆreconciliationï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#41-åè°ƒï¼ˆreconciliationï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="41. åè°ƒï¼ˆreconciliationï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>41. åè°ƒï¼ˆreconciliationï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å½“ä¸€ä¸ªç»„ä»¶çš„ props æˆ– state å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact é€šè¿‡æ¯”è¾ƒæ–°è¿”å›çš„å…ƒç´ å’Œä¹‹å‰æ¸²æŸ“çš„å…ƒç´ æ¥å†³å®šæ˜¯å¦æœ‰å¿…è¦è¿›è¡Œå®é™…çš„ DOM æ›´æ–°ã€‚å½“å®ƒä»¬ä¸ç›¸ç­‰æ—¶ï¼ŒReact å°†æ›´æ–° DOMã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º _åè°ƒï¼ˆreconciliationï¼‰_ã€‚</p><h2 id="42-å¦‚ä½•ç”¨ä¸€ä¸ªåŠ¨æ€é”®åæ¥è®¾ç½®çŠ¶æ€ï¼Ÿ"><a href="#42-å¦‚ä½•ç”¨ä¸€ä¸ªåŠ¨æ€é”®åæ¥è®¾ç½®çŠ¶æ€ï¼Ÿ" class="headerlink" title="42. å¦‚ä½•ç”¨ä¸€ä¸ªåŠ¨æ€é”®åæ¥è®¾ç½®çŠ¶æ€ï¼Ÿ"></a>42. å¦‚ä½•ç”¨ä¸€ä¸ªåŠ¨æ€é”®åæ¥è®¾ç½®çŠ¶æ€ï¼Ÿ</h2><p>å¦‚æœä½ ä½¿ç”¨ ES6 æˆ– Babel è½¬ç å™¨æ¥è½¬æ¢ä½ çš„ JSX ä»£ç ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç”¨è®¡ç®—å±æ€§å‘½åå®Œæˆã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleInputChange</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; [event.<span class="property">target</span>.<span class="property">id</span>]: event.<span class="property">target</span>.<span class="property">value</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="43-æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œå‡½æ•°è¢«è°ƒç”¨çš„å¸¸è§é”™è¯¯æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#43-æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œå‡½æ•°è¢«è°ƒç”¨çš„å¸¸è§é”™è¯¯æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="43. æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œå‡½æ•°è¢«è°ƒç”¨çš„å¸¸è§é”™è¯¯æ˜¯ä»€ä¹ˆï¼Ÿ"></a>43. æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œå‡½æ•°è¢«è°ƒç”¨çš„å¸¸è§é”™è¯¯æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ä½ éœ€è¦ç¡®ä¿åœ¨ä¼ é€’å‡½æ•°ä½œä¸ºå‚æ•°æ—¶ï¼Œæ²¡æœ‰è°ƒç”¨è¯¥å‡½æ•°ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// é”™è¯¯âŒï¼š handleClick è¢«è°ƒç”¨è€Œä¸æ˜¯ä½œä¸ºå¼•ç”¨è¢«ä¼ å…¥</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick()&#125;</span>&gt;</span>&#123;&#x27;Click Me&#x27;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å–è€Œä»£ä¹‹çš„æ˜¯ä¼ é€’å‡½æ•°æœ¬èº«ï¼Œä¸åŠ åœ†æ‹¬å·ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// æ­£ç¡®ï¼šhandleClick æ˜¯ä½œä¸ºä¸€ä¸ªå¼•ç”¨ä¼ é€’çš„!</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>&#123;&#x27;Click Me&#x27;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="44-lazy-å‡½æ•°æ˜¯å¦æ”¯æŒå‘½åå¯¼å‡ºï¼Ÿ"><a href="#44-lazy-å‡½æ•°æ˜¯å¦æ”¯æŒå‘½åå¯¼å‡ºï¼Ÿ" class="headerlink" title="44. lazy å‡½æ•°æ˜¯å¦æ”¯æŒå‘½åå¯¼å‡ºï¼Ÿ"></a>44. lazy å‡½æ•°æ˜¯å¦æ”¯æŒå‘½åå¯¼å‡ºï¼Ÿ</h2><p>ä¸ï¼Œç›®å‰ <code>React.lazy</code> å‡½æ•°åªæ”¯æŒé»˜è®¤å‡ºå£ã€‚å¦‚æœä½ æƒ³å¯¼å…¥è¢«å‘½åå¯¼å‡ºçš„æ¨¡å—ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸­é—´æ¨¡å—ï¼Œå°†å…¶ä½œä¸ºé»˜è®¤å‡ºå£ã€‚è¿™ä¹Ÿä¿è¯äº†æ‘‡æ ‘çš„å·¥ä½œï¼Œä¸ä¼šæ‹‰å–æœªä½¿ç”¨çš„ç»„ä»¶ã€‚</p><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå¯¼å‡ºå¤šä¸ªå‘½åç»„ä»¶çš„ç»„ä»¶æ–‡ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MoreComponents.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">SomeComponent</span> = <span class="comment">/* ... */</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">UnusedComponent</span> = <span class="comment">/* ... */</span>;</span><br></pre></td></tr></table></figure><p>å¹¶åœ¨ä¸€ä¸ªä¸­é—´æ–‡ä»¶ <code>IntermediateComponent.js</code> ä¸­é‡æ–°å¯¼å‡º <code>MoreComponents.js</code> ç»„ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IntermediateComponent.js</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="title class_">SomeComponent</span> <span class="keyword">as</span> <span class="keyword">default</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./MoreComponents.js&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ lazy å‡½æ•°å¯¼å…¥è¯¥æ¨¡å—ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; lazy &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">SomeComponent</span> = <span class="title function_">lazy</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./IntermediateComponent.js&#x27;</span>));</span><br></pre></td></tr></table></figure><h2 id="45-ä¸ºä»€ä¹ˆ-React-ä½¿ç”¨-className-è€Œä¸æ˜¯-class-å±æ€§ï¼Ÿ"><a href="#45-ä¸ºä»€ä¹ˆ-React-ä½¿ç”¨-className-è€Œä¸æ˜¯-class-å±æ€§ï¼Ÿ" class="headerlink" title="45. ä¸ºä»€ä¹ˆ React ä½¿ç”¨ className è€Œä¸æ˜¯ class å±æ€§ï¼Ÿ"></a>45. ä¸ºä»€ä¹ˆ React ä½¿ç”¨ <code>className</code> è€Œä¸æ˜¯ <code>class</code> å±æ€§ï¼Ÿ</h2><p><code>class</code> æ˜¯ JavaScript çš„ä¸€ä¸ªå…³é”®å­—ï¼Œè€Œ JSX æ˜¯ JavaScript çš„ä¸€ä¸ªæ‰©å±•ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ React ä½¿ç”¨ <code>className</code> è€Œä¸æ˜¯ <code>class</code> çš„ä¸»è¦åŸå› ã€‚ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸º <code>className</code> propã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">menu</span> <span class="attr">navigation-menu</span>&#x27;&#125;&gt;</span>&#123;&#x27;Menu&#x27;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="46-ç‰‡æ®µï¼ˆfragmentsï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#46-ç‰‡æ®µï¼ˆfragmentsï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="46. ç‰‡æ®µï¼ˆfragmentsï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>46. ç‰‡æ®µï¼ˆfragmentsï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>è¿™æ˜¯ React ä¸­å¸¸è§çš„æ¨¡å¼ï¼Œç”¨äºä¸€ä¸ªç»„ä»¶è¿”å›å¤šä¸ªå…ƒç´ ã€‚ç‰‡æ®µè®©ä½ å¯ä»¥å¯¹ä¸€ä¸ª children çš„åˆ—è¡¨è¿›è¡Œåˆ†ç»„ï¼Œè€Œæ— éœ€åœ¨ DOM ä¸­æ·»åŠ é¢å¤–çš„èŠ‚ç‚¹ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">React.Fragment</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ChildA</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ChildB</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ChildC</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">React.Fragment</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªçŸ­è¯­æ³•å¯ä»¥ç”¨ï¼Œä½†æ˜¯å¾ˆå¤šå·¥å…·ä¸æ”¯æŒï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ChildA</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ChildB</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ChildC</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="47-ä¸ºä»€ä¹ˆç‰‡æ®µï¼ˆfragmentsï¼‰æ¯”-div-å®¹å™¨è¦å¥½ï¼Ÿ"><a href="#47-ä¸ºä»€ä¹ˆç‰‡æ®µï¼ˆfragmentsï¼‰æ¯”-div-å®¹å™¨è¦å¥½ï¼Ÿ" class="headerlink" title="47. ä¸ºä»€ä¹ˆç‰‡æ®µï¼ˆfragmentsï¼‰æ¯” div å®¹å™¨è¦å¥½ï¼Ÿ"></a>47. ä¸ºä»€ä¹ˆç‰‡æ®µï¼ˆfragmentsï¼‰æ¯” div å®¹å™¨è¦å¥½ï¼Ÿ</h2><ol><li>ç‰‡æ®µçš„é€Ÿåº¦æ›´å¿«ä¸€äº›ï¼Œå¹¶ä¸”ç”±äºæ²¡æœ‰åˆ›å»ºé¢å¤–çš„ DOM èŠ‚ç‚¹è€Œä½¿ç”¨æ›´å°‘çš„å†…å­˜ã€‚è¿™åªæœ‰åœ¨éå¸¸å¤§å’Œæ·±çš„æ ‘ä¸Šæ‰ä¼šä½“ç°å‡ºçœŸæ­£çš„å¥½å¤„ã€‚</li><li>ä¸€äº› CSS æœºåˆ¶ï¼Œå¦‚ Flexbox å’Œ CSS Grid æœ‰ä¸€ä¸ªç‰¹æ®Šçš„çˆ¶å­å…³ç³»ï¼Œåœ¨ä¸­é—´æ·»åŠ  div ä¼šä½¿å…¶éš¾ä»¥ä¿æŒæ‰€éœ€çš„å¸ƒå±€ã€‚</li><li>DOM æ£€æŸ¥å™¨ä¸é‚£ä¹ˆæ‚ä¹±ã€‚</li></ol><h2 id="48-ä»€ä¹ˆæ˜¯-React-ä¸­çš„ä¼ é€’é—¨ï¼ˆPortalï¼‰ï¼Ÿ"><a href="#48-ä»€ä¹ˆæ˜¯-React-ä¸­çš„ä¼ é€’é—¨ï¼ˆPortalï¼‰ï¼Ÿ" class="headerlink" title="48. ä»€ä¹ˆæ˜¯ React ä¸­çš„ä¼ é€’é—¨ï¼ˆPortalï¼‰ï¼Ÿ"></a>48. ä»€ä¹ˆæ˜¯ React ä¸­çš„ä¼ é€’é—¨ï¼ˆPortalï¼‰ï¼Ÿ</h2><p>ä¼ é€’é—¨æ˜¯ä¸€ç§æ¨èçš„æ–¹å¼ï¼Œå¯ä»¥å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°çˆ¶ç»„ä»¶çš„ DOM å±‚æ¬¡ç»“æ„ä¹‹å¤–çš„ DOM èŠ‚ç‚¹ä¸­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">createPortal</span>(child, container);</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä»»ä½•å¯æ¸²æŸ“çš„ React childrenï¼Œæ¯”å¦‚ä¸€ä¸ªå…ƒç´ ã€å­—ç¬¦ä¸²æˆ–ç‰‡æ®µã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª DOM å…ƒç´ ã€‚</p><h2 id="49-ä»€ä¹ˆæ˜¯æ— çŠ¶æ€ç»„ä»¶"><a href="#49-ä»€ä¹ˆæ˜¯æ— çŠ¶æ€ç»„ä»¶" class="headerlink" title="49. ä»€ä¹ˆæ˜¯æ— çŠ¶æ€ç»„ä»¶?"></a>49. ä»€ä¹ˆæ˜¯æ— çŠ¶æ€ç»„ä»¶?</h2><p>å¦‚æœè¡Œä¸ºæ˜¯ç‹¬ç«‹äºå…¶çŠ¶æ€çš„ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªæ— çŠ¶æ€ç»„ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨å‡½æ•°æˆ–ç±»æ¥åˆ›å»ºæ— çŠ¶æ€ç»„ä»¶ã€‚ä½†é™¤éä½ éœ€è¦åœ¨ä½ çš„ç»„ä»¶ä¸­ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå¦åˆ™ä½ åº”è¯¥é€‰æ‹©å‡½æ•°ç»„ä»¶ã€‚å¦‚æœä½ å†³å®šåœ¨è¿™é‡Œä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Œä¼šæœ‰å¾ˆå¤šå¥½å¤„ï¼›å®ƒä»¬æ˜“äºç¼–å†™ã€ç†è§£å’Œæµ‹è¯•ï¼Œé€Ÿåº¦ç¨å¿«ï¼Œè€Œä¸”ä½ å¯ä»¥å®Œå…¨é¿å…ä½¿ç”¨ <code>this</code> å…³é”®å­—ã€‚</p><h2 id="50-ä»€ä¹ˆæ˜¯çŠ¶æ€ç»„ä»¶"><a href="#50-ä»€ä¹ˆæ˜¯çŠ¶æ€ç»„ä»¶" class="headerlink" title="50. ä»€ä¹ˆæ˜¯çŠ¶æ€ç»„ä»¶?"></a>50. ä»€ä¹ˆæ˜¯çŠ¶æ€ç»„ä»¶?</h2><p>å¦‚æœä¸€ä¸ªç»„ä»¶çš„è¡Œä¸ºä¾èµ–äºè¯¥ç»„ä»¶çš„çŠ¶æ€ï¼ˆstateï¼‰ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥è¢«ç§°ä¸ºæœ‰çŠ¶æ€çš„ç»„ä»¶ã€‚è¿™äº›æœ‰çŠ¶æ€çš„ç»„ä»¶æ€»æ˜¯ç±»ç»„ä»¶ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªåœ¨æ„é€ å™¨ï¼ˆ<code>constructor</code>ï¼‰ä¸­è¢«åˆå§‹åŒ–çš„çŠ¶æ€ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å­—æ®µè¯­æ³•</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>React 16.8 æ›´æ–°ï¼š</strong></p><p>Hooks è®©ä½ åœ¨ä¸å†™ç±»çš„æƒ…å†µä¸‹ä½¿ç”¨çŠ¶æ€å’Œå…¶ä»– React åŠŸèƒ½ã€‚</p><p>ç­‰æ•ˆçš„å‡½æ•°ç»„ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">// JSX</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="51-å¦‚ä½•åœ¨-React-ä¸­å¯¹-props-è¿›è¡ŒéªŒè¯ï¼Ÿ"><a href="#51-å¦‚ä½•åœ¨-React-ä¸­å¯¹-props-è¿›è¡ŒéªŒè¯ï¼Ÿ" class="headerlink" title="51. å¦‚ä½•åœ¨ React ä¸­å¯¹ props è¿›è¡ŒéªŒè¯ï¼Ÿ"></a>51. å¦‚ä½•åœ¨ React ä¸­å¯¹ props è¿›è¡ŒéªŒè¯ï¼Ÿ</h2><p>å½“åº”ç”¨ç¨‹åºè¿è¡Œåœ¨å¼€å‘æ¨¡å¼æ—¶ï¼ŒReact ä¼šè‡ªåŠ¨æ£€æŸ¥æˆ‘ä»¬åœ¨ç»„ä»¶ä¸Šè®¾ç½®çš„æ‰€æœ‰ propsï¼Œä»¥ç¡®ä¿å®ƒä»¬å…·æœ‰æ­£ç¡®çš„ç±»å‹ã€‚å¦‚æœç±»å‹ä¸æ­£ç¡®ï¼ŒReact ä¼šåœ¨æ§åˆ¶å°ç”Ÿæˆè­¦å‘Šä¿¡æ¯ã€‚ç”±äºå¯¹æ€§èƒ½çš„å½±å“ï¼Œå®ƒåœ¨ç”Ÿäº§æ¨¡å¼ä¸­è¢«ç¦ç”¨ã€‚å¿…éœ€ props æ˜¯ç”¨ <code>isRequired</code> å®šä¹‰çš„ã€‚</p><p>é¢„å®šä¹‰çš„ props ç±»å‹é›†åˆã€‚</p><ol><li><code>PropTypes.number</code></li><li><code>PropTypes.string</code></li><li><code>PropTypes.array</code></li><li><code>PropTypes.object</code></li><li><code>PropTypes.func</code></li><li><code>PropTypes.node</code></li><li><code>PropTypes.element</code></li><li><code>PropTypes.bool</code></li><li><code>PropTypes.symbol</code></li><li><code>PropTypes.any</code></li></ol><p>æˆ‘ä»¬å¯ä»¥ä¸º <code>User</code> ç»„ä»¶å®šä¹‰ <code>propTypes</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">PropTypes</span> <span class="keyword">from</span> <span class="string">&#x27;prop-types&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="title class_">PropTypes</span>.<span class="property">number</span>.<span class="property">isRequired</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;`Welcome, $&#123;this.props.name&#125;`&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;`Age, $&#123;this.props.age&#125;`&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šåœ¨ React v15.5 ä¸­ï¼Œ<code>PropTypes</code> è¢«ä» <code>React.PropTypes</code> ç§»åˆ° <code>prop-types</code>åº“ä¸­ã€‚</p></blockquote><p>ç­‰æ•ˆçš„å‡½æ•°å¼ç»„ä»¶ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">PropTypes</span> <span class="keyword">from</span> <span class="string">&#x27;prop-types&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">User</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;`Welcome, $&#123;this.props.name&#125;`&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;`Age, $&#123;this.props.age&#125;`&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">User</span>.<span class="property">propTypes</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="title class_">PropTypes</span>.<span class="property">number</span>.<span class="property">isRequired</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="52-React-çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#52-React-çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="52. React çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ"></a>52. React çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ä»¥ä¸‹æ˜¯ Reactçš„ ä¸»è¦ä¼˜åŠ¿ã€‚</p><ol><li>é€šè¿‡è™šæ‹Ÿ DOM æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</li><li>JSX ä½¿ä»£ç æ˜“äºé˜…è¯»å’Œç¼–å†™ã€‚</li><li>å®ƒåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½èƒ½è¿›è¡Œæ¸²æŸ“ï¼ˆSSRï¼‰ã€‚</li><li>æ˜“äºä¸æ¡†æ¶ï¼ˆAngular, Backboneï¼‰é›†æˆï¼Œå› ä¸ºå®ƒåªæ˜¯ä¸€ä¸ªè§†å›¾åº“ã€‚</li><li>ä½¿ç”¨ Jest ç­‰å·¥å…·å®¹æ˜“ç¼–å†™å•å…ƒå’Œé›†æˆæµ‹è¯•ã€‚</li></ol><h2 id="53-React-çš„å±€é™æ€§æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#53-React-çš„å±€é™æ€§æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="53. React çš„å±€é™æ€§æ˜¯ä»€ä¹ˆï¼Ÿ"></a>53. React çš„å±€é™æ€§æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>é™¤äº†ä¼˜ç‚¹ä¹‹å¤–ï¼ŒReact ä¹Ÿæœ‰ä¸€äº›é™åˆ¶ã€‚</p><ol><li>React åªæ˜¯ä¸€ä¸ªè§†å›¾åº“ï¼Œä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ã€‚</li><li>å¯¹äºåˆšæ¥è§¦ç½‘ç»œå¼€å‘çš„åˆå­¦è€…æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªå­¦ä¹ æ›²çº¿ã€‚</li><li>å°† React æ•´åˆåˆ°ä¼ ç»Ÿçš„ MVC æ¡†æ¶ä¸­éœ€è¦ä¸€äº›é¢å¤–çš„é…ç½®ã€‚</li><li>ä»£ç çš„å¤æ‚æ€§éšç€å†…è”æ¨¡æ¿å’Œ JSX çš„å¢åŠ è€Œå¢åŠ ã€‚</li><li>å¤ªå¤šçš„å°ç»„ä»¶å¯¼è‡´äº†è¿‡åº¦å·¥ç¨‹åŒ–æˆ–æ¨¡æ¿åŒ–ã€‚</li></ol><h2 id="54-ä»€ä¹ˆæ˜¯-React-v16-ä¸­çš„é”™è¯¯è¾¹ç•Œï¼ˆError-Boundaryï¼‰ï¼Ÿ"><a href="#54-ä»€ä¹ˆæ˜¯-React-v16-ä¸­çš„é”™è¯¯è¾¹ç•Œï¼ˆError-Boundaryï¼‰ï¼Ÿ" class="headerlink" title="54. ä»€ä¹ˆæ˜¯ React v16 ä¸­çš„é”™è¯¯è¾¹ç•Œï¼ˆError Boundaryï¼‰ï¼Ÿ"></a>54. ä»€ä¹ˆæ˜¯ React v16 ä¸­çš„é”™è¯¯è¾¹ç•Œï¼ˆError Boundaryï¼‰ï¼Ÿ</h2><p>é”™è¯¯è¾¹ç•Œæ˜¯æŒ‡åœ¨å…¶å­ç»„ä»¶æ ‘çš„ä»»ä½•åœ°æ–¹æ•è· JavaScript é”™è¯¯çš„ç»„ä»¶ï¼Œè®°å½•è¿™äº›é”™è¯¯ï¼Œå¹¶æ˜¾ç¤ºä¸€ä¸ªåå¤‡ UI ï¼Œè€Œä¸æ˜¯å´©æºƒçš„ç»„ä»¶æ ‘ã€‚</p><p>å¦‚æœä¸€ä¸ªç±»ç»„ä»¶å®šä¹‰äº†ä¸€ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³• <code>componentDidCatch(error, info)</code> æˆ– <code>static getDerivedStateFromError()</code> ï¼Œå®ƒå°±æˆä¸ºä¸€ä¸ªé”™è¯¯è¾¹ç•Œã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ErrorBoundary</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123; <span class="attr">hasError</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentDidCatch</span>(<span class="params">error, info</span>) &#123;</span><br><span class="line">    <span class="comment">// ä½ ä¹Ÿå¯ä»¥æŠŠé”™è¯¯è®°å½•åˆ°ä¸€ä¸ªé”™è¯¯æŠ¥å‘ŠæœåŠ¡ä¸­å»</span></span><br><span class="line">    <span class="title function_">logErrorToMyService</span>(error, info)ã€‚</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getDerivedStateFromError</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡æ¸²æŸ“æ—¶æ˜¾ç¤ºå›é€€çš„ç”¨æˆ·ç•Œé¢ã€‚</span></span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">hasError</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">hasError</span>) &#123;</span><br><span class="line">      <span class="comment">// ä½ å¯ä»¥æ¸²æŸ“ä»»ä½•è‡ªå®šä¹‰çš„å›é€€ç”¨æˆ·ç•Œé¢</span></span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#x27;Something went wrong.&#x27;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">children</span>ã€‚</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹åæŠŠå®ƒä½œä¸ºä¸€ä¸ªæ™®é€šçš„ç»„ä»¶ä½¿ç”¨ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">ErrorBoundary</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">MyWidget</span> /&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">ErrorBoundary</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="55-React-v15-ä¸­æ˜¯å¦‚ä½•å¤„ç†é”™è¯¯è¾¹ç•Œçš„ï¼Ÿ"><a href="#55-React-v15-ä¸­æ˜¯å¦‚ä½•å¤„ç†é”™è¯¯è¾¹ç•Œçš„ï¼Ÿ" class="headerlink" title="55. React v15 ä¸­æ˜¯å¦‚ä½•å¤„ç†é”™è¯¯è¾¹ç•Œçš„ï¼Ÿ"></a>55. React v15 ä¸­æ˜¯å¦‚ä½•å¤„ç†é”™è¯¯è¾¹ç•Œçš„ï¼Ÿ</h2><p>React v15 ä½¿ç”¨ <code>unstable_handleError</code> æ–¹æ³•ä¸ºé”™è¯¯è¾¹ç•Œæä¾›äº†éå¸¸åŸºæœ¬çš„æ”¯æŒã€‚åœ¨ React v16 ä¸­ï¼Œå®ƒå·²ç»è¢«é‡æ–°å‘½åä¸º <code>componentDidCatch</code>ã€‚</p><h2 id="56-é™æ€ç±»å‹æ£€æŸ¥çš„æ¨èæ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#56-é™æ€ç±»å‹æ£€æŸ¥çš„æ¨èæ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="56. é™æ€ç±»å‹æ£€æŸ¥çš„æ¨èæ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>56. é™æ€ç±»å‹æ£€æŸ¥çš„æ¨èæ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>é€šå¸¸æˆ‘ä»¬ä½¿ç”¨ PropTypes åº“ï¼ˆ<code>React.PropTypes</code> ä» React v15.5 å¼€å§‹è½¬ç§»åˆ° <code>prop-types</code> åŒ…ï¼‰æ¥è¿›è¡Œ React åº”ç”¨ä¸­çš„ç±»å‹æ£€æŸ¥ã€‚å¯¹äºå¤§å‹ä»£ç åº“ï¼Œå»ºè®®ä½¿ç”¨é™æ€ç±»å‹æ£€æŸ¥å™¨ï¼Œå¦‚ Flow æˆ– TypeScriptï¼Œåœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥å¹¶æä¾›è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ã€‚</p><h2 id="57-react-dom-åŒ…æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#57-react-dom-åŒ…æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="57. react-dom åŒ…æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>57. <code>react-dom</code> åŒ…æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h2><p><code>react-dom</code> åŒ…æä¾›äº† DOM ç‰¹å®šçš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä½ çš„åº”ç”¨ç¨‹åºçš„é¡¶å±‚ä½¿ç”¨ã€‚å¤§å¤šæ•°ç»„ä»¶ä¸éœ€è¦ä½¿ç”¨æ­¤æ¨¡å—ã€‚è¿™ä¸ªåŒ…çš„ä¸€äº›æ–¹æ³•æ˜¯ï¼š</p><ol><li><code>render()</code></li><li><code>hydrate()</code></li><li><code>unmountComponentAtNode()</code></li><li><code>findDOMNode()</code></li><li><code>createPortal()</code></li></ol><h2 id="58-react-dom-çš„-render-æ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#58-react-dom-çš„-render-æ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="58. react-dom çš„ render æ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>58. <code>react-dom</code> çš„ render æ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æ­¤æ–¹æ³•ç”¨äºå°† React å…ƒç´ æ¸²æŸ“åˆ°æä¾›çš„å®¹å™¨ä¸­çš„ DOM ä¸­ï¼Œå¹¶è¿”å›å¯¹ç»„ä»¶çš„å¼•ç”¨ã€‚å¦‚æœ React å…ƒç´ ä¹‹å‰å·²æ¸²æŸ“åˆ°å®¹å™¨ä¸­ï¼Œå®ƒå°†å¯¹å…¶æ‰§è¡Œæ›´æ–°ï¼Œå¹¶ä¸”ä»…åœ¨å¿…è¦æ—¶æ›´æ”¹ DOM ä»¥åæ˜ æœ€æ–°æ›´æ”¹ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(element, container[, callback])</span><br></pre></td></tr></table></figure><p>å¦‚æœæä¾›äº†å¯é€‰çš„å›è°ƒï¼Œå®ƒå°†åœ¨ç»„ä»¶æ¸²æŸ“æˆ–æ›´æ–°åæ‰§è¡Œã€‚</p><h2 id="59-ä»€ä¹ˆæ˜¯-ReactDOMServerï¼Ÿ"><a href="#59-ä»€ä¹ˆæ˜¯-ReactDOMServerï¼Ÿ" class="headerlink" title="59. ä»€ä¹ˆæ˜¯ ReactDOMServerï¼Ÿ"></a>59. ä»€ä¹ˆæ˜¯ ReactDOMServerï¼Ÿ</h2><p><code>ReactDOMServer</code> å¯¹è±¡ä½¿ä½ èƒ½å¤Ÿå°†ç»„ä»¶å‘ˆç°ä¸ºé™æ€æ ‡è®°ï¼ˆé€šå¸¸ç”¨äºèŠ‚ç‚¹æœåŠ¡å™¨ï¼‰ã€‚è¯¥å¯¹è±¡ä¸»è¦ç”¨äºæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€‚ä»¥ä¸‹æ–¹æ³•å¯ç”¨äºæœåŠ¡å™¨å’Œæµè§ˆå™¨ç¯å¢ƒï¼š</p><ol><li><code>renderToString()</code></li><li><code>renderToStaticMarkup()</code></li></ol><p>ä¾‹å¦‚ï¼Œä½ é€šå¸¸è¿è¡ŒåŸºäº Node çš„ Web æœåŠ¡å™¨ï¼ˆå¦‚ Expressã€Hapi æˆ– Koaï¼‰ï¼Œç„¶åè°ƒç”¨ <code>renderToString</code> å°†æ ¹ç»„ä»¶æ¸²æŸ“ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åå°†å…¶ä½œä¸ºå“åº”å‘é€ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ Express</span></span><br><span class="line"><span class="keyword">import</span> &#123; renderToString &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom/server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyPage</span> <span class="keyword">from</span> <span class="string">&#x27;./MyPage&#x27;</span>;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">write</span>(<span class="string">&#x27;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;My Page&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&#x27;</span>);</span><br><span class="line">  res.<span class="title function_">write</span>(<span class="string">&#x27;&lt;div id=&quot;content&quot;&gt;&#x27;</span>);</span><br><span class="line">  res.<span class="title function_">write</span>(<span class="title function_">renderToString</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">MyPage</span> /&gt;</span></span>));</span><br><span class="line">  res.<span class="title function_">write</span>(<span class="string">&#x27;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&#x27;</span>);</span><br><span class="line">  res.<span class="title function_">end</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="60-å¦‚ä½•åœ¨-React-ä¸­ä½¿ç”¨-innerHTMLï¼Ÿ"><a href="#60-å¦‚ä½•åœ¨-React-ä¸­ä½¿ç”¨-innerHTMLï¼Ÿ" class="headerlink" title="60. å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ innerHTMLï¼Ÿ"></a>60. å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ innerHTMLï¼Ÿ</h2><p><code>dangerouslySetInnerHTML</code> å±æ€§æ˜¯ React åœ¨æµè§ˆå™¨ DOM ä¸­ä½¿ç”¨ <code>innerHTML</code> çš„æ›¿ä»£å“ã€‚å°±åƒ <code>innerHTML</code> ä¸€æ ·ï¼Œè€ƒè™‘åˆ°è·¨ç«™ç‚¹è„šæœ¬ (XSS) æ”»å‡»ï¼Œä½¿ç”¨æ­¤å±æ€§æ˜¯æœ‰é£é™©çš„ã€‚ä½ åªéœ€è¦ä¼ é€’ä¸€ä¸ª <code>__html</code> å¯¹è±¡ä½œä¸ºé”®å’Œ HTML æ–‡æœ¬ä½œä¸ºå€¼ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒMyComponent ä½¿ç”¨ <code>dangerouslySetInnerHTML</code> å±æ€§æ¥è®¾ç½® HTML æ ‡è®°ï¼š</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createMarkup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">__html</span>: <span class="string">&#x27;First &amp;middot; Second&#x27;</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;createMarkup()&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="61-å¦‚ä½•åœ¨-React-ä½¿ç”¨æ ·å¼ï¼Ÿ"><a href="#61-å¦‚ä½•åœ¨-React-ä½¿ç”¨æ ·å¼ï¼Ÿ" class="headerlink" title="61. å¦‚ä½•åœ¨ React ä½¿ç”¨æ ·å¼ï¼Ÿ"></a>61. å¦‚ä½•åœ¨ React ä½¿ç”¨æ ·å¼ï¼Ÿ</h2><p><code>style</code> å±æ€§æ¥å—ä¸€ä¸ªå°é©¼å³°å‘½åæ³•å±æ€§çš„ JavaScript å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª CSS å­—ç¬¦ä¸²ã€‚è¿™ä¸ DOM é£æ ¼çš„ JavaScript å±æ€§ä¸€è‡´ï¼Œæ›´æœ‰æ•ˆç‡ï¼Œå¹¶èƒ½é˜²æ­¢ XSS å®‰å…¨æ¼æ´ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> divStyle = &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">  <span class="attr">backgroundImage</span>: <span class="string">`url(<span class="subst">$&#123;imgUrl&#125;</span>)`</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">HelloWorldComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;divStyle&#125;</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ·å¼é”®åæ˜¯ç¬¦åˆé©¼å³°å‘½åæ³•çš„ï¼Œä»¥ä¾¿ä¸åœ¨ JavaScript ä¸­è®¿é—® DOM èŠ‚ç‚¹çš„å±æ€§ç›¸ä¸€è‡´ï¼ˆä¾‹å¦‚ <code>node.style.backgroundImage</code>ï¼‰ã€‚</p><h2 id="62-äº‹ä»¶åœ¨-React-ä¸­æœ‰ä½•ä¸åŒï¼Ÿ"><a href="#62-äº‹ä»¶åœ¨-React-ä¸­æœ‰ä½•ä¸åŒï¼Ÿ" class="headerlink" title="62. äº‹ä»¶åœ¨ React ä¸­æœ‰ä½•ä¸åŒï¼Ÿ"></a>62. äº‹ä»¶åœ¨ React ä¸­æœ‰ä½•ä¸åŒï¼Ÿ</h2><p>Handling events in React elements has some syntactic differences:</p><p>åœ¨ React å…ƒç´ ä¸Šå¤„ç†äº‹ä»¶æœ‰ä¸€äº›è¯­æ³•ä¸Šçš„ä¸åŒï¼š</p><ol><li>React äº‹ä»¶å¤„ç†ç¨‹åºä½¿ç”¨å°é©¼å³°å‘½åï¼Œè€Œä¸æ˜¯å°å†™ã€‚</li><li>ä½¿ç”¨ JSXï¼Œä½ ä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li></ol><h2 id="63-å¦‚æœä½ åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨-setState-ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"><a href="#63-å¦‚æœä½ åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨-setState-ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ" class="headerlink" title="63. å¦‚æœä½ åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ setState()ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"></a>63. å¦‚æœä½ åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ <code>setState()</code>ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h2><p>å½“ä½ ä½¿ç”¨ <code>setState()</code> æ—¶ï¼Œé™¤äº†åˆ†é…ç»™å¯¹è±¡çš„çŠ¶æ€å¤–ï¼ŒReact è¿˜é‡æ–°æ¸²æŸ“ç»„ä»¶å’Œå®ƒçš„æ‰€æœ‰å­ç»„ä»¶ã€‚ä½ ä¼šå¾—åˆ°è¿™æ ·çš„é”™è¯¯ï¼šåªèƒ½æ›´æ–°ä¸€ä¸ªå·²æŒ‚è½½æˆ–æ­£åœ¨æŒ‚è½½çš„ç»„ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>this.state</code> æ¥åˆå§‹åŒ–æ„é€ å‡½æ•°ä¸­çš„å˜é‡ã€‚</p><h2 id="64-ç´¢å¼•ä½œä¸ºé”®çš„å½±å“æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#64-ç´¢å¼•ä½œä¸ºé”®çš„å½±å“æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="64. ç´¢å¼•ä½œä¸ºé”®çš„å½±å“æ˜¯ä»€ä¹ˆï¼Ÿ"></a>64. ç´¢å¼•ä½œä¸ºé”®çš„å½±å“æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>é”®åº”è¯¥æ˜¯ç¨³å®šçš„ã€å¯é¢„æµ‹çš„å’Œå”¯ä¸€çš„ï¼Œè¿™æ · React å°±å¯ä»¥è·Ÿè¸ªå…ƒç´ ã€‚</p><p>åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæ¯ä¸ªå…ƒç´ çš„é”®éƒ½æ˜¯åŸºäºç´¢å¼•çš„ï¼Œè€Œä¸æ˜¯ä¸è¢«è¡¨ç¤ºçš„æ•°æ®ç›¸è”ç³»ã€‚è¿™é™åˆ¶äº† React å¯ä»¥åšçš„ä¼˜åŒ–ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  todos.<span class="title function_">map</span>(<span class="function">(<span class="params">todo, index</span>) =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Todo</span> &#123;<span class="attr">...todo</span>&#125; <span class="attr">key</span>=<span class="string">&#123;index&#125;</span> /&gt;</span></span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ä½¿ç”¨å…ƒç´ æ•°æ®ä½œä¸ºå”¯ä¸€é”®ï¼Œå‡è®¾ <code>todo.id</code> åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”æ˜¯ç¨³å®šçš„ï¼ŒReact å°†èƒ½å¤Ÿå¯¹å…ƒç´ è¿›è¡Œé‡æ–°æ’åºï¼Œè€Œä¸éœ€è¦åƒä»¥å‰é‚£æ ·é‡æ–°è®¡ç®—å®ƒä»¬ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  todos.<span class="title function_">map</span>(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Todo</span> &#123;<span class="attr">...todo</span>&#125; <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> /&gt;</span></span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="65-åœ¨-componentWillMount-æ–¹æ³•ä¸­ä½¿ç”¨-setState-çœŸçš„å¥½å—"><a href="#65-åœ¨-componentWillMount-æ–¹æ³•ä¸­ä½¿ç”¨-setState-çœŸçš„å¥½å—" class="headerlink" title="65. åœ¨ componentWillMount() æ–¹æ³•ä¸­ä½¿ç”¨ setState çœŸçš„å¥½å—?"></a>65. åœ¨ <code>componentWillMount()</code> æ–¹æ³•ä¸­ä½¿ç”¨ <code>setState</code> çœŸçš„å¥½å—?</h2><p>æ˜¯çš„ï¼Œåœ¨ <code>componentWillMount()</code> æ–¹æ³•ä¸­ä½¿ç”¨ <code>setState()</code> æ˜¯å®‰å…¨çš„ã€‚ä½†åŒæ—¶ï¼Œå»ºè®®é¿å…åœ¨<code>componentWillMount()</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è¿›è¡Œå¼‚æ­¥åˆå§‹åŒ–ã€‚<code>componentWillMount()</code> åœ¨æŒ‚è½½å‘ç”Ÿå‰ç«‹å³è¢«è°ƒç”¨ã€‚å®ƒåœ¨ <code>render()</code> ä¹‹å‰è¢«è°ƒç”¨ï¼Œå› æ­¤åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è®¾ç½®çŠ¶æ€ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚é¿å…åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¼•å…¥ä»»ä½•å‰¯ä½œç”¨æˆ–è®¢é˜…ã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿ç»„ä»¶åˆå§‹åŒ–çš„å¼‚æ­¥è°ƒç”¨å‘ç”Ÿåœ¨ <code>componentDidMount()</code> è€Œä¸æ˜¯ <code>componentWillMount()</code>ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  axios.<span class="title function_">get</span>(<span class="string">`api/todos`</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">messages</span>: [...result.<span class="property">data</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="66-å¦‚æœä½ åœ¨åˆå§‹çŠ¶æ€ä¸‹ä½¿ç”¨-propsï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"><a href="#66-å¦‚æœä½ åœ¨åˆå§‹çŠ¶æ€ä¸‹ä½¿ç”¨-propsï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ" class="headerlink" title="66. å¦‚æœä½ åœ¨åˆå§‹çŠ¶æ€ä¸‹ä½¿ç”¨ propsï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"></a>66. å¦‚æœä½ åœ¨åˆå§‹çŠ¶æ€ä¸‹ä½¿ç”¨ propsï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h2><p>å¦‚æœç»„ä»¶ä¸Šçš„ props è¢«æ”¹å˜è€Œç»„ä»¶æ²¡æœ‰è¢«åˆ·æ–°ï¼Œæ–°çš„ props å€¼å°†æ°¸è¿œä¸ä¼šè¢«æ˜¾ç¤ºï¼Œå› ä¸ºæ„é€ å‡½æ•°æ°¸è¿œä¸ä¼šæ›´æ–°ç»„ä»¶çš„å½“å‰çŠ¶æ€ã€‚æ¥è‡ª props çš„çŠ¶æ€åˆå§‹åŒ–åªåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºæ—¶è¿è¡Œã€‚</p><p>ä¸‹é¢è¿™ä¸ªç»„ä»¶å°±ä¸ä¼šæ˜¾ç¤ºæ›´æ–°çš„è¾“å…¥å€¼ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">records</span>: [],</span><br><span class="line">      <span class="attr">inputValue</span>: <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">inputValue</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.state.inputValue&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ render æ–¹æ³•ä¸­ä½¿ç”¨ props å°†æ›´æ–°æ•°å€¼ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">record</span>: [],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.inputValue&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="67-ä½ å¦‚ä½•æœ‰æ¡ä»¶åœ°æ¸²æŸ“ç»„ä»¶ï¼Ÿ"><a href="#67-ä½ å¦‚ä½•æœ‰æ¡ä»¶åœ°æ¸²æŸ“ç»„ä»¶ï¼Ÿ" class="headerlink" title="67. ä½ å¦‚ä½•æœ‰æ¡ä»¶åœ°æ¸²æŸ“ç»„ä»¶ï¼Ÿ"></a>67. ä½ å¦‚ä½•æœ‰æ¡ä»¶åœ°æ¸²æŸ“ç»„ä»¶ï¼Ÿ</h2><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ æƒ³æ ¹æ®ä¸€äº›çŠ¶æ€æ¥æ¸²æŸ“ä¸åŒçš„ç»„ä»¶ã€‚JSX ä¸æ¸²æŸ“ <code>false</code> æˆ– <code>undefined</code>ï¼Œæ‰€ä»¥ä½ å¯ä»¥ä½¿ç”¨æ¡ä»¶æ€§çŸ­è·¯æ¥æ¸²æŸ“ä½ çš„ç»„ä»¶çš„æŸä¸€éƒ¨åˆ†ï¼Œåªæœ‰å½“æŸä¸ªæ¡ä»¶ä¸ºçœŸæ—¶ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">MyComponent</span> = (<span class="params">&#123; name, address &#125;</span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;address &amp;&amp; <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;address&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ éœ€è¦ä¸€ä¸ª <code>if-else</code> æ¡ä»¶ï¼Œåˆ™ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">MyComponent</span> = (<span class="params">&#123; name, address &#125;</span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;address ? <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;address&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span> : <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#x27;Address is not available&#x27;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="68-ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨-DOM-å…ƒç´ ä¸Šä¼ é€’-props-æ—¶éœ€è¦è°¨æ…ï¼Ÿ"><a href="#68-ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨-DOM-å…ƒç´ ä¸Šä¼ é€’-props-æ—¶éœ€è¦è°¨æ…ï¼Ÿ" class="headerlink" title="68. ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ DOM å…ƒç´ ä¸Šä¼ é€’ props æ—¶éœ€è¦è°¨æ…ï¼Ÿ"></a>68. ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ DOM å…ƒç´ ä¸Šä¼ é€’ props æ—¶éœ€è¦è°¨æ…ï¼Ÿ</h2><p>å½“æˆ‘ä»¬ä¼ é€’ props æ—¶ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°æ·»åŠ æœªçŸ¥çš„ HTML å±æ€§çš„é£é™©ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸å¥½çš„åšæ³•ã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¦æœ‰ <code>...rest</code> æ“ä½œç¬¦çš„ prop è§£æ„ï¼Œæ‰€ä»¥å®ƒå°†åªæ·»åŠ éœ€è¦çš„ propã€‚</p><p>æ¯”å¦‚è¯´ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">ComponentA</span> = (<span class="params"></span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ComponentB</span> <span class="attr">isDisplay</span>=<span class="string">&#123;true&#125;</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">componentStyle</span>&#x27;&#125; /&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ComponentB</span> = (<span class="params">&#123; isDisplay, ...domProps &#125;</span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> &#123;<span class="attr">...domProps</span>&#125;&gt;</span>&#123;&#x27;ComponentB&#x27;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="69-å¦‚ä½•åœ¨-React-ä¸­ä½¿ç”¨è£…é¥°å™¨ï¼Ÿ"><a href="#69-å¦‚ä½•åœ¨-React-ä¸­ä½¿ç”¨è£…é¥°å™¨ï¼Ÿ" class="headerlink" title="69. å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨è£…é¥°å™¨ï¼Ÿ"></a>69. å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨è£…é¥°å™¨ï¼Ÿ</h2><p>ä½ å¯ä»¥å¯¹ä½ çš„ç±»ç»„ä»¶è¿›è¡Œè£…é¥°ï¼Œè¿™ä¸å°†ç»„ä»¶ä¼ å…¥ä¸€ä¸ªå‡½æ•°æ˜¯ä¸€æ ·çš„ã€‚<strong>è£…é¥°å™¨</strong>æ˜¯ä¿®æ”¹ç»„ä»¶åŠŸèƒ½çš„çµæ´»å’Œå¯è¯»çš„æ–¹å¼ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title function_">setTitle</span>(<span class="string">&#x27;Profile&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Profile</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="comment">//....</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">title æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†è¢«è®¾ç½®ä¸ºæ–‡æ¡£æ ‡é¢˜ã€‚WrappedComponent æ˜¯æˆ‘ä»¬çš„è£…é¥°å™¨åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä¼šæ”¶åˆ°çš„ä¸œè¥¿ç›´æ¥æ”¾åœ¨ä¸€ä¸ªç»„ä»¶ç±»ä¸Šé¢æ—¶ï¼Œæˆ‘ä»¬çš„è£…é¥°å™¨ä¼šæ”¶åˆ°è¿™æ ·çš„ä¿¡æ¯ï¼Œå¦‚ä¸Šé¢çš„ä¾‹å­æ‰€ç¤º</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setTitle</span> = title =&gt; <span class="function"><span class="params">WrappedComponent</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">React</span>.<span class="property">Component</span> &#123;</span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">title</span> = title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> è£…é¥°å™¨æ˜¯ä¸€ä¸ªæ²¡æœ‰è¿›å…¥ ES7 çš„åŠŸèƒ½ï¼Œä½†ç›®å‰æ˜¯ä¸€ä¸ªç¬¬äºŒé˜¶æ®µçš„å»ºè®®ã€‚</p><h2 id="70-å¦‚ä½•-memo-åŒ–ä¸€ä¸ªç»„ä»¶ï¼Ÿ"><a href="#70-å¦‚ä½•-memo-åŒ–ä¸€ä¸ªç»„ä»¶ï¼Ÿ" class="headerlink" title="70. å¦‚ä½• memo åŒ–ä¸€ä¸ªç»„ä»¶ï¼Ÿ"></a>70. å¦‚ä½• memo åŒ–ä¸€ä¸ªç»„ä»¶ï¼Ÿ</h2><p>æœ‰ä¸€äº›å¯ç”¨çš„ç¼“å­˜åº“ï¼Œå¯ä»¥ç”¨äºå‡½æ•°ç»„ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>moize</code> åº“å¯ä»¥åœ¨å¦ä¸€ä¸ªç»„ä»¶ä¸­å¯¹ç»„ä»¶è¿›è¡Œ memo åŒ–ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> moize <span class="keyword">from</span> <span class="string">&#x27;moize&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Component</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Component&#x27;</span>; <span class="comment">// æœ¬æ¨¡å—å¯¼å‡ºä¸€ä¸ªé memo ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoizedFoo</span> = moize.<span class="title function_">react</span>(<span class="title class_">Component</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Consumer</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#x27;I will memoize the following entry:&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">MemoizedFoo</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>æ›´æ–°ï¼š</strong> ä» React v16.6.0 å¼€å§‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª <code>React.memo</code>ã€‚å®ƒæä¾›äº†ä¸€ä¸ªæ›´é«˜é˜¶çš„ç»„ä»¶ï¼Œé™¤é props å‘ç”Ÿå˜åŒ–ï¼Œå¦åˆ™ä¼šå°†ç»„ä»¶ç¼“å­˜ã€‚è¦ä½¿ç”¨å®ƒï¼Œåªéœ€åœ¨ä½¿ç”¨å‰ç”¨ <code>React.memo</code> åŒ…ä½ç»„ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MemoComponent</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="keyword">function</span> <span class="title function_">MemoComponent</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="comment">/* render using props */</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">MyFunctionComponent</span>);</span><br></pre></td></tr></table></figure><h2 id="71-ä½ å¦‚ä½•å®ç°æœåŠ¡å™¨ç«¯æ¸²æŸ“æˆ–SSRï¼Ÿ"><a href="#71-ä½ å¦‚ä½•å®ç°æœåŠ¡å™¨ç«¯æ¸²æŸ“æˆ–SSRï¼Ÿ" class="headerlink" title="71. ä½ å¦‚ä½•å®ç°æœåŠ¡å™¨ç«¯æ¸²æŸ“æˆ–SSRï¼Ÿ"></a>71. ä½ å¦‚ä½•å®ç°æœåŠ¡å™¨ç«¯æ¸²æŸ“æˆ–SSRï¼Ÿ</h2><p>React å·²ç»å…·å¤‡äº†åœ¨ Nod eæœåŠ¡å™¨ä¸Šå¤„ç†æ¸²æŸ“çš„èƒ½åŠ›ã€‚æœ‰ä¸€ä¸ªç‰¹æ®Šç‰ˆæœ¬çš„ DOM æ¸²æŸ“å™¨ï¼Œå®ƒä¸å®¢æˆ·ç«¯çš„æ¨¡å¼ç›¸åŒã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOMServer</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom/server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOMServer</span>.<span class="title function_">renderToString</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>)ã€‚</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•å°†æŠŠå¸¸è§„çš„ HTML è¾“å‡ºä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åå¯ä»¥ä½œä¸ºæœåŠ¡å™¨å“åº”çš„ä¸€éƒ¨åˆ†æ”¾åœ¨é¡µé¢ä¸»ä½“å†…ã€‚åœ¨å®¢æˆ·ç«¯ï¼ŒReact æ£€æµ‹åˆ°é¢„æ¸²æŸ“çš„å†…å®¹ï¼Œå¹¶æ— ç¼åœ°è¡”æ¥è¯¥å†…å®¹ã€‚</p><h2 id="72-å¦‚ä½•åœ¨-React-ä¸­å¯ç”¨ç”Ÿäº§æ¨¡å¼ï¼Ÿ"><a href="#72-å¦‚ä½•åœ¨-React-ä¸­å¯ç”¨ç”Ÿäº§æ¨¡å¼ï¼Ÿ" class="headerlink" title="72. å¦‚ä½•åœ¨ React ä¸­å¯ç”¨ç”Ÿäº§æ¨¡å¼ï¼Ÿ"></a>72. å¦‚ä½•åœ¨ React ä¸­å¯ç”¨ç”Ÿäº§æ¨¡å¼ï¼Ÿ</h2><p>ä½ åº”è¯¥ä½¿ç”¨ Webpack çš„ <code>DefinePlugin</code> æ–¹æ³•æ¥è®¾ç½® <code>NODE_ENV</code> ä¸º <code>production</code>ï¼Œé€šè¿‡å®ƒæ¥å‰¥ç¦»è¯¸å¦‚ propType éªŒè¯å’Œé¢å¤–è­¦å‘Šçš„ä¸œè¥¿ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœä½ å¯¹ä»£ç è¿›è¡Œæœ€å°åŒ–å¤„ç†ï¼Œä¾‹å¦‚ Uglify çš„æ— æ•ˆä»£ç æ¶ˆé™¤æ³•ï¼Œå‰¥ç¦»å‡ºåªç”¨äºå¼€å‘çš„ä»£ç å’Œæ³¨é‡Šï¼Œè¿™å°†æå¤§åœ°å‡å°‘ä½ çš„åŒ…çš„å¤§å°ã€‚</p><h2 id="73-ä»€ä¹ˆæ˜¯-CRA-ä»¥åŠå®ƒçš„å¥½å¤„ï¼Ÿ"><a href="#73-ä»€ä¹ˆæ˜¯-CRA-ä»¥åŠå®ƒçš„å¥½å¤„ï¼Ÿ" class="headerlink" title="73. ä»€ä¹ˆæ˜¯ CRA ä»¥åŠå®ƒçš„å¥½å¤„ï¼Ÿ"></a>73. ä»€ä¹ˆæ˜¯ CRA ä»¥åŠå®ƒçš„å¥½å¤„ï¼Ÿ</h2><p><code>create-react-app</code> CLI å·¥å…·å…è®¸ä½ å¿«é€Ÿåˆ›å»ºå’Œè¿è¡ŒReactåº”ç”¨ç¨‹åºï¼Œæ— éœ€é…ç½®æ­¥éª¤ã€‚</p><p>è®©æˆ‘ä»¬ä½¿ç”¨ CRA åˆ›å»º Todo åº”ç”¨ç¨‹åºã€‚</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install -g create-react-app</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºæ–°é¡¹ç›®</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">create-react-app todo-app</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> todo-app</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ„å»ºã€æµ‹è¯•ã€è¿è¡Œ</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm run build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm run <span class="built_in">test</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm start</span></span><br></pre></td></tr></table></figure><p>å®ƒåŒ…æ‹¬æˆ‘ä»¬å»ºç«‹ä¸€ä¸ª React åº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„ä¸€åˆ‡ã€‚</p><ol><li>æ”¯æŒ Reactã€JSXã€ES6 å’Œ Flow è¯­æ³•ã€‚</li><li>è¶…è¶Š ES6 çš„è¯­è¨€é¢å¤–åŠŸèƒ½ï¼Œå¦‚å¯¹è±¡ä¼ æ’­æ“ä½œè€…ã€‚</li><li>è‡ªåŠ¨å‰ç¼€çš„ CSSï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦ <code>-webkit-</code> æˆ–å…¶ä»–å‰ç¼€ã€‚</li><li>ä¸€ä¸ªå¿«é€Ÿçš„äº¤äº’å¼å•å…ƒæµ‹è¯•è¿è¡Œå™¨ï¼Œå†…ç½®æ”¯æŒè¦†ç›–ç‡æŠ¥å‘Šã€‚</li><li>ä¸€ä¸ªå®æ—¶çš„å¼€å‘æœåŠ¡å™¨ï¼Œå¯¹å¸¸è§çš„é”™è¯¯å‘å‡ºè­¦å‘Šã€‚</li><li>ä¸€ä¸ªæ„å»ºè„šæœ¬ï¼Œç”¨äºæ†ç»‘ JSã€CSS å’Œå›¾ç‰‡ï¼Œå¹¶æä¾›å“ˆå¸Œå’Œæºç å›¾ã€‚</li></ol><h2 id="74-å®‰è£…ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#74-å®‰è£…ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="74. å®‰è£…ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ"></a>74. å®‰è£…ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å½“ä¸€ä¸ªç»„ä»¶çš„å®ä¾‹è¢«åˆ›å»ºå¹¶æ’å…¥åˆ° DOM ä¸­æ—¶ï¼Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•æŒ‰ä»¥ä¸‹é¡ºåºè¢«è°ƒç”¨ã€‚</p><ol><li><code>constructor()</code></li><li><code>static getDerivedStateFromProps()</code></li><li><code>render()</code></li><li><code>componentDidMount()</code></li></ol><h2 id="75-åœ¨-React-v16-ä¸­ï¼Œæœ‰å“ªäº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°†è¢«åºŸå¼ƒï¼Ÿ"><a href="#75-åœ¨-React-v16-ä¸­ï¼Œæœ‰å“ªäº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°†è¢«åºŸå¼ƒï¼Ÿ" class="headerlink" title="75. åœ¨ React v16 ä¸­ï¼Œæœ‰å“ªäº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°†è¢«åºŸå¼ƒï¼Ÿ"></a>75. åœ¨ React v16 ä¸­ï¼Œæœ‰å“ªäº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°†è¢«åºŸå¼ƒï¼Ÿ</h2><p>ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°†æ˜¯ä¸å®‰å…¨çš„ç¼–ç åšæ³•ï¼Œåœ¨å¼‚æ­¥æ¸²æŸ“ä¸­ä¼šå‡ºç°æ›´å¤šé—®é¢˜ã€‚</p><ol><li><code>componentWillMount()</code></li><li><code>componentWillReceiveProps()</code></li><li><code>componentWillUpdate()</code></li></ol><p>ä» React v16.3 å¼€å§‹ï¼Œè¿™äº›æ–¹æ³•è¢«åˆ«åä¸º <code>UNSAFE_</code> å‰ç¼€ï¼ŒæœªåŠ å‰ç¼€çš„ç‰ˆæœ¬å°†åœ¨ React v17 ä¸­è¢«ç§»é™¤ã€‚</p><h2 id="76-getDerivedStateFromProps-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#76-getDerivedStateFromProps-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="76. getDerivedStateFromProps() ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>76. <code>getDerivedStateFromProps()</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æ–°çš„é™æ€çš„ <code>getDerivedStateFromProps()</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åœ¨ä¸€ä¸ªç»„ä»¶å®ä¾‹åŒ–åä»¥åŠé‡æ–°æ¸²æŸ“å‰è¢«è°ƒç”¨ã€‚å®ƒå¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥æ›´æ–°çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥è¿”å› <code>null</code> æ¥è¡¨ç¤ºæ–°çš„ props ä¸éœ€è¦ä»»ä½•çŠ¶æ€æ›´æ–°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getDerivedStateFromProps</span>(<span class="params">props, state</span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸ <code>componentDidUpdate()</code> ä¸€èµ·æ¶µç›–äº† <code>componentWillReceiveProps()</code> çš„æ‰€æœ‰ç”¨ä¾‹ã€‚</p><h2 id="77-getSnapshotBeforeUpdate-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#77-getSnapshotBeforeUpdate-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="77. getSnapshotBeforeUpdate() ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>77. <code>getSnapshotBeforeUpdate()</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æ–°çš„ <code>getSnapshotBeforeUpdate()</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¼šåœ¨ DOM æ›´æ–°å‰è¢«è°ƒç”¨ã€‚è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼å°†ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™ <code>componentDidUpdate()</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">getSnapshotBeforeUpdate</span>(<span class="params">prevProps, prevState</span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸ <code>componentDidUpdate()</code> ä¸€èµ·æ¶µç›–äº† <code>componentWillUpdate()</code> çš„æ‰€æœ‰ç”¨ä¾‹ã€‚</p><h2 id="78-Hooks-æ˜¯å¦å–ä»£äº†æ¸²æŸ“-props-å’Œé«˜é˜¶ç»„ä»¶ï¼Ÿ"><a href="#78-Hooks-æ˜¯å¦å–ä»£äº†æ¸²æŸ“-props-å’Œé«˜é˜¶ç»„ä»¶ï¼Ÿ" class="headerlink" title="78. Hooks æ˜¯å¦å–ä»£äº†æ¸²æŸ“ props å’Œé«˜é˜¶ç»„ä»¶ï¼Ÿ"></a>78. Hooks æ˜¯å¦å–ä»£äº†æ¸²æŸ“ props å’Œé«˜é˜¶ç»„ä»¶ï¼Ÿ</h2><p>æ¸²æŸ“ props å’Œé«˜é˜¶ç»„ä»¶éƒ½åªæ¸²æŸ“ä¸€ä¸ª childrenï¼Œä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒHooks æ˜¯ä¸€ç§æ›´ç®€å•çš„æ–¹å¼ï¼Œé€šè¿‡å‡å°‘æ ‘ä¸­çš„åµŒå¥—æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚</p><h2 id="79-æ¨èç”¨ä»€ä¹ˆæ–¹å¼æ¥å‘½åç»„ä»¶ï¼Ÿ"><a href="#79-æ¨èç”¨ä»€ä¹ˆæ–¹å¼æ¥å‘½åç»„ä»¶ï¼Ÿ" class="headerlink" title="79. æ¨èç”¨ä»€ä¹ˆæ–¹å¼æ¥å‘½åç»„ä»¶ï¼Ÿ"></a>79. æ¨èç”¨ä»€ä¹ˆæ–¹å¼æ¥å‘½åç»„ä»¶ï¼Ÿ</h2><p>å»ºè®®é€šè¿‡å¼•ç”¨æ¥å‘½åç»„ä»¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ <code>displayName</code>ã€‚</p><p>ä½¿ç”¨ <code>displayName</code> æ¥å‘½åç»„ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">React</span>.<span class="title function_">createClass</span>(&#123;</span><br><span class="line">  <span class="attr">displayName</span>: <span class="string">&#x27;TodoApp&#x27;</span>,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ¨èçš„æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">TodoApp</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="80-å»ºè®®åœ¨ç»„ä»¶ç±»ä¸­æ–¹æ³•çš„æ’åºæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#80-å»ºè®®åœ¨ç»„ä»¶ç±»ä¸­æ–¹æ³•çš„æ’åºæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="80. å»ºè®®åœ¨ç»„ä»¶ç±»ä¸­æ–¹æ³•çš„æ’åºæ˜¯ä»€ä¹ˆï¼Ÿ"></a>80. å»ºè®®åœ¨ç»„ä»¶ç±»ä¸­æ–¹æ³•çš„æ’åºæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å»ºè®®ä»å®‰è£…åˆ°æ¸²æŸ“é˜¶æ®µçš„æ–¹æ³•çš„æ’åºã€‚</p><ol><li><code>static</code> æ–¹æ³•</li><li><code>constructor()</code></li><li><code>getChildContext()</code></li><li><code>componentWillMount()</code></li><li><code>componentDidMount()</code></li><li><code>componentWillReceiveProps()</code></li><li><code>shouldComponentUpdate()</code></li><li><code>componentWillUpdate()</code></li><li><code>componentDidUpdate()</code></li><li><code>componentWillUnmount()</code></li><li>ç‚¹å‡»å¤„ç†ç¨‹åºæˆ–äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¦‚ <code>onClickSubmit()</code> æˆ– <code>onChangeDescription()</code></li><li>æ¸²æŸ“çš„ getter æ–¹æ³•ï¼Œå¦‚ <code>getSelectReason()</code> æˆ– <code>getFooterContent()</code></li><li>å¯é€‰çš„æ¸²æŸ“æ–¹æ³•ï¼Œå¦‚ <code>renderNavigation()</code> æˆ– <code>renderProfilePicture()</code></li><li>render()</li></ol><h2 id="81-ä»€ä¹ˆæ˜¯åˆ‡æ¢ç»„ä»¶ï¼Ÿ"><a href="#81-ä»€ä¹ˆæ˜¯åˆ‡æ¢ç»„ä»¶ï¼Ÿ" class="headerlink" title="81. ä»€ä¹ˆæ˜¯åˆ‡æ¢ç»„ä»¶ï¼Ÿ"></a>81. ä»€ä¹ˆæ˜¯åˆ‡æ¢ç»„ä»¶ï¼Ÿ</h2><p>åˆ‡æ¢ç»„ä»¶æ˜¯ä¸€ä¸ªæ¸²æŸ“è®¸å¤šç»„ä»¶ä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¯¹è±¡æ¥å°† props å€¼æ˜ å°„åˆ°ç»„ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªåˆ‡æ¢ç»„ä»¶å¯ä»¥æ ¹æ® <code>page</code> props æ˜¾ç¤ºä¸åŒçš„é¡µé¢ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">HomePage</span> <span class="keyword">from</span> <span class="string">&#x27;./HomePage&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AboutPage</span> <span class="keyword">from</span> <span class="string">&#x27;./AboutPage&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ServicesPage</span> <span class="keyword">from</span> <span class="string">&#x27;./ServicesPage&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ContactPage</span> <span class="keyword">from</span> <span class="string">&#x27;./ContactPage&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PAGES</span> = &#123;</span><br><span class="line">  <span class="attr">home</span>: <span class="title class_">HomePage</span>,</span><br><span class="line">  <span class="attr">about</span>: <span class="title class_">AboutPage</span>,</span><br><span class="line">  <span class="attr">services</span>: <span class="title class_">ServicesPage</span>,</span><br><span class="line">  <span class="attr">contact</span>: <span class="title class_">ContactPage</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Page</span> = props =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Handler</span> = <span class="variable constant_">PAGES</span>[props.<span class="property">page</span>] || <span class="title class_">ContactPage</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Handler</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PAGES å¯¹è±¡çš„é”®å¯ä»¥åœ¨ props ç±»å‹ä¸­ä½¿ç”¨ï¼Œä»¥æ•æ‰å¼€å‘æ—¶é—´é”™è¯¯ã€‚</span></span><br><span class="line"><span class="title class_">Page</span>.<span class="property">propTypes</span> = &#123;</span><br><span class="line">  <span class="attr">page</span>: <span class="title class_">PropTypes</span>.<span class="title function_">oneOf</span>(<span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="variable constant_">PAGES</span>)).<span class="property">isRequired</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="82-ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å‘-setState-ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Ÿ"><a href="#82-ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å‘-setState-ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Ÿ" class="headerlink" title="82. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å‘ setState() ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Ÿ"></a>82. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å‘ <code>setState()</code> ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Ÿ</h2><p>è¿™èƒŒåçš„åŸå› æ˜¯ï¼Œ<code>setState()</code> æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚å‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼ŒReact ä¼šå¯¹çŠ¶æ€å˜åŒ–è¿›è¡Œæ‰¹å¤„ç†ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨ <code>setState()</code> åï¼ŒçŠ¶æ€å¯èƒ½ä¸ä¼šç«‹å³å‘ç”Ÿå˜åŒ–ã€‚è¿™æ„å‘³ç€ä½ åœ¨è°ƒç”¨ <code>setState()</code> æ—¶ä¸åº”è¯¥ä¾èµ–å½“å‰çš„çŠ¶æ€ï¼Œå› ä¸ºä½ ä¸èƒ½ç¡®å®šè¿™ä¸ªçŠ¶æ€ä¼šæ˜¯ä»€ä¹ˆã€‚è§£å†³åŠæ³•æ˜¯å°†ä¸€ä¸ªå‡½æ•°ä¼ é€’ç»™ <code>setState()</code>ï¼Œå¹¶å°†ä¹‹å‰çš„çŠ¶æ€ä½œä¸ºå‚æ•°ã€‚é€šè¿‡è¿™æ ·åšï¼Œä½ å¯ä»¥é¿å…ç”±äº <code>setState()</code> çš„å¼‚æ­¥æ€§è€Œå¯¼è‡´ç”¨æˆ·åœ¨è®¿é—®æ—¶è·å¾—æ—§çš„çŠ¶æ€å€¼çš„é—®é¢˜ã€‚</p><p>å‡è®¾åˆå§‹è®¡æ•°å€¼ä¸º 0ã€‚åœ¨è¿ç»­ä¸‰æ¬¡é€’å¢æ“ä½œåï¼Œè¯¥å€¼å°†åªé€’å¢ä¸€ä¸ªã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾ this.state.count === 0</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> + <span class="number">1</span> &#125;);</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> + <span class="number">1</span> &#125;);</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> + <span class="number">1</span> &#125;);</span><br><span class="line"><span class="comment">// this.state.count === 1ï¼Œè€Œä¸æ˜¯ 3</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬ç»™ <code>setState()</code> ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œè®¡æ•°å°±ä¼šè¢«æ­£ç¡®åœ°é€’å¢ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function">(<span class="params">prevState, props</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">count</span>: prevState.<span class="property">count</span> + props.<span class="property">increment</span>,</span><br><span class="line">&#125;));</span><br><span class="line"><span class="comment">// this.state.count === 3</span></span><br></pre></td></tr></table></figure><h2 id="83-ä¸ºä»€ä¹ˆåœ¨-setState-ä¸­é¦–é€‰å‡½æ•°è€Œä¸æ˜¯å¯¹è±¡ï¼Ÿ"><a href="#83-ä¸ºä»€ä¹ˆåœ¨-setState-ä¸­é¦–é€‰å‡½æ•°è€Œä¸æ˜¯å¯¹è±¡ï¼Ÿ" class="headerlink" title="83. ä¸ºä»€ä¹ˆåœ¨ setState() ä¸­é¦–é€‰å‡½æ•°è€Œä¸æ˜¯å¯¹è±¡ï¼Ÿ"></a>83. ä¸ºä»€ä¹ˆåœ¨ <code>setState()</code> ä¸­é¦–é€‰å‡½æ•°è€Œä¸æ˜¯å¯¹è±¡ï¼Ÿ</h2><p>React å¯ä»¥å°†å¤šä¸ª <code>setState()</code> çš„è°ƒç”¨æ‰¹é‡åŒ–ä¸ºä¸€æ¬¡æ›´æ–°ï¼Œä»¥æé«˜æ€§èƒ½ã€‚å› ä¸º <code>this.props</code> å’Œ <code>this.state</code> å¯èƒ½è¢«å¼‚æ­¥æ›´æ–°ï¼Œä½ ä¸åº”è¯¥ä¾èµ–å®ƒä»¬çš„å€¼æ¥è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚</p><p>è¿™ä¸ªè®¡æ•°å™¨çš„ä¾‹å­å°†æ— æ³•æŒ‰é¢„æœŸæ›´æ–°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯âŒ</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">  <span class="attr">counter</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">counter</span> + <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">increment</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>é¦–é€‰çš„æ–¹æ³•æ˜¯ç”¨å‡½æ•°è€Œä¸æ˜¯å¯¹è±¡è°ƒç”¨ <code>setState()</code>ã€‚è¯¥å‡½æ•°å°†æ¥æ”¶å…ˆå‰çš„çŠ¶æ€ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶å°†åº”ç”¨æ›´æ–°æ—¶çš„ props ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®âœ…</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function">(<span class="params">prevState, props</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">counter</span>: prevState.<span class="property">counter</span> + props.<span class="property">increment</span>,</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><h2 id="84-React-ä¸­çš„ä¸¥æ ¼æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#84-React-ä¸­çš„ä¸¥æ ¼æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="84. React ä¸­çš„ä¸¥æ ¼æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>84. React ä¸­çš„ä¸¥æ ¼æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><code>React.StrictMode</code> æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ç»„ä»¶ï¼Œç”¨äºæš´éœ²åº”ç”¨ç¨‹åºä¸­çš„æ½œåœ¨é—®é¢˜ã€‚å°±åƒ <code>&lt;Fragment&gt;</code>ï¼Œ<code>&lt;StrictMode&gt;</code>ä¸ä¼šæ¸²æŸ“ä»»ä½•é¢å¤–çš„ DOM å…ƒç´ ã€‚å®ƒä¸ºå…¶åä»£æ¿€æ´»äº†é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Šã€‚è¿™äº›æ£€æŸ¥åªé€‚ç”¨äºå¼€å‘æ¨¡å¼ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ExampleApplication</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Header</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">ComponentOne</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">ComponentTwo</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Footer</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä¸¥æ ¼æ¨¡å¼æ£€æŸ¥åªé€‚ç”¨äº <code>&lt;ComponentOne&gt;</code> å’Œ <code>&lt;ComponentTwo&gt;</code> ç»„ä»¶ã€‚</p><h2 id="85-ä¸ºä»€ä¹ˆ-isMounted-æ˜¯ä¸€ä¸ªåæ¨¡å¼ï¼Œæ­£ç¡®çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#85-ä¸ºä»€ä¹ˆ-isMounted-æ˜¯ä¸€ä¸ªåæ¨¡å¼ï¼Œæ­£ç¡®çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="85. ä¸ºä»€ä¹ˆ isMounted() æ˜¯ä¸€ä¸ªåæ¨¡å¼ï¼Œæ­£ç¡®çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ"></a>85. ä¸ºä»€ä¹ˆ <code>isMounted()</code> æ˜¯ä¸€ä¸ªåæ¨¡å¼ï¼Œæ­£ç¡®çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><code>isMounted()</code> çš„ä¸»è¦ç”¨ä¾‹æ˜¯é¿å…åœ¨ç»„ä»¶è¢«å¸è½½åè°ƒç”¨ <code>setState()</code>ï¼Œå› ä¸ºå®ƒä¼šå‘å‡ºè­¦å‘Šã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isMounted</span>()) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;...&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è°ƒç”¨ <code>setState()</code> ä¹‹å‰æ£€æŸ¥ <code>isMounted()</code> ç¡®å®å¯ä»¥æ¶ˆé™¤è­¦å‘Šï¼Œä½†è¿™ä¹Ÿè¿èƒŒäº†è­¦å‘Šçš„ç›®çš„ã€‚ä½¿ç”¨ <code>isMounted()</code> æ˜¯ä¸€ç§ä»£ç å¼‚å‘³ï¼Œå› ä¸ºä½ æ£€æŸ¥çš„å”¯ä¸€åŸå› æ˜¯ä½ è®¤ä¸ºä½ å¯èƒ½åœ¨ç»„ä»¶å¸è½½åè¿˜æŒæœ‰ä¸€ä¸ªå¼•ç”¨ã€‚</p><p>ä¸€ä¸ªæœ€ä½³çš„è§£å†³æ–¹æ¡ˆæ˜¯æ‰¾åˆ°åœ¨ç»„ä»¶å¸è½½åå¯èƒ½è°ƒç”¨ <code>setState()</code> çš„åœ°æ–¹ï¼Œå¹¶ä¿®å¤å®ƒä»¬ã€‚è¿™ç§æƒ…å†µé€šå¸¸æ˜¯ç”±äºå›è°ƒå¼•èµ·çš„ï¼Œå½“ä¸€ä¸ªç»„ä»¶åœ¨ç­‰å¾…ä¸€äº›æ•°æ®æ—¶ï¼Œåœ¨æ•°æ®åˆ°è¾¾ä¹‹å‰è¢«å¸è½½ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œä»»ä½•å›è°ƒéƒ½åº”è¯¥åœ¨ <code>componentWillUnmount()</code> ä¸­å–æ¶ˆï¼ˆåœ¨è§£é™¤æŒ‚è½½ä¹‹å‰ï¼‰ã€‚</p><blockquote><p>ä»£ç å¼‚å‘³ (Code smell)ï¼šç¨‹åºå¼€å‘é¢†åŸŸï¼Œä»£ç ä¸­çš„ä»»ä½•å¯èƒ½å¯¼è‡´æ·±å±‚æ¬¡é—®é¢˜çš„ç—‡çŠ¶éƒ½å¯ä»¥å«åšä»£ç å¼‚å‘³ã€‚ é€šå¸¸ï¼Œåœ¨å¯¹ä»£ç åšç®€çŸ­çš„åé¦ˆè¿­ä»£æ—¶ï¼Œä»£ç å¼‚å‘³ä¼šæš´éœ²å‡ºä¸€äº›æ·±å±‚æ¬¡çš„é—®é¢˜ï¼Œè¿™é‡Œçš„åé¦ˆè¿­ä»£ï¼Œæ˜¯æŒ‡ä»¥ä¸€ç§å°èŒƒå›´çš„ã€å¯æ§çš„æ–¹å¼é‡æ„ä»£ç ã€‚</p></blockquote><h2 id="86-React-ä¸­æ”¯æŒå“ªäº›æŒ‡é’ˆäº‹ä»¶ï¼Ÿ"><a href="#86-React-ä¸­æ”¯æŒå“ªäº›æŒ‡é’ˆäº‹ä»¶ï¼Ÿ" class="headerlink" title="86. React ä¸­æ”¯æŒå“ªäº›æŒ‡é’ˆäº‹ä»¶ï¼Ÿ"></a>86. React ä¸­æ”¯æŒå“ªäº›æŒ‡é’ˆäº‹ä»¶ï¼Ÿ</h2><p>æŒ‡é’ˆäº‹ä»¶æä¾›äº†ä¸€ä¸ªå¤„ç†æ‰€æœ‰è¾“å…¥äº‹ä»¶çš„ç»Ÿä¸€æ–¹æ³•ã€‚åœ¨è¿‡å»ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé¼ æ ‡å’Œå„è‡ªçš„äº‹ä»¶ç›‘å¬å™¨æ¥å¤„ç†å®ƒä»¬ï¼Œä½†ç°åœ¨æˆ‘ä»¬æœ‰è®¸å¤šè®¾å¤‡ä¸æ‹¥æœ‰é¼ æ ‡ä¸ç›¸å…³ï¼Œå¦‚å¸¦æœ‰è§¦æ‘¸è¡¨é¢çš„æ‰‹æœºæˆ–ç¬”ã€‚æˆ‘ä»¬éœ€è¦è®°ä½ï¼Œè¿™äº›äº‹ä»¶åªèƒ½åœ¨æ”¯æŒ Pointer Events è§„èŒƒçš„æµè§ˆå™¨ä¸­å·¥ä½œã€‚</p><p>ä»¥ä¸‹äº‹ä»¶ç±»å‹ç°åœ¨åœ¨ React DOM ä¸­å¯ç”¨ã€‚</p><ol><li><code>onPointerDown</code></li><li><code>onPointerMove</code></li><li><code>onPointerUp</code></li><li><code>onPointerCancel</code></li><li><code>onGotPointerCapture</code></li><li><code>onLostPointerCapture</code></li><li><code>onPointerEnter</code></li><li><code>onPointerLeave</code></li><li><code>onPointerOver</code></li><li><code>onPointerOut</code></li></ol><h2 id="87-ä¸ºä»€ä¹ˆç»„ä»¶åç§°è¦ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Ÿ"><a href="#87-ä¸ºä»€ä¹ˆç»„ä»¶åç§°è¦ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Ÿ" class="headerlink" title="87. ä¸ºä»€ä¹ˆç»„ä»¶åç§°è¦ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Ÿ"></a>87. ä¸ºä»€ä¹ˆç»„ä»¶åç§°è¦ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Ÿ</h2><p>å¦‚æœä½ ä½¿ç”¨ JSX æ¸²æŸ“ä½ çš„ç»„ä»¶ï¼Œè¯¥ç»„ä»¶çš„åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œå¦åˆ™ React å°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå³æœªè¯†åˆ«çš„æ ‡ç­¾ã€‚è¿™ä¸ªæƒ¯ä¾‹æ˜¯å› ä¸ºåªæœ‰ HTML å…ƒç´ å’Œ SVG æ ‡ç­¾å¯ä»¥ä»¥å°å†™å­—æ¯å¼€å¤´ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SomeComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="comment">// æ˜é‡‘ä¸æ­¢ï¼Œä»£ç ä¸åœ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥å®šä¹‰åç§°ä»¥å°å†™å­—æ¯å¼€å¤´çš„ç»„ä»¶ç±»ï¼Œä½†å½“å®ƒè¢«å¯¼å…¥æ—¶ï¼Œå®ƒåº”è¯¥æ˜¯å¤§å†™å­—æ¯ã€‚åœ¨è¿™é‡Œï¼Œå°å†™å°±å¯ä»¥äº†ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">myComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> myComponent;</span><br></pre></td></tr></table></figure><p>è€Œå½“å¯¼å…¥å¦ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå®ƒåº”è¯¥ä»¥å¤§å†™å­—æ¯å¼€å§‹ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">MyComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./MyComponent&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="å…³äº-React-ç»„ä»¶çš„å‘½åï¼Œæœ‰å“ªäº›ä¾‹å¤–æƒ…å†µï¼Ÿ"><a href="#å…³äº-React-ç»„ä»¶çš„å‘½åï¼Œæœ‰å“ªäº›ä¾‹å¤–æƒ…å†µï¼Ÿ" class="headerlink" title="å…³äº React ç»„ä»¶çš„å‘½åï¼Œæœ‰å“ªäº›ä¾‹å¤–æƒ…å†µï¼Ÿ"></a>å…³äº React ç»„ä»¶çš„å‘½åï¼Œæœ‰å“ªäº›ä¾‹å¤–æƒ…å†µï¼Ÿ</h3><p>ç»„ä»¶åç§°åº”ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œä½†è¿™ä¸€æƒ¯ä¾‹ä¹Ÿæœ‰å°‘æ•°ä¾‹å¤–ã€‚å¸¦ç‚¹çš„å°å†™æ ‡ç­¾åï¼ˆå±æ€§è®¿é—®å™¨ï¼‰ä»è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆçš„ç»„ä»¶åã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„æ ‡ç­¾å¯ä»¥è¢«ç¼–è¯‘æˆä¸€ä¸ªæœ‰æ•ˆçš„ç»„ä»¶ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">obj.component</span> /&gt;</span></span> <span class="comment">// `React.createElement(obj.component)`</span></span><br><span class="line">   )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="88-React-v16-ä¸­æ”¯æŒè‡ªå®šä¹‰-DOM-å±æ€§å—ï¼Ÿ"><a href="#88-React-v16-ä¸­æ”¯æŒè‡ªå®šä¹‰-DOM-å±æ€§å—ï¼Ÿ" class="headerlink" title="88. React v16 ä¸­æ”¯æŒè‡ªå®šä¹‰ DOM å±æ€§å—ï¼Ÿ"></a>88. React v16 ä¸­æ”¯æŒè‡ªå®šä¹‰ DOM å±æ€§å—ï¼Ÿ</h2><p>æ˜¯çš„ï¼Œåœ¨è¿‡å»ï¼ŒReact ä¹ æƒ¯äºå¿½ç•¥æœªçŸ¥çš„ DOM å±æ€§ã€‚å¦‚æœä½ å†™çš„ JSX æœ‰ä¸€ä¸ª React ä¸è®¤è¯†çš„å±æ€§ï¼ŒReact ä¼šç›´æ¥è·³è¿‡å®ƒã€‚</p><p>ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸‹é¢çš„å±æ€§ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div mycustomattribute=&#123;<span class="string">&#x27;something&#x27;</span>&#125; /&gt;</span><br></pre></td></tr></table></figure><p>ç”¨ React v15 æ¸²æŸ“ä¸€ä¸ªç©ºçš„ div åˆ° DOM ä¸Šã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ React v16 ä¸­ï¼Œä»»ä½•æœªçŸ¥çš„å±æ€§æœ€ç»ˆéƒ½ä¼šå‡ºç°åœ¨ DOM ä¸­ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">mycustomattribute</span>=<span class="string">&quot;something&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™å¯¹äºæä¾›æµè§ˆå™¨ç‰¹å®šçš„éæ ‡å‡†å±æ€§ï¼Œå°è¯•æ–°çš„ DOM APIï¼Œä»¥åŠä¸æœ‰ä¸»è§çš„ç¬¬ä¸‰æ–¹åº“é›†æˆæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><h2 id="89-constructor-å’Œ-getInitialState-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#89-constructor-å’Œ-getInitialState-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="89. constructor å’Œ getInitialState çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>89. constructor å’Œ getInitialState çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å½“ä½¿ç”¨ ES6 ç±»æ—¶ï¼Œä½ åº”è¯¥åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–çŠ¶æ€ï¼Œè€Œå½“ä½¿ç”¨ <code>React.createClass()</code> æ—¶ï¼Œåº”è¯¥åœ¨ <code>getInitialState()</code> æ–¹æ³•ä¸­åˆå§‹åŒ–çŠ¶æ€ã€‚</p><p><strong>ä½¿ç”¨ ES6 ç±»ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="comment">/* åˆå§‹åŒ–çŠ¶æ€ */</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨ <code>React.createClass()</code>ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MyComponent</span> = <span class="title class_">React</span>.<span class="title function_">createClass</span>(&#123;</span><br><span class="line">  <span class="title function_">getInitialState</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">/* åˆå§‹åŒ–çŠ¶æ€ */</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> <code>React.createClass()</code> åœ¨ React v16 ä¸­å·²è¢«åºŸå¼ƒå¹¶åˆ é™¤ã€‚è¯·ä½¿ç”¨æ™®é€šçš„ JavaScript ç±»æ¥ä»£æ›¿ã€‚</p><h2 id="90-ä½ èƒ½åœ¨ä¸è°ƒç”¨-setState-çš„æƒ…å†µä¸‹å¼ºåˆ¶ä¸€ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“å—ï¼Ÿ"><a href="#90-ä½ èƒ½åœ¨ä¸è°ƒç”¨-setState-çš„æƒ…å†µä¸‹å¼ºåˆ¶ä¸€ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“å—ï¼Ÿ" class="headerlink" title="90. ä½ èƒ½åœ¨ä¸è°ƒç”¨ setState çš„æƒ…å†µä¸‹å¼ºåˆ¶ä¸€ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“å—ï¼Ÿ"></a>90. ä½ èƒ½åœ¨ä¸è°ƒç”¨ setState çš„æƒ…å†µä¸‹å¼ºåˆ¶ä¸€ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“å—ï¼Ÿ</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ çš„ç»„ä»¶çš„çŠ¶æ€æˆ– props æ”¹å˜æ—¶ï¼Œä½ çš„ç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ã€‚å¦‚æœä½ çš„ <code>render()</code> æ–¹æ³•ä¾èµ–äºå…¶ä»–æ•°æ®ï¼Œä½ å¯ä»¥é€šè¿‡è°ƒç”¨ <code>forceUpdate()</code> å‘Šè¯‰ React è¯¥ç»„ä»¶éœ€è¦é‡æ–°æ¸²æŸ“ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">component.<span class="title function_">forceUpdate</span>(callback);</span><br></pre></td></tr></table></figure><p>å»ºè®®é¿å…ä½¿ç”¨ <code>forceUpdate()</code>ï¼Œåªåœ¨ <code>render()</code> ä¸­è¯»å–<code>this.props</code> å’Œ <code>this.state</code>ã€‚</p><h2 id="91-åœ¨-React-ä¸­ä½¿ç”¨-ES6-ç±»çš„ï¼Œsuper-å’Œ-super-props-ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#91-åœ¨-React-ä¸­ä½¿ç”¨-ES6-ç±»çš„ï¼Œsuper-å’Œ-super-props-ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="91. åœ¨  React ä¸­ä½¿ç”¨ ES6 ç±»çš„ï¼Œsuper() å’Œ super(props) ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>91. åœ¨  React ä¸­ä½¿ç”¨ ES6 ç±»çš„ï¼Œ<code>super()</code> å’Œ <code>super(props)</code> ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>å½“ä½ æƒ³åœ¨ <code>constructor()</code> ä¸­è®¿é—® <code>this.props</code> æ—¶ï¼Œä½ åº”è¯¥æŠŠ props ä¼ ç»™ <code>super()</code> æ–¹æ³•ã€‚</p><p><strong>ä½¿ç”¨ <code>super(props)</code>ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">props</span>); <span class="comment">// &#123; name: &#x27;John&#x27;, ... &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨ <code>super()</code>ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">props</span>); <span class="comment">// undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>constructor()</code> ä¹‹å¤–ï¼Œä¸¤è€…éƒ½ä¼šæ˜¾ç¤ºç›¸åŒçš„ <code>this.props</code> çš„å€¼ã€‚</p><h2 id="92-å¦‚ä½•åœ¨-JSX-å†…å¾ªç¯ï¼Ÿ"><a href="#92-å¦‚ä½•åœ¨-JSX-å†…å¾ªç¯ï¼Ÿ" class="headerlink" title="92. å¦‚ä½•åœ¨ JSX å†…å¾ªç¯ï¼Ÿ"></a>92. å¦‚ä½•åœ¨ JSX å†…å¾ªç¯ï¼Ÿ</h2><p>ä½ å¯ä»¥ç®€å•åœ°ä½¿ç”¨ <code>Array.prototype.map</code> ä¸ ES6 ç®­å¤´å‡½æ•°è¯­æ³•ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹è±¡çš„ <code>items</code> æ•°ç»„è¢«æ˜ å°„æˆç»„ä»¶çš„æ•°ç»„ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;tbody&gt;</span><br><span class="line">  &#123;items.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">SomeComponent</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span> <span class="attr">name</span>=<span class="string">&#123;item.name&#125;</span> /&gt;</span></span></span><br><span class="line">  ))&#125;</span><br><span class="line">&lt;/tbody&gt;</span><br></pre></td></tr></table></figure><p>ä½†ä½ ä¸èƒ½ç”¨ <code>for</code> å¾ªç¯æ¥è¿­ä»£ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;tbody&gt;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; items.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">SomeComponent</span> <span class="attr">key</span>=<span class="string">&#123;items[i].id&#125;</span> <span class="attr">name</span>=<span class="string">&#123;items[i].name&#125;</span> /&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">&lt;/tbody&gt;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸º JSX æ ‡ç­¾è¢«è½¬æ¢ä¸ºå‡½æ•°è°ƒç”¨ï¼Œè€Œä¸”ä½ ä¸èƒ½åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨è¯­å¥ã€‚è¿™å¯èƒ½ä¼šæ”¹å˜ï¼Œå› ä¸º <code>do</code> è¡¨è¾¾å¼æ˜¯ç¬¬ä¸€é˜¶æ®µçš„å»ºè®®ã€‚</p><h2 id="93-ä½ å¦‚ä½•åœ¨å±æ€§å¼•å·ä¸­è®¿é—®-propsï¼Ÿ"><a href="#93-ä½ å¦‚ä½•åœ¨å±æ€§å¼•å·ä¸­è®¿é—®-propsï¼Ÿ" class="headerlink" title="93. ä½ å¦‚ä½•åœ¨å±æ€§å¼•å·ä¸­è®¿é—® propsï¼Ÿ"></a>93. ä½ å¦‚ä½•åœ¨å±æ€§å¼•å·ä¸­è®¿é—® propsï¼Ÿ</h2><p>Reactï¼ˆæˆ– JSXï¼‰ä¸æ”¯æŒå±æ€§å€¼å†…çš„å˜é‡æ’å€¼ã€‚ä¸‹é¢çš„è¡¨ç¤ºæ–¹æ³•å°±ä¸èƒ½ç”¨äº†ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img className=<span class="string">&quot;image&quot;</span> src=<span class="string">&quot;images/&#123;this.props.image&#125;&quot;</span> /&gt;</span><br></pre></td></tr></table></figure><p>ä½†ä½ å¯ä»¥æŠŠä»»ä½• JS è¡¨è¾¾å¼æ”¾åœ¨å¤§æ‹¬å·å†…ä½œä¸ºæ•´ä¸ªå±æ€§å€¼ã€‚æ‰€ä»¥ä¸‹é¢çš„è¡¨è¾¾å¼æ˜¯æœ‰æ•ˆçš„ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img className=<span class="string">&quot;image&quot;</span> src=&#123;<span class="string">&#x27;images/&#x27;</span> + <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">image</span>&#125; /&gt;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img className=<span class="string">&quot;image&quot;</span> src=&#123;<span class="string">`images/<span class="subst">$&#123;<span class="variable language_">this</span>.props.image&#125;</span>`</span>&#125; /&gt;</span><br></pre></td></tr></table></figure><h2 id="94-ä»€ä¹ˆæ˜¯å¸¦-shape-çš„-React-åŸå‹æ•°ç»„ï¼Ÿ"><a href="#94-ä»€ä¹ˆæ˜¯å¸¦-shape-çš„-React-åŸå‹æ•°ç»„ï¼Ÿ" class="headerlink" title="94. ä»€ä¹ˆæ˜¯å¸¦ shape çš„ React åŸå‹æ•°ç»„ï¼Ÿ"></a>94. ä»€ä¹ˆæ˜¯å¸¦ shape çš„ React åŸå‹æ•°ç»„ï¼Ÿ</h2><p>å¦‚æœä½ æƒ³æŠŠä¸€ä¸ªå¯¹è±¡æ•°ç»„ä¼ é€’ç»™ä¸€ä¸ªå…·æœ‰ç‰¹å®š shape çš„ç»„ä»¶ï¼Œé‚£ä¹ˆä½¿ç”¨ <code>React.PropTypes.shape()</code> ä½œä¸º <code>React.PropTypes.arrayOf()</code> çš„ä¸€ä¸ªå‚æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ReactComponent</span>.<span class="property">propTypes</span> = &#123;</span><br><span class="line">  <span class="attr">arrayWithShape</span>: <span class="title class_">React</span>.<span class="property">PropTypes</span>.<span class="title function_">arrayOf</span>(</span><br><span class="line">    <span class="title class_">React</span>.<span class="property">PropTypes</span>.<span class="title function_">shape</span>(&#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="title class_">React</span>.<span class="property">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="title class_">React</span>.<span class="property">PropTypes</span>.<span class="property">number</span>.<span class="property">isRequired</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ).<span class="property">isRequired</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="95-å¦‚ä½•æœ‰æ¡ä»¶åœ°åº”ç”¨ç±»å±æ€§ï¼Ÿ"><a href="#95-å¦‚ä½•æœ‰æ¡ä»¶åœ°åº”ç”¨ç±»å±æ€§ï¼Ÿ" class="headerlink" title="95. å¦‚ä½•æœ‰æ¡ä»¶åœ°åº”ç”¨ç±»å±æ€§ï¼Ÿ"></a>95. å¦‚ä½•æœ‰æ¡ä»¶åœ°åº”ç”¨ç±»å±æ€§ï¼Ÿ</h2><p>ä½ ä¸åº”è¯¥åœ¨å¼•å·å†…ä½¿ç”¨å¤§æ‹¬å·ï¼Œå› ä¸ºå®ƒå°†è¢«è®¡ç®—ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=<span class="string">&quot;btn-panel &#123;this.props.visible ? &#x27;show&#x27; : &#x27;hidden&#x27;&#125;&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>ç›¸åï¼Œä½ éœ€è¦æŠŠå¤§æ‹¬å·ç§»åˆ°å¤–é¢ï¼ˆåˆ«å¿˜äº†åœ¨ç±»åä¹‹é—´åŒ…æ‹¬ç©ºæ ¼ï¼‰ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=&#123;<span class="string">&#x27;btn-panel &#x27;</span> + (<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">visible</span> ? <span class="string">&#x27;show&#x27;</span> : <span class="string">&#x27;hidden&#x27;</span>)&#125;&gt;</span><br></pre></td></tr></table></figure><p>æ¨¡æ¿å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=&#123;<span class="string">`btn-panel <span class="subst">$&#123;<span class="variable language_">this</span>.props.visible ? <span class="string">&#x27;show&#x27;</span> : <span class="string">&#x27;hidden&#x27;</span>&#125;</span>`</span>&#125;&gt;</span><br></pre></td></tr></table></figure><h2 id="96-React-å’Œ-ReactDOM-ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#96-React-å’Œ-ReactDOM-ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="96. React å’Œ ReactDOM ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>96. React å’Œ ReactDOM ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p><code>react</code> åŒ…åŒ…å« <code>React.createElement()</code>ã€<code>React.Component</code>ã€<code>React.Children</code>, ä»¥åŠå…¶ä»–ä¸å…ƒç´ å’Œç»„ä»¶ç±»ç›¸å…³çš„å¸®åŠ©å‡½æ•°ã€‚ä½ å¯ä»¥æŠŠè¿™äº›çœ‹ä½œæ˜¯ä½ æ„å»ºç»„ä»¶æ‰€éœ€è¦çš„åŒæ„æˆ–é€šç”¨åŠ©æ‰‹ã€‚<code>react-dom</code> åŒ…åŒ…å« <code>ReactDOM.render()</code>ï¼Œåœ¨ <code>react-dom/server</code> ä¸­ï¼Œæˆ‘ä»¬æœ‰ <code>ReactDOMServer.renderToString()</code> å’Œ <code>ReactDOMServer.renderToStaticMarkup()</code> çš„æœåŠ¡å™¨ç«¯æ¸²æŸ“æ”¯æŒã€‚</p><h2 id="97-ä¸ºä»€ä¹ˆ-ReactDOM-è¦ä»-React-ä¸­åˆ†ç¦»å‡ºæ¥ï¼Ÿ"><a href="#97-ä¸ºä»€ä¹ˆ-ReactDOM-è¦ä»-React-ä¸­åˆ†ç¦»å‡ºæ¥ï¼Ÿ" class="headerlink" title="97. ä¸ºä»€ä¹ˆ ReactDOM è¦ä» React ä¸­åˆ†ç¦»å‡ºæ¥ï¼Ÿ"></a>97. ä¸ºä»€ä¹ˆ ReactDOM è¦ä» React ä¸­åˆ†ç¦»å‡ºæ¥ï¼Ÿ</h2><p>React å›¢é˜Ÿè‡´åŠ›äºå°†æ‰€æœ‰ä¸ DOM ç›¸å…³çš„åŠŸèƒ½æå–åˆ°ä¸€ä¸ªå•ç‹¬çš„åº“ä¸­ï¼Œç§°ä¸º ReactDOMã€‚React v0.14 æ˜¯ç¬¬ä¸€ä¸ªåˆ†å‰²åº“çš„ç‰ˆæœ¬ã€‚é€šè¿‡æŸ¥çœ‹ä¸€äº›åŒ…ï¼Œ<code>react-native</code>ã€<code>react-art</code>ã€<code>react-canvas</code>å’Œ <code>react-three</code>ï¼Œå·²ç»å¾ˆæ¸…æ¥šï¼ŒReact çš„ä¼˜ç§€å’Œæœ¬è´¨ä¸æµè§ˆå™¨æˆ– DOM æ— å…³ã€‚</p><p>ä¸ºäº†å»ºç«‹æ›´å¤š React å¯ä»¥æ¸²æŸ“çš„ç¯å¢ƒï¼ŒReact å›¢é˜Ÿè®¡åˆ’å°†ä¸» React åŒ…åˆ†æˆä¸¤ä¸ªï¼š<code>react</code> å’Œ <code>react-dom</code>ã€‚è¿™å°±ä¸ºç¼–å†™å¯ä»¥åœ¨ç½‘ç»œç‰ˆ React å’Œ React Native ä¹‹é—´å…±äº«çš„ç»„ä»¶é“ºå¹³äº†é“è·¯ã€‚</p><h2 id="98-å¦‚ä½•ä½¿ç”¨-React-label-å…ƒç´ ï¼Ÿ"><a href="#98-å¦‚ä½•ä½¿ç”¨-React-label-å…ƒç´ ï¼Ÿ" class="headerlink" title="98. å¦‚ä½•ä½¿ç”¨ React label å…ƒç´ ï¼Ÿ"></a>98. å¦‚ä½•ä½¿ç”¨ React label å…ƒç´ ï¼Ÿ</h2><p>å¦‚æœä½ è¯•å›¾ç”¨æ ‡å‡†çš„ <code>for</code> å±æ€§æ¸²æŸ“ä¸€ä¸ªç»‘å®šåœ¨æ–‡æœ¬è¾“å…¥ä¸Šçš„ <code>&lt;label&gt;</code> å…ƒç´ ï¼Œé‚£ä¹ˆå®ƒäº§ç”Ÿçš„ HTML ä¼šç¼ºå°‘è¯¥å±æ€§ï¼Œå¹¶åœ¨æ§åˆ¶å°æ‰“å°å‡ºè­¦å‘Šã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;label <span class="keyword">for</span>=&#123;<span class="string">&#x27;user&#x27;</span>&#125;&gt;&#123;<span class="string">&#x27;User&#x27;</span>&#125;&lt;/label&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#123;</span>&#x27;<span class="attr">text</span>&#x27;&#125; <span class="attr">id</span>=<span class="string">&#123;</span>&#x27;<span class="attr">user</span>&#x27;&#125; /&gt;</span></span></span><br></pre></td></tr></table></figure><p>ç”±äº <code>for</code> åœ¨ JavaScript ä¸­æ˜¯ä¸€ä¸ªä¿ç•™å…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>htmlFor</code> ä»£æ›¿ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;label htmlFor=&#123;<span class="string">&#x27;user&#x27;</span>&#125;&gt;&#123;<span class="string">&#x27;User&#x27;</span>&#125;&lt;/label&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#123;</span>&#x27;<span class="attr">text</span>&#x27;&#125; <span class="attr">id</span>=<span class="string">&#123;</span>&#x27;<span class="attr">user</span>&#x27;&#125; /&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="99-å¦‚ä½•ç»„åˆå¤šä¸ªå†…è”æ ·å¼å¯¹è±¡ï¼Ÿ"><a href="#99-å¦‚ä½•ç»„åˆå¤šä¸ªå†…è”æ ·å¼å¯¹è±¡ï¼Ÿ" class="headerlink" title="99. å¦‚ä½•ç»„åˆå¤šä¸ªå†…è”æ ·å¼å¯¹è±¡ï¼Ÿ"></a>99. å¦‚ä½•ç»„åˆå¤šä¸ªå†…è”æ ·å¼å¯¹è±¡ï¼Ÿ</h2><p>ä½ å¯ä»¥åœ¨å¸¸è§„ React ä¸­ä½¿ç”¨å±•å¼€è¯­æ³•ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button style=&#123;&#123; ...styles.<span class="property">panel</span>.<span class="property">button</span>, ...styles.<span class="property">panel</span>.<span class="property">submitButton</span> &#125;&#125;&gt;</span><br><span class="line">  &#123;<span class="string">&#x27;Submit&#x27;</span>&#125;</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ React Nativeï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨æ•°ç»„ç¬¦å·ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button style=&#123;[styles.<span class="property">panel</span>.<span class="property">button</span>, styles.<span class="property">panel</span>.<span class="property">submitButton</span>]&#125;&gt;</span><br><span class="line">  &#123;<span class="string">&#x27;Submit&#x27;</span>&#125;</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></table></figure><h2 id="100-å¦‚ä½•åœ¨æµè§ˆå™¨è°ƒæ•´å¤§å°æ—¶é‡æ–°æ¸²æŸ“è§†å›¾ï¼Ÿ"><a href="#100-å¦‚ä½•åœ¨æµè§ˆå™¨è°ƒæ•´å¤§å°æ—¶é‡æ–°æ¸²æŸ“è§†å›¾ï¼Ÿ" class="headerlink" title="100. å¦‚ä½•åœ¨æµè§ˆå™¨è°ƒæ•´å¤§å°æ—¶é‡æ–°æ¸²æŸ“è§†å›¾ï¼Ÿ"></a>100. å¦‚ä½•åœ¨æµè§ˆå™¨è°ƒæ•´å¤§å°æ—¶é‡æ–°æ¸²æŸ“è§†å›¾ï¼Ÿ</h2><p>ä½ å¯ä»¥åœ¨ <code>componentDidMount()</code> ä¸­ç›‘å¬ <code>resize</code> äº‹ä»¶ï¼Œç„¶åæ›´æ–°å°ºå¯¸ï¼ˆ<code>width</code> å’Œ <code>height</code>ï¼‰ã€‚ä½ åº”è¯¥åœ¨ <code>componentWillUnmount()</code> æ–¹æ³•ä¸­ç§»é™¤ç›‘å¬å™¨ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">WindowDimensions</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentWillMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">updateDimensions</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="variable language_">this</span>.<span class="property">updateDimensions</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="variable language_">this</span>.<span class="property">updateDimensions</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  updateDimensions = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">width</span>: <span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="attr">height</span>: <span class="variable language_">window</span>.<span class="property">innerHeight</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;this.state.width&#125; x &#123;this.state.height&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="101-setState-å’Œ-replaceState-æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#101-setState-å’Œ-replaceState-æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="101. setState() å’Œ replaceState() æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>101. <code>setState()</code> å’Œ <code>replaceState()</code> æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å½“ä½ ä½¿ç”¨ <code>setState()</code> æ—¶ï¼Œå½“å‰å’Œä¹‹å‰çš„çŠ¶æ€è¢«åˆå¹¶ã€‚ <code>replaceState()</code> æŠ›å‡ºå½“å‰çš„çŠ¶æ€ï¼Œåªç”¨ä½ æä¾›çš„å†…å®¹æ¥æ›¿æ¢å®ƒã€‚é€šå¸¸ <code>setState()</code> ä¼šè¢«ä½¿ç”¨ï¼Œé™¤éä½ çœŸçš„å› ä¸ºæŸäº›åŸå› éœ€è¦åˆ é™¤æ‰€æœ‰ä¹‹å‰çš„é”®ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ <code>setState()</code> ä¸­æŠŠçŠ¶æ€è®¾ç½®ä¸º <code>false</code>&#x2F;<code>null</code>ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ <code>replaceState()</code>ã€‚</p><h2 id="102-å¦‚ä½•ç›‘å¬çŠ¶æ€å˜åŒ–ï¼Ÿ"><a href="#102-å¦‚ä½•ç›‘å¬çŠ¶æ€å˜åŒ–ï¼Ÿ" class="headerlink" title="102. å¦‚ä½•ç›‘å¬çŠ¶æ€å˜åŒ–ï¼Ÿ"></a>102. å¦‚ä½•ç›‘å¬çŠ¶æ€å˜åŒ–ï¼Ÿ</h2><p>å½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>componentDidUpdate</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°†è¢«è°ƒç”¨ã€‚ä½ å¯ä»¥å°†æä¾›çš„çŠ¶æ€å’Œ props å€¼ä¸å½“å‰çš„çŠ¶æ€å’Œ props è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç¡®å®šæ˜¯å¦æœ‰æ„ä¹‰çš„å˜åŒ–ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">componentDidUpdate(object prevProps, object prevState)</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> ä»¥å‰çš„ ReactJS ç‰ˆæœ¬ä¹Ÿä½¿ç”¨ <code>componentWillUpdate(object nextProps, object nextState)</code> ç›‘å¬çŠ¶æ€æ”¹å˜ã€‚åœ¨æœ€æ–°çš„ç‰ˆæœ¬ä¸­ï¼Œå®ƒå·²è¢«å¼ƒç”¨ã€‚</p><h2 id="103-åœ¨-React-çŠ¶æ€ä¸‹ï¼Œåˆ é™¤æ•°ç»„å…ƒç´ çš„æ¨èæ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#103-åœ¨-React-çŠ¶æ€ä¸‹ï¼Œåˆ é™¤æ•°ç»„å…ƒç´ çš„æ¨èæ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="103. åœ¨ React çŠ¶æ€ä¸‹ï¼Œåˆ é™¤æ•°ç»„å…ƒç´ çš„æ¨èæ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"></a>103. åœ¨ React çŠ¶æ€ä¸‹ï¼Œåˆ é™¤æ•°ç»„å…ƒç´ çš„æ¨èæ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>Array.prototype.filter()</code> æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>removeItem()</code> æ–¹æ³•æ¥æ›´æ–°çŠ¶æ€ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">removeItem</span>(<span class="params">index</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">data</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">item, i</span>) =&gt;</span> i !== index)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="104-æœ‰æ²¡æœ‰å¯èƒ½åœ¨ä¸æ¸²æŸ“-HTML-çš„æƒ…å†µä¸‹ä½¿ç”¨-React-å‘¢ï¼Ÿ"><a href="#104-æœ‰æ²¡æœ‰å¯èƒ½åœ¨ä¸æ¸²æŸ“-HTML-çš„æƒ…å†µä¸‹ä½¿ç”¨-React-å‘¢ï¼Ÿ" class="headerlink" title="104. æœ‰æ²¡æœ‰å¯èƒ½åœ¨ä¸æ¸²æŸ“ HTML çš„æƒ…å†µä¸‹ä½¿ç”¨ React å‘¢ï¼Ÿ"></a>104. æœ‰æ²¡æœ‰å¯èƒ½åœ¨ä¸æ¸²æŸ“ HTML çš„æƒ…å†µä¸‹ä½¿ç”¨ React å‘¢ï¼Ÿ</h2><p>åœ¨æœ€æ–°ç‰ˆæœ¬ï¼ˆ&gt;&#x3D;16.2ï¼‰ä¸­å¯ä»¥å®ç°ã€‚ä»¥ä¸‹æ˜¯å¯ç”¨é€‰é¡¹ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">React.Fragment</span>&gt;</span><span class="tag">&lt;/<span class="name">React.Fragment</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span><span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿”å› <code>undefined</code> æ˜¯ä¸è¡Œçš„ã€‚</p><h2 id="105-å¦‚ä½•ç”¨-React-æ‰“å°æ¼‚äº®çš„-JSONï¼Ÿ"><a href="#105-å¦‚ä½•ç”¨-React-æ‰“å°æ¼‚äº®çš„-JSONï¼Ÿ" class="headerlink" title="105. å¦‚ä½•ç”¨ React æ‰“å°æ¼‚äº®çš„ JSONï¼Ÿ"></a>105. å¦‚ä½•ç”¨ React æ‰“å°æ¼‚äº®çš„ JSONï¼Ÿ</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>&lt;pre&gt;</code> æ ‡ç­¾ï¼Œè¿™æ ·å¯ä»¥ä¿ç•™ <code>JSON.stringify()</code> çš„æ ¼å¼ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = &#123; <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span>, <span class="attr">age</span>: <span class="number">42</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">pre</span>&gt;</span>&#123;JSON.stringify(data, null, 2)&#125;<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">React</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">User</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;container&#x27;</span>));</span><br></pre></td></tr></table></figure><h2 id="106-ä¸ºä»€ä¹ˆä½ ä¸èƒ½åœ¨-React-ä¸­æ›´æ–°-propsï¼Ÿ"><a href="#106-ä¸ºä»€ä¹ˆä½ ä¸èƒ½åœ¨-React-ä¸­æ›´æ–°-propsï¼Ÿ" class="headerlink" title="106. ä¸ºä»€ä¹ˆä½ ä¸èƒ½åœ¨ React ä¸­æ›´æ–° propsï¼Ÿ"></a>106. ä¸ºä»€ä¹ˆä½ ä¸èƒ½åœ¨ React ä¸­æ›´æ–° propsï¼Ÿ</h2><p>React çš„ç†å¿µæ˜¯ï¼Œprops åº”è¯¥æ˜¯<strong>ä¸å¯å˜çš„</strong>å’Œ<strong>è‡ªä¸Šè€Œä¸‹</strong>çš„ã€‚è¿™æ„å‘³ç€çˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶å‘é€ä»»ä½• props å€¼ï¼Œä½†å­ç»„ä»¶ä¸èƒ½ä¿®æ”¹æ”¶åˆ°çš„ propsã€‚</p><h2 id="107-å¦‚ä½•åœ¨é¡µé¢åŠ è½½æ—¶èšç„¦ä¸€ä¸ªè¾“å…¥æ¡†ï¼Ÿ"><a href="#107-å¦‚ä½•åœ¨é¡µé¢åŠ è½½æ—¶èšç„¦ä¸€ä¸ªè¾“å…¥æ¡†ï¼Ÿ" class="headerlink" title="107. å¦‚ä½•åœ¨é¡µé¢åŠ è½½æ—¶èšç„¦ä¸€ä¸ªè¾“å…¥æ¡†ï¼Ÿ"></a>107. å¦‚ä½•åœ¨é¡µé¢åŠ è½½æ—¶èšç„¦ä¸€ä¸ªè¾“å…¥æ¡†ï¼Ÿ</h2><p>ä½ å¯ä»¥é€šè¿‡ä¸º <code>input</code> å…ƒç´ åˆ›å»º ref å¹¶åœ¨ <code>componentDidMount()</code> ä¸­ä½¿ç”¨å®ƒã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">nameInput</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">nameInput</span>.<span class="title function_">focus</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">defaultValue</span>=<span class="string">&#123;</span>&quot;<span class="attr">Won</span>&#x27;<span class="attr">t</span> <span class="attr">focus</span>&quot;&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">ref</span>=<span class="string">&#123;input</span> =&gt;</span> (this.nameInput = input)&#125;</span></span><br><span class="line"><span class="language-xml">          defaultValue=&#123;&#x27;Will focus&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;app&#x27;</span>));</span><br></pre></td></tr></table></figure><h2 id="108-æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#108-æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="108. æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"></a>108. æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h2><ol><li><strong>åˆå¹¶çŠ¶æ€å’Œå¯¹è±¡åè°ƒç”¨ <code>setState()</code>ï¼š</strong></li></ol><ul><li>ä½¿ç”¨ <code>Object.assign()</code> åˆ›å»ºå¯¹è±¡çš„æ‹·è´ï¼š</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">user</span>, &#123; <span class="attr">age</span>: <span class="number">42</span> &#125;);</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; user &#125;);</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨å±•å¼€æ“ä½œç¬¦ï¼š</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123; ...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">user</span>, <span class="attr">age</span>: <span class="number">42</span> &#125;;</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; user &#125;);</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>è°ƒç”¨ <code>setState()</code> æ—¶ä¼ å…¥å‡½æ•°ï¼š</strong></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">user</span>: &#123;</span><br><span class="line">    ...prevState.<span class="property">user</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">42</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><h2 id="109-æˆ‘ä»¬å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹è¿è¡Œæ—¶çš„-React-çš„ç‰ˆæœ¬ï¼Ÿ"><a href="#109-æˆ‘ä»¬å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹è¿è¡Œæ—¶çš„-React-çš„ç‰ˆæœ¬ï¼Ÿ" class="headerlink" title="109. æˆ‘ä»¬å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹è¿è¡Œæ—¶çš„ React çš„ç‰ˆæœ¬ï¼Ÿ"></a>109. æˆ‘ä»¬å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹è¿è¡Œæ—¶çš„ React çš„ç‰ˆæœ¬ï¼Ÿ</h2><p>ä½ å¯ä»¥ä½¿ç”¨ <code>React.version</code> æ¥è·å–ç‰ˆæœ¬ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">REACT_VERSION</span> = <span class="title class_">React</span>.<span class="property">version</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;`React version: $&#123;REACT_VERSION&#125;`&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;app&#x27;</span>),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="110-åœ¨-create-react-app-ä¸­åŒ…å«-polyfills-çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#110-åœ¨-create-react-app-ä¸­åŒ…å«-polyfills-çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="110. åœ¨ create-react-app ä¸­åŒ…å« polyfills çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ"></a>110. åœ¨ <code>create-react-app</code> ä¸­åŒ…å« polyfills çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥åœ¨ create-react-app ä¸­åŒ…å« polyfillsã€‚</p><ol><li><strong>æ‰‹åŠ¨ä» <code>core-js</code> å¼•å…¥ï¼š</strong></li></ol><p>åˆ›å»ºä¸€ä¸ªåä¸ºï¼ˆç±»ä¼¼ï¼‰<code>polyfills.js</code> çš„æ–‡ä»¶å¹¶å°†å…¶å¯¼å…¥æ ¹ <code>index.js</code> æ–‡ä»¶ã€‚è¿è¡Œ <code>npm install core-js</code> æˆ– <code>yarn add core-js</code> å¹¶å¯¼å…¥ä½ æ‰€éœ€è¦çš„ç‰¹å®šåŠŸèƒ½ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;core-js/fn/array/find&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;core-js/fn/array/includes&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;core-js/fn/number/is-nan&#x27;</span>;</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>ä½¿ç”¨ Polyfill æœåŠ¡ï¼š</strong></li></ol><p>ä½¿ç”¨ polyfill.io CDNï¼Œé€šè¿‡åœ¨ <code>index.html</code> ä¸­æ·»åŠ è¿™ä¸€è¡Œæ¥æ£€ç´¢è‡ªå®šä¹‰çš„ã€é’ˆå¯¹æµè§ˆå™¨çš„ polyfillsã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.polyfill.io/v2/polyfill.min.js?features=default,Array.prototype.includes&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„è„šæœ¬ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»æ˜ç¡®è¯·æ±‚ <code>Array.prototype.includes</code> åŠŸèƒ½ï¼Œå› ä¸ºå®ƒä¸åŒ…æ‹¬åœ¨é»˜è®¤åŠŸèƒ½é›†ä¸­ã€‚</p><h2 id="111-å¦‚ä½•åœ¨-create-react-app-ä¸­ä½¿ç”¨-https-è€Œä¸æ˜¯-httpï¼Ÿ"><a href="#111-å¦‚ä½•åœ¨-create-react-app-ä¸­ä½¿ç”¨-https-è€Œä¸æ˜¯-httpï¼Ÿ" class="headerlink" title="111. å¦‚ä½•åœ¨ create-react-app ä¸­ä½¿ç”¨ https è€Œä¸æ˜¯ httpï¼Ÿ"></a>111. å¦‚ä½•åœ¨ create-react-app ä¸­ä½¿ç”¨ https è€Œä¸æ˜¯ httpï¼Ÿ</h2><p>ä½ åªéœ€è¦æ˜¯ç”¨ <code>HTTPS=true</code> é…ç½®ã€‚ä½ å¯ä»¥ç¼–è¾‘ <code>package.json</code> scripts éƒ¨åˆ†ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;set HTTPS=true &amp;&amp; react-scripts start&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…è¿è¡Œ <code>set HTTPS=true &amp;&amp; npm start</code></p><h2 id="112-å¦‚ä½•é¿å…åœ¨-create-react-app-ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Ÿ"><a href="#112-å¦‚ä½•é¿å…åœ¨-create-react-app-ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Ÿ" class="headerlink" title="112. å¦‚ä½•é¿å…åœ¨ create-react-app ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Ÿ"></a>112. å¦‚ä½•é¿å…åœ¨ create-react-app ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Ÿ</h2><p>åœ¨é¡¹ç›®é‡Œæ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªå« <code>.env</code> çš„æ–‡ä»¶å¹¶å†™å…¥å¯¼å…¥çš„è·¯å¾„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NODE_PATH=src/app</span><br></pre></td></tr></table></figure><p>ç„¶åé‡å¯è°ƒè¯•æœåŠ¡å™¨ã€‚ç°åœ¨ä½ åº”è¯¥èƒ½å¤Ÿåœ¨ <code>src/app</code> ç›®å½•ä¸‹ä¸ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥ä»»ä½•ä¸œè¥¿ã€‚</p><h2 id="113-å¦‚ä½•åœ¨-React-Router-ä¸­æ·»åŠ -Google-Analyticsï¼Ÿ"><a href="#113-å¦‚ä½•åœ¨-React-Router-ä¸­æ·»åŠ -Google-Analyticsï¼Ÿ" class="headerlink" title="113. å¦‚ä½•åœ¨ React Router ä¸­æ·»åŠ  Google Analyticsï¼Ÿ"></a>113. å¦‚ä½•åœ¨ React Router ä¸­æ·»åŠ  Google Analyticsï¼Ÿ</h2><p>åœ¨ <code>history</code> å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªç›‘å¬å™¨ï¼Œä»¥è®°å½•æ¯ä¸ªé¡µé¢çš„æµè§ˆã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">history.<span class="title function_">listen</span>(<span class="keyword">function</span>(<span class="params">location</span>) &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">ga</span>(<span class="string">&#x27;set&#x27;</span>, <span class="string">&#x27;page&#x27;</span>, location.<span class="property">pathname</span> + location.<span class="property">search</span>);</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">ga</span>(<span class="string">&#x27;send&#x27;</span>, <span class="string">&#x27;pageview&#x27;</span>, location.<span class="property">pathname</span> + location.<span class="property">search</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="114-å¦‚ä½•æ¯ç§’æ›´æ–°ä¸€æ¬¡ç»„ä»¶ï¼Ÿ"><a href="#114-å¦‚ä½•æ¯ç§’æ›´æ–°ä¸€æ¬¡ç»„ä»¶ï¼Ÿ" class="headerlink" title="114. å¦‚ä½•æ¯ç§’æ›´æ–°ä¸€æ¬¡ç»„ä»¶ï¼Ÿ"></a>114. å¦‚ä½•æ¯ç§’æ›´æ–°ä¸€æ¬¡ç»„ä»¶ï¼Ÿ</h2><p>ä½ éœ€è¦ä½¿ç”¨ <code>setInterval()</code> æ¥è§¦å‘å˜åŒ–ï¼Œä½†ä½ ä¹Ÿéœ€è¦åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…é™¤è®¡æ—¶å™¨ä»¥é˜²æ­¢é”™è¯¯å’Œå†…å­˜æ³„æ¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">interval</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">time</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>() &#125;), <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">interval</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="115-å¦‚ä½•åœ¨-React-ä¸­å¯¹å†…è”æ ·å¼ä½¿ç”¨-CSS-å‚å•†å‰ç¼€ï¼Ÿ"><a href="#115-å¦‚ä½•åœ¨-React-ä¸­å¯¹å†…è”æ ·å¼ä½¿ç”¨-CSS-å‚å•†å‰ç¼€ï¼Ÿ" class="headerlink" title="115. å¦‚ä½•åœ¨ React ä¸­å¯¹å†…è”æ ·å¼ä½¿ç”¨ CSS å‚å•†å‰ç¼€ï¼Ÿ"></a>115. å¦‚ä½•åœ¨ React ä¸­å¯¹å†…è”æ ·å¼ä½¿ç”¨ CSS å‚å•†å‰ç¼€ï¼Ÿ</h2><p>React ä¸ä¼šè‡ªåŠ¨åº”ç”¨ CSS å‚å•†å‰ç¼€ã€‚ä½ éœ€è¦æ‰‹åŠ¨æ·»åŠ  CSS å‚å•†å‰ç¼€ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">transform</span>: <span class="string">&#x27;rotate(90deg)&#x27;</span>,</span><br><span class="line">    <span class="title class_">WebkitTransform</span>: <span class="string">&#x27;rotate(90deg)&#x27;</span>, <span class="comment">// æ³¨æ„å¤§å†™ &#x27;W&#x27;</span></span><br><span class="line">    <span class="attr">msTransform</span>: <span class="string">&#x27;rotate(90deg)&#x27;</span>, <span class="comment">// &#x27;ms&#x27; æ˜¯å…¨å°å†™</span></span><br><span class="line">  &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><h2 id="116-å¦‚ä½•ä½¿ç”¨-React-å’Œ-ES6-å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶ï¼Ÿ"><a href="#116-å¦‚ä½•ä½¿ç”¨-React-å’Œ-ES6-å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶ï¼Ÿ" class="headerlink" title="116. å¦‚ä½•ä½¿ç”¨ React å’Œ ES6 å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶ï¼Ÿ"></a>116. å¦‚ä½•ä½¿ç”¨ React å’Œ ES6 å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶ï¼Ÿ</h2><p>ä½ åº”è¯¥ä½¿ç”¨é»˜è®¤å€¼æ¥å¯¼å‡ºç»„ä»¶</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">User</span> <span class="keyword">from</span> <span class="string">&#x27;user&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">MyProfile</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">User</span> <span class="attr">type</span>=<span class="string">&quot;customer&quot;</span>&gt;</span>//...<span class="tag">&lt;/<span class="name">User</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†å¯¼å‡ºæŒ‡å®šç¬¦ï¼ŒMyProfile å°†æˆä¸ºæˆå‘˜å¹¶å¯¼å‡ºåˆ°è¿™ä¸ªæ¨¡å—ï¼ŒåŒæ ·å¯ä»¥åœ¨å…¶ä»–ç»„ä»¶ä¸­å¯¼å…¥è€Œä¸æåŠåç§°ã€‚</p><h2 id="117-ä¸ºä»€ä¹ˆç»„ä»¶æ„é€ å™¨åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Ÿ"><a href="#117-ä¸ºä»€ä¹ˆç»„ä»¶æ„é€ å™¨åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Ÿ" class="headerlink" title="117. ä¸ºä»€ä¹ˆç»„ä»¶æ„é€ å™¨åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Ÿ"></a>117. ä¸ºä»€ä¹ˆç»„ä»¶æ„é€ å™¨åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Ÿ</h2><p>React çš„ reconciliationï¼ˆåè°ƒï¼‰ ç®—æ³•å‡å®šï¼Œåœ¨æ²¡æœ‰ä»»ä½•ç›¸åä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶åœ¨éšåçš„æ¸²æŸ“ä¸­å‡ºç°åœ¨ç›¸åŒçš„åœ°æ–¹ï¼Œå®ƒå°±æ˜¯ä¹‹å‰çš„é‚£ä¸ªç»„ä»¶ï¼Œæ‰€ä»¥ React é‡ç”¨ä¹‹å‰çš„å®ä¾‹è€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ã€‚</p><h2 id="118-å¦‚ä½•åœ¨-React-ä¸­å®šä¹‰å¸¸é‡ï¼Ÿ"><a href="#118-å¦‚ä½•åœ¨-React-ä¸­å®šä¹‰å¸¸é‡ï¼Ÿ" class="headerlink" title="118. å¦‚ä½•åœ¨ React ä¸­å®šä¹‰å¸¸é‡ï¼Ÿ"></a>118. å¦‚ä½•åœ¨ React ä¸­å®šä¹‰å¸¸é‡ï¼Ÿ</h2><p>ä½ å¯ä»¥ä½¿ç”¨ ES7 çš„ <code>é™æ€</code> å­—æ®µæ¥å®šä¹‰å¸¸é‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="variable constant_">DEFAULT_PAGINATION</span> = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™æ€å­—æ®µæ˜¯ç±»å­—æ®µç¬¬ä¸‰é˜¶æ®µææ¡ˆçš„ä¸€éƒ¨åˆ†ã€‚</p><h2 id="119-å¦‚ä½•åœ¨-React-ä¸­ä»¥ç¼–ç¨‹æ–¹å¼è§¦å‘ç‚¹å‡»äº‹ä»¶ï¼Ÿ"><a href="#119-å¦‚ä½•åœ¨-React-ä¸­ä»¥ç¼–ç¨‹æ–¹å¼è§¦å‘ç‚¹å‡»äº‹ä»¶ï¼Ÿ" class="headerlink" title="119. å¦‚ä½•åœ¨ React ä¸­ä»¥ç¼–ç¨‹æ–¹å¼è§¦å‘ç‚¹å‡»äº‹ä»¶ï¼Ÿ"></a>119. å¦‚ä½•åœ¨ React ä¸­ä»¥ç¼–ç¨‹æ–¹å¼è§¦å‘ç‚¹å‡»äº‹ä»¶ï¼Ÿ</h2><p>ä½ å¯ä»¥ä½¿ç”¨ ref props é€šè¿‡å›è°ƒè·å¾—å¯¹åº•å±‚ <code>HTMLInputElement</code> å¯¹è±¡çš„å¼•ç”¨ï¼Œå°†è¯¥å¼•ç”¨å­˜å‚¨ä¸ºç±»å±æ€§ï¼Œç„¶åä½¿ç”¨è¯¥å¼•ç”¨ä»äº‹ä»¶å¤„ç†ç¨‹åºä¸­ä½¿ç”¨ <code>HTMLElement.click</code> æ–¹æ³•è§¦å‘ç‚¹å‡»ã€‚</p><p>è¿™å¯ä»¥åˆ†ä¸¤æ­¥è¿›è¡Œã€‚</p><ol><li>åœ¨ render æ–¹æ³•ä¸­åˆ›å»º refï¼š</li></ol><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input ref=&#123;<span class="function"><span class="params">input</span> =&gt;</span> (<span class="variable language_">this</span>.<span class="property">inputElement</span> = input)&#125; /&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ä½ çš„äº‹ä»¶å¤„ç†ç¨‹åºä¸­åº”ç”¨ç‚¹å‡»äº‹ä»¶ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">inputElement</span>.<span class="title function_">click</span>();</span><br></pre></td></tr></table></figure><h2 id="120-æœ‰å¯èƒ½åœ¨çº¯-React-ä¸­ä½¿ç”¨-async-x2F-await-å—ï¼Ÿ"><a href="#120-æœ‰å¯èƒ½åœ¨çº¯-React-ä¸­ä½¿ç”¨-async-x2F-await-å—ï¼Ÿ" class="headerlink" title="120. æœ‰å¯èƒ½åœ¨çº¯ React ä¸­ä½¿ç”¨ async&#x2F;await å—ï¼Ÿ"></a>120. æœ‰å¯èƒ½åœ¨çº¯ React ä¸­ä½¿ç”¨ async&#x2F;await å—ï¼Ÿ</h2><p>å¦‚æœä½ æƒ³åœ¨ React ä¸­ä½¿ç”¨ <code>async</code>&#x2F;<code>await</code>ï¼Œä½ å°†éœ€è¦ Babel å’Œ <a href="https://babeljs.io/docs/en/babel-plugin-transform-async-to-generator">transform-async-to-generator</a> æ’ä»¶ã€‚React Native å·²ç»åŒ…å«äº† Babel å’Œä¸€ç³»åˆ—çš„è½¬æ¢åŠŸèƒ½ã€‚</p><h2 id="121-React-çš„å¸¸è§æ–‡ä»¶å¤¹ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#121-React-çš„å¸¸è§æ–‡ä»¶å¤¹ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="121. React çš„å¸¸è§æ–‡ä»¶å¤¹ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>121. React çš„å¸¸è§æ–‡ä»¶å¤¹ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>React é¡¹ç›®æ–‡ä»¶ç»“æ„æœ‰ä¸¤ç§å¸¸è§åšæ³•ã€‚</p><ol><li><strong>æŒ‰ç‰¹æ€§æˆ–è·¯ç”±åˆ†ç»„ï¼š</strong>*</li></ol><p>ä¸€ç§å¸¸è§çš„é¡¹ç›®ç»“æ„æ–¹å¼æ˜¯å°† CSSã€JS å’Œæµ‹è¯•æ”¾åœ¨ä¸€èµ·ï¼ŒæŒ‰ç‰¹æ€§æˆ–è·¯ç”±åˆ†ç»„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">common/</span><br><span class="line">â”œâ”€ Avatar.js</span><br><span class="line">â”œâ”€ Avatar.css</span><br><span class="line">â”œâ”€ APIUtils.js</span><br><span class="line">â””â”€ APIUtils.test.js</span><br><span class="line">feed/</span><br><span class="line">â”œâ”€ index.js</span><br><span class="line">â”œâ”€ Feed.js</span><br><span class="line">â”œâ”€ Feed.css</span><br><span class="line">â”œâ”€ FeedStory.js</span><br><span class="line">â”œâ”€ FeedStory.test.js</span><br><span class="line">â””â”€ FeedAPI.js</span><br><span class="line">profile/</span><br><span class="line">â”œâ”€ index.js</span><br><span class="line">â”œâ”€ Profile.js</span><br><span class="line">â”œâ”€ ProfileHeader.js</span><br><span class="line">â”œâ”€ ProfileHeader.css</span><br><span class="line">â””â”€ ProfileAPI.js</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>æŒ‰æ–‡ä»¶ç±»å‹åˆ†ç»„ï¼š</strong></li></ol><p>å¦ä¸€ç§æµè¡Œçš„é¡¹ç›®ç»“æ„æ–¹å¼æ˜¯å°†ç±»ä¼¼çš„æ–‡ä»¶åˆ†ç»„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">api/</span><br><span class="line">â”œâ”€ APIUtils.js</span><br><span class="line">â”œâ”€ APIUtils.test.js</span><br><span class="line">â”œâ”€ ProfileAPI.js</span><br><span class="line">â””â”€ UserAPI.js</span><br><span class="line">components/</span><br><span class="line">â”œâ”€ Avatar.js</span><br><span class="line">â”œâ”€ Avatar.css</span><br><span class="line">â”œâ”€ Feed.js</span><br><span class="line">â”œâ”€ Feed.css</span><br><span class="line">â”œâ”€ FeedStory.js</span><br><span class="line">â”œâ”€ FeedStory.test.js</span><br><span class="line">â”œâ”€ Profile.js</span><br><span class="line">â”œâ”€ ProfileHeader.js</span><br><span class="line">â””â”€ ProfileHeader.css</span><br></pre></td></tr></table></figure><h2 id="122-æœ‰å“ªäº›æµè¡Œçš„åŠ¨ç”»åŒ…ï¼Ÿ"><a href="#122-æœ‰å“ªäº›æµè¡Œçš„åŠ¨ç”»åŒ…ï¼Ÿ" class="headerlink" title="122. æœ‰å“ªäº›æµè¡Œçš„åŠ¨ç”»åŒ…ï¼Ÿ"></a>122. æœ‰å“ªäº›æµè¡Œçš„åŠ¨ç”»åŒ…ï¼Ÿ</h2><p>React Transition Group å’Œ React Motion æ˜¯ React ç”Ÿæ€ç³»ç»Ÿä¸­æµè¡Œçš„åŠ¨ç”»åŒ…ã€‚</p><h2 id="123-æ ·å¼æ¨¡å—çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#123-æ ·å¼æ¨¡å—çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="123. æ ·å¼æ¨¡å—çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>123. æ ·å¼æ¨¡å—çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æˆ‘ä»¬å»ºè®®é¿å…åœ¨ç»„ä»¶ä¸­ç¡¬ç¼–ç æ ·å¼å€¼ã€‚ä»»ä½•å¯èƒ½åœ¨ä¸åŒçš„ UI ç»„ä»¶ä¸­ä½¿ç”¨çš„å€¼éƒ½åº”è¯¥è¢«æå–åˆ°å®ƒä»¬è‡ªå·±çš„æ¨¡å—ä¸­ã€‚</p><p>ä¾‹å¦‚ï¼Œè¿™äº›æ ·å¼å¯ä»¥è¢«æå–åˆ°ä¸€ä¸ªå•ç‹¬çš„ç»„ä»¶ä¸­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> colors = &#123;</span><br><span class="line">  white,</span><br><span class="line">  black,</span><br><span class="line">  blue,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> space = [<span class="number">0</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>, <span class="number">64</span>];</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨å…¶ä»–ç»„ä»¶ä¸­å•ç‹¬å¯¼å…¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; space, colors &#125; <span class="keyword">from</span> <span class="string">&#x27;./styles&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="124-æœ‰å“ªäº›æµè¡Œçš„-React-ä¸“ç”¨-linterï¼Ÿ"><a href="#124-æœ‰å“ªäº›æµè¡Œçš„-React-ä¸“ç”¨-linterï¼Ÿ" class="headerlink" title="124. æœ‰å“ªäº›æµè¡Œçš„ React ä¸“ç”¨ linterï¼Ÿ"></a>124. æœ‰å“ªäº›æµè¡Œçš„ React ä¸“ç”¨ linterï¼Ÿ</h2><p>ESLint æ˜¯ä¸€ä¸ªå¾ˆæµè¡Œçš„ JavaScript linterã€‚æœ‰ä¸€äº›æ’ä»¶å¯ä»¥ç”¨æ¥åˆ†æç‰¹å®šçš„ä»£ç é£æ ¼ã€‚å…¶ä¸­æœ€å¸¸è§çš„ React æ’ä»¶æ˜¯ä¸€ä¸ªåä¸º <code>eslint-plugin-react</code> çš„ npm åŒ…ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå°†æ£€æŸ¥ä¸€äº›æœ€ä½³å®è·µï¼Œå…¶è§„åˆ™æ˜¯æ£€æŸ¥ä»è¿­ä»£å™¨ä¸­çš„é”®åˆ°ä¸€æ•´å¥—é“å…·ç±»å‹çš„ä¸œè¥¿ã€‚</p><p>å¦ä¸€ä¸ªæµè¡Œçš„æ’ä»¶æ˜¯ <code>eslint-plugin-jsx-a11y</code>ï¼Œå®ƒå°†å¸®åŠ©ä¿®å¤å¯è®¿é—®æ€§æ–¹é¢çš„å¸¸è§é—®é¢˜ã€‚ç”±äº JSX æä¾›äº†ä¸å¸¸è§„ HTML ç¨æœ‰ä¸åŒçš„è¯­æ³•ï¼Œä¾‹å¦‚ <code>alt</code> æ–‡æœ¬å’Œ <code>tabindex</code> çš„é—®é¢˜å°†ä¸ä¼šè¢«å¸¸è§„æ’ä»¶å‘ç°ã€‚</p><h2 id="125-å¦‚ä½•è¿›è¡Œ-AJAX-è°ƒç”¨ï¼Œåº”è¯¥åœ¨å“ªä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è¿›è¡Œ-AJAX-è°ƒç”¨ï¼Ÿ"><a href="#125-å¦‚ä½•è¿›è¡Œ-AJAX-è°ƒç”¨ï¼Œåº”è¯¥åœ¨å“ªä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è¿›è¡Œ-AJAX-è°ƒç”¨ï¼Ÿ" class="headerlink" title="125. å¦‚ä½•è¿›è¡Œ AJAX è°ƒç”¨ï¼Œåº”è¯¥åœ¨å“ªä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è¿›è¡Œ AJAX è°ƒç”¨ï¼Ÿ"></a>125. å¦‚ä½•è¿›è¡Œ AJAX è°ƒç”¨ï¼Œåº”è¯¥åœ¨å“ªä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è¿›è¡Œ AJAX è°ƒç”¨ï¼Ÿ</h2><p>ä½ å¯ä»¥ä½¿ç”¨ AJAX åº“ï¼Œå¦‚ Axiosã€jQuery AJAXï¼Œä»¥åŠæµè§ˆå™¨å†…ç½®çš„ <code>fetch</code>ã€‚ä½ åº”è¯¥åœ¨ <code>componentDidMount()</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è·å–æ•°æ®ã€‚è¿™æ ·ä½ å°±å¯ä»¥åœ¨è·å–æ•°æ®æ—¶ä½¿ç”¨ <code>setState()</code> æ¥æ›´æ–°ä½ çš„ç»„ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼Œä» API è·å–çš„é›‡å‘˜åå•å¹¶è®¾ç½®æœ¬åœ°çŠ¶æ€ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">employees</span>: [],</span><br><span class="line">      <span class="attr">error</span>: <span class="literal">null</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.example.com/items&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(</span><br><span class="line">        <span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">employees</span>: result.<span class="property">employees</span>,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; error &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">      );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; error, employees &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Error: &#123;error.message&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;employees.map(employee =&gt; (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;employee.name&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              &#123;employee.name&#125;-&#123;employee.experience&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          ))&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="126-ä»€ä¹ˆæ˜¯æ¸²æŸ“-propsï¼Ÿ"><a href="#126-ä»€ä¹ˆæ˜¯æ¸²æŸ“-propsï¼Ÿ" class="headerlink" title="126. ä»€ä¹ˆæ˜¯æ¸²æŸ“ propsï¼Ÿ"></a>126. ä»€ä¹ˆæ˜¯æ¸²æŸ“ propsï¼Ÿ</h2><p><strong>æ¸²æŸ“ props</strong>æ˜¯ä¸€ç§ç®€å•çš„æŠ€æœ¯ï¼Œä½¿ç”¨ä¸€ä¸ª props åœ¨ç»„ä»¶ä¹‹é—´å…±äº«ä»£ç ï¼Œå…¶å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ä¸‹é¢çš„ç»„ä»¶ä½¿ç”¨æ¸²æŸ“ propsï¼Œå®ƒè¿”å›ä¸€ä¸ª React å…ƒç´ ã€‚</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">DataProvider</span> render=&#123;<span class="function"><span class="params">data</span> =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;`Hello $&#123;data.target&#125;`&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>&#125; /&gt;</span><br></pre></td></tr></table></figure><p>React Router å’Œ DownShift ç­‰åº“æ­£åœ¨ä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚</p><h1 id="React-Router"><a href="#React-Router" class="headerlink" title="React Router"></a>React Router</h1><h2 id="1-React-Router-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-React-Router-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. React Router æ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. React Router æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>React Router æ˜¯ä¸€ä¸ªå»ºç«‹åœ¨ React ä¹‹ä¸Šçš„å¼ºå¤§çš„è·¯ç”±åº“ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿæ·»åŠ æ–°çš„å±å¹•å’Œæµç¨‹åˆ°ä½ çš„åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶ä¿æŒ URL ä¸é¡µé¢ä¸Šæ˜¾ç¤ºçš„å†…å®¹åŒæ­¥ã€‚</p><h2 id="2-React-Router-ä¸-history-åº“æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#2-React-Router-ä¸-history-åº“æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="2. React Router ä¸ history åº“æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>2. React Router ä¸ history åº“æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h2><p>React Router æ˜¯ä¸€ä¸ªå›´ç»• <code>history</code> åº“çš„åŒ…è£…å™¨ï¼Œå®ƒå¤„ç†ä¸æµè§ˆå™¨çš„ <code>window.history</code> å’Œå“ˆå¸Œå†å²è®°å½•çš„äº¤äº’ã€‚ å®ƒè¿˜æä¾›äº†å†…å­˜å†å²ï¼Œè¿™å¯¹æ²¡æœ‰å…¨å±€å†å²çš„ç¯å¢ƒå¾ˆæœ‰ç”¨ï¼Œå¦‚ç§»åŠ¨åº”ç”¨å¼€å‘ï¼ˆReact Nativeï¼‰å’Œ Node çš„å•å…ƒæµ‹è¯•ã€‚</p><h2 id="3-React-Router-v4-çš„-lt-Router-gt-ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#3-React-Router-v4-çš„-lt-Router-gt-ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="3. React Router v4 çš„ &lt;Router&gt; ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>3. React Router v4 çš„ <code>&lt;Router&gt;</code> ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>React Router v4 æä¾›ä»¥ä¸‹ 3 ä¸ª <code>&lt;Router&gt;</code> ç»„ä»¶ã€‚</p><ol><li><code>&lt;BrowserRouter&gt;</code></li><li><code>&lt;HashRouter&gt;</code></li><li><code>&lt;MemoryRouter&gt;</code></li></ol><p>ä¸Šè¿°ç»„ä»¶å°†åˆ›å»º<em>browser</em>ã€<em>hash</em>å’Œ<em>memory</em>å†å²å®ä¾‹ã€‚React Router v4 ä½¿ä¸ä½ çš„è·¯ç”±ç›¸å…³çš„ <code>history</code> å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•é€šè¿‡ <code>router</code> å¯¹è±¡ä¸­çš„ä¸Šä¸‹æ–‡å¯ç”¨ã€‚</p><h2 id="4-history-çš„-push-å’Œ-replace-æ–¹æ³•çš„ç”¨å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#4-history-çš„-push-å’Œ-replace-æ–¹æ³•çš„ç”¨å¤„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="4. history çš„ push() å’Œ replace() æ–¹æ³•çš„ç”¨å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>4. <code>history</code> çš„ <code>push()</code> å’Œ <code>replace()</code> æ–¹æ³•çš„ç”¨å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ä¸€ä¸ª history å®ä¾‹æœ‰ä¸¤ä¸ªæ–¹æ³•ç”¨äºå¯¼èˆªã€‚</p><ol><li><code>push()</code></li><li><code>replace()</code></li></ol><p>å¦‚æœä½ æŠŠ history çœ‹ä½œæ˜¯ä¸€ä¸ªè®¿é—®è¿‡çš„ä½ç½®çš„æ•°ç»„ï¼Œ <code>push()</code> å°†åœ¨æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„ä½ç½®ï¼Œ<code>replace()</code> å°†ç”¨æ–°çš„ä½ç½®æ›¿æ¢æ•°ç»„ä¸­çš„å½“å‰ä½ç½®ã€‚</p><h2 id="5-å¦‚ä½•ç”¨-React-Router-v4-è¿›è¡Œç¨‹åºåŒ–å¯¼èˆªï¼Ÿ"><a href="#5-å¦‚ä½•ç”¨-React-Router-v4-è¿›è¡Œç¨‹åºåŒ–å¯¼èˆªï¼Ÿ" class="headerlink" title="5. å¦‚ä½•ç”¨ React Router v4 è¿›è¡Œç¨‹åºåŒ–å¯¼èˆªï¼Ÿ"></a>5. å¦‚ä½•ç”¨ React Router v4 è¿›è¡Œç¨‹åºåŒ–å¯¼èˆªï¼Ÿ</h2><p>There are three different ways to achieve programmatic routing&#x2F;navigation within components.</p><ol><li><strong>Using the <code>withRouter()</code> higher-order function:</strong></li></ol><p>The <code>withRouter()</code> higher-order function will inject the history object as a prop of the component. This object provides <code>push()</code> and <code>replace()</code> methods to avoid the usage of context.</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; withRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>; <span class="comment">// this also works with &#x27;react-router-native&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Button</span> = <span class="title function_">withRouter</span>(<span class="function">(<span class="params">&#123; history &#125;</span>) =&gt;</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">      history.push(&#x27;/new-location&#x27;);</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  &gt;</span></span><br><span class="line"><span class="language-xml">    &#123;&#x27;Click Me!&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">));</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>Using <code>&lt;Route&gt;</code> component and render props pattern:</strong></li></ol><p>The <code>&lt;Route&gt;</code> component passes the same props as <code>withRouter()</code>, so you will be able to access the history methods through the history prop.</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Route</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Button</span> = (<span class="params"></span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">render</span>=<span class="string">&#123;(&#123;</span> <span class="attr">history</span> &#125;) =&gt;</span> (</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          history.push(&#x27;/new-location&#x27;);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        &#123;&#x27;Click Me!&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    )&#125;</span></span><br><span class="line"><span class="language-xml">  /&gt;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>Using context:</strong></li></ol><p>This option is not recommended and treated as unstable API.</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Button</span> = (<span class="params">props, context</span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">      context.history.push(&#x27;/new-location&#x27;);</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  &gt;</span></span><br><span class="line"><span class="language-xml">    &#123;&#x27;Click Me!&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Button</span>.<span class="property">contextTypes</span> = &#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title class_">React</span>.<span class="property">PropTypes</span>.<span class="title function_">shape</span>(&#123;</span><br><span class="line">    <span class="attr">push</span>: <span class="title class_">React</span>.<span class="property">PropTypes</span>.<span class="property">func</span>.<span class="property">isRequired</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="6-å¦‚ä½•åœ¨-React-Router-v4-ä¸­è·å–æŸ¥è¯¢å‚æ•°ï¼Ÿ"><a href="#6-å¦‚ä½•åœ¨-React-Router-v4-ä¸­è·å–æŸ¥è¯¢å‚æ•°ï¼Ÿ" class="headerlink" title="6. å¦‚ä½•åœ¨ React Router v4 ä¸­è·å–æŸ¥è¯¢å‚æ•°ï¼Ÿ"></a>6. å¦‚ä½•åœ¨ React Router v4 ä¸­è·å–æŸ¥è¯¢å‚æ•°ï¼Ÿ</h2><p>The ability to parse query strings was taken out of React Router v4 because there have been user requests over the years to support different implementation. So the decision has been given to users to choose the implementation they like. The recommended approach is to use query strings library.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> queryString = <span class="built_in">require</span>(<span class="string">&#x27;query-string&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> parsed = queryString.<span class="title function_">parse</span>(props.<span class="property">location</span>.<span class="property">search</span>);</span><br></pre></td></tr></table></figure><p>You can also use <code>URLSearchParams</code> if you want something native:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> params = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(props.<span class="property">location</span>.<span class="property">search</span>);</span><br><span class="line"><span class="keyword">const</span> foo = params.<span class="title function_">get</span>(<span class="string">&#x27;name&#x27;</span>);</span><br></pre></td></tr></table></figure><p>You should use a <em>polyfill</em> for IE11.</p><h2 id="7-ä¸ºä»€ä¹ˆä½ å¾—åˆ°-Router-may-have-only-one-child-element-çš„è­¦å‘Šï¼Ÿ"><a href="#7-ä¸ºä»€ä¹ˆä½ å¾—åˆ°-Router-may-have-only-one-child-element-çš„è­¦å‘Šï¼Ÿ" class="headerlink" title="7. ä¸ºä»€ä¹ˆä½ å¾—åˆ° Router may have only one child element çš„è­¦å‘Šï¼Ÿ"></a>7. ä¸ºä»€ä¹ˆä½ å¾—åˆ° <code>Router may have only one child element</code> çš„è­¦å‘Šï¼Ÿ</h2><p>You have to wrap your Routeâ€™s in a <code>&lt;Switch&gt;</code> block because <code>&lt;Switch&gt;</code> is unique in that it renders a route exclusively.</p><p>At first you need to add <code>Switch</code> to your imports:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Switch</span>, <span class="title class_">Router</span>, <span class="title class_">Route</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router&#x27;</span>;</span><br></pre></td></tr></table></figure><p>Then define the routes within <code>&lt;Switch&gt;</code> block:</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Router</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Route</span> &#123;/* <span class="attr">...</span> */&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Route</span> &#123;/* <span class="attr">...</span> */&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Router</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="8-å¦‚ä½•åœ¨-React-Router-v4-ä¸­å‘-history-push-æ–¹æ³•ä¼ é€’å‚æ•°ï¼Ÿ"><a href="#8-å¦‚ä½•åœ¨-React-Router-v4-ä¸­å‘-history-push-æ–¹æ³•ä¼ é€’å‚æ•°ï¼Ÿ" class="headerlink" title="8. å¦‚ä½•åœ¨ React Router v4 ä¸­å‘ history.push æ–¹æ³•ä¼ é€’å‚æ•°ï¼Ÿ"></a>8. å¦‚ä½•åœ¨ React Router v4 ä¸­å‘ <code>history.push</code> æ–¹æ³•ä¼ é€’å‚æ•°ï¼Ÿ</h2><p>While navigating you can pass props to the <code>history</code> object:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">history</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">  <span class="attr">pathname</span>: <span class="string">&#x27;/template&#x27;</span>,</span><br><span class="line">  <span class="attr">search</span>: <span class="string">&#x27;?name=sudheer&#x27;</span>,</span><br><span class="line">  <span class="attr">state</span>: &#123; <span class="attr">detail</span>: response.<span class="property">data</span> &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>The <code>search</code> property is used to pass query params in <code>push()</code> method.</p><h2 id="9-å¦‚ä½•å®ç°-default-æˆ–-NotFound-é¡µé¢ï¼Ÿ"><a href="#9-å¦‚ä½•å®ç°-default-æˆ–-NotFound-é¡µé¢ï¼Ÿ" class="headerlink" title="9. å¦‚ä½•å®ç° default æˆ– NotFound é¡µé¢ï¼Ÿ"></a>9. å¦‚ä½•å®ç° <em>default</em> æˆ– <em>NotFound</em> é¡µé¢ï¼Ÿ</h2><p>A <code>&lt;Switch&gt;</code> renders the first child <code>&lt;Route&gt;</code> that matches. A <code>&lt;Route&gt;</code> with no path always matches. So you just need to simply drop path attribute as below</p><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Switch</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Home&#125;</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/user&quot;</span> <span class="attr">component</span>=<span class="string">&#123;User&#125;</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">component</span>=<span class="string">&#123;NotFound&#125;</span> /&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Switch</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="10-å¦‚ä½•åœ¨-React-Router-v4-ä¸Šè·å¾—å†å²è®°å½•ï¼Ÿ"><a href="#10-å¦‚ä½•åœ¨-React-Router-v4-ä¸Šè·å¾—å†å²è®°å½•ï¼Ÿ" class="headerlink" title="10. å¦‚ä½•åœ¨ React Router v4 ä¸Šè·å¾—å†å²è®°å½•ï¼Ÿ"></a>10. å¦‚ä½•åœ¨ React Router v4 ä¸Šè·å¾—å†å²è®°å½•ï¼Ÿ</h2><p>Below are the list of steps to get history object on React Router v4,</p><ol><li>Create a module that exports a <code>history</code> object and import this module across the project.</li></ol><p>For example, create <code>history.js</code> file:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createBrowserHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;history&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createBrowserHistory</span>(&#123;</span><br><span class="line">  <span class="comment">/* pass a configuration object here if needed */</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="2"><li>You should use the <code>&lt;Router&gt;</code> component instead of built-in routers. Imported the above <code>history.js</code> inside <code>index.js</code> file:</li></ol><figure class="highlight jsx"><figcaption><span>| pure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Router</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> history <span class="keyword">from</span> <span class="string">&#x27;./history&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Router</span> <span class="attr">history</span>=<span class="string">&#123;history&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span>,</span><br><span class="line">  holder,</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ol start="3"><li>You can also use push method of <code>history</code> object similar to built-in history object:</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// some-other-file.js</span></span><br><span class="line"><span class="keyword">import</span> history <span class="keyword">from</span> <span class="string">&#x27;./history&#x27;</span>;</span><br><span class="line"></span><br><span class="line">history.<span class="title function_">push</span>(<span class="string">&#x27;/go-here&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="11-å¦‚ä½•åœ¨ç™»å½•åæ‰§è¡Œè‡ªåŠ¨é‡å®šå‘ï¼Ÿ"><a href="#11-å¦‚ä½•åœ¨ç™»å½•åæ‰§è¡Œè‡ªåŠ¨é‡å®šå‘ï¼Ÿ" class="headerlink" title="11. å¦‚ä½•åœ¨ç™»å½•åæ‰§è¡Œè‡ªåŠ¨é‡å®šå‘ï¼Ÿ"></a>11. å¦‚ä½•åœ¨ç™»å½•åæ‰§è¡Œè‡ªåŠ¨é‡å®šå‘ï¼Ÿ</h2><p>The <code>react-router</code> package provides <code>&lt;Redirect&gt;</code> component in React Router. Rendering a <code>&lt;Redirect&gt;</code> will navigate to a new location. Like server-side redirects, the new location will override the current location in the history stack.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Redirect</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">LoginComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">isLoggedIn</span> === <span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Redirect</span> <span class="attr">to</span>=<span class="string">&quot;/your/redirect/page&quot;</span> /&gt;</span></span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#x27;Login Please&#x27;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å‰ 500 ä¸ª ReactJS é¢è¯•é—®é¢˜å’Œç­”æ¡ˆåˆ—è¡¨....ç¼–ç ç»ƒä¹ é¢˜å³å°†æ¨å‡ºï¼</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="React" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/React/"/>
    
    <category term="æ´›ç«¹ç¿»è¯‘è®¡åˆ’" scheme="https://youngjuning.js.org/categories/%E6%B4%9B%E7%AB%B9%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/"/>
    
    <category term="React" scheme="https://youngjuning.js.org/categories/%E6%B4%9B%E7%AB%B9%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/React/"/>
    
    
    <category term="React é¢è¯•é¢˜" scheme="https://youngjuning.js.org/tags/React-%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    <category term="React é¢è¯•" scheme="https://youngjuning.js.org/tags/React-%E9%9D%A2%E8%AF%95/"/>
    
    <category term="React é¢è¯•é¢˜ä¸ç­”æ¡ˆ" scheme="https://youngjuning.js.org/tags/React-%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%8E%E7%AD%94%E6%A1%88/"/>
    
    <category term="å‰ç«¯é¢è¯•é¢˜" scheme="https://youngjuning.js.org/tags/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>çˆ±å¥¹ï¼Œå°±åœ¨æ­å·ç»™å¥¹ä¸€ä¸ªå®¶ï½œ2021 å¹´ä¸­æ€»ç»“</title>
    <link href="https://youngjuning.js.org/ddc418f71cd4/"/>
    <id>https://youngjuning.js.org/ddc418f71cd4/</id>
    <published>2023-03-06T02:57:23.000Z</published>
    <updated>2023-03-13T01:05:01.406Z</updated>
    
    <content type="html"><![CDATA[<p>å½“å»å¹´ 8 æœˆæˆ‘å†³å®šåˆ°ç¦»å¼€éƒ‘å·åˆ°æ­å·å·¥ä½œæ—¶ï¼Œå½“æˆ‘é­å—æœ‹å‹å®¶äººè´¨ç–‘éè®®æ¿’ä¸´å´©æºƒæ—¶ï¼Œå¤§å®é€‰æ‹©ç«™åœ¨æˆ‘èº«ååšå®šåœ°æ”¯æŒæˆ‘ã€‚å½“ä¸€ä¸ªä¸‹åˆå¤§å®çªç„¶å‡ºç°ï¼Œæˆ‘ç¡®ä¿¡å¿ƒçµæ‰¾åˆ°äº†ä¾åã€‚ç›¸ä¿¡æˆ‘ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¥³å­©å­æ„¿æ„ä¸ºä½ åˆ°ä¸€ä¸ªé™Œç”Ÿçš„åŸå¸‚ç”Ÿæ´»ï¼Œé‚£å¥¹ä¸€å®šå¾ˆçˆ±ä½ ã€‚åŠå¹´å¤šè¿‡å»äº†ï¼Œæˆ‘åœ¨æ­å·ç»™äº†å¥¹ä¸€ä¸ªå®¶ã€‚</p><h2 id="æœ‰çˆ±ï¼Œå³æ˜¯å®¶"><a href="#æœ‰çˆ±ï¼Œå³æ˜¯å®¶" class="headerlink" title="æœ‰çˆ±ï¼Œå³æ˜¯å®¶"></a>æœ‰çˆ±ï¼Œå³æ˜¯å®¶</h2><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34c2d6ecfbd542cab014e649637025f5~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG194.jpeg"></p><p>åœ¨å†™ä¸‹æœ¬æ–‡æ—¶ï¼Œæˆ‘å·²ç»æ˜¯ååœ¨æ–°å®¶çš„ä¹¦æˆ¿ï¼Œä¹¦æ¡Œå³ä¾§ç‚¹ç€é¦™è–°ï¼Œå·¦ä¾§æ‘†æ”¾ç€æ˜é‡‘ç­¾çº¦ä½œè€…çš„è¯ä¹¦ã€‚å¤§å®åœ¨å§å®¤æ•·ç€é¢è†œåˆ·ç€æ­¦æ—å¤–ä¼ ã€‚å‰å‡ å¤©æˆ‘é—®å¤§å®ç°åœ¨æœ‰è‡ªå·±å®¶äº†æ˜¯ä¸æ˜¯å¾ˆå¼€å¿ƒã€‚å¥¹å´ä¸€åå¸¸æ€åœ°è®¤çœŸèµ·æ¥è¯´ï¼šâ€œåœ¨å°å®¶çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿå¾ˆå¼€å¿ƒå‘€ï¼åªè¦æˆ‘ä»¬äº’ç›¸çˆ±æŠ¤ï¼Œå“ªé‡Œéƒ½æ˜¯å®¶â€ã€‚çœ‹ç€çœ¼å‰è®¤çœŸçš„å°å§‘å¨˜ï¼Œå†å›æƒ³ä¸€ä¸‹è¿™åŠå¹´çš„ç»å†ã€‚æˆ‘æ‰å‘ç°æˆ‘ä»¬æœ€åœ¨ä¹çš„æ˜¯å¯¹æ–¹ã€‚</p><p>è¿™ä¸æ˜¯ä»€ä¹ˆå‡¡å°”èµ›æ•…äº‹ï¼Œå¤§å®è·‘æ¥æ­å·é™ªæˆ‘æ—¶è¿˜ä¸çŸ¥é“æˆ‘å®šå±…çš„æ‰“ç®—ï¼Œå´æ–­ç„¶æ”¾å¼ƒäº†å®¶é‡Œå®‰é€¸çš„æ¡ä»¶è·‘æ¥å’Œæˆ‘ä¸€èµ·ç§Ÿæˆ¿ã€‚å“ªæ€•æ˜¯çŸ¥é“äº†ä¹‹åï¼Œç”±äºå®¶é‡Œäººçš„åå¯¹å’Œè€æˆ¿å­è¿Ÿè¿Ÿå–å‡ºæ— æœ›ä»¥åŠä¸Šæ¶¨è¿…é€Ÿçš„æ­å·æˆ¿ä»·ï¼Œä¸€åº¦å¯èƒ½å®šå±…æ­å·æ— æœ›ã€‚ä½†æ˜¯å¤§å®ä¹Ÿä»æ¥æ²¡æœ‰è¯´è¿‡è·Ÿç€æˆ‘å—ç½ªä¸è¡Œå›éƒ‘å·ä¹‹ç±»çš„è¯ã€‚</p><p>å°±åœ¨ä¸€ä¸ªæœˆå‰ï¼Œæˆ‘ä»¬åœ¨ä¸ºå–å®¶æƒ³æ¯çº¦è€Œæ‹…å¿§ï¼›ä¸¤ä¸ªæœˆå‰åœ¨ä¸ºé¢„ç®—ä¸å……è¶³ç„¦è™‘ï¼›ä¸‰ä¸ªæœˆå‰åœ¨ä¸ºé€‰çš„æ–°æ¥¼ç›˜é¸½äº†æˆ‘ä»¬å½·å¾¨ï¼›å››ä¸ªæœˆå‰åœ¨ä¸ºè€æˆ¿å­è¿˜æ²¡æœ‰å–æ‰æ— åŠ©ã€‚é™¤äº†è¿™äº›å®¢è§‚å› ç´ ï¼Œæœ€éš¾å¤„ç†çš„è¿˜æ˜¯æ¥è‡ªçˆ¶æ¯å’Œäº²æˆšçš„ä¸æ”¯æŒã€‚è¿™ 9 ä¸ªæœˆæ¥ä¸æ­¢ä¸€æ¬¡å› ä¸ºæˆ‘åšæŒåœ¨æ­å·å®šå±…å’Œçˆ¶æ¯é—¹çš„ä¸æ¬¢è€Œæ•£ã€‚æˆ‘ä»¬ä¿©ç°åœ¨æ— æ¯”çæƒœå¯¹æ–¹å’Œçœ¼å‰æ‹¥æœ‰çš„ä¸€åˆ‡ï¼Œæ­£å¦‚å¤§å®è¯´ä¸€åˆ‡éƒ½æ˜¯æœ€å¥½çš„å‘ç”Ÿã€‚</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/63d1b9e2b4684598bca7a256b39cedb6~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG189 1.jpeg"></p><h2 id="æŠ€æœ¯è¿™åŠå¹´"><a href="#æŠ€æœ¯è¿™åŠå¹´" class="headerlink" title="æŠ€æœ¯è¿™åŠå¹´"></a>æŠ€æœ¯è¿™åŠå¹´</h2><p>è¿™åŠå¹´å¯è°“æŠ˜è…¾çš„åŠå¹´ï¼Œç°åœ¨å›çœ‹å¯èƒ½å¤šå°‘æ˜¯æœ‰ç‚¹è¿·å¤±äº†ã€‚ä» Go åˆ° Denoï¼Œå†åˆ° Rustï¼Œåœ¨è¯­è¨€æœ¬èº«çš„å­¦ä¹ ä¸Šè¶Šèµ°è¶Šè¿œï¼Œå€Ÿæ­¤æœºä¼šï¼Œæ‹ä¸€ä¸‹è¿™ä¸€è·¯çš„å¾—å¤±ï¼Œä¸å›å…±å‹‰ã€‚</p><h3 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h3><p>æ´›ç«¹çš„ Go æ°´å¹³ä»…é™äºç†Ÿç»ƒç¼–å†™ CLI ç¨‹åºï¼Œåœ¨æ¥åˆ°ä½¿ç”¨ Go å†™è„šæœ¬çš„æ—¶å€™ï¼Œæˆ‘å†…å¿ƒæ˜¯æ¿€åŠ¨çš„ã€‚åœ¨ <a href="https://juejin.cn/post/6860522117423857678">æé€Ÿå…¥é—¨Goå¹¶çˆ¬å–æ˜é‡‘ä¸“æ  | ğŸ† æŠ€æœ¯ä¸“é¢˜ç¬¬äºŒæœŸ</a> å…¥é—¨ Go åä¸€ç›´æ²¡æœ‰èƒ½ç”¨çš„ä¸Šã€‚è¿™åŠå¹´å€Ÿå·¥ä½œæœºä¼šï¼Œåœ¨ Go çš„å­¦ä¹ é“è·¯ä¸Šæœ‰ä¸Šå‡äº†ä¸€ä¸ªå°é˜¶ï¼Œé™¤äº†å®Œæˆäº†å·¥ä½œä»»åŠ¡ï¼Œä¹Ÿäº§å‡ºäº†ä¸€ä¸ª Go æ’ä»¶ <a href="https://github.com/youngjuning/go-release">youngjuning&#x2F;go-release</a>ã€‚ä»¥åŠä»¥ä¸‹åšæ–‡ï¼š</p><ul><li><a href="https://juejin.cn/post/6924541628031959047">Cobra ä¸­æ–‡æ–‡æ¡£</a></li><li><a href="https://juejin.cn/post/6940296964089053221">ä»é›¶ä½¿ç”¨ Go è¯­è¨€æ„å»º CLI é¡¹ç›® | é¡¹ç›®å¤ç›˜</a></li><li><a href="https://juejin.cn/column/6962102040684134436">Go è¯­è¨€æ•™ç¨‹ç³»åˆ—ä¸“æ </a></li></ul><p>å¾ˆå¼€å¿ƒçš„æ˜¯ï¼Œç”±äº 3ã€4 æœˆä»½åœ¨åç«¯é¢†åŸŸçš„å‹¤å¥‹æ›´æ–‡ï¼Œè¿ç»­ä¸¤ä¸ªæœˆè·å¾—ä¸“æ ä½œè€…ä¸Šæ¦œè¯ä¹¦ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b41cd7c5614f495d9e67d72406e16997~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG184.jpeg"></p><blockquote><p>èŠ±åœ¨ Go ä¸Šçš„æ—¶é—´ï¼Œç°åœ¨å›çœ‹æ˜¯åˆ©å¤§äºå¼Šçš„ã€‚ä¸€æ˜¯å·¥ä½œç›¸å…³ï¼ŒäºŒæ˜¯å€Ÿç”± Go çš„å­¦ä¹ ä¹‹æ—…ï¼Œå¯ä»¥å¯¹åç«¯å¼€å‘ä»¥åŠåˆ†å¸ƒå¼ã€åç¨‹ç­‰æ¦‚å¿µæœ‰ä¸€ä¸ªäº†è§£çš„æœºä¼šã€‚</p></blockquote><h3 id="Deno"><a href="#Deno" class="headerlink" title="Deno"></a>Deno</h3><p>ä¸ Deno ç»“ç¼˜èµ·äº <a href="https://juejin.cn/post/6854573220432248839">Denoä»å…¥é—¨åˆ°è·‘è·¯ | ğŸ† æŠ€æœ¯ä¸“é¢˜ç¬¬ä¸€æœŸå¾æ–‡</a> ï¼Œå½“è¦è®¾è®¡ä¸€ä¸ªåŸºäº Go çš„ CLI æ—¶ï¼Œæƒ³åˆ°äº† Deno çš„æºç çš„å·¥ç¨‹åŒ–éƒ¨åˆ†æœ‰å¯ä»¥å€Ÿé‰´çš„éƒ¨åˆ†ï¼Œé‚è¿›è¡Œäº†æ¢ç´¢ã€‚Deno æœ¬èº«çš„å­¦ä¹ å’Œåº”ç”¨å¹¶æ²¡æœ‰å¤ªå¤šæ¶‰åŠï¼Œåªäº§å‡ºäº†å‡ ç¯‡ç›¸å…³æ–‡ç« ï¼š</p><ul><li><a href="https://juejin.cn/post/6924465443704930318">å‘ Deno å­¦ä¹ ä¼˜ç§€çš„è„šæœ¬ç®¡ç†</a></li><li><a href="https://juejin.cn/post/6925201316264443918">åŸºäº Go å®ç° Deno upgrade</a></li><li><a href="https://juejin.cn/post/6926899307735957511">å®ï¼Œä¸€ä»½ Deno GitHub Action æºç è§£æè¯·æŸ¥æ”¶|ç‰›æ°”å†²å¤©æ–°å¹´å¾æ–‡</a></li></ul><p>å‡­å€Ÿå¯¹ Deno GitHub Action è¯¦ç»†çš„è§£æï¼Œåšç€è„¸çš®æäº¤äº†ä¸€ä¸ª prï¼Œé—æ†¾çš„æ˜¯ï¼Œæ›´ä¸ºå»ºè®¾æ€§çš„å»ºè®®å¹¶æœªè¢«ä»“åº“ç®¡ç†å‘˜é‡‡çº³ã€‚å½“æ—¶å› ä¸ºæˆä¸ºä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„ contributor å¼€å¿ƒäº†å¾ˆä¹…ã€‚ç°åœ¨å›çœ‹è¿™ä»¶äº‹å¯¹æˆ‘çš„æ„ä¹‰åœ¨äºä½“éªŒäº†ä¸€æŠŠå‚ä¸è¶…å¤§å‹å¼€æºé¡¹ç›®çš„å®Œæ•´æµç¨‹ã€‚ä¹ŸæŠŠè‡ªå·±çš„åå­—æ°¸è¿œå®šæ ¼åœ¨äº†ä»“åº“åˆ—è¡¨ä¸­ã€‚</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d9faf73715e475593d0729d4e813a7e~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><blockquote><p>å€¼å¾—åæ€çš„æ˜¯å¯¹äº Deno çš„æ¢ç©¶æœ¬è¯¥ç‚¹åˆ°ä¸ºæ­¢ï¼Œæˆ‘å´è¢«è™šè£è’™ç›–äº†åŒçœ¼ï¼Œè€—è´¹äº†è¿‡å¤šçš„ç²¾åŠ›åœ¨è¿™ä¸Šé¢ï¼Œäººç”Ÿä¹Ÿæœ‰å´–ï¼Œè€ŒçŸ¥æ— æ¶¯ã€‚è€ƒè™‘åˆ°è‡ªå·±å·²ç»å…¥é—¨ä¸” Deno çš„å‰æ™¯å¹¶ä¸æ˜æœ—ï¼Œä»Šå¹´æ²¡æœ‰ç‰¹æ®Šæƒ…å†µæ˜¯ä¸ä¼šå†ç»§ç»­ç ”ç©¶äº†ã€‚</p></blockquote><h3 id="Rust"><a href="#Rust" class="headerlink" title="Rust"></a>Rust</h3><p>å­¦ä¹  Rust åˆ™å•çº¯æ˜¯å› ä¸ºå½“æ—¶å€Ÿç€ç»™ Deno æ pr æˆåŠŸçš„é«˜å…´åŠ²ï¼Œæ€’åˆ·äº† 7 ç«  ã€ŠRust æƒå¨æŒ‡å—ã€‹ï¼Œè¯´å®è¯å­¦ä¹  Rust æ¯”å­¦ä¹  Deno æ„ä¹‰å’Œå¿…è¦æ€§è¿˜å¤§äº›ã€‚ä»Šå¹´è®¡åˆ’ä¹Ÿä¸ä¼šç»§ç»­å­¦ä¹  Rust äº†ã€‚æŠŠæ—¶é—´æ›´å¤šåœ°ç•™ç»™å¤§å‰ç«¯æ–¹é¢çš„å­¦ä¹ è¾“å‡ºã€‚ä¸‹é¢æ˜¯å­¦ä¹  Rust æ—¶è¾“å‡ºçš„å‡ ç¯‡åƒåœ¾æ–‡ï¼š</p><ul><li><a href="https://juejin.cn/post/6937098861152305160">[è¯‘]æ·±å…¥ç†è§£ Rust æ‰€æœ‰æƒã€å€Ÿç”¨ã€ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="https://juejin.cn/post/6929666131082870797">ä¸ºä»€ä¹ˆ Rust éœ€è¦å±€éƒ¨å˜é‡éšè—</a></li><li><a href="https://juejin.cn/post/6929576263216529422">Rust ç¼–å†™çŒœæ•°æ¸¸æˆ</a></li><li><a href="https://juejin.cn/post/6929080722565267469">ä¸¤ä¸ªç•ªèŒ„é’Ÿçš„ Rust è¯­æ³•å­¦ä¹ </a></li><li><a href="https://juejin.cn/post/6928656425090547726">ä¸€ä¸ªç•ªèŒ„é’Ÿå…¥é—¨ Rust|ç‰›æ°”å†²å¤©æ–°å¹´å¾æ–‡</a></li></ul><h3 id="å‰ç«¯å·¥ç¨‹åŒ–"><a href="#å‰ç«¯å·¥ç¨‹åŒ–" class="headerlink" title="å‰ç«¯å·¥ç¨‹åŒ–"></a>å‰ç«¯å·¥ç¨‹åŒ–</h3><p>è¿™åŠå¹´åšçš„è¿˜æ˜¯åŸºç¡€å»ºè®¾æ–¹é¢çš„äº‹æƒ…ï¼Œé€šä¿—ç‚¹è¯´æ˜¯å¦‚ä½•è§£å†³å¼€å‘ç—›ç‚¹ï¼Œæå‡æ•ˆç‡ã€‚å€¼å¾—ä¸€æçš„æ˜¯è®¾è®¡å¹¶å‚ä¸äº†ç±» iceworks çš„ vscode æ’ä»¶ä½“ç³»å·¥å…·ã€‚ä¸ºäº†è®¾è®¡å·¥å…·ï¼Œåœ¨è¿™ä¸­é—´é˜…è¯»äº† vscodeã€create-react-appã€vue-cliã€iceworks ç­‰å·¥å…·çš„æºç ã€‚</p><h2 id="æ˜é‡‘ï¼Œä¼´æˆ‘æˆé•¿"><a href="#æ˜é‡‘ï¼Œä¼´æˆ‘æˆé•¿" class="headerlink" title="æ˜é‡‘ï¼Œä¼´æˆ‘æˆé•¿"></a>æ˜é‡‘ï¼Œä¼´æˆ‘æˆé•¿</h2><h3 id="åªå¦‚åˆè§"><a href="#åªå¦‚åˆè§" class="headerlink" title="åªå¦‚åˆè§"></a>åªå¦‚åˆè§</h3><p>ä» 2020 å¹´å¼€å§‹æ›´æ–‡åˆ°ç°åœ¨ï¼Œç´¯ç§¯åœ¨æ˜é‡‘å‘å¸ƒäº† 123 åšå®¢ã€‚ä¸€åˆ‡çš„å¼€å§‹éƒ½è¦ä»ä¸Šä¸€æ¬¡å¹´ä¸­æ€»ç»“æ²¸ç‚¹æ´»åŠ¨å¼€å§‹ï¼Œè·å¾—æ˜é‡‘å®šåˆ¶ã€è±ªåå®šåˆ¶æ¡Œã€ä¹‹åæ¿€å‘äº†å¯¹æ˜é‡‘æ´»åŠ¨çš„æµ“åšå…´è¶£ï¼</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c0fe85200e945bfb869d7b897712aae~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>å»å¹´çš„çš„å¹´ä¸­æ€»ç»“å’Œå¹´ç»ˆæ€»ç»“å¯ä»¥æŸ¥çœ‹ï¼š</p><ul><li><a href="https://juejin.cn/post/6850418121858088968">æ€•ä»€ä¹ˆçœŸç†æ— ç©·ï¼Œè¿›ä¸€å¯¸æœ‰ä¸€å¯¸çš„æ¬¢å–œ</a></li><li><a href="https://juejin.cn/post/6930623622944358408#heading-0">æ´›ç«¹çš„2021å¹´åº¦ç›®æ ‡é€šæ™’</a></li></ul><p>å†ç„¶åæˆ‘æˆä¸ºäº†æ˜é‡‘ä¸“é¢˜ç¬¬ä¸€æœŸå¾æ–‡çš„ç¬¬ä¸€ä¸ªæŠ•ç¨¿çš„ä½œè€…ã€‚ä¹Ÿè®¸æ˜¯å¼ å“¥ææºï¼Œä¹Ÿè®¸è¯é¢˜å¤Ÿçƒ­ï¼Œä¹Ÿè®¸æ˜¯æˆ‘å†™çš„è¿˜è¡Œã€‚æ€»ä¹‹æˆ‘æ‹¥æœ‰äº†äººç”Ÿä¸­ç¬¬ä¸€ç¯‡çƒ­æ–‡ï¼Œä»¥æ­¤è¿›å…¥äº†æ˜é‡‘ä½œè€…ç¾¤ã€‚åæ¥è®¤è¯†è¨€é¸½ã€ç‹é¸½ã€å°å¸…ã€å¤§åœ£ã€Alexã€Kerwin_ã€å»ºè¶…ã€è€³æœµç­‰ç­‰å¤©å—åœ°åŒ—çš„å¥½æœ‹å‹éƒ½è¦ä»è¢«æ˜Ÿæ¢å¼ å“¥å‘æ˜å¼€å§‹ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/505f961ae0c54ee6afa06fdd6146de13~tplv-k3u1fbpfcp-zoom-1.image"></p><p>è¿›å…¥ 2021 å¹´åï¼Œæ˜æ˜¾æ„Ÿå—åˆ°äº†è¿è¥åŒå­¦çš„å‘åŠ›ï¼Œå„ç§æ´»åŠ¨åº”æ¥ä¸æš‡ã€‚ç”±äºæˆ‘æ€»æ˜¯ä¸€ä¸ªä¸æ‹‰çš„å‚ä¸æ´»åŠ¨ï¼Œä¸€åº¦éœ€è¦ä¸“é—¨å¯¹å‚ä¸çš„æ˜é‡‘æ´»åŠ¨è¿›è¡Œç®¡ç†ã€‚æ˜é‡‘çš„å¿«é€’éš”ä¸‰å·®äº”å°±ä¼šæœ‰ä¸€ä¸ªï¼Œå…¬å¸å°é‚®å±€çš„é˜¿å§¨éƒ½è®°å¾—æˆ‘çš„åå­—äº†ã€‚ä¸ç®—å…¶ä»–å¿«é€’å¯„çš„ï¼Œå•é¡ºä¸°è¿™åŠå¹´å·²ç»æ”¶åˆ°æ˜é‡‘è¿‘ 20 ä¸ªå¿«é€’ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ff87ec15b274bb8ab5eda9d30d2e85d~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG196.jpeg"></p><p>çˆ±ï¼Œåªå¦‚åˆè§ï¼Œå…¥é©»ä¸€å¹´ä¸‹æ¥ã€‚ä»å°å…¬å¸è‡ªæ»¡è‡ªè¶³åˆ°è¿›å…¥ä¸Šå¸‚å…¬å¸ï¼Œä»é»˜é»˜æ— ååˆ°æˆä¸ºç­¾çº¦ä½œè€…ã€‚æ„Ÿè°¢æ˜é‡‘æä¾›çš„å¹³å°ï¼Œæ„Ÿè°¢å¼ å“¥ä»èŒ«èŒ«äººæµ·ä¸­æ³¨æ„åˆ°äº†æˆ‘ã€‚</p><h3 id="æœºä¼šä¸è½¯å®åŠ›æå‡"><a href="#æœºä¼šä¸è½¯å®åŠ›æå‡" class="headerlink" title="æœºä¼šä¸è½¯å®åŠ›æå‡"></a>æœºä¼šä¸è½¯å®åŠ›æå‡</h3><p>ä¹‹å‰å¼€ç©ç¬‘è¯´å’Œå¼ å“¥å­¦è¿è¥ï¼Œè€Œè¿™å¥è¯æœ€ç»ˆå´ä¸æ˜¯ä¸€å¥ç¬‘è¯ã€‚åœ¨è€³æ¿¡ç›®æŸ“ä¸‹ï¼Œæˆ‘ä»ä¸€ä¸ªä¸å–„è¨€è¾ï¼Œå°å‰ç´§å¼ çš„å®…ç”·ã€‚æ…¢æ…¢åœ°å¯ä»¥ç»´æŠ¤å…¬å¸å¤§å‰ç«¯ä¸“æ ã€å’Œè¨€é¸½ä¸€èµ·è´Ÿè´£å†…éƒ¨æ²™é¾™å¹¶å¶å°”å®¢ä¸²ä¸»æŒäººï¼Œè¿™ä¸€åˆ‡æ— ç–‘éƒ½æ˜¯æ˜é‡‘æä¾›ç»™æˆ‘çš„äººè„‰ã€èµ„æºæ‰“å¼€äº†æˆ‘çš„çœ¼ç•Œæå‡äº†æˆ‘çš„è½¯å®åŠ›ã€‚ä¸‹å›¾æ˜¯ç¬¬ä¸€åœºæ²™é¾™<a href="https://juejin.cn/user/747323638163768">æ¥æ°´æ€ª</a>åŒå­¦çš„åˆ†äº«ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/361db1efad154900aa2f10c81e5714c0~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG183.jpeg"></p><p>è¿‘æœŸæœ€å¼€å¿ƒçš„äº‹æ˜¯å»åŒ—äº¬ç­¾çº¦çš„æ—¶å€™ï¼Œé€šè¿‡æ˜é‡‘ï¼Œç»ˆäºé¢åŸºäº†å¤§åœ£è€å¸ˆï¼ˆä¹‹å‰ä¸æ­¢ä¸€æ¬¡åœ¨åšå®¢è¡¨è¾¾è¿‡å¯¹è€å¸ˆçš„æ•¬ä½©ï¼‰ã€‚</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/83274b59972349088daf61df11362b2d~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG191.jpeg"></p><h3 id="æ˜é‡‘ç¿»è¯‘è®¡åˆ’"><a href="#æ˜é‡‘ç¿»è¯‘è®¡åˆ’" class="headerlink" title="æ˜é‡‘ç¿»è¯‘è®¡åˆ’"></a>æ˜é‡‘ç¿»è¯‘è®¡åˆ’</h3><p>ä»ä¸‰æœˆå¼€å§‹å‚ä¸æ˜é‡‘ç¿»è¯‘è®¡åˆ’åˆ°ç°åœ¨å·²ç»è´¡çŒ®äº† 8 ç¯‡æ–‡ç« ï¼Œè¿™ä¸€è¿‡ç¨‹ä¸­å€’é€¼æˆ‘é‡æ–°èƒŒäº†ä¸€ä¸ªæœˆå•è¯ã€‚å¹¶åœ¨ç¿»è¯‘ä¸“ä¸šæ–‡ç« æ—¶æŸ¥é˜…äº†å¤§é‡èµ„æ–™ã€‚å¹¶ä¸”å¤§å®¶å¯ä»¥çœ‹åˆ°æ¯ä¸ª PR éƒ½æœ‰æ ¡å¯¹è€…è®¤çœŸå’Œä¸“ä¸šçš„æ ¡å¯¹ã€‚psï¼šä½“éªŒè¿‡ä¸€æ¬¡æ ¡ï¼Œæ„Ÿè§‰å¯¹æœ‰æ—¶å€™æ¯”ç¿»è¯‘æœ¬èº«è¿˜è¦è¾›è‹¦ã€‚è¿™ä¸€æå…¶æœ‰æ„ä¹‰çš„äº‹æˆ‘ä¸‹åŠå¹´è¿˜æ˜¯ä¼šç»§ç»­åšæŒå‚ä¸çš„ã€‚ä¹Ÿæ¬¢è¿æ˜å‹ä¸€èµ·å‚ä¸ï¼</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a6d9f6ece6fd48a5af9f6a8c376a0085~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 id="ç­¾çº¦ï¼Œæ˜¯æˆé•¿å’Œè´£ä»»"><a href="#ç­¾çº¦ï¼Œæ˜¯æˆé•¿å’Œè´£ä»»" class="headerlink" title="ç­¾çº¦ï¼Œæ˜¯æˆé•¿å’Œè´£ä»»"></a>ç­¾çº¦ï¼Œæ˜¯æˆé•¿å’Œè´£ä»»</h2><p>ç­¾çº¦å¯¹äºæ¯ä¸ªäººçš„æ„ä¹‰éƒ½ä¸ä¸€æ ·ï¼Œå¯¹äºæˆ‘æ¥è¯´æœ€å¤§çš„æ„ä¹‰æ˜¯æˆé•¿å’Œè´£ä»»ã€‚æˆé•¿æ˜¯æˆ‘å¯¹è‡ªå·±çš„æœŸæœ›å€¼éœ€è¦æ›´é«˜äº†ï¼Œè€Œè´£ä»»æ˜¯å¿…é¡»è¦æ‹¿å‡ºè¯šæ„æ¥è®¤çœŸå¯¹å¾…æ¯ä¸€ç¯‡ç­¾çº¦æ–‡ç« ä¸è¾œè´Ÿå¹³å°çš„ä¿¡ä»»ã€‚æœ€åæ˜é‡‘é«˜ç«¯å®æœ¨åœ°å€ç­¾çº¦è¯ä¹¦ç»“æŸæœ¬æ¬¡å¹´ä¸­æ€»ç»“ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61a39d23f26e4c66950b8b4b2b0a54ba~tplv-k3u1fbpfcp-watermark.image" alt="WechatIMG186.jpeg"></p><blockquote><p>æœ¬æ–‡é¦–å‘äºã€Œ<a href="https://youngjuning.js.org/">æ´›ç«¹çš„å®˜æ–¹ç½‘ç«™</a>ã€ï¼ŒåŒæ­¥äºå…¬ä¼—å·ã€Œ<a href="https://cdn.jsdelivr.net/gh/youngjuning/images/20210418112129.jpeg">æ´›ç«¹æ—©èŒ¶é¦†</a>ã€å’Œã€Œ<a href="https://juejin.cn/user/325111174662855">æ˜é‡‘ä¸“æ </a>ã€ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å½“å»å¹´ 8 æœˆæˆ‘å†³å®šåˆ°ç¦»å¼€éƒ‘å·åˆ°æ­å·å·¥ä½œæ—¶ï¼Œå½“æˆ‘é­å—æœ‹å‹å®¶äººè´¨ç–‘éè®®æ¿’ä¸´å´©æºƒæ—¶ï¼Œå¤§å®é€‰æ‹©ç«™åœ¨æˆ‘èº«ååšå®šåœ°æ”¯æŒæˆ‘ã€‚å½“ä¸€ä¸ªä¸‹åˆå¤§å®çªç„¶å‡ºç°ï¼Œæˆ‘ç¡®ä¿¡å¿ƒçµæ‰¾åˆ°äº†ä¾åã€‚ç›¸ä¿¡æˆ‘ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¥³å­©å­æ„¿æ„ä¸ºä½ åˆ°ä¸€ä¸ªé™Œç”Ÿçš„åŸå¸‚ç”Ÿæ´»ï¼Œé‚£å¥¹ä¸€å®šå¾ˆçˆ±ä½ ã€‚åŠå¹´å¤šè¿‡å»äº†ï¼Œæˆ‘åœ¨æ­å·ç»™äº†å¥¹ä¸€ä¸ªå®¶ã€‚&lt;/p&gt;
</summary>
      
    
    
    
    <category term="æ¼«è°ˆ" scheme="https://youngjuning.js.org/categories/%E6%BC%AB%E8%B0%88/"/>
    
    
    <category term="å¹´ä¸­æ€»ç»“" scheme="https://youngjuning.js.org/tags/%E5%B9%B4%E4%B8%AD%E6%80%BB%E7%BB%93/"/>
    
    <category term="ç¨‹åºå‘˜" scheme="https://youngjuning.js.org/tags/%E7%A8%8B%E5%BA%8F%E5%91%98/"/>
    
    <category term="æ­å·" scheme="https://youngjuning.js.org/tags/%E6%9D%AD%E5%B7%9E/"/>
    
  </entry>
  
  <entry>
    <title>React æ€§èƒ½ä¼˜åŒ–å®è·µ</title>
    <link href="https://youngjuning.js.org/8132b809f088/"/>
    <id>https://youngjuning.js.org/8132b809f088/</id>
    <published>2023-03-05T09:22:41.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<h1 id="React-Profiler"><a href="#React-Profiler" class="headerlink" title="React Profiler"></a>React Profiler</h1><p>React 16.5 æ·»åŠ äº†å¯¹å¼€å‘è€…å·¥å…·çš„ Profiler æ’ä»¶çš„æ”¯æŒã€‚è¯¥æ’ä»¶ä½¿ç”¨äº† React çš„ Profiler API æ¥æ”¶é›†æ‰€æœ‰ç»„ä»¶æ¸²æŸ“çš„è€—æ—¶ï¼Œç›®çš„æ˜¯ä¸ºäº†æ‰¾å‡º React åº”ç”¨ç¨‹åºçš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p>è¿™ä¸ªâ€œProfilerâ€é¢æ¿åˆå§‹ä¸ºç©ºï¼Œä½ å¯ä»¥ç‚¹å‡» record æŒ‰é’®å¼€å§‹åˆ†æï¼š</p><p><img src="https://zh-hans.reactjs.org/static/bae8d10e17f06eeb8c512c91c0153cff/ad997/start-profiling.png"></p><p>å½“ä½ å¼€å§‹è®°å½•ä¹‹åï¼Œå¼€å‘è€…å·¥å…·å°†åœ¨æ¯æ¬¡åº”ç”¨ç¨‹åºæ¸²æŸ“æ—¶è‡ªåŠ¨æ”¶é›†æ€§èƒ½æ•°æ®ã€‚ ä½ å¯ä»¥å’Œå¹³å¸¸ä¸€æ ·ä½¿ç”¨ä½ çš„åº”ç”¨ç¨‹åºï¼Œ å½“ä½ å®Œæˆåˆ†æä¹‹åï¼Œè¯·ç‚¹å‡»â€œStopâ€æŒ‰é’®ã€‚</p><p><img src="https://zh-hans.reactjs.org/static/45619de03bed468869f7a0878f220586/ad997/stop-profiling.png"></p><h1 id="ä¼˜åŒ–æ³•åˆ™"><a href="#ä¼˜åŒ–æ³•åˆ™" class="headerlink" title="ä¼˜åŒ–æ³•åˆ™"></a>ä¼˜åŒ–æ³•åˆ™</h1><ul><li>æ³•åˆ™ä¸€ï¼šåŠ¨é™åˆ†ç¦»ï¼Œå°†å˜çš„éƒ¨åˆ†ä¸ä¸å˜çš„éƒ¨åˆ†åˆ†ç¦»ã€‚</li><li>æ³•åˆ™äºŒï¼šç¼“å­˜ï¼Œå¤æ‚è®¡ç®—å’Œæœ‰æ˜‚è´µæ¶ˆè€—çš„ç»„ä»¶ memo åŒ–ï¼Œæ¯”å¦‚ React çš„ useMemoã€useCallbackï¼ŒRedux çš„ useSelectorã€‚</li></ul><p>ä¸‹é¢æˆ‘ä»¬å°†æ ¹æ®è¿™äº›æ³•åˆ™ç»“åˆå®é™…å¼€å‘ä¸­æ¡ˆä¾‹è¿›è¡Œåˆ†æã€‚</p><h1 id="æ¡ˆä¾‹ä¸€"><a href="#æ¡ˆä¾‹ä¸€" class="headerlink" title="æ¡ˆä¾‹ä¸€"></a>æ¡ˆä¾‹ä¸€</h1><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå½“ state æ›´æ–°åï¼Œæ•´ä¸ªç»„ä»¶ä»¥åŠå®ƒçš„å­ç»„ä»¶éƒ½ä¼šé‡æ–°æ›´æ–°ï¼Œå°½ç®¡å­ç»„ä»¶æ²¡æœ‰ä¾èµ–ä»»ä½• stateï¼Œä¸‹é¢çš„ä¾‹å­å°±èƒ½å¾ˆå¥½åœ°å±•ç¤ºè¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params">props: &#123; count: <span class="built_in">number</span>&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;props.count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªæ˜¾ç¤ºéšæœºæ•°çš„ç»„ä»¶å’Œä¸€ä¸ªä¾èµ– count çŠ¶æ€çš„æ•°å­—æ˜¾ç¤ºç»„ä»¶ï¼Œä½¿ç”¨ React Profiler å·¥å…·åˆ†æå¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/09/25/zKn9HslamJi6Ro5.png"></p><p>å°±åƒé¢„æœŸçš„é‚£æ ·ï¼ŒAppã€Count å’Œ Random ç»„ä»¶éƒ½æ›´æ–°äº†ï¼Œä»å·¥å…·ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒä»¬æ›´æ–°çš„åŸå› ï¼š</p><ul><li>Appï¼šHook 1 changed.</li><li>Countï¼šProps changedï¼ˆcountï¼‰.</li><li>Randomï¼šThe parent component rendered.</li></ul><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œè¾¹é™¤äº† Count æ˜¯å› ä¸º count æ›´æ–°ä¹‹å¤–ï¼Œå…¶ä»–ç»„ä»¶çš„æ›´æ–°éƒ½æ˜¯è¢«æ— è¾œç‰µè¿çš„ã€‚æ ¹æ®æ³•åˆ™ä¸€ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å°† Count ç»„ä»¶å’Œå®ƒä¾èµ–çš„çŠ¶æ€å°è£…èµ·æ¥ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>ä»ä¸‹å›¾ Profiler åˆ†æå¯ä»¥çœ‹åˆ°å½“ count æ›´æ–°æ—¶ï¼Œåªæœ‰ Count ç»„ä»¶æ›´æ–°äº†ã€‚</p><p><img src="https://s2.loli.net/2022/09/25/YheAM9ZuviaJDmo.png"></p><p>ä¸Šé¢çš„ç¤ºä¾‹å¤ªè¿‡ç†æƒ³åŒ–ï¼Œå¤§éƒ¨åˆ†æ—¶å€™ï¼Œè´Ÿè´£æ›´æ–°çŠ¶æ€çš„ç»„ä»¶å’Œè´Ÿè´£å±•ç¤ºçŠ¶æ€çš„ç»„ä»¶å¯èƒ½å¹¶ä¸åœ¨ä¸€èµ·ï¼Œä¹Ÿå°±æ²¡åŠæ³•æŠ½ç¦»åŠ¨æ€ç»„ä»¶ã€‚æ¯”å¦‚æˆ‘ä»¬å°†ç¤ºä¾‹ä¸­çš„ç»„ä»¶ä½ç½®åšä¸‹è°ƒæ•´ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦æ³•åˆ™äºŒæ¥å¸®åŠ©æˆ‘ä»¬ï¼Œæœ€ç®€å•çš„æ˜¯é€šè¿‡ props.children å±æ€§æ¥å®ç°ï¼ŒåŸç†ä¸Šæ˜¯ä¸€ç§ä¾é ç¼“å­˜çš„ bailout ä¼˜åŒ–æ–¹æ¡ˆã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">CountProps</span> &#123;</span><br><span class="line">  children?: <span class="variable constant_">JSX</span>.<span class="property">Element</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params">props: CountProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;props.children&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Count</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h1 id="bailout"><a href="#bailout" class="headerlink" title="bailout"></a>bailout</h1><p>æƒ³è¦è§£é‡Šä¸ºä»€ä¹ˆæ¡ˆä¾‹ä¸€ä¸­ä½¿ç”¨ props.children å¯ä»¥è§£å†³é‡å¤æ¸²æŸ“ï¼Œå°±è¦äº†è§£ä¸€ä¸‹ React bailout æœºåˆ¶ã€‚</p><p>bailoutï¼ˆbail out of re-renderingï¼‰å¯ä»¥ç®€å•ç†è§£ä¸ºæ˜¯å¦é‡æ–°æ¸²æŸ“ã€‚</p><p>è¦è§¦å‘ bailout å‡½æ•°ï¼Œéœ€è¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ol><li>oldProps &#x3D;&#x3D;&#x3D; newProps å¹¶ä¸” Context æ²¡æœ‰æ”¹å˜</li><li>!includesSomeLane(renderLanes, updateLanes)</li></ol><p>å½“å‰ fiber ä¸Šæ˜¯å¦å­˜åœ¨æ›´æ–°ï¼Œå¦‚æœå­˜åœ¨é‚£ä¹ˆæ›´æ–°çš„ä¼˜å…ˆçº§æ˜¯å¦å’Œæœ¬æ¬¡æ•´æ£µ Fiber æ ‘è°ƒåº¦çš„ä¼˜å…ˆçº§ä¸€è‡´ï¼Ÿå¦‚æœä¸€è‡´ä»£è¡¨è¯¥ç»„ä»¶ä¸Šå­˜åœ¨æ›´æ–°ï¼Œéœ€è¦èµ° render é€»è¾‘ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// beginWork å‡½æ•°</span></span><br><span class="line"><span class="keyword">if</span> (current !== <span class="literal">null</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> oldProps = current.<span class="property">memoizedProps</span>;</span><br><span class="line">  <span class="keyword">const</span> newProps = workInProgress.<span class="property">pendingProps</span>;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    oldProps !== newProps ||</span><br><span class="line">    <span class="title function_">hasLegacyContextChanged</span>()</span><br><span class="line">  ) &#123;</span><br><span class="line">    didReceiveUpdate = <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="title function_">includesSomeLane</span>(renderLanes, updateLanes)) &#123;</span><br><span class="line">    didReceiveUpdate = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// å‘½ä¸­ bailoutOnAlreadyFinishedWork</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">bailoutOnAlreadyFinishedWork</span>(current, workInProgress, renderLanes);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bailout å‡½æ•°é€»è¾‘å¤§è‡´æ˜¯ï¼šå°½é‡å¤ç”¨ fiberï¼Œä¸è¿›è¡Œ renderã€‚fiber å¤ç”¨ï¼Œåˆ¤æ–­ fiber çš„å­æ ‘æ˜¯å¦æœ‰ workã€‚æœ‰ï¼Œè¿”å› childï¼Œç»§ç»­éå†å­æ ‘ã€‚æ— ï¼Œè¿”å› nullï¼Œè·³è¿‡å­æ ‘ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bailoutOnAlreadyFinishedWork å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bailoutOnAlreadyFinishedWork</span>(<span class="params"></span></span><br><span class="line"><span class="params">  current: Fiber | <span class="literal">null</span>,</span></span><br><span class="line"><span class="params">  workInProgress: Fiber,</span></span><br><span class="line"><span class="params">  renderLanes: Lanes,</span></span><br><span class="line"><span class="params"></span>): <span class="title class_">Fiber</span> | <span class="literal">null</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (current !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// é‡ç”¨ä»¥å‰çš„ context ä¾èµ–å…³ç³»</span></span><br><span class="line">    workInProgress.<span class="property">dependencies</span> = current.<span class="property">dependencies</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ£€æµ‹å­æ ‘(childLanes)æ˜¯å¦æœ‰ work</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">includesSomeLane</span>(renderLanes, workInProgress.<span class="property">childLanes</span>)) &#123;</span><br><span class="line">    <span class="comment">//æ— ï¼Œè·³è¿‡å­æ ‘</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è™½ç„¶ fiber æ²¡æœ‰ workï¼Œä½†æ˜¯å®ƒçš„å­æ ‘æœ‰ï¼Œå…‹éš†å­æ ‘çš„ fiber ç„¶åç»§ç»­æ£€æŸ¥</span></span><br><span class="line">  <span class="title function_">cloneChildFibers</span>(current, workInProgress);</span><br><span class="line">  <span class="keyword">return</span> workInProgress.<span class="property">child</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹ä¸€ä¸­ï¼Œç”±äº children Random ç»„ä»¶çš„ props æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¹¶ä¸” lanes ä¹Ÿä¸åœ¨ renderLanes ä¸Š ï¼ŒDiff ç»„ä»¶å‘½ä¸­ bailoutOnAlreadyFinishedWorkã€‚</p><p>lane æ˜¯ React è°ƒåº¦æ¨¡å‹ä¸­çš„ä¼˜å…ˆçº§æ¨¡å‹ã€‚æƒ³è±¡ä¸€ä¸‹ä¸åŒçš„èµ›è½¦ç–¾é©°åœ¨ä¸åŒçš„èµ›é“ã€‚å†…åœˆçš„èµ›é“æ€»é•¿åº¦æ›´çŸ­ï¼Œå¤–åœˆæ›´é•¿ã€‚æŸå‡ ä¸ªä¸´è¿‘çš„èµ›é“çš„é•¿åº¦å¯ä»¥çœ‹ä½œå·®ä¸å¤šé•¿ã€‚</p><p>lane æ¨¡å‹å€Ÿé‰´äº†åŒæ ·çš„æ¦‚å¿µï¼Œä½¿ç”¨ 31 ä½çš„äºŒè¿›åˆ¶è¡¨ç¤º 31 æ¡èµ›é“ï¼Œä½æ•°è¶Šå°çš„èµ›é“ä¼˜å…ˆçº§è¶Šé«˜ï¼ŒæŸäº›ç›¸é‚»çš„èµ›é“æ‹¥æœ‰ç›¸åŒä¼˜å…ˆçº§ã€‚</p><h1 id="æ¡ˆä¾‹äºŒ"><a href="#æ¡ˆä¾‹äºŒ" class="headerlink" title="æ¡ˆä¾‹äºŒ"></a>æ¡ˆä¾‹äºŒ</h1><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> countContext = <span class="title class_">React</span>.<span class="property">createContext</span>&lt;<span class="built_in">number</span>&gt;(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CountProvider</span> = countContext.<span class="property">Provider</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;Math.random()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">CountProps</span> &#123;</span><br><span class="line">  children?: <span class="variable constant_">JSX</span>.<span class="property">Element</span></span><br><span class="line">  <span class="attr">onAdd</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">  <span class="attr">onMinus</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Count</span>(<span class="params">props: CountProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">useContext</span>(countContext);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;props?.onMinus&#125;</span>&gt;</span>â–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;props?.onAdd&#125;</span>&gt;</span>â•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMinus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">CountProvider</span> <span class="attr">value</span>=<span class="string">&#123;count&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Count</span> <span class="attr">onAdd</span>=<span class="string">&#123;onAdd&#125;</span> <span class="attr">onMinus</span>=<span class="string">&#123;onMinus&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Random</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">CountProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>è¯¥æ¡ˆä¾‹ä¸­æˆ‘ä»¬å¼•å…¥äº† Contextï¼Œå½“ context çš„ value æ”¹å˜æ—¶ï¼Œ</p><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><ul><li><a href="https://zh-hans.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html">React Profiler ä»‹ç»</a></li><li><a href="https://blog.wuct.me/react-internal-reconciliation-bailout-587695eb05a8?gi=c4bc84e7c1df">æ·±å…¥ React Reconciliation Bailout æ©Ÿåˆ¶</a></li><li><a href="https://jishuin.proginn.com/p/763bfbd32552">æˆ‘åœ¨å¤§å‚å†™Reactå­¦åˆ°äº†ä»€ä¹ˆï¼Ÿæ€§èƒ½ä¼˜åŒ–ç¯‡</a></li><li><a href="https://juejin.cn/post/7090466770774917150">react æ€§èƒ½ä¼˜åŒ– - childrenå¦‚ä½•é¿å…ä¸å¿…è¦çš„æ¸²æŸ“</a></li><li><a href="https://juejin.cn/post/7092593300233781285#heading-4">React æ€§èƒ½ä¼˜åŒ–ï¼Œä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡</a></li></ul>]]></content>
    
    
    <summary type="html">React ç»„ä»¶æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæ˜¯å‡å°‘æ¸²æŸ“çœŸå® DOM èŠ‚ç‚¹çš„é¢‘ç‡ï¼Œå‡å°‘ VirtualDOM æ¯”å¯¹çš„é¢‘ç‡ã€‚</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="React" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/React/"/>
    
    
    <category term="React" scheme="https://youngjuning.js.org/tags/React/"/>
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://youngjuning.js.org/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    <category term="React.memo" scheme="https://youngjuning.js.org/tags/React-memo/"/>
    
    <category term="useMemo" scheme="https://youngjuning.js.org/tags/useMemo/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯ç»„ä»¶åŒ–å®æˆ˜ä¹‹ Button</title>
    <link href="https://youngjuning.js.org/f4ea430d1d6d/"/>
    <id>https://youngjuning.js.org/f4ea430d1d6d/</id>
    <published>2023-03-03T02:36:18.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>âš ï¸æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½</p></blockquote><blockquote><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<a href="https://youngjuning.js.org/">æ´›ç«¹ğŸ‹</a>ï¼Œä¸€åªä½åœ¨æ­åŸçš„æœ¨ç³»å‰ç«¯ğŸ§šğŸ»â€â™€ï¸ï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ğŸ“šï¼Œå¯ä»¥é€šè¿‡ç‚¹èµå¸®æˆ‘èšé›†çµåŠ›â­ï¸ã€‚</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ <a href="https://juejin.cn/post/6983854006124675108">ã€Šæ¯ä¸ªå‰ç«¯éƒ½åº”è¯¥æ‹¥æœ‰è‡ªå·±çš„ç»„ä»¶åº“,å°±åƒæ¯ä¸ªå¤å¤©éƒ½æœ‰è¥¿ç“œğŸ‰ã€‹</a> ä¸€æ–‡ä¸­ï¼Œæ´›ç«¹å¸¦é¢†å°é»‘ä»é›¶æ­å»ºäº†ä¸€ä¸ªç»„ä»¶åº“é¡¹ç›®ï¼Œå®Œæˆäº†é¡¹ç›®ç»“æ„ã€æ„å»ºã€æµ‹è¯•ã€æ–‡æ¡£ç­‰åŸºç¡€å·¥ç¨‹åŒ–å·¥ä½œå¹¶å®Œæˆäº†ç¬¬ä¸€ä¸ªç»„ä»¶ Iconã€‚æœ¬æœŸå»¶ç»­ä¸ŠæœŸçš„ç»„ä»¶å·¥ç¨‹åŒ–çš„ä¸»é¢˜ï¼Œå¤æ—¥ç‚çƒ­ï¼Œç‚¹ä¸Šä¸€æ¯æ¨æç”˜éœ²ï¼Œå’Œæ´›ç«¹èµ´ä¸€åœº Button å¼€å‘ä¹‹çº¦å§ã€‚èµ´çº¦åï¼Œä½ å°†ä¼šæ”¶è·ä»¥ä¸‹çš„å†…å®¹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58285f3cce144972b2ccb88e11efd73f~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>PSï¼šé…åˆ<a href="https://github.com/youngjuning/vant-react-native">ä»“åº“</a>å’Œ<a href="https://vant-react-native.js.org/">ç»„ä»¶åº“æ–‡æ¡£</a>é˜…è¯»æœ¬æ–‡æ•ˆæœæ›´ä½³å–²ï¼</p></blockquote><h2 id="Button-ä¸è®¾è®¡å¿ƒç†å­¦"><a href="#Button-ä¸è®¾è®¡å¿ƒç†å­¦" class="headerlink" title="Button ä¸è®¾è®¡å¿ƒç†å­¦"></a>Button ä¸è®¾è®¡å¿ƒç†å­¦</h2><p>ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œå…¥è¡Œè‡³ä»Šæ¥è§¦æœ€å¤šçš„å°±æ˜¯è®¾è®¡å¸ˆäº†ã€‚è€³æ¿¡ç›®æŸ“ä¸‹è™½è¯´æ²¡å­¦ä¼šä»€ä¹ˆè®¾è®¡å·¥å…·ï¼Œä½†æ˜¯å¯¹è®¾è®¡ä¸äººçš„å¿ƒç†æœ‰äº†ä¸€å®šè®¤è¯†ã€‚</p><p>æ´›ç«¹è®¤ä¸ºä»»ä½•äº‹ç‰©éƒ½ä¸å¯èƒ½å‡­ç©ºå‡ºç°ï¼Œè‡ªæœ‰å…¶ä¼ æ‰¿ã€‚ä½¿ç”¨å¹¿æ³›çš„åŸºç¡€ç•Œé¢å…ƒç´  Button ä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘ä»¬ç”Ÿæ´»ä¸­å°±æœ‰éšå¤„å¯è§çš„æŒ‰é’®ã€‚ä¸¾ä¸ªæ —å­ğŸŒ°ï¼Œæ¯å¤©ä¸Šç­ä¸‹ç­å¿…ç„¶è¦æŒ‰çš„ç”µæ¢¯æŒ‰é’®ã€æ‰‹æœºéŸ³é‡æŒ‰é’®ã€å°ç±³ 9 é¸¡è‚‹çš„å°çˆ±åŒå­¦å”¤èµ·æŒ‰é’®ã€‚è¦ææ¸…æ¥šä¸ºä»€ä¹ˆéœ€è¦æŒ‰é’®ï¼Œæˆ‘ä»¬æœ‰å¿…è¦æ¢ç©¶ä¸‹ç”Ÿæ´»ä¸­è¿™äº›æŒ‰é’®çš„ä½œç”¨ã€‚</p><h3 id="ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ"><a href="#ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ" class="headerlink" title="ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ"></a>ç‚¹ä¸€ä¸‹æŒ‰é’®çš„å¿«æ„Ÿ</h3><p>æƒ³è±¡ä¸€ä¸‹æŠŠé”®ç›˜æŒ‰é”®æ¢æˆè§¦æ‘¸å±ï¼Œä½ æœ€åœ¨ä¹çš„ä¸€å®šæ˜¯å®Œç¾è¿˜åŸç‰©ç†é”®çš„æ•²å‡»æ„Ÿï¼Œåƒæ´›ç«¹ç”¨æ‰‹æœºè™šæ‹Ÿé”®ç›˜å°±å–œæ¬¢è®¾ç½®æŒ‰é”®éœ‡åŠ¨å’ŒéŸ³æ•ˆã€‚é€šè¿‡æ‰“å‡»ï¼ˆç‚¹å‡»ï¼‰è·å¾—å¿«æ„Ÿæ˜¯è¾ƒä¸ºæ™®éçš„äººæ€§ã€‚æŒ‰é’®åœ¨æŒ‰ä¸‹ã€æ¾å¼€æ—¶æœ‰ä¸°å¯Œçš„è´¨æ„Ÿå’Œäº¤äº’æ„Ÿï¼Œå®Œç¾æ»¡è¶³äº†äººä»¬ç‚¹ä¸€ä¸‹çš„å¿«æ„Ÿã€‚</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/542a6bbb880e4594ae384ee0bd1e511d~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="ç°å®çš„å®ç”¨æ€§"><a href="#ç°å®çš„å®ç”¨æ€§" class="headerlink" title="ç°å®çš„å®ç”¨æ€§"></a>ç°å®çš„å®ç”¨æ€§</h3><p>ä» BB æœºåˆ°è¯ºåŸºäºšå†åˆ°å¦‚ä»Šçš„æ™ºèƒ½æœºï¼Œå®ä½“æŒ‰é’®å‰Šå‡åˆ°åªå‰©ä¸‹éŸ³é‡é”®å’Œå¼€å…³æœºé”®ã€‚æŒ‰é”®è™½ç„¶å…‰ç§ƒç§ƒæ²¡æœ‰ä»»ä½•æ ‡è¯†ï¼Œä½†æˆ‘ä»¬å°±æ˜¯çŸ¥é“å®ƒçš„åŠŸèƒ½ã€‚è¯•æƒ³ä¸€ä¸‹æ²¡æœ‰è¿™ä¸ªæ¥è‡ªè¿œå¤æ—¶ä»£çš„å¼€å…³é”®ï¼Œä½ æ‰‹é‡Œçš„æ‰‹æœºå°±æ˜¯ä¸€å—æ¿ç –ã€‚</p><h3 id="ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„"><a href="#ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„" class="headerlink" title="ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„"></a>ç–¯ç‹‚æš—ç¤ºç”¨æˆ·ï¼Œè¾¾åˆ°ä¸å¯å‘Šäººç›®çš„</h3><p>å°ç±³ 9 å•ç‹¬å”¤èµ·å°çˆ±åŒå­¦çš„æŒ‰é”®ç»å¸¸ä¼šè¢«è¯¯æŒ‰ï¼Œä¹‹å‰æˆ‘è¿˜ä¸ç†è§£è¿™ä¹ˆè ¢çš„è®¾è®¡çš„ç›®çš„ã€‚åœ¨ç®€å•ç ”ç©¶äº†ç‚¹è®¾è®¡å¿ƒç†å­¦æˆ‘æ˜ç™½äº†ã€‚å°çˆ±çš„è®¾è®¡è€…ä¸ºäº† äº§å“æ—¥æ´»å’Œ AI è®­ç»ƒå°±æ˜¯æ•…æ„è¿™ä¸ªè®¾è®¡çš„ã€‚</p><p>å°ç±³ 10 è™½ç„¶ç§»é™¤äº†å•ç‹¬çš„å”¤èµ·é”®ï¼Œå´æŠŠåŸæ¥çš„ç”µæºé”®æ”¹æˆäº†ä¸€é”®å¤šç”¨ã€‚æ¯æ¬¡æƒ³è¦é‡å¯æ‰‹æœºè¿˜å¾—å…ˆå”¤èµ·ä¸€ä¸‹å°çˆ±åŒå­¦ã€‚ä¸å¾—ä¸è¯´ï¼Œå°çˆ±åŒå­¦å°ç±³äº²å¥³å„¿ã€‚</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/633381b8c2c342ed94bf024dbc19cf76~tplv-k3u1fbpfcp-watermark.image"></p><p>åæ§½å½’åæ§½ï¼Œå°ç±³è¿™ä¸ªæŒ‰é’®ç¡®å®èµ·åˆ°äº†åŸ¹å…»ç”¨æˆ·ä¹ æƒ¯çš„ä»»åŠ¡ã€‚å½“ç”¨æˆ·çŸ¥æ‚‰æŸä¸ªæŒ‰é’®èƒ½æŒ‡å‘æŸä¸ªæ“ä½œï¼Œæˆ–è€…è·å–æŸç±»ä¿¡æ¯åï¼Œé•¿æ­¤ä»¥å¾€ç”¨æˆ·å°±ä¼šå½¢æˆä½¿ç”¨ä¹ æƒ¯ã€‚å¦‚æœæŸæ“ä½œèƒ½å¤Ÿä¸ºç”¨æˆ·å’Œå‚å•†æŒç»­å¸¦æ¥ä»·å€¼ï¼Œé‚£å°±å¯ä»¥è®©æŒ‰é’®çš„ä½ç½®æ›´åŠ é†’ç›®ï¼ŒæŒç»­åŸ¹å…»ç”¨æˆ·ç‚¹å‡»ä¹ æƒ¯ã€‚</p><h3 id="æŒ‡å¼•ç”¨æˆ·æ“ä½œ"><a href="#æŒ‡å¼•ç”¨æˆ·æ“ä½œ" class="headerlink" title="æŒ‡å¼•ç”¨æˆ·æ“ä½œ"></a>æŒ‡å¼•ç”¨æˆ·æ“ä½œ</h3><p>è¿™ä¸ªåœ¨ Web å¼€å‘ä¸­æ˜¯æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯ä¸ªå¯äº¤äº’é¡µé¢ä¸Šéƒ½æœ‰è¿™ç±»æŒ‰é’®çš„å‡ºç°ï¼Œç”¨æ¥æŒ‡å¼•ç”¨æˆ·ä¸‹ä¸€æ­¥è¯¥æ€ä¹ˆåšã€‚æ¯”å¦‚è¡¨å•çš„æäº¤å’Œé‡ç½®ã€‚</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2c2a8abbe84471f96a67e18196c53fb~tplv-k3u1fbpfcp-watermark.image"></p><p>è™½ç„¶æŒ‰é’®ä¹Ÿå¸¸ä½œä¸ºè¡¨å•å…ƒç´ ï¼Œä½†æ˜¯åŒºåˆ«äºå…¶ä»–è¡¨å•å…ƒç´ ï¼ŒæŒ‰é’®å› å…¶å¤©ç„¶åœ°è‡ªè¯´æ˜æ€§ï¼Œä¸éœ€è¦ Label å¯¹å…¶è¿›è¡Œè¾…åŠ©è¯´æ˜ï¼Œå•°å—¦è¿™ä¹ˆå¤šï¼Œæ˜å‹ä»¬åº”è¯¥åœ¨çœ‹åˆ°ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œåº”è¯¥ä¹Ÿä¼šæœ‰ä»è®¾è®¡ä¸Šå“é‰´çš„æ„è¯†äº†ï¼Œæ¬¢è¿å°†å¯¹ä¸‹å›¾çš„å“é‰´åœ¨è¯„è®ºåŒºå‘Šè¯‰æ´›ç«¹ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/88c6754b28984fc3866319c35790fc03~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="ç»„ä»¶ä¸»é¢˜åŒ–"><a href="#ç»„ä»¶ä¸»é¢˜åŒ–" class="headerlink" title="ç»„ä»¶ä¸»é¢˜åŒ–"></a>ç»„ä»¶ä¸»é¢˜åŒ–</h2><p>åœ¨å¼€å§‹å¼€å‘å…·ä½“ç»„ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆçº¦å®šå¥½ç»„ä»¶ä¸»é¢˜åŒ–çš„è§„èŒƒã€‚ä¹‹å‰ antd-mobile-rn å°±å› ä¸ºè®¾è®¡é—®é¢˜ï¼Œä¸­é€”èŠ±è´¹å¤§åŠ›æ°”é‡æ„ã€‚å‡ ä¹æ‰€æœ‰çš„ç»„ä»¶åº“éƒ½ä¼šå°†è‰²å½©ã€å¸ƒå±€è¿™äº›ä»¥ css å˜é‡çš„å½¢å¼æä¾›ç»™ä½¿ç”¨è€…å’Œå¼€å‘è€…ä¸ºï¼ŒReact Native ä¸åŒçš„æ˜¯æ ·å¼åŸºäº CSS in JSï¼Œä¸è¿‡é“ç†ç›¸é€šï¼Œå‚ç…§ vant çš„<a href="https://github.com/youzan/vant/blob/dev/src/style/var.less">è®¾è®¡èµ„æº</a>ï¼Œæˆ‘ä»¬æŠ½å‡ºäº†ä¸€å¥— JavaScript å¸¸é‡ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// packages/themes</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Theme</span> &#123;</span><br><span class="line">  <span class="string">&#x27;animation-duration-base&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;animation-duration-fast&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;animation-timing-function-enter&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;animation-timing-function-leave&#x27;</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-xs&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-sm&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-md&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-size-lg&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="string">&#x27;font-weight-bold&#x27;</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="comment">// å˜é‡è¿‡å¤šï¼Œè¿™é‡Œä»…å±•ç¤ºéƒ¨åˆ†å˜é‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™äº› JS å¸¸é‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¾è®¡ä¸»é¢˜ç³»ç»Ÿã€‚åŸºäº CSS in JS çš„ä¸»é¢˜åŒ–è®¾è®¡ä¸€èˆ¬æ˜¯åŸºäº React Context å®ç°ï¼Œéœ€è¦æä¾› ThemeProvider ä¼ å…¥ä¸»é¢˜ä¸Šä¸‹æ–‡ï¼ŒThemeConsumerã€WithThemeï¼ˆé«˜é˜¶ç±»ç»„ä»¶ï¼‰ã€withThemeï¼ˆé«˜é˜¶å‡½æ•°ç»„ä»¶ï¼‰ æˆ– useThemeï¼ˆReact Hooksï¼‰ä½œä¸ºæ¶ˆè´¹è€…è·å–ä¸Šä¸‹æ–‡ã€‚è‡ªå·±å®ç°ä¹Ÿä¸éš¾ï¼Œä¸è¿‡æ›´æ–‡ä»»åŠ¡æ¯”è¾ƒç´§æ€¥ï¼Œæˆ‘ä»¬å…ˆåŸºäº <a href="https://github.com/cssinjs/theming">cssinjs&#x2F;theming</a> å®ç°åŠŸèƒ½ï¼ŒåæœŸæœ‰éœ€è¦å†å›æ¥é€ è½®å­ä¹Ÿä¸è¿Ÿã€‚ä¸‹é¢ğŸ‘‡å°±æ˜¯æˆ‘ä»¬åŸºäº theming çš„ <code>createTheming</code> å‡½æ•°åˆ›å»ºè‡ªå®šä¹‰ä¸»é¢˜ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createTheming &#125; <span class="keyword">from</span> <span class="string">&#x27;theming&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> context = <span class="title class_">React</span>.<span class="title function_">createContext</span>(defaultTheme);</span><br><span class="line"><span class="keyword">const</span> theming = <span class="title function_">createTheming</span>(context);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> &#123; <span class="title class_">ThemeProvider</span>, withTheme, useTheme &#125; = theming;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸»é¢˜åŠŸèƒ½æ˜¯é€šç”¨çš„ï¼Œå› æ­¤æˆ‘å°†ä¸»é¢˜ç›¸å…³çš„èƒ½åŠ›éƒ½æ”¾åœ¨ <code>@vant-react-native/theme</code> åŒ…ä¸­å‘å¸ƒã€‚</p></blockquote><h2 id="Button-çš„å®ç°"><a href="#Button-çš„å®ç°" class="headerlink" title="Button çš„å®ç°"></a>Button çš„å®ç°</h2><p>React Native å†…ç½®çš„ Button ç»„ä»¶çš„æ ·å¼æ˜¯å›ºå®šçš„ï¼Œåªèƒ½è¿›è¡Œä¸€äº›ç®€å•çš„è®¾ç½®ã€‚ä¸”å†…ç½®çš„ Button ç»„ä»¶åœ¨ Android å’Œ ios ä¸¤ä¸ªå¹³å°ä¸Šçš„è¡¨ç°å¹¶ä¸ä¸€è‡´ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ ¹æ®æ›´åº•å±‚çš„ç»„ä»¶è¿›è¡Œå°è£…ã€‚æˆ‘ä»¬å¯¹æ¯” ant-design-mobile-rn å’Œ react-native-elements åé‡‡ç”¨äº†å‰è€…ä½¿ç”¨çš„ <code>TouchableHighlight</code> ç»„ä»¶ã€‚ç”±äºç»§æ‰¿è‡ª TouchableHighlightï¼Œæ‰€ä»¥æˆ‘ä»¬ç»„ä»¶çš„ Props ç±»å‹å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TouchableHighlightProps</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ButtonProps</span> <span class="keyword">extends</span> <span class="title class_">TouchableHighlightProps</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŒ‰é’®ç±»å‹"><a href="#æŒ‰é’®ç±»å‹" class="headerlink" title="æŒ‰é’®ç±»å‹"></a>æŒ‰é’®ç±»å‹</h3><p>vant çš„ <a href="https://youzan.github.io/vant/#/zh-CN/button#an-niu-lei-xing">Button</a> æ”¯æŒ <code>default</code>ã€<code>primary</code>ã€<code>info</code>ã€<code>warning</code>ã€<code>danger</code> äº”ç§ç±»å‹ï¼Œé»˜è®¤ä¸º <code>default</code>ã€‚ç°åœ¨ï¼Œç»„ä»¶çš„åŸºæœ¬å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">FunctionComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Text</span>, <span class="title class_">View</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ButtonProps</span> &#123;</span><br><span class="line">  <span class="keyword">type</span>?: <span class="string">&#x27;default&#x27;</span> | <span class="string">&#x27;primary&#x27;</span> | <span class="string">&#x27;info&#x27;</span> | <span class="string">&#x27;warning&#x27;</span> | <span class="string">&#x27;danger&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Button</span>: <span class="title class_">FunctionComponent</span>&lt;<span class="title class_">ButtonProps</span>&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„ç»„ä»¶ä¸ºäº†é€‚åº”ä¸»é¢˜åŒ–éœ€æ±‚ï¼Œæ ·å¼ä¸èƒ½æ˜¯å†™æ­»åœ¨ç»„ä»¶é‡Œçš„ï¼Œè€Œæ˜¯è¦é€šè¿‡ä¸Šä¸‹æ–‡è·å–æ ·å¼å¸¸é‡ã€‚æˆ‘ä»¬æ€è·¯æ˜¯é¦–å…ˆä½¿ç”¨ <code>useTheme</code> ä»ä¸Šä¸‹æ–‡ä¸­è·å–ä¸»é¢˜ï¼Œç„¶åç”±äºæ ·å¼å®šä¹‰è¾ƒå¤šï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªç»„ä»¶ç¼–å†™ä¸€ä¸ª <code>useStyle</code> hook æ”¾åœ¨å•ç‹¬çš„ style.ts æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StyleSheet</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Theme</span>, useTheme &#125; <span class="keyword">from</span> <span class="string">&#x27;@vant-react-native/theme&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">useStyle</span> = props =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> theme = useTheme&lt;<span class="title class_">Theme</span>&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getBackgroundColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">switch</span> (props.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;primary&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;success-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;info&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;primary-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;warning&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;warning-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;danger&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;danger-color&#x27;</span>];</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getTextColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">type</span> === <span class="string">&#x27;default&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getBorderRadius</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">round</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-max&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">square</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-sm&#x27;</span>];</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">container</span>: &#123;</span><br><span class="line">      <span class="attr">alignItems</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">      <span class="attr">backgroundColor</span>: <span class="title function_">getBackgroundColor</span>(),</span><br><span class="line">      <span class="attr">borderColor</span>: <span class="title function_">getBorderColor</span>(),</span><br><span class="line">      <span class="attr">borderRadius</span>: theme[<span class="string">&#x27;border-radius-sm&#x27;</span>],</span><br><span class="line">      <span class="attr">borderWidth</span>: theme[<span class="string">&#x27;border-width-base&#x27;</span>],</span><br><span class="line">      <span class="attr">flexDirection</span>: <span class="string">&#x27;row&#x27;</span>,</span><br><span class="line">      <span class="attr">flex</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">justifyContent</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">      <span class="attr">opacity</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">paddingHorizontal</span>: <span class="number">15</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">indicator</span>: &#123;</span><br><span class="line">      <span class="attr">marginRight</span>: theme[<span class="string">&#x27;padding-xs&#x27;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">textStyle</span>: &#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="title function_">getTextColor</span>(),</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="number">14</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">wrapper</span>: &#123;</span><br><span class="line">      <span class="attr">borderRadius</span>: theme[<span class="string">&#x27;border-radius-sm&#x27;</span>],</span><br><span class="line">      <span class="attr">height</span>: <span class="number">44</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> styles;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åŸºäº <code>useStyle</code> æˆ‘ä»¬ä¾¿å¯å®Œæˆä¸€ä¸ªæ”¯æŒå¤šç±»å‹çš„ Button ç»„ä»¶ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Button</span>: <span class="title class_">FunctionComponent</span>&lt;<span class="title class_">ButtonProps</span>&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> styles = <span class="title function_">useStyle</span>(props);</span><br><span class="line">  <span class="keyword">const</span> &#123; style, ...restProps &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">TouchableHighlight</span> <span class="attr">style</span>=<span class="string">&#123;[styles.wrapper,</span> <span class="attr">style</span>]&#125; &#123;<span class="attr">...restProps</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;typeof props.children === &#x27;string&#x27; ? (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;styles.textStyle&#125;</span>&gt;</span>&#123;props.children&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ) : (</span></span><br><span class="line"><span class="language-xml">          props.children</span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">TouchableHighlight</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå­ç»„ä»¶å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯èƒ½æ˜¯ç»„ä»¶ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­ç±»å‹ã€‚</p></blockquote><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a0b412c227e4dc994b818294165240d~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æœ´ç´ æŒ‰é’®"><a href="#æœ´ç´ æŒ‰é’®" class="headerlink" title="æœ´ç´ æŒ‰é’®"></a>æœ´ç´ æŒ‰é’®</h3><p>æœ´ç´ æŒ‰é’®çš„æ–‡å­—ä¸ºæŒ‰é’®é¢œè‰²ï¼ŒèƒŒæ™¯ä¸ºç™½è‰²ï¼Œæˆ‘ä»¬é€šè¿‡ <code>plain</code> å±æ€§å°†æŒ‰é’®è®¾ç½®ä¸ºæœ´ç´ æŒ‰é’®ã€‚è°ƒç ”äº† antd å’Œ react-native-elements å‘ç°å®ƒä»¬éƒ½æ˜¯å®šä¹‰äº†å¾ˆå¤šæ ·å¼ï¼Œç„¶ååœ¨ç»„ä»¶å†…é€šè¿‡é€»è¾‘åˆ¤æ–­è®¡ç®—å…·ä½“æ ·å¼çš„å€¼ã€‚ä¸ªäººå¾ˆä¸å–œæ¬¢è¿™ç§æ–¹å¼ï¼Œä¸æ˜¯å½»åº•çš„ CSS in JSï¼Œæˆ‘çš„å¤„ç†æ–¹å¼æ˜¯å°†æ‰€æœ‰æœ‰å…³æ ·å¼è®¡ç®—çš„éƒ½å°è£…åœ¨æ¯ä¸ªç»„ä»¶çš„ <code>useStyle</code> é’©å­ä¸­ï¼Œæ¯”å¦‚å½“å¼•å…¥æœ´ç´ æŒ‰é’®å±æ€§æ—¶ï¼Œç›¸å¯¹äºæ™®é€šæŒ‰é’®æ”¹å˜çš„æœ‰å®¹å™¨èƒŒæ™¯è‰²ã€å®¹å™¨è¾¹æ¡†å’Œå­—ä½“é¢œè‰²ã€‚æ‰€ä»¥æˆ‘ä»¬å°†è¿™ä¸‰ä¸ªå±æ€§çš„å€¼éƒ½é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°è®¡ç®—ã€‚å¯¹æ¯” antd çš„æºç ï¼Œä¼šå‘ç°ä¸ä»…ä»£ç æ›´æ˜“è¯»ï¼Œç”šè‡³ä»£ç é‡ä¹Ÿå°‘äº†ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getBackgroundColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">plain</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getTextColor</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">plain</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (props.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;primary&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;success-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;info&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;primary-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;warning&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;warning-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;danger&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;danger-color&#x27;</span>];</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;gray-3&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (props.<span class="property">type</span> === <span class="string">&#x27;default&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0fc1bedf56fe4dd0a31e6d18b048665c~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="ç»†è¾¹æ¡†"><a href="#ç»†è¾¹æ¡†" class="headerlink" title="ç»†è¾¹æ¡†"></a>ç»†è¾¹æ¡†</h3><p>vant å®ç°ç»†è¾¹æ¡†æ˜¯é€šè¿‡è®¾ç½® <code>hairline</code> å±æ€§å¯ä»¥å±•ç¤º 0.5px çš„ç»†è¾¹æ¡†ã€‚ä½†æ˜¯æ‰‹æœºä¸Šç”±äºåˆ†è¾¨ç‡çš„å½±å“ï¼Œè´¸ç„¶è®¾ç½® 0.5 ä¼šå¯¼è‡´è¾¹æ¡†ä¸æ˜¾ç¤ºçš„å…¼å®¹é—®é¢˜ã€‚å¥½åœ¨ React Native ä¸ºæˆ‘ä»¬æä¾›äº† <code>StyleSheet.hairlineWidth</code> å¸¸é‡æ¥å…¼å®¹æœ€ç»†è¾¹æ¡†é—®é¢˜ï¼Œä¸‹é¢æ˜¯å®˜æ–¹å¯¹å®ƒçš„å®šä¹‰ï¼š</p><blockquote><p>hairlineWidth è¿™ä¸€å¸¸é‡å§‹ç»ˆæ˜¯ä¸€ä¸ªæ•´æ•°çš„åƒç´ å€¼ï¼ˆçº¿çœ‹èµ·æ¥ä¼šåƒå¤´å‘ä¸ä¸€æ ·ç»†ï¼‰ï¼Œå¹¶ä¼šå°½é‡ç¬¦åˆå½“å‰å¹³å°æœ€ç»†çš„çº¿çš„æ ‡å‡†ã€‚å¯ä»¥ç”¨ä½œè¾¹æ¡†æˆ–æ˜¯ä¸¤ä¸ªå…ƒç´ é—´çš„åˆ†éš”çº¿ã€‚ç„¶è€Œï¼Œä½ ä¸èƒ½æŠŠå®ƒâ€œè§†ä¸ºä¸€ä¸ªå¸¸é‡â€ï¼Œå› ä¸ºä¸åŒçš„å¹³å°å’Œä¸åŒçš„å±å¹•åƒç´ å¯†åº¦ä¼šå¯¼è‡´ä¸åŒçš„ç»“æœã€‚</p><p>å¦‚æœæ¨¡æ‹Ÿå™¨ç¼©æ”¾è¿‡ï¼Œå¯èƒ½ä¼šçœ‹ä¸åˆ°è¿™ä¹ˆç»†çš„çº¿ã€‚</p></blockquote><p>ç”±äº <code>hairline</code> åªå½±å“äº†å®¹å™¨ <code>borderWidth</code> å±æ€§ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç¼–å†™å•ç‹¬çš„æ ·å¼è®¡ç®—å‡½æ•°ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">borderWidth</span>: props.<span class="property">hairline</span> ? theme[<span class="string">&#x27;border-width-hairline&#x27;</span>] : theme[<span class="string">&#x27;border-width-base&#x27;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43d80d537b07487d9043d718e6541f7e~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="ç¦ç”¨çŠ¶æ€"><a href="#ç¦ç”¨çŠ¶æ€" class="headerlink" title="ç¦ç”¨çŠ¶æ€"></a>ç¦ç”¨çŠ¶æ€</h3><p>è¡¨å•å…ƒç´ æˆ–è€…è¯´å¯è§¦æ‘¸å¯ç‚¹å‡»çš„å…ƒç´ ä¸€èˆ¬éƒ½æœ‰ç¦ç”¨çŠ¶æ€ï¼Œvant ä¸­æ˜¯é€šè¿‡ disabled å±æ€§æ¥ç¦ç”¨æŒ‰é’®ï¼Œç¦ç”¨çŠ¶æ€ä¸‹æŒ‰é’®ä¸å¯ç‚¹å‡»ã€‚TouchableHighlight ç»§æ‰¿åœ°æœ‰ <code>disabled</code> å±æ€§ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®ä¸€äº›ç¦ç”¨çŠ¶æ€ä¸‹çš„æŒ‰é’®æ ·å¼å°±å¯ä»¥ï¼ŒæŸ¥çœ‹ vant æºç æˆ‘ä»¬å‘ç°åªéœ€è¦ä¿®æ”¹é€æ˜åº¦ä¸º 0.5 å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">opacity</span>: props.<span class="property">disabled</span> ? <span class="number">0.5</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/892589086d07426a8346319d8466bccf~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="åŠ è½½çŠ¶æ€"><a href="#åŠ è½½çŠ¶æ€" class="headerlink" title="åŠ è½½çŠ¶æ€"></a>åŠ è½½çŠ¶æ€</h3><p>vant æ˜¯é€šè¿‡ <code>loading</code> å±æ€§è®¾ç½®æŒ‰é’®ä¸ºåŠ è½½çŠ¶æ€ï¼ŒåŠ è½½çŠ¶æ€ä¸‹é»˜è®¤ä¼šéšè—æŒ‰é’®æ–‡å­—ï¼Œå¯ä»¥é€šè¿‡ <code>loading-text</code> è®¾ç½®åŠ è½½çŠ¶æ€ä¸‹çš„æ–‡å­—ã€‚æˆ‘ä»¬å€ŸåŠ© React Native çš„ ActivityIndicator ç»„ä»¶å¯ä»¥è½»æ¾å®ç°è¿™ä¸ªç‰¹æ€§ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">&lt;<span class="title class_">TouchableHighlight</span> &#123;...restProps&#125;&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.contentWrapper&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;props.loading ? (</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ActivityIndicator</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">color</span>=<span class="string">&#123;indicatorColor&#125;</span> <span class="attr">style</span>=<span class="string">&#123;styles.indicator&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;props.loadingText ? <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;styles.textStyle&#125;</span>&gt;</span>&#123;props.loadingText&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span> : null&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    ) : <span class="literal">null</span>&#125;</span><br><span class="line">  &lt;/<span class="title class_">View</span>&gt;</span><br><span class="line">&lt;/<span class="title class_">TouchableHighlight</span>&gt;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>æ ·å¼å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useIndicatorColor = (<span class="attr">props</span>: <span class="title class_">ButtonProps</span>): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> theme = useTheme&lt;<span class="title class_">Theme</span>&gt;();</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">plain</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (props.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;primary&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;success-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;info&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;primary-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;warning&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;warning-color&#x27;</span>];</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;danger&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> theme[<span class="string">&#x27;danger-color&#x27;</span>];</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (props.<span class="property">type</span> === <span class="string">&#x27;default&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">black</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> theme.<span class="property">white</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27c4340df2254245a3c830bf667a2e28~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æŒ‰é’®å½¢çŠ¶"><a href="#æŒ‰é’®å½¢çŠ¶" class="headerlink" title="æŒ‰é’®å½¢çŠ¶"></a>æŒ‰é’®å½¢çŠ¶</h3><p>é»˜è®¤çš„æŒ‰é’®æœ‰å€¼ä¸º 2 çš„åœ†è§’ï¼Œvant ä¸­é€šè¿‡ <code>square</code> è®¾ç½®æ–¹å½¢æŒ‰é’®ï¼Œé€šè¿‡ <code>round</code> è®¾ç½®åœ†å½¢æŒ‰é’®ã€‚æŒ‰ä¾‹ï¼Œæˆ‘ä»¬é€šè¿‡åˆ¤æ–­è®¾ç½®æ ·å¼ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getBorderRadius</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">round</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-max&#x27;</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">square</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> theme[<span class="string">&#x27;border-radius-sm&#x27;</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="attr">borderColor</span>: <span class="title function_">getBorderColor</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">wrapper</span>: &#123;</span><br><span class="line">    <span class="attr">borderRadius</span>: <span class="title function_">getBorderRadius</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1402517566e49d1a1920fd9b3f7bb20~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æŒ‰é’®å°ºå¯¸"><a href="#æŒ‰é’®å°ºå¯¸" class="headerlink" title="æŒ‰é’®å°ºå¯¸"></a>æŒ‰é’®å°ºå¯¸</h3><p>Antd RN åªæä¾›äº† largeã€small ä¸¤ä¸ªå°ºå¯¸ï¼Œè€Œåœ¨ vant ä¸­æ”¯æŒ largeã€normalã€smallã€mini å››ç§å°ºå¯¸ï¼Œé»˜è®¤ä¸º normalã€‚è™½ç„¶å†™åˆ°è¿™é‡Œå·²ç»å¾ˆç–²å€¦äº†ï¼Œæ¨æç”˜éœ²ä¹Ÿæ—©å–å®Œäº†ï¼Œä½†æ˜¯ä¸ºäº†å®Œæ•´å¤åŸï¼Œè¿˜æ˜¯ç»­ä¸Šä¸€æ¯å’–å•¡ç»§ç»­è‚ã€‚æ ¹æ® vant è®¾è®¡ç¨¿æˆ‘ä»¬æ–°å¢ä¸‰ä¸ªæ ·å¼è·å–å‡½æ•°å¹¶åŠ¨æ€åŒ–æŒ‡å®šæ ·å¼ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getSizeHeight</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (props.<span class="property">size</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;large&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">50</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;small&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">32</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;mini&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">24</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">44</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getSizePadding</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (props.<span class="property">size</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;small&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;mini&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">15</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getSizeFontSize</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">switch</span> (props.<span class="property">size</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;large&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;small&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;mini&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">14</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">    <span class="attr">paddingHorizontal</span>: <span class="title function_">getSizePadding</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">textStyle</span>: &#123;</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="title function_">getSizeFontSize</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">wrapper</span>: &#123;</span><br><span class="line">    <span class="attr">height</span>: <span class="title function_">getSizeHeight</span>(),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/59c01002f25b477d85ed26fa1e21c86b~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="è‡ªå®šä¹‰é¢œè‰²"><a href="#è‡ªå®šä¹‰é¢œè‰²" class="headerlink" title="è‡ªå®šä¹‰é¢œè‰²"></a>è‡ªå®šä¹‰é¢œè‰²</h3><p>å¦‚æœä¸æ˜¯è‡ªå·±äº²è‡ªå¤åˆ» Vantï¼Œæ˜¯æ²¡æƒ³åˆ°ä¸€ä¸ª Button èƒ½ç©å‡ºè¿™ä¹ˆå¤šèŠ±ï¼Œæ”¯æŒç‰¹æ€§è¿™ä¹ˆå¤šè€å¿ƒå’Œä»£ç ç®¡ç†éƒ½æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚å½“ç„¶äº†ï¼Œæ´›ç«¹é‡‡å–çš„æ ·å¼ç®¡ç†æ–¹å¼æ¯”è¾ƒåæ¿€ï¼Œå¤§å®¶æœ‰å¥½çš„æ–¹å¼ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</p><p>é€šè¿‡ <code>color</code> å±æ€§è‡ªå®šä¹‰æŒ‰é’®çš„é¢œè‰²ã€‚æˆ‘ä»¬å¯ä»¥å¾—å‡ºéœ€æ±‚ï¼Œä¸ç®¡ type æ˜¯ä»€ä¹ˆï¼Œ<code>color</code> å±æ€§éœ€å§‹ç»ˆè¦†ç›–åŸæœ‰æ ·å¼ï¼Œcolor èƒ½å½±å“çš„å°±æ˜¯èƒŒæ™¯è‰²ã€å­—ä½“é¢œè‰²å’Œè¾¹æ¡†é¢œè‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ <code>getBackgroundColor</code>ã€<code>getTextColor</code>ã€<code>getBorderColor</code> æ ·å¼å‡½æ•°åœ¨åˆé€‚çš„åœ°æ–¹åŠ ä¸Šä»¥ä¸‹ä»£ç å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (props.<span class="property">color</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> props.<span class="property">color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8efffdbfd6424618be6152895a53e8ee~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="åŒå‡»äº‹ä»¶çš„å®ç°"><a href="#åŒå‡»äº‹ä»¶çš„å®ç°" class="headerlink" title="åŒå‡»äº‹ä»¶çš„å®ç°"></a>åŒå‡»äº‹ä»¶çš„å®ç°</h2><p>æˆ‘ä»¬ä» React Native å†…ç½®çš„ TouchableHighlight ç»„ä»¶ç»§æ‰¿äº†å¾ˆå¤šäº‹ä»¶ï¼Œå…¶ä¸­ onPressã€onLongPress åˆ†åˆ«ä»£è¡¨å•å‡»å’Œé•¿æŒ‰ã€‚ä½†å”¯ç‹¬â€œåŒå‡» 666â€çš„åŒå‡»äº‹ä»¶æ²¡æœ‰å§“åã€‚ä¹‹å‰åœ¨å®é™…ä¸šåŠ¡æ›¾ç»å°è£…è¿‡åŒå‡»äº‹ä»¶ï¼Œè¿™æ¬¡æˆ‘ä»¬å°±ç›´æ¥å°±å†…ç½®äº†ã€‚</p><p>å®ç°æ€è·¯æ˜¯å»¶æ—¶æ‰§è¡Œå•å‡»äº‹ä»¶ï¼ˆé»˜è®¤ 200 æ¯«ç§’ï¼‰ï¼Œç„¶åè®°å½•ç‚¹å‡»æ¬¡æ•°å’Œä¸¤æ¬¡æ—¶é—´é—´éš”ï¼Œå½“è¯†åˆ«ä¸ºç¬¬äºŒæ¬¡ç‚¹å‡»ä¸”æ—¶é—´é—´éš”å°äºå•å‡»å»¶æ—¶æ—¶é—´ã€‚é‚£ä¹ˆå°±å–æ¶ˆå•å‡»äº‹ä»¶å»¶æ—¶ï¼Œå¹¶ç«‹å³æ‰§è¡ŒåŒå‡»äº‹ä»¶ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> lastTime = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> clickCount = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> timeout = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">_onPress</span> = (<span class="params">event: GestureResponderEvent</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">  <span class="keyword">if</span> (timeout) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">  &#125;</span><br><span class="line">  timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    props.<span class="title function_">onPress</span>(event);</span><br><span class="line">    clickCount = <span class="number">1</span>;</span><br><span class="line">    lastTime = <span class="number">0</span>;</span><br><span class="line">  &#125;, props.<span class="property">delayDoublePress</span>);</span><br><span class="line">  <span class="keyword">if</span> (clickCount === <span class="number">2</span> &amp;&amp; now - lastTime &lt;= props.<span class="property">delayDoublePress</span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">    clickCount = <span class="number">1</span>;</span><br><span class="line">    lastTime = <span class="number">0</span>;</span><br><span class="line">    props.<span class="title function_">onDoublePress</span>(event);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    clickCount++;</span><br><span class="line">    lastTime = now;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¤§å®¶ä¼šå‘ç°è¿™é‡Œçš„å®ç°ç³…åˆäº†å‡½æ•°é˜²æŠ–ã€èŠ‚æµä»¥åŠè®¡æ•°å™¨çš„åŸç†ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œå¤ä¹ ä¸‹åŸç†ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚</p><h2 id="API-æ–‡æ¡£"><a href="#API-æ–‡æ¡£" class="headerlink" title="API æ–‡æ¡£"></a>API æ–‡æ¡£</h2><p>ä¸€ä¸ªç»„ä»¶çš„æ–‡æ¡£ï¼Œé™¤äº† Demoï¼Œè¿˜éœ€è¦å±•ç¤ºå‡ºæ¥å¯ç”¨çš„ Propsï¼ŒDumi å†…ç½®çš„ <code>&lt;API&gt;&lt;/API&gt;</code> ç»„ä»¶å¯ä»¥æ ¹æ®ç»„ä»¶è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£ã€‚é¦–å…ˆæˆ‘ä»¬åƒä¸‹é¢ä¸€æ ·ç¼–å†™ Props æ³¨é‡Šï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ButtonProps</span> <span class="keyword">extends</span> <span class="title class_">TouchableHighlightProps</span> &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>       Can be set to primaryã€infoã€warningã€danger</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>.zh-CN ç±»å‹ï¼Œå¯é€‰å€¼ä¸º primaryã€infoã€warningã€danger</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">type</span>?: <span class="string">&#x27;default&#x27;</span> | <span class="string">&#x27;primary&#x27;</span> | <span class="string">&#x27;info&#x27;</span> | <span class="string">&#x27;warning&#x27;</span> | <span class="string">&#x27;danger&#x27;</span>;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>       Can be set to largeã€smallã€mini</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>.zh-CN å°ºå¯¸ï¼Œå¯é€‰å€¼ä¸º</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  size?: <span class="string">&#x27;large&#x27;</span> | <span class="string">&#x27;normal&#x27;</span> | <span class="string">&#x27;small&#x27;</span> | <span class="string">&#x27;mini&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ Markdown ä¸­å¼•å…¥ API ç»„ä»¶å³å¯ï¼š</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">API</span> <span class="attr">src</span>=<span class="string">&quot;./index.tsx&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">API</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>å†…ç½®ç»„ä»¶ API æ²¡æœ‰å¤„ç†ç»§æ‰¿çš„æƒ…å†µï¼Œæˆ‘ä»¬åç»­ä¼šè‡ªå®šä¹‰ä¸€ä¸ª API ç»„ä»¶ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œæµè§ˆ <a href="https://vant-react-native.js.org/components/button#api">Button æ–‡æ¡£</a> å¯ä»¥æŸ¥çœ‹ç°åœ¨çš„æ•ˆæœï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7bedac7240334ff79c4142005a66b158~tplv-k3u1fbpfcp-watermark.image"></p><h2 id="å·¥ç¨‹åŒ–ä¸²è®²"><a href="#å·¥ç¨‹åŒ–ä¸²è®²" class="headerlink" title="å·¥ç¨‹åŒ–ä¸²è®²"></a>å·¥ç¨‹åŒ–ä¸²è®²</h2><p>ç”±äºå¾ˆéš¾åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å°†ç»„ä»¶å¼€å‘ç›¸å…³çš„å·¥ç¨‹åŒ–è®²å®Œï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ç¯‡å®æˆ˜ä¸­ä¸²è®²ä¸€ä¸‹ã€‚</p><h3 id="ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶"><a href="#ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶" class="headerlink" title="ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶"></a>ç»„ä»¶åˆ›å»ºè„šæ‰‹æ¶</h3><blockquote><p>å°é»‘ï¼šæ´›ç«¹ï¼Œ<code>lerna create</code> å‘½ä»¤åˆ›å»ºå‡ºæ¥çš„æ¨¡å—å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œä»¥åè¦åˆ›å»ºå¾ˆå¤šå¾ˆå¤šç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªåˆ›å»ºç»„ä»¶æ¨¡å—çš„è„šæ‰‹æ¶å—ï¼Ÿ</p></blockquote><p>lerna ä½¿ç”¨èµ·æ¥æ˜¯æœ‰ä¸å°‘ç—›ç‚¹çš„ï¼Œ<code>lerna create</code> å‘½ä»¤æ²¡åŠæ³•æŒ‡å®šæ¨¡æ¿ï¼Œè€ƒè™‘åˆ°ä¹‹åçš„å‡ åä¸Šç™¾ä¸ªç»„ä»¶æ¯æ¬¡åˆ›å»ºéƒ½è¦è¿›è¡Œé¡¹ç›®ç»“æ„ã€Typescript é…ç½®ã€å•å…ƒæµ‹è¯•é…ç½®ã€Babel é…ç½®ç­‰ç­‰å·¥ä½œæ­¥éª¤ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å†™ä¸€ä¸ªè„šæ‰‹æ¶ã€‚</p><h4 id="æ¨¡æ¿è§£æ"><a href="#æ¨¡æ¿è§£æ" class="headerlink" title="æ¨¡æ¿è§£æ"></a>æ¨¡æ¿è§£æ</h4><p>è¯´åˆ°æ¨¡æ¿è§£æï¼Œç›¸ä¿¡å¤§å®¶å’Œæˆ‘ä¸€æ ·æƒ³åˆ°çš„æ˜¯ vue-cli çš„ template è§£æã€‚é€šè¿‡é˜…è¯» <a href="https://cdn.jsdelivr.net/npm/vue-cli@2.9.6/lib/generate.js">vue-cli@2.9.6 generate.js</a> æºç ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æå‡ºå°¤å¤§æ˜¯åŸºäº metalsmithã€handlebarsã€consolidate è¿™ä¸‰ä¸ªåŒ…æ¥å®ç°æ¨¡æ¿è§£æèƒ½åŠ›çš„ã€‚è®©äººä¸å®‰çš„æ˜¯å…¶ä¸­ metalsmith åº“æœ‰é•¿è¾¾ 5 å¹´æ²¡æœ‰ç»´æŠ¤äº†ï¼Œæ´›ç«¹æŒ‘é€‰å¼€æºé¡¹ç›®ä¸€èˆ¬å¯¹ç»´æŠ¤åº¦å¾ˆæ•æ„Ÿï¼Œæœ¬ç€è½®å­è¦ç”¨è‡ªå·±é€ çš„åŸåˆ™ï¼Œæˆ‘ç¿»çœ‹äº† Metalsmith çš„ Readme å‘ç°è¿™ä¸ªæ’ä»¶æ— éæ˜¯é€šè¿‡é€’å½’è¯»æ–‡ä»¶çš„æ–¹å¼æ¸²æŸ“æ¨¡æ¿ï¼Œå¹¶ä¸”å®ƒçš„é™æ€ç½‘ç«™ç”Ÿæˆçš„èƒ½åŠ›å¯¹æˆ‘ä»¬æ¨¡æ¿è§£æçš„éœ€æ±‚ä¹Ÿæ˜¯å¤šä½™çš„ã€‚</p><p>è¯´å¹²å°±å¹²ï¼Œåœ¨å’Œ <a href="https://juejin.cn/user/3175045313873943">@æ—å°å¸…</a> åŒå­¦ç®€å•æ²Ÿé€šåï¼Œæˆ‘åŠ¨æ‰‹é€ äº† <a href="https://github.com/youngjuning/handlebars-template-compiler">handlebars-template-compiler</a> è¿™ä¸ªè½®å­ï¼Œå…¶ä¸»è¦åŸç†å¦‚ä¸‹ï¼š</p><ol><li>ä½¿ç”¨ recursive-readdir é€’å½’è·å–æ‰€æœ‰æ–‡ä»¶è·¯å¾„</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> files = <span class="keyword">await</span> <span class="title function_">recursive</span>(rootDir);</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨ <code>handlebars.compile</code> æ–¹æ³•ä½¿ç”¨å…ƒæ•°æ®å¯¹æ¨¡æ¿è¿›è¡Œæ¸²æŸ“</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> content = fs.<span class="title function_">readFileSync</span>(file).<span class="title function_">toString</span>();</span><br><span class="line"><span class="keyword">const</span> result = handlebars.<span class="title function_">compile</span>(content)(meta);</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨ <code>fs.writeFileSync</code> API é‡å†™æ–‡ä»¶</li></ol><p>å¦å¤–ï¼Œé€šè¿‡å¼•å…¥ <a href="https://www.npmjs.com/package/micromatch">glob</a> æ¨¡å¼åŒ¹é…å®ç°äº† <code>exclude</code> é…ç½®ä»¥åŠåªå¤„ç†æŒ‡å®šåç¼€ï¼ˆé»˜è®¤ <code>**/*.tpl.*</code>ï¼‰çš„æ–‡ä»¶æ¥é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚ï¼ˆPSï¼šNPM ä¸€å‘¨æœ‰äº† 300 å¤šä¸‹è½½ï¼Œæœ‰éœ€è¦çš„æ˜å‹å€¼å¾—ä¸€è¯•ğŸ˜„ï¼‰</p><h4 id="Node-CLIï¼ˆ-vant-react-native-x2F-scriptsï¼‰æ­å»º"><a href="#Node-CLIï¼ˆ-vant-react-native-x2F-scriptsï¼‰æ­å»º" class="headerlink" title="Node CLIï¼ˆ@vant-react-native&#x2F;scriptsï¼‰æ­å»º"></a>Node CLIï¼ˆ@vant-react-native&#x2F;scriptsï¼‰æ­å»º</h4><p>è¿™é‡Œæ´›ç«¹å°è¯•ç”¨æœ€ç®€æ´çš„è¯­è¨€ä¸ºå¤§å®¶æè¿°ä¸€ä¸ªè„šæ‰‹æ¶çš„è¯ç”Ÿï¼Œæºç åœ¨ <a href="https://github.com/youngjuning/vant-react-native/tree/main/packages/scripts">packages&#x2F;scripts</a> ç›®å½•ä¸‹ï¼Œæ²¡æœ‰æ¥è§¦è¿‡ CLI çš„æ˜å‹è¯·ç›¸ä¿¡æˆ‘ï¼ŒNode CLI å¾ˆå®¹æ˜“ä¸Šæ‰‹çš„ã€‚æ¥è§¦è¿‡çš„åŒå­¦ä¹Ÿå¯ä»¥æŸ¥æ¼è¡¥ç¼ºå€Ÿé‰´ä¸€äºŒã€‚</p><ol><li><code>package.json</code> æ–‡ä»¶çš„ <code>bin</code> å­—æ®µæ˜¯æˆ‘ä»¬è„šæ‰‹æ¶çš„å…¥å£</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‡å®šå¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ä»¥åŠåˆ«å</span></span><br><span class="line"><span class="attr">&quot;bin&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;vant&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./bin/cli.js&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰ <code>./bin/cli.js</code> ä¸ºå¯æ‰§è¡Œæ–‡ä»¶å¹¶è°ƒç”¨ <code>init</code> æ–¹æ³•ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”±äºæˆ‘ä»¬çš„è„šæœ¬æ˜¯ Node ç¼–å†™çš„ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®š node æ‰€åœ¨ä½ç½®</span></span><br><span class="line">#!<span class="regexp">/usr/</span>bin/env node</span><br><span class="line"><span class="keyword">const</span> &#123; init &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../lib&#x27;</span>);</span><br><span class="line"><span class="comment">// è¿™ä¸ªåœ°æ–¹å‚è€ƒäº† create-react-native çš„è®¾è®¡</span></span><br><span class="line"><span class="comment">// æœ¬æ–‡ç‚¹èµè¿‡ 300ï¼Œä¸‹ä¸€ç¯‡æ´›ç«¹å¸¦å°é»‘ä¸ºå¤§å®¶å¸¦æ¥ã€ŠåŸºäº TypeScript é‡æ„ create-react-nativeã€‹</span></span><br><span class="line"><span class="title function_">init</span>();</span><br></pre></td></tr></table></figure><ol start="3"><li>ç„¶ååœ¨ <code>src/index.ts</code> ä¸­åˆå§‹åŒ– commander è¿™ä¸ªä¹…è´Ÿç››åçš„å‘½ä»¤è¡Œæ¡†æ¶</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> init = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> packageJson = <span class="built_in">require</span>(<span class="string">&#x27;../package.json&#x27;</span>);</span><br><span class="line">  program.<span class="title function_">version</span>(packageJson.<span class="property">version</span>).<span class="title function_">description</span>(packageJson.<span class="property">description</span>);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  program.<span class="title function_">parse</span>(process.<span class="property">argv</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="4"><li>ä¸ºäº†æ–¹ä¾¿ç®¡ç†å‘½ä»¤ï¼Œæˆ‘ä»¬å°†å‘½ä»¤éƒ½æ”¾ç½®åœ¨ <code>src/commands</code> ç›®å½•ä¸‹å¹¶é€šè¿‡ <code>fs.readdirSync</code> API åŠ¨æ€æ‰«ææ³¨å†Œã€‚</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> init = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™æ®µä»£ç å€Ÿé‰´è‡ª NeteaseCloudMusicApi é¡¹ç›®ï¼Œä½œè€…çš„ä»£ç å¾ˆæœ‰è®¾è®¡æ„Ÿï¼Œæ¨èé˜…è¯»ã€‚</span></span><br><span class="line">  fs.<span class="title function_">readdirSync</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;commands&#x27;</span>)).<span class="title function_">forEach</span>(<span class="function">(<span class="params">file: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!file.<span class="title function_">endsWith</span>(<span class="string">&#x27;.js&#x27;</span>)) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">require</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;commands&#x27;</span>, file));</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="5"><li>æœ€ååœ¨ <code>commands</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>create.ts</code> æ–‡ä»¶ç¼–å†™å‘½ä»¤</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; program &#125; <span class="keyword">from</span> <span class="string">&#x27;commander&#x27;</span>;</span><br><span class="line">program</span><br><span class="line">  .<span class="title function_">command</span>(<span class="string">&#x27;create &lt;name&gt; [loc]&#x27;</span>)</span><br><span class="line">  .<span class="title function_">description</span>(<span class="string">&#x27;Create a new vant-react-native package&#x27;</span>)</span><br><span class="line">  .<span class="title function_">action</span>(<span class="function">(<span class="params">name,loc</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello Luozhu&#x27;</span>);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h4 id="è„šæ‰‹æ¶å®ç°"><a href="#è„šæ‰‹æ¶å®ç°" class="headerlink" title="è„šæ‰‹æ¶å®ç°"></a>è„šæ‰‹æ¶å®ç°</h4><p>ä¸Šä¸€å°ç»“ï¼Œæˆ‘ä»¬åˆå§‹åŒ–äº† CLI å¹¶æ·»åŠ äº† <code>create</code> å‘½ä»¤ï¼Œè¿™ä¸€å°èŠ‚æˆ‘ä»¬å°±æ¥å®ç°ä¸€ä¸‹è„šæ‰‹æ¶åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆåœ¨ <code>packages/scripts</code> ç›®å½•ä¸‹åˆ›å»ºç»„ä»¶æ¨¡æ¿</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.tpl.md <span class="comment"># tpl åç¼€åœ¨ç”Ÿæˆç»„ä»¶æ¨¡æ¿çš„æ—¶å€™ä¼šè¢« handlebars-template-compiler è‡ªåŠ¨å»æ‰ã€‚</span></span><br><span class="line">â”œâ”€â”€ package.tpl.json</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â””â”€â”€ index.ts <span class="comment"># æ²¡æœ‰ tpl åç¼€åˆ™ä¸ä¼šè¢«ç¼–è¯‘ï¼Œæ¨¡æ¿å¾ˆå¤§æ—¶å¯ä»¥èŠ‚çœæ—¶é—´ã€‚</span></span><br><span class="line">â””â”€â”€ tsconfig.json</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬æ˜ç¡®æˆ‘ä»¬çš„æ¨¡æ¿å…ƒæ•°æ®çš„æ•°æ®ç»“æ„ï¼Œæˆ‘è¿™é‡Œçš„æ•°æ®ç»“æ„æ˜¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IMeta</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">version</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">description</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">author</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">email</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">url</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">directory</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ inquirer æ¨¡å—å¼•å¯¼ç”¨æˆ·è¾“å…¥ä¿¡æ¯ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> inquirer <span class="keyword">from</span> <span class="string">&#x27;inquirer&#x27;</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// getQuestions è¿‡é•¿ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹ï¼šhttp://tny.im/UFbg</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">answer</span>: <span class="title class_">IMeta</span> = <span class="keyword">await</span> inquirer.<span class="title function_">prompt</span>(<span class="title function_">getQuestions</span>(name));</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>tmp-promise</code> æ¨¡å—åˆ›å»ºä¸€ä¸ªç³»ç»Ÿä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå¹¶å°†å‰æ–‡æåˆ°çš„ template æ–‡ä»¶å¤¹çš„å†…å®¹æ‹·è´è¿›å»ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tmp <span class="keyword">from</span> <span class="string">&#x27;tmp-promise&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs-extra&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">const</span> tmpdir = <span class="keyword">await</span> tmp.<span class="title function_">dir</span>(&#123; <span class="attr">unsafeCleanup</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">fs.<span class="title function_">copySync</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;../../template&#x27;</span>), tmpdir.<span class="property">path</span>);</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæˆ‘ä»¬å¯¹ä¸´æ—¶æ–‡ä»¶å¤¹çš„å†…å®¹è¿›è¡Œç¼–è¯‘å†æ‹·è´åˆ°æŒ‡å®šä½ç½®å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> htc <span class="keyword">from</span> <span class="string">&#x27;handlebars-template-compiler&#x27;</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">await</span> htc&lt;<span class="title class_">IMeta</span>&gt;(answer, tmpdir.<span class="property">path</span>);</span><br><span class="line">fs.<span class="title function_">copySync</span>(tmpdir.<span class="property">path</span>, <span class="string">`<span class="subst">$&#123;process.cwd()&#125;</span>/packages/<span class="subst">$&#123;locPath&#125;</span>`</span>);</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>æŠ˜è…¾è¿™ä¸€é¡¿ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸‹æˆæœå§ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ba477bcbd8b4ef6b880c7e8e5a095bc~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="Github-CODEOWENERS"><a href="#Github-CODEOWENERS" class="headerlink" title="Github CODEOWENERS"></a>Github CODEOWENERS</h3><p>å¤§å‹çš„å¼€æºé¡¹ç›®æœ€éš¾çš„ä¸æ˜¯æŠ€æœ¯é—®é¢˜ï¼ŒæŠ€æœ¯å¤§å’–æ°¸è¿œä¸ä¼šç¼ºã€‚æœ€éš¾çš„å…¶å®æ˜¯åä½œå’ŒåæœŸç»´æŠ¤ã€‚è¯•æƒ³ä¸€ä¸‹ä¸€ä¸ªæˆç™¾ä¸Šåƒäººå‚ä¸çš„é¡¹ç›®å½“æœ‰æ–°çš„ pr æ—¶ï¼Œæ­£å¸¸äººæ ¹æœ¬æ— åŠ›å»å¿«é€Ÿæ£€ç´¢å‡ºéœ€è¦è°å» review ä»£ç ã€‚æˆ‘ä»¬çš„ vant-react-native ç”±äºæ˜¯å°†æ¯ä¸ªç»„ä»¶å•ç‹¬å‘åŒ…ç»´æŠ¤ï¼Œå½“å‚ä¸çš„å°ä¼™ä¼´å¤šäº†ä¹Ÿä¼šäº§ç”Ÿè¿™ä¸ªå›°æ‰°ã€‚</p><p>è€Œ GitHub CODEOWNERSï¼ˆä»£ç æ‰€æœ‰è€…ï¼‰å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œåœ¨ 5000+ è´¡çŒ®è€…å‚ä¸çš„ <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a> é¡¹ç›®ä¸­æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å®ƒçš„èº«å½±ã€‚å®˜æ–¹å¯¹ä»£ç æ‰€æœ‰è€…å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>ä½ å¯ä»¥ä½¿ç”¨ CODEOWNERS æ–‡ä»¶å®šä¹‰è´Ÿè´£ä»“åº“ä»£ç çš„ä¸ªäººæˆ–å›¢é˜Ÿã€‚å½“æœ‰äººä¿®æ”¹ä»£ç å¹¶æ‰“å¼€ä¸€ä¸ª pull request æ—¶ï¼Œå°†è‡ªåŠ¨è¯·æ±‚ä»£ç æ‰€æœ‰è€…è¿›è¡Œå®¡æŸ¥ã€‚</p></blockquote><p>CODEOWNERS æ–‡ä»¶ä½¿ç”¨éµå¾ª gitignore æ–‡ä»¶ä¸­æ‰€ç”¨å¤§å¤šæ•°è§„åˆ™çš„æ¨¡å¼ï¼ŒCODEOWNERS æ–‡ä»¶ä½ç½®ä¸€èˆ¬ä½äº <code>.github/</code> ç›®å½•ä¸‹ã€‚</p><p>åœ¨ vant-react-nativeï¼Œæ´›ç«¹æ˜¯ä»“åº“çš„æœ€ç»ˆè´Ÿè´£äººï¼Œæ‰€ä»¥æ˜¯æœŸæœ›æ¯ä¸ª pr éƒ½å¯ä»¥åˆ†é…ç»™è‡ªå·±å®¡æŸ¥ä¸€ä¸‹çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬è¿™å°±æ¥å®éªŒä¸€ä¸‹å§ï¼Œæ–°å»ºä¸€ä¸ª <code>.github/CODEOWNERS</code> æ–‡ä»¶å¹¶å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># This is a comment.</span><br><span class="line"># Each line is a file pattern followed by one or more owners.</span><br><span class="line"></span><br><span class="line"># These owners will be the default owners for everything in</span><br><span class="line"># the repo. Unless a later match takes precedence,</span><br><span class="line"># @youngjuning will be requested for review when someone opens a pull request.</span><br><span class="line">*       @youngjuning</span><br><span class="line"></span><br><span class="line"># In this example, @doctocat owns any files in the build/logs</span><br><span class="line"># directory at the root of the repository and any of its</span><br><span class="line"># subdirectories.</span><br><span class="line">/packages/ @luozhu1994</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬å¦‚æœæ–‡ä»¶å…·æœ‰ä»£ç æ‰€æœ‰è€…ï¼Œåˆ™åœ¨æ‰“å¼€æ‹‰å–è¯·æ±‚ä¹‹å‰å¯ä»¥çœ‹åˆ°ä»£ç æ‰€æœ‰è€…æ˜¯è°ã€‚åœ¨ä»“åº“ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°æ–‡ä»¶å¹¶æ‚¬åœäºä¸€ä¸ªé”å›¾æ ‡ä¸Šï¼Œæ‚¬æµ®ä¹‹åä¼šå‘Šè¯‰ä½ è¯¥æ–‡ä»¶æ‰€æœ‰è€…æ˜¯è°ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/726bd5144a104902ae27ad31e1d46f93~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç„¶åæˆ‘ä»¬æäº¤ä¸€ä¸ª pr çœ‹çœ‹æ•ˆæœï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf4cb8b7ef5c41989660e735e621fc4e~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="NPM-å‘åŒ…è‡ªåŠ¨åŒ–"><a href="#NPM-å‘åŒ…è‡ªåŠ¨åŒ–" class="headerlink" title="NPM å‘åŒ…è‡ªåŠ¨åŒ–"></a>NPM å‘åŒ…è‡ªåŠ¨åŒ–</h3><p>å‘åŒ…æƒé™ä¸€èˆ¬åªæœ‰ä»“åº“æ‰€æœ‰è€…ä¸€ä¸ªäººæ‹¥æœ‰ï¼Œä½†æ˜¯ owner åŒæ—¶ç»´æŠ¤å¥½å‡ ä¸ª NPM è´¦å·ï¼Œæˆ–è€…æ˜¯ owner å¿½ç„¶å¾ˆå¿™å°†å‘å¸ƒæƒé™äº¤ç»™å…¶ä»–äººç®¡ç†å‘˜ä½†æ˜¯ä¸ä¾¿å‘ŠçŸ¥ NPM è´¦å·è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿç­”æ¡ˆæ˜¯å°† NPM å‘åŒ… CDï¼ˆæŒç»­éƒ¨ç½²ï¼‰åŒ–ï¼Œå…¬å¸ä¸€èˆ¬ä¼šåŸºäº Gitlab æˆ–è‡ªå»ºå¹³å°å®ç°è¯¥åŠŸèƒ½ã€‚ä½œä¸ºå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬å½“ç„¶æ˜¯ä½¿ç”¨ GitHub Actionã€‚</p><p>æ­£å¸¸çš„å•åŒ…é¡¹ç›®ï¼Œä½¿ç”¨ <a href="https://github.com/JS-DevTools/npm-publish">npm-publish</a> æˆ– <a href="https://github.com/pascalgn/npm-publish-action">npm-publish-action</a> è¿™ä¸¤ä¸ª GitHub Actionï¼Œè¿™å¹¶æ²¡æœ‰å¥½è®²çš„ã€‚ä½†æ˜¯åŸºäº lerna çš„å¤šåŒ…å•ä½“ä»“åº“å¹¶æ²¡æœ‰ç°æˆçš„æ’ä»¶å¯ä»¥ç”¨ï¼Œç…§ä¾‹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹è‡ªå·±å®ç°çš„æ­¥éª¤ï¼š</p><ol><li>åˆ¤æ–­ commit message æ˜¯å¦ä»¥ <code>chore(release):</code> å¼€å¤´<blockquote><p>é€šè¿‡ GitHub Action <code>startsWith(github.event.head_commit.message, &#39;chore(release):&#39;)</code> å®ç°</p></blockquote></li><li>é€šè¿‡ NPM publish token è®¤è¯ç™»å½•<blockquote><p>é€šè¿‡ <code>npm config set //registry.npmjs.org/:_authToken=$&#123;&#123; secrets.NPM_TOKEN &#125;&#125;</code> è®¤è¯</p></blockquote></li><li>æ‰§è¡Œ <code>lerna publish from-package --yes</code> å‘å¸ƒ<blockquote><p>éœ€è¦æœ¬åœ°å…ˆæ‰§è¡Œ <code>lerna version</code> ç³»åˆ—å‘½ä»¤æå‡ç‰ˆæœ¬</p></blockquote></li></ol><p>å®Œæ•´ GitHub Action å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">npm-publish</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">npm-publish:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">startsWith(github.event.head_commit.message,</span> <span class="string">&#x27;chore(release):&#x27;</span><span class="string">)</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">c-hive/gha-yarn-cache@v2</span> <span class="comment"># ç¼“å­˜ node_modules åŠ å¿«æ„å»ºé€Ÿåº¦</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Packages</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">yarn</span> <span class="string">install</span> <span class="string">--registry=https://registry.npmjs.org/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Authenticate</span> <span class="string">with</span> <span class="string">Registry</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npm config set //registry.npmjs.org/:_authToken=$&#123;NPM_TOKEN&#125;</span></span><br><span class="line"><span class="string"></span>        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">NPM_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.NPM_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Publish</span> <span class="string">package</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">lerna</span> <span class="string">publish</span> <span class="string">from-package</span> <span class="string">--yes</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†åœ¨å‘å¸ƒååŠæ—¶è·å–é€šçŸ¥ï¼Œæ´›ç«¹ä½¿ç”¨äº† <code>peter-evans/commit-comment</code> æ’ä»¶åœ¨å‘å¸ƒå¤±è´¥æˆ–æˆåŠŸåå¯¹ç›¸åº” commit è¿›è¡Œè¯„è®ºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ”¶åˆ°é‚®ä»¶å’Œç«™å†…é€šçŸ¥ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Create</span> <span class="string">commit</span> <span class="string">comment</span> <span class="string">after</span> <span class="string">publish</span> <span class="string">successfully</span></span><br><span class="line">  <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">success()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">peter-evans/commit-comment@v1</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      Hello Dear @youngjuning. This commit has been publish to NPM successfully.</span></span><br><span class="line"><span class="string">      &gt; Created by [commit-comment][1]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      [<span class="number">1</span>]<span class="string">:</span> <span class="string">https://github.com/peter-evans/commit-comment</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Create</span> <span class="string">commit</span> <span class="string">comment</span> <span class="string">after</span> <span class="string">publish</span> <span class="string">unsuccessfully</span></span><br><span class="line">  <span class="attr">if:</span> <span class="string">$&#123;&#123;</span> <span class="string">failure()</span> <span class="string">&#125;&#125;</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">peter-evans/commit-comment@v1</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">body:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      Hello Dear @youngjuning. This commit has been publish to NPM unsuccessfully.</span></span><br><span class="line"><span class="string">      &gt; Created by [commit-comment][1]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      [<span class="number">1</span>]<span class="string">:</span> <span class="string">https://github.com/peter-evans/commit-comment</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;âš ï¸æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯&lt;a href=&quot;https://youngjuning.js.org/&quot;&gt;æ´›ç«¹ğŸ‹&lt;/a&gt;ï¼Œä¸€åªä½åœ¨æ­åŸçš„æœ¨ç³»å‰ç«¯ï¿½</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ç»„ä»¶åŒ–" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    
    
    <category term="React Native" scheme="https://youngjuning.js.org/tags/React-Native/"/>
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ç»„ä»¶åŒ–" scheme="https://youngjuning.js.org/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    
    <category term="ç»„ä»¶åº“" scheme="https://youngjuning.js.org/tags/%E7%BB%84%E4%BB%B6%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>æ˜é‡‘ä¸€ä¸‹ | ä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•</title>
    <link href="https://youngjuning.js.org/609531a3ab52/"/>
    <id>https://youngjuning.js.org/609531a3ab52/</id>
    <published>2023-02-28T16:55:47.000Z</published>
    <updated>2023-03-13T01:05:01.406Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>âš ï¸æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½</p></blockquote><blockquote><p>æ¸©é¦¨æç¤ºï¼šç»“åˆæœ¬æ–‡é…å¥—<a href="https://github.com/youngjuning/juejin-me">æºç </a>é˜…è¯»ä½“éªŒæ›´ä½³ï¼</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å›¢é˜Ÿé™æœ¬ææ•ˆçš„åŸºå»ºä¸­ï¼Œæ´›ç«¹å¼€å‘äº†ä¸€æ¬¾ vscode æ’ä»¶ï¼Œç¬¬ä¸€ç‰ˆæˆ‘ä½¿ç”¨çš„æ˜¯ vscode å†…ç½® UIï¼Œè™½è¯´ä¹Ÿèƒ½ç”¨ï¼Œä½†æ˜¯ç”¨æˆ·ä½“éªŒæ¬ ä½³ã€‚ç”±äº vscode å†…ç½® UI ä¸å¤Ÿçµæ´»ï¼Œä¸€ç•ªè°ƒç ”åæˆ‘å†³å®šä½¿ç”¨ webview é‡æ„ã€‚</p><p>å¼€å‘è¿‡ vscode æ’ä»¶çš„åŒå­¦å¯èƒ½å¯¹æ’ä»¶å¼€å‘çŸ¥è¯†ç‚¹å¤šã€æ–‡æ¡£é˜…è¯»å›°éš¾ã€å‚è€ƒèµ„æ–™å°‘æœ‰æ‰€ä½“ä¼šã€‚åŸºäº webview å¼€å‘æ’ä»¶æ›´æ˜¯å¦‚æ­¤ï¼Œå¯»éç½‘ç»œï¼Œè™½ç„¶æœ‰ä¼˜ç§€çš„é¡¹ç›®ï¼Œä½†å´æ²¡æœ‰å®Œæ•´ä¸”ä¼˜ç§€çš„æ•™ç¨‹ã€‚ä¸ºäº†ä¿®ç‚¼ vscode å¼€å‘çµåŠ›ï¼Œä¸å¦¨å’Œæ´›ç«¹ä¸€èµ·æŒ‘æˆ˜ä»é›¶åˆ°ä¸€å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ’ä»¶ã€‚</p><h2 id="Hello-vscode"><a href="#Hello-vscode" class="headerlink" title="Hello vscode"></a>Hello vscode</h2><p>è‹±é›„å¤šèµ·äºå¸‚äº•ï¼Œé«˜æ¥¼çš†èµ·äºå¹³åœ°ã€‚å†ä¼Ÿå¤§çš„è½¯ä»¶ä¹Ÿéƒ½æ˜¯ä» Hello World å¼€å§‹çš„ï¼Œæœ¬ç« å°½é‡ç”¨æœ€ç®€æ´çš„è¯­è¨€æè¿°ä¸€ä¸ª vscode æ’ä»¶ Hello World çš„è¯ç”Ÿã€‚</p><h3 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®"></a>åˆå§‹åŒ–é¡¹ç›®</h3><p>å®‰è£… <a href="http://yeoman.io/">Yeoman</a> å’Œ <a href="https://www.npmjs.com/package/generator-code">VS Code Extension Generator</a>ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g yo generator-code</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè„šæ‰‹æ¶ä¼šç”Ÿæˆä¸€ä¸ªå¯ä»¥ç«‹é©¬å¼€å‘çš„é¡¹ç›®ã€‚è¿è¡Œç”Ÿæˆå™¨ï¼Œç„¶åå¡«å¥½ä¸‹åˆ—å­—æ®µï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ yo code</span><br><span class="line"><span class="comment">#     _-----_     â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span></span><br><span class="line"><span class="comment">#    |       |    â”‚   Welcome to the Visual  â”‚</span></span><br><span class="line"><span class="comment">#    |--(o)--|    â”‚   Studio Code Extension  â”‚</span></span><br><span class="line"><span class="comment">#   `---------Â´   â”‚        generator!        â”‚</span></span><br><span class="line"><span class="comment">#    ( _Â´U`_ )    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span></span><br><span class="line"><span class="comment">#    /___A___\   /</span></span><br><span class="line"><span class="comment">#     |  ~  |</span></span><br><span class="line"><span class="comment">#   __&#x27;.___.&#x27;__</span></span><br><span class="line"><span class="comment"># Â´   `  |Â° Â´ Y `</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ? What type of extension do you want to create? New Extension (TypeScript)</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the name of your extension? Juejin Posts</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the identifier of your extension? juejin-posts</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the description of your extension? æ˜é‡‘æ–‡ç« ç®¡ç†</span></span><br><span class="line"><span class="comment"># ? Initialize a git repository? Yes</span></span><br><span class="line"><span class="comment"># ? Bundle the source code with webpack? No</span></span><br><span class="line"><span class="comment"># ? Which package manager to use? yarn</span></span><br><span class="line"></span><br><span class="line">$ code ./juejin-posts</span><br></pre></td></tr></table></figure><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/IaJdlW">hello world</a></p></blockquote><h3 id="ä»£ç è§„èŒƒ"><a href="#ä»£ç è§„èŒƒ" class="headerlink" title="ä»£ç è§„èŒƒ"></a>ä»£ç è§„èŒƒ</h3><p>é»˜è®¤çš„è„šæ‰‹æ¶ç”Ÿæˆçš„ä¹Ÿæœ‰ ESLint é…ç½®ï¼Œä½†æ˜¯ Editorã€Prettier çš„é…ç½®éƒ½æ²¡æœ‰ï¼Œå¹¶ä¸” ESLint é…ç½®ä¹Ÿä¸ç¬¦åˆæˆ‘çš„ä¹ æƒ¯ã€‚æ´›ç«¹å…³äºå‰ç«¯å·¥ç¨‹åŒ–çš„åŒ…éƒ½åœ¨ <a href="https://github.com/youngjuning/luozhu">youngjuning&#x2F;luozhu</a>ï¼Œ ESlint é…ç½®çš„åŒ…æ˜¯ <code>@luozhu/eslint-config-*</code>ã€‚ç”±äºæˆ‘ä»¬å¼€å‘æ’ä»¶ä½¿ç”¨çš„æ˜¯ Typescriptï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹© <code>@luozhu/eslint-config-typescript</code>ã€‚</p><p><strong>å®‰è£…ä¾èµ–ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add @luozhu/eslint-config-typescript @luozhu/prettier-config prettier -D</span><br></pre></td></tr></table></figure><p><strong>å…·ä½“é…ç½®ï¼š</strong></p><p>é…ç½®æ¶‰åŠæ–‡ä»¶è¾ƒå¤šï¼Œè¯·å‚è€ƒ <a href="https://github.com/youngjuning/luozhu#coding-style">coding-style</a>ï¼Œä¸å…³å¿ƒçš„åŒå­¦ä¹Ÿå¯ä»¥ç›´æ¥ç•¥è¿‡ã€‚</p><p><strong>æäº¤æ£€æµ‹ï¼š</strong></p><p>å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add lint-staged yorkie -D</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;gitHooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;pre-commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;js,jsx,ts,tsx&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;eslint --fix&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;**/*.&#123;md,json&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;prettier --write&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>eslint â€“fixï¼š</strong></p><p>ä¿®æ”¹å®Œé…ç½®ä¹‹åéœ€è¦æ‰§è¡Œ fix å¯¹æ‰€æœ‰æ–‡ä»¶æ ¼å¼åŒ–ä¸€æ¬¡ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn lint --fix</span><br></pre></td></tr></table></figure><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/xzFAVE">chore: code style config</a></p></blockquote><h3 id="çº¦å®šå¼æäº¤"><a href="#çº¦å®šå¼æäº¤" class="headerlink" title="çº¦å®šå¼æäº¤"></a>çº¦å®šå¼æäº¤</h3><p>çº¦å®šå¼æäº¤æˆ‘ä½¿ç”¨çš„æ˜¯æ¸è¿›å¼è„šæ‰‹æ¶ <code>@luozhu/create-commitlint</code>ï¼Œåœ¨é¡¹ç›®ä¸­æ‰§è¡Œ <code>npx @luozhu/create-commitlint</code> å³å¯ä½¿é¡¹ç›®ç¬¦åˆè§„èŒƒåŒ–æäº¤çš„é…ç½®ã€‚å¯¹è§„èŒƒåŒ–æäº¤ä¸äº†è§£çš„åŒå­¦ï¼Œå¼ºçƒˆå»ºè®®è¯»ä¸€ä¸‹ <a href="https://juejin.cn/post/6877462747631026190/">ä¸€æ–‡æå®š Conventional Commits </a>ã€‚</p><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/Ld142y">chore: npx @luozhu&#x2F;create-commitlint</a></p></blockquote><h3 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>æŒ‰ä¸‹ <code>F5</code> å¼€å¯è°ƒè¯•ä¼šå‡ºç°[æ‰©å±•å¼€å‘å®¿ä¸»]çª—å£ï¼Œç„¶åæŒ‰ <code>Command+Shift+P</code> ç»„ä»¶é”®è¾“å…¥ <code>Hello World</code> å‘½ä»¤ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º vscode å¼¹å‡ºäº† <code>Hello World from Juejin Posts!</code> çš„æç¤ºã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc26d7d429f84564b88b55e9df60fcd7~tplv-k3u1fbpfcp-zoom-1.image"></p><p>åŒæ—¶æˆ‘ä»¬çš„å¼€å‘çª—å£ä¸­ï¼Œä¼šå‡ºç°ä¸€ä¸ª watch ä»»åŠ¡çš„ç»ˆç«¯ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75a15d0bd2cc4096af1a3f76173cbbe1~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å¼€å‘çª—å£çš„è°ƒè¯•æ§åˆ¶å°ä¼šè¾“å‡ºæ’ä»¶è¿è¡Œæ—¥å¿—ï¼ˆå¿½ç•¥çº¢è‰²çš„è­¦å‘Šï¼‰ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c31068ea0bca4d4793e35bdb16d70c0a~tplv-k3u1fbpfcp-zoom-1.image"></p><p>è°ƒè¯•æ‰§è¡Œçš„ä»»åŠ¡æ˜¯åœ¨ <code>.vscode/tasks.json</code> ä¸­é…ç½®çš„ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// See https://go.microsoft.com/fwlink/?LinkId=733558</span></span><br><span class="line"><span class="comment">// for the documentation about the tasks.json format</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span><span class="punctuation">,</span> <span class="comment">// é…ç½®çš„ç‰ˆæœ¬å·ã€‚</span></span><br><span class="line"><span class="attr">&quot;tasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// ä»»åŠ¡é…ç½®ã€‚é€šå¸¸æ˜¯å¤–éƒ¨ä»»åŠ¡è¿è¡Œç¨‹åºä¸­å·²å®šä¹‰ä»»åŠ¡çš„æ‰©å……ã€‚</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm&quot;</span><span class="punctuation">,</span> <span class="comment">// è¦è‡ªå®šä¹‰çš„ä»»åŠ¡ç±»å‹ã€‚</span></span><br><span class="line"><span class="attr">&quot;script&quot;</span><span class="punctuation">:</span> <span class="string">&quot;watch&quot;</span><span class="punctuation">,</span> <span class="comment">// è¦è‡ªå®šä¹‰çš„ npm è„šæœ¬ã€‚</span></span><br><span class="line"><span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$tsc-watch&quot;</span><span class="punctuation">,</span> <span class="comment">// è¦ä½¿ç”¨çš„é—®é¢˜åŒ¹é…ç¨‹åºã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ªé—®é¢˜åŒ¹é…ç¨‹åºå®šä¹‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„å’Œå¤šä¸ªé—®é¢˜åŒ¹é…ç¨‹åºã€‚</span></span><br><span class="line"><span class="attr">&quot;isBackground&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// æ‰§è¡Œçš„ä»»åŠ¡æ˜¯å¦ä¿æŒæ´»åŠ¨çŠ¶æ€å¹¶åœ¨åå°è¿è¡Œã€‚</span></span><br><span class="line"><span class="attr">&quot;presentation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// é…ç½®ç”¨äºæ˜¾ç¤ºä»»åŠ¡è¾“å‡ºå¹¶è¯»å–å…¶è¾“å…¥çš„é¢æ¿ã€‚</span></span><br><span class="line"><span class="attr">&quot;reveal&quot;</span><span class="punctuation">:</span> <span class="string">&quot;never&quot;</span> <span class="comment">// æ§åˆ¶è¿è¡Œä»»åŠ¡çš„ç»ˆç«¯æ˜¯å¦æ˜¾ç¤ºã€‚å¯æŒ‰é€‰é¡¹ &quot;revealProblems&quot; è¿›è¡Œæ›¿ä»£ã€‚é»˜è®¤è®¾ç½®ä¸ºâ€œå§‹ç»ˆâ€ã€‚</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// å®šä¹‰æ­¤ä»»åŠ¡å±äºçš„æ‰§è¡Œç»„ã€‚å®ƒæ”¯æŒ &quot;build&quot; ä»¥å°†å…¶æ·»åŠ åˆ°ç”Ÿæˆç»„ï¼Œä¹Ÿæ”¯æŒ &quot;test&quot; ä»¥å°†å…¶æ·»åŠ åˆ°æµ‹è¯•ç»„ã€‚</span></span><br><span class="line"><span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span> <span class="comment">// ä»»åŠ¡çš„æ‰§è¡Œç»„ã€‚</span></span><br><span class="line"><span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// å®šä¹‰æ­¤ä»»åŠ¡æ˜¯å¦ä¸ºç»„ä¸­çš„é»˜è®¤ä»»åŠ¡ã€‚</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h2><p>æˆ‘ä»¬çš„æ’ä»¶å¼€å‘å®Œæˆå‰ï¼Œæƒ³è¦åˆ†äº«ç»™å°ä¼™ä¼´ä½“éªŒå¯ä»¥å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œvscode ä¸ºæˆ‘ä»¬æä¾›äº† <a href="https://github.com/microsoft/vscode-vsce">vsce</a> å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬å°† vsce æ¨¡å—å®‰è£…åˆ°å…¨å±€ï¼Œç„¶åä½¿ç”¨ <code>vsce package</code> å‘½ä»¤å°è¯•æ‰“åŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vsce package</span><br><span class="line"> ERROR  Missing publisher name. Learn more: https://code.visualstudio.com/api/working-with-extensions/publishing-extension<span class="comment">#publishing-extensions</span></span><br></pre></td></tr></table></figure><p>å•Šï¼Œå’‹è¿˜æŠ¥é”™äº†ï¼Ÿ<code>publisher</code> æ˜¯å•¥ï¼Ÿï¼Ÿä¸€è„¸æ‡µé€¼ã€‚ä¸æ…Œï¼ŒæŒ‰<a href="https://code.visualstudio.com/api/working-with-extensions/publishing-extension#create-a-publisher">é“¾æ¥</a> æˆ‘çŸ¥é“äº† publisher æ˜¯ä¸€ä¸ªå¯ä»¥å°†æ‰©å±•å‘å¸ƒåˆ°Visual Studio Code Marketplace çš„èº«ä»½ã€‚æ¯ä¸ªæ‰©å±•éƒ½éœ€è¦åœ¨å…¶ <code>package.json</code> æ–‡ä»¶ä¸­åŒ…å«ä¸€ä¸ªå‘å¸ƒè€…åç§°ã€‚å¦‚æœæ³¨å†Œå‘å¸ƒè€…æˆ‘ä»¬åé¢è¯¦è¯´ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠ <code>publisher</code> è®¾ç½®ä¸º <code>luozhu</code>ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ vsce package</span><br><span class="line"> INFO  Detected presence of yarn.lock. Using <span class="string">&#x27;yarn&#x27;</span> instead of <span class="string">&#x27;npm&#x27;</span> (to override this pass <span class="string">&#x27;--no-yarn&#x27;</span> on the <span class="built_in">command</span> line).</span><br><span class="line"> ERROR  Make sure to edit the README.md file before you package or publish your extension.</span><br></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf561381232b4690a5d7cd0378c267d7~tplv-k3u1fbpfcp-zoom-1.image"></p><p>é¢ï¼Œè£‚å¼€ï¼Œè¿™å’‹è¿˜æŠ¥é”™ï¼Œå‡è£…æ·¡å®šï¼Œè¯»ä¸€ä¸‹æç¤ºåŸæ¥æ˜¯è¦æˆ‘ä»¬ç¼–è¾‘ä¸€ä¸‹ README.mdï¼Œæ²¡é”™ï¼Œvscode æ¨¡æ¿é‡Œæœ‰åˆå§‹çš„ READMEï¼Œæˆ‘ä»¬éœ€è¦ç¼–è¾‘ä¸€ä¸‹æ‰å¯ä»¥æ‰“åŒ…ã€‚ä¿®æ”¹åå†æ¬¡å°è¯• <code>vsce package</code>ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/acfe2e957c9545578c7b6990371a3f0b~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç»ˆäºï¼Œæ‰“åŒ…æˆåŠŸï¼ä¸ºäº†è¿½æ±‚å®Œç¾ï¼Œæœ€åæˆ‘ä»¬å†æ¥åšä¸€äº›ä¼˜åŒ–å·¥ä½œï¼š</p><ol><li>æ‰§è¡Œ <code>vsce package</code> çš„æ—¶å€™åŠ ä¸Š <code>--no-yarn</code></li><li>åœ¨ <em>package.json</em> ä¸­åŠ ä¸Š <code>repository</code> å­—æ®µå³å¯çœ‹ä¸åˆ°ä»»ä½•è­¦å‘Šã€‚</li><li>ä¸ºäº†ä¾¿æ·ï¼Œæˆ‘ä»¬å°† vsce å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åæŠŠ <code>vsce package --no-yarn</code> æ·»åŠ åˆ° npm scripts ä¸­ã€‚</li><li><em>package.json</em> åŠ ä¸Š <code>license</code> å­—æ®µã€‚</li></ol><p>ç„¶åå†æ¬¡å°è¯• <code>yarn package</code> å°±å®Œç¾äº†ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a9a251834b945c8a882039020f56e4f~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>æç¤ºï¼švsce package ä¼šå…ˆæ‰§è¡Œ <code>vscode:prepublish</code> è¿™ä¸ªé¢„å‘å¸ƒè„šæœ¬å»ç¼–è¯‘é¡¹ç›®ã€‚</p></blockquote><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/ZCp4qU">chore: config vsce package</a></p></blockquote><h3 id="æ‰“åŒ…åŸç†"><a href="#æ‰“åŒ…åŸç†" class="headerlink" title="æ‰“åŒ…åŸç†"></a>æ‰“åŒ…åŸç†</h3><p>å¦‚è¿‡ä½ ä¹Ÿè·Ÿç€ä¸€è·¯æ•²åˆ°äº†è¿™é‡Œï¼Œæ­¤æ—¶ä½ ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•å‘ç° <code>vsix</code> ç»“å°¾çš„æ–‡ä»¶ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2c0846bd66747ceab0c09524a209b28~tplv-k3u1fbpfcp-zoom-1.image"></p><p>è¿™å°±æ˜¯ vscode æ’ä»¶çš„å®‰è£…åŒ…ï¼Œæˆ‘ä»¬å…ˆä¸æ€¥ç€å®‰è£…ï¼Œå…ˆä¸€èµ·æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚å°è¯•ç”¨å½’æ¡£å·¥å…·è§£å‹åå¾—åˆ°å¦‚ä¸‹ç›®å½•æ–‡ä»¶å¤¹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/182c365a0690467cb0bd8b0d1490c175~tplv-k3u1fbpfcp-zoom-1.image"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¼–è¯‘åçš„æ–‡ä»¶å¤¹ <code>out</code> å’Œå…¶ä»–ä¸€äº›æ–‡ä»¶æ˜¯è¢«ç›´æ¥å‹ç¼©è¿›å®‰è£…åŒ…çš„ï¼Œèªæ˜çš„ä½ è‚¯å®šå‘ç°äº† <code>.cz-config.js</code>ã€<code>.prettierrc.js</code> å’Œ <code>commitlint.config.js</code> è¿™ç§å¼€å‘æ—¶æ–‡ä»¶ä¹Ÿè¢«å‹ç¼©äº†ï¼Œè¿è¡Œæ’ä»¶å®Œå…¨ç”¨ä¸åˆ°ï¼Œè¿™æ˜æ˜¾ä¸åˆç†ã€‚å…¶å®å’Œå…¶ä»–æ’ä»¶ä½“ç³»ä¸€æ ·ï¼Œvscode ä¹Ÿæä¾›äº† <code>.vscodeignore</code> æ¥å®ç°æ‰“åŒ…å¿½ç•¥é…ç½®ï¼Œæˆ‘ä»¬å°†ä»¥ä¸Šæ— å…³æ–‡ä»¶å¿½ç•¥é‡æ–°æ‰“åŒ…å³å¯ã€‚</p><p>åŸç†å°±è¿™ï¼Ÿä¸å­˜åœ¨çš„ï¼Œæˆ‘ä»¬æ‰“å¼€ <code>extension.js</code> ä¼šå‘ç°å¼•ç”¨äº† <code>vscode</code> è¿™ä¸ªåŒ…ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bb42881e49a94456aeac417f6b5cba71~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ä½†æ˜¯æˆ‘ä»¬çš„å®‰è£…åŒ…ä¸­å¹¶æ²¡æœ‰ _node_modules_ï¼Œé‚£ä¹ˆ vscode è¿™ä¸ªåŒ…å­˜åœ¨åœ¨å“ªé‡Œå‘¢ï¼Ÿæˆ‘çŒœçš„æ˜¯æŒ‚åœ¨ node ç¯å¢ƒä¸Šäº†ï¼Œè¯»äº†<a href="https://is.gd/33GTcH">æºç </a>åæˆ‘å‘ç°æˆ‘ç«Ÿç„¶æ˜¯å¯¹çš„ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e796fcf81b64fd7a18d9c3e36fbefdf~tplv-k3u1fbpfcp-zoom-1.image"></p><p>vscode å®ç°äº†æ‹¦æˆªå™¨åœ¨åŠ è½½ Node ç¯å¢ƒçš„æ—¶å€™å°† vscode ç»™æ·»åŠ åˆ°äº†å†…ç½®åŒ…ä¸­ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å‡å°æ’ä»¶çš„ä½“ç§¯ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚æœä½¿ç”¨ä¸‰æ–¹æ’ä»¶å‘¢ï¼Ÿä»¥å¸¸ç”¨çš„ lodash ä¸ºä¾‹ï¼Œå®‰è£… lodash ä¹‹åé‡æ–°æ‰“åŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ yarn package</span><br><span class="line">yarn run v1.22.10</span><br><span class="line">$ vsce package --no-yarn</span><br><span class="line">Executing prepublish script <span class="string">&#x27;npm run vscode:prepublish&#x27;</span>...</span><br><span class="line"></span><br><span class="line">&gt; juejin-posts@0.0.1 vscode:prepublish</span><br><span class="line">&gt; yarn run compile</span><br><span class="line"></span><br><span class="line">$ tsc -p ./</span><br><span class="line">This extension consists of 1060 files, out of <span class="built_in">which</span> 1049 are JavaScript files. For performance reasons, you should bundle your extension: https://aka.ms/vscode-bundle-extension . You should also exclude unnecessary files by adding them to your .vscodeignore: https://aka.ms/vscode-vscodeignore</span><br><span class="line"> DONE  Packaged: /Users/luozhu/Desktop/playground/juejin-posts/juejin-posts-0.0.1.vsix (1060 files, 644.72KB)</span><br><span class="line">âœ¨  Done <span class="keyword">in</span> 5.54s.</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™æç¤ºæˆ‘ä»¬æœ‰ 1000 å¤šä¸ªæ–‡ä»¶ï¼Œå¤§æ¦‚ç‡ <em>node_modules</em> æ–‡ä»¶å¤¹è¢«æ‰“åŒ…äº†ï¼Œæˆ‘ä»¬æ¥è§£å‹ä¸‹è§è¯ä¸€ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/917b7742991640c9a0b03314cef24ce6~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ä¸å‡ºæ‰€æ–™ï¼Œvscode é»˜è®¤çš„æ‰“åŒ…æ–¹å¼å°±æ˜¯ç®€å•çš„ç¼–è¯‘æ‹·è´ï¼Œé€šè¿‡å¿½ç•¥æ–‡ä»¶å‡å°ä½“ç§¯ä¹Ÿæ˜¯æ¯æ°´è½¦è–ªã€‚è€Œä¸” vscode æ‰©å±•çš„è§„æ¨¡å¾€å¾€å¢é•¿å¾ˆå¿«ã€‚å®ƒä»¬æ˜¯åœ¨å¤šä¸ªæºæ–‡ä»¶ä¸­ç¼–å†™çš„ï¼Œå¹¶ä¾èµ–äº npm çš„æ¨¡å—ã€‚åˆ†è§£å’Œé‡ç”¨æ˜¯å¼€å‘çš„æœ€ä½³å®è·µï¼Œä½†åœ¨å®‰è£…å’Œè¿è¡Œæ‰©å±•æ—¶ï¼Œå®ƒä»¬æ˜¯æœ‰ä»£ä»·çš„ã€‚åŠ è½½ 100 ä¸ªå°æ–‡ä»¶è¦æ¯”åŠ è½½ä¸€ä¸ªå¤§æ–‡ä»¶æ…¢å¾—å¤šã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ¨èæ†ç»‘çš„åŸå› ã€‚æ†ç»‘æ˜¯å°†å¤šä¸ªå°çš„æºæ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶çš„è¿‡ç¨‹ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œæœ‰ä¸åŒçš„æ‰“åŒ…å·¥å…·å¯ä»¥ç”¨ï¼Œæµè¡Œçš„æœ‰ rollup.jsã€Parcelã€esbuild å’Œ webpackï¼Œå®˜æ–¹è„šæ‰‹æ¶é»˜è®¤åªèƒ½é€‰ webpackï¼Œæˆ‘ä»¬è¿™é‡Œæ¨èç›´æ¥ä½¿ç”¨æ›´å¿«æ›´å¼ºçš„ esbuildã€‚</p><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/ZCp4qU">chore: ignore config file when package</a>ã€<a href="https://is.gd/ggpQmv">chore: add esModuleInterop to tsconfig</a></p></blockquote><h3 id="ä½¿ç”¨-esbuild-ä¼˜åŒ–æ‰“åŒ…"><a href="#ä½¿ç”¨-esbuild-ä¼˜åŒ–æ‰“åŒ…" class="headerlink" title="ä½¿ç”¨ esbuild ä¼˜åŒ–æ‰“åŒ…"></a>ä½¿ç”¨ esbuild ä¼˜åŒ–æ‰“åŒ…</h3><p><strong>å®‰è£…ä¾èµ–ï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add -D esbuild</span><br></pre></td></tr></table></figure><p><strong>npm scriptsï¼š</strong></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line"><span class="deletion">-    &quot;vscode:prepublish&quot;: &quot;yarn run compile&quot;,</span></span><br><span class="line"><span class="deletion">-    &quot;compile&quot;: &quot;tsc -p ./&quot;,</span></span><br><span class="line"><span class="deletion">-    &quot;watch&quot;: &quot;tsc -watch -p ./&quot;,</span></span><br><span class="line"><span class="deletion">-    &quot;pretest&quot;: &quot;yarn run compile &amp;&amp; yarn run lint&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;vscode:prepublish&quot;: &quot;yarn esbuild-base --minify&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;esbuild-base&quot;: &quot;esbuild ./src/extension.ts --bundle --outfile=out/extension.js --external:vscode --format=cjs --platform=node&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;esbuild&quot;: &quot;yarn esbuild-base --sourcemap&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;esbuild-watch&quot;: &quot;yarn esbuild-base --sourcemap --watch&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;test-compile&quot;: &quot;tsc -p ./&quot;,</span></span><br><span class="line"><span class="addition">+    &quot;pretest&quot;: &quot;yarn test-compile &amp;&amp; yarn lint&quot;,</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šç”±äº watch æ”¹æˆäº† esbuild-watchï¼Œæ‰€ä»¥ <em>.vscode&#x2F;tasks.json</em> ä¸­çš„ scripts å­æ®µä¹Ÿéœ€è¦åšç›¸åº”ä¿®æ”¹ã€‚</p></blockquote><p><strong>vscode tasksï¼š</strong></p><p>ç†è®ºä¸Šæˆ‘ä»¬æŠŠæ‰“åŒ…å‘½ä»¤æ”¹æˆ esbuild ä¹‹åï¼Œåº”è¯¥å°† vscode ä»»åŠ¡ä¸­çš„é—®é¢˜åŒ¹é…ç¨‹åºè®¾ç½®ä¸º <code>$esbuild-watch</code>ï¼Œä½†æ˜¯ vscode ä¼šæç¤ºæˆ‘ä»¬æ— æ³•è¯†åˆ«çš„é—®é¢˜åŒ¹é…ç¨‹åºï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4b51c79ee1344b6f92a3f2efaf9ef7aa~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å°è¯•æœç´¢æ‰©å±•ï¼Œæœç„¶æœ‰ä¸€ä¸ª esbuild Problem Matchers æ’ä»¶ï¼Œæˆ‘ä»¬å°†å…¶å®‰è£…å¹¶æ·»åŠ  <code>&quot;connor4312.esbuild-problem-matchers&quot;</code> åˆ° <em>.vscode&#x2F;extensions.json</em> æ–‡ä»¶çš„ <code>recommendations</code> ä¸­ã€‚</p><p><strong>å¿½ç•¥æ–‡ä»¶ï¼š</strong></p><p>æˆ‘ä»¬ä½¿ç”¨ esbuild æ‰“åŒ…åä¼šå°†ä½¿ç”¨åˆ°çš„ä»£ç éƒ½æ‰“åŒ…è¿› <code>out/extension.js</code>ï¼Œä½†æ˜¯ vsce çš„æ‰“åŒ…æœºåˆ¶æ˜¯ä¸ç®¡ä½ æœ‰æ²¡æœ‰ç”¨åˆ°éƒ½ä¼šæŠŠ <code>dependencies</code> ä¸­çš„åŒ…æ‰“è¿›å®‰è£…åŒ…ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°† <em><em>node_modules</em></em> å¿½ç•¥æ‰ã€‚</p><p><strong>æˆæœå±•ç¤ºï¼š</strong></p><p>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®‰è£…åŒ…çš„ä½“ç§¯å¤§å¤§å‡å°äº†ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba86286be7fc41f4b8325a3e0be0d2d2~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/F12xNk">chore: config esbuild</a></p></blockquote><h2 id="é›†æˆ-umijs"><a href="#é›†æˆ-umijs" class="headerlink" title="é›†æˆ umijs"></a>é›†æˆ umijs</h2><h3 id="åˆå§‹åŒ–-umi-é¡¹ç›®"><a href="#åˆå§‹åŒ–-umi-é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ– umi é¡¹ç›®"></a>åˆå§‹åŒ– umi é¡¹ç›®</h3><p>ä½¿ç”¨ umi è„šæ‰‹æ¶åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª <em>web</em> ç›®å½•ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> web &amp;&amp; <span class="built_in">cd</span> web</span><br></pre></td></tr></table></figure><p>é€šè¿‡å®˜æ–¹å·¥å…·åˆ›å»ºé¡¹ç›®ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn create @umijs/umi-app</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <em>.umirc.ts</em> é…ç½®ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig, <span class="title class_">IConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">nodeModulesTransform</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">routes</span>: [&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;@/pages/index&#x27;</span> &#125;],</span><br><span class="line">  <span class="attr">fastRefresh</span>: &#123;&#125;, <span class="comment">// å¼€å‘æ—¶å¯ä»¥ä¿æŒç»„ä»¶çŠ¶æ€ï¼ŒåŒæ—¶ç¼–è¾‘æä¾›å³æ—¶åé¦ˆã€‚</span></span><br><span class="line">  <span class="attr">history</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;memory&#x27;</span>, <span class="comment">// é»˜è®¤çš„ç±»å‹æ˜¯ `browser`ï¼Œä½†æ˜¯ç”±äº vscode webview ç¯å¢ƒä¸å­˜åœ¨æµè§ˆå™¨è·¯ç”±ï¼Œæ”¹æˆ `memory` å’Œ `hash` éƒ½å¯ä»¥</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">// éœ€è¦åœ¨ dev æ—¶å†™æ–‡ä»¶åˆ°è¾“å‡ºç›®å½•ï¼Œè¿™æ ·ä¿è¯å¼€å‘é˜¶æ®µæœ‰ js/css æ–‡ä»¶</span></span><br><span class="line">    <span class="attr">writeToDisk</span>: <span class="function"><span class="params">filePath</span> =&gt;</span></span><br><span class="line">      [<span class="string">&#x27;umi.js&#x27;</span>, <span class="string">&#x27;umi.css&#x27;</span>].<span class="title function_">some</span>(<span class="function"><span class="params">name</span> =&gt;</span> filePath.<span class="title function_">endsWith</span>(name)),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">IConfig</span>);</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>package.json</code> åŠ å…¥ <code>name</code>ã€<code>version</code>ã€<code>description</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;web&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;web for juejin-posts&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="å¿½ç•¥æ–‡ä»¶"><a href="#å¿½ç•¥æ–‡ä»¶" class="headerlink" title="å¿½ç•¥æ–‡ä»¶"></a>å¿½ç•¥æ–‡ä»¶</h3><p><strong>.gitignoreï¼š</strong></p><p>å°† vscode æ‰©å±•å’Œ umijs è„šæ‰‹æ¶ç”Ÿæˆçš„ gitignore åˆå¹¶ä¸ºä¸€ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># See https://help.github.com/articles/ignoring-files/ for more about ignoring files.</span><br><span class="line"></span><br><span class="line"># vscode</span><br><span class="line">.vscode-test/</span><br><span class="line">*.vsix</span><br><span class="line"></span><br><span class="line"># dependencies</span><br><span class="line">node_modules</span><br><span class="line">npm-debug.log</span><br><span class="line">yarn-error.log</span><br><span class="line">package-lock.json</span><br><span class="line"></span><br><span class="line"># production</span><br><span class="line">out</span><br><span class="line">dist</span><br><span class="line"></span><br><span class="line"># misc</span><br><span class="line">.DS_Store</span><br><span class="line"></span><br><span class="line"># umi</span><br><span class="line">**/src/.umi</span><br><span class="line">**/src/.umi-production</span><br><span class="line">**/src/.umi-test</span><br><span class="line">**/.env.local</span><br><span class="line">web/yarn.lock</span><br></pre></td></tr></table></figure><p><strong>.vscodeignoreï¼š</strong></p><p>ç”±äº vscode æ‰“åŒ…çš„æ—¶å€™åªéœ€è¦è·å– umijs æ‰“åŒ…åçš„äº§ç‰©ï¼Œæ‰€æœ‰åŠ å…¥ <code>web/**</code> å’Œ <code>!web/dist/**</code> å°†æ— ç”¨çš„æ–‡ä»¶å¿½ç•¥æ‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.vscode/**</span><br><span class="line">.vscode-test/**</span><br><span class="line">out/test/**</span><br><span class="line"></span><br><span class="line">src/**</span><br><span class="line">.gitignore</span><br><span class="line">.yarnrc</span><br><span class="line">vsc-extension-quickstart.md</span><br><span class="line">**/tsconfig.json</span><br><span class="line">**/*.map</span><br><span class="line">**/*.ts</span><br><span class="line"></span><br><span class="line">.cz-config.js</span><br><span class="line">.prettierrc.js</span><br><span class="line">.commitlintrc.js</span><br><span class="line">**/node_modules/**</span><br><span class="line">yarn-error.log</span><br><span class="line">web/**</span><br><span class="line">!web/dist/**</span><br></pre></td></tr></table></figure><h3 id="yarn-workspace"><a href="#yarn-workspace" class="headerlink" title="yarn workspace"></a>yarn workspace</h3><p>ç”±äºæˆ‘ä»¬çš„é¡¹ç›®æ˜¯ vscode æ‰©å±•å’Œ web é¡¹ç›®æ··åˆçš„é¡¹ç›®ã€‚ä¸ºäº†æ–¹ä¾¿ç®¡ç†è„šæœ¬å’Œä¾èµ–ï¼Œæˆ‘ä»¬å¼•å…¥äº† <code>yarn workspace</code> æ¥ç®¡ç†é¡¹ç›®ã€‚åœ¨æ ¹ç›®å½•çš„ <em>package.json</em> ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®å³å¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="string">&quot;true&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;workspaces&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;web&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="è°ƒè¯•-1"><a href="#è°ƒè¯•-1" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>ç”±äºæˆ‘ä»¬çš„ web é¡¹ç›®ä¹Ÿéœ€è¦ç¼–è¯‘ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹ vscode <code>launch.json</code> åŠ å…¥ web é¡¹ç›®çš„ç¼–è¯‘ä»»åŠ¡ã€‚é…ç½®å‚è€ƒäº† <a href="http://tny.im/bOqQT">appworks</a>ã€‚</p><p>é¦–å…ˆåœ¨æ ¹ç›®å½•çš„ <code>package.json</code> çš„ scripts ä¸­æ·»åŠ :</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;web-build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn workspace web run build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;web-watch&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn workspace web run start&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹ <em>.vscode&#x2F;launch.json</em> é…ç½®ä¸ºï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A launch configuration that compiles the extension and then opens it inside a new window</span></span><br><span class="line"><span class="comment">// Use IntelliSense to learn about possible attributes.</span></span><br><span class="line"><span class="comment">// Hover to view descriptions of existing attributes.</span></span><br><span class="line"><span class="comment">// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;compounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">// å¤åˆåˆ—è¡¨ã€‚æ¯ä¸ªå¤åˆå¯å¼•ç”¨å¤šä¸ªé…ç½®ï¼Œè¿™äº›é…ç½®å°†ä¸€èµ·å¯åŠ¨ã€‚</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Debug Extension&quot;</span><span class="punctuation">,</span> <span class="comment">// å¤åˆçš„åç§°ã€‚åœ¨å¯åŠ¨é…ç½®ä¸‹æ‹‰èœå•ä¸­æ˜¾ç¤ºã€‚</span></span><br><span class="line">      <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="comment">// å°†ä½œä¸ºæ­¤å¤åˆçš„ä¸€éƒ¨åˆ†å¯åŠ¨çš„é…ç½®åç§°ã€‚</span></span><br><span class="line">        <span class="string">&quot;Run Extension&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;Watch Webview&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;presentation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;order&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Watch Webview&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;attach&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm: web-watch&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Run Extension&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;extensionHost&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;--extensionDevelopmentPath=$&#123;workspaceFolder&#125;&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;outFiles&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;$&#123;workspaceFolder&#125;/out/**/*.js&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;defaultBuildTask&#125;&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å®Œæˆåè¿›å…¥ VS Codeï¼ŒæŒ‰ä¸‹<code>F5</code>ï¼Œä½ ä¼šç«‹å³çœ‹åˆ°ä¸€ä¸ª<strong>æ’ä»¶å‘å¼€ä¸»æœº</strong>çª—å£ï¼Œå…¶ä¸­å°±è¿è¡Œç€æ’ä»¶ã€‚è¿™æ—¶å€™è¿è¡Œä½ ä¼šå‘ç°æ§åˆ¶å°æŠ¥ä¸€ä¸‹é”™è¯¯ âŒï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">error TS6059: File &#x27;/Users/luozhu/Desktop/github/juejin-posts/web/src/pages/index.tsx&#x27; is not under &#x27;rootDir&#x27; &#x27;/Users/luozhu/Desktop/github/juejin-posts/src&#x27;. &#x27;rootDir&#x27; is expected to contain all source files.</span><br><span class="line">  The file is in the program because:</span><br><span class="line">    Matched by include pattern &#x27;**/*&#x27; in &#x27;/Users/luozhu/Desktop/github/juejin-posts/tsconfig.json&#x27;</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯å› ä¸º umi çš„çº¦å®šçš„é¡¹ç›®ç»“æ„å’Œ vscode extension éƒ½åŒ…å« <em>src</em> ç›®å½•ã€‚ç”±äº vscode æ’ä»¶å’Œ umi çš„ç¼–è¯‘æ˜¯åˆ†å¼€çš„ï¼Œæˆ‘ä»¬åœ¨æ ¹ç›®å½•çš„ <em>tsconfig.json</em> ä¸­å°† <em>web</em> ç›®å½•å¿½ç•¥å³å¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;web&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œä½ å¯ä»¥æŒ‰ä¸‹ <code>F5</code> çœ‹åˆ°<strong>æ’ä»¶å‘å¼€ä¸»æœº</strong>çª—å£çš„åŒæ—¶è¿˜ä¼šçœ‹åˆ°ä¸¤ä¸ªè°ƒè¯•ä»»åŠ¡ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d4b3b6f2522643fb9bc574e2f9982775~tplv-k3u1fbpfcp-zoom-1.image"></p><blockquote><p>æ³¨æ„ğŸ“¢ï¼šè¯·é€‰æ‹© Debug Extension è°ƒè¯•ä»»åŠ¡è€Œä¸æ˜¯ Run Extension</p></blockquote><h3 id="å…¶ä»–ä¼˜åŒ–å·¥ä½œ"><a href="#å…¶ä»–ä¼˜åŒ–å·¥ä½œ" class="headerlink" title="å…¶ä»–ä¼˜åŒ–å·¥ä½œ"></a>å…¶ä»–ä¼˜åŒ–å·¥ä½œ</h3><ol><li>ç”±äºåŸºäº yarn workspaceï¼Œæˆ‘ä»¬æŠŠå…¬ç”¨çš„ä¾èµ–åˆå¹¶</li><li>åˆå¹¶ Eslint é…ç½®å¹¶ä½¿ç”¨ <code>@luozhu/eslint-config-react-typescrip</code></li><li>åˆå¹¶ Editorconfig å’Œ Prettier é…ç½®</li><li>æ·»åŠ  <code>prestart</code> å’Œ <code>prebuild</code> script</li><li>è®¾ç½® <code>HTML=none umi build</code></li></ol><blockquote><p>æäº¤è®°å½•ï¼š<a href="https://is.gd/bt3WHr">chore: config umijs</a></p></blockquote><h2 id="vscode-æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ"><a href="#vscode-æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="vscode æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ"></a>vscode æ’ä»¶å¼€å‘æ ¸å¿ƒæ¦‚å¿µ</h2><p>åœ¨å¼€å§‹ webview èƒ½åŠ›å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ vscode æ’ä»¶å¼€å‘çš„æ ¸å¿ƒæ¦‚å¿µã€‚ä¸ºäº†æœ‰ä¸ªå…¨å±€çš„ç†è§£ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æˆ‘ä»¬ç°åœ¨é¡¹ç›®çš„ä¸»è¦ç›®å½•ç»“æ„ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ CHANGELOG.md <span class="comment"># åŸºäº standard-version ç”Ÿæˆçš„æ›´æ–°æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ package.json <span class="comment"># vscode åŒ…é…ç½®æ–‡ä»¶ï¼Œè¯¸å¦‚æ’ä»¶ LOGOã€åå­—ã€æè¿°ã€æ³¨å†Œæ¿€æ´»äº‹ä»¶</span></span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â””â”€â”€ extension.ts <span class="comment"># æ’ä»¶å…¥å£æ–‡ä»¶ï¼Œæš´éœ² activate æ–¹æ³•ç”¨äºæ³¨å†Œå‘½ä»¤å’Œåˆå§‹åŒ–ä¸€äº›é…ç½®ï¼Œæš´éœ² deactivate æ–¹æ³•ç”¨äºæ’ä»¶å…³é—­å‰æ‰§è¡Œæ¸…ç†å·¥ä½œ</span></span><br><span class="line">â”œâ”€â”€ tsconfig.json <span class="comment"># vscode çš„ç¼–è¯‘é…ç½®</span></span><br><span class="line">â”œâ”€â”€ web <span class="comment"># åŸºäº umi çš„ webï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åè¾¹ webview è¦æ‰¿è½½çš„å†…å®¹</span></span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure><p>ä»ç›®å½•ç»“æ„å¯ä»¥çœ‹å‡ºï¼Œå…³é”®çš„æ–‡ä»¶æ˜¯ <code>package.json</code> å’Œ <code>extension.ts</code>ï¼Œæˆ‘ä»¬ä»¥ helloWorld å‘½ä»¤ä¸ºä¾‹ä»‹ç»ä¸‹ vscode æ’ä»¶çš„ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚</p><h3 id="1-æ¿€æ´»äº‹ä»¶"><a href="#1-æ¿€æ´»äº‹ä»¶" class="headerlink" title="1. æ¿€æ´»äº‹ä»¶"></a>1. æ¿€æ´»äº‹ä»¶</h3><p><strong>æ¿€æ´»äº‹ä»¶</strong>æ˜¯åœ¨ <code>package.json</code> ä¸­çš„ <code>activationEvents</code> å­—æ®µå£°æ˜çš„ä¸€ä¸ª JSON æ•°ç»„å¯¹è±¡ã€‚ä¸ºäº†æ³¨å†Œ helloWorld è¿™ä¸ªå‘½ä»¤ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯æ³¨å†Œæ¿€æ´»äº‹ä»¶ï¼Œæ¿€æ´»äº‹ä»¶ç±»å‹æœ‰å¾ˆå¤šï¼Œæ³¨å†Œå‘½ä»¤çš„æ¿€æ´»äº‹ä»¶æ˜¯ <code>onCommand</code>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;activationEvents&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;onCommand:juejin-posts.helloWorld&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2-å‘å¸ƒå†…å®¹é…ç½®"><a href="#2-å‘å¸ƒå†…å®¹é…ç½®" class="headerlink" title="2. å‘å¸ƒå†…å®¹é…ç½®"></a>2. å‘å¸ƒå†…å®¹é…ç½®</h3><p>å‘å¸ƒå†…å®¹é…ç½®ï¼ˆ å³ VS Code ä¸ºæ’ä»¶æ‰©å±•æä¾›çš„é…ç½®é¡¹ï¼‰æ˜¯ <code>package.json</code> çš„ <code>contributes</code> å­—æ®µï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­æ³¨å†Œå„ç§é…ç½®é¡¹æ‰©å±• VS Code çš„èƒ½åŠ›ã€‚ä¸Šä¸€æ­¥æˆ‘ä»¬æ³¨å†Œçš„ helloWorld æ¿€æ´»äº‹ä»¶åªæ˜¯å‘Šè¯‰äº† vscode å¯ä»¥é€šè¿‡ <code>juejin-posts.helloWorld</code> å‘½ä»¤è§¦å‘ã€‚æˆ‘ä»¬è¿˜éœ€è¦å† <code>contributes.commands</code> ä¸­æ³¨å†Œæˆ‘ä»¬çš„ <code>juejin-posts.helloWorld</code> å‘½ä»¤ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;commands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;juejin-posts.helloWorld&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="3-VS-Code-API"><a href="#3-VS-Code-API" class="headerlink" title="3. VS Code API"></a>3. VS Code API</h3><p><strong>VS Code API</strong> æ˜¯ VS Code æä¾›ç»™æ’ä»¶ä½¿ç”¨çš„ä¸€ç³»åˆ— Javascript APIã€‚é€šè¿‡å‰ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µçš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å·²ç»æ³¨å†Œå¥½äº†å‘½ä»¤å’Œäº‹ä»¶ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å¿…ç„¶å°±æ˜¯æ³¨å†Œäº‹ä»¶å›è°ƒã€‚äº‹ä»¶å›è°ƒåœ¨ vscode ä¸­æ˜¯é€šè¿‡ <code>vscode.commands.registerCommand</code> å‡½æ•°æ¥æ³¨å†Œçš„ï¼Œä¸‹é¢ ğŸ‘‡ğŸ» æ˜¯æˆ‘ä»¬åœ¨å…¥å£æ–‡ä»¶ <code>src/extension.ts</code> ä¸­æ³¨å†Œ <code>juejin-posts.helloWorld</code> å‘½ä»¤ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vscode è¿™ä¸ªæ¨¡å—åŒ…å«äº† VS Code æ‰©å±•çš„ API</span></span><br><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•å½“ä½ çš„æ‰©å±•æ¿€æ´»æ—¶è°ƒç”¨ï¼Œæ‰©å±•ä¼šåœ¨å‘½ä»¤é¦–æ¬¡æ‰§è¡Œæ—¶æ¿€æ´»</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="comment">// å½“ä½ çš„æ‰©å±•è¢«æ¿€æ´»æ—¶ï¼Œè¿™è¡Œä»£ç å°†åªè¢«æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">// ä½¿ç”¨ console.log è¾“å‡ºæ—¥å¿—ä¿¡æ¯æˆ–ä½¿ç”¨ console.error è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Congratulations, your extension &quot;juejin-posts&quot; is now active!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¥å£å‘½ä»¤å·²ç»åœ¨ package.json æ–‡ä»¶ä¸­å®šä¹‰å¥½äº†ï¼Œç°åœ¨è°ƒç”¨ registerCommand æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// registerCommand ä¸­çš„å‚æ•°å¿…é¡»ä¸ package.json ä¸­çš„ command ä¿æŒä¸€è‡´</span></span><br><span class="line">  <span class="keyword">const</span> disposable = vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-posts.helloWorld&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æŠŠä½ çš„ä»£ç å†™åœ¨è¿™é‡Œï¼Œæ¯æ¬¡å‘½ä»¤æ‰§è¡Œæ—¶éƒ½ä¼šè°ƒç”¨è¿™é‡Œçš„ä»£ç </span></span><br><span class="line">    <span class="comment">// ç»™ç”¨æˆ·æ˜¾ç¤ºä¸€ä¸ªæ¶ˆæ¯æç¤º</span></span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">showInformationMessage</span>(<span class="string">&#x27;Hello World from Juejin Posts!&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(disposable);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“ä½ çš„æ‰©å±•è¢«åœç”¨æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deactivate</span>(<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="é›†æˆ-webview"><a href="#é›†æˆ-webview" class="headerlink" title="é›†æˆ webview"></a>é›†æˆ webview</h2><h3 id="æ³¨å†Œå‘½ä»¤"><a href="#æ³¨å†Œå‘½ä»¤" class="headerlink" title="æ³¨å†Œå‘½ä»¤"></a>æ³¨å†Œå‘½ä»¤</h3><p>1ã€<em>package.json</em> æ¿€æ´»äº‹ä»¶ï¼ˆ<code>activationEvents</code>ï¼‰ä¸­æ·»åŠ  <code>&quot;onCommand:juejin-posts.start&quot;</code></p><p>2ã€<em>package.json</em> å‘½ä»¤ï¼ˆ<code>commands</code>ï¼‰ä¸­æ·»åŠ ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;juejin-posts.start&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;start&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Juejin Posts&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>3ã€<em>src&#x2F;extension.ts</em> ä¸­æ³¨å†Œå‘½ä»¤</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-posts.start&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Truth is endless. Keep coding...</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-webview-é¢æ¿"><a href="#åˆ›å»º-webview-é¢æ¿" class="headerlink" title="åˆ›å»º webview é¢æ¿"></a>åˆ›å»º webview é¢æ¿</h3><h4 id="åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿"><a href="#åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿" class="headerlink" title="åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿"></a>åˆ›å»ºä¸€ä¸ªç©ºç™½çš„é¢æ¿</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¹¶æ˜¾ç¤ºæ–°çš„webview</span></span><br><span class="line"><span class="keyword">const</span> panel = vscode.<span class="property">window</span>.<span class="title function_">createWebviewPanel</span>(</span><br><span class="line">  <span class="string">&#x27;juejin-posts&#x27;</span>, <span class="comment">// åªä¾›å†…éƒ¨ä½¿ç”¨ï¼Œè¿™ä¸ª webview çš„æ ‡è¯†</span></span><br><span class="line">  <span class="string">&#x27;Juejin Posts&#x27;</span>, <span class="comment">// ç»™ç”¨æˆ·æ˜¾ç¤ºçš„é¢æ¿æ ‡é¢˜</span></span><br><span class="line">  vscode.<span class="property">vscode</span>.<span class="property">ViewColumn</span>.<span class="property">One</span>, <span class="comment">// ç»™æ–°çš„ webview é¢æ¿ä¸€ä¸ªç¼–è¾‘å™¨è§†å›¾</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">enableScripts</span>: <span class="literal">true</span>, <span class="comment">// å¯ç”¨ javascript è„šæœ¬</span></span><br><span class="line">    <span class="attr">retainContextWhenHidden</span>: <span class="literal">true</span>, <span class="comment">// éšè—æ—¶ä¿ç•™ä¸Šä¸‹æ–‡</span></span><br><span class="line">  &#125; <span class="comment">// webview é¢æ¿çš„å†…å®¹é…ç½®</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨äº† <a href="https://vscode-api.js.org/modules/window.html#createWebviewPanel">window.createWebviewPanel</a> API åˆ›å»ºäº†ä¸€ä¸ª webview é¢æ¿ï¼Œç°åœ¨æˆ‘ä»¬å°è¯•è¿è¡Œ <code>juejin-posts.start</code> å°±å¯ä»¥æ‰“å¼€ä¸€ä¸ª webview é¢æ¿ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d85ad985232542f587376e5073feb1a1~tplv-k3u1fbpfcp-zoom-1.image"></p><h4 id="ç»™é¢æ¿è®¾ç½®å†…å®¹"><a href="#ç»™é¢æ¿è®¾ç½®å†…å®¹" class="headerlink" title="ç»™é¢æ¿è®¾ç½®å†…å®¹"></a>ç»™é¢æ¿è®¾ç½®å†…å®¹</h4><p>ä¸Šé¢æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç©ºç™½çš„é¢æ¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç»™é¢æ¿æ·»åŠ å†…å®¹å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>panel.webview.html</code> æ¥è®¾ç½® HTML å†…å®¹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getWebviewContent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">    &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;title&gt;Juejin Posts&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;style&gt;</span></span><br><span class="line"><span class="string">          html, body &#123;</span></span><br><span class="line"><span class="string">            padding: 0px;</span></span><br><span class="line"><span class="string">            height: 100vh;</span></span><br><span class="line"><span class="string">            position: relative;</span></span><br><span class="line"><span class="string">            margin: 0;</span></span><br><span class="line"><span class="string">            padding: 0;</span></span><br><span class="line"><span class="string">            overflow: hidden;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">          #yoyo &#123;</span></span><br><span class="line"><span class="string">            position: absolute;</span></span><br><span class="line"><span class="string">            bottom: 50px;</span></span><br><span class="line"><span class="string">            right: -90px;</span></span><br><span class="line"><span class="string">            opacity: 0;</span></span><br><span class="line"><span class="string">            transition: .25s ease-in-out</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">          #yoyo:hover &#123;</span></span><br><span class="line"><span class="string">            opacity: 1;</span></span><br><span class="line"><span class="string">            right: 0;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &lt;/style&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">      &lt;a href=&quot;https://juejin.cn&quot;&gt;&lt;img id=&quot;yoyo&quot; src=&quot;https://cdn.jsdelivr.net/gh/youngjuning/images/20210817163229.png&quot; width=&quot;100&quot; /&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="comment">// ç»™ webview panel è®¾ç½® HTML å†…å®¹</span></span><br><span class="line">panel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getWebviewContent</span>();</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>é‡æ–°ä½¿ç”¨ <code>juejin-posts.start</code> å‘½ä»¤å°±å¯ä»¥è°ƒæˆæ‚ æ‚ èˆ¹é•¿äº†ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5160d0c76536441b8d1ac3cfcedc0d0e~tplv-k3u1fbpfcp-zoom-1.image"></p><h4 id="é™åˆ¶-webview-è§†å›¾ä¸ºä¸€ä¸ª"><a href="#é™åˆ¶-webview-è§†å›¾ä¸ºä¸€ä¸ª" class="headerlink" title="é™åˆ¶ webview è§†å›¾ä¸ºä¸€ä¸ª"></a>é™åˆ¶ webview è§†å›¾ä¸ºä¸€ä¸ª</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="comment">// è¿½è¸ªå½“å‰ webview é¢æ¿</span></span><br><span class="line">  <span class="keyword">let</span> <span class="attr">currentPanel</span>: vscode.<span class="property">WebviewPanel</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">    vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-posts.start&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è·å–å½“å‰æ´»åŠ¨çš„ç¼–è¾‘å™¨</span></span><br><span class="line">      <span class="keyword">const</span> columnToShowIn = vscode.<span class="property">window</span>.<span class="property">activeTextEditor</span></span><br><span class="line">        ? vscode.<span class="property">window</span>.<span class="property">activeTextEditor</span>.<span class="property">viewColumn</span></span><br><span class="line">        : <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (currentPanel) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªé¢æ¿ï¼Œé‚£å°±æŠŠå®ƒæ˜¾ç¤ºåˆ°ç›®æ ‡åˆ—å¸ƒå±€ä¸­</span></span><br><span class="line">        currentPanel.<span class="title function_">reveal</span>(columnToShowIn);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ä¸ç„¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¢æ¿</span></span><br><span class="line">        currentPanel = vscode.<span class="property">window</span>.<span class="title function_">createWebviewPanel</span>();</span><br><span class="line">        <span class="comment">// å½“å‰é¢æ¿è¢«å…³é—­åé‡ç½®</span></span><br><span class="line">        currentPanel.<span class="title function_">onDidDispose</span>(</span><br><span class="line">          <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            currentPanel = <span class="literal">undefined</span>;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="literal">null</span>,</span><br><span class="line">          context.<span class="property">subscriptions</span></span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://vscode-api-cn.js.org/modules/window.html#activeTextEditor">vscode.window.activeTextEditor</a>ï¼šè·å–å½“å‰æ´»åŠ¨çš„æ–‡æœ¬ç¼–è¾‘å™¨</li><li><a href="https://vscode-api-cn.js.org/interfaces/WebviewPanel.html#reveal">currentPanel.reveal()</a>ï¼šè°ƒç”¨ <code>reveal()</code> æˆ–è€…æ‹–åŠ¨ webview é¢æ¿åˆ°æ–°çš„ç¼–è¾‘å¸ƒå±€ä¸­å»ã€‚</li></ul><h4 id="è®¾ç½®-Icon"><a href="#è®¾ç½®-Icon" class="headerlink" title="è®¾ç½® Icon"></a>è®¾ç½® Icon</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½® Logo</span></span><br><span class="line">panel.<span class="property">iconPath</span> = vscode.<span class="property">Uri</span>.<span class="title function_">file</span>(</span><br><span class="line">  path.<span class="title function_">join</span>(context.<span class="property">extensionPath</span>, <span class="string">&#x27;assets&#x27;</span>, <span class="string">&#x27;icon-juejin.png&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>åœ¨ vscode æ‰©å±•ä¸­æˆ‘ä»¬éœ€è¦é€šè¿‡ <code>vscode.Uri.file</code> æ–¹æ³•è·å–ç£ç›˜ä¸Šçš„èµ„æºè·¯å¾„ã€‚</p><h4 id="webview-è·å–å†…å®¹çš„-Uri"><a href="#webview-è·å–å†…å®¹çš„-Uri" class="headerlink" title="webview è·å–å†…å®¹çš„ Uri"></a>webview è·å–å†…å®¹çš„ Uri</h4><p>ä½ åº”è¯¥ä½¿ç”¨ <code>asWebviewUri</code> ç®¡ç†æ’ä»¶èµ„æºã€‚ä¸è¦ç¡¬ç¼–ç  <code>vscode-resource://</code>ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>asWebviewUri</code> ç¡®ä¿ä½ çš„æ’ä»¶åœ¨äº‘ç«¯ç¯å¢ƒä¹Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚</p><p>åœ¨ <a href="http://tny.im/jb4go">@luozhu&#x2F;vscode-utils</a> ä¸­æˆ‘ä»¬å¯¹è·å–æœ¬åœ°èµ„æºè·¯å¾„åšäº†å°è£…ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å†…å®¹çš„ Uri</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getDiskPath</span> = (<span class="params">fileName: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> webviewPanel.<span class="property">webview</span>.<span class="title function_">asWebviewUri</span>(</span><br><span class="line">    vscode.<span class="property">Uri</span>.<span class="title function_">file</span>(path.<span class="title function_">join</span>(context.<span class="property">extensionPath</span>, rootPath, <span class="string">&#x27;dist&#x27;</span>, fileName))</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-umi-å¼€å‘-webview"><a href="#ä½¿ç”¨-umi-å¼€å‘-webview" class="headerlink" title="ä½¿ç”¨ umi å¼€å‘ webview"></a>ä½¿ç”¨ umi å¼€å‘ webview</h3><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬é€šè¿‡è°ƒæˆæ‚ æ‚ èˆ¹é•¿ç†Ÿæ‚‰äº† webview é¢æ¿çš„åˆ›å»ºï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨ umijs æ¥ä»£æ›¿ HTML çš„å†…å®¹ã€‚</p><p><code>panel.webview.html</code> ä¸­çš„å†…å®¹å…¶å®å°±æ˜¯æ­£å¸¸çš„ HTML+JavaScript+CSS ä»£ç ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å‰ç«¯æŠ€æœ¯å»ç¼–å†™å®ƒçš„å†…å®¹ï¼Œæ¯”å¦‚ jqueryã€bootstrapã€Vue ä»¥åŠ Reactã€‚è™½ç„¶æœ¬æ–‡çš„ä¾‹å­æ˜¯åŸºäº umijs å¼€å‘ webview çš„å†…å®¹ï¼Œä½†æ˜¯å…¶ä»–æŠ€æœ¯åŸç†æ˜¯ä¸€æ ·çš„ï¼Œæ´›ç«¹åœ¨åç»­ä¹Ÿä¼šæä¾›å¤šä¸ªæŠ€æœ¯çš„ vscode webview å¼€å‘è„šæ‰‹æ¶ã€‚</p><h4 id="å°è£…è·å–-umijs-æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•"><a href="#å°è£…è·å–-umijs-æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•" class="headerlink" title="å°è£…è·å– umijs æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•"></a>å°è£…è·å– umijs æ‰“åŒ…äº§ç‰©çš„æ–¹æ³•</h4><p>æˆ‘ä»¬çŸ¥é“ <code>umi build</code> å‘½ä»¤ä¼šåœ¨ <em>web&#x2F;dist</em> äº§ç”Ÿ index.htmlã€umi.jsã€umi.css ä¸‰ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ ¹æ® index.html æ”¹é€ å‰é¢çš„ getWebviewContent æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–åŸºäº umijs çš„ webview å†…å®¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context æ‰©å±•ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> webviewPanel webview é¢æ¿å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rootPath webview æ‰€åœ¨è·¯å¾„ï¼Œé»˜è®¤ web</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> umiVersion umi ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> <span class="variable">string</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getUmiContent</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  context: vscode.ExtensionContext,</span></span><br><span class="line"><span class="params">  webviewPanel: vscode.WebviewPanel,</span></span><br><span class="line"><span class="params">  umiVersion?: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  rootPath = <span class="string">&#x27;web&#x27;</span></span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// è·å–ç£ç›˜ä¸Šçš„èµ„æºè·¯å¾„</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getDiskPath</span> = (<span class="params">fileName: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> webviewPanel.<span class="property">webview</span>.<span class="title function_">asWebviewUri</span>(</span><br><span class="line">      vscode.<span class="property">Uri</span>.<span class="title function_">file</span>(path.<span class="title function_">join</span>(context.<span class="property">extensionPath</span>, rootPath, <span class="string">&#x27;dist&#x27;</span>, fileName))</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;html&gt;</span></span><br><span class="line"><span class="string">      &lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;meta charset=&quot;utf-8&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;meta</span></span><br><span class="line"><span class="string">          name=&quot;viewport&quot;</span></span><br><span class="line"><span class="string">          content=&quot;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot;</span></span><br><span class="line"><span class="string">        /&gt;</span></span><br><span class="line"><span class="string">        &lt;link rel=&quot;stylesheet&quot; href=&quot;<span class="subst">$&#123;getDiskPath(<span class="string">&#x27;umi.css&#x27;</span>)&#125;</span>&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;style&gt;</span></span><br><span class="line"><span class="string">          html, body, #root &#123;</span></span><br><span class="line"><span class="string">            width: 100%;</span></span><br><span class="line"><span class="string">            height: 100%;</span></span><br><span class="line"><span class="string">            margin: 0;</span></span><br><span class="line"><span class="string">            padding: 0;</span></span><br><span class="line"><span class="string">            overflow: hidden;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &lt;/style&gt;</span></span><br><span class="line"><span class="string">        &lt;script&gt;</span></span><br><span class="line"><span class="string">          //! umi version: <span class="subst">$&#123;umiVersion&#125;</span></span></span><br><span class="line"><span class="string">        &lt;/script&gt;</span></span><br><span class="line"><span class="string">      &lt;/head&gt;</span></span><br><span class="line"><span class="string">      &lt;body&gt;</span></span><br><span class="line"><span class="string">        &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;script src=&quot;<span class="subst">$&#123;getDiskPath(<span class="string">&#x27;umi.js&#x27;</span>)&#125;</span>&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">      &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æç¤ºï¼šä¸Šé¢çš„æ–¹æ³•æˆ‘å·²ç»å°è£…åœ¨ <a href="https://github.com/youngjuning/luozhu/tree/main/packages/vscode-utils">@luozhu&#x2F;vscode-utils</a> çš„ä¸­ã€‚</p></blockquote><p>æˆ‘ä»¬ä½¿ç”¨ getUmiContent é‡æ–°å‰é¢çš„ä»£ç ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getUmiContent &#125; <span class="keyword">from</span> <span class="string">&#x27;@luozhu/vscode-utils&#x27;</span>;</span><br><span class="line">...</span><br><span class="line">panel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getUmiContent</span>(context, panel, <span class="string">&#x27;3.5.17&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="ä¼˜åŒ–æ‰“åŒ…"><a href="#ä¼˜åŒ–æ‰“åŒ…" class="headerlink" title="ä¼˜åŒ–æ‰“åŒ…"></a>ä¼˜åŒ–æ‰“åŒ…</h4><p>ç”±äºæˆ‘ä»¬å°è£…äº† <code>getUmiContent</code> æ–¹æ³•ï¼Œ<code>umi build</code> ç”Ÿæˆçš„ index.html å°±æ²¡æœ‰ç”¨äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>HTML=none umi build</code> å‘½ä»¤åœ¨æ‰“åŒ…çš„æ—¶å€™ä¸ç”Ÿæˆ index.html æ–‡ä»¶ã€‚</p><p>å¦å¤–ç›®å‰ <a href="https://github.com/umijs/umi/issues/7132">umijs çš„ mfsu ä¸æ”¯æŒ writeToDisk æ–¹æ³•</a>ï¼Œå¦‚æœåç»­æ”¯æŒäº†å¯ä»¥ä½¿ç”¨ mfsu ä¼˜åŒ–è°ƒè¯•é€Ÿåº¦ã€‚</p><blockquote><p>åˆ›å»º webview é¢æ¿çš„ä»»åŠ¡å¤§éƒ¨åˆ†éƒ½æ¯”è¾ƒé‡å¤ï¼Œä¸ºäº†æ²‰æ·€æœ€ä½³å®è·µï¼Œæˆ‘åœ¨ <a href="https://github.com/youngjuning/luozhu/tree/main/packages/vscode-utils">@luozhu&#x2F;vscode-utils</a> å°è£…äº† <a href="http://tny.im/bHLQx">createUmiWebviewPanel</a> æ–¹æ³•ã€‚</p></blockquote><h3 id="ç»™-webview-å†…å®¹åŠ ä¸Šä¸»é¢˜"><a href="#ç»™-webview-å†…å®¹åŠ ä¸Šä¸»é¢˜" class="headerlink" title="ç»™ webview å†…å®¹åŠ ä¸Šä¸»é¢˜"></a>ç»™ webview å†…å®¹åŠ ä¸Šä¸»é¢˜</h3><p>webview å¯ä»¥åŸºäºå½“å‰çš„ VS Code ä¸»é¢˜å’Œ CSS æ”¹å˜è‡ªèº«çš„æ ·å¼ã€‚VS Code å°†ä¸»é¢˜åˆ†æˆ 3 ç§ç±»åˆ«ï¼Œè€Œä¸”åœ¨ body å…ƒç´ ä¸ŠåŠ ä¸Šäº†ç‰¹æ®Šç±»åä»¥è¡¨æ˜å½“å‰ä¸»é¢˜ï¼Œæˆ‘ä»¬åœ¨ umi ä¸­å…¨å±€åŠ å…¥ä¸‹é¢çš„æ ·å¼ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">body.<span class="property">vscode</span>-light &#123;</span><br><span class="line">  h1, h2, h3, h4, h5, h6 &#123;</span><br><span class="line">    <span class="attr">color</span>: black;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">color</span>: black;</span><br><span class="line">  background-<span class="attr">color</span>: <span class="title function_">var</span>(--vscode-editor-background);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body.<span class="property">vscode</span>-dark &#123;</span><br><span class="line">  h1, h2, h3, h4, h5, h6 &#123;</span><br><span class="line">    <span class="attr">color</span>: white;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">color</span>: white;</span><br><span class="line">  background-<span class="attr">color</span>: <span class="title function_">var</span>(--vscode-editor-background);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body.<span class="property">vscode</span>-high-contrast &#123;</span><br><span class="line">  h1, h2, h3, h4, h5, h6 &#123;</span><br><span class="line">    <span class="attr">color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attr">color</span>: red;</span><br><span class="line">  background-<span class="attr">color</span>: <span class="title function_">var</span>(--vscode-editor-background);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºè¿™éƒ¨åˆ†é€‚é…å¤§éƒ¨åˆ†æ˜¯é€šç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°†å®ƒå°è£…è¿›äº† <code>@luozhu/vscode-utils</code> çš„ <code>getUmiContent</code> ä¸­äº†ã€‚</p><h2 id="webview-ä¸-vscode-äº¤äº’"><a href="#webview-ä¸-vscode-äº¤äº’" class="headerlink" title="webview ä¸ vscode äº¤äº’"></a>webview ä¸ vscode äº¤äº’</h2><h3 id="webview-ä¸­æ‰§è¡Œè„šæœ¬"><a href="#webview-ä¸­æ‰§è¡Œè„šæœ¬" class="headerlink" title="webview ä¸­æ‰§è¡Œè„šæœ¬"></a>webview ä¸­æ‰§è¡Œè„šæœ¬</h3><p>vscode ä¸­çš„ webview æœ¬è´¨å°±æ˜¯ä¸€ä¸ª iframeï¼Œå› æ­¤æˆ‘ä»¬æ˜¯å¯ä»¥å† webview ä¸­æ‰§è¡Œè„šæœ¬çš„ï¼Œåªä¸è¿‡åœ¨ vscode ä¸­ webview é»˜è®¤ç¦ç”¨äº† JavaScriptï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨ <code>createWebviewPanel</code> API æ—¶ä¼ å…¥ <code>enableScripts: true</code> å³å¯ã€‚</p><h3 id="æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™-webview"><a href="#æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™-webview" class="headerlink" title="æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™ webview"></a>æ’ä»¶ä¼ é€’ä¿¡æ¯ç»™ webview</h3><p>webview çš„è„šæœ¬èƒ½åšåˆ°ä»»ä½•æ™®é€šç½‘é¡µè„šæœ¬èƒ½åšåˆ°çš„äº‹æƒ…ï¼Œä½†æ˜¯ webview è¿è¡Œåœ¨è‡ªå·±çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè„šæœ¬æ˜¯ä¸èƒ½è®¿é—® VS Code API çš„ã€‚æˆ‘ä»¬éœ€è¦å€ŸåŠ© postMessage è¿™ç§äº‹ä»¶çš„æ–¹å¼ä¼ é€’ä¿¡æ¯ã€‚åœ¨ vscode ä¸­ï¼Œæˆ‘ä»¬åœ¨ vscode ä¾§å¯ä»¥ä½¿ç”¨ <a href="https://vscode-api-cn.js.org/interfaces/Webview.html#postMessage">Webview.postMessage</a> å‘å¸ƒäº‹ä»¶å¹¶å‘é€ä»»ä½•åºåˆ—åŒ–çš„ JSON æ•°æ®ï¼Œåœ¨ webview ä¾§åˆ™ä½¿ç”¨ <code>window.addEventListener(&#39;message&#39; event =&gt; &#123; ... &#125;)</code> æ¥å¤„ç†è¿™äº›ä¿¡æ¯ï¼š</p><p><strong>vscode ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œä¸€ä¸ªæ–°çš„å‘½ä»¤</span></span><br><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-me.author&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!currentPanel) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠä¿¡æ¯å‘é€åˆ° webview</span></span><br><span class="line">    <span class="comment">// ä½ å¯ä»¥å‘é€ä»»ä½•åºåˆ—åŒ–çš„ JSON æ•°æ®</span></span><br><span class="line">    currentPanel.<span class="property">webview</span>.<span class="title function_">postMessage</span>(&#123; <span class="attr">method</span>: <span class="string">&#x27;showAuthor&#x27;</span> &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Modal</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line">...</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> message = event.<span class="property">data</span>;</span><br><span class="line">  <span class="keyword">switch</span> (message.<span class="property">method</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;showAuthor&#x27;</span>: &#123;</span><br><span class="line">      <span class="title class_">Modal</span>.<span class="title function_">info</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;æ´›ç«¹&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ´›ç«¹ğŸ‹ä¸€åªä½åœ¨æ­åŸçš„æœ¨ç³»å‰ç«¯ğŸ§šğŸ»â€â™€ï¸ï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ğŸ“šï¼Œå¯ä»¥é€šè¿‡</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://juejin.cn/user/325111174662855/posts&quot;</span>&gt;</span>ç‚¹èµ<span class="tag">&lt;/<span class="name">a</span>&gt;</span>å¸®æˆ‘èšé›†çµåŠ›â­ï¸ã€‚</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        ),</span><br><span class="line">        <span class="attr">okText</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://juejin.cn/user/325111174662855/posts&quot;</span>&gt;</span>ç‚¹èµ o(ï¿£â–½ï¿£)ï½„<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœ</strong>ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0dd7dd37db954d84925ac1c0f60cb965~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="webview-ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶"><a href="#webview-ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶" class="headerlink" title="webview ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶"></a>webview ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶</h3><p>webview åå‘ä¼ é€’ä¿¡æ¯ç»™æ’ä»¶çš„åŸç†ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ç”±äº webview çš„ä¸Šä¸‹æ–‡é™åˆ¶ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡ <code>acquireVsCodeApi</code> å‡½æ•°è·å–é˜‰å‰²ç‰ˆçš„ VS Code API å¯¹è±¡ï¼Œè¿™ä¸ªé˜‰å‰²çš„å¯¹è±¡ä¸Šæœ‰ä¸€ä¸ª <code>postMessage</code> å‡½æ•°å¯ä»¥ä¾›æˆ‘ä»¬å‘é€äº‹ä»¶ç”¨ã€‚æ³¨æ„ <code>acquireVsCodeApi</code> ä¸ªä¼šè¯ä¸­åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œé‡å¤è°ƒç”¨ä¼šæŠ¥é”™ã€‚è€Œåœ¨æ’ä»¶ä¾§åˆ™å¯ä»¥é€šè¿‡ <a href="https://vscode-api-cn.js.org/interfaces/Webview.html#onDidReceiveMessage">Webview.onDidReceiveMessage</a> å¤„ç† webview ä¼ é€’çš„ä¿¡æ¯ã€‚æˆ‘ä»¬æ¥å†™ä¸€ä¸ªåœ¨ webview ä¸­è°ƒç”¨ <code>vscode.window.showInformationMessage</code> çš„ä¾‹å­ï¼š</p><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vscode = <span class="title function_">acquireVsCodeApi</span>();</span><br><span class="line">vscode.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;showMessage&#x27;</span>,</span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">text</span>: <span class="string">`ä¸ºäººæ°‘æœåŠ¡`</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>æ’ä»¶ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤„ç† webview ä¸­çš„ä¿¡æ¯</span></span><br><span class="line">currentPanel.<span class="property">webview</span>.<span class="title function_">onDidReceiveMessage</span>(</span><br><span class="line">  <span class="function"><span class="params">message</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (message.<span class="property">method</span> === <span class="string">&#x27;showMessage&#x27;</span>) &#123;</span><br><span class="line">      vscode.<span class="property">window</span>.<span class="title function_">showInformationMessage</span>(message.<span class="property">params</span>.<span class="property">content</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">undefined</span>,</span><br><span class="line">  context.<span class="property">subscriptions</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœ</strong>ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c32c8b374b534d6fac1cb552287de6ca~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="åœ¨-webview-ä¸­è¯·æ±‚æ¥å£"><a href="#åœ¨-webview-ä¸­è¯·æ±‚æ¥å£" class="headerlink" title="åœ¨ webview ä¸­è¯·æ±‚æ¥å£"></a>åœ¨ webview ä¸­è¯·æ±‚æ¥å£</h3><p>ä¸€å¼€å§‹ï¼Œæˆ‘ä»¥ä¸ºè¿™æ˜¯ä¸ªè½»æ¾çš„å·¥ä½œï¼Œç›´åˆ°é‡åˆ°è·¨åŸŸåŠå¤©è§£å†³ä¸äº†åæˆ‘ç»æœ›äº†ï¼Œåœ¨ <a href="https://juejin.cn/post/6844903966799577101#heading-3">VSCode WebViewæ’ä»¶ï¼ˆæ‰©å±•ï¼‰å¼€å‘å®æˆ˜</a> ä¸€æ–‡ä¸­æˆ‘ç»ˆäºçŸ¥é“äº† vscode webview å†…éƒ¨æ˜¯ä¸å…è®¸å‘é€ ajax è¯·æ±‚ï¼Œæ‰€æœ‰ ajax è¯·æ±‚éƒ½æ˜¯è·¨åŸŸçš„ï¼Œå› ä¸º webview æœ¬èº«æ˜¯æ²¡æœ‰ host çš„ã€‚</p><p>äººè£‚å¼€äº†ï¼Œè¿™ä»€ä¹ˆé¬¼å‘€ï¼Œæˆ‘ä»¬æ ¸å¿ƒçš„éœ€æ±‚å°±æ˜¯è¯·æ±‚æ˜é‡‘çš„æ¥å£è·å–æˆ‘ä»¬çš„æ–‡ç« åˆ—è¡¨å‘€ï¼Œé‚£æˆ‘ä»¬è¿˜æœ‰åŠæ³•å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå…¶å®è¿˜æ˜¯å€ŸåŠ©ä¸Šé¢æˆ‘ä»¬æåˆ°çš„é€šä¿¡æœºåˆ¶æŠŠè¯·æ±‚æ¥å£çš„ä»»åŠ¡äº¤ç»™ vscode å»å¤„ç†ï¼Œå®Œäº‹å†è®© vscode æŠŠæ•°æ®é€šè¿‡ <code>postMessage</code> è¿”å›ç»™æˆ‘ä»¬ï¼Œå¤šè¯´æ— ç›Šï¼Œæˆ‘ä»¬æ¥çœ‹ä»£ç ï¼š</p><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// @ts-ignore</span></span><br><span class="line">  <span class="keyword">const</span> vscode = <span class="keyword">typeof</span> acquireVsCodeApi === <span class="string">&#x27;function&#x27;</span> ? <span class="title function_">acquireVsCodeApi</span>() : <span class="literal">null</span>;</span><br><span class="line">  vscode.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;queryPosts&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (method === <span class="string">&#x27;queryPosts&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> message = event.<span class="property">data</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><p><strong>vscode ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤„ç† webview ä¸­çš„ä¿¡æ¯ï¼Œå¹¶è¿”å›æ¥å£è¯·æ±‚çš„æ•°æ®</span></span><br><span class="line">currentPanel.<span class="property">webview</span>.<span class="title function_">onDidReceiveMessage</span>(</span><br><span class="line">  <span class="keyword">async</span> message =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">events</span>(message);</span><br><span class="line">    currentPanel?.<span class="property">webview</span>.<span class="title function_">postMessage</span>(&#123; data &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">undefined</span>,</span><br><span class="line">  context.<span class="property">subscriptions</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="luozhu-x2F-vscode-channel"><a href="#luozhu-x2F-vscode-channel" class="headerlink" title="@luozhu&#x2F;vscode-channel"></a>@luozhu&#x2F;vscode-channel</h3><p>å‰é¢æˆ‘ä»¬çŸ¥é“äº†ä½¿ç”¨ <a href="https://vscode-api-cn.js.org/interfaces/Webview.html#postMessage">Webview.postMessage</a>ã€<a href="https://vscode-api-cn.js.org/interfaces/Webview.html#onDidReceiveMessage">Webview.onDidReceiveMessage</a>ã€<code>acquireVsCodeApi().postMessage</code> å’Œ <code>window.addEventListener</code> å°±å¯ä»¥æ»¡è¶³å„ç§é€šä¿¡éœ€æ±‚äº†ï¼Œé‚£ <code>@luozhu/vscode-channel</code> åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å— <a href="https://www.npmjs.com/package/js-channel">js-channel</a> å¯å‘ï¼Œ<code>@luozhu/vscode-channel</code> ä¸»è¦æ˜¯å°è£…äº† webview ä¸ vscode äº¤äº’æµç¨‹ï¼Œæ ¸å¿ƒåŸç†æ˜¯é€šè¿‡æš´éœ² <code>call</code>ã€<code>bind</code> æ–¹æ³•æŠ¹å¹³ API çš„å·®å¼‚ï¼Œå‡å°‘é‡å¤ä»£ç é‡ã€‚å…¶ä¸­å‚è€ƒ appworks å’Œ cs-channel ä½¿ç”¨ uuid ä¿è¯äº¤äº’çš„å¯é æ€§ã€‚Talk is cheap, show you the codeï¼š</p><p><strong>webview ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»º channel å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> channel = <span class="keyword">new</span> <span class="title class_">Channel</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶ç­‰å¾…å…¶è¿”å›æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> &#123; payload &#125; = <span class="keyword">await</span> channel.<span class="title function_">call</span>(&#123; <span class="attr">method</span>: <span class="string">&#x27;queryPosts&#x27;</span> &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(payload);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>webview ä¸­ç”±äº acquireVsCodeApi åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œä¹‹ååˆéœ€è¦åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ <code>wev/src/layouts/index.ts</code> ä¸­åˆ›å»ºä¸€æ¬¡å¹¶æŒ‚è½½åˆ° <code>window</code> å¯¹è±¡ä¸Šæ¯”è¾ƒåˆé€‚ã€‚</p></blockquote><p><strong>vscode ä¾§</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vscode ä¾§çš„ channel éœ€è¦ä¾èµ–ä¸Šä¸‹æ–‡å’Œ WebviewPanel å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> channel = <span class="keyword">new</span> <span class="title class_">Channel</span>(context, currentPanel);</span><br><span class="line"><span class="comment">// ç»‘å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä¸€èˆ¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªï¼Œç„¶åæ ¹æ®çº¦å®šåšåˆ†å‘å³å¯</span></span><br><span class="line">channel.<span class="title function_">bind</span>(<span class="keyword">async</span> message =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; eventType, method, params &#125; = message;</span><br><span class="line">  <span class="comment">// å®é™…å‘èµ·è¯·æ±‚è·å–æ•°æ®çš„åœ°æ–¹</span></span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> events[eventType][method](params);</span><br><span class="line">  <span class="comment">// è¿™é‡Œå°†è·å–çš„æ•°æ®ç›´æ¥è¿”å›å³å¯ï¼Œchannel å†…éƒ¨ä¼šè¿›è¡Œæ¶ˆæ¯åˆå¹¶å’Œå›ä¼ ã€‚</span></span><br><span class="line">  <span class="comment">// å¦‚æœåªæ˜¯æ‰§è¡Œä¸€ä¸ªåŠŸèƒ½ï¼Œä¸å†™ return è¯­å¥å³å¯ï¼Œå†…éƒ¨ä¼šè¿›è¡Œåˆ¤æ–­é™çº§æˆå•å·¥é€šä¿¡ã€‚</span></span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="vscode-å›½é™…åŒ–"><a href="#vscode-å›½é™…åŒ–" class="headerlink" title="vscode å›½é™…åŒ–"></a>vscode å›½é™…åŒ–</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ vscode ä¸­æ˜¯å¯ä»¥åˆ‡æ¢è¯­è¨€ç¯å¢ƒçš„ï¼Œä¸€æ¬¾ä¼˜ç§€çš„ vscode æ‰©å±•è‡³å°‘è¦æ”¯æŒä¸­è‹±ä¸¤ç§è¯­è¨€ã€‚è€Œä¸”æ”¯æŒå›½é™…åŒ–å¯ä»¥è®©ä½ çš„æ’ä»¶å—ä¼—ç›´æ¥çªç ´å›½ç•Œé™åˆ¶ã€‚vscode å›½é™…åŒ–åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯é…ç½®çš„å›½é™…åŒ–ï¼Œä¸€éƒ¨åˆ†æ˜¯ä»£ç ä¸­çš„å›½é™…åŒ–ï¼Œå¦ä¸€éƒ¨åˆ†åˆ™æ˜¯ webview ä¸­ umijs çš„å›½é™…åŒ–ã€‚æœ¬ç« æˆ‘ä»¬å°±æ¥å…·ä½“çœ‹ä¸€ä¸‹å¦‚ä½•åœ¨ vscode ä¸­å®ç°å›½é™…åŒ–ã€‚</p><h3 id="é…ç½®å›½é™…åŒ–"><a href="#é…ç½®å›½é™…åŒ–" class="headerlink" title="é…ç½®å›½é™…åŒ–"></a>é…ç½®å›½é™…åŒ–</h3><p>æˆ‘ä»¬å·²ç»çŸ¥é“ vscode ä¸­çš„é…ç½®éƒ½æ˜¯åœ¨ <em>package.json</em> ä¸­ï¼Œè€Œé…ç½®çš„å›½é™…åŒ–æ˜¯çº¦å®šåœ¨ <code>package.nls.json</code> å’Œ <code>package.nls.zh-cn.json</code> è¿™ç§æ–‡ä»¶ä¸­ç¼–å†™ã€‚æ¯”å¦‚æˆ‘ä»¬è¦åœ¨ä¸­è‹±æ–‡ç¯å¢ƒä¸‹å‘½ä»¤é…ç½®ä¸­è‹±æ–‡ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>package.nls.json</code> ä¸­å†™ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes.category.juejin-me&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Juejin Me&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>package.nls.zh-cn.json</code> å†™ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes.category.juejin-me&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ˜é‡‘ä¸€ä¸‹&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç„¶å <code>package.json</code> ä¸­å†™ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;commands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;%contributes.category.juejin-me%&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="ä»£ç ä¸­å›½é™…åŒ–"><a href="#ä»£ç ä¸­å›½é™…åŒ–" class="headerlink" title="ä»£ç ä¸­å›½é™…åŒ–"></a>ä»£ç ä¸­å›½é™…åŒ–</h3><p>æ¨èä½¿ç”¨æ´›ç«¹è´¡çŒ®è¿‡ä»£ç çš„ <a href="https://github.com/axetroy/vscode-nls-i18n">vscode-nls-i18n</a>ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œé…ç½®çš„è¯å’Œä¸Šä¸€èŠ‚ä¸€æ ·ï¼Œåœ¨ <code>src/extension.ts</code> ä¸­ä½¿ç”¨ <code>init</code> æ–¹æ³•åˆå§‹åŒ–ï¼Œç„¶åä½¿ç”¨ <code>localize</code> æ–¹æ³•å®ç°å›½é™…åŒ–ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; init, localize &#125; <span class="keyword">from</span> <span class="string">&#x27;vscode-nls-i18n&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="title function_">init</span>(context.<span class="property">extensionPath</span>); <span class="comment">// åˆå§‹åŒ–å›½é™…åŒ–é…ç½®ã€‚åªç”¨åœ¨æ‰©å±•æ¿€æ´»æ—¶åˆå§‹åŒ–ä¸€æ¬¡</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">localize</span>(<span class="string">&#x27;extension.activeLog&#x27;</span>)); <span class="comment">// ä¹‹åå°±å¯ä»¥åœ¨å„ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="umijs-å›½é™…åŒ–"><a href="#umijs-å›½é™…åŒ–" class="headerlink" title="umijs å›½é™…åŒ–"></a>umijs å›½é™…åŒ–</h3><p>umijs çš„å›½é™…åŒ–éœ€è¦ä½¿ç”¨ <code>@umijs/plugin-locale</code> æ’ä»¶æ”¯æŒï¼Œè¿™ä¸ªæ’ä»¶å°è£…äº† <code>react-intl</code>ï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹ï¼š</p><p>1ã€.umirc.ts ä¸­é…ç½® <code>local</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">locale</span>: &#123;&#125;</span><br></pre></td></tr></table></figure><p>2ã€åœ¨ <em>src</em> ç›®å½•ä¸‹åˆ›å»º <code>locales</code> å¹¶åˆ›å»º <code>en.ts</code> æˆ– <code>zh-CN.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/locales/en.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">WELCOME_TO_UMI_WORLD</span>: <span class="string">&quot;welcome to umi&#x27;s world&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/locales/zh-CN.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">WELCOME_TO_UMI_WORLD</span>: <span class="string">&#x27;æ¬¢è¿å…‰ä¸´  umi  çš„ä¸–ç•Œ&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>3ã€ä½¿ç”¨å›½é™…åŒ–</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useIntl &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="attr">default</span>: <span class="title class_">React</span>.<span class="property">FunctionComponent</span> = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> intl = <span class="title function_">useIntl</span>()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">     &lt;div&gt;</span><br><span class="line">     &#123;intl.<span class="title function_">formatMessage</span>(</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="string">&#x27;WELCOME_TO_UMI_WORLD&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      )&#125;&lt;div&gt;</span><br><span class="line">   )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4ã€åˆ‡æ¢è¯­è¨€</p><p>åˆ‡æ¢è¯­è¨€ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>setLocale</code> æ–¹æ³•ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬ç»™è¿™ä¸ªæ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ <code>false</code> æ¥å®ç°æ— åˆ·æ–°åŠ¨æ€åˆ‡æ¢ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; setLocale &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="comment">// ä¸åˆ·æ–°é¡µé¢</span></span><br><span class="line"><span class="title function_">setLocale</span>(<span class="string">&#x27;zh-CN&#x27;</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>ä¸è¿‡ï¼Œåˆ‡æ¢è¯­è¨€çš„æ—¶æœºåœ¨ä»€ä¹ˆæ—¶å€™å‘¢ï¼Ÿåˆ‡æ¢æ—¶æœºå°±æ˜¯æˆ‘ä»¬è¯­è¨€ç¯å¢ƒæ”¹å˜çš„æ—¶æœºã€‚åœ¨ vscode webview ç¯å¢ƒä¸­ï¼Œå…¶å®å½“ä½¿ç”¨ <code>Config display language</code> æ–¹æ³•åˆ‡æ¢è¯­è¨€ç¯å¢ƒåï¼Œä¼šè¦æ±‚ vscode é‡å¯ã€‚ä¹Ÿå°±è¯´æˆ‘ä»¬åªéœ€è¦åœ¨ webview åˆ›å»ºæ—¶è®¾ç½®ä¸€æ¬¡è¯­è¨€ç¯å¢ƒå³å¯ã€‚ç”±äº vscode å’Œ webview ä¼ å€¼å¤ªå›°éš¾ï¼Œæˆ‘ä»¬é€‰æ‹©åœ¨ <code>getUmiHTMLContent</code> æ—¶ä¼ å¦‚ <code>vscode.env</code>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">vscodeEnv</span> = $&#123;<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(vscode.<span class="property">env</span>)&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬åœ¨ <code>web/src/layouts/index.ts</code> ä¸­è®¾ç½®ä¸€ä¸‹å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setLocale</span>(<span class="variable language_">window</span>.<span class="property">vscodeEnv</span>.<span class="property">language</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><h2 id="â€œæ˜é‡‘ä¸€ä¸‹â€-æ‰©å±•æ ¸å¿ƒå®ç°"><a href="#â€œæ˜é‡‘ä¸€ä¸‹â€-æ‰©å±•æ ¸å¿ƒå®ç°" class="headerlink" title="â€œæ˜é‡‘ä¸€ä¸‹â€ æ‰©å±•æ ¸å¿ƒå®ç°"></a>â€œæ˜é‡‘ä¸€ä¸‹â€ æ‰©å±•æ ¸å¿ƒå®ç°</h2><p>çµæ„Ÿæ¥æºäºç°å®ï¼Œä½œä¸ºæ˜é‡‘çš„é‡åº¦ä½¿ç”¨è€…ï¼Œå‡ ä¹æ¯ç¯‡æ–‡ç« å’Œç¬”è®°éƒ½åŒæ­¥åœ¨è¿™é‡Œã€‚å½“æœ‰äº›çŸ¥è¯†å¿˜è®°éœ€è¦æŸ¥é˜…æˆ–æ‹·è´ä»£ç æ—¶ï¼Œæˆ‘å°±æœ‰åœ¨æ˜é‡‘æœç´¢æˆ‘çš„æ–‡ç« çš„éœ€æ±‚ã€‚ä½†æ˜¯æ˜é‡‘çš„æœç´¢æ˜¯å…¨ç«™çš„ï¼Œå°±ç®—åŠ ä¸Šè‡ªå·±çš„åå­—æœç´¢ä¹Ÿä¼šå‡ºç°å¤§é‡æ— å…³è®°å½•ã€‚â€œæ˜é‡‘ä¸€ä¸‹â€ è¿™ä¸ªåå­—å°±åƒæ’ä»¶åŠŸèƒ½ä¸€æ ·ï¼Œåœ¨ä½ æƒ³æœç´¢è‡ªå·±æ˜é‡‘æ–‡ç« çš„æ—¶å€™å°±å¯ä»¥æ‰“å¼€æ’ä»¶â€œæ˜é‡‘ä¸€ä¸‹â€ è¿›è¡Œæœç´¢ã€‚</p><p>å…¶å®ä¸ºäº†åªæœç´¢åˆ°è‡ªå·±çš„æ–‡ç« ï¼Œæˆ‘æƒ³åˆ°çš„è¿˜æœ‰å¼€å‘ chrome æ’ä»¶æ¥å®ç°ã€‚ä½†æ˜¯è€ƒè™‘åˆ°å¸‚åœºå’Œä¾¿æ·æ€§ï¼Œæˆ‘æœ€ç»ˆè¿˜æ˜¯å†³å®šå¼€å‘ vscode æ’ä»¶æ¥è½åœ°è¿™ä¸ªçµæ„Ÿã€‚æœ¬ç« å°±æ˜¯ç»¼åˆå‰é¢çš„ç»éªŒå®ç° â€œæ˜é‡‘ä¸€ä¸‹â€ çš„æ ¸å¿ƒé€»è¾‘ã€‚</p><h3 id="juejin-me-start-å‘½ä»¤"><a href="#juejin-me-start-å‘½ä»¤" class="headerlink" title="juejin-me.start å‘½ä»¤"></a><code>juejin-me.start</code> å‘½ä»¤</h3><h4 id="vscode-ä¾§å¼€å¯-channel-é€šä¿¡"><a href="#vscode-ä¾§å¼€å¯-channel-é€šä¿¡" class="headerlink" title="vscode ä¾§å¼€å¯ channel é€šä¿¡"></a>vscode ä¾§å¼€å¯ channel é€šä¿¡</h4><p>vscode ä¾§é€šè¿‡ <code>channel.bind</code> ç»‘å®šä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> events <span class="keyword">from</span> <span class="string">&#x27;./events&#x27;</span>;</span><br><span class="line">...</span><br><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-me.start&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    currentPanel = <span class="title function_">createUmiWebviewPanel</span>(</span><br><span class="line">      context,</span><br><span class="line">      <span class="string">&#x27;juejin-me&#x27;</span>,</span><br><span class="line">      <span class="title function_">localize</span>(<span class="string">&#x27;extension.webview-panel.title&#x27;</span>),</span><br><span class="line">      <span class="string">&#x27;assets/icon-luozhu.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;3.5.17&#x27;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// å¤„ç† webview ä¸­çš„ä¿¡æ¯</span></span><br><span class="line">    channel = <span class="keyword">new</span> <span class="title class_">Channel</span>(context, currentPanel);</span><br><span class="line">    channel.<span class="title function_">bind</span>(<span class="keyword">async</span> message =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; eventType, method, params &#125; = message;</span><br><span class="line">      <span class="comment">// æ ¹æ®äº‹ä»¶ç±»å‹ã€æ–¹æ³•ã€å‚æ•°æ¥å®Œæˆä¸€æ¬¡ api è°ƒç”¨ï¼Œå†…ç½®çš„ eventType æœ‰ requestã€command å’Œ variableã€‚</span></span><br><span class="line">      <span class="keyword">const</span> data = <span class="keyword">await</span> events[eventType][method](params);</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125;, vscode);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šæˆ‘ä»¬ä¸éœ€è¦ç»™å®šç›‘å¬äº‹ä»¶åï¼Œå†…éƒ¨ä¼šæ ¹æ® eventId ä¿è¯å¯é æ€§å’Œå…¨å±€å”¯ä¸€æ€§</p></blockquote><h4 id="æ³¨å†Œ-events"><a href="#æ³¨å†Œ-events" class="headerlink" title="æ³¨å†Œ events"></a>æ³¨å†Œ events</h4><p><strong>events&#x2F;index.ts</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">from</span> <span class="string">&#x27;./requests&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">request</span>: requests,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>events&#x2F;requests</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> queryPosts = <span class="keyword">async</span> (<span class="attr">params</span>: &#123; <span class="attr">cursor</span>: <span class="built_in">string</span> &#125;): <span class="title class_">Promise</span>&lt;<span class="built_in">any</span>&gt; =&gt; &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæˆ‘ä»¬æ ¹æ® vscode é…ç½®åŠ¨æ€å–çš„ç”¨æˆ· id</span></span><br><span class="line">  <span class="keyword">const</span> &#123; userId &#125; = vscode.<span class="property">workspace</span>.<span class="title function_">getConfiguration</span>(<span class="string">&#x27;juejin-me&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; cursor &#125; = params;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> request.<span class="title function_">post</span>(<span class="string">&#x27;/article/query_list&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">cursor</span>: <span class="string">`<span class="subst">$&#123;cursor&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">sort_type</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">user_id</span>: userId,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  queryPosts,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>utils&#x2F;request</strong>ï¼š</p><p>è¿™é‡Œç®€å•å°è£…äº†åŸºäº axios çš„è¯·æ±‚å¯¹è±¡ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable no-param-reassign */</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­æ–‡æ–‡æ¡£: http://t.cn/ROfXFuj</span></span><br><span class="line"><span class="comment">// åˆ›å»ºå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://api.juejin.cn/content_api/v1/&#x27;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">10000</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">method</span> === <span class="string">&#x27;get&#x27;</span>) &#123;</span><br><span class="line">      config.<span class="property">paramsSerializer</span> = <span class="function"><span class="params">params</span> =&gt;</span> qs.<span class="title function_">stringify</span>(params, &#123; <span class="attr">arrayFormat</span>: <span class="string">&#x27;repeat&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">showErrorMessage</span>(error.<span class="property">message</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; data &#125; = response;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">showErrorMessage</span>(error.<span class="property">message</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request;</span><br></pre></td></tr></table></figure><h3 id="webview-ä¸­è°ƒç”¨æ¥å£"><a href="#webview-ä¸­è°ƒç”¨æ¥å£" class="headerlink" title="webview ä¸­è°ƒç”¨æ¥å£"></a>webview ä¸­è°ƒç”¨æ¥å£</h3><p>channel æ˜¯åœ¨ <code>web/src/layouts/index.tsx</code> ä¸­åˆå§‹åŒ–å¹¶æŒ‚è½½åˆ° window ä¸Šçš„ï¼Œæˆ‘ä»¬åœ¨ <code>web/src/pages/index.tsx</code> ä¸­è°ƒç”¨ <code>window.channel.call</code> å³å¯è°ƒç”¨æŒ‡å®šæ¥å£ã€‚ç”±äºæˆ‘ä»¬éœ€è¦æ¨¡ç³Šæœç´¢æ‰€æœ‰çš„æ–‡ç« ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨åˆå§‹åŒ–é¡µé¢æ—¶ä¸€æ¬¡è¯·æ±‚å®Œæ‰€æœ‰æ•°æ®ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Homepage</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; payload &#125; = (<span class="keyword">await</span> <span class="variable language_">window</span>.<span class="property">channel</span>.<span class="title function_">call</span>(&#123;</span><br><span class="line">      <span class="attr">eventType</span>: <span class="string">&#x27;request&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;queryPosts&#x27;</span>,</span><br><span class="line">      <span class="attr">params</span>: &#123; cursor &#125;,</span><br><span class="line">    &#125;)) <span class="keyword">as</span> <span class="built_in">any</span>;</span><br><span class="line">    tempData = tempData.<span class="title function_">concat</span>(payload.<span class="property">data</span>);</span><br><span class="line">    <span class="title function_">setData</span>(tempData);</span><br><span class="line">    <span class="keyword">if</span> (!payload.<span class="property">has_more</span>) &#123;</span><br><span class="line">      <span class="title function_">setInitLoading</span>(<span class="literal">false</span>);</span><br><span class="line">      <span class="title function_">setCategories</span>(<span class="title function_">_union</span>([<span class="string">&#x27;å…¨éƒ¨&#x27;</span>, ...tempData.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">category</span>.<span class="property">category_name</span>)]));</span><br><span class="line">      tempData = [];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      cursor += <span class="number">10</span>;</span><br><span class="line">      <span class="title function_">getData</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ›´å¤šå…·ä½“å®ç°ç»†èŠ‚å°±æ˜¯ä¸€äº›é¡µé¢ç¼–å†™é€»è¾‘ï¼Œä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç›´æ¥è¿›æŸ¥çœ‹<a href="https://github.com/youngjuning/juejin-me/tree/main/web">æºç </a>ã€‚</p><h3 id="é…ç½®æ˜é‡‘-ID"><a href="#é…ç½®æ˜é‡‘-ID" class="headerlink" title="é…ç½®æ˜é‡‘ ID"></a>é…ç½®æ˜é‡‘ ID</h3><p><strong>å£°æ˜é…ç½®</strong>ï¼š</p><p>vscode çš„é…ç½®æˆ‘ä»¬éœ€è¦å€ŸåŠ© package.json çš„ <code>contributes.configuration</code> å±æ€§ï¼Œæˆ‘ä»¬çš„æ˜é‡‘ ID æ˜¯ stringï¼Œæ‰€ä»¥å£°æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;configuration&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;%configuration.title%&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;object&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;juejin-me.userId&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;default&quot;</span><span class="punctuation">:</span> <span class="string">&quot;325111174662855&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;%configuration.properties.juejin-me.userId%&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹é…ç½®çš„å‘½ä»¤</strong>ï¼š</p><p>è®©ç”¨æˆ·æ‰“å¼€è®¾ç½®å»ä¿®æ”¹é…ç½®ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ä¸ºäº†ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬æä¾›äº† <code>juejin-me.configUserId</code> å‘½ä»¤ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å‘½ä»¤çš„å®ç°ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">  vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;juejin-me.configUserId&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> userId = <span class="keyword">await</span> vscode.<span class="property">window</span>.<span class="title function_">showInputBox</span>(&#123;</span><br><span class="line">      <span class="attr">placeHolder</span>: <span class="title function_">localize</span>(<span class="string">&#x27;extension.juejin-me.configUserId.placeHolder&#x27;</span>),</span><br><span class="line">      <span class="attr">validateInput</span>: <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (value) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">localize</span>(<span class="string">&#x27;extension.juejin-me.configUserId.validateInput&#x27;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> config = vscode.<span class="property">workspace</span>.<span class="title function_">getConfiguration</span>(<span class="string">&#x27;juejin-me&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    config.<span class="title function_">update</span>(<span class="string">&#x27;userId&#x27;</span>, userId, <span class="literal">true</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li><a href="https://vscode-api-cn.js.org/modules/window.html#showInputBox">vscode.window.showInputBox</a>ï¼šæ‰“å¼€ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œæç¤ºç”¨æˆ·è¾“å…¥æ˜é‡‘ç”¨æˆ· ID</li><li><a href="https://vscode-api-cn.js.org/modules/workspace.html#getConfiguration">vscode.workspace.getConfiguration</a>ï¼šè·å–å·¥ä½œç©ºé—´çš„é…ç½®å¯¹è±¡</li><li><a href="https://vscode-api-cn.js.org/interfaces/WorkspaceConfiguration.html#update">WorkspaceConfiguration.update</a>ï¼šæ›´æ–°ä¸€ä¸ªé…ç½®å€¼ã€‚</li><li><a href="https://vscode-api-cn.js.org/interfaces/InputBoxOptions.html#validateInput">InputBoxOptions.validateInput</a>ï¼šä¸€ä¸ªå¯é€‰çš„å‡½æ•°ï¼Œè¢«è°ƒç”¨æ¥éªŒè¯è¾“å…¥ä¿¡æ¯å¹¶æç¤ºç”¨æˆ·</li></ul><h3 id="æ’ä»¶æ•ˆæœå±•ç¤º"><a href="#æ’ä»¶æ•ˆæœå±•ç¤º" class="headerlink" title="æ’ä»¶æ•ˆæœå±•ç¤º"></a>æ’ä»¶æ•ˆæœå±•ç¤º</h3><p>æ„Ÿå…´è¶£çš„è¯ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æ‰©å±•ä¸­æœç´¢â€œæ˜é‡‘ä¸€ä¸‹â€è‡ªè¡Œä½“éªŒã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac7d2ab498b2469486e8f237fc3b7997~tplv-k3u1fbpfcp-zoom-1.image"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91ae0fdbff7043db9513e539640fcc2e~tplv-k3u1fbpfcp-zoom-1.image"></p><h2 id="å½©è›‹"><a href="#å½©è›‹" class="headerlink" title="å½©è›‹"></a>å½©è›‹</h2><h3 id="luozhu-x2F-create-vscode-webview"><a href="#luozhu-x2F-create-vscode-webview" class="headerlink" title="@luozhu&#x2F;create-vscode-webview"></a>@luozhu&#x2F;create-vscode-webview</h3><p>æœ¬æ–‡ä¸­æœ‰å¾ˆå¤šæœ€ä½³å®è·µï¼Œä¸ºäº†æ–¹ä¾¿ä¹‹ååˆ›å»ºæ–°çš„é¡¹ç›®æ—¶å‡å°‘é‡å¤å·¥ä½œï¼Œæ´›ç«¹æŠ½ç¦»å‡ºäº†ä¸€ä¸ªç®€å•çš„æ¨¡æ¿ã€‚æ˜å‹ç›´æ¥ä½¿ç”¨ <code>yarn create @luozhu/vscode-webview  myvscode</code> å³å¯åˆ›å»ºå‡ºä¸€ä¸ªå±äºè‡ªå·±çš„ vscode æ‰©å±•ã€‚å‚è€ƒæœ¬æ–‡çš„ä¸€äº›å®è·µå†åŠ ä¸€äº›ä½ çš„åˆ›æ„å³å¯å®Œæˆä¸€ä¸ªå‡ºè‰²çš„åŸºäº webview çš„ vscode æ‰©å±•ã€‚</p><h3 id="Word-Count-Juejin"><a href="#Word-Count-Juejin" class="headerlink" title="Word Count Juejin"></a>Word Count Juejin</h3><p>ä¸ºäº†ç­”è°¢æ˜é‡‘å¹³å°å’Œæ˜å‹ä¸€ç›´ä»¥æ¥çš„æ”¯æŒï¼Œæˆ‘ç¼–å†™äº†ä¸€æ¬¾ä¸“ä¸ºæ˜é‡‘é€‚é…çš„ Markdown æ–‡ä»¶å­—æ•°ç»Ÿè®¡ VS Code æ‰©å±•ï¼Œå­—æ•°ç»Ÿè®¡ä¼šå®æ—¶æ˜¾ç¤ºåœ¨çŠ¶æ€æ ã€‚æ¯”èµ·æ¥ vscode å®˜æ–¹çš„ Word Countï¼Œæˆ‘ä»¬æ”¯æŒä¸­æ–‡å­—æ•°ç»Ÿè®¡ï¼Œæ¯”èµ·æ¥ Word Count CJKï¼Œæˆ‘ä»¬æ”¯æŒä¸­è‹±æ–‡æ··æ’ã€‚å¦‚æœä½ ä¹Ÿå–œæ¬¢ä½¿ç”¨ VS Code çš„ Markdown ç¼–è¾‘èƒ½åŠ›ï¼Œé‚£ä¹ˆä¸€å®šä¸è¦é”™è¿‡æ´›ç«¹çš„è¿™æ¬¾æ’ä»¶ï¼Œä¸‹è½½è¯·è®¤å‡†ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/08c060326c954849b3eb2d34f2e6b0e5~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å¦‚æœä½ è¿˜åœ¨çŠ¹è±«è¦ä¸è¦ä¸‹è½½ï¼Œé‚£ä¸å¦¨çœ‹ä¸‹ä¸‰ä¸ªæ’ä»¶çš„ç»Ÿè®¡å¯¹æ¯”ï¼Œæˆ‘ä»¬æ‹¿ <code>i love juejin. æˆ‘çˆ±æ˜é‡‘</code> è¿™ä¸ªå­—ç¬¦ä¸²æµ‹è¯•ä¸€ä¸‹ä¸‰æ¬¾æ’ä»¶çš„åŠŸèƒ½ï¼š</p><table><thead><tr><th>Word Count</th><th>Word Count CJK</th><th>Word Count Juejin</th></tr></thead><tbody><tr><td>4 ä¸ªå­—</td><td>4 ä¸ªå­—</td><td>7 ä¸ªå­—</td></tr><tr><td>ä¸­æ–‡ç®—æˆäº†ä¸€ä¸ªå­—</td><td>ç›´æ¥å¿½ç•¥äº†è‹±æ–‡</td><td>ä¸­æ–‡4 ä¸ªå­—åŠ è‹±æ–‡ä¸‰ä¸ªå­—ï¼Œæ ¼å±€æ­£å¥½</td></tr></tbody></table><h3 id="vscode-api-cn"><a href="#vscode-api-cn" class="headerlink" title="vscode api cn"></a>vscode api cn</h3><p>åœ¨å­¦ä¹ å’Œå¼€å‘ vscode æ’ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å¤§çš„ç—›ç‚¹æ— è¿‡äº API æ–‡æ¡£ç¿»è¯‘çš„ç¼ºå¤±ã€‚å“ªæ€•æ˜¯ç¡¬ç€å¤´çš®çœ‹è‹±æ–‡åŸç‰ˆ API æ–‡æ¡£ï¼Œé˜…è¯»ä½“éªŒä¹Ÿå¾ˆå·®ã€‚ä¸ºäº†æ–¹ä¾¿è‡ªå·±ã€å›é¦ˆç¤¾åŒºï¼Œæˆ‘å’Œ <a href="https://juejin.cn/user/703340610597064">å¯’è‰</a> ç­‰å°ä¼™ä¼´å†³å®šç¿»è¯‘ vscode api ç±»å‹å£°æ˜å¹¶ä½¿ç”¨ Typedoc æ‰¿è½½ï¼Œå¦å¤–åœ¨å®Œå·¥åæˆ‘ä»¬ä¹Ÿä¼šè¾“å‡º <code>@types/vscode-cn</code> ç±»å‹åŒ…ä»£æ›¿ <code>@types/vscode</code> è¿›ä¸€æ­¥æ–¹ä¾¿ vscode æ’ä»¶å¼€å‘è€…ã€‚å›¢é˜Ÿæˆå‘˜ç°çŠ¶ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aa80c1603b2e4482883fe39e1b44f62e~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç¿»è¯‘æ˜¯ä¸€ä»¶å¸¦æœ‰ä¾ ä¹‰ç²¾ç¥çš„äº‹ä¸šï¼Œæ¬¢è¿æ›´å¤šçš„å°ä¼™ä¼´åŠ å…¥æˆ‘ä»¬ã€‚ä½ å¯ä»¥æµè§ˆ<a href="https://github.com/vscode-cn/vscode-api-cn">ä»“åº“</a>å’Œ<a href="https://vscode-api-cn.js.org/">å®˜ç½‘</a>äº†è§£å…·ä½“æƒ…å†µã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>è¿™æ˜¯ç¬¬ä¸€æ¬¡å°è¯•å†™è¿™ä¹ˆé•¿çš„æ–‡ç« ï¼Œæ–­æ–­ç»­ç»­ç»å†äº†æœ‰åŠä¸ªæœˆï¼Œæœ¬ç€å¯¹è¯»è€…è´Ÿè´£ä»»çš„æ€åº¦ï¼Œæ–‡ä¸­çš„å®è·µéƒ½æ˜¯ç»è¿‡åå¤æµ‹è¯•ä»¥åŠå’ŒåŒäº‹æœ‹å‹çš„è®¨è®ºã€‚å½“ç„¶ vscode æ’ä»¶å¼€å‘çš„æ¦‚å¿µå’Œ API æ¯”è¾ƒå¤šï¼Œä¸€ç¯‡æ–‡ç« ä¹Ÿå¾ˆéš¾è®²å…¨ï¼Œè®²é€å½»ã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºå‘Šè¯‰æ´›ç«¹ï¼Œæˆ‘å¯ä»¥ç»§ç»­æ›´æ–°è¿™æ–¹é¢çš„æ•™ç¨‹ã€‚</p><blockquote><p>æœ¬æ–‡é¦–å‘äºã€Œæ˜é‡‘ä¸“æ ã€ï¼ŒåŒæ­¥äºå…¬ä¼—å·ã€Œç¨‹åºäººç”Ÿã€ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;âš ï¸æœ¬æ–‡ä¸ºæ˜é‡‘ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œæœªè·æˆæƒç¦æ­¢è½¬è½½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¸©é¦¨æç¤ºï¼šç»“åˆæœ¬æ–‡é…å¥—&lt;a href=&quot;https://github.com/youngjuning/juejin-me&quot;&gt;æºç &lt;</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="VS Code" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/VS-Code/"/>
    
    
    <category term="æ˜é‡‘" scheme="https://youngjuning.js.org/tags/%E6%8E%98%E9%87%91/"/>
    
    <category term="VS Code" scheme="https://youngjuning.js.org/tags/VS-Code/"/>
    
    <category term="Webview" scheme="https://youngjuning.js.org/tags/Webview/"/>
    
    <category term="æ‰©å±•" scheme="https://youngjuning.js.org/tags/%E6%89%A9%E5%B1%95/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•å¼€å‘ä¸€æ¬¾ VS Code yarn.lock é¢„è§ˆæ’ä»¶</title>
    <link href="https://youngjuning.js.org/1bbed3d2a249/"/>
    <id>https://youngjuning.js.org/1bbed3d2a249/</id>
    <published>2023-02-26T05:56:50.000Z</published>
    <updated>2023-03-13T01:05:01.406Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://marketplace.visualstudio.com/items?itemName=youngjuning.yarn-lock-preview">Yarn Lock Preview</a> æ’ä»¶å·²å‘å¸ƒï¼Œäº²æµ‹å·²æ¯”è¾ƒç¨³å®šï¼Œæºç åœ¨ <a href="https://github.com/youngjuning/vscode-yarn-lock-preview">vscode-yarn-lock-preview</a> ï¼Œå¦‚æœå¯¹ä½ äº›è®¸å¸®åŠ©å’Œå¯å‘ï¼Œä¸å¦¨èµä¸€ä¸ª Starã€‚</p></blockquote><blockquote><p><a href="https://vscode-api-cn.js.org/">VS Code API ä¸­æ–‡æ–‡æ¡£</a> åœ¨å¤§å®¶çš„çƒ­æƒ…ä¸‹å·²ç»æœ‰åºå¼€å±•äº†ç¿»è¯‘å·¥ä½œï¼Œä¹Ÿæ¬¢è¿å¤§å®¶ä¸€èµ·å‚ä¸ç¿»è¯‘ï¼</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ <a href="https://juejin.cn/post/7000589186898231333">ã€Šä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•ã€‹</a> ä¸€æ–‡ä¸­ï¼Œæ´›ç«¹é€šè¿‡å®æˆ˜é˜è¿°äº†å¦‚ä½•åŸºäº webview å®ç°åœ¨ vscode ä¸­å±•ç¤ºè‡ªå®šä¹‰ UI çš„åŠŸèƒ½ï¼Œå¦å¤–æ–‡ç« é…å¥—äº§ç‰© <a href="vscode:extension/youngjuning.juejin-me">æ˜é‡‘ä¸€ä¸‹</a> æ’ä»¶ä¹Ÿå·²ç»å‘å¸ƒï¼Œæ¬¢è¿è¯•ç”¨ã€‚</p><p>äººä»¬ğŸ‘¨ğŸ»â€ğŸ’»æ€»æ˜¯å–œæ¬¢ç‚«è€€è‡ªå·±çš„æ–°æŠ€èƒ½ï¼Œæ´›ç«¹ä¹Ÿä¸ä¾‹å¤–ï¼Œæ¯•ç«Ÿæ–°æŠ€èƒ½éœ€è¦å¤§é‡çš„å®æˆ˜ç»ƒä¹ ã€‚åœ¨å…¥é—¨äº† VS Code æ‰©å±•å¼€å‘åï¼Œé‡åˆ°å¼€å‘ç—›ç‚¹æˆ‘å°±ä¹ æƒ¯åœ°ç”¨ VS Code æ’ä»¶çš„æ€è·¯å»è§£å†³ã€‚ä¸è¿‡å¤§å¤šæ‰©å±• idea éƒ½å·²ç»åèŠ±æœ‰ä¸»ï¼Œç›´åˆ°æˆ‘æƒ³åˆ°å¯ä»¥å°† <code>yarn.lock</code> æ–‡ä»¶å¯è§†åŒ–å¹¶æœç´¢ç›¸å…³æ’ä»¶æ— æœåï¼Œæˆ‘çŸ¥é“æœºä¼šæ¥äº†ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“"><a href="#ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“" class="headerlink" title="ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“"></a>ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨â“</h2><p>åœ¨å¼€å§‹å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆç¼–è¾‘å™¨ï¼Ÿä»€ä¹ˆåˆæ˜¯è‡ªå®šä¹‰ç¼–è¾‘å™¨ï¼Ÿ</p><p>VS Code ä¸­ç¼–è¾‘å™¨ï¼ˆEditorï¼‰å…¶å®å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ç¼–ç çš„åœ°æ–¹ã€‚å¦‚ä¸‹å›¾ï¼ŒVS Code çš„ç”¨æˆ·ç•Œé¢åˆ†ä¸º 5 ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ Activity Barï¼ˆæ´»åŠ¨æ ï¼‰ã€Side Barï¼ˆä¾§è¾¹æ ï¼‰ã€Editor Groupsï¼ˆç¼–è¾‘å™¨ç»„ï¼‰ã€Panelï¼ˆé¢æ¿ï¼‰ å’Œ Status Barï¼ˆçŠ¶æ€æ ï¼‰ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/301eab5bbab04c65aec4a927b7d306a9~tplv-k3u1fbpfcp-zoom-1.image"></p><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨æŒ‡çš„æ˜¯ VS Code ä¸­ç›¸å¯¹äºé»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨çš„ç¼–è¾‘å™¨ç±»å‹ã€‚æ ¹æ®ç”¨é€”ä¸åŒï¼Œè‡ªå®šä¹‰ç¼–è¾‘å™¨åˆåˆ†ä¸º <a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomTextEditorProvider.html">è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨</a>ã€<a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomEditorProvider.html">è‡ªå®šä¹‰ç¼–è¾‘å™¨</a> å’Œ <a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomReadonlyEditorProvider.html">è‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨</a>ã€‚</p><p>è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨å¸¸è¢«ç”¨æ¥ä¸º JSONã€XMLã€CSVã€JSON æˆ–è€…ä»»æ„ <a href="https://vscode-api-cn.js.org/interfaces/vscode.TextDocument.html">æ–‡æœ¬æ–‡æ¡£</a> æä¾›è‡ªå®šä¹‰çš„è§†è§‰æ¸²æŸ“ã€‚æ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=SimonSiefke.svg-preview">Svg Preview</a>ã€<a href="https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced">Markdown Preview Enhanced</a>ã€<a href="https://marketplace.visualstudio.com/items?itemName=vstirbu.vscode-mermaid-preview">Mermaid Preview</a> å’Œ <a href="https://marketplace.visualstudio.com/items?itemName=saber2pr.todolist">Todo List</a>ã€‚</p><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨å¸¸è¢«ç”¨æ¥é¢„è§ˆèµ„äº§(assets)æ–‡ä»¶ï¼Œæ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=slevesque.vscode-3dviewer">3D Viewer for VSCode</a>ã€<a href="https://marketplace.visualstudio.com/items?itemName=hediet.vscode-drawio">Draw.io Integration</a> å’Œ <a href="https://marketplace.visualstudio.com/items?itemName=elypia.magick-image-reader">Magick Image Reader</a></p><p>ä½†ä»–ä»¬çš„å…±åŒç‚¹éƒ½æ˜¯ä½¿ç”¨äº† VS Code è‡ªå®šä¹‰ç¼–è¾‘å™¨è¿™ä¸ªåŠŸèƒ½ã€‚æœ¬æ–‡çš„ç›®æ ‡å…¶å®å°±æ˜¯å®ç°ä¸€ä¸ªå’Œä¸Šè¿°æ’ä»¶ä¸€æ ·çš„ Preview ç±»å‹çš„æ‰©å±•ã€‚</p><h2 id="ä¸ºä»€ä¹ˆå¼€å‘-Yarn-Lock-Previewï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå¼€å‘-Yarn-Lock-Previewï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå¼€å‘ Yarn Lock Previewï¼Ÿ"></a>ä¸ºä»€ä¹ˆå¼€å‘ Yarn Lock Previewï¼Ÿ</h2><p>æœ¬æ¥æ–‡ç« æ˜¯æ²¡æœ‰è¿™ä¸€ç« çš„ã€‚åœ¨æ’ä»¶åˆšå‘å¸ƒçš„æ—¶å€™ï¼Œæ²¡ç­‰æ–‡ç« å†™å®Œï¼Œæˆ‘å°±è¿«ä¸åŠå¾…åœ°å‘åŒäº‹å’Œæœ‹å‹ä»¥åŠå¸¸æ··è¿¹çš„å‡ ä¸ªç¾¤æ¨èäº†æˆ‘çš„æ’ä»¶ï¼Œç„¶åå°±è¢«ä¸€ä¸ªç¾¤å‹çµé­‚æ‹·é—®äº†â€œä½ è¿™æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿâ€ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c054b9bca3b44b61b7b9ecc7206240a4~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/643f9dd16c734e8487866f6a3306f0f3~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>å¼€å‘ä¸€æ¬¾è‡ªå®šä¹‰ç¼–è¾‘å™¨æ’ä»¶è¦æ¯”å•çº¯çš„å¼€å‘æ’ä»¶å’Œ webview æ’ä»¶éƒ½è¦éº»çƒ¦ï¼Œæ²¡æœ‰äººä¼šé—²çš„æ— èŠç‰ºç‰²ä¸šä½™æ—¶é—´ï¼Œåšä¸€ä¸ªæ²¡æœ‰æ„æ€çš„äº‹æƒ…ã€‚ä»å­¦ä¹ è§’åº¦æ¥è®²ï¼Œå¯ä»¥æŒæ¡äº†å¤§é‡ VSCode APIï¼Œä»ä½œç”¨æ¥è®²ï¼Œæ›´ç›´è§‚åœ°æŸ¥çœ‹ <code>yarn.lock</code> å¹¶æ”¯æŒæœç´¢æŸä¸ªåŒ…ä»¥åŠä¾èµ–è¯¥åŒ…çš„åŒ…ã€‚è¿™åœ¨ä½ æƒ³ç¡®å®šåº”ç”¨çš„é—´æ¥å¼•ç”¨äº†å“ªäº›åŒ…æ—¶å¾ˆæœ‰å¸®åŠ©ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2faa24d3cee4c9088e83c4d0ee06c63~tplv-k3u1fbpfcp-watermark.image" alt="screenshot.gif"></p><p>è¿™å…¶å®æ˜¯ä¸€ä¸ªæ¥è‡ªäºå®é™…å·¥ä½œä¸­çš„ä¸€ä¸ªç—›ç‚¹ï¼ŒReact Native ä¸­å¦‚æœåŒæ—¶ä¾èµ–ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„åŸç”ŸåŒ…ï¼Œè¿è¡Œé¡¹ç›®çš„æ—¶å€™å°±ä¼šå› ä¸ºé‡å¤æ³¨å†ŒæŸä¸ª <code>View</code> é€ æˆåº”ç”¨å´©æºƒã€‚å…¥èŒæ¶‚é¸¦ä¸€å¹´æ¥ï¼Œå¸®åŠ©ä¸šåŠ¡åŒå­¦æ’æŸ¥äº† N æ¬¡è¿™ä¸ªé—®é¢˜ã€‚ç”±äºæŸäº›ç‰ˆæœ¬çš„ä¾èµ–å¹¶ä¸æ˜¯ç›´æ¥åœ¨ <code>dependencies</code> ä¸­å†™çš„ï¼Œè€Œæ˜¯æŸä¸ªåŒ…é—´æ¥ä¾èµ–çš„ï¼Œæˆ‘çš„åŠæ³•æ˜¯å°±æ˜¯åœ¨ <code>yarn.lock</code> ä¸­ <code>cmd+f</code> æœç´¢é€ æˆå´©æºƒçš„åŒ…è¢«å“ªäº›åŒ…ä¾èµ–äº†ï¼Œç„¶åå†äººè‚‰åˆ†æè¿™ä¸ªæœ‰ç»“æ„çš„çº¯æ–‡æœ¬æ–‡ä»¶ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ee531d6d54d4d269984174b5bae97b8~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>è™½ç„¶æˆ‘å·²ç»æ˜¯å¤„ç†è¿™ä¸ªé—®é¢˜çš„è€å¸æœºäº†ï¼Œä½†æ€»å½’æ˜¯ä¼šè€½è¯¯ä¸å°‘æˆ‘å’ŒåŒäº‹çš„æ—¶é—´ã€‚ä¸Šé¢çš„è¿™ä¸ªé—®é¢˜å¯èƒ½æ¯”è¾ƒæç«¯ï¼Œè¿˜æœ‰ä¸€ä¸ªæˆ‘ä»¬ç»å¸¸é‡åˆ°çš„å¼€å‘çš„åé¦ˆæ˜¯å¼•å…¥äº†æŸä¸ªåŸç”ŸåŒ…ä¹‹åå¯¼è‡´åº”ç”¨å´©æºƒã€‚è¿™å…¶å®æ˜¯å› ä¸ºæˆ‘ä»¬çš„ React Native åº”ç”¨æ˜¯ä»¥åµŒå¥—çš„å½¢å¼é›†æˆåˆ°å·²æœ‰åŸç”Ÿæ¶‚é¸¦ App å†…çš„ï¼Œæ‰€ä»¥åŸç”Ÿåº“çš„æ”¯æŒä¹Ÿæ˜¯ä¾èµ– App æä¾›çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬åœ¨æ‰“åŒ…çš„æ—¶å€™ä¹Ÿæœ‰ç›¸åº”çš„æ£€éªŒå·¥å…·ï¼Œä½†æ˜¯ç”¨æˆ·æœ‰å¯èƒ½æ²¡æœ‰ç›´æ¥ä¾èµ–è¿™ä¸ªåº“ï¼Œè€Œæ˜¯è¿™ä¸ªåº“é—´æ¥æˆ–è€…é—´æ¥åœ°é—´æ¥åº“å¼•ç”¨äº†è¿™ä¸ªåº“ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¾—åœ¨ä¸Šä¸‡è¡Œçº¯æ–‡æœ¬ yarn.lock ä¸­å¼€å¯äººè‚‰åˆ†æã€‚</p><p>æ¯”å¦‚ï¼ŒApp ç›®å‰æ”¯æŒçš„ react-native-svg ç‰ˆæœ¬æ˜¯ 5.5.1ã€‚ç”¨æˆ·ä½¿ç”¨çš„ <code>react-native-svg-charts</code> æœ€æ–°ç‰ˆä¾èµ–çš„æ˜¯ react-native-svg <code>^6.2.1</code> æˆ–è€… <code>^7.0.3</code>ã€‚ç”¨æˆ·æŒ‰ç…§æŒ‡å¼•ç›´æ¥å®‰è£…ä½¿ç”¨è¿è¡Œå´©æºƒï¼Œç„¶åæ‰¾åˆ°æˆ‘ä»¬è´¨ç–‘ã€‚é‚£å¦‚æœç”¨äº†è¿™æ¬¾æ’ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­æœç´¢ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95d979f9b7c549e68f8321dac0aaa481~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>æœ€åä¸€ä¸ªå°±æ˜¯ä½ ä¸€å®šå¯èƒ½ä¼šé‡åˆ°çš„åœºæ™¯ï¼Œæ¯”å¦‚å¼€å‘å£°æ˜çš„ä¾èµ–æ˜¯ <code>tuya-panel-kit@^4.6.0</code>ï¼Œç„¶åé‡åˆ°é—®é¢˜ï¼Œç›´æ¥æˆªå›¾å‘Šè¯‰ä½ æˆ‘æ²¡æœ‰å‡çº§è¿‡ç‰ˆæœ¬å‘€ï¼Œä¸ºå•¥æŠ¥é”™äº†æˆ–è€…ä¸ºå•¥è¡¨ç°ä¸ä¸€æ ·äº†çš„é—®é¢˜ã€‚ç„¶åæˆ‘ä»¬å°±å¾—è®©ç”¨æˆ·çœ‹ä¸€ä¸‹å®é™…ä¾èµ–çš„ç‰ˆæœ¬æ˜¯ä»€ä¹ˆã€‚æœ‰çš„å¼€å‘ä¼šå» <code>node_modules</code> ä¸‹é¢æ‰¾ï¼Œè¿™å…¶å®ä¸é è°±ï¼Œå±‚çº§é‚£ä¹ˆå¤æ‚ï¼Œæƒ³å¿«é€Ÿå®šä½æ˜¯å¾ˆéš¾çš„ï¼›æœ‰çš„å¼€å‘ä¼šåœ¨ <code>yarn.lock</code> ä¸­äººè‚‰æœç´¢ï¼›æˆ–è€…æœ‰çš„å¼€å‘ç›´æ¥è®©æˆ‘ä»¬å¸®å¿™æ’æŸ¥ã€‚é‚£ä¹ˆæœ‰äº†è¿™æ¬¾æ’ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®©å¼€å‘è‡ªå·±æœï¼Œç„¶åæˆªå›¾æ issues ç»™æˆ‘ä»¬ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7bc01f9c7df543db90d6f6b31444eeca~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><blockquote><p>æ¸©é¦¨æç¤ºï¼š<code>yarn list --pattern tuya-panel-kit</code> å‘½ä»¤ä¹Ÿå¯ä»¥åˆ—å‡ºç®€è¦çš„ä¾èµ–ä¿¡æ¯ã€‚</p></blockquote><p>å¨é€¼å¨è¿™ä¹ˆå¤šï¼Œç›¸ä¿¡è¯»è€…å·²ç»å’Œæˆ‘è¾¾æˆå…±è¯†äº†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ¬¢è¿è¯„è®ºåŒº Battleã€‚åºŸè¯ä¸å¤šè¯´ï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬æ¥å¼€å§‹å±•ç¤ºçœŸæ­£çš„æŠ€æœ¯å§ã€‚</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c9f81662bba4518b8d075d132d870e1~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®"></a>åˆå§‹åŒ–é¡¹ç›®</h2><h3 id="ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶"><a href="#ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶" class="headerlink" title="ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶"></a>ä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶</h3><ol><li>å®‰è£… <a href="http://yeoman.io/">Yeoman</a> å’Œ <a href="https://www.npmjs.com/package/generator-code">VS Code Extension Generator</a>ï¼š<code>npm install -g yo generator-code</code></li><li>ç”Ÿæˆé¡¹ç›®ï¼š<code>yo code</code></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ yo code</span><br><span class="line"><span class="comment">#     _-----_     â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span></span><br><span class="line"><span class="comment">#    |       |    â”‚   Welcome to the Visual  â”‚</span></span><br><span class="line"><span class="comment">#    |--(o)--|    â”‚   Studio Code Extension  â”‚</span></span><br><span class="line"><span class="comment">#   `---------Â´   â”‚        generator!        â”‚</span></span><br><span class="line"><span class="comment">#    ( _Â´U`_ )    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span></span><br><span class="line"><span class="comment">#    /___A___\   /</span></span><br><span class="line"><span class="comment">#     |  ~  |</span></span><br><span class="line"><span class="comment">#   __&#x27;.___.&#x27;__</span></span><br><span class="line"><span class="comment"># Â´   `  |Â° Â´ Y `</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ? What type of extension do you want to create? New Extension (TypeScript)</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the name of your extension? Yarn Lock Preview</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the identifier of your extension? yarn-lock-preview</span></span><br><span class="line"><span class="comment"># ? What&#x27;s the description of your extension? Previews yarn.lock file</span></span><br><span class="line"><span class="comment"># ? Initialize a git repository? Yes</span></span><br><span class="line"><span class="comment"># ? Bundle the source code with webpack? No</span></span><br><span class="line"><span class="comment"># ? Which package manager to use? yarn</span></span><br><span class="line"></span><br><span class="line">$ code ./vscode-yarn-lock-preview</span><br></pre></td></tr></table></figure><h3 id="è§„èŒƒåŒ–é¡¹ç›®"><a href="#è§„èŒƒåŒ–é¡¹ç›®" class="headerlink" title="è§„èŒƒåŒ–é¡¹ç›®"></a>è§„èŒƒåŒ–é¡¹ç›®</h3><ol><li>ä»£ç è§„èŒƒé…ç½® - <code>npx @luozhu/create-coding-style</code></li><li>æŒ‰ç…§æ–°çš„ä»£ç è§„èŒƒæ ¼å¼åŒ–ä»£ç  - <code>yarn lint --fix</code></li><li>Git Commit è§„èŒƒé…ç½® - <code>npx @luozhu/create-commitlint</code></li></ol><h3 id="æ‰©å±•ä¿¡æ¯é…ç½®"><a href="#æ‰©å±•ä¿¡æ¯é…ç½®" class="headerlink" title="æ‰©å±•ä¿¡æ¯é…ç½®"></a>æ‰©å±•ä¿¡æ¯é…ç½®</h3><ol><li>æ‰©å±•ä¿¡æ¯é…ç½®ï¼ˆpackage.jsonï¼‰<ol><li>é…ç½® <a href="https://code.visualstudio.com/api/working-with-extensions/publishing-extension#create-a-publisher">publisher</a></li><li>æ·»åŠ ä¸Š <code>license</code> å­—æ®µã€‚</li><li>æ·»åŠ  <code>repository</code> å­—æ®µã€‚</li><li>é…ç½® <code>icon</code>ï¼š128 x 128 åƒç´ å›¾æ ‡çš„è·¯å¾„ã€‚</li></ol></li><li>ä¿®æ”¹ readmeï¼šå› ä¸ºåˆå§‹çš„æ²¡æ³•é€šè¿‡ <code>vsce package</code> æ ¡éªŒ</li><li>ä½¿ç”¨ <code>npx vsce package</code> å°è¯•æ‰“åŒ…ï¼Œç¡®ä¿æ²¡æœ‰é”™è¯¯å’Œè­¦å‘Š</li></ol><h3 id="ä½¿ç”¨-esbuild-æ‰“åŒ…"><a href="#ä½¿ç”¨-esbuild-æ‰“åŒ…" class="headerlink" title="ä½¿ç”¨ esbuild æ‰“åŒ…"></a>ä½¿ç”¨ esbuild æ‰“åŒ…</h3><p>åœ¨ <a href="https://juejin.cn/post/7000589186898231333/#heading-8">ä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•</a> ä¸­æˆ‘ä»¬è®²è¿°äº†ä½¿ç”¨ esbuild æ‰“åŒ…å¯ä»¥å‡å°æ‰“åŒ…äº§ç‰©çš„ä½“ç§¯ä»¥åŠåŠ å¿«è°ƒè¯•é€Ÿåº¦ã€‚å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç« å³å¯å®Œæˆé…ç½®ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p><h3 id="Donâ€™t-repeat-yourself"><a href="#Donâ€™t-repeat-yourself" class="headerlink" title="Donâ€™t repeat yourself"></a>Donâ€™t repeat yourself</h3><p>æœ¬ç€é‡å¤çš„å·¥ä½œéƒ½å¯ä»¥ç”¨è„šæœ¬ä»£æ›¿çš„åŸåˆ™ï¼Œæˆ‘ vscode æ’ä»¶å¼€å‘çš„æœ€ä½³å®è·µæ²‰æ·€ä¸ºäº†ä¸€ä¸ªè„šæ‰‹æ¶ï¼Œæ‰§è¡Œ <code>yarn create @luozhu/vscode-extension</code> å³å¯å¿«é€Ÿå¼€å§‹å¼€å‘ vscode æ‰©å±•ã€‚</p><h2 id="è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†"><a href="#è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†" class="headerlink" title="è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†"></a>è‡ªå®šä¹‰ç¼–è¾‘å™¨åŸç†</h2><h3 id="å·¥ä½œæœºåˆ¶"><a href="#å·¥ä½œæœºåˆ¶" class="headerlink" title="å·¥ä½œæœºåˆ¶"></a>å·¥ä½œæœºåˆ¶</h3><p>å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“äº†åœ¨ VS Code ä¸­è‡ªå®šä¹‰ç¼–è¾‘å™¨æœ‰ä¸‰ç§ï¼šè‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨ã€è‡ªå®šä¹‰ç¼–è¾‘å™¨å’Œè‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨ã€‚ä¸‰ç§ç±»å‹çš„ç¼–è¾‘å™¨éƒ½ä¼šæ›¿æ¢ VS Code ä¸­çš„æ ‡å‡†æ–‡æœ¬ç¼–è¾‘å™¨å±•ç¤ºçš„ä½ç½®ã€‚ä¸åŒçš„æ˜¯è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨ç”±äºæ˜¯åŸºäº VS Code çš„æ ‡å‡†æ–‡æœ¬æ–‡æ¡£æ¨¡å‹ï¼Œä¸éœ€è¦å¼€å‘è€…æä¾›ï¼Œæ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=SimonSiefke.svg-preview">Svg Preview</a> æ’ä»¶ã€‚è€Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶çš„é¢„è§ˆï¼Œå› æ­¤éœ€è¦å¼€å‘è€…è‡ªå·±æä¾›æ–‡æ¡£æ¨¡å‹å¹¶è‡ªè¡Œå®ç°è¯¸å¦‚ä¿å­˜å’Œå¤‡ä»½è¿™äº›åŠŸèƒ½æ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=hediet.vscode-drawio">Draw.io Integration</a> æ’ä»¶ã€‚è‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨åˆ™ç”¨äºé¢„è§ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ¯”å¦‚ <a href="https://marketplace.visualstudio.com/items?itemName=elypia.magick-image-reader">Magick Image Reader</a>ã€‚</p><p>äº†è§£äº†ä¸‰ç§è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„åŒºåˆ«ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æˆ‘ä»¬çš„æ’ä»¶å±äºå“ªç§è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚å…¶å®ç­”æ¡ˆæ˜¾è€Œæ˜“è§ï¼Œ<code>yarn.lock</code> æ–‡ä»¶å±äº VS Code æ ‡å‡†æ–‡æ¡£æ¨¡å‹ï¼Œæˆ‘ä»¬é€‰ç”¨æœ€ç®€å•çš„è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨å³å¯ã€‚</p><p>ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ä¼šæ¶‰åŠè§†å›¾ã€æ’ä»¶ã€æ–‡æ¡£æ¨¡å‹ã€åº•å±‚èµ„æºæ–‡ä»¶ä»¥åŠå®ƒä»¬ä¹‹é—´çš„äº¤äº’ï¼Œå…¶å¤§æ¦‚åŸç†å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/116948b627f4406ba51faa0353f147a7~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç”±äºé¢„è§ˆ <code>yarn.lock</code> ä¸éœ€è¦æˆ‘ä»¬æä¾›æ–‡æ¡£æ¨¡å‹ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦åŸºäº <a href="https://vscode-api-cn.js.org/interfaces/vscode.CustomTextEditorProvider.html">CustomTextEditorProvider</a> ç¼–å†™ä¸€ä¸ª CustomEditorProvider ç»™æ’ä»¶æ³¨å†Œä½¿ç”¨ï¼Œç„¶åç¼–å†™æˆ‘ä»¬çš„è§†å›¾ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰ï¼Œæœ€åå®ç°è§†å›¾å’Œæ’ä»¶çš„äº¤äº’å³å¯ã€‚</p><p>å…¶ä¸­æˆ‘ä»¬éœ€è¦å…³æ³¨çš„ç‚¹æœ‰å¦‚ä½•å¼€å‘è§†å›¾ã€è§†å›¾å’Œæ’ä»¶å¦‚ä½•é€šä¿¡ã€å¦‚ä½•å®ç° CustomEditorProvider ä»¥åŠå¦‚ä½•æ³¨å†Œ CustomEditorProviderã€‚</p><h3 id="å¦‚ä½•å¼€å‘è§†å›¾"><a href="#å¦‚ä½•å¼€å‘è§†å›¾" class="headerlink" title="å¦‚ä½•å¼€å‘è§†å›¾"></a>å¦‚ä½•å¼€å‘è§†å›¾</h3><p>è§†å›¾æ˜¯é€šè¿‡Â webview å®ç°çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥é€šè¿‡æ ‡å‡†çš„ HTMLã€CSS å’Œ JavaScript æ„å»ºç”¨æˆ·ä½“éªŒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä½ ç†Ÿæ‚‰çš„å‰ç«¯æ¡†æ¶å®ç°ã€‚</p><h3 id="è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡"><a href="#è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡" class="headerlink" title="è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡"></a>è§†å›¾å¦‚ä½•ä¸æ’ä»¶é€šä¿¡</h3><p>ç”±äº VS Code çš„é™åˆ¶ï¼ŒWebview æ˜¯ä¸èƒ½ç›´æ¥è®¿é—® VS Code API ä»¥åŠå‘é€ç½‘ç»œè¯·æ±‚çš„ï¼Œä½†æ˜¯å®ƒå¯ä»¥é€šè¿‡ postMessage ä¸æ’ä»¶è¿›è¡ŒåŒå‘é€šä¿¡ã€‚ä½†æ˜¯æ‰‹å†™åŒå‘é€šä¿¡æ¯”è¾ƒéº»çƒ¦ï¼Œå°¤å…¶æ˜¯è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œwebview éœ€è¦å…ˆå‘é€å‘èµ·ç½‘ç»œè¯·æ±‚çš„æ¶ˆæ¯ï¼Œæ’ä»¶ä¾§æ³¨å†Œçš„ç›‘å¬äº‹ä»¶å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œæ’ä»¶ç­‰å¾…ç½‘ç»œè¯·æ±‚è¿”å›åå†å‘é€æ¶ˆæ¯å°†æ•°æ®å‘ç»™ webviewï¼Œæœ€å webview é€šè¿‡æ³¨å†Œçš„ç›‘å¬äº‹ä»¶è·å–ä¿¡æ¯ã€‚ç®€è¦çš„æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20f34a967c234945afbaf9aaf2901163~tplv-k3u1fbpfcp-watermark.image" alt="webview é€šä¿¡åŸç†.png"></p><p>æŠ›å¼€å…·ä½“å®ç°æ¥çœ‹è¿™ä¸ªäº¤äº’å°±å·²ç»å¾ˆåäººç±»äº†ï¼Œè€Œä¸”å…·ä½“ä½¿ç”¨æ—¶è¿˜ä¼šé¢å¯¹ webview å’Œæ’ä»¶ç”¨åˆ°çš„ API ä¹Ÿä¸ä¸€æ ·å¯¼è‡´çš„è½¬æ¢æˆæœ¬å’Œå¿ƒæ™ºè´Ÿæ‹…ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œæˆ‘å°è£…äº† <a href="https://www.npmjs.com/package/@luozhu/vscode-channel">@luozhu&#x2F;vscode-channel</a> æ¥å®ç°å¥½ç”¨çš„åŒå‘é€šä¿¡ã€‚ä½ å¯ä»¥ç®€å•åœ°åœ¨ webview ä¾§é€šè¿‡ <code>call</code> æ–¹æ³•è°ƒç”¨æ–¹æ³•å¹¶ç­‰å¾…å¤„ç†ç»“æœï¼Œæ’ä»¶ä¾§é€šè¿‡ <code>bind</code> æ–¹æ³•ç»‘å®šäº‹ä»¶å¤„ç†ã€‚</p><h3 id="å¦‚ä½•å®ç°-CustomEditorProvider"><a href="#å¦‚ä½•å®ç°-CustomEditorProvider" class="headerlink" title="å¦‚ä½•å®ç° CustomEditorProvider"></a>å¦‚ä½•å®ç° CustomEditorProvider</h3><p>å‚è€ƒå®˜æ–¹ Demo <a href="https://github.com/microsoft/vscode-extension-samples/blob/main/custom-editor-sample/src/catScratchEditor.ts#L16">catScratchEditor</a> æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>CatScratchEditorProvider</code> æ˜¯é€šè¿‡å®ç°äº† <code>vscode.CustomTextEditorProvider</code> æ¥å£åˆ›å»ºçš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚è€Œ <code>vscode.CustomTextEditorProvider</code> è¿™ä¸ªæ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•  <code>resolveCustomTexEditor</code>ã€‚æ‰€ä»¥åŸç†ä¸Šæˆ‘ä»¬åªéœ€è¦å®ç° <code>resolveCustomTexEditor</code> è¿™ä¸ªæ–¹æ³•å³å¯ã€‚</p><h3 id="å¦‚ä½•æ³¨å†Œ-CustomEditorProvider"><a href="#å¦‚ä½•æ³¨å†Œ-CustomEditorProvider" class="headerlink" title="å¦‚ä½•æ³¨å†Œ CustomEditorProvider"></a>å¦‚ä½•æ³¨å†Œ CustomEditorProvider</h3><p>å®ç°äº†è‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ³¨å†Œåˆ°æ’ä»¶ä¸­ï¼ŒVS Code æä¾›äº† <code>vscode.window.registerCustomEditorProvider</code> æ–¹æ³•ç”¨æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚</p><h2 id="è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°"><a href="#è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°" class="headerlink" title="è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°"></a>è‡ªå®šä¹‰ç¼–è¾‘å™¨å®ç°</h2><p>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚å¦‚æœå¯¹å‰é¢çš„æ¦‚å¿µæ„Ÿåˆ°å›°æƒ‘ï¼Œé‚£æ¥ä¸‹æ¥çš„å®æˆ˜å¯èƒ½ä¼šè®©ä½ è±ç„¶å¼€æœ—ã€‚</p><h3 id="å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨"><a href="#å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨" class="headerlink" title="å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨"></a>å£°æ˜è‡ªå®šä¹‰ç¼–è¾‘å™¨</h3><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨æ˜¯é€šè¿‡ <code>package.json</code> çš„è´¡çŒ®å†…å®¹ï¼ˆ<code>contributes</code>ï¼‰çš„ <code>customEditors</code> å±æ€§å£°æ˜çš„ï¼Œ<code>customEditors</code> æä¾›è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæ‰©å±•ä¸­æä¾›å¤šä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚æˆ‘ä»¬å£°æ˜çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;activationEvents&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;onCustomEditor:yarn-lock-preview.yarnLock&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;customEditors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;viewType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn-lock-preview.yarnLock&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;displayName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Preview yarn.lock&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;selector&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;filenamePattern&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn.lock&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;priority&quot;</span><span class="punctuation">:</span> <span class="string">&quot;option&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><ul><li><code>activationEvents</code> - æ³¨å†Œæ¿€æ´»äº‹ä»¶<ul><li><code>onCustomEditor:*</code> - æ¿€æ´»è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„äº‹ä»¶</li></ul></li><li><code>customEditors</code> - æä¾›çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚<ul><li><code>viewType</code> - è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„æ ‡è¯†ç¬¦ã€‚å®ƒåœ¨æ‰€æœ‰è‡ªå®šä¹‰ç¼–è¾‘å™¨ä¸­éƒ½å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤å»ºè®®å°†æ‰©å±• ID ä½œä¸º <code>viewType</code> çš„ä¸€éƒ¨åˆ†åŒ…æ‹¬åœ¨å†…ã€‚åœ¨ä½¿ç”¨ <code>vscode.registerCustomEditorProvider</code> å’Œåœ¨ <code>onCustomEditor:$&#123;id&#125;</code>Â æ¿€æ´»äº‹ä»¶ä¸­æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨æ—¶ï¼Œä½¿ç”¨ <code>viewType</code>ã€‚</li><li><code>displayName</code> - è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ç”¨æˆ·å¯è¯»åç§°ã€‚å½“é€‰æ‹©è¦ä½¿ç”¨çš„ç¼–è¾‘å™¨æ—¶ï¼Œå‘ç”¨æˆ·æ˜¾ç¤ºæ­¤åç§°ã€‚</li><li><code>selector</code> - ä¸ºå…¶å¯ç”¨äº†è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ä¸€ç»„ globã€‚</li><li><code>priority</code> - ï¼ˆå¯é€‰ï¼‰ç¡®å®šè‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ä½¿ç”¨æ—¶æœºã€‚è¿™ä¸ªå­—æ®µæ§åˆ¶åˆé€‚ä½¿ç”¨ç‰¹å®šçš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚<ul><li><code>option</code> - åœ¨ç”¨æˆ·æ‰“å¼€èµ„æºæ—¶ä¸ä¼šè‡ªåŠ¨ä½¿ç”¨æ­¤ç¼–è¾‘å™¨ï¼Œä½†ç”¨æˆ·å¯ä½¿ç”¨Â <code>Reopen With</code>Â å‘½ä»¤åˆ‡æ¢åˆ°æ­¤ç¼–è¾‘å™¨ã€‚</li><li><code>default</code> - åœ¨ç”¨æˆ·æ‰“å¼€èµ„æºæ—¶è‡ªåŠ¨ä½¿ç”¨æ­¤ç¼–è¾‘å™¨ï¼Œå‰ææ˜¯æ²¡æœ‰ä¸ºè¯¥èµ„æºæ³¨å†Œå…¶ä»–é»˜è®¤çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚</li></ul></li></ul></li></ul><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥æ‰“å¼€ä¸€ä¸ª <code>yarn.lock</code> æ–‡ä»¶ï¼Œå¹¶åœ¨å‘½ä»¤é¢æ¿ä¸­è¾“å…¥ <code>Reopen with</code> é€‰æ‹©æˆ‘å‰é¢æ³¨å†Œçš„ <code>Preview yarn.lock</code>ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/376a6b66b7c24de589fb48a54d29efb6~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 11.28.37.gif"></p><p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç©ºç™½çš„ç¼–è¾‘å™¨ä»¥åŠé¡¶éƒ¨çš„ä¸ä¼šåœæ­¢çš„åŠ è½½è¿›åº¦æ¡ã€‚</p><p>æ‰“å¼€å‘½ä»¤é¢æ¿è¾“å‡ºå‘½ä»¤çš„æ–¹å¼å¯¹ç”¨æˆ·æ¥è¯´ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¼–è¾‘å™¨èœå•ä¸­æ·»åŠ ä¸€ä¸ªåˆ‡æ¢æŒ‰é’®å®ç°å¿«é€Ÿåˆ‡æ¢ç¼–è¾‘å™¨æ¨¡å¼ã€‚é¦–å…ˆæˆ‘ä»¬åœ¨ <code>package.json</code> ä¸­é…ç½®å‘½ä»¤å’Œèœå•ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;commands&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn-lock-preview.switchEditorMode&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;switch editor mode&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$(rocket)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;menus&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;editor/title&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn-lock-preview.switchEditorMode&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;navigation&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li><code>commands</code> - å¯¹å‘½ä»¤é¢æ¿æä¾›å‘½ä»¤ã€‚</li><li><code>menus</code> - å‘ç¼–è¾‘å™¨æä¾›èœå•é¡¹ã€‚</li></ul><p>ç„¶ååœ¨ <code>src/extension</code> ä¸­çš„ active å‡½æ•°ä¸­æ³¨å†Œå‘½ä»¤åŠå®ç°å‘½ä»¤å›è°ƒï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; commands, <span class="title class_">ExtensionContext</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Congratulations, your extension &quot;yarn-lock-preview&quot; is now active!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">    commands.<span class="title function_">registerCommand</span>(<span class="string">&#x27;yarn-lock-preview.switchEditorMode&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      commands.<span class="title function_">executeCommand</span>(<span class="string">&#x27;workbench.action.reopenWithEditor&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘åªæ‰¾åˆ°äº† <code>workbench.action.reopenWithEditor</code> è¿™ä¸ªå¯ä»¥è§¦å‘çš„å‘½ä»¤ï¼Œæˆ‘æœ¬æ„æ˜¯å®ç°ç±»ä¼¼ git çš„<strong>æ‰“å¼€æ–‡ä»¶</strong>å’Œ<strong>æ‰“å¼€æ›´æ”¹</strong>çš„åŠŸèƒ½ã€‚ç”±äºå­¦è‰ºä¸ç²¾ï¼Œ<a href="https://github.dev/microsoft/vscode/blob/f66a3e06bcb9f000e5dc0ad0040ff9b32fc75c78/extensions/git/src/commands.ts#L655-L656">git.openFile</a> çš„å®ç°æˆ‘è¿˜éœ€è¦å†ç ”ç©¶ä¸€ä¸‹ï¼Œå¦‚æœæœ‰å¤§ä½¬çœ‹åˆ°è¿™æ¥å¯ä»¥æŒ‡ç‚¹ä¸€ä¸‹ã€‚ç›®å‰æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb03abea51634bd3a0a8c1a27b155ec0~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 12.46.00.gif"></p><h3 id="æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider"><a href="#æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider" class="headerlink" title="æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider"></a>æ³¨å†Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider</h3><p>ç°åœ¨æˆ‘ä»¬å·²ç»æ³¨å†Œäº†è‡ªå®šä¹‰æ–‡æ¡£ç±»å‹ <code>yarn-lock-preview.yarnLock</code> å’Œ <code>onCustomEditor:yarn-lock-preview.yarnLock</code> æ¿€æ´»äº‹ä»¶ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å€ŸåŠ© <a href="https://vscode-api-cn.js.org/modules/window.html#registerCustomEditorProvider">window.registerCustomEditorProvider</a> æ–¹æ³•æ³¨å†Œå¯¹åº”çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚</p><p>å¦‚æœè¿™æ—¶å€™å°è¯•è°ƒç”¨ <code>registerCustomEditorProvider</code> æ–¹æ³•ï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬å¹¶æ²¡æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ provider å¯ä»¥ä½¿ç”¨ï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬ä¼šå®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Congratulations, your extension &quot;yarn-lock-preview&quot; is now active!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">    vscode.<span class="property">window</span>.<span class="title function_">registerCustomEditorProvider</span>(</span><br><span class="line">      <span class="string">&#x27;yarn-lock-preview.yarnLock&#x27;</span>,</span><br><span class="line">      provider <span class="comment">// è‡ªå®šä¹‰ç¼–è¾‘å™¨ provider å®ä¾‹</span></span><br><span class="line">    );</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider"><a href="#å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨-Provider" class="headerlink" title="å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider"></a>å®ç°è‡ªå®šä¹‰ç¼–è¾‘å™¨ Provider</h3><p>ç”±äºæˆ‘ä»¬è¦é¢„è§ˆçš„æ–‡ä»¶æ˜¯ VS Code çš„æ ‡å‡†æ–‡æ¡£æ¨¡å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åŸºäº <code>CustomTextEditorProvider</code> è¿™ä¸ªæ¥å£å°è£…ä¸€ä¸ªç±»æ¥å®ç°å®ƒã€‚ä¸ºæ­¤æˆ‘ä»¬æ–°å»ºä¸€ä¸ª <code>YarnLockEditorProvider.ts</code> æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶çš„æœ€å°å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">implements</span> vscode.<span class="property">CustomTextEditorProvider</span> &#123;</span><br><span class="line">  <span class="comment">// å°† context æ³¨å…¥ this å¯¹è±¡</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> <span class="keyword">readonly</span> context: vscode.ExtensionContext</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å½“è‡ªå®šä¹‰ç¼–è¾‘å™¨æ‰“å¼€æ—¶è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">resolveCustomTextEditor</span>(</span><br><span class="line">    <span class="attr">_document</span>: vscode.<span class="property">TextDocument</span>,</span><br><span class="line">    <span class="attr">webviewPanel</span>: vscode.<span class="property">WebviewPanel</span>,</span><br><span class="line">    <span class="attr">_token</span>: vscode.<span class="property">CancellationToken</span></span><br><span class="line">  ): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// ç»™ webview è®¾ç½®åˆå§‹å†…å®¹</span></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">options</span> = &#123;</span><br><span class="line">      <span class="attr">enableScripts</span>: <span class="literal">true</span>, <span class="comment">// å…è®¸åœ¨ webview ä¸­è¿è¡Œè„šæœ¬</span></span><br><span class="line">    &#125;;</span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="variable language_">this</span>.<span class="title function_">getHtmlForWebview</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">getHtmlForWebview</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">        &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;head&gt;</span></span><br><span class="line"><span class="string">            &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;title&gt;Cat Coding&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;/head&gt;</span></span><br><span class="line"><span class="string">        &lt;body&gt;</span></span><br><span class="line"><span class="string">            &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;/body&gt;</span></span><br><span class="line"><span class="string">        &lt;/html&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">YarnLockEditorProvider</span>;</span><br></pre></td></tr></table></figure><ul><li><code>class YarnLockEditorProvider implements vscode.CustomTextEditorProvider</code> - å£°æ˜ä¸€ä¸ªç±»å®ç°è‡ªå®šä¹‰æ–‡æœ¬ç¼–è¾‘å™¨ providerã€‚</li><li><a href="https://vscode-api-cn.js.org/interfaces/CustomTextEditorProvider.html#resolveCustomTextEditor">resolveCustomTextEditor</a>ï¼šæ ¹æ®ç»™å®šçš„æ–‡æœ¬èµ„æºè§£æè‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡æ‰“å¼€ä¸€ä¸ª <code>CustomTextEditorProvider</code> çš„èµ„æºæ—¶ï¼Œæˆ–è€…å½“ä»–ä»¬ä½¿ç”¨è¿™ä¸ª <code>CustomTextEditorProvider</code> é‡æ–°æ‰“å¼€ä¸€ä¸ªç°æœ‰çš„ç¼–è¾‘å™¨æ—¶ï¼Œè¯¥æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚</li><li><code>webviewPanel.webview.options</code> - é…ç½® webview é€‰é¡¹ï¼Œè¿™é‡Œæˆ‘ä»¬é…ç½®äº†å…è®¸ä½¿ç”¨è„šæœ¬ã€‚</li><li><code>webviewPanel.webview.html = this.getHtmlForWebview()</code> - ä¸º HTML è®¾ç½®åˆå§‹å†…å®¹ã€‚</li></ul><p>ä¸ºäº†ç®€åŒ–åˆå§‹åŒ–æ“ä½œï¼Œæˆ‘ä»¬ä¸º <code>YarnLockEditorProvider</code> ç±»å°è£…ä¸€ä¸ª <code>register</code> é™æ€æ–¹æ³•ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="title function_">register</span>(<span class="attr">context</span>: vscode.<span class="property">ExtensionContext</span>): vscode.<span class="property">Disposable</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> provider = <span class="keyword">new</span> <span class="title class_">YarnLockEditorProvider</span>(context);</span><br><span class="line">  <span class="keyword">const</span> providerRegistration = vscode.<span class="property">window</span>.<span class="title function_">registerCustomEditorProvider</span>(</span><br><span class="line">    <span class="title class_">YarnLockEditorProvider</span>.<span class="property">viewType</span>,</span><br><span class="line">    provider,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">webviewOptions</span>: &#123;</span><br><span class="line">        <span class="attr">retainContextWhenHidden</span>: <span class="literal">true</span>, <span class="comment">// éšè—æ—¶ä¿ç•™ä¸Šä¸‹æ–‡</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> providerRegistration;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> viewType = <span class="string">&#x27;yarn-lock-preview.yarnLock&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æ³¨å†Œæˆ‘ä»¬çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ provider äº†ï¼Œåœ¨ <code>src/extension.ts</code> çš„ <code>activate</code> æ–¹æ³•ä¸­è°ƒç”¨ <code>YarnLockEditorProvider.register(context)</code> å¾—åˆ°æ³¨å†Œçš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ï¼Œç„¶å <code>push</code> åˆ°ä»£ç†ç›‘å¬æ•°ç»„ä¸­å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">from</span> <span class="string">&#x27;./YarnLockEditorProvider&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params">context: vscode.ExtensionContext</span>) &#123;</span><br><span class="line">  context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(<span class="title class_">YarnLockEditorProvider</span>.<span class="title function_">register</span>(context));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€ä¸ªç®€å•ä½†å®Œæ•´çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨å°±å®Œæˆäº†ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e6addd1cb739448db52db1767154fe65~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 17.00.55.gif"></p><h2 id="yarn-lock-å¯è§†åŒ–é¢„è§ˆå®ç°"><a href="#yarn-lock-å¯è§†åŒ–é¢„è§ˆå®ç°" class="headerlink" title="yarn.lock å¯è§†åŒ–é¢„è§ˆå®ç°"></a>yarn.lock å¯è§†åŒ–é¢„è§ˆå®ç°</h2><p>å‰é¢æˆ‘ä»¬å·²ç»é¡ºåˆ©å¸¦å¤§å®¶å®ç°äº†åœ¨è‡ªå®šä¹‰ç¼–è¾‘å™¨ä¸­çœ‹çŒ«çš„åŠŸèƒ½ã€‚å½“ç„¶äº†ï¼Œæˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡å¯ä¸æ˜¯çœ‹é»‘çŒ«æ•²ä»£ç ã€‚è¿™ä¸€ç« æˆ‘ä»¬å°†æŒ‘æˆ˜æœ€åçš„ Bossï¼šå®ç°ä¸€ä¸ªå¯ä»¥æœç´¢çš„ yarn.lock ä¾èµ– Json æ ‘ã€‚</p><h3 id="è§£æ-yarn-lock-æ–‡ä»¶"><a href="#è§£æ-yarn-lock-æ–‡ä»¶" class="headerlink" title="è§£æ yarn.lock æ–‡ä»¶"></a>è§£æ yarn.lock æ–‡ä»¶</h3><p>è§£å†³äº†æŠ€æœ¯é—®é¢˜ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸šåŠ¡é—®é¢˜ã€‚æˆ‘ä»¬çš„ç—›ç‚¹æ˜¯ yarn.lock æ–‡ä»¶æ˜¯çº¯æ–‡æœ¬çš„ï¼Œé˜…è¯»èµ·æ¥æ¯”è¾ƒå›°éš¾ï¼Œéœ€è¦ä¸€ä¸ªæ›´å¥½çš„å±•ç¤ºå½¢å¼ã€‚é‚£æˆ‘ä»¬å¯ä»¥ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯å°†æ–‡æœ¬æ–‡ä»¶è½¬æˆæ›´æ˜“å¤„ç†çš„èµ„æºï¼Œä½œä¸ºå‰ç«¯ï¼Œå½“ç„¶é¦–é€‰ JSONã€‚å€ŸåŠ© Yarn å®˜æ–¹çš„ <a href="https://www.npmjs.com/package/@yarnpkg/lockfile">@yarnpkg&#x2F;lockfile</a> å·¥å…·æˆ‘ä»¬å°±å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚æˆ‘ä»¬æ¥ç¼–å†™ demo è¯•ä¸€ä¸‹ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> lockfile <span class="keyword">from</span> <span class="string">&#x27;@yarnpkg/lockfile&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">implements</span> vscode.<span class="property">CustomTextEditorProvider</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å½“è‡ªå®šä¹‰ç¼–è¾‘å™¨æ‰“å¼€æ—¶è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">resolveCustomTextEditor</span>(</span><br><span class="line">    <span class="attr">document</span>: vscode.<span class="property">TextDocument</span>,</span><br><span class="line">    <span class="attr">webviewPanel</span>: vscode.<span class="property">WebviewPanel</span>,</span><br><span class="line">    <span class="attr">_token</span>: vscode.<span class="property">CancellationToken</span></span><br><span class="line">  ): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// è·å–çº¯æ–‡æœ¬å¹¶è§£ææˆ json æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> json = lockfile.<span class="title function_">parse</span>(<span class="variable language_">document</span>.<span class="title function_">getText</span>()).<span class="property">object</span>;</span><br><span class="line">    <span class="comment">// å°† JSON å­—ç¬¦ä¸²ä¼ é€’ç»™ HTML æ‹¼è£…æ–¹æ³•å±•ç¤º</span></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="variable language_">this</span>.<span class="title function_">getHtmlForWebview</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(json));</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">getHtmlForWebview</span>(<span class="attr">json</span>: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">        &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;head&gt;</span></span><br><span class="line"><span class="string">            &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;title&gt;Cat Coding&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;/head&gt;</span></span><br><span class="line"><span class="string">        &lt;body&gt;</span></span><br><span class="line"><span class="string">          &lt;h1&gt;JSON æ•°æ®&lt;/h1&gt;</span></span><br><span class="line"><span class="string">          &lt;p&gt;<span class="subst">$&#123;json&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;/body&gt;</span></span><br><span class="line"><span class="string">        &lt;/html&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/979363c7be8c42d59e2aa564cf687c26~tplv-k3u1fbpfcp-watermark.image" alt="Kapture 2021-09-14 at 18.59.12.gif"></p><h3 id="webview-é›†æˆ-umijs"><a href="#webview-é›†æˆ-umijs" class="headerlink" title="webview é›†æˆ umijs"></a>webview é›†æˆ umijs</h3><p>å‚è€ƒ <a href="https://juejin.cn/post/7000589186898231333/#heading-9">ã€Š# ä»é›¶å¼€å‘ä¸€æ¬¾åŸºäº webview çš„ vscode æ‰©å±•ã€‹</a> å’Œ <a href="https://github.com/youngjuning/vscode-juejin-me">vscode-juejin-me</a> åˆå§‹åŒ– umijs é¡¹ç›®å¹¶åšä¸€äº›ä¿®å‰ªé€‚é…å·¥ä½œã€‚ç„¶åä½¿ç”¨ <code>@luozhu/vscode-utils</code> çš„ <code>getUmiHTMLContent</code> æ–¹æ³•è·å– HTML å†…å®¹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getUmiHTMLContent</span>(<span class="variable language_">this</span>.<span class="property">context</span>, webviewPanel, &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;Yarn Lock Preview&#x27;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="webview-å†…å®¹æ›´æ–°"><a href="#webview-å†…å®¹æ›´æ–°" class="headerlink" title="webview å†…å®¹æ›´æ–°"></a>webview å†…å®¹æ›´æ–°</h3><p>é›†æˆ umijs åæˆ‘ä»¬é€šè¿‡ <code>webviewPanel.webview.html</code> è®¾ç½®çš„åˆå§‹å†…å®¹æ˜¯ç©ºçš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦å°†æ–‡æœ¬ä¼ é€’ä»æ’ä»¶ä¼ é€’åˆ° webviewï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€æ¬¡é€šä¿¡ã€‚VS Code ä¸­ç”±äºç§ç§é™åˆ¶é€ æˆäº†ç¼–å†™é€šä¿¡çš„ä»£ç å¾ˆç¹çã€‚åŸºæœ¬ä¾èµ– webview çš„æ’ä»¶éƒ½ä¼šå°†é€šä¿¡æœºåˆ¶ç»™å°è£…äº†ã€‚æˆ‘è¿™é‡Œçš„å°è£…æ€è·¯æ˜¯å€Ÿé‰´äº† <a href="https://www.npmjs.com/package/js-channel">js-channel</a> å®ç°äº†ä¸€ä¸ªä½¿ç”¨èµ·æ¥å¿ƒæ™ºè´Ÿæ‹…æœ€å°çš„ <a href="https://github.com/youngjuning/luozhu/tree/main/packages/vscode-channel#readme">@luozhu&#x2F;vscode-channel</a>ã€‚å€ŸåŠ©è¿™ä¸ªå·¥å…·æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®ç°æ›´æ–° webview çš„æ“ä½œï¼š</p><p><strong>æ’ä»¶ä¾§å‘é€æ›´æ–°æ¶ˆæ¯ï¼š</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Channel</span> <span class="keyword">from</span> <span class="string">&#x27;@luozhu/vscode-channel&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YarnLockEditorProvider</span> <span class="keyword">implements</span> vscode.<span class="property">CustomTextEditorProvider</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">resolveCustomTextEditor</span>(</span><br><span class="line">    <span class="attr">document</span>: vscode.<span class="property">TextDocument</span>,</span><br><span class="line">    <span class="attr">webviewPanel</span>: vscode.<span class="property">WebviewPanel</span>,</span><br><span class="line">    <span class="attr">_token</span>: vscode.<span class="property">CancellationToken</span></span><br><span class="line">  ): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// ç»™ webview è®¾ç½®åˆå§‹å†…å®¹</span></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">options</span> = &#123;</span><br><span class="line">      <span class="attr">enableScripts</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    webviewPanel.<span class="property">webview</span>.<span class="property">html</span> = <span class="title function_">getUmiHTMLContent</span>(<span class="variable language_">this</span>.<span class="property">context</span>, webviewPanel, &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Yarn Lock Preview&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–ä¸€ä¸ª channel å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> channel = <span class="keyword">new</span> <span class="title class_">Channel</span>(<span class="variable language_">this</span>.<span class="property">context</span>, webviewPanel);</span><br><span class="line">    <span class="keyword">const</span> json = lockfile.<span class="title function_">parse</span>(<span class="variable language_">document</span>.<span class="title function_">getText</span>()).<span class="property">object</span>;</span><br><span class="line">    <span class="comment">// è§¦å‘ updateWebview äº‹ä»¶ï¼Œå¹¶å°†æ–‡æœ¬ä½œä¸ºå‚æ•°ä¼ å…¥</span></span><br><span class="line">    channel.<span class="title function_">call</span>(<span class="string">&#x27;updateWebview&#x27;</span>, json);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>webview ä¾§ç›‘å¬æ¶ˆæ¯ï¼š</strong></p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Channel</span> <span class="keyword">from</span> <span class="string">&#x27;@luozhu/vscode-channel&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">HomePage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = <span class="title class_">React</span>.<span class="title function_">useState</span>(&#123;&#125;);</span><br><span class="line">  <span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    channel.<span class="title function_">bind</span>(<span class="string">&#x27;updateWebview&#x27;</span>, <span class="function"><span class="params">message</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setData</span>(message.<span class="property">params</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,[])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–‡æœ¬å†…å®¹åŒæ­¥"><a href="#æ–‡æœ¬å†…å®¹åŒæ­¥" class="headerlink" title="æ–‡æœ¬å†…å®¹åŒæ­¥"></a>æ–‡æœ¬å†…å®¹åŒæ­¥</h3><p>å‰é¢ä¸€ç« æˆ‘ä»¬å®ç°äº†åˆå§‹å†…å®¹çš„åŒæ­¥ï¼Œä½†æ˜¯å†…å®¹ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œ<code>yarn.lock</code> å¾ˆå¯èƒ½ä¼šå˜åŒ–ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦ç›¸åº”åœ°æ›´æ–°æˆ‘ä»¬å†…å®¹ï¼Œè¿™ä¸ªéœ€æ±‚æˆ‘ä»¬éœ€è¦å€ŸåŠ© <code>vscode.workspace.onDidChangeTextDocument</code> äº‹ä»¶ç›‘å¬æ¥å®ç°ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»ç„¶æ˜¯åœ¨ resolveCustomTextEditor æ–¹æ³•ä¸­å®ç°</span></span><br><span class="line"><span class="comment">// ç”±äºéœ€è¦å¯¹ json æ•°æ®å¤„ç†å’Œé‡å¤è°ƒç”¨æ›´æ–°æ–¹æ³•ï¼Œå°è£…äº†æ­¤æ–¹æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateWebview</span>(<span class="params">textDocument: vscode.TextDocument</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> json = lockfile.<span class="title function_">parse</span>(textDocument.<span class="title function_">getText</span>());</span><br><span class="line">  <span class="keyword">switch</span> (json.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;merge&#x27;</span>:</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> å¤„ç† merge type</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;conflict&#x27;</span>:</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> å¤„ç† conflict type</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      json = json.<span class="property">object</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  channel.<span class="title function_">call</span>(<span class="string">&#x27;updateWebview&#x27;</span>, json);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ³¨å†Œé’©å­äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ webview ä¸æ–‡æœ¬æ–‡æ¡£åŒæ­¥ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// æ–‡æœ¬æ–‡ä»¶ä½œä¸ºæˆ‘ä»¬çš„æ¨¡å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å°†æ–‡ä»¶ä¸­çš„å˜åŒ–åŒæ­¥åˆ°æˆ‘ä»¬çš„ç¼–è¾‘å™¨ã€‚</span></span><br><span class="line"><span class="comment">// è¯·è®°ä½ï¼Œä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¹Ÿå¯ä»¥åœ¨å¤šä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ä¹‹é—´å…±äº«ï¼ˆä¾‹å¦‚ï¼Œå½“ä½ åˆ†å‰²ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨æ—¶å°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼‰ã€‚</span></span><br><span class="line"><span class="keyword">const</span> changeDocumentSubscription = vscode.<span class="property">workspace</span>.<span class="title function_">onDidChangeTextDocument</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (e.<span class="property">document</span>.<span class="property">uri</span>.<span class="title function_">toString</span>() === <span class="variable language_">document</span>.<span class="property">uri</span>.<span class="title function_">toString</span>()) &#123;</span><br><span class="line">    <span class="title function_">updateWebview</span>(e.<span class="property">document</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ç¡®ä¿å½“æˆ‘ä»¬çš„ç¼–è¾‘å™¨å…³é—­æ—¶ï¼Œç§»é™¤äº†ç›‘å¬å™¨ã€‚</span></span><br><span class="line">webviewPanel.<span class="title function_">onDidDispose</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  changeDocumentSubscription.<span class="title function_">dispose</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="å®ç°å¯æœç´¢çš„-JSON-View"><a href="#å®ç°å¯æœç´¢çš„-JSON-View" class="headerlink" title="å®ç°å¯æœç´¢çš„ JSON View"></a>å®ç°å¯æœç´¢çš„ JSON View</h3><p>æœç´¢å®ç°ä¸å¤æ‚ï¼Œå¤§å®¶æ„Ÿå…´è¶£å¯ä»¥ç›´æ¥é˜…è¯»æºç ï¼ŒUI ç”¨çš„æ˜¯ umi è‡ªå¸¦çš„ antdã€‚JSON View æˆ‘é€‰ç”¨äº† <code>react-json-view</code>ï¼Œè¿™ä¸ªæœ‰å‡ ç‚¹æ¯”è¾ƒæœ‰æ„æ€å¯ä»¥è®²ä¸€ä¸‹ã€‚</p><ol><li>æ•°æ®é‡è¿‡å¤§æ—¶æ¸²æŸ“æ€§èƒ½å·®éœ€è¦åˆ¤æ–­æ˜¯å¦æŠ˜å </li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ReactJson</span> <span class="keyword">from</span> <span class="string">&#x27;react-json-view&#x27;</span>;</span><br><span class="line">...</span><br><span class="line">&lt;<span class="title class_">ReactJson</span></span><br><span class="line">  shouldCollapse=&#123;<span class="function"><span class="params">filed</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// é™¤äº†æ ¹ç›®å½•éƒ½æŠ˜å </span></span><br><span class="line">    <span class="keyword">if</span> (filed.<span class="property">name</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ ·å¼ç¬¦åˆå½“å‰ä¸»é¢˜</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ReactJson</span> <span class="keyword">from</span> <span class="string">&#x27;react-json-view&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getCssVar</span> = (<span class="params">cssVar: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> htmlStyle = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">style</span>;</span><br><span class="line">  <span class="keyword">return</span> htmlStyle.<span class="title function_">getPropertyValue</span>(cssVar).<span class="title function_">trim</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">&lt;<span class="title class_">ReactJson</span></span><br><span class="line">  style=&#123;&#123;</span><br><span class="line">    <span class="attr">backgroundColor</span>: <span class="title function_">getCssVar</span>(<span class="string">&#x27;--vscode-editor-background&#x27;</span>),</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="title function_">getCssVar</span>(<span class="string">&#x27;--vscode-editor-font-size&#x27;</span>),</span><br><span class="line">  &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><ol start="3"><li>äº®æš—ä¸»é¢˜é€‚é…</li></ol><p>å®Œç¾çš„é€‚é…è‚¯å®šæ˜¯è¦éšç€ä¸»é¢˜çš„æ›´æ”¹åˆ‡æ¢ ReactJson çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ’ä»¶ä¾§å‘èµ·é€šçŸ¥ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹ä¸»é¢˜</span></span><br><span class="line">channel.<span class="title function_">call</span>(<span class="string">&#x27;updateColorTheme&#x27;</span>, vscode.<span class="property">window</span>.<span class="property">activeColorTheme</span>);</span><br><span class="line"><span class="comment">// ç›‘å¬ä¸»é¢˜æ”¹å˜äº‹ä»¶</span></span><br><span class="line">vscode.<span class="property">window</span>.<span class="title function_">onDidChangeActiveColorTheme</span>(<span class="function"><span class="params">colorTheme</span> =&gt;</span> &#123;</span><br><span class="line">  channel.<span class="title function_">call</span>(<span class="string">&#x27;updateColorTheme&#x27;</span>, colorTheme);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ webview ä¾§ç›‘å¬ <code>updateColorTheme</code> äº‹ä»¶ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [theme, setTheme] = <span class="title class_">React</span>.<span class="property">useState</span>&lt;<span class="title class_">ThemeKeys</span>&gt;();</span><br><span class="line">...</span><br><span class="line"><span class="title class_">React</span>.<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">channel.<span class="title function_">bind</span>(<span class="string">&#x27;updateColorTheme&#x27;</span>, <span class="function"><span class="params">message</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; kind &#125; = message.<span class="property">params</span>;</span><br><span class="line">  <span class="title function_">setTheme</span>(kind === <span class="number">1</span> ? <span class="string">&#x27;rjv-default&#x27;</span> : <span class="string">&#x27;monokai&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;, []);</span><br><span class="line">...</span><br><span class="line">&lt;<span class="title class_">ReactJson</span></span><br><span class="line">  theme=&#123;theme&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><p>æ–‡ç« å¼€å¤´å·²ç»æ¼”ç¤ºäº†ç”¨æˆ·ç•Œé¢ï¼Œè¿™é‡Œæ”¾ä¸€å¼ é»‘è‰²ä¸»é¢˜æ•ˆæœå§ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8449b0b270aa423da2ede94f4ad10805~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><h2 id="æ¶‰åŠ-API-é™„å½•"><a href="#æ¶‰åŠ-API-é™„å½•" class="headerlink" title="æ¶‰åŠ API é™„å½•"></a>æ¶‰åŠ API é™„å½•</h2><p>VS Code æ’ä»¶å¼€å‘æ¶‰åŠçŸ¥è¯†ç‚¹æ¯”è¾ƒå¤šï¼Œæ¯ç§æ’ä»¶ç±»å‹éƒ½æœ‰è‡ªå·±çš„å¥—è·¯å’Œ APIã€‚åŸºäºå…³æ³¨åˆ†ç¦»åŸåˆ™ï¼Œè¿™é‡Œåˆ—å‡ºäº†å’Œè‡ªå®šä¹‰ç¼–è¾‘å™¨ç›¸å…³çš„ä¸€äº› APIï¼Œæ–¹ä¾¿å¤§å®¶ä»¥åŠæœªæ¥çš„æˆ‘æŸ¥é˜…ã€‚</p><h3 id="vscode-commands-registerCommand"><a href="#vscode-commands-registerCommand" class="headerlink" title="vscode.commands.registerCommand"></a>vscode.commands.registerCommand</h3><p>æ³¨å†Œä¸€ä¸ªå¯ä»¥è¢«é”®æ˜ å°„ã€èœå•é¡¹ã€åŠ¨ä½œæˆ–ç›´æ¥è°ƒç”¨çš„å‘½ä»¤ã€‚ç”¨ä¸€ä¸ªç°æœ‰çš„å‘½ä»¤æ ‡è¯†ç¬¦æ³¨å†Œä¸¤æ¬¡ä¸€ä¸ªå‘½ä»¤å°†å¯¼è‡´é”™è¯¯ã€‚</p><h3 id="vscode-TextDocument"><a href="#vscode-TextDocument" class="headerlink" title="vscode.TextDocument"></a>vscode.TextDocument</h3><h3 id="vscode-window-registerCustomEditorProvider"><a href="#vscode-window-registerCustomEditorProvider" class="headerlink" title="vscode.window.registerCustomEditorProvider"></a>vscode.window.registerCustomEditorProvider</h3><p>ä¸º <code>customEditors</code> æ‰©å±•åŠŸèƒ½ç‚¹è´¡çŒ®çš„ <code>viewType</code> æ³¨å†Œä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ Providerã€‚</p><p>å½“æ‰“å¼€ä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨è¢«æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ª <code>onCustomEditor:viewType</code> æ´»åŠ¨äº‹ä»¶ã€‚ä½ çš„æ‰©å±•å¿…é¡»ä¸º <code>viewType</code> æ³¨å†Œä¸€ä¸ª <code>CustomTextEditorProvider</code>ã€<code>CustomReadonlyEditor</code>  æˆ– <code>CustomEditorProvider</code> ä½œä¸ºæ¿€æ´»çš„ä¸€éƒ¨åˆ†ã€‚</p><h3 id="vscode-CustomTextEditorProvider"><a href="#vscode-CustomTextEditorProvider" class="headerlink" title="vscode.CustomTextEditorProvider"></a>vscode.CustomTextEditorProvider</h3><p>åŸºäºæ–‡æœ¬çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ providerã€‚</p><p>åŸºäºæ–‡æœ¬çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ä½¿ç”¨ TextDocument ä½œä¸ºå…¶æ•°æ®æ¨¡å‹ã€‚å› ä¸ºå®ƒå…è®¸ç¼–è¾‘å™¨å¤„ç†è®¸å¤šå¸¸è§çš„æ“ä½œï¼Œå¦‚æ’¤é”€å’Œå¤‡ä»½ã€‚provider è´Ÿè´£åœ¨ webview å’Œ TextDocument ä¹‹é—´åŒæ­¥æ–‡æœ¬å˜åŒ–ã€‚</p><h4 id="CustomTextEditorProvider-resolveCustomTextEditor"><a href="#CustomTextEditorProvider-resolveCustomTextEditor" class="headerlink" title="CustomTextEditorProvider.resolveCustomTextEditor"></a>CustomTextEditorProvider.resolveCustomTextEditor</h4><p>æ ¹æ®ç»™å®šæ–‡æœ¬èµ„æºè§£æä¸€ä¸ªè‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚è¯¥æ–¹æ³•å°†åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡ä¸º <code>CustomTextEditorProvider</code> æ‰“å¼€ä¸€ä¸ªèµ„æºæ—¶ï¼Œæˆ–è€…ä»–ä»¬ä½¿ç”¨è¿™ä¸ª <code>CustomTextEditorProvider</code> é‡æ–°æ‰“å¼€å·²ç»å­˜åœ¨çš„ç¼–è¾‘å™¨æ—¶è¢«è°ƒç”¨ã€‚</p><h3 id="vscode-CustomReadonlyEditorProvider"><a href="#vscode-CustomReadonlyEditorProvider" class="headerlink" title="vscode.CustomReadonlyEditorProvider"></a>vscode.CustomReadonlyEditorProvider</h3><p>ä½¿ç”¨è‡ªå®šä¹‰æ–‡æ¡£æ¨¡å‹çš„åªè¯»è‡ªå®šä¹‰ç¼–è¾‘å™¨ Providerã€‚</p><p>è‡ªå®šä¹‰åªè¯»ç¼–è¾‘å™¨ä½¿ç”¨ <code>CustomDocument</code>ï¼Œè€Œä¸æ˜¯ <code>TextDocument</code>ã€‚</p><p>å½“å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…æ›´å¤æ‚çš„åœºæ™¯æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨è¿™ä¸ªç±»å‹çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚ç®€å•çš„åŸºäºæ–‡æœ¬çš„æ–‡æ¡£è¯·ä½¿ç”¨ <code>CustomTextEditorProvider</code>ã€‚</p><h3 id="vscode-CustomEditorProvider"><a href="#vscode-CustomEditorProvider" class="headerlink" title="vscode.CustomEditorProvider"></a>vscode.CustomEditorProvider</h3><p>ä½¿ç”¨è‡ªå®šä¹‰æ–‡æ¡£æ¨¡å‹çš„å¯ç¼–è¾‘è‡ªå®šä¹‰ç¼–è¾‘å™¨çš„ providerã€‚</p><p>è‡ªå®šä¹‰ç¼–è¾‘å™¨ä½¿ç”¨ <code>CustomDocument</code>ï¼Œè€Œä¸æ˜¯ <code>TextDocument</code>ã€‚è¿™ä½¿å¾—æ‰©å±•ç¨‹åºå¯ä»¥å®Œå…¨æ§åˆ¶ç¼–è¾‘ã€ä¿å­˜å’Œå¤‡ä»½ç­‰æ“ä½œã€‚</p><p>å½“å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è€…æ›´å¤æ‚çš„åœºæ™¯æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨è¿™ä¸ªç±»å‹çš„è‡ªå®šä¹‰ç¼–è¾‘å™¨ã€‚ç®€å•çš„åŸºäºæ–‡æœ¬çš„æ–‡æ¡£è¯·ä½¿ç”¨ <code>CustomTextEditorProvider</code>ã€‚</p><h3 id="vscode-WebviewPanel"><a href="#vscode-WebviewPanel" class="headerlink" title="vscode.WebviewPanel"></a>vscode.WebviewPanel</h3><p>ä¸€ä¸ªåŒ…å« webview çš„é¢æ¿ã€‚</p><blockquote><p>æœ¬æ–‡é¦–å‘äº <a href="https://juejin.cn/user/325111174662855/posts">æ˜é‡‘ä¸“æ </a>ï¼ŒåŒæ­¥äº <a href="https://youngjuning.js.org/">æ´›ç«¹çš„åšå®¢</a> å’Œå…¬ä¼—å· <a href="https://cdn.jsdelivr.net/gh/youngjuning/images/20210418112129.jpeg">æ´›ç«¹æ—©èŒ¶é¦†</a>ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=youngjuning.yarn-lock-preview&quot;&gt;Yarn Lock Preview&lt;/a&gt; æ’ä»¶å·²å‘å¸ƒï¼Œäº²æµ‹å·²æ¯”</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="VS Code" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/VS-Code/"/>
    
    
    <category term="VS Code" scheme="https://youngjuning.js.org/tags/VS-Code/"/>
    
    <category term="yarn.lock" scheme="https://youngjuning.js.org/tags/yarn-lock/"/>
    
  </entry>
  
  <entry>
    <title>hexo-theme-butterfly é­”æ”¹ä¸ç¾åŒ–</title>
    <link href="https://youngjuning.js.org/3f81e8c6ddd1/"/>
    <id>https://youngjuning.js.org/3f81e8c6ddd1/</id>
    <published>2023-02-22T06:18:09.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<!-- DRAFT hexo-theme-butterfly é­”æ”¹ä¸ç¾åŒ– --><blockquote><p>å½“å‰é­”æ”¹åŸºäº hexo 6.3.0 å’Œ hexo-theme-butterfly 4.7.0</p></blockquote><h1 id="patch-package-é…ç½®"><a href="#patch-package-é…ç½®" class="headerlink" title="patch-package é…ç½®"></a>patch-package é…ç½®</h1><p>patch-package å¯ä»¥å°†ä½ çš„é­”æ”¹è®°å½•ä¿å­˜åˆ° <code>patches</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–¹ä¾¿ä¸‹æ¬¡æ›´æ–°ä¸»é¢˜ååº”ç”¨é­”æ”¹ã€‚æŒ‰ç…§ä¸‹é¢çš„ä»£ç ä¿®æ”¹ package.json å³å¯ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line"><span class="addition">+    &quot;postinstall&quot;: &quot;npx patch-package&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³ç›´æ¥åº”ç”¨æˆ‘çš„é­”æ”¹ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶æœ¬æ–‡çš„ä»£ç åˆ° <code>patches/hexo-theme-butterfly+4.7.0.patch</code></p><h1 id="ä¸¤ä¸ªå°äºº"><a href="#ä¸¤ä¸ªå°äºº" class="headerlink" title="ä¸¤ä¸ªå°äºº"></a>ä¸¤ä¸ªå°äºº</h1><div class="tabs" id="ä¸¤ä¸ªå°äºº"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ä¸¤ä¸ªå°äºº-1">æ”¹åŠ¨ç‚¹</button></li><li class="tab"><button type="button" data-href="#ä¸¤ä¸ªå°äºº-2">æ•ˆæœé¢„è§ˆ</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ä¸¤ä¸ªå°äºº-1"><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">diff --git a/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug b/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug</span></span><br><span class="line"><span class="comment">index 9e63627..905342a 100644</span></span><br><span class="line"><span class="comment">--- a/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug</span></span><br><span class="line"><span class="comment">+++ b/node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug</span></span><br><span class="line"><span class="meta">@@ -4,3 +4,4 @@</span> if theme.aside.card_announcement.enable</span><br><span class="line">       i.fas.fa-bullhorn.fa-shake</span><br><span class="line">       span= _p(&#x27;aside.card_announcement&#x27;)</span><br><span class="line">     .announcement_content!= theme.aside.card_announcement.content</span><br><span class="line"><span class="addition">+      .twopeople!= &#x27;&lt;div class=&quot;twopeople&quot;&gt;&lt;div class=&quot;container&quot; style=&quot;height:200px;&quot;&gt;&lt;canvas class=&quot;illo&quot; width=&quot;800&quot; height=&quot;800&quot; style=&quot;max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;&quot;&gt;&lt;/canvas&gt;&lt;/div&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js&quot;&gt;&lt;/script&gt;&lt;script id=&quot;rendered-js&quot; src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js&quot;&gt;&lt;/script&gt;&lt;style&gt;.twopeople&#123;margin: 0;align-items: center;justify-content: center;text-align: center;&#125;canvas &#123;display: block;margin: 0 auto;cursor: move;&#125;&lt;/style&gt;&lt;/div&gt;&#x27;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ä¸¤ä¸ªå°äºº-2"><p><img src="https://picbed.qunarzz.com/f3d661e2088ea4fd706709ee1024adce.png" alt="æ•ˆæœé¢„è§ˆ"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p>é¸£è°¢ <a href="https://guole.fun/posts/butterfly-custom/">https://guole.fun/posts/butterfly-custom/</a></p></blockquote><h1 id="ç«™ç‚¹-Logo-åœ†è§’"><a href="#ç«™ç‚¹-Logo-åœ†è§’" class="headerlink" title="ç«™ç‚¹ Logo åœ†è§’"></a>ç«™ç‚¹ Logo åœ†è§’</h1><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">diff --git a/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl b/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl</span></span><br><span class="line"><span class="comment">index ade0db3..956a69e 100644</span></span><br><span class="line"><span class="comment">--- a/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl</span></span><br><span class="line"><span class="comment">+++ b/node_modules/hexo-theme-butterfly/source/css/_layout/head.styl</span></span><br><span class="line"><span class="meta">@@ -289,6 +289,7 @@</span></span><br><span class="line">       margin-right: 6px</span><br><span class="line">       height: 36px</span><br><span class="line">       vertical-align: middle</span><br><span class="line"><span class="addition">+      border-radius: 50%</span></span><br><span class="line"></span><br><span class="line">   #toggle-menu</span><br><span class="line">     display: none</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æœ¬æ–‡å°†ä»‹ç»æœ¬ç«™å¯¹ hexo-theme-butterfly è¿›è¡Œçš„ä¸€äº›ç¾åŒ–å’Œé­”æ”¹ã€‚</summary>
    
    
    
    <category term="ç«™ç‚¹è¿è¥" scheme="https://youngjuning.js.org/categories/%E7%AB%99%E7%82%B9%E8%BF%90%E8%90%A5/"/>
    
    
    <category term="hexo" scheme="https://youngjuning.js.org/tags/hexo/"/>
    
    <category term="hexo-theme-butterfly" scheme="https://youngjuning.js.org/tags/hexo-theme-butterfly/"/>
    
    <category term="é­”æ”¹" scheme="https://youngjuning.js.org/tags/%E9%AD%94%E6%94%B9/"/>
    
    <category term="ç¾åŒ–" scheme="https://youngjuning.js.org/tags/%E7%BE%8E%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆå¤‡è€ƒç¬”è®°</title>
    <link href="https://youngjuning.js.org/e896d9d3a8e1/"/>
    <id>https://youngjuning.js.org/e896d9d3a8e1/</id>
    <published>2023-02-19T15:40:41.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<!-- DRAFT ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆå¤‡è€ƒç¬”è®° --><h1 id="ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ"><a href="#ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ" class="headerlink" title="ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ"></a>ä¿¡æ¯åŒ–å’Œä¿¡æ¯ç³»ç»Ÿ</h1><h2 id="ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–"><a href="#ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–"></a>ä¿¡æ¯ç³»ç»Ÿä¸ä¿¡æ¯åŒ–</h2><h3 id="ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ"><a href="#ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ"></a>ä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µ</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ä¿¡æ¯çš„å®šä¹‰</summary><div class="toggle-content"><p>ä¿¡æ¯å°±æ˜¯ç”¨æ¥æ¶ˆé™¤ä¸ç¡®å®šæ€§çš„ä¸œè¥¿ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¿¡æ¯çš„ç‰¹å¾</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯çš„ç‰¹å¾</summary><div class="toggle-content"><ol><li><strong>å®¢è§‚æ€§</strong>ï¼šä¿¡æ¯æ˜¯å®¢è§‚äº‹ç‰©åœ¨äººè„‘ä¸­çš„åæ˜ ï¼Œè€Œåæ˜ çš„å¯¹è±¡åˆ™æœ‰ä¸»è§‚å’Œå®¢è§‚çš„åŒºåˆ«ï¼Œå› æ­¤ï¼Œä¿¡æ¯å¯åˆ†ä¸ºä¸»è§‚ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå†³ç­–ã€æŒ‡ä»¤å’Œè®¡åˆ’ç­‰ï¼‰å’Œå®¢è§‚ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå›½é™…å½¢å¼ã€ç»æµå‘å±•å’Œä¸€å¹´å››å­£ç­‰ï¼‰ã€‚ä¸»è§‚ä¿¡æ¯å¿…ç„¶è¦è½¬åŒ–æˆå®¢è§‚ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œå†³ç­–å’Œè®¡åˆ’ç­‰ä¸»è§‚ä¿¡æ¯è¦è½¬åŒ–æˆå®é™…è¡ŒåŠ¨ã€‚</li><li><strong>æ™®éæ€§</strong>ï¼šç‰©è´¨å…·æœ‰æ™®éæ€§ï¼Œä¿¡æ¯å±äºç‰©è´¨ï¼Œç‰©è´¨çš„æ™®éæ€§å†³å®šäº†ä¿¡æ¯çš„æ™®éå­˜åœ¨ã€‚</li><li><strong>æ— é™æ€§</strong>ï¼šå®¢è§‚ä¸–ç•Œæ˜¯æ— é™çš„ï¼Œä¿¡æ¯æ˜¯å®¢è§‚äº‹ç‰©&#x2F;ä¸–ç•Œåœ¨äººè„‘ä¸­çš„åæ˜ ï¼Œåæ˜ å®¢è§‚ä¸–ç•Œçš„ä¿¡æ¯è‡ªç„¶ä¹Ÿæ˜¯æ— é™çš„ã€‚æ— é™æ€§å¯åˆ†ä¸ºä¸¤ä¸ªå±‚æ¬¡ï¼Œä¸€æ˜¯æ— é™çš„äº‹ç‰©äº§ç”Ÿæ— é™çš„ä¿¡æ¯ï¼Œå³ä¿¡æ¯çš„æ€»é‡æ˜¯æ— é™çš„ï¼›äºŒæ˜¯æ¯ä¸ªå…·ä½“äº‹ç‰©æˆ–æœ‰é™ä¸ªé£Ÿç‰©çš„é›†åˆæ‰€èƒ½äº§ç”Ÿçš„ä¿¡æ¯ä¹Ÿå¯ä»¥æ˜¯æ— é™çš„ã€‚</li><li><strong>åŠ¨æ€æ€§</strong>ï¼šä¿¡æ¯æ˜¯éšç€æ—¶é—´çš„å˜åŒ–è€Œå˜åŒ–çš„ã€‚</li><li><strong>ç›¸å¯¹æ€§</strong>ï¼šä¸åŒçš„è®¤è¯†ä¸»ä½“ä»åŒä¸€äº‹ç‰©ä¸­è·å–çš„ä¿¡æ¯åŠä¿¡æ¯é‡å¯èƒ½æ˜¯ä¸åŒçš„ã€‚è¿™ä¼šå–å†³äºè®¤è¯†ä¸»ä½“çš„ç”Ÿé•¿ç¯å¢ƒã€æ•™è‚²ã€å·¥ä½œç¯å¢ƒã€å·¥ä½œæ€§è´¨ç­‰å¤–ç•Œå› ç´ ã€‚</li><li><strong>ä¾é™„æ€§</strong>ï¼šä¿¡æ¯çš„ä¾é™„æ€§å¯ä»¥ä»ä¸¤ä¸ªæ–¹é¢æ¥è§£é‡Šï¼Œä¸€æ–¹é¢ï¼Œä¿¡æ¯æ˜¯å®¢è§‚ä¸–ç•Œçš„åæ˜ ï¼Œä»»ä½•ä¿¡æ¯å¿…ç„¶ç”±å®¢è§‚äº‹ç‰©æ‰€äº§ç”Ÿï¼Œä¸å­˜åœ¨æ— æºçš„ä¿¡æ¯ï¼›å¦ä¸€æ–¹é¢ï¼Œä»»ä½•ä¿¡æ¯éƒ½è¦ä¾é™„äºä¸€å®šçš„è½½ä½“è€Œå­˜åœ¨ï¼Œéœ€è¦æœ‰ç‰©è´¨çš„æ‰¿æ‹…è€…ï¼Œä¿¡æ¯ä¸èƒ½å®Œå…¨è„±ç¦»ç‰©è´¨è€Œç‹¬ç«‹å­˜åœ¨ã€‚</li><li><strong>å˜æ¢æ€§</strong>ï¼šä¿¡æ¯é€šè¿‡å¤„ç†å¯ä»¥å®ç°å˜åŒ–æˆ–è½¬æ¢ï¼Œä½¿å…¶å½¢å¼å’Œå†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œä»¥é€‚åº”ç‰¹å®šçš„éœ€è¦ã€‚æ¯”è¾ƒæ˜æ˜¾çš„æ˜¯æ•°æ®å¯è§†åŒ–åˆ†è¿‡ç¨‹ï¼Œå®ç°ä¿¡æ¯ä»æ–‡å­—åˆ°è¡¨æ ¼ï¼Œæœ€ç»ˆåˆ°å›¾è¡¨çš„å±•ç¤ºï¼Œé€šè¿‡å˜åŒ–ï¼Œä¿¡æ¯çš„å¯è¯»æ€§è¶Šæ¥è¶Šå¼ºã€‚</li><li><strong>ä¼ é€’æ€§</strong>ï¼šä¿¡æ¯åœ¨æ—¶é—´ä¸Šçš„ä¼ é€’å°±æ˜¯å­˜å‚¨ï¼Œåœ¨ç©ºé—´ä¸Šçš„ä¼ é€’å°±æ˜¯è½¬ç§»æˆ–æ‰©æ•£ã€‚</li><li><strong>å±‚æ¬¡æ€§</strong>ï¼šå®¢è§‚ä¸–ç•Œæ˜¯åˆ†å±‚æ¬¡çš„ï¼Œåæ˜ å®ƒçš„ä¿¡æ¯ä¹Ÿæ˜¯åˆ†å±‚æ¬¡çš„ã€‚</li><li><strong>ç³»ç»Ÿæ€§</strong>ï¼šä¿¡æ¯å¯ä»¥è¡¨ç¤ºä¸ºä¸€ç§åˆé›†ï¼Œä¸åŒç±»åˆ«çš„ä¿¡æ¯å¯ä»¥å½¢æˆä¸åŒçš„æ•´ä½“ã€‚å› æ­¤ï¼Œå¯ä»¥å½¢æˆä¸ç°å®ä¸–ç•Œç›¸å¯¹åº”çš„ä¿¡æ¯ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼šç»æµé¢†åŸŸä¸­çš„å•†ä¸šç³»ç»Ÿå’Œé‡‘èç³»ç»Ÿï¼Œè‡ªç„¶ç•Œä¸­çš„æ°´åˆ©ç³»ç»Ÿå’Œç”Ÿæ€ç³»ç»Ÿç­‰ã€‚</li><li><strong>è½¬åŒ–æ€§</strong>ï¼šä¿¡æ¯çš„äº§ç”Ÿä¸èƒ½æ²¡æœ‰ç‰©è´¨ï¼Œä¿¡æ¯çš„ä¼ é€’ä¸èƒ½æ²¡æœ‰èƒ½é‡ï¼Œä½†æœ‰æ•ˆåœ°ä½¿ç”¨ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ä¿¡æ¯è½¬åŒ–ä¸ºç‰©è´¨æˆ–èƒ½é‡ã€‚</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯è´¨é‡å±æ€§â­</summary><div class="toggle-content"><ol><li><strong>ç²¾ç¡®æ€§</strong>ï¼šå¯¹äº‹ç‰©çŠ¶æ€æè¿°çš„ç²¾å‡†ç¨‹åº¦ã€‚</li><li><strong>å®Œæ•´æ€§</strong>ï¼šå¯¹äº‹ç‰©çŠ¶æ€æè¿°çš„å…¨é¢ç¨‹åº¦ï¼Œå®Œæ•´ä¿¡æ¯åº”åŒ…æ‹¬æ‰€æœ‰é‡è¦äº‹å®ã€‚</li><li><strong>å¯é æ€§</strong>ï¼šæŒ‡ä¿¡æ¯çš„æ¥æºã€é‡‡é›†æ–¹æ³•ã€ä¼ è¾“è¿‡ç¨‹æ˜¯å¯ä»¥ä¿¡ä»»çš„ï¼Œç¬¦åˆé¢„æœŸã€‚</li><li><strong>åŠæ—¶æ€§</strong>ï¼ŒæŒ‡è·å¾—ä¿¡æ¯çš„æ—¶åˆ»ä¸äº‹ä»¶å‘ç”Ÿæ—¶åˆ»çš„é—´éš”é•¿çŸ­ã€‚</li><li><strong>ç»æµæ€§</strong>ï¼ŒæŒ‡ä¿¡æ¯è·å–ã€ä¼ è¾“å¸¦æ¥çš„æˆæœ¬åœ¨å¯ä»¥æ¥å—çš„èŒƒå›´ä¹‹å†…ã€‚</li><li><strong>å¯éªŒè¯æ€§</strong>ï¼šæŒ‡ä¿¡æ¯çš„ä¸»è¦è´¨é‡å±æ€§å¯ä»¥è¢«è¯å®æˆ–è€…è¯ä¼ªçš„ç¨‹åº¦ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šæŒ‡åœ¨ä¿¡æ¯çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä¿¡æ¯å¯ä»¥è¢«éæˆæƒè®¿é—®çš„å¯èƒ½æ€§ï¼Œå¯èƒ½æ€§è¶Šä½ï¼Œå®‰å…¨æ€§è¶Šé«˜ã€‚</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ä¿¡æ¯çš„åŠŸèƒ½</summary><div class="toggle-content"><p>æ— é‡è¦è€ƒç‚¹</p></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ä¿¡æ¯çš„ä¼ è¾“æ¨¡å‹â­</summary><div class="toggle-content"><ul><li><strong>ä¿¡æº</strong>ï¼šäº§ç”Ÿä¿¡æ¯çš„å®ä½“ï¼Œä¿¡æ¯äº§ç”Ÿåï¼Œç”±è¿™ä¸ªå®ä½“å‘å¤–ä¼ æ’­ã€‚</li><li><strong>ä¿¡å®¿</strong>ï¼šä¿¡æ¯çš„å½’å®¿æˆ–è€…æ¥å—è€…ã€‚</li><li><strong>ä¿¡é“</strong>ï¼šä¼ é€ä¿¡æ¯çš„é€šé“ã€‚</li><li><strong>ç¼–ç å™¨</strong>ï¼šåœ¨ä¿¡æ¯è®ºä¸­æ˜¯æ³›æŒ‡æ‰€æœ‰å˜æ¢ä¿¡å·çš„è®¾å¤‡ï¼Œå®é™…ä¸Šå°±æ˜¯ç»ˆç«¯æœºçš„å‘é€éƒ¨åˆ†ã€‚å®ƒåŒ…æ‹¬ä»ä¿¡æºåˆ°ä¿¡é“çš„æ‰€æœ‰è®¾å¤‡ï¼Œå¦‚é‡åŒ–å™¨ã€å‹ç¼©ç¼–ç å™¨ã€è°ƒåˆ¶å™¨ç­‰ï¼Œä½¿ä¿¡æºè¾“å‡ºçš„ä¿¡å·è½¬æ¢æˆé€‚ç”¨äºä¿¡é“ä¼ é€çš„ä¿¡å·ã€‚</li><li><strong>è¯‘ç å™¨</strong>ï¼šè¯‘ç å™¨æ˜¯ç¼–ç å™¨çš„é€†å˜æ¢è®¾å¤‡ï¼ŒæŠŠä¿¡é“ä¸Šä¼ æ¥çš„ä¿¡å·ï¼ˆåŸå§‹ä¿¡å·ä¸å™ªå£°çš„å åŠ ï¼‰è½¬æ¢æˆä¿¡å®¿èƒ½æ¥å—çš„ä¿¡å·ã€‚</li><li><strong>å™ªå£°</strong>ï¼šå™ªå£°å¯ä»¥ç†è§£ä¸ºå¹²æ‰°ã€‚</li></ul><p><img src="https://picbed.qunarzz.com/771ed4f1600bfe927bc97c5f5e6e2512.png" alt="ä¿¡æ¯ä¼ è¾“æ¨¡å‹"></p></div></details><h3 id="ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ"><a href="#ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ"></a>ä¿¡æ¯ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ç³»ç»Ÿçš„ç‰¹æ€§</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">æ€»ä½“ç‰¹æ€§</summary><div class="toggle-content"><ol><li><strong>ç›®çš„æ€§</strong>ï¼šå®šä¹‰ä¸€ä¸ªç³»ç»Ÿã€ç»„æˆä¸€ä¸ªç³»ç»Ÿæˆ–è€…æŠ½è±¡å‡ºä¸€ä¸ªç³»ç»Ÿï¼Œéƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡æˆ–è€…ç›®çš„ï¼Œç›®æ ‡æ€§å†³å®šäº†ç³»ç»Ÿçš„åŠŸèƒ½ã€‚</li><li><strong>æ•´ä½“æ€§</strong>ï¼šç³»ç»Ÿæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œå…ƒç´ æ˜¯ä¸ºäº†è¾¾åˆ°ä¸€å®šçš„ç›®çš„ï¼ŒæŒ‰ç…§ä¸€å®šçš„åŸåˆ™ï¼Œæœ‰åºåœ°æ’åˆ—èµ·æ¥ç»„æˆç³»ç»Ÿï¼Œä»è€Œäº§ç”Ÿå‡ºç³»ç»Ÿçš„ç‰¹å®šåŠŸèƒ½ã€‚</li><li><strong>å±‚æ¬¡æ€§</strong>ï¼šç³»ç»ŸåŒ–æ˜¯ç”±å¤šä¸ªå…ƒç´ ç»„æˆçš„ï¼Œç³»ç»Ÿå’Œå…ƒç´ æ˜¯ç›¸å¯¹çš„æ¦‚å¿µã€‚å…ƒç´ æ˜¯ç›¸å¯¹äºå®ƒæ‰€å¤„çš„ç³»ç»Ÿè€Œè¨€çš„ã€‚ç³»ç»Ÿæ˜¯ä»å®ƒåŒ…å«å…ƒç´ çš„è§’åº¦æ¥çœ‹çš„ï¼Œå¦‚æœç ”ç©¶é—®é¢˜çš„è§’åº¦å˜ä¸€å˜ï¼Œç³»ç»Ÿå°±æˆä¸ºæ›´é«˜ä¸€çº§çš„å…ƒç´ ï¼Œä¹Ÿæˆä¸ºå­ç³»ç»Ÿã€‚</li><li><strong>ç¨³å®šæ€§</strong>ï¼šæ˜¯è§„åˆ™çš„çº¦æŸï¼Œç³»ç»Ÿçš„å†…éƒ¨ç»“æ„å’Œç§©åºåº”è¯¥æ˜¯å¯ä»¥é¢„è§çš„ï¼›ç³»ç»Ÿçš„çŠ¶æ€ä»¥åŠæ¼”åŒ–è·¯å¾„æœ‰é™å¹¶èƒ½è¢«é¢„æµ‹ï¼›ç³»ç»Ÿçš„åŠŸèƒ½å‘ç”Ÿä½œç”¨å¯¼è‡´çš„åæœä¹Ÿæ˜¯å¯ä»¥é¢„ä¼°çš„ã€‚ç¨³å®šæ€§å¼ºçš„ç³»ç»Ÿä½¿å¾—ç³»ç»Ÿåœ¨å—åˆ°å¤–éƒ¨ä½œç”¨çš„åŒæ—¶ï¼Œå†…éƒ¨ç»“æ„å’Œç§©åºä»ç„¶èƒ½å¤Ÿä¿æŒã€‚</li><li><strong>çªå˜æ€§</strong>ï¼šçªå˜æ€§æ˜¯æŒ‡ç³»ç»Ÿé€šè¿‡å¤±ç¨³ï¼Œä»ä¸€ç§çŠ¶æ€è¿›å…¥å¦ä¸€ç§çŠ¶æ€çš„ä¸€ç§å‰§çƒˆå˜åŒ–è¿‡ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿè´¨å˜çš„ä¸€ç§åŸºæœ¬å½¢å¼ã€‚</li><li><strong>è‡ªç»„ç»‡æ€§</strong>ï¼šå¼€æ”¾ç³»ç»Ÿåœ¨ç³»ç»Ÿå†…å¤–å› ç´ çš„ä½œç”¨ä¸‹ï¼Œè‡ªå‘ç»„ç»‡èµ·æ¥ï¼Œä½¿ç³»ç»Ÿä»æ— åºåˆ°æœ‰åºï¼Œä»ä½çº§æœ‰åºåˆ°é«˜çº§æœ‰åºã€‚</li><li><strong>ç›¸ä¼¼æ€§</strong>ï¼šç³»ç»Ÿå…·æœ‰åŒæ„å’ŒåŒæ€çš„æ€§è´¨ï¼Œä½“ç°åœ¨ç³»ç»Ÿç»“æ„ã€å­˜åœ¨æ–¹å¼å’Œæ¼”åŒ–è¿‡ç¨‹å…·æœ‰å…±åŒæ€§ã€‚ç³»ç»Ÿå…·æœ‰ç›¸ä¼¼æ€§ï¼Œæ ¹æœ¬åŸå› åœ¨äºä¸–ç•Œçš„ç‰©è´¨ç»Ÿä¸€æ€§ã€‚</li><li><strong>ç›¸å…³æ€§</strong>ï¼šå…ƒç´ æ˜¯å¯åˆ†çš„å’Œç›¸äº’è”ç³»çš„ï¼Œç»„æˆç³»ç»Ÿçš„å…ƒç´ å¿…é¡»æœ‰æ˜ç¡®çš„è¾¹ç•Œï¼Œå¯ä»¥ä¸åˆ«çš„å…ƒç´ åŒºåˆ†å¼€æ¥ã€‚å¦å¤–ï¼Œå…ƒç´ ä¹‹é—´æ˜¯ç›¸äº’è”ç³»çš„ï¼Œä¸æ˜¯å“²å­¦ä¸Šæ‰€è¯´çš„é‚£ç§æ™®éè”ç³»ï¼Œè€Œæ˜¯å®å®åœ¨åœ¨çš„ã€å…·ä½“çš„è”ç³»ã€‚</li><li><strong>é€‚åº”ç¯å¢ƒæ€§</strong>ï¼šç³»ç»Ÿæ€»å¤„åœ¨ä¸€å®šçš„ç¯å¢ƒä¸­ï¼Œä¸ç¯å¢ƒå‘ç”Ÿç›¸äº’ä½œç”¨ã€‚ç³»ç»Ÿå’Œç¯å¢ƒä¹‹é—´æ€»æ˜¯åœ¨å‘ç”Ÿç€ä¸€å®šçš„ç‰©è´¨å’Œèƒ½é‡äº¤æ¢ã€‚</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">çªå‡ºç‰¹å¾</summary><div class="toggle-content"><ol><li>å¼€æ”¾æ€§ï¼šç³»ç»Ÿçš„å¼€æ”¾æ€§æ˜¯æŒ‡ç³»ç»Ÿçš„å¯è®¿é—®æ€§ã€‚</li><li>è„†å¼±æ€§ğŸ”¥ï¼šè¿™ä¸ªç‰¹æ€§ä¸ç³»ç»Ÿçš„ç¨³å®šæ€§ç›¸åº”ï¼Œå³ç³»ç»Ÿå¯èƒ½å­˜åœ¨ç€ä¸§å¤±ç»“æ„ã€åŠŸèƒ½ã€ç§©åºçš„ç‰¹æ€§ï¼Œè¿™ä¸ªç‰¹æ€§å¾€å¾€æ˜¯éšè—ä¸æ˜“è¢«å¤–ç•Œæ„ŸçŸ¥çš„ã€‚</li><li>å¥å£®æ€§ï¼šç³»ç»Ÿå…·æœ‰èƒ½å¤ŸæŠµå¾¡å‡ºç°éé¢„æœŸçŠ¶æ€çš„ç‰¹æ€§ç§°ä¸ºå¥å£®æ€§ï¼Œä¹Ÿç§°é²æ£’æ€§ï¼ˆrobustnessï¼‰ã€‚è¦æ±‚å…·æœ‰é«˜å¯ç”¨æ€§çš„ä¿¡æ¯ç³»ç»Ÿï¼Œä¼šé‡‡ç”¨å†—ä½™æŠ€æœ¯ã€å®¹é”™æŠ€æœ¯ã€èº«ä»½è¯†åˆ«æŠ€æœ¯ã€å¯é æ€§æŠ€æœ¯ç­‰æ¥æŠµå¾¡ç³»ç»Ÿå‡ºç°çš„éé¢„æœŸçš„çŠ¶æ€ï¼Œä¿æŒç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¿¡æ¯ç³»ç»Ÿ</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>ç®€å•åœ°è¯´ï¼Œä¿¡æ¯ç³»ç»Ÿå°±æ˜¯è¾“å…¥æ•°æ®ï¼Œé€šè¿‡åŠ å·¥å¤„ç†ï¼Œäº§ç”Ÿä¿¡æ¯çš„ç³»ç»Ÿã€‚</p></div></details><p>ä¿¡æ¯ç³»ç»Ÿå¯ä»¥æ˜¯æ‰‹å·¥çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯è®¡ç®—æœºåŒ–çš„ã€‚</p><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯ç³»ç»Ÿé›†æˆ</summary><div class="toggle-content"><p>é‡‡ç”¨ç°ä»£ç®¡ç†ç†è®ºï¼ˆä¾‹å¦‚ï¼Œè½¯ä»¶å·¥ç¨‹ã€é¡¹ç›®ç®¡ç†ç­‰ï¼‰ä½œä¸ºè®¡åˆ’ã€è®¾è®¡ã€æ§åˆ¶çš„æ–¹æ³•è®ºï¼Œå°†ç¡¬ä»¶ã€è½¯ä»¶ã€æ•°æ®åº“ã€ç½‘ç»œç­‰éƒ¨ä»¶æŒ‰ç…§è§„åˆ’çš„ç»“æ„å’Œç§©åºï¼Œæœ‰æœºåœ°æ•´åˆä¸€ä¸ªæœ‰æ¸…æ™°è¾¹ç•Œçš„ä¿¡æ¯ç³»ç»Ÿä¸­ï¼Œä»¥è¾¾åˆ°æ—¢å®šç³»ç»Ÿçš„ç›®æ ‡ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºä¿¡æ¯ç³»ç»Ÿé›†æˆã€‚</p></div></details></div></details><h3 id="ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ"><a href="#ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ"></a>ä¿¡æ¯åŒ–çš„åŸºæœ¬æ¦‚å¿µ</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ä¿¡æ¯åŒ–ä»â€œå°â€åˆ°â€œå¤§â€çš„äº”ä¸ªå±‚æ¬¡â­ï¸</summary><div class="toggle-content"><ol><li><strong>äº§å“ä¿¡æ¯åŒ–</strong></li><li><strong>ä¼ä¸šä¿¡æ¯åŒ–</strong></li><li><strong>äº§ä¸šä¿¡æ¯åŒ–</strong></li><li><strong>å›½æ°‘ç»æµä¿¡æ¯åŒ–</strong></li><li><strong>ç¤¾ä¼šç”Ÿæ´»ä¿¡æ¯åŒ–</strong></li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¿¡æ¯åŒ–çš„å†…æ¶µğŸ”¥</summary><div class="toggle-content"><ol><li><strong>ä¿¡æ¯åŒ–çš„ä¸»ä½“</strong>ï¼š<strong>å…¨ä½“ç¤¾ä¼šæˆå‘˜</strong>ï¼ŒåŒ…æ‹¬æ”¿åºœã€ä¼ä¸šã€äº‹ä¸šã€å›¢ä½“å’Œä¸ªäººã€‚</li><li><strong>æ—¶åŸŸ</strong>ï¼šä¸€ä¸ªé•¿æœŸçš„è¿‡ç¨‹</li><li><strong>ç©ºåŸŸ</strong>ï¼šæ”¿æ²»ã€ç»æµã€æ–‡åŒ–ã€å†›äº‹å’Œç¤¾ä¼šçš„ä¸€åˆ‡é¢†åŸŸ</li><li><strong>æ‰‹æ®µ</strong>ï¼šåŸºäºç°ä»£ä¿¡æ¯æŠ€æœ¯çš„å…ˆè¿›ç¤¾ä¼šç”Ÿäº§å·¥å…·</li><li><strong>é€”å¾„</strong>ï¼šæ˜¯åˆ›å»ºä¿¡æ¯æ—¶ä»£çš„ç¤¾ä¼šç”Ÿäº§åŠ›ï¼Œæ¨åŠ¨ç¤¾ä¼šç”Ÿäº§å…³ç³»åŠç¤¾ä¼šä¸Šå±‚å»ºç­‘çš„æ”¹é©</li><li><strong>ç›®æ ‡</strong>ï¼šä½¿å›½å®¶çš„ç»¼åˆå®åŠ›ã€ç¤¾ä¼šçš„æ–‡æ˜ç´ è´¨å’Œäººæ°‘çš„ç”Ÿæ´»è´¨é‡å…¨é¢æå‡</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€å›½å®¶çº§ä¿¡æ¯ç³»ç»Ÿ</summary><div class="toggle-content"><ul><li>ä¸¤ç½‘ï¼šæ˜¯æŒ‡æ”¿åŠ¡å†…ç½‘å’Œæ”¿åŠ¡å¤–ç½‘</li><li>ä¸€ç«™ï¼šæ˜¯æŒ‡æ”¿åºœé—¨æˆ·ç½‘ç«™</li><li>å››åº“ï¼šå³å»ºç«‹äººå£ã€æ³•äººå•ä½ã€ç©ºé—´åœ°ç†å’Œè‡ªç„¶èµ„æºã€å®è§‚ç»æµç­‰å››å¤§åŸºç¡€æ•°æ®åº“ã€‚</li><li>åäºŒé‡‘</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ä¿¡æ¯åŒ–çš„å…­è¦ç´ ğŸ”¥</summary><div class="toggle-content"><ol><li><strong>ä¿¡æ¯èµ„æº</strong>ï¼šä¿¡æ¯èµ„æºçš„å¼€å‘å’Œåˆ©ç”¨æ˜¯å›½å®¶ä¿¡æ¯åŒ–çš„æ ¸å¿ƒäººä»»åŠ¡ï¼Œæ˜¯å›½å®¶ä¿¡æ¯åŒ–å»ºè®¾å–å¾—å®æ•ˆçš„å…³é”®ï¼Œä¹Ÿæ˜¯æˆ‘å›½ä¿¡æ¯åŒ–çš„è–„å¼±ç¯èŠ‚ã€‚ï¼ˆä¿¡æ¯æŠ€æœ¯ã€è®¾å¤‡ã€è®¾æ–½ã€ä¿¡æ¯ç”Ÿäº§è€…ç­‰ï¼‰</li><li><strong>ä¿¡æ¯ç½‘ç»œ</strong>ï¼šä¿¡æ¯ç½‘ç»œæ˜¯ä¿¡æ¯èµ„æºå¼€å‘å’Œåˆ©ç”¨çš„åŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬ç”µä¿¡ç½‘ï¼Œå¹¿æ’­ç”µè§†å’Œè®¡ç®—æœºç½‘ç»œã€‚</li><li><strong>ä¿¡æ¯æŠ€æœ¯åº”ç”¨</strong>ï¼šæ˜¯æŒ‡æŠŠä¿¡æ¯æŠ€æœ¯å¹¿æ³›åº”ç”¨äºç»æµå’Œç¤¾ä¼šå„ä¸ªé¢†åŸŸï¼Œä»–ç›´æ¥åæ˜ äº†æ•ˆç‡ã€æ•ˆæœã€æ•ˆç›Šã€‚ä¿¡æ¯æŠ€æœ¯åº”ç”¨æ˜¯ä¿¡æ¯åŒ–ä½“ç³»å…­è¦ç´ ä¸­çš„é¾™å¤´ï¼Œæ˜¯å›½å®¶ä¿¡æ¯åŒ–å»ºè®¾çš„ä¸»é˜µåœ°ï¼Œé›†ä¸­ä½“ç°äº†å›½å®¶ä¿¡æ¯åŒ–å»ºè®¾çš„éœ€æ±‚ä¸æ•ˆç›Šã€‚</li><li><strong>ä¿¡æ¯æŠ€æœ¯ä¸äº§ä¸š</strong>ï¼šæ˜¯ä¿¡æ¯åŒ–çš„ç‰©è´¨åŸºç¡€</li><li><strong>ä¿¡æ¯åŒ–äººæ‰</strong>ï¼šäººæ‰æ˜¯ä¿¡æ¯åŒ–çš„æˆåŠŸä¹‹æœ¬</li><li><strong>ä¿¡æ¯åŒ–æ”¿ç­–æ³•è§„å’Œæ ‡å‡†è§„èŒƒ</strong>ï¼šä¿¡æ¯åŒ–æ”¿ç­–å’Œæ³•è§„ã€æ ‡å‡†ã€è§„èŒƒç”¨äºè§„èŒƒå’Œåè°ƒä¿¡æ¯åŒ–ä½“ç³»è¦ç´ ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯å›½å®¶ä¿¡æ¯åŒ–å¿«é€Ÿï¼Œæœ‰åºï¼Œå¥åº·å’ŒæŒç»­å‘å±•çš„ä¿éšœã€‚</li></ol><p><img src="https://picbed.qunarzz.com/81eb01b74890743fd48386c1e2d6c876.png" alt="ä¿¡æ¯åŒ–çš„å…­è¦ç´ "></p></div></details><h3 id="ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ"><a href="#ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ"></a>ä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ</h3><details class="toggle" ><summary class="toggle-button" style="">4 å¤§æ–¹é¢</summary><div class="toggle-content"><ol><li>ç«‹é¡¹ï¼ˆç³»ç»Ÿè§„åˆ’ï¼‰</li><li>å¼€å‘ï¼ˆç³»ç»Ÿåˆ†æã€ç³»ç»Ÿè®¾è®¡ã€ç³»ç»Ÿå®æ–½ï¼‰</li><li>è¿ç»´ï¼ˆè¿è¡Œç»´æŠ¤ï¼‰</li><li>æ¶ˆäº¡</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">5 å°æ–¹é¢</summary><div class="toggle-content"><ol><li>ç³»ç»Ÿè§„åˆ’</li><li>ç³»ç»Ÿåˆ†æ</li><li>ç³»ç»Ÿè®¾è®¡</li><li>ç³»ç»Ÿå®æ–½</li><li>è¿è¡Œç»´æŠ¤</li></ol></div></details><h2 id="ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•"><a href="#ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•"></a>ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•</h2><h3 id="ç»“æ„åŒ–æ–¹æ³•"><a href="#ç»“æ„åŒ–æ–¹æ³•" class="headerlink" title="ç»“æ„åŒ–æ–¹æ³•"></a>ç»“æ„åŒ–æ–¹æ³•</h3><p><img src="https://picbed.qunarzz.com/b5330d132e19a9931bfb32134f234fdf.png" alt="å­µå°é¸¡"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"><p>ä¹Ÿç§°ä¸ºç”Ÿå‘½å‘¨æœŸæ³•ï¼Œæ˜¯ä¸€ç§ä¼ ç»Ÿçš„ä¿¡æ¯ç³»ç»Ÿå¼€å‘æ–¹æ³•ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ç»„æˆ</summary><div class="toggle-content"><ul><li>ç»“æ„åˆ†æï¼ˆStructured Analysisï¼ŒSAï¼‰</li><li>ç»“æ„åŒ–è®¾è®¡ï¼ˆStructured Designï¼ŒSDï¼‰</li><li>ç»“æ„åŒ–ç¨‹åºè®¾è®¡ï¼ˆStructured Programmingï¼ŒSPï¼‰</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ç²¾é«“ğŸ”¥</summary><div class="toggle-content"><p>è‡ªé¡¶å‘ä¸‹ã€é€æ­¥æ±‚ç²¾å’Œæ¨¡å—åŒ–è®¾è®¡</p></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ä¸»è¦ç‰¹ç‚¹</summary><div class="toggle-content"><ol><li>å¼€å‘ç›®æ ‡æ¸…æ™°åŒ–</li><li>å¼€å‘å·¥ä½œé˜¶æ®µåŒ–</li><li>å¼€å‘æ–‡æ¡£è§„èŒƒåŒ–</li><li>è®¾è®¡æ–¹æ³•ç»“æ„åŒ–</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">5ã€é€‚ç”¨åœºæ™¯</summary><div class="toggle-content"><p>ç‰¹åˆ«é€‚åˆäºæ•°æ®å¤„ç†é¢†åŸŸçš„é—®é¢˜</p></div></details><details class="toggle" ><summary class="toggle-button" style="">6ã€ä¸é€‚ç”¨åœºæ™¯</summary><div class="toggle-content"><p>ä¸é€‚ç”¨äºè§„æ¨¡è¾ƒå¤§ã€æ¯”è¾ƒå¤æ‚çš„ç³»ç»Ÿå¼€å‘</p></div></details><details class="toggle" ><summary class="toggle-button" style="">7ã€ç¼ºç‚¹</summary><div class="toggle-content"><ol><li>å¼€å‘å‘¨æœŸè¾ƒé•¿</li><li>éš¾ä»¥é€‚åº”éœ€æ±‚å˜åŒ–</li><li>å¾ˆå°‘è€ƒè™‘æ•°æ®ç»“æ„</li></ol></div></details><h3 id="é¢å‘å¯¹è±¡æ–¹æ³•"><a href="#é¢å‘å¯¹è±¡æ–¹æ³•" class="headerlink" title="é¢å‘å¯¹è±¡æ–¹æ³•"></a>é¢å‘å¯¹è±¡æ–¹æ³•</h3><p><img src="https://picbed.qunarzz.com/e66b60d74e7b7591ca378194405f3841.png" alt="é¢å‘å¯¹è±¡-é¢å‘å°é¸¡"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"><p>é¢å‘å¯¹è±¡ï¼ˆOOï¼‰æ–¹æ³•è®¤ä¸ºï¼Œå®¢è§‚ä¸–ç•Œæ˜¯ç”±å„ç§å¯¹è±¡ç»„æˆçš„ï¼ˆä¸€åˆ‡çš†å¯¹è±¡ï¼‰ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ä¸ç»“æ„åŒ–æ–¹æ³•çš„è”ç³»</summary><div class="toggle-content"><p>ä¸ç»“æ„åŒ–æ–¹æ³•ç±»ä¼¼ï¼ŒOO æ–¹æ³•ä¹Ÿåˆ’åˆ†é˜¶æ®µï¼Œä½†å…¶ä¸­çš„ç³»ç»Ÿåˆ†æã€ç³»ç»Ÿè®¾è®¡å’Œç³»ç»Ÿå®ç°ä¸‰ä¸ªé˜¶æ®µä¹‹é—´å·²ç»æ²¡æœ‰â€œç¼éš™â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸‰ä¸ªé˜¶æ®µçš„ç•Œé™å˜å¾—ä¸æ˜ç¡®ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€OO ä¼˜ç‚¹ğŸ”¥</summary><div class="toggle-content"><ol><li>ç¬¦åˆäººä»¬çš„æ€ç»´ä¹ æƒ¯</li><li>æœ‰åˆ©äºç³»ç»Ÿå¼€å‘è¿‡ç¨‹ä¸­ç”¨æˆ·ä¸å¼€å‘äººå‘˜çš„æ²Ÿé€šä¸äº¤æµï¼Œç¼©çŸ­å¼€å‘å‘¨æœŸ</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€OO ç¼ºç‚¹ğŸ”¥</summary><div class="toggle-content"><p>å¿…é¡»ä¾é ä¸€å®šçš„ OO æŠ€æœ¯æ”¯æŒï¼Œåœ¨å¤§å‹é¡¹ç›®å¼€å‘ä¸Šå…·æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œä¸èƒ½æ¶‰è¶³ç³»ç»Ÿåˆ†æä»¥å‰çš„å¼€å‘ç¯èŠ‚ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">5ã€åº”ç”¨åœºæ™¯</summary><div class="toggle-content"><p>å½“å‰ï¼Œä¸€äº›å¤§å‹ä¿¡æ¯ç³»ç»Ÿçš„å¼€å‘ï¼Œé€šå¸¸æ˜¯å°†ç»“æ„åŒ–æ–¹æ³•å’Œ OO æ–¹æ³•ç»“åˆèµ·æ¥ï¼Œé¦–å…ˆï¼Œä½¿ç”¨ç»“æ„åŒ–æ–¹æ³•è¿›è¡Œè‡ªé¡¶å‘ä¸‹çš„æ•´ä½“åˆ’åˆ†ï¼›ç„¶åï¼Œè‡ªåº•å‘ä¸Šåœ°é‡‡ç”¨ OO æ–¹æ³•è¿›è¡Œå¼€å‘ã€‚</p></div></details><h3 id="åŸå‹åŒ–æ–¹æ³•"><a href="#åŸå‹åŒ–æ–¹æ³•" class="headerlink" title="åŸå‹åŒ–æ–¹æ³•"></a>åŸå‹åŒ–æ–¹æ³•</h3><p><img src="https://picbed.qunarzz.com/1c7a2ea4d0e571de005d72cf898a1352.png" alt="åŸå‹åŒ–æ–¹æ³•"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"><p>åŸå‹åŒ–æ–¹æ³•ä¹Ÿç§°ä¸ºå¿«é€ŸåŸå‹æ³•ï¼Œæˆ–è€…ç®€ç§°åŸå‹æ³•ã€‚å®ƒæ˜¯ä¸€ç§æ ¹æ®ç”¨æˆ·åˆæ­¥éœ€æ±‚ï¼Œåˆ©ç”¨ç³»ç»Ÿå¼€å‘å·¥å…·ï¼Œå¿«é€Ÿå»ºç«‹ä¸€ä¸ªç³»ç»Ÿæ¨¡å‹ç»™ç”¨æˆ·ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šä¸ç”¨æˆ·äº¤æµï¼Œæœ€ç»ˆå®ç°ç”¨æˆ·éœ€æ±‚çš„ä¿¡æ¯ç³»ç»Ÿå¿«é€Ÿçš„å¼€å‘æ–¹æ³•ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€åˆ†ç±»</summary><div class="toggle-content"><p>æŒ‰æ˜¯å¦å®ç°åŠŸèƒ½åˆ’åˆ†ï¼šæ°´å¹³åŸå‹ã€å‚ç›´åŸå‹<br>æŒ‰æœ€ç»ˆç»“æœåˆ’åˆ†ï¼šæŠ›å¼ƒå¼åŸå‹ã€æ¼”åŒ–å¼åŸå‹</p></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€å¼€å‘è¿‡ç¨‹ğŸ”¥</summary><div class="toggle-content"><ol><li>ç¡®å®šç”¨æˆ·çš„åŸºæœ¬éœ€æ±‚</li><li>è®¾è®¡ç³»ç»ŸåŸå‹</li><li>è¯•ç”¨å’Œè¯„ä»·åŸå‹</li><li>ä¿®æ”¹å’Œå®Œå–„åŸå‹</li><li>æ•´ç†åŸå‹ã€æä¾›æ–‡æ¡£</li></ol><p><img src="https://picbed.qunarzz.com/8a4081f6975446bb19470ea120cd78b1.png" alt="åŸå‹æ³•çš„å¼€å‘è¿‡ç¨‹"></p></div></details><details class="toggle" ><summary class="toggle-button" style="">4ã€ç‰¹ç‚¹ğŸ”¥</summary><div class="toggle-content"><ol><li>åŸå‹æ³•å¯ä»¥ä½¿ç³»ç»Ÿå¼€å‘çš„å‘¨æœŸç¼©çŸ­ï¼Œæˆæœ¬å’Œé£é™©é™ä½ï¼Œé€Ÿåº¦åŠ å¿«ï¼Œè·å¾—è¾ƒé«˜çš„ç»¼åˆå¼€å‘æ•ˆç›Šã€‚</li><li>åŸå‹æ³•æ˜¯ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒæ¥å¼€å‘ç³»ç»Ÿï¼Œç”¨æˆ·å‚ä¸çš„ç¨‹åº¦å¤§å¤§æé«˜ï¼Œå¼€å‘çš„ç³»ç»Ÿç¬¦åˆç”¨æˆ·çš„éœ€æ±‚ï¼Œå› è€Œå¢åŠ å®¢æˆ·çš„æ»¡æ„åº¦ï¼Œæé«˜äº†ç³»ç»Ÿå¼€å‘çš„æˆåŠŸç‡ã€‚</li><li>ç”±äºç”¨æˆ·å‚ä¸äº†ç³»ç»Ÿå¼€å‘çš„å…¨è¿‡ç¨‹ï¼Œå¯¹ç³»ç»Ÿçš„åŠŸèƒ½å’Œç»“æ„å®¹æ˜“ç†è§£å’Œæ¥å—ï¼Œæœ‰åˆ©äºç³»ç»Ÿçš„ç§»äº¤ï¼Œæœ‰åˆ©äºç³»ç»Ÿçš„è¿è¡Œå’Œç»´æŠ¤ã€‚</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">5ã€ä¸è¶³ğŸ”¥</summary><div class="toggle-content"><ol><li>å¼€å‘ç¯å¢ƒè¦æ±‚é«˜</li><li>ç®¡ç†æ°´å¹³è¦æ±‚é«˜</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">6ã€é€‚ç”¨åœºæ™¯ğŸ”¥</summary><div class="toggle-content"><ol><li>åŸå‹æ³•é€‚ç”¨äºé‚£äº›éœ€æ±‚ä¸æ˜ç¡®çš„ç³»ç»Ÿå¼€å‘</li><li>äº‹å®ä¸Šï¼Œå¯¹äºåˆ†æå±‚é¢éš¾åº¦å¤§ï¼ŒæŠ€æœ¯å±‚é¢éš¾åº¦ä¸å¤§çš„ç³»ç»Ÿï¼Œé€‚ç”¨äºåŸå‹æ³•å¼€å‘</li><li>è€Œå¯¹äºæŠ€æœ¯å±‚é¢çš„å›°éš¾è¿œå¤§äºå…¶åˆ†æå±‚é¢çš„ç³»ç»Ÿï¼Œåˆ™ä¸å®œç”¨åŸå‹æ³•ã€‚</li></ol></div></details><h3 id="é¢å‘æœåŠ¡"><a href="#é¢å‘æœåŠ¡" class="headerlink" title="é¢å‘æœåŠ¡"></a>é¢å‘æœåŠ¡</h3><p><img src="https://picbed.qunarzz.com/145bb50bf142fc865414fc290012e273.png" alt="é¢å‘æœåŠ¡"></p><details class="toggle" ><summary class="toggle-button" style="">1ã€äº§ç”Ÿçš„èƒŒæ™¯</summary><div class="toggle-content"><p>OO çš„åº”ç”¨æ„å»ºåœ¨ç±»å’Œå¯¹è±¡ä¸Šï¼Œéšåå‘å±•èµ·æ¥çš„å»ºæ¨¡æŠ€æœ¯å°†ç›¸å…³å¯¹è±¡æŒ‰ä¸šåŠ¡åŠŸèƒ½è¿›è¡Œåˆ†ç»„ï¼Œå°±å½¢æˆäº†æ„ä»¶ï¼ˆComponentï¼‰çš„æ¦‚å¿µã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€äº¤äº’çš„æ–¹å¼</summary><div class="toggle-content"><p>å¯¹äºè·¨æ„ä»¶çš„åŠŸèƒ½è°ƒç”¨ï¼Œåˆ™é‡‡ç”¨<strong>æ¥å£</strong>çš„å½¢å¼æš´éœ²å‡ºæ¥ã€‚è¿›ä¸€æ­¥å°†æ¥å£çš„å®šä¹‰ä¸å®ç°è¿›é¡¹è§£è€¦ï¼Œåˆ™å‚¬ç”Ÿäº†æœåŠ¡å’Œé¢å‘æœåŠ¡ï¼ˆService-Orientedï¼ŒSOï¼‰çš„å¼€å‘æ–¹æ³•ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ä¼˜ç‚¹</summary><div class="toggle-content"><ol><li>æé«˜ç³»ç»Ÿå¯å¤ç”¨æ€§</li><li>ä¿¡æ¯èµ„æºå…±äº«</li><li>ç³»ç»Ÿä¹‹é—´çš„äº’æ“ä½œæ€§</li></ol></div></details><h2 id="å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯"><a href="#å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯" class="headerlink" title="å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯"></a>å¸¸è§„ä¿¡æ¯ç³»ç»Ÿé›†æˆæŠ€æœ¯</h2><h3 id="ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®"><a href="#ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®" class="headerlink" title="ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®"></a>ç½‘ç»œæ ‡å‡†ä¸ç½‘ç»œåè®®</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€OSI åè®®</summary><div class="toggle-content"><ol><li>ç‰©ç†å±‚</li></ol><ul><li>å®šä¹‰ï¼šç›–å±‚åŒ…æ‹¬ç‰©ç†è”ç½‘åª’ä»‹ï¼Œæ¯”å¦‚ç”µç¼†è¿çº¿è¿æ¥å™¨ã€‚</li><li>åè®®ï¼šRS232ã€V.35ã€<strong>RJ-45</strong>ï¼ˆæ°´æ™¶å¤´ï¼‰ã€FDDI<br>2.æ•°æ®é“¾è·¯å±‚</li><li>å®šä¹‰ï¼šå®ƒæ§åˆ¶ç½‘ç»œå±‚ä¸ç‰©ç†å±‚ä¹‹é—´çš„é€šä¿¡ã€‚</li><li>åè®®ï¼š<strong>IEEE 802.3&#x2F;.2</strong>ã€AHDLCã€PPPã€TM</li></ul><ol start="3"><li>ç½‘ç»œå±‚</li></ol><ul><li>å®šä¹‰ï¼šå…¶ä¸»è¦åŠŸèƒ½æ˜¯å°†ç½‘ç»œåœ°å€ï¼ˆä¾‹å¦‚ï¼šIP åœ°å€ï¼‰ç¿»è¯‘æˆå¯¹åº”çš„ç‰©ç†åœ°å€ï¼ˆä¾‹å¦‚ï¼šMAC åœ°å€ï¼‰ï¼Œå¹¶å†³å®šå¦‚ä½•å°†æ•°æ®ä»å‘é€æ–¹è·¯ç”±åˆ°æ¥æ”¶æ–¹ã€‚</li><li>åè®®ï¼š<strong>IP</strong>ã€<strong>ICMP</strong>ã€<strong>IGMP</strong>ã€IPXã€<strong>ARP</strong>ã€<strong>RARP</strong></li></ul><ol start="4"><li>ä¼ è¾“å±‚</li></ol><ul><li>å®šä¹‰ï¼šä¸»è¦è´Ÿè´£ç¡®ä¿æ•°æ®å¯é ã€é¡ºåºã€æ— é”™åœ°ä» A ä¼ è¾“åˆ° B ç‚¹ã€‚</li><li>åè®®ï¼š<strong>TCP</strong>ã€<strong>UDP</strong>ã€SPX</li></ul><ol start="5"><li>ä¼šè¯å±‚</li></ol><ul><li>å®šä¹‰ï¼šè´Ÿè´£åœ¨ç½‘ç»œä¸­çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å»ºç«‹å’Œç»´æŒé€šä¿¡ï¼Œä»¥åŠæä¾›äº¤äº’ä¼šè¯çš„ç®¡ç†åŠŸèƒ½ã€‚å¦‚ä¸‰ç§æ•°æ®æµæ–¹å‘æ§åˆ¶ï¼Œå³ä¸€è·¯äº¤äº’ã€ä¸¤è·¯äº¤äº’å’Œä¸¤è·¯åŒæ—¶ä¼šè¯æ¨¡å¼ã€‚</li><li>åè®®ï¼šRPCã€SQLã€NFS</li></ul><ol start="6"><li>è¡¨ç¤ºå±‚</li></ol><ul><li>å®šä¹‰ï¼šå¦‚åŒåº”ç”¨ç¨‹åºå’Œç½‘ç»œä¹‹é—´çš„ç¿»è¯‘å®˜ï¼Œåœ¨è¡¨ç¤ºå±‚ï¼Œæ•°æ®å°†æŒ‰ç…§ç½‘ç»œèƒ½ç†è§£çš„æ–¹æ¡ˆè¿›è¡Œæ ¼å¼åŒ–ï¼›è¿™ç§æ ¼å¼åŒ–ä¹Ÿå› æ‰€ä½¿ç”¨çš„ç½‘ç»œçš„ç±»å‹ä¸åŒè€Œä¸åŒã€‚è¡¨ç¤ºå±‚ç®¡ç†æ•°æ®çš„è§£å¯†åŠ å¯†ã€æ•°æ®è½¬æ¢ã€æ ¼å¼åŒ–å’Œæ–‡æœ¬å‹ç¼©ã€‚</li><li>åè®®ï¼š<strong>JPEG</strong>ã€<strong>ASCLL</strong>ã€<strong>GIF</strong>ã€<strong>DES</strong>ã€<strong>MPEG</strong></li></ul><ol start="7"><li>åº”ç”¨å±‚</li></ol><ul><li>å®šä¹‰ï¼šè´Ÿè´£å¯¹è½¯ä»¶æä¾›æ¥å£ä»¥ä½¿ç¨‹åºèƒ½ä½¿ç”¨ç½‘è·¯æœåŠ¡ï¼Œå¦‚äº‹åŠ¡å¤„ç†ç¨‹åºã€æ–‡ä»¶ä¼ é€åè®®å’Œç½‘ç»œç®¡ç†ç­‰ã€‚</li><li>åè®®ï¼š<strong>FTP</strong>ã€<strong>TFTP</strong>ã€<strong>HTTP</strong>ã€<strong>SMTP</strong>ã€<strong>DHCP</strong>ã€<strong>Telnet</strong>ã€<strong>DNS</strong>ã€<strong>SNMP</strong></li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€ç½‘ç»œåè®®ä¸æ ‡å‡†</summary><div class="toggle-content"><ul><li>IEEE 802.3ï¼ˆå±€åŸŸç½‘åè®®ï¼‰</li><li>IEEE 802.11ï¼ˆæ— çº¿å±€åŸŸç½‘åè®®ï¼‰</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€TCP/IP</summary><div class="toggle-content"><p>TCP&#x2F;IP åè®®æ˜¯ Internet çš„æ ¸å¿ƒ</p><ol><li>åº”ç”¨å±‚åè®®</li></ol><ul><li><strong>FTP</strong>ï¼ˆFile Transport Protocolï¼Œæ–‡ä»¶ä¼ è¾“åè®®ï¼‰ï¼šè¿è¡Œåœ¨<em>TCP</em>ä¹‹ä¸Šï¼ŒFTP åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´éœ€è¦å»ºç«‹ä¸¤æ¡ TCP è¿æ¥ï¼Œä¸€æ¡ç”¨äºä¼ è¾“æ§åˆ¶ä¿¡æ¯ï¼ˆä½¿ç”¨ 21 å·ç«¯å£ï¼‰ï¼šå¦å¤–ä¸€æ¡ç”¨äºä¼ é€æ–‡ä»¶å†…å®¹ï¼ˆä½¿ç”¨ 20 ç«¯å£ï¼‰ã€‚</li><li><strong>TFTP</strong>ï¼ˆTrivial File Transfer Protocolï¼‰ï¼Œç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰ï¼Œå»ºç«‹åœ¨<em>UDP</em>ä¹‹ä¸Šï¼Œæä¾›ä¸å¯é çš„æ•°æ®æµä¼ è¾“æœåŠ¡ã€‚</li><li><strong>HTTP</strong>ï¼ˆHyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ï¼šæ˜¯ç”¨äºä» WWW æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ è¾“åè®®ï¼Œå»ºç«‹åœ¨<em>TCP</em>ä¹‹ä¸Šã€‚</li><li><strong>SMTP</strong>ï¼ˆSimple Mail Transfer Protocolï¼Œç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼‰ï¼šå»ºç«‹åœ¨<em>TCP</em>ä¹‹ä¸Šï¼Œæ˜¯ä¸€ç§æä¾›å¯é ä¸”æœ‰æ•ˆçš„ç”µå­é‚®ä»¶ä¼ è¾“åè®®ã€‚</li><li><strong>DHCP</strong>ï¼ˆDynamic Host Configuration Protocolï¼ŒåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰ï¼šå»ºç«‹åœ¨<em>UDP</em>ä¹‹ä¸Šï¼ŒåŸºäºå®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨æ¨¡å‹è®¾è®¡çš„ã€‚æ‰€æœ‰çš„ IP ç½‘ç»œè®¾å®šæ•°æ®éƒ½ç”± DHCP æœåŠ¡å™¨é›†ä¸­ç®¡ç†ï¼Œå¹¶è´Ÿè´£å®¢æˆ·ç«¯çš„ DHCP è¯·æ±‚ã€‚</li><li><strong>Telnet</strong>ï¼ˆè¿œç¨‹ç™»å½•åè®®ï¼‰ï¼šæ˜¯ç™»å½•å’Œä»¿çœŸç¨‹åºï¼Œå»ºç«‹åœ¨<em>TCP</em>ä¹‹ä¸Šï¼Œä»–çš„åŸºç¡€åŠŸèƒ½æ˜¯å…è®¸ç”¨æˆ·ç™»å½•è¿›å…¥è¿œç¨‹è®¡ç®—æœºã€‚</li><li><strong>DNS</strong>ï¼ˆDomain Name Systemï¼ŒåŸŸåç³»ç»Ÿï¼‰ï¼šå®ç°åŸŸåè§£æï¼Œå»ºç«‹åœ¨<em>UDP</em>ä¹‹ä¸Šã€‚</li><li><strong>SNMP</strong>ï¼ˆSimple Network Management Protocolï¼Œç®€å•ç½‘ç»œç®¡ç†åè®®ï¼‰ï¼šç”±ä¸€ç»„ç½‘ç»œç®¡ç†çš„æ ‡å‡†ç»„æˆï¼ŒåŒ…å«ä¸€ä¸ªåº”ç”¨å±‚åè®®ã€æ•°æ®åº“æ¨¡å‹å’Œä¸€ç»„èµ„æºå¯¹è±¡ã€‚è¯¥åè®®èƒ½å¤Ÿæ”¯æŒç½‘ç»œç®¡ç†ç³»ç»Ÿï¼Œç”¨ä»¥ç›‘æµ‹è¿æ¥åˆ°ç½‘ç»œä¸Šçš„è®¾å¤‡æ˜¯å¦æœ‰ä»»ä½•å¼•èµ·ç®¡ç†ä¸Šæ³¨æ„çš„æƒ…å†µã€‚</li></ul><ol start="2"><li>ä¼ è¾“å±‚åè®®</li></ol><ul><li><strong>TCP</strong>ï¼ˆTransmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰ï¼šTCP æä¾›äº†ä¸€ä¸ªå¯é çš„ï¼Œé¢å‘è¿æ¥çš„ï¼Œå…¨åŒå·¥çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚TCP ä¸€èˆ¬ç”¨äºä¼ è¾“æ•°æ®é‡æ¯”è¾ƒå°‘ï¼Œä¸”å¯¹å¯é æ€§è¦æ±‚é«˜çš„åœºåˆã€‚</li><li><strong>UDP</strong>ï¼ˆUser Datagram Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼šUDP æ˜¯ä¸€ç§ä¸å¯é çš„ï¼Œæ— è¿æ¥çš„åè®®ï¼Œå¯ä»¥ä¿è¯åº”ç”¨ç¨‹åºé—´çš„é€šä¿¡ï¼Œä¸ TCP ç›¸æ¯”ï¼ŒUDP æ˜¯ä¸€ç§æ— è¿æ¥çš„åè®®ï¼Œå®ƒçš„é”™è¯¯æ£€æµ‹åŠŸèƒ½è¦å¼±çš„å¤šï¼ŒUDP åè®®ä¸€èˆ¬ç”¨äºä¼ è¾“æ•°æ®é‡å¤§ï¼Œå¯¹äºå¯é æ€§è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œä½†è¦æ±‚é€Ÿåº¦å¿«çš„åœºåˆã€‚</li></ul><ol start="3"><li>ç½‘ç»œå±‚åè®®</li></ol><ul><li><strong>IP</strong>ï¼ˆInternet Protocolï¼Œäº’è”ç½‘åè®®ï¼‰ï¼šæ‰€æä¾›çš„æœåŠ¡æ˜¯æ— è¿æ¥å’Œå¯é çš„ã€‚</li><li><strong>ICMP</strong>ï¼ˆInternet Control Message Protocolï¼Œäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰ï¼šä¸€ç§ä¸“é—¨ç”¨äºå‘é€é”™è¯¯æŠ¥æ–‡çš„åè®®ï¼Œå³ä¼ é€çš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€é‡å¤ã€å»¶è¿Ÿæˆ–ä¹±åºä¼ é€’ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§å°½é‡é¿å…å·®é”™å¹¶èƒ½åœ¨å‘ç”Ÿå·®é”™æ—¶æŠ¥å‘Šçš„æœºåˆ¶ï¼Œè¿™å°±æ˜¯ ICMP çš„åŠŸèƒ½ã€‚</li><li><strong>IGMP</strong>ï¼ˆInternet Group Management Protocolï¼Œäº’è”ç½‘ç»„ç®¡ç†åè®®ï¼‰ï¼šå…è®¸åœ¨ Internet ä¸­çš„è®¡ç®—æœºå‚åŠ å¤šæ’­ï¼Œæ˜¯è®¡ç®—æœºç”¨åšå‘ç›¸é‚»å¤šè·¯ç”±å™¨æŠ¥å‘Šå¤šç›®ç»„æˆå‘˜çš„åè®®ã€‚</li><li><strong>ARP</strong>ï¼ˆAddress Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼‰ï¼šç”¨äºåŠ¨æ€åœ°å®Œæˆ IP åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ã€‚</li><li><strong>RARP</strong> ï¼ˆReverse Address Resolution Protocolï¼Œåå‘åœ°å€è§£æåè®®ï¼‰ï¼šç”¨äºåŠ¨æ€åœ°å®Œæˆç‰©ç†åœ°å€åˆ° IP åœ°å€çš„è½¬æ¢ã€‚</li></ul></div></details><h3 id="ç½‘ç»œè®¾å¤‡"><a href="#ç½‘ç»œè®¾å¤‡" class="headerlink" title="ç½‘ç»œè®¾å¤‡"></a>ç½‘ç»œè®¾å¤‡</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ç½‘ç»œäº¤æ¢</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>é€šè¿‡ä¸€å®šçš„è®¾å¤‡ï¼Œå¦‚äº¤æ¢æœºç­‰ï¼Œå°†ä¸åŒçš„ä¿¡å·æˆ–è€…ä¿¡å·è½¬æ¢ä¸ºå¯¹æ–¹å¯è¯†åˆ«çš„ä¿¡å·ç±»å‹ä»è€Œè¾¾åˆ°é€šä¿¡ç›®çš„çš„ä¸€ç§äº¤æ¢å½¢å¼ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">åˆ†ç±»</summary><div class="toggle-content"><ol><li>ç‰©ç†äº¤æ¢ï¼ˆå¦‚ç”µè¯ç½‘ï¼‰</li><li>é“¾è·¯å±‚äº¤æ¢ï¼ˆäºŒå±‚äº¤æ¢ï¼Œå¯¹ MAC åœ°å€è¿›è¡Œå˜æ›´ğŸ”¥ï¼‰</li><li>ç½‘ç»œå±‚äº¤æ¢ï¼ˆä¸‰å±‚äº¤æ¢ï¼Œå¯¹ IP åœ°å€è¿›è¡Œå˜æ›´ï¼‰</li><li>ä¼ è¾“å±‚äº¤æ¢ï¼ˆå››å±‚äº¤æ¢ï¼Œå¯¹ç«¯å£è¿›è¡Œå˜æ›´ï¼Œæ¯”è¾ƒå°‘è§ï¼‰</li><li>åº”ç”¨å±‚äº¤æ¢</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€äº’è”è®¾å¤‡</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>åœ¨ç½‘ç»œäº’è¿æ—¶ï¼Œå„èŠ‚ç‚¹ä¸€èˆ¬ä¸èƒ½ç®€å•åœ°ç›´æ¥ç›¸è¿ï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡ä¸€ä¸ªä¸­é—´è®¾å¤‡æ¥å®ç°ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">åˆ†ç±»</summary><div class="toggle-content"><ol><li>ä¸­ç»§å™¨ï¼ˆå®ç°ç‰©ç†å±‚åè®®è½¬æ¢ï¼Œåœ¨ç”µç¼†é—´è¿›è¡ŒäºŒè¿›åˆ¶ä¿¡å·ï¼‰</li><li>ç½‘æ¡¥ï¼ˆå®ç°ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚åè®®è½¬æ¢ï¼‰</li><li>è·¯ç”±å™¨ï¼ˆå®ç°ç½‘ç»œå±‚åè®®å’Œä»¥ä¸‹å„å±‚åè®®çš„è½¬æ¢ï¼‰ï¼ˆğŸ”¥åœ¨ç½‘ç»œå±‚ï¼‰</li><li>ç½‘å…³ï¼ˆæä¾›ä»æœ€åº•å±‚åˆ°ä¼ è¾“å±‚æˆ–ä»¥ä¸Šå„å±‚çš„åè®®è½¬æ¢ï¼‰</li><li>äº¤æ¢æœº</li></ol></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€æ— çº¿ç½‘ç»œè®¾å¤‡</summary><div class="toggle-content"><ol><li>æ— çº¿ç½‘å¡</li><li>æ— çº¿ AP</li><li>æ— çº¿ç½‘æ¡¥</li><li>æ— çº¿è·¯ç”±å™¨</li></ol></div></details><h3 id="ç½‘ç»œæœåŠ¡å™¨"><a href="#ç½‘ç»œæœåŠ¡å™¨" class="headerlink" title="ç½‘ç»œæœåŠ¡å™¨"></a>ç½‘ç»œæœåŠ¡å™¨</h3><blockquote><p>æ— é‡è¦è€ƒç‚¹</p></blockquote><h3 id="ç½‘ç»œå­˜å‚¨æŠ€æœ¯"><a href="#ç½‘ç»œå­˜å‚¨æŠ€æœ¯" class="headerlink" title="ç½‘ç»œå­˜å‚¨æŠ€æœ¯"></a>ç½‘ç»œå­˜å‚¨æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">DASğŸ”¥</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>ç›´æ¥é™„åŠ å­˜å‚¨ï¼ˆDirect Attached Storageï¼‰ï¼ŒDAS å°†å­˜å‚¨è®¾å¤‡é€šè¿‡ SCSI ç”µç¼†ç›´æ¥è¿åˆ°æœåŠ¡å™¨ï¼Œå…¶æœ¬èº«æ˜¯ç¡¬ä»¶çš„å †å ï¼Œå­˜å‚¨ä¾èµ–äºæœåŠ¡å™¨ï¼Œä¸å¸¦æœ‰ä»»ä½•å­˜å‚¨æ“ä½œç³»ç»Ÿã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">ç¼ºç‚¹ğŸ”¥</summary><div class="toggle-content"><p>å½“å­˜å‚¨å®¹é‡å¢åŠ æ—¶ï¼ŒDAS æ–¹å¼å¾ˆéš¾æ‰©å±•ï¼Œè¿™å¯¹å­˜å‚¨å®¹é‡çš„å‡çº§æ˜¯ä¸€ä¸ªå·¨å¤§çš„ç“¶é¢ˆã€‚</p></div></details></div></details><details class="toggle" ><summary class="toggle-button" style="">NASğŸ”¥</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>ç½‘ç»œé™„åŠ å­˜å‚¨ï¼ˆNetwork Attached Storageï¼‰ï¼Œé€šè¿‡ç½‘ç»œæ¥å£ä¸ç½‘ç»œç›¸è¿ï¼Œç”±ç”¨æˆ·é€šè¿‡ç½‘ç»œè®¿é—®ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">å·¥ä½œåŸç†ğŸ”¥</summary><div class="toggle-content"><p>NAS æŠ€æœ¯æ”¯æŒå¤šç§ TCP&#x2F;IP ç½‘ç»œåè®®ï¼Œä¸»è¦æ˜¯ NFSï¼ˆç½‘ç»œæ–‡ä»¶å­˜å‚¨ç³»ç»Ÿï¼‰å’Œ CIFSï¼ˆé€šç”¨ Internet æ–‡ä»¶ï¼‰æ¥è¿›è¡Œæ–‡ä»¶è®¿é—®ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">ç‰¹ç‚¹ğŸ”¥</summary><div class="toggle-content"><ul><li>å³æ’å³ç”¨</li><li>å°æ–‡ä»¶çº§çš„å…±äº«å­˜å–</li></ul></div></details><p><img src="https://picbed.qunarzz.com/7bb699e595dcd42ffa6d6a6b9ad5e982.png" alt="NAS å­˜å‚¨ç³»ç»Ÿçš„ç»“æ„"></p></div></details><details class="toggle" ><summary class="toggle-button" style="">SANğŸ”¥</summary><div class="toggle-content"><details class="toggle" ><summary class="toggle-button" style="">å®šä¹‰</summary><div class="toggle-content"><p>å­˜å‚¨åŒºåŸŸç½‘ç»œï¼ˆStorage Area Networkï¼‰ï¼Œé€šè¿‡ä¸“ç”¨äº¤æ¢æœºå°†ç£ç›˜é˜µåˆ—ä¸æœåŠ¡å™¨è¿æ¥èµ·æ¥çš„é«˜é€Ÿä¸“ç”¨å­ç½‘ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">æŠ€æœ¯åˆ†ç±»</summary><div class="toggle-content"><ol><li><strong>FC SAN</strong>ï¼šå…‰çº¤é€šé“çš„ä¸»è¦ç‰¹æ€§æœ‰ï¼šçƒ­æ’æ‹”æ€§ã€é«˜é€Ÿå¸¦å®½ã€è¿œç¨‹è¿æ¥æ•°é‡å¤§ã€‚</li><li><strong>IP SAN</strong>ï¼šåŸºäº IP ç½‘ç»œå®ç°æ•°æ®å—çº§åˆ«å­˜å‚¨æ–¹å¼çš„å­˜å‚¨ç½‘ç»œã€‚</li><li><strong>IB SAN</strong>ï¼šæ˜¯ä¸€ç§äº¤æ¢ç»“æ„ I&#x2F;O æŠ€æœ¯ï¼Œå…¶è®¾è®¡æ€è·¯æ˜¯é€šè¿‡ä¸€å¥—ä¸­å¿ƒæœºæ„åœ¨è¿œç¨‹å­˜å‚¨å™¨ã€ç½‘ç»œä»¥åŠæœåŠ¡å™¨ç­‰è®¾å¤‡ä¹‹é—´å»ºç«‹ä¸€ä¸ªå•ä¸€çš„è¿æ¥é“¾è·¯ï¼Œå¹¶ç”± IB äº¤æ¢æœºæ¥æŒ‡æŒ¥æµé‡ã€‚</li></ol></div></details><p><img src="https://picbed.qunarzz.com/61c61873ce628e907c850fe99eb9fe3a.png"></p></div></details><h3 id="ç½‘ç»œæ¥å…¥æŠ€æœ¯"><a href="#ç½‘ç»œæ¥å…¥æŠ€æœ¯" class="headerlink" title="ç½‘ç»œæ¥å…¥æŠ€æœ¯"></a>ç½‘ç»œæ¥å…¥æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€æœ‰çº¿æ¥å…¥</summary><div class="toggle-content"><ol><li>PSTN</li><li>ISDN</li><li>ADSL</li><li>FTTX+LAN</li><li>HFC<br>1.3.5ç½‘ç»œæ¥å…¥æŠ€æœ¯</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€æ— çº¿æ¥å…¥</summary><div class="toggle-content"><p>æ— çº¿ç½‘ç»œæ˜¯æŒ‡ä»¥æ— çº¿ç”µæ³¢ä½œä¸ºä¿¡æ¯ä¼ è¾“åª’ä»‹ğŸ”¥</p><p><strong>æŠ€æœ¯åˆ†ç±»ï¼š</strong></p><ol><li>GPRS</li><li>æ— çº¿æ¥å…¥</li><li>3G</li><li>4G</li><li>WIFI</li></ol></div></details><h3 id="ç½‘ç»œè§„åˆ’ä¸è®¾è®¡"><a href="#ç½‘ç»œè§„åˆ’ä¸è®¾è®¡" class="headerlink" title="ç½‘ç»œè§„åˆ’ä¸è®¾è®¡"></a>ç½‘ç»œè§„åˆ’ä¸è®¾è®¡</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€ç½‘è·¯åˆ†å±‚è®¾è®¡ğŸ”¥</summary><div class="toggle-content"><ul><li><strong>æ ¸å¿ƒå±‚ğŸ”¥</strong>ï¼šä¸»è¦ç›®çš„é€šè¿‡<strong>é«˜é€Ÿçš„è½¬å‘é€šä¿¡</strong>ï¼Œæä¾›ä¼˜åŒ–ï¼Œå¯é çš„éª¨å¹²ä¼ è¾“ç»“æ„ï¼Œå› æ­¤ï¼Œæ ¸å¿ƒå±‚äº¤æ¢æœºåº”æ‹¥æœ‰æ›´é«˜çš„å¯é æ€§ï¼Œæ€§èƒ½å’Œååé‡ã€‚</li><li><strong>æ±‡èšå±‚ğŸ”¥</strong>ï¼šæ˜¯æ ¸å¿ƒå±‚ä¸æ¥å…¥å±‚çš„åˆ†ç•Œé¢ï¼Œå®Œæˆ<strong>ç½‘ç»œè®¿é—®ç­–ç•¥æ§åˆ¶ï¼Œæ•°æ®åŒ…å¤„ç†ã€è¿‡æ»¤ã€å¯»å€</strong>ã€ä»¥åŠå…¶ä»–çš„æ•°æ®å¤„ç†ä»»åŠ¡ã€‚</li><li><strong>æ¥å…¥å±‚ğŸ”¥</strong>ï¼šç›®çš„æ˜¯å…è®¸ç»ˆç«¯ç”¨æˆ·è¿æ¥åˆ°ç½‘ç»œï¼Œå› æ­¤ï¼Œæ¥å…¥å±‚äº¤æ¢æœºï¼ˆæˆ–è·¯ç”±å™¨ï¼‰æ¥å…¥å±‚å…·æœ‰<strong>ä½æˆ</strong>æœ¬å’Œ<strong>é«˜å¯†åº¦</strong>ç‰¹æ€§ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677082670910.png" alt="ç½‘ç»œè§„åˆ’åˆ†å±‚"></p></div></details><details class="toggle" ><summary class="toggle-button" style="">1ã€ç½‘ç»œè®¾è®¡å·¥ä½œ</summary><div class="toggle-content"><ol><li>ç½‘ç»œæ‹“æ‰‘ç»“æ„è®¾è®¡</li><li>ä¸»å¹²ç½‘ç»œè®¾è®¡ï¼ˆæ ¸å¿ƒå±‚ï¼‰è®¾è®¡</li><li>æ±‡èšå±‚å’Œæ¥å…¥å±‚è®¾è®¡</li><li>å¹¿åŸŸç½‘è¿æ¥ä¸è¿œç¨‹è®¿é—®è®¾è®¡</li><li>æ— çº¿ç½‘ç»œè®¾è®¡</li><li>ç½‘ç»œå®‰å…¨è®¾è®¡</li></ol><ul><li>ä¿¡æ¯å®‰å…¨çš„åŸºæœ¬è¦ç´ ğŸ”¥</li></ul><ol start="7"><li>è®¾å¤‡é€‰å‹</li></ol><details class="toggle" ><summary class="toggle-button" style="">ä¿¡æ¯å®‰å…¨çš„åŸºæœ¬è¦ç´ ğŸ”¥</summary><div class="toggle-content"><ol><li><strong>æœºå¯†æ€§ğŸ”¥</strong>ï¼šç¡®ä¿ä¿¡æ¯ä¸æš´éœ²ç»™æœªæˆæƒçš„å®ä½“æˆ–è¿›ç¨‹</li><li><strong>å®Œæ•´æ€§ğŸ”¥</strong>ï¼šåªæœ‰å¾—åˆ°å…è®¸çš„äººæ‰èƒ½ä¿®æ”¹æ•°æ®ï¼Œå¹¶ä¸”èƒ½å¤Ÿåˆ¤åˆ«å‡ºæ¥æ•°æ®æ˜¯å¦å·²è¢«ç¯¡æ”¹ã€‚</li><li><strong>å¯ç”¨æ€§ğŸ”¥</strong>ï¼šå¾—åˆ°æˆæƒçš„å®ä½“åœ¨éœ€è¦çš„æ—¶å€™å¯è®¿é—®æ•°æ®ï¼Œå³æ”»å‡»è€…ä¸èƒ½å ç”¨æ‰€æœ‰çš„èµ„æºè€Œé˜»ç¢æˆæƒè€…çš„å·¥ä½œ</li><li><strong>å¯æ§æ€§ğŸ”¥</strong>ï¼šå¯ä»¥æ§åˆ¶æˆæƒèŒƒå›´å†…çš„ä¿¡æ¯æµå‘åŠè¡Œä¸ºæ–¹å¼</li><li><strong>å¯å®¡æŸ¥æ€§ğŸ”¥</strong>ï¼šå¯¹å‡ºç°çš„ç½‘ç»œå®‰å…¨é—®é¢˜æä¾›è°ƒæŸ¥çš„ä¾æ®å’Œæ‰‹æ®µ</li></ol></div></details></div></details><h3 id="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"><a href="#æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"></a>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</h3><details class="toggle" ><summary class="toggle-button" style="">å…³ç³»å‹æ•°æ®åº“</summary><div class="toggle-content"><ul><li><strong>Oracle</strong></li><li><strong>MySQL</strong></li><li><strong>SqlServer</strong></li><li>DB2</li><li>PostgreSQL</li><li>SQLite</li><li>Access</li></ul></div></details><details class="toggle" ><summary class="toggle-button" style="">éå…³ç³»å‹æ•°æ®åº“</summary><div class="toggle-content"><ul><li><strong>MongoDB</strong></li><li>Redis</li><li>HBase</li><li>Neo4j</li><li>Elasticsearch</li></ul></div></details><h3 id="æ•°æ®ä»“åº“æŠ€æœ¯"><a href="#æ•°æ®ä»“åº“æŠ€æœ¯" class="headerlink" title="æ•°æ®ä»“åº“æŠ€æœ¯"></a>æ•°æ®ä»“åº“æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">ç‰¹ç‚¹ğŸ”¥</summary><div class="toggle-content"><p>æ•°æ®ä»“åº“æ˜¯ä¸€ä¸ªé¢å‘ä¸»é¢˜çš„ï¼Œé›†æˆçš„ï¼Œéæ˜“å¤±çš„ï¼Œä¸”éšæ—¶é—´å˜åŒ–çš„æ•°æ®é›†åˆï¼Œç”¨äºæ”¯æŒç®¡ç†å†³ç­–ã€‚</p></div></details><details class="toggle" ><summary class="toggle-button" style="">ä½“ç³»ç»“æ„</summary><div class="toggle-content"><ol><li><strong>æ•°æ®æº</strong>ï¼šæ˜¯æ•°æ®ä»“åº“ç³»ç»Ÿçš„åŸºç¡€ï¼Œæ˜¯æ•´ä¸ªç³»ç»Ÿæ•°æ®æºæ³‰ã€‚</li><li><strong>æ•°æ®çš„å­˜å‚¨ä¸ç®¡ç†</strong>ï¼šæ˜¯æ•´ä¸ªç³»ç»Ÿæ•°æ®ä»“åº“ç³»ç»Ÿçš„æ ¸å¿ƒã€‚</li><li><strong>OLAPï¼ˆOnline Analysis Processorï¼Œè”æœºåˆ†æå¤„ç†ï¼‰æœåŠ¡å™¨</strong>ï¼šå¯¹åˆ†æéœ€è¦çš„æ•°æ®è¿›è¡Œæœ‰æ•ˆé›†æˆï¼ŒæŒ‰å¤šç»´æ¨¡å‹äºˆä»¥ç»„ç»‡ï¼Œä»¥ä¾¿è¿›è¡Œå¤šè§’åº¦ã€å¤šå±‚æ¬¡çš„åˆ†æï¼Œå¹¶å‘ç°è¶‹åŠ¿ã€‚</li><li><strong>å‰ç«¯å·¥å…·</strong>ï¼šä¸»è¦åŒ…æ‹¬å„ç§æŸ¥è¯¢å·¥å…·ï¼ŒæŠ¥è¡¨å·¥å…·ï¼Œåˆ†æå·¥å…·ï¼Œæ•°æ®æŒ–æ˜å·¥å…·ä»¥åŠå„ç§åŸºäºæ•°æ®ä»“åº“æˆ–æ•°æ®é›†çš„åº”ç”¨å¼€å‘å·¥å…·ã€‚å…¶ä¸­æ•°æ®åˆ†æå·¥å…·ä¸»è¦é’ˆå¯¹OLAPï¼ŒæŠ¥è¡¨å·¥å…·ï¼Œæ•°æ®æŒ–æ˜å·¥å…·ä¸»è¦é’ˆå¯¹æ•°æ®ä»“åº“ã€‚</li></ol></div></details><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677083599886.png" alt="æ•°æ®ä»“åº“ä½“ç³»ç»“æ„"></p><h3 id="ä¸­é—´ä»¶æŠ€æœ¯"><a href="#ä¸­é—´ä»¶æŠ€æœ¯" class="headerlink" title="ä¸­é—´ä»¶æŠ€æœ¯"></a>ä¸­é—´ä»¶æŠ€æœ¯</h3><details class="toggle" ><summary class="toggle-button" style="">1ã€å®šä¹‰</summary><div class="toggle-content"></div></details><details class="toggle" ><summary class="toggle-button" style="">2ã€åˆ†ç±»</summary><div class="toggle-content"></div></details><details class="toggle" ><summary class="toggle-button" style="">3ã€ä¸­é—´ä»¶çš„é€‰æ‹©</summary><div class="toggle-content"></div></details><h3 id="é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡"><a href="#é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡" class="headerlink" title="é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡"></a>é«˜å¯ç”¨æ€§å’Œé«˜å¯é æ€§çš„è§„åˆ’ä¸è®¾è®¡</h3><h2 id="è½¯ä»¶å·¥ç¨‹"><a href="#è½¯ä»¶å·¥ç¨‹" class="headerlink" title="è½¯ä»¶å·¥ç¨‹"></a>è½¯ä»¶å·¥ç¨‹</h2><h2 id="ç»ƒä¸€ç»ƒ"><a href="#ç»ƒä¸€ç»ƒ" class="headerlink" title="ç»ƒä¸€ç»ƒ"></a>ç»ƒä¸€ç»ƒ</h2><p>1ã€å¯¹è±¡å’Œç±»æ˜¯é¢å‘å¯¹è±¡ä¸­ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå…³äºå¯¹è±¡å’Œç±»ï¼Œä¸æ­£ç¡®çš„æ˜¯ï¼ˆï¼‰ã€‚ <em>19å¹´11æœˆç¬¬1é¢˜</em></p><p>Aã€å¯¹è±¡æ˜¯ç±»çš„å®ä¾‹<br>Bã€ç±»æ˜¯å¯¹è±¡çš„æŠ½è±¡<br>Cã€ä¸€ä¸ªç±»åªèƒ½äº§ç”Ÿä¸€ä¸ªå¯¹è±¡<br>Dã€ç±»ä¸­åŒ…å«æ–¹æ³•å’Œå±æ€§</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘ä¸€ä¸ªç±»å¯ä»¥äº§ç”Ÿå¤šä¸ªå¯¹è±¡</p></div></div><hr><p>2ã€TCP&#x2F;IP æ¨¡å‹ä¸­ï¼ŒTelnet å±äºï¼ˆï¼‰åè®®ã€‚ <em>19å¹´5æœˆ19é¢˜</em></p><p>Aã€æ¥å£å±‚<br>Bã€ç½‘ç»œå±‚<br>Cã€ä¼ è¾“å±‚<br>Dã€åº”ç”¨å±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘Telnet æ˜¯åº”ç”¨å±‚åè®®ã€‚</p></div></div><hr><p>3ã€åœ¨ä¿¡æ¯ç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¼€å‘é˜¶æ®µä¸åŒ…æ‹¬ï¼ˆï¼‰ã€‚ <em>19å¹´5æœˆ3é¢˜</em></p><p>Aã€ç³»ç»Ÿè§„åˆ’<br>Bã€ç³»ç»Ÿè®¾è®¡<br>Cã€ç³»ç»Ÿåˆ†æ<br>Dã€ç³»ç»Ÿå®æ–½</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘ç³»ç»Ÿè§„åˆ’æ˜¯ç«‹é¡¹é˜¶æ®µçš„ï¼Œé«˜çº§æ•™æç¬¬ä¸‰ç‰ˆ P10ã€‚</p></div></div><hr><p>4ã€ï¼ˆï¼‰çš„è®¾è®¡æ–¹æ³•æ»¡è¶³äº†ä¿¡æ¯ç³»ç»Ÿå¿«é€Ÿå“åº”éœ€æ±‚ä¸ç¯å¢ƒçš„å˜åŒ–ï¼Œç»„ç»‡å†…éƒ¨ã€ç»„ç»‡ä¹‹é—´å„ç§åº”ç”¨ç³»ç»Ÿçš„äº’ç›¸é€šä¿¡è¦æ±‚ï¼Œæé«˜äº†ç³»ç»Ÿå¯å¤ç”¨æ€§ã€ä¿¡æ¯èµ„æºå…±äº«å’Œç³»ç»Ÿä¹‹é—´çš„äº’æ“ä½œæ€§ã€‚ <em>18å¹´11æœˆ28é¢˜</em></p><p>Aã€é¢å‘å¯¹è±¡<br>Bã€é¢å‘è¿‡ç¨‹<br>Cã€åŸºäºæ„ä»¶<br>Dã€é¢å‘æœåŠ¡</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘ä»åº”ç”¨çš„è§’åº¦æ¥çœ‹ï¼Œç»„ç»‡å†…éƒ¨ã€ç»„ç»‡ä¹‹é—´å„ç§åº”ç”¨ç³»ç»Ÿçš„äº’ç›¸é€šä¿¡å’Œäº’æ“ä½œæ€§ç›´æ¥å½±å“ç€ç»„ç»‡<br>å¯¹ä¿¡æ¯çš„æŒæ¡ç¨‹åº¦å’Œå¤„ç†é€Ÿåº¦ã€‚å¦‚ä½•ä½¿ä¿¡æ¯ç³»ç»Ÿå¿«é€Ÿå“åº”éœ€æ±‚ä¸ç¯å¢ƒå˜åŒ–ï¼Œæé«˜ç³»ç»Ÿå¯å¤ç”¨æ€§ã€ä¿¡æ¯èµ„<br>æºå…±äº«å’Œç³»ç»Ÿä¹‹é—´çš„äº’æ“ä½œæ€§ï¼Œæˆä¸ºå½±å“ä¿¡æ¯åŒ–å»ºè®¾æ•ˆç‡çš„å…³é”®é—®é¢˜ï¼Œè€ŒSOçš„æ€ç»´æ–¹å¼æ°å¥½æ»¡è¶³äº†è¿™<br>ç§éœ€æ±‚ã€‚</p></div></div><hr><p>5ã€åœ¨OSIä¸ƒå±‚åè®®ä¸­ï¼ŒUDPæ˜¯ï¼ˆï¼‰çš„åè®®ã€‚ <em>18å¹´11æœˆç¬¬19é¢˜</em></p><p>Aã€ç½‘ç»œå±‚<br>Bã€ä¼ è¾“å±‚<br>Cã€ä¼šè¯å±‚<br>Dã€åº”ç”¨å±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘(4)ä¼ è¾“å±‚ï¼šä¸»è¦è´Ÿè´£ç¡®ä¿æ•°æ®å¯é ã€é¡ºåºã€æ— é”™åœ°ä»Aç‚¹ä¼ è¾“åˆ°Bç‚¹ã€‚å¦‚æä¾›å»ºç«‹ã€ç»´æŠ¤ç›¸æ‹†<br>é™¤ä¼ é€è¿æ¥çš„åŠŸèƒ½ï¼›é€‰æ‹©ç½‘ç»œå±‚æä¾›æœ€åˆé€‚çš„æœåŠ¡ï¼›åœ¨ç³»ç»Ÿä¹‹é—´æä¾›å¯é çš„é€æ˜çš„æ•°æ®ä¼ é€ï¼Œæä¾›ç«¯åˆ°<br>ç«¯çš„é”™è¯¯æ¢å¤å’Œæµé‡æ§åˆ¶ã€‚åœ¨TCP&#x2F;IPåè®®ä¸­ï¼Œå…·ä½“åè®®æœ‰TCPã€UDPã€SPXã€‚</p></div></div><hr><p>6ã€ï¼ˆï¼‰çš„ä»»åŠ¡æ˜¯ï¼šæ ¹æ®ç³»ç»Ÿè¯´æ˜ä¹¦è§„å®šçš„åŠŸèƒ½è¦æ±‚ï¼Œè€ƒè™‘å®é™…æ¡ä»¶ï¼Œå…·ä½“è®¾è®¡å®ç°é€»è¾‘æ¨¡å‹çš„æŠ€æœ¯æ–¹<br>æ¡ˆã€‚ <em>18å¹´11æœˆç¬¬3é¢˜</em></p><p>Aã€ç³»ç»Ÿè§„åˆ’é˜¶æ®µ<br>Bã€ç³»ç»Ÿåˆ†æé˜¶æ®µ<br>Cã€ç³»ç»Ÿè®¾è®¡é˜¶æ®µ<br>Dã€ç³»ç»Ÿå®æ–½é˜¶æ®µ</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘ç®€å•åœ°è¯´ï¼Œç³»ç»Ÿåˆ†æé˜¶æ®µçš„ä»»åŠ¡æ˜¯å›ç­”ç³»ç»Ÿâ€œåšä»€ä¹ˆâ€çš„é—®é¢˜ï¼Œè€Œç³»ç»Ÿè®¾è®¡é˜¶æ®µè¦å›ç­”çš„é—®é¢˜<br>æ˜¯â€œæ€ä¹ˆåšâ€ã€‚è¯¥é˜¶æ®µçš„ä»»åŠ¡æ˜¯æ ¹æ®ç³»ç»Ÿè¯´æ˜ä¹¦ä¸­è§„å®šçš„åŠŸèƒ½è¦æ±‚ï¼Œè€ƒè™‘å®é™…æ¡ä»¶ï¼Œå…·ä½“è®¾è®¡å®ç°é€»è¾‘<br>æ¨¡å‹çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯è®¾è®¡æ–°ç³»ç»Ÿçš„ç‰©ç†æ¨¡å‹ã€‚è¿™ä¸ªé˜¶æ®µåˆç§°ä¸ºç‰©ç†è®¾è®¡é˜¶æ®µï¼Œå¯åˆ†ä¸ºæ€»ä½“è®¾è®¡ï¼ˆæ¦‚<br>è¦è®¾è®¡ï¼‰å’Œè¯¦ç»†è®¾è®¡ä¸¤ä¸ªå­é˜¶æ®µã€‚è¿™ä¸ªé˜¶æ®µçš„æŠ€æœ¯æ–‡æ¡£æ˜¯ç³»ç»Ÿè®¾è®¡è¯´æ˜ä¹¦ã€‚</p></div></div><hr><p>7ã€IEEE 802 è§„èŒƒå®šä¹‰äº†ç½‘å¡å¦‚ä½•è®¿é—®ä¼ è¾“ä»‹è´¨ï¼Œä»¥åŠå¦‚ä½•åœ¨ä¼ è¾“ä»‹è´¨ä¸Šä¼ è¾“æ•°æ®çš„æ–¹æ³•ã€‚å…¶ä¸­ï¼Œï¼ˆï¼‰<br>æ˜¯é‡è¦çš„å±€åŸŸç½‘åè®®ã€‚ <em>18å¹´5æœˆç¬¬11é¢˜</em></p><p>Aã€IEEE 802.1<br>Bã€IEEE 802.3<br>Cã€IEEE 802.6<br>Dã€IEEE 802.11</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘ IEEE 802.3 ï¼šä»¥å¤ªç½‘ä»‹è´¨è®¿é—®æ§åˆ¶åè®® ï¼ˆCSMA&#x2F;CDï¼‰åŠç‰©ç†å±‚æŠ€æœ¯è§„èŒƒ [2]ã€‚<br>IEEE 802.11ï¼šæ— çº¿å±€åŸŸç½‘ï¼ˆWLANï¼‰çš„ä»‹è´¨è®¿é—®æ§åˆ¶åè®®åŠç‰©ç†å±‚æŠ€æœ¯è§„èŒƒã€‚</p></div></div><hr><p>8ã€åœ¨å¼€æ”¾ç³»ç»Ÿäº’è¿å‚è€ƒæ¨¡å‹(OSI)ä¸­ï¼Œï¼ˆ ï¼‰çš„ä¸»è¦åŠŸèƒ½æ˜¯å°†ç½‘ç»œåœ°å€ç¿»è¯‘æˆå¯¹åº”çš„ç‰©ç†åœ°å€ï¼Œå¹¶å†³å®šå¦‚<br>ä½•å°†æ•°æ®ä»å‘é€æ–¹ç»è·¯ç”±é€è¾¾åˆ°æ¥æ”¶æ–¹ã€‚ <em>18å¹´5æœˆç¬¬20é¢˜</em></p><p>Aã€æ•°æ®é“¾è·¯å±‚<br>Bã€ç‰©ç†å±‚<br>Cã€ç½‘ç»œå±‚<br>Dã€ä¼ è¾“å±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘ç½‘ç»œå±‚ä¸­çš„åè®®ä¸»è¦æœ‰IPã€ICMPã€IGMPã€ARPã€å’ŒRARPç­‰ã€‚ ï¼ˆ1ï¼‰IPï¼Œæ‰€æä¾›çš„æœåŠ¡æ˜¯æ— è¿æ¥å’Œä¸å¯é çš„ã€‚<br>ï¼ˆ2ï¼‰ICMP(Internet Control Message Protocolï¼Œç½‘ç»œæ§åˆ¶æŠ¥æ–‡åè®®)ï¼Œä¸€ç§ä¸“é—¨ç”¨äºå‘é€é”™æŠ¥æ–‡çš„<br>åè®®ï¼Œå³ä¼ é€çš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€é‡å¤ã€å»¶è¿Ÿã€æˆ–ä¹±åºä¼ é€’ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§å°½é‡é¿å…å·®é”™å¹¶èƒ½å‘ç”Ÿå·®é”™æ—¶<br>æŠ¥å‘Šçš„æœºåˆ¶ï¼Œè¿™å°±æ˜¯ICMPçš„åŠŸèƒ½ã€‚<br>ï¼ˆ3ï¼‰IGMP(Internet Group Management Protocolï¼Œç½‘é™…ç»„ç®¡ç†åè®®)å…è®¸åœ¨Internetä¸­çš„è®¡ç®—æœºå‚<br>åŠ å¤šæ’­ï¼Œæ˜¯è®¡ç®—æœºç”¨åšå‘ç›¸é‚»å¤šè·¯ç”±å™¨æŠ¥å‘Šå¤šç›®ç»„æˆå‘˜çš„åè®®ã€‚<br>ï¼ˆ4ï¼‰ARP(Address Resolution Protocolï¼Œåœ°å€è§£æåè®®) ç”¨äºåŠ¨æ€åœ°å®ŒæˆIPåˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ã€‚<br>ï¼ˆ5ï¼‰RARP(Reverse Address Resolution Protocolï¼Œåå‘åœ°å€è§£æåè®®)ç”¨äºåŠ¨æ€å®Œæˆç‰©ç†åœ°å€å‘IP<br>åœ°å€çš„è½¬æ¢ã€‚</p></div></div><hr><p>9ã€ TCP&#x2F;IPæ˜¯internetçš„æ ¸å¿ƒåè®®ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡ç”¨åº”ç”¨å±‚åè®®åˆ©ç”¨ç½‘ç»œå®Œæˆæ•°æ®äº¤äº’çš„ä»»åŠ¡ï¼Œå…¶ä¸­ï¼Œ<br>ï¼ˆï¼‰æ˜¯ç”¨æ¥åœ¨å®¢æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç®€å•æ–‡ä»¶çš„ä¼ è¾“çš„åè®®ï¼Œæä¾›ä¸å¤æ‚ï¼Œå¼€é”€ä¸å¤§çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚ <em>18å¹´5æœˆç¬¬19é¢˜</em></p><p>Aã€FTP<br>Bã€TFTP<br>Cã€HTTP<br>Dã€SMTP</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘TFTPï¼ˆTrivial File Transfer Protocol,ç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰æ˜¯TCP&#x2F;IPåè®®æ—ä¸­çš„ä¸€ä¸ªç”¨æ¥åœ¨å®¢<br>æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç®€å•æ–‡ä»¶ä¼ è¾“çš„åè®®ï¼Œæä¾›ä¸å¤æ‚ã€å¼€é”€ä¸å¤§çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚ç«¯å£å·ä¸º69ã€‚</p></div></div><hr><p>10ã€æŸå¿«æ¶ˆå“è¿é”ä¼ä¸šå§”æ‰˜ç§‘æŠ€å…¬å¸Aå¼€å‘éƒ¨ç½²ç”µå­å•†åŠ¡å¹³å°ï¼ŒAå…¬å¸æ ¹æ®ç³»ç»Ÿè®¾è®¡ä»»åŠ¡ä¹¦æ‰€ç¡®å®šçš„èŒƒ<br>å›´ï¼Œç¡®å®šç³»ç»Ÿçš„åŸºæœ¬ç›®æ ‡å’Œé€»è¾‘åŠŸèƒ½è¦æ±‚ï¼Œæå‡ºæ–°ç³»ç»Ÿçš„é€»è¾‘æ¨¡å‹ï¼Œè¿™å±äºä¿¡æ¯ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸä¸­ï¼ˆï¼‰é˜¶<br>æ®µçš„å·¥ä½œã€‚ <em>18å¹´5æœˆç¬¬3é¢˜</em></p><p>Aã€ç³»ç»Ÿè§„åˆ’<br>Bã€ç³»ç»Ÿåˆ†æ<br>Cã€ç³»ç»Ÿè®¾è®¡<br>Dã€ç³»ç»Ÿå®æ–½</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘ç³»ç»Ÿåˆ†æé˜¶æ®µçš„ä»»åŠ¡æ˜¯æ ¹æ®ç³»ç»Ÿè®¾è®¡ä»»åŠ¡ä¹¦æ‰€ç¡®å®šçš„èŒƒå›´ï¼Œå¯¹ç°è¡Œç³»ç»Ÿè¿›è¡Œè¯¦ç»†è°ƒæŸ¥ï¼Œæè¿°ç°<br>è¡Œç³»ç»Ÿçš„ä¸šåŠ¡æµç¨‹ï¼ŒæŒ‡å‡ºç°è¡Œç³»ç»Ÿçš„å±€é™æ€§å’Œä¸è¶³ä¹‹å¤„ï¼Œç¡®å®šæ–°ç³»ç»Ÿçš„åŸºæœ¬ç›®æ ‡å’Œé€»è¾‘åŠŸèƒ½è¦æ±‚ï¼Œå³æ<br>å‡ºæ–°ç³»ç»Ÿçš„é€»è¾‘æ¨¡å‹ã€‚</p></div></div><hr><p>11ã€åœ¨è½¯ä»¶éœ€æ±‚åˆ†æä¸­ï¼Œï¼ˆï¼‰åˆ†åˆ«ç”¨æ¥è¡¨ç¤ºåŠŸèƒ½æ¨¡å‹å’Œè¡Œä¸ºæ¨¡å‹ã€‚ <em>19å¹´11æœˆç¬¬7é¢˜</em></p><p>Aã€æ•°æ®æµå›¾ã€çŠ¶æ€è½¬æ¢å›¾<br>Bã€çŠ¶æ€è½¬æ¢å›¾ã€E-Rå›¾<br>Cã€çŠ¶æ€è½¬æ¢å›¾ã€æ•°æ®æµå›¾<br>Dã€E-Rå›¾ã€çŠ¶æ€è½¬æ¢å›¾</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘E-Rå›¾æ˜¯ç”¨æ¥è¡¨ç¤ºæ•°æ®æ¨¡å‹çš„ï¼Œè¡Œä¸ºä¸€èˆ¬ä¸çŠ¶æ€æœ‰å…³ã€‚</p></div></div><hr><p>12ã€ä¸­é—´ä»¶æ˜¯ä¸€ç§ç‹¬ç«‹çš„ç³»ç»Ÿè½¯ä»¶æˆ–æœåŠ¡ç¨‹åºï¼Œï¼ˆï¼‰ä¸å±äºä¸­é—´ä»¶ã€‚ <em>19å¹´11æœˆç¬¬2é¢˜</em><br>Aã€Tomcat<br>Bã€Websphere<br>Cã€ODBC<br>Dã€Python</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘Python å±äºå¼€å‘è¯­è¨€</p></div></div><hr><p>13ã€é¡¹ç›®æˆå‘˜å¼ å·¥ç»˜åˆ¶äº†å››å¼ ç±»å›¾ï¼Œå…¶ä¸­ä¸æ­£ç¡®çš„æ˜¯ï¼ˆï¼‰ã€‚ <em>19å¹´5æœˆç¬¬27é¢˜</em></p><p><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677084628615.png"></p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€ç­”æ¡ˆã€‘<strong>B</strong></p></div></div><hr><p>14ã€åœ¨ UML çš„é¡ºåºå›¾ä¸­ï¼Œé€šå¸¸ç”±å·¦å‘å³åˆ†å±‚æ’åˆ—å„ä¸ªå¯¹è±¡ï¼Œæ­£ç¡®çš„æ’åˆ—æ–¹æ³•æ˜¯ï¼ˆï¼‰ã€‚<em>19å¹´5æœˆç¬¬26é¢˜</em></p><p>Aã€æ‰§è¡Œè€…è§’è‰²ã€æ§åˆ¶ç±»ã€ç”¨æˆ·æ¥å£ã€ä¸šåŠ¡å±‚ã€åå°æ•°æ®åº“<br>Bã€æ‰§è¡Œè€…è§’è‰²ã€ç”¨æˆ·æ¥å£ã€æ§åˆ¶ç±»ã€ä¸šåŠ¡å±‚ã€åå°æ•°æ®åº“<br>Cã€æ‰§è¡Œè€…è§’è‰²ã€æ§åˆ¶ç±»ã€ç”¨æˆ·æ¥å£ã€åå°æ•°æ®åº“ã€ä¸šåŠ¡å±‚<br>Dã€æ‰§è¡Œè€…è§’è‰²ã€ç”¨æˆ·æ¥å£ã€ä¸šåŠ¡å±‚ã€æ§åˆ¶ç±»ã€åå°æ•°æ®åº“</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong></p></div></div><hr><p>15ã€æ‰§è¡Œè€…ä¸ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»æ˜¯ï¼ˆï¼‰ã€‚ <em>19å¹´5æœˆç¬¬25é¢˜</em></p><p>Aã€åŒ…å«å…³ç³»<br>Bã€æ³›åŒ–å…³ç³»<br>Cã€å…³è”å…³ç³»<br>Dã€æ‰©å±•å…³ç³»</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘C<br>ã€è§£æã€‘åœ¨ç”¨ä¾‹å›¾ä¸­æ‰§è¡Œè€…ä¸ç”¨ä¾‹ä¹‹é—´æ˜¯å…³è”å…³ç³»ã€‚</p></div></div><hr><p>16ã€UMLçš„ï¼ˆï¼‰æè¿°äº†ä¸€ä¸ªç‰¹å®šå¯¹è±¡çš„æ‰€æœ‰å¯èƒ½çŠ¶æ€ä»¥åŠç”±äºå„ç§äº‹ä»¶çš„å‘ç”Ÿè€Œå¼•èµ·çš„çŠ¶æ€ä¹‹é—´çš„è½¬ç§»ã€‚ <em>18å¹´11æœˆç¬¬27é¢˜</em></p><p>Aã€æ§åˆ¶å›¾<br>Bã€çŠ¶æ€å›¾<br>Cã€åä½œå›¾<br>Dã€åºåˆ—å›¾</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>B</strong><br>ã€è§£æã€‘çŠ¶æ€å›¾ï¼ˆstate diagramï¼‰ï¼šçŠ¶æ€å›¾æè¿°ä¸€ä¸ªçŠ¶æ€æœºï¼Œå®ƒç”±çŠ¶æ€ã€è½¬ç§»ã€äº‹ä»¶å’Œæ´»åŠ¨ç»„æˆã€‚çŠ¶æ€å›¾ç»™å‡ºäº†å¯¹è±¡çš„åŠ¨æ€è§†å›¾ã€‚å®ƒå¯¹äºæ¥å£ã€ç±»æˆ–åä½œçš„è¡Œä¸ºå»ºæ¨¡å°¤ä¸ºé‡è¦ï¼Œè€Œä¸”å®ƒå¼ºè°ƒäº‹ä»¶å¯¼è‡´çš„å¯¹è±¡è¡Œä¸ºï¼Œè¿™éå¸¸æœ‰åŠ©äºå¯¹ååº”å¼ç³»ç»Ÿå»ºæ¨¡ã€‚</p></div></div><hr><p>17ã€æŸä¼ä¸šè¦å»ºè®¾ä¿¡æ¯ç³»ç»Ÿå¹³å°ï¼Œè¦æ±‚ç³»ç»Ÿå¯ç”¨æ€§è¾¾åˆ°99.99%ã€‚ç³»ç»ŸAå¹³å‡æ— æ•…éšœæ—¶é—´10000å°æ—¶ï¼Œæ•…<br>éšœå¹³å‡ç»´ä¿®æ—¶é—´1å°æ—¶ï¼šç³»ç»ŸBå¹³å‡æ— æ•…éšœæ—¶é—´14000å°æ—¶ï¼Œæ•…éšœå¹³å‡ç»´ä¿®æ—¶é—´1.5å°æ—¶ã€‚ä»¥ä¸‹è¯´æ³•ä¸­ï¼Œ<br>æ­£ç¡®çš„æ˜¯ï¼ˆï¼‰ã€‚ <em>18å¹´11æœˆç¬¬22é¢˜</em></p><p>Aã€åªæœ‰ç³»ç»ŸAç¬¦åˆå¯ç”¨æ€§è¦æ±‚<br>Bã€ç³»ç»ŸAå’Œç³»ç»ŸBå‡ç¬¦åˆå¯ç”¨æ€§è¦æ±‚<br>Cã€åªæœ‰ç³»ç»ŸBç¬¦åˆå¯ç”¨æ€§è¦æ±‚<br>Dã€ç³»ç»ŸAå’Œç³»ç»ŸBéƒ½ä¸ç¬¦åˆå¯ç”¨æ€§è¦æ±‚</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘è®¡ç®—æœºç³»ç»Ÿçš„å¯ç”¨æ€§ç”¨å¹³å‡æ— æ•…éšœæ—¶é—´(MTTF)æ¥åº¦é‡ï¼Œå³è®¡ç®—æœºç³»ç»Ÿå¹³å‡èƒ½å¤Ÿæ­£å¸¸è¿è¡Œå¤šé•¿<br>æ—¶é—´ï¼Œæ‰å‘ç”Ÿä¸€æ¬¡æ•…éšœã€‚ç³»ç»Ÿçš„å¯ç”¨æ€§è¶Šé«˜ï¼Œå¹³å‡æ— æ•…éšœæ—¶é—´è¶Šé•¿ã€‚å¯ç»´æŠ¤æ€§ç”¨å¹³å‡ç»´ä¿®æ—¶é—´(MTTR)<br>æ¥åº¦é‡ï¼Œå³ç³»ç»Ÿå‘ç”Ÿæ•…éšœåç»´ä¿®å’Œé‡æ–°æ¢å¤æ­£å¸¸è¿è¡Œå¹³å‡èŠ±è´¹çš„æ—¶é—´ã€‚ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§è¶Šå¥½ï¼Œå¹³å‡ç»´ä¿®<br>æ—¶é—´è¶ŠçŸ­ã€‚è®¡ç®—æœºç³»ç»Ÿçš„å¯ç”¨æ€§å®šä¹‰ä¸ºï¼šMTTF&#x2F; (MTTF+MTTR) ,kl00%ã€‚ç”±æ­¤å¯è§ï¼Œè®¡ç®—æœºç³»ç»Ÿçš„å¯<br>ç”¨æ€§å®šä¹‰ä¸ºç³»ç»Ÿä¿æŒæ­£å¸¸è¿è¡Œæ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚æ‰€ä»¥ï¼Œæƒ³è¦æé«˜ä¸€ä¸ªç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œè¦ä¹ˆæå‡ç³»ç»Ÿçš„å•æ¬¡<br>æ­£å¸¸å·¥ä½œçš„æ—¶é•¿ï¼Œè¦ä¹ˆå‡å°‘æ•…éšœä¿®å¤æ—¶é—´ã€‚<br>Açš„å¯ç”¨æ€§&#x3D;10000&#x2F;10001&#x3D;99.99%<br>Bçš„å¯ç”¨æ€§&#x3D;14000&#x2F;14001.5 &#x3D; 99.98%<br>åªæœ‰ç³»ç»ŸAè´Ÿè·å¯ç”¨æ€§è¦æ±‚</p></div></div><hr><p>18ã€å…³äºç½‘ç»œå­˜å‚¨æŠ€æœ¯çš„æè¿°ï¼Œæ­£ç¡®çš„æ˜¯ï¼šï¼ˆï¼‰ã€‚<br>Aã€DAS æ˜¯ä¸€ç§æ˜“äºæ‰©å±•çš„å­˜å‚¨æŠ€æœ¯<br>Bã€NAS ç³»ç»Ÿä¸ DAS ç³»ç»Ÿç›¸åŒï¼Œéƒ½æ²¡æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿ<br>Cã€NAS å¯ä»¥ä½¿ç”¨ TCP&#x2F;IP ä½œä¸ºå…¶ç½‘ç»œä¼ è¾“åè®®<br>Dã€SAN é‡‡ç”¨äº†æ–‡ä»¶å…±äº«å­˜å–æ–¹å¼</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>C</strong><br>ã€è§£æã€‘NAS æŠ€æœ¯æ”¯æŒå¤šç§ TCP&#x2F;IP ç½‘ç»œåè®®ï¼Œä¸»è¦æ˜¯NFS (Net File Systemï¼Œç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ)å’Œ CIFS<br>ï¼ˆCommon Internet File Systemï¼Œé€šç”¨ Internet æ–‡ä»¶ç³»ç»Ÿï¼‰æ¥è¿›è¡Œæ–‡ä»¶è®¿é—®ï¼Œæ‰€ä»¥ NAS çš„æ€§èƒ½ç‰¹ç‚¹æ˜¯<br>è¿›è¡Œå°æ–‡ä»¶çº§çš„å…±äº«å­˜å–ã€‚åœ¨å…·ä½“ä½¿ç”¨æ—¶ï¼ŒNASè®¾å¤‡é€šå¸¸é…ç½®ä¸ºæ–‡ä»¶æœåŠ¡å™¨ï¼Œé€šè¿‡ä½¿ç”¨åŸºäº Web çš„ç®¡<br>ç†ç•Œé¢æ¥å®ç°ç³»ç»Ÿèµ„æºçš„é…ç½®ã€ç”¨æˆ·é…ç½®ç®¡ç†å’Œç”¨æˆ·è®¿é—®ç™»å½•ç­‰ã€‚</p></div></div><hr><p>19ã€è½¯ä»¶éœ€æ±‚æ˜¯å¤šå±‚æ¬¡çš„ï¼ŒåŒ…æ‹¬ä¸šåŠ¡éœ€æ±‚ã€ç”¨æˆ·éœ€æ±‚ã€ç³»ç»Ÿéœ€æ±‚ï¼Œå…¶ä¸­ä¸šåŠ¡éœ€æ±‚ï¼ˆï¼‰ã€‚ <em>18å¹´11æœˆç¬¬7é¢˜</em></p><p>Aã€ååº”äº†ä¼ä¸šæˆ–å®¢æˆ·å¯¹ç³»ç»Ÿé«˜å±‚æ¬¡çš„ç›®æ ‡éœ€æ±‚<br>Bã€æè¿°äº†ç”¨æˆ·å…·ä½“ç›®æ ‡æˆ–è€…ç”¨æˆ·è¦æ±‚ç³»ç»Ÿå¿…é¡»å®Œæˆçš„ä»»åŠ¡<br>Cã€ä»ç³»ç»Ÿè§’åº¦æ¥è¯´æ˜è½¯ä»¶çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬åŠŸèƒ½éœ€æ±‚ã€éåŠŸèƒ½éœ€æ±‚å’Œè®¾è®¡çº¦æŸ<br>Dã€æè¿°äº†ç”¨æˆ·ä»»åŠ¡ç³»ç»Ÿåº”è¯¥å…·å¤‡çš„åŠŸèƒ½å’Œæ€§èƒ½</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>A</strong><br>ã€è§£æã€‘ä¸šåŠ¡éœ€æ±‚ã€‚ä¸šåŠ¡éœ€æ±‚æ˜¯æŒ‡åæ˜ ä¼ä¸šæˆ–å®¢æˆ·å¯¹ç³»ç»Ÿé«˜å±‚æ¬¡çš„ç›®æ ‡è¦æ±‚ï¼Œé€šå¸¸æ¥è‡ªé¡¹ç›®æŠ•èµ„äººã€è´­ä¹°äº§å“çš„å®¢æˆ·ã€å®¢æˆ·å•ä½çš„ç®¡ç†äººå‘˜ã€å¸‚åœºè¥é”€éƒ¨é—¨æˆ–äº§å“ç­–åˆ’éƒ¨é—¨ç­‰ã€‚é€šè¿‡ä¸šåŠ¡éœ€æ±‚å¯ä»¥ç¡®å®šé¡¹ç›®è§†å›¾å’ŒèŒƒå›´ï¼Œé¡¹ç›®è§†å›¾å’ŒèŒƒå›´æ–‡æ¡£æŠŠä¸šåŠ¡éœ€æ±‚é›†ä¸­åœ¨ä¸€ä¸ªç®€å•ã€ç´§å‡‘çš„æ–‡æ¡£ä¸­ï¼Œè¯¥æ–‡æ¡£ä¸ºä»¥åçš„å¼€å‘å·¥ä½œå¥ å®šäº†åŸºç¡€ã€‚</p></div></div><hr><p>20ã€UMLå›¾ä¸åŒ…æ‹¬ï¼ˆï¼‰ã€‚ <em>18å¹´5æœˆç¬¬27é¢˜</em></p><p>Aã€ç”¨ä¾‹å›¾<br>Bã€åºåˆ—å›¾<br>Cã€ç»„ä»¶å›¾<br>Dã€ç»§æ‰¿å›¾</p><div class="hide-block"><button type="button" class="hide-button" style="">ç­”æ¡ˆè§£æ    </button><div class="hide-content"><p>ã€é‡è¦æ€§ã€‘ä¸€å®šè¦æŒæ¡<br>ã€ç­”æ¡ˆã€‘<strong>D</strong><br>ã€è§£æã€‘ç±»å›¾è¡¨ç¤ºç±»ã€æ¥å£å’Œå®ƒä»¬ä¹‹é—´çš„åä½œå…³ç³»ï¼Œæ²¡æœ‰ç»§æ‰¿å›¾</p></div></div>]]></content>
    
    
    <summary type="html">ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè€ƒè¯•å±äºå…¨å›½è®¡ç®—æœºæŠ€æœ¯ä¸è½¯ä»¶ä¸“ä¸šæŠ€æœ¯èµ„æ ¼è€ƒè¯•ä¸­çš„ä¸€ä¸ªé«˜çº§è€ƒè¯•ã€‚</summary>
    
    
    
    <category term="è½¯è€ƒ" scheme="https://youngjuning.js.org/categories/%E8%BD%AF%E8%80%83/"/>
    
    
    <category term="ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88/"/>
    
    <category term="ä¿¡æ¯åŒ–" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E5%8C%96/"/>
    
    <category term="ä¿¡æ¯ç³»ç»Ÿ" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="é«˜é¡¹" scheme="https://youngjuning.js.org/tags/%E9%AB%98%E9%A1%B9/"/>
    
  </entry>
  
  <entry>
    <title>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆå¤‡è€ƒæŒ‡å—</title>
    <link href="https://youngjuning.js.org/9698ac1384d7/"/>
    <id>https://youngjuning.js.org/9698ac1384d7/</id>
    <published>2023-02-15T16:04:55.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è€ƒè¯•ä»‹ç»"><a href="#è€ƒè¯•ä»‹ç»" class="headerlink" title="è€ƒè¯•ä»‹ç»"></a>è€ƒè¯•ä»‹ç»</h2><p>å…¨å›½è®¡ç®—æœºæŠ€æœ¯ä¸è½¯ä»¶ä¸“ä¸šæŠ€æœ¯èµ„æ ¼è€ƒè¯•è®¾ä¸‰ä¸ªçº§åˆ«å±‚æ¬¡ï¼Œäº”ä¸ªä¸“ä¸šï¼Œå…±æœ‰ 27 ç§å²—ä½èµ„æ ¼è€ƒè¯•ã€‚è€Œ<strong>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ</strong>è€ƒè¯•å±äºå…¨å›½è®¡ç®—æœºæŠ€æœ¯ä¸è½¯ä»¶ä¸“ä¸šæŠ€æœ¯èµ„æ ¼è€ƒè¯•ä¸­çš„ä¸€ä¸ª<strong>é«˜çº§è€ƒè¯•</strong>ã€‚</p><h2 id="æŠ¥è€ƒæ¡ä»¶"><a href="#æŠ¥è€ƒæ¡ä»¶" class="headerlink" title="æŠ¥è€ƒæ¡ä»¶"></a>æŠ¥è€ƒæ¡ä»¶</h2><p>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè€ƒè¯•æŠ¥è€ƒæ¡ä»¶ä¸è®¾å­¦å†ä¸èµ„å†æ¡ä»¶ã€å¹´é¾„ä»¥åŠä¸“ä¸šç­‰é™åˆ¶ï¼Œè€ƒç”Ÿå¯æ ¹æ®è‡ªå·±çš„æŠ€æœ¯æ°´å¹³é€‰æ‹©åˆé€‚çš„çº§åˆ«ä»¥åŠåˆé€‚çš„èµ„æ ¼è¿›è¡ŒæŠ¥è€ƒã€‚</p><blockquote><p>æ³¨æ„ï¼šæ¯æ¬¡è€ƒè¯•æ¯ä¸ªäººåªå…è®¸æŠ¥è€ƒä¸€ç§èµ„æ ¼ã€‚</p></blockquote><h2 id="è€ƒè¯•æµç¨‹"><a href="#è€ƒè¯•æµç¨‹" class="headerlink" title="è€ƒè¯•æµç¨‹"></a>è€ƒè¯•æµç¨‹</h2><ol><li><a href="https://bm.ruankao.org.cn/sign/welcome">æŠ¥å</a>ï¼ˆ2æœˆ - 3æœˆï¼‰</li><li>æ‰“å°å‡†è€ƒè¯ï¼ˆè€ƒå‰ä¸€å‘¨ï¼‰</li><li>è€ƒè¯•ï¼ˆ5 æœˆ 27 æ—¥ï¼‰</li><li>å…¬å¸ƒæˆç»©ï¼ˆè€ƒåä¸€ä¸ªæœˆå·¦å³ï¼‰</li><li>é¢†å–è¯ä¹¦ï¼ˆ9 æœˆä»½å·¦å³ï¼‰</li></ol><h2 id="è€ƒé¢˜åˆ†æ"><a href="#è€ƒé¢˜åˆ†æ" class="headerlink" title="è€ƒé¢˜åˆ†æ"></a>è€ƒé¢˜åˆ†æ</h2><table><thead><tr><th align="center">ç§‘ç›®</th><th align="center">å†…å®¹</th><th align="center">æ—¶é•¿</th><th align="center">è€ƒè¯•æ—¶é—´</th></tr></thead><tbody><tr><td align="center">ç»¼åˆçŸ¥è¯†</td><td align="center">75é“é€‰æ‹©é¢˜ï¼ŒçŸ¥è¯†èŒƒå›´å¾ˆå¹¿ï¼ŒåŒ…å«ï¼šIT çŸ¥è¯†ã€æ—¶äº‹æ”¿æ²»ã€é¡¹ç›®ç®¡ç†ã€5 åˆ†çš„è¿ç­¹å­¦ã€5 åˆ†è‹±è¯­é¢˜</td><td align="center">150 åˆ†é’Ÿ</td><td align="center">ä¸Šåˆ<br />9:00 - 11:00</td></tr><tr><td align="center">æ¡ˆä¾‹åˆ†æ</td><td align="center">3 é“å¤§é¢˜ï¼š1 é“è®¡ç®—é¢˜ï¼Œ2 é“åˆ†æé¢˜</td><td align="center">90 åˆ†é’Ÿ</td><td align="center">ä¸‹åˆ<br />1:30 - 3:00</td></tr><tr><td align="center">è®ºæ–‡å†™ä½œ</td><td align="center">1 é“è®ºæ–‡é¢˜ï¼Œè€ƒè¯•èŒƒå›´ï¼š<strong>åå¤§ç®¡ç†</strong>ã€å®‰å…¨ç®¡ç†ã€åˆåŒç®¡ç†ã€æ‹›æŠ•æ ‡</td><td align="center">120 åˆ†é’Ÿ</td><td align="center">ä¸‹åˆ<br />3:20 - 5:20</td></tr></tbody></table><h2 id="å­¦ä¹ è®¡åˆ’"><a href="#å­¦ä¹ è®¡åˆ’" class="headerlink" title="å­¦ä¹ è®¡åˆ’"></a>å­¦ä¹ è®¡åˆ’</h2><p>è®¡åˆ’å…±å†æ—¶ 100 å¤©ï¼Œæ¯å¤©æŠ•å…¥ 2 - 3 å°æ—¶ï¼Œæ€»æŠ•å…¥é¢„è®¡ 200 - 300 å°æ—¶ã€‚</p><ul><li>ç¬¬ä¸€é˜¶æ®µï¼ˆ35 å¤©ï¼‰(2023&#x2F;2&#x2F;15 - 2023&#x2F;3&#x2F;21)<ul><li>åŸºç¡€çŸ¥è¯†</li><li>è®¡ç®—ä¸“é¢˜</li></ul></li><li>ç¬¬äºŒé˜¶æ®µï¼ˆ50 å¤©ï¼‰(2023&#x2F;3&#x2F;22 - 2023&#x2F;5&#x2F;10)<ul><li>å†å¹´çœŸé¢˜</li><li>æ¡ˆä¾‹åˆ†æ</li><li>å†™ä½œä¸“é¢˜</li></ul></li><li>ç¬¬ä¸‰é˜¶æ®µ (15 å¤©)ï¼ˆ2023&#x2F;5&#x2F;11 - 2023&#x2F;5&#x2F;26ï¼‰<ul><li>è€ƒå‰å†²åˆº</li></ul></li></ul><h2 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h2><ul><li><a href="https://www.ruankao.org.cn/">ä¸­å›½è®¡ç®—æœºæŠ€æœ¯èµ„æ ¼ç½‘</a></li><li>è½¯è€ƒçœŸé¢˜ App<ul><li><a href="https://apps.apple.com/hk/app/%E8%BD%AF%E8%80%83%E7%9C%9F%E9%A2%98-2022%E4%BF%A1%E6%81%AF%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86-%E7%B3%BB%E7%BB%9F%E9%9B%86%E6%88%90/id1468131830">iOS</a></li><li><a href="https://www.wandoujia.com/apps/7873801">Android</a></li></ul></li><li>è½¯è€ƒé€š App<ul><li><a href="https://apps.apple.com/cn/app/%E8%BD%AF%E8%80%83%E9%80%9A-2022%E5%B9%B4%E8%BD%AF%E4%BB%B6%E6%B0%B4%E5%B9%B3%E8%80%83%E8%AF%95%E6%8F%90%E5%88%86%E7%A5%9E%E5%99%A8/id1498444438">iOS</a></li><li><a href="https://www.wandoujia.com/apps/8095598">Android</a></li></ul></li><li>è½¯è€ƒåˆ·é¢˜ç‹<ul><li>#å°ç¨‹åº:&#x2F;&#x2F;è½¯è€ƒåˆ·é¢˜ç‹&#x2F;I4Jk3d4HRskRbaw</li></ul></li><li><img src="https://cdn.jsdelivr.net/gh/youngjuning/images@main/1677062492249.png" alt="æ­å· E ç±»äººæ‰ç¦åˆ©"></li></ul>]]></content>
    
    
    <summary type="html">ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆè€ƒè¯•å±äºå…¨å›½è®¡ç®—æœºæŠ€æœ¯ä¸è½¯ä»¶ä¸“ä¸šæŠ€æœ¯èµ„æ ¼è€ƒè¯•ä¸­çš„ä¸€ä¸ªé«˜çº§è€ƒè¯•ã€‚</summary>
    
    
    
    <category term="è½¯è€ƒ" scheme="https://youngjuning.js.org/categories/%E8%BD%AF%E8%80%83/"/>
    
    
    <category term="ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88/"/>
    
    <category term="ä¿¡æ¯åŒ–" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E5%8C%96/"/>
    
    <category term="ä¿¡æ¯ç³»ç»Ÿ" scheme="https://youngjuning.js.org/tags/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="é«˜é¡¹" scheme="https://youngjuning.js.org/tags/%E9%AB%98%E9%A1%B9/"/>
    
    <category term="è®¡ç®—æœº" scheme="https://youngjuning.js.org/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>word-wrap å’Œ word-break</title>
    <link href="https://youngjuning.js.org/c607ec2b5110/"/>
    <id>https://youngjuning.js.org/c607ec2b5110/</id>
    <published>2023-02-13T05:47:56.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<p>word-wrap å’Œ word-break æ˜¯ä¸€å¯¹ç”¨äºå•è¯æ–­å¥çš„åŒç”Ÿå±æ€§ï¼Œä½†æ˜¯åˆæœ‰å¾®å¦™çš„åŒºåˆ«ï¼Œæ¯æ¬¡è¦ç”¨çš„æ—¶å€™è¿˜è¦é‡æ–°ç¿»ä¸€ä¸‹ MDN æ–‡æ¡£ï¼Œæœ¬æ–‡åŠ›æ±‚é€šè¿‡ä¸€å¼ æµç¨‹å›¾å¿«é€Ÿè®°å¿†ä¸¤è€…å¦‚ä½•ä½¿ç”¨ã€‚</p><h2 id="word-wrap"><a href="#word-wrap" class="headerlink" title="word-wrap"></a>word-wrap</h2><p>css çš„ word-wrap å±æ€§ç”¨æ¥æ ‡æ˜æ˜¯å¦å…è®¸æµè§ˆå™¨åœ¨å•è¯å†…è¿›è¡Œæ–­å¥ï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢å½“ä¸€ä¸ªå­—ç¬¦ä¸²å¤ªé•¿è€Œæ‰¾ä¸åˆ°å®ƒçš„è‡ªç„¶æ–­å¥ç‚¹æ—¶äº§ç”Ÿæº¢å‡ºç°è±¡ã€‚</p><ul><li>normalï¼šå°±æ˜¯å¤§å®¶å¹³å¸¸è§å¾—æœ€å¤šçš„æ­£å¸¸çš„æ¢è¡Œè§„åˆ™ã€‚</li><li>break-wordï¼šä¸€è¡Œå•è¯ä¸­å®åœ¨æ²¡æœ‰å…¶ä»–é è°±çš„æ¢è¡Œç‚¹çš„æ—¶å€™åœ¨å•è¯å†…æ¢è¡Œã€‚</li></ul><h2 id="word-break"><a href="#word-break" class="headerlink" title="word-break"></a>word-break</h2><p>css çš„ word-break å±æ€§ç”¨æ¥æ ‡æ˜æ€ä¹ˆæ ·è¿›è¡Œå•è¯å†…çš„æ–­å¥ã€‚</p><ul><li>normalï¼šä½¿ç”¨é»˜è®¤çš„æ¢è¡Œè§„åˆ™ï¼Œå³å¦‚æœä¸€ä¸ªå•è¯å¾ˆé•¿ï¼Œå¯¼è‡´ä¸€è¡Œä¸­å‰©ä¸‹çš„ç©ºé—´å·²ç»æ”¾ä¸ä¸‹å®ƒæ—¶ï¼Œåˆ™æµè§ˆå™¨ä¼šæŠŠè¿™ä¸ªå•è¯æŒªåˆ°ä¸‹ä¸€è¡Œå»ã€‚</li><li>break-allï¼šå…è®¸å•è¯æ–­è¡Œï¼Œå³å¦‚æœä¸€ä¸ªå•è¯å¾ˆé•¿ï¼Œå¯¼è‡´ä¸€è¡Œä¸­å‰©ä¸‹çš„ç©ºé—´å·²ç»æ”¾ä¸ä¸‹å®ƒæ—¶ï¼Œåˆ™æµè§ˆå™¨ä¸ä¼šæŠŠè¿™ä¸ªå•è¯æŒªåˆ°ä¸‹ä¸€è¡Œå»ï¼Œè€Œæ˜¯åœ¨å•è¯å†…æ¢è¡Œã€‚</li></ul><h2 id="æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯"><a href="#æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯" class="headerlink" title="æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯"></a>æ­é…ä½¿ç”¨ï¼Œæ¢è¡Œä¸ç´¯</h2><p><img src="https://picbed.qunarzz.com/3d7e329ab089d28c7bde5be75573f1d3.png"></p><blockquote><p>å‚è€ƒèµ„æ–™æ¥è‡ª <a href="https://www.cnblogs.com/2050/archive/2012/08/10/2632256.html">ä½ çœŸçš„äº†è§£word-wrapå’Œword-breakçš„åŒºåˆ«å—ï¼Ÿ</a> å’Œ <a href="https://www.zhangxinxu.com/wordpress/2015/11/diff-word-break-break-all-word-wrap-break-word/">word-break:break-allå’Œword-wrap:break-wordçš„åŒºåˆ«</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;word-wrap å’Œ word-break æ˜¯ä¸€å¯¹ç”¨äºå•è¯æ–­å¥çš„åŒç”Ÿå±æ€§ï¼Œä½†æ˜¯åˆæœ‰å¾®å¦™çš„åŒºåˆ«ï¼Œæ¯æ¬¡è¦ç”¨çš„æ—¶å€™è¿˜è¦é‡æ–°ç¿»ä¸€ä¸‹ MDN æ–‡æ¡£ï¼Œæœ¬æ–‡åŠ›æ±‚é€šè¿‡ä¸€å¼ æµç¨‹å›¾å¿«é€Ÿè®°å¿†ä¸¤è€…å¦‚ä½•ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&quot;word-wrap&quot;&gt;&lt;a href=&quot;#word-wrap&quot; </summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="CSS" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/CSS/"/>
    
    
    <category term="CSS" scheme="https://youngjuning.js.org/tags/CSS/"/>
    
    <category term="word-wrap" scheme="https://youngjuning.js.org/tags/word-wrap/"/>
    
    <category term="word-break" scheme="https://youngjuning.js.org/tags/word-break/"/>
    
  </entry>
  
  <entry>
    <title>OpenAI æ¨å‡ºè¶…ç¥ ChatGPT æ³¨å†Œæ”»ç•¥æ¥äº†</title>
    <link href="https://youngjuning.js.org/d744d1d3d1e8/"/>
    <id>https://youngjuning.js.org/d744d1d3d1e8/</id>
    <published>2023-02-06T07:58:31.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<p>OpenAI æ¨å‡ºè¶…ç¥ ChatGPTï¼Œéå¸¸ç«çˆ†ã€‚ä½†æ˜¯å‘¢ï¼Œå› ä¸ºä¸å¯æŠ—åŠ›åŸå› ï¼Œå¤§éƒ¨åˆ†äººæ— æ³•ä½“éªŒåˆ°ã€‚è¿™é‡Œæˆ‘åˆ†äº«ä¸€ä¸‹æ³¨å†Œçš„æ”»ç•¥ã€‚</p><h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><ul><li>é¦–å…ˆèƒ½èƒ½è®¿é—® Googleï¼ˆå‰ç½®æ¡ä»¶ï¼Œä¸èƒ½æ˜ç¡®è¯´ï¼Œæ‡‚å¾—éƒ½æ‡‚ï¼‰</li><li>ä½ å¾—æœ‰ä¸€ä¸ªå›½å¤–æ‰‹æœºå·ï¼ŒGV å·è‚¯å®šä¸è¡Œã€‚<ul><li>å¦‚æœä½ æ²¡æœ‰å›½å¤–æ‰‹æœºå·ï¼Œæ¨èsms-activate.org</li></ul></li></ul><h3 id="æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼"><a href="#æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼" class="headerlink" title="æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼"></a>æ³¨å†ŒçŸ­ä¿¡å¹³å°å¹¶å……å€¼</h3><ul><li>å…ˆè¡Œæ³¨å†Œsms-activate.org</li><li>æ³¨å†Œå¥½ä¹‹åè¿›è¡Œå¯¹åº”çš„å……å€¼</li></ul><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8acaf6d767714b1d82122cd3206f4ba7~tplv-k3u1fbpfcp-watermark.image"></p><p>æ¥ç è´¹ç”¨ä¸€æ¬¡ä¸º 10.5 å¢å¸ƒï¼Œå¤§çº¦1.2 äººæ°‘å¸ã€‚å› ä¸ºå……å€¼é»˜è®¤ä¸ºç¾å…ƒï¼Œå¯ä»¥é€‰æ‹©å……å€¼ 1 ç¾å…ƒè¿›å»ï¼Œ</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c507b1564d1442d8dfab0ebc8d481e1~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="æ³¨å†ŒOpenAIè´¦å·"><a href="#æ³¨å†ŒOpenAIè´¦å·" class="headerlink" title="æ³¨å†ŒOpenAIè´¦å·"></a>æ³¨å†ŒOpenAIè´¦å·</h3><ul><li>æ‰“å¼€<a href="https://beta.openai.com/signup">https://beta.openai.com/signup</a> é¡µé¢è¿›è¡Œç›¸åº”çš„æ³¨å†Œã€‚<ul><li>è¿™é‡ŒåŒæ ·éœ€è¦ä½ èƒ½è®¿é—®Googleä¸” ip ä¸æ˜¯é¦™æ¸¯ï¼Œæœ€å¥½æ˜¯ç¾å›½ã€æ–°åŠ å¡ç­‰ç­‰ï¼Œä¸ç„¶ä¼šæç¤ºä¸èƒ½åœ¨å½“å‰å›½å®¶æœåŠ¡ã€‚</li></ul></li><li>æ³¨å†ŒæˆåŠŸè¿›å…¥ä¸‹é¢å¡«å†™æ‰‹æœºå·çš„é¡µé¢<ul><li>ä¸‹é¢è®°å¾—åˆ‡æ¢ä¸‹å›½å®¶åŒºå·ï¼Œè¿™é‡Œçš„åŒºå·é»˜è®¤æ˜¯ä½ ä»£ç†çš„ã€‚</li></ul></li></ul><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d50d22c04df0430aa0b2afca70a55beb~tplv-k3u1fbpfcp-watermark.image"></p><h3 id="å‡†å¤‡æ¥ç "><a href="#å‡†å¤‡æ¥ç " class="headerlink" title="å‡†å¤‡æ¥ç "></a>å‡†å¤‡æ¥ç </h3><blockquote><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸‹çš„å°±æ˜¯ï¼Œç›®å‰å¥½åƒå°±åªæœ‰å·´è¥¿æ”¯æŒäº†ï¼Œä¹‹å‰æˆ‘é€‰çš„å°å°¼ï¼Œæ˜¯å¯ä»¥æ”¶åˆ°ç çš„ã€‚</p></blockquote><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79235be8d7104175a6dda1cc63f46937~tplv-k3u1fbpfcp-watermark.image"></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2e4434858ab4cbaaa9e1d8249305547~tplv-k3u1fbpfcp-watermark.image"></p><ul><li>ç„¶åå†åˆšåˆšå¡«å†™æ‰‹æœºå·ç çš„é¡µé¢å¡«å…¥ç”³è¯·çš„æ‰‹æœºå·</li></ul><h3 id="å¼€å§‹ä½¿ç”¨ChatGPT"><a href="#å¼€å§‹ä½¿ç”¨ChatGPT" class="headerlink" title="å¼€å§‹ä½¿ç”¨ChatGPT"></a>å¼€å§‹ä½¿ç”¨ChatGPT</h3><p>æ³¨å†Œå®Œåï¼Œæˆ‘ä»¬å»ChatGPTç½‘ç«™å»ç™»é™†ã€‚<a href="https://chat.openai.com/auth/login">https://chat.openai.com/auth/login</a></p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e474b55d15d4b8ea3c56e7deb5ce8f9~tplv-k3u1fbpfcp-watermark.image"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf36cc1afc9b45539f543211739c9f83~tplv-k3u1fbpfcp-watermark.image"></p><h4 id="12-æœˆ-6-æ—¥æ›´æ–°"><a href="#12-æœˆ-6-æ—¥æ›´æ–°" class="headerlink" title="12 æœˆ 6 æ—¥æ›´æ–°"></a>12 æœˆ 6 æ—¥æ›´æ–°</h4><ul><li>å¦‚æœä½ çš„é¡µé¢å‡ºç°ä¸‹é¢æç¤ºï¼Œè¯´æ˜ä½ ä»£ç†ä¸è¡Œ~~</li></ul><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc290c2a7abf4c9faee9a392819d16e4~tplv-k3u1fbpfcp-watermark.image"></p><ul><li>æ¥ä¸åˆ°ç ï¼Œå¯ä»¥åœ¨é‚£ä¸ªæœ‰æ•ˆæœŸå†…é€€å›æ¢ä¸ªå·è¯•è¯•ã€‚<ul><li>æœ‰äººç›´æ¥æŠŠå‘çš„ç”µè¯è¾“å…¥æ¡†é‡Œï¼Œæ²¡å»æ‰åŒºå·ä¹Ÿå¯ä»¥æ”¶åˆ°</li></ul></li><li>è¿™ä¸ªæ¥ç ç½‘ç«™å¾ˆå…¨é¢ï¼Œæˆ‘æ¼”ç¤ºå……å€¼æ˜¯ 1 ç¾å…ƒï¼Œä½ ä¹Ÿå¯ä»¥å†²ä¸€ä¸ª 0.18ç¾å…ƒ</li><li>ç›®å‰å®Œå…¨æ”¯æŒçš„æ˜¯å°åº¦+å·´è¥¿ã€‚ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–å›½å®¶çš„ any+other é€‰æ‹©åˆé€‚çš„è´¹ç”¨å³å¯ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;OpenAI æ¨å‡ºè¶…ç¥ ChatGPTï¼Œéå¸¸ç«çˆ†ã€‚ä½†æ˜¯å‘¢ï¼Œå› ä¸ºä¸å¯æŠ—åŠ›åŸå› ï¼Œå¤§éƒ¨åˆ†äººæ— æ³•ä½“éªŒåˆ°ã€‚è¿™é‡Œæˆ‘åˆ†äº«ä¸€ä¸‹æ³¨å†Œçš„æ”»ç•¥ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‡†å¤‡&quot;&gt;&lt;a href=&quot;#å‡†å¤‡&quot; class=&quot;headerlink&quot; title=&quot;å‡†å¤‡&quot;&gt;&lt;/a&gt;å‡†å¤‡&lt;/h3&gt;&lt;ul&gt;</summary>
      
    
    
    
    <category term="äººå·¥æ™ºèƒ½" scheme="https://youngjuning.js.org/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
    
    <category term="OPenAI" scheme="https://youngjuning.js.org/tags/OPenAI/"/>
    
    <category term="Chatgpt" scheme="https://youngjuning.js.org/tags/Chatgpt/"/>
    
    <category term="Chatgpt æ³¨å†Œ" scheme="https://youngjuning.js.org/tags/Chatgpt-%E6%B3%A8%E5%86%8C/"/>
    
    <category term="äººå·¥æ™ºèƒ½" scheme="https://youngjuning.js.org/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>2023 å¹´åº¦è®¡åˆ’</title>
    <link href="https://youngjuning.js.org/cb03d5cd6dce/"/>
    <id>https://youngjuning.js.org/cb03d5cd6dce/</id>
    <published>2023-01-31T03:50:26.000Z</published>
    <updated>2023-03-13T01:05:01.398Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸ŠåŠå¹´"><a href="#ä¸ŠåŠå¹´" class="headerlink" title="ä¸ŠåŠå¹´"></a>ä¸ŠåŠå¹´</h1><h2 id="ç»§ç»­æ•™è‚²-40"><a href="#ç»§ç»­æ•™è‚²-40" class="headerlink" title="ç»§ç»­æ•™è‚² 40%"></a>ç»§ç»­æ•™è‚² 40%</h2><blockquote><p>æ¯å¤©è‡³å°‘æŠ½å‡ºä¸¤ä¸ªå°æ—¶å¤‡è€ƒ</p></blockquote><ul><li>ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ</li></ul><h2 id="ç”Ÿæ´»å¨±ä¹-30"><a href="#ç”Ÿæ´»å¨±ä¹-30" class="headerlink" title="ç”Ÿæ´»å¨±ä¹ 30%"></a>ç”Ÿæ´»å¨±ä¹ 30%</h2><blockquote><p>æ¯å¤©è‡³å°‘ 15 åˆ†é’Ÿçš„è¿åŠ¨</p></blockquote><ul><li>å¤‡å­•</li><li>è½æˆ·æ­å·ï¼šä¸ºäº†ä»¥åå­©å­ä¸Šå­¦</li><li>å‡é‡åˆ° 145</li><li>å¸¦åª³å¦‡å»ä¸€ä¸ªæµ·æ»¨åŸå¸‚æ—…æ¸¸</li></ul><h2 id="æŒç»­å­¦ä¹ -30"><a href="#æŒç»­å­¦ä¹ -30" class="headerlink" title="æŒç»­å­¦ä¹  30%"></a>æŒç»­å­¦ä¹  30%</h2><p>æ¯å¤©è‡³å°‘æŠ½å‡ºä¸€ä¸ªå°æ—¶å­¦ä¹ </p><ul><li>ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹å¤ä¹ ä¸€éå¹¶äº§å‡ºä¸€ç¯‡å­¦ä¹ ç¬”è®°</li><li>ã€ŠReact è®¾è®¡ã€‹è¯»ä¸€éå¹¶äº§å‡ºä¸€ç¯‡å­¦ä¹ ç¬”è®°</li><li>ã€ŠJavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯»ä¸€éå¹¶äº§å‡ºä¸€ç¯‡å­¦ä¹ ç¬”è®°</li><li>åŠ›æ‰£ 200 ä¸¤æ—¥åˆ·ä¸€é¢˜</li></ul><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ul><li>ç¿»è¯‘å®Œæˆ <a href="https://github.com/vscode-cn/vscode-api-cn">Vs Code API ä¸­æ–‡æ–‡æ¡£</a></li><li>ç¿»è¯‘å®Œæˆ <a href="https://youngjuning.js.org/react-interview">React é¢è¯•å¿…çŸ¥å¿…ä¼š</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä¸ŠåŠå¹´&quot;&gt;&lt;a href=&quot;#ä¸ŠåŠå¹´&quot; class=&quot;headerlink&quot; title=&quot;ä¸ŠåŠå¹´&quot;&gt;&lt;/a&gt;ä¸ŠåŠå¹´&lt;/h1&gt;&lt;h2 id=&quot;ç»§ç»­æ•™è‚²-40&quot;&gt;&lt;a href=&quot;#ç»§ç»­æ•™è‚²-40&quot; class=&quot;headerlink&quot; title=&quot;ç»§ç»­æ•™è‚² 40</summary>
      
    
    
    
    <category term="æ¼«è°ˆ" scheme="https://youngjuning.js.org/categories/%E6%BC%AB%E8%B0%88/"/>
    
    
    <category term="ç¨‹åºå‘˜" scheme="https://youngjuning.js.org/tags/%E7%A8%8B%E5%BA%8F%E5%91%98/"/>
    
    <category term="æ­å·" scheme="https://youngjuning.js.org/tags/%E6%9D%AD%E5%B7%9E/"/>
    
    <category term="å¹´åº¦è®¡åˆ’" scheme="https://youngjuning.js.org/tags/%E5%B9%B4%E5%BA%A6%E8%AE%A1%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>NPM å¸¸ç”¨å‘½ä»¤</title>
    <link href="https://youngjuning.js.org/8e944d3670b0/"/>
    <id>https://youngjuning.js.org/8e944d3670b0/</id>
    <published>2022-11-17T04:02:58.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å…¨å±€"><a href="#å…¨å±€" class="headerlink" title="å…¨å±€"></a>å…¨å±€</h2><ul><li><code>npm root --location=global</code>ï¼šæŸ¥çœ‹å…¨å±€åŒ…å®‰è£…è·¯å¾„<blockquote><p>Mac ä¸‹é»˜è®¤çš„å…¨å±€è·¯å¾„æ˜¯ï¼š<code>/usr/local/lib/node_modules</code><br>Ubuntu ä¸‹é»˜è®¤çš„å…¨å±€è·¯å¾„æ˜¯: <code>/usr/lib/node_modules</code></p></blockquote></li><li><code>npm ls --location=global</code>ï¼šæŸ¥çœ‹å…¨å±€åŒ…åˆ—è¡¨<ul><li><code>npm ls --location=global --depth 0</code>ï¼šä»…æŸ¥çœ‹ä¸€çº§åŒ…</li><li><code>npm ls --location=global --depth 0 | grep packageName</code>ï¼šæŸ¥çœ‹ä¸€çº§åŒ…å¹¶æœç´¢ç›¸å…³åŒ…</li></ul></li></ul><h2 id="owner"><a href="#owner" class="headerlink" title="owner"></a>owner</h2><p>ç®¡ç†å·²ç»å‘å¸ƒçš„åŒ…çš„æ‰€æœ‰æƒ</p><ul><li><code>npm owner add &lt;user&gt; [&lt;@scope&gt;/]&lt;pkg&gt;</code>ï¼šç»™æŸä¸ªåŒ…æ·»åŠ ç”¨æˆ·</li><li><code>npm owner rm &lt;user&gt; [&lt;@scope&gt;/]&lt;pkg&gt;</code>ï¼šåˆ é™¤æŸä¸ªåŒ…çš„æŸä¸ªç”¨æˆ·</li><li><code>npm owner ls [&lt;@scope&gt;/]&lt;pkg&gt;</code>ï¼šåˆ—å‡ºæŸä¸ªåŒ…çš„æ‰€æœ‰ç”¨æˆ·</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å…¨å±€&quot;&gt;&lt;a href=&quot;#å…¨å±€&quot; class=&quot;headerlink&quot; title=&quot;å…¨å±€&quot;&gt;&lt;/a&gt;å…¨å±€&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;npm root --location=global&lt;/code&gt;ï¼šæŸ¥çœ‹å…¨å±€åŒ…å®‰è£…è·¯å¾„&lt;blockquote&gt;
&lt;p</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="npm" scheme="https://youngjuning.js.org/tags/npm/"/>
    
    <category term="å‘½ä»¤" scheme="https://youngjuning.js.org/tags/%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>2023 å¸¸ç”¨ NPM åŒ…æ¨è</title>
    <link href="https://youngjuning.js.org/db7a22999938/"/>
    <id>https://youngjuning.js.org/db7a22999938/</id>
    <published>2022-11-02T07:58:31.000Z</published>
    <updated>2023-03-13T01:05:01.398Z</updated>
    
    <content type="html"><![CDATA[<p>å¸®åŠ©å¼€å‘è€…ä» NPM åŒ…é€‰å‹çš„è§’åº¦æ„ŸçŸ¥å’Œå»ºç«‹å‰ç«¯å·¥ç¨‹åŒ–ä½“ç³»ã€‚</p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><h3 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h3><p><a href="https://www.npmjs.com/package/tape">tape</a></p><h2 id="ç¼–è¯‘å·¥å…·"><a href="#ç¼–è¯‘å·¥å…·" class="headerlink" title="ç¼–è¯‘å·¥å…·"></a>ç¼–è¯‘å·¥å…·</h2><ul><li><a href="https://www.npmjs.com/package/babel">babel</a></li></ul><h2 id="æ„å»ºå·¥å…·"><a href="#æ„å»ºå·¥å…·" class="headerlink" title="æ„å»ºå·¥å…·"></a>æ„å»ºå·¥å…·</h2><ul><li><a href="https://www.npmjs.com/package/webpack">webpack</a></li><li><a href="https://www.npmjs.com/package/rollup">rollup</a></li><li><a href="https://www.npmjs.com/package/esbuild">esbuild</a></li></ul><h2 id="dotenv"><a href="#dotenv" class="headerlink" title="dotenv"></a>dotenv</h2><ul><li><a href="https://www.npmjs.com/package/dotenv">dotenv</a></li></ul><h2 id="Node-js-CLI"><a href="#Node-js-CLI" class="headerlink" title="Node.js CLI"></a>Node.js CLI</h2><h3 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h3><ul><li><a href="https://www.npmjs.com/package/commander">commander</a>: Node.jså‘½ä»¤è¡Œç•Œé¢çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ,å—Ruby Commanderå¯å‘ã€‚ å‰ç«¯å¼€å‘node cli å¿…å¤‡æŠ€èƒ½ã€‚</li><li><a href="https://www.npmjs.com/package/yargs">yargs</a>: åŠŸèƒ½æ¯”è¾ƒå…¨ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥æ¯”è¾ƒå¤æ‚ã€‚</li></ul><h3 id="å‘½ä»¤è¡Œå‚æ•°è§£æ"><a href="#å‘½ä»¤è¡Œå‚æ•°è§£æ" class="headerlink" title="å‘½ä»¤è¡Œå‚æ•°è§£æ"></a>å‘½ä»¤è¡Œå‚æ•°è§£æ</h3><ul><li><a href="https://www.npmjs.com/package/yargs-parser">yargs-parser</a>ï¼šyargs å‘½ä»¤è¡Œæ¡†æ¶å†…ç½®çš„å‘½ä»¤è¡Œå‚æ•°è§£æåº“ï¼ŒåŠŸèƒ½æ¯”è¾ƒå…¨ï¼Œæ¯”è¾ƒé€‚åˆå·¥ç¨‹åŒ–å®ç”¨ã€‚</li><li><a href="https://www.npmjs.com/package/minimist">minimist</a>ï¼šå¦‚æœä½ å–œæ¬¢è½»é‡çº§çš„æŠ€æœ¯ï¼Œé‚£ä¹ˆ minimist è¶³å¤Ÿç®€å•å¥½ç”¨ï¼Œä»£ç é‡ä¹Ÿå¾ˆå°‘ï¼ˆåªæœ‰å‡ ç™¾è¡Œï¼‰ï¼Œéå¸¸é€‚åˆç ”è¯»ã€‚</li><li>inquire.js</li><li>chalk: ç¾åŒ–å‘½ä»¤è¡Œçš„æ¨¡å—</li><li>ora: ä¼˜é›…çš„ spinner</li><li>ncp: å¼‚æ­¥çš„æ‹·è´æ–‡ä»¶ï¼ŒåŒ…å«ç©ºæ–‡ä»¶å¤¹</li><li>recursive-readdir: é€’å½’åœ°åˆ—å‡ºç›®å½•å’Œå­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¸åŒ…å«ç›®å½•æœ¬èº«ã€‚</li><li>shelljs: åœ¨ Node.js ä¸­æ‰§è¡Œ Unix shell å‘½ä»¤</li><li>log-symbols: æ‰“å°æ—¥å¿—çš„ç‰¹æ®Šæ ‡å¿—</li><li><a href="https://www.npmjs.com/package/download-git-repo">download-git-repo</a>: Download and extract a git repository (GitHub, GitLab, Bitbucket) from node</li><li><a href="https://www.npmjs.com/package/global-prefix">global-prefix</a>: è·å– npm å…¨å±€å®‰è£…çš„å‰ç¼€</li><li><a href="https://www.npmjs.com/package/exec-sh">exec-sh</a>: æ‰§è¡Œ shell å‘½ä»¤è½¬å‘æ‰€æœ‰ stdio æµï¼Œæ¯” shelljs exec å‘½ä»¤å¥½ç”¨</li><li><a href="https://www.npmjs.com/package/wml">wml</a>: wml ä¾¦å¬æŸä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ›´æ”¹ï¼ˆä½¿ç”¨ watchmanï¼‰ï¼Œç„¶åå°†æ›´æ”¹çš„æ–‡ä»¶å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚</li><li><a href="https://blog.ihaiu.com/cmd-open/">cmd-open</a>: æ‰©å±• Windows å‘½ä»¤ open</li><li><a href="https://github.com/shelljs/shx">shx</a>: shx is a wrapper around ShellJS Unix commands, providing an easy solution for simple Unix-like, cross-platform commands in npm package scripts.</li></ul><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="css-modules"><a href="#css-modules" class="headerlink" title="css modules"></a>css modules</h3><ul><li><a href="https://www.npmjs.com/package/clsx">clsx</a></li><li><a href="https://www.npmjs.com/package/classnames">classnames</a></li></ul><h3 id="css-in-js"><a href="#css-in-js" class="headerlink" title="css-in-js"></a>css-in-js</h3><ul><li><a href="https://www.npmjs.com/package/styled-components">styled-components</a></li></ul><h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h3 id="çŠ¶æ€ç®¡ç†"><a href="#çŠ¶æ€ç®¡ç†" class="headerlink" title="çŠ¶æ€ç®¡ç†"></a>çŠ¶æ€ç®¡ç†</h3><ul><li><a href="https://www.npmjs.com/package/redux">redux</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¸®åŠ©å¼€å‘è€…ä» NPM åŒ…é€‰å‹çš„è§’åº¦æ„ŸçŸ¥å’Œå»ºç«‹å‰ç«¯å·¥ç¨‹åŒ–ä½“ç³»ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æµ‹è¯•&quot;&gt;&lt;a href=&quot;#æµ‹è¯•&quot; class=&quot;headerlink&quot; title=&quot;æµ‹è¯•&quot;&gt;&lt;/a&gt;æµ‹è¯•&lt;/h2&gt;&lt;h3 id=&quot;å•å…ƒæµ‹è¯•&quot;&gt;&lt;a href=&quot;#å•å…ƒæµ‹è¯•&quot; class</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="NPM" scheme="https://youngjuning.js.org/tags/NPM/"/>
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="å‰ç«¯å·¥ç¨‹åŒ–" scheme="https://youngjuning.js.org/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"/>
    
    <category term="å‰ç«¯å¼€å‘" scheme="https://youngjuning.js.org/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯æ— æ„ŸçŸ¥åˆ·æ–° Token</title>
    <link href="https://youngjuning.js.org/ac2c22966f31/"/>
    <id>https://youngjuning.js.org/ac2c22966f31/</id>
    <published>2022-10-31T05:43:33.000Z</published>
    <updated>2023-03-13T01:05:01.402Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬åç«¯éƒ½è¦æ±‚åœ¨è¯·æ±‚æ¥å£æ—¶ä¼ é€’ç™»å½•çš„ Tokenã€‚ä¸ºäº†é˜²æ­¢ Token æ³„æ¼çš„é£é™©ï¼ŒæœåŠ¡å™¨çš„ Token ä¸€èˆ¬ä¸ä¼šè®¾ç½®å¤ªé•¿æ—¶é—´ï¼Œæ¯”å¦‚æˆ‘æœ€è¿‘è”è°ƒçš„ï¼Œä¸¤ä¸ªå°æ—¶å°±ä¼šè¿‡æœŸï¼Œtoken è¿‡æœŸå°±éœ€è¦é‡æ–°ç™»é™†ã€‚é¢‘ç¹è¦æ±‚ç™»é™†ä¼šé€ æˆç”¨æˆ·ä½“éªŒå·®ï¼Œæ‰€ä»¥åç«¯åŒæ—¶ä¼šæä¾›åˆ·æ–° Token çš„æ¥å£ï¼Œæœ¬æ–‡å°±æ˜¯è®°å½•ä¸€ä¸‹å‡ ç§æ— æ„ŸçŸ¥åˆ·æ–°çš„æ–¹æ³•ã€‚</p><h2 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h2><p>åœ¨ç™»å½•æ—¶ï¼Œåç«¯è¿”å›è¿‡æœŸæ—¶é—´ï¼Œå‰ç«¯æ¯æ¬¡è¯·æ±‚å°±åˆ¤æ–­ token çš„è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœå¿«åˆ°è¿‡æœŸæ—¶é—´ï¼Œå°±å»è°ƒç”¨åˆ·æ–° token æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å°è£…ä¸€ä¸ª refreshToken æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">refreshToken</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">dayjs</span>().<span class="title function_">diff</span>(<span class="params">LOCAL_REFRESH_TIME &gt; LOCAL_EXPIRE</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">global</span>.<span class="property">workPromise</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">global</span>.<span class="property">workPromise</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">async</span> (resolve) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;data&#125; = <span class="keyword">await</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`https://api.com/login`</span>,</span><br><span class="line">        <span class="comment">// other config</span></span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// æ›´æ–° LOCAL_REFRESH_TIME</span></span><br><span class="line">      <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="literal">null</span>;</span><br><span class="line">      <span class="title function_">resolve</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">global</span>.<span class="property">workPromise</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Access</span>_Token</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•ä¸»è¦åŸç†æ˜¯é€šè¿‡å°† refresh æ¥å£è¯·æ±‚å­˜åœ¨å…¨å±€çš„ workPromise ä¸­æ¥ä¿è¯åœ¨å¹¶å‘è¯·æ±‚æ¥å£æ—¶åªå­˜åœ¨ä¸€ä¸ªè¯·æ±‚ã€‚</p><h2 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h2><p>ç™»å½•æ—¶è®¾ç½®å®šæ—¶å™¨åˆ·æ–° token æ¥å£ï¼Œè¯·æ±‚çš„æ—¶å€™åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰ workPromise å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±ç­‰åˆ·æ–°å®Œæˆã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç™»å½•åè®¾ç½®å®šæ—¶å™¨</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">async</span> (resolve) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;data&#125; = <span class="keyword">await</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`https://api.com/login`</span>,</span><br><span class="line">      <span class="comment">// other config</span></span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    cookies.<span class="title function_">set</span>(<span class="string">&#x27;refresh_time&#x27;</span>)</span><br><span class="line">    <span class="variable language_">global</span>.<span class="property">workPromise</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="variable constant_">EXPIRE</span> / <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">request</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">global</span>.<span class="property">workPromise</span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">global</span>.<span class="title function_">workPromise</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ¡ˆç”±äºæœ‰å®šæ—¶å™¨ä¸€ç›´å­˜åœ¨ï¼Œä¼šé¢å¤–æ¶ˆè€—èµ„æºï¼Œä¸æ¨èä½¿ç”¨ã€‚</p><h2 id="æ–¹æ¡ˆä¸‰"><a href="#æ–¹æ¡ˆä¸‰" class="headerlink" title="æ–¹æ¡ˆä¸‰"></a>æ–¹æ¡ˆä¸‰</h2><p>å¦‚æœä½¿ç”¨äº† axiosï¼Œå¯ä»¥åœ¨è¯·æ±‚å“åº”æ‹¦æˆªå™¨ä¸­æ‹¦æˆªï¼Œåˆ¤æ–­ token è¿”å›è¿‡æœŸåï¼Œè°ƒç”¨åˆ·æ–° token æ¥å£ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¯å¦æ­£åœ¨åˆ·æ–°çš„æ ‡è®°</span></span><br><span class="line"><span class="keyword">let</span> isRefreshing = <span class="literal">false</span></span><br><span class="line"><span class="comment">//é‡è¯•é˜Ÿåˆ—</span></span><br><span class="line"><span class="keyword">let</span> requests = []</span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//çº¦å®šcode 409 token è¿‡æœŸ</span></span><br><span class="line">    <span class="keyword">if</span> (response.<span class="property">data</span>.<span class="property">code</span> === <span class="number">409</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!isRefreshing) &#123;</span><br><span class="line">        isRefreshing = <span class="literal">true</span></span><br><span class="line">        <span class="comment">//è°ƒç”¨åˆ·æ–°tokençš„æ¥å£</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">refreshToken</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; token &#125; = res.<span class="property">data</span></span><br><span class="line">          <span class="comment">// æ›¿æ¢token</span></span><br><span class="line">          <span class="title function_">setToken</span>(token)</span><br><span class="line">          response.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`<span class="subst">$&#123;token&#125;</span>`</span></span><br><span class="line">           <span class="comment">// token åˆ·æ–°åå°†æ•°ç»„çš„æ–¹æ³•é‡æ–°æ‰§è¡Œ</span></span><br><span class="line">          requests.<span class="title function_">forEach</span>(<span class="function">(<span class="params">cb</span>) =&gt;</span> <span class="title function_">cb</span>(token))</span><br><span class="line">          requests = [] <span class="comment">// é‡æ–°è¯·æ±‚å®Œæ¸…ç©º</span></span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">service</span>(response.<span class="property">config</span>)</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">//è·³åˆ°ç™»å½•é¡µ</span></span><br><span class="line">          <span class="title function_">removeToken</span>()</span><br><span class="line">          router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">        &#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          isRefreshing = <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// è¿”å›æœªæ‰§è¡Œ resolve çš„ Promise</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// ç”¨å‡½æ•°å½¢å¼å°† resolve å­˜å…¥ï¼Œç­‰å¾…åˆ·æ–°åå†æ‰§è¡Œ</span></span><br><span class="line">          requests.<span class="title function_">push</span>(<span class="function"><span class="params">token</span> =&gt;</span> &#123;</span><br><span class="line">            response.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`<span class="subst">$&#123;token&#125;</span>`</span></span><br><span class="line">            <span class="title function_">resolve</span>(<span class="title function_">service</span>(response.<span class="property">config</span>))</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response &amp;&amp; response.<span class="property">data</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬åç«¯éƒ½è¦æ±‚åœ¨è¯·æ±‚æ¥å£æ—¶ä¼ é€’ç™»å½•çš„ Tokenã€‚ä¸ºäº†é˜²æ­¢ Token æ³„æ¼çš„é£é™©ï¼ŒæœåŠ¡å™¨çš„ Token ä¸€èˆ¬ä¸ä¼šè®¾ç½®å¤ªé•¿æ—¶é—´ï¼Œæ¯”å¦‚æˆ‘æœ€è¿‘è”è°ƒçš„ï¼Œä¸¤ä¸ªå°æ—¶å°±ä¼šè¿‡æœŸï¼Œtoken è¿‡æœŸå°±éœ€è¦é‡æ–°ç™»é™†ã€‚é¢‘ç¹è¦æ±‚ç™»é™†ä¼šé€ æˆç”¨æˆ·ä½“éªŒå·®ï¼Œæ‰€ä»¥åç«¯åŒæ—¶ä¼šæä¾›åˆ·æ–° Token</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://youngjuning.js.org/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="ç½‘ç»œç¼–ç¨‹" scheme="https://youngjuning.js.org/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
</feed>
